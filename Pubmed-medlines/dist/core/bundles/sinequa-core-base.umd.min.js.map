{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/core/base/utils.ts","../../../projects/core/base/error.ts","../../../projects/core/base/keyboard.ts","../../../projects/core/base/pattern-matcher.ts","../../../projects/core/base/iterator-adaptor.ts","../../../projects/core/base/item-array-view.ts","../../../projects/core/base/polyfills.ts","../../../projects/core/base/base.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","create","__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","__read","n","r","e","ar","push","error","SqErrorCode","SqHttpParameterCodec","prototype","encodeKey","key","encodeURIComponent","encodeValue","decodeKey","decodeURIComponent","decodeValue","FrameTask","callback","params","this","apply","arguments","concat","__spread","Timer","name","start","performance","now","duration","stop","console","log","Math","round","Utils","baseExtend","dst","objs","deep","sort","ii","obj","isObject","isFunction","keys","j","jj","src","isDate","Date","valueOf","isRegExp","RegExp","nodeName","cloneNode","isArray","extend","destination","sources","_a","merge","mergeAndSort","forEach","context","isArrayLike","isPrimitive","isBlankObject","copy","source","stackSource","stackDest","isTypedArray","Error","copyRecurse","copyElement","index","indexOf","isWindow","needsRecurse","constructor","getTime","matches","toString","match","lastIndex","getPrototypeOf","copyWithoutNullOrEmpty","isEmpty","copyDefaults","defaults","_defaults","equals","o1","o2","isEqual","toInt","str","_default","parseInt","isNaN","toNumber","parseFloat","toDate","ms","parse","getTimezoneOffset","date","getHours","getMinutes","getSeconds","getMilliseconds","defineProperty","toSysDateStr","moment","format","fromSysDateStr","isValid","isSysDateTime","rxSysDateTime","test","isISO8601DateTime","rxISO8601DateTime","toJson","options","pretty","JSON","stringify","fromJson","reviveDates","ISO_8601","undefined","exception","toSqlValue","quote","isNumber","isBoolean","ret_1","v","isString","display","splice","join","treeClean","addUrl","replace","treeFirst","parts","split","treeFirstNode","treeLast","treeLastNode","treeNodes","treeDisplay","substr","treeCount","count","traverse","nodes","lineage","stack","_i","node","pop","items","guid","withHyphens","c","random","floor","isUndefined","isScalar","isIterable","isMap","window","isFile","isFormData","isBlob","isArrayBuffer","item","TYPED_ARRAY_REGEXP","delay","Promise","resolve","reject","setTimeout","isTrue","toLowerCase","compare","a","ignoreCase","toLocaleUpperCase","localeCompare","eq","eqNC","eqNCN","_b","b_1","b_1_1","len","startsWith","endsWith","includes","toUpperCase","toUpperFirst","toLocaleLowerCase","toLowerFirst","toStartCase","text","map","trim","trimStart","trimEnd","truncate","maxLength","suffix","substring","regExEscape","regExEscapeRegEx","pattern","replacement","separators","removeEmpty","rxs","filter","toKebabCase","kebabCase","toSnakeCase","snakeCase","toCamelCase","camelCase","removeAccents","removeDiacritics","normalize","isValidSimpleName","isValidScopedSimpleName","sub","pos","toBase64","btoa","hex","String","fromCharCode","fromBase64","atob","charCodeAt","slice","sha256","sha","jsSHA","update","getHash","sha512","encodeHTML","escape","decodeHTML","unescape","getField","clearObject","_delete","prop","clear","deltas","template","override","ret","_c","diff","pick","keys_1","keys_1_1","debounce","func","wait","immediate","every","timeout","args","timestamp","result","later","last","callNow","throttle","previous","leading","throttled","remaining","clearTimeout","trailing","frame","frameTasks","size","requestAnimationFrame","task","get","set","makeURL","url","base","URL","addSearchParams","urlObj","param","searchParams","_addUrl","path","paths","_url","paths_1","paths_1_1","isUrlAbsolute","makeHttpParams","httpParams","HttpParams","encoder","_value","escapeHtml","html","escapeDiv","document","createElement","textNode","appendChild","createTextNode","escapedHtml","innerHTML","removeChild","arrayMove","array","from","to","arraySet","target","genericNext","genericError","genericComplete","subscribe","observable","complete","asDate","asNumber","testInteger","testFloat","asString","roundAway","num","sign","abs","matchSuffix","factor","suffixes","suffixes_1","suffixes_1_1","toSize","calculateDuration","current","unit","oneDay","oneHour","oneMinute","oneSecond","toDuration","defaultUnit","total","tokens","tokens_1","tokens_1_1","token","Map","Keys","PatternType","SqError","code","message","data","_this","_super","__","__extends","is","loginCancelled","processedCredentialsError","principalSwitched","autoLoginError","IteratorAdaptor","adaptor","return","translate","throw","forIterable","iterable","ArrayBasedView","nameSelector","valueSelector","toNameValuePair","getName","getValue","names","values","thisArg","idx","NameValueArrayViewHelper","fromArray","fromObjects","nameKey","valueKey","Pattern","load","_type","_text","getPatternType","Value","Empty","isPattern","doMatch","_pattern","isMatch","wildcardToRegex","cleanPattern","sb","lastIsStar","s_1","s_1_1","ch","reg","preparedPattern1","getTypeValueText","type","getTypeRegexPattern","isTypeValue","Patterns","_preparedPatterns","_values","_isEmpty","l","innerSetList","getTypeCount","_d","l_1","l_1_1","val","setText","list","hasPatterns","logdisplay","PatternMatcher","includedLogDisplay","excludedLogDisplay","includedPattern","excludedPattern","isExcluded","isIncluded","isExplicitlyIncluded","isExplicitlyExcluded","focusWithin","Element","scrollIntoViewIfNeeded","centerIfNeeded","withinBounds","min","max","extent","parent","elem","area","makeArea","left","top","width","height","right","bottom","x","y","relativeFromTo","lhs","rhs","newLeft","newTop","offsetParent","offsetLeft","clientLeft","offsetTop","clientTop","offsetWidth","offsetHeight","parentNode","HTMLElement","scrollLeft","clientWidth","scrollTop","clientHeight","CustomEvent","event","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","location","origin","protocol","hostname","port","fakeStorage","storageName","storage","needed","setItem","removeItem","warn","dispatchStorageEvent","newValue","oldValue","getItem","href","storageEvent","dispatchEvent","global","number","Number","different","u","DOMRect","xArg","yArg","wArg","hArg","defineProperties","newX","enumerable","newY","newWidth","newHeight","msMatchesSelector","webkitMatchesSelector","closest","el","parentElement","nodeType","BaseModule","imports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {HttpParams, HttpParameterCodec} from \"@angular/common/http\";\nimport {Observable, Subscription} from \"rxjs\";\nimport moment from \"moment\";\nimport {remove as removeDiacritics} from \"diacritics\";\nimport jsSHA from \"jssha\";\nimport {MapOf} from \"./map-of\";\nimport {FieldValue} from \"./field-value\";\nimport kebabCase from \"lodash/kebabCase\";\nimport snakeCase from \"lodash/snakeCase\";\nimport camelCase from \"lodash/camelCase\";\nimport escape from \"lodash/escape\";\nimport unescape from \"lodash/unescape\";\nimport isEqual from \"lodash/isEqual\";\n\n// Because of: https://github.com/angular/angular/issues/18261\nclass SqHttpParameterCodec implements HttpParameterCodec {\n    encodeKey(key: string): string {\n        return encodeURIComponent(key);\n    }\n\n    encodeValue(value: string): string {\n        return encodeURIComponent(value);\n    }\n\n    decodeKey(key: string): string {\n        return decodeURIComponent(key);\n    }\n\n    decodeValue(value: string): string {\n        return decodeURIComponent(value);\n    }\n}\n\n/**\n * Describes options for the [Utils.toJson]{@link Utils#toJson} method\n */\nexport interface ToJsonOptions {\n    /**\n     * If `true` then spacing is added to the output string\n     */\n    pretty?: boolean;\n}\n\n/**\n * Describes options for the [Utils.fromJson]{@link Utils#fromJson} method\n */\nexport interface FromJsonOptions {\n    /**\n     * If `true` then strings containing either ISO8601 or Sinequa \"system\" dates (`yyyy-mm-dd [hh:mm:ss]`) are\n     * converted to Javascript `Date` objects\n     */\n    reviveDates?: boolean;\n}\n\n/**\n * Describes options for the [Utils.throttle]{@link Utils#throttle} method\n */\nexport interface ThrottleSettings {\n    /**\n     * Set to `false` to disable the initial call to the callback function\n     */\n    leading?: boolean;\n    /**\n     * Set to `false` to disable the final call to the callback function\n     */\n    trailing?: boolean;\n}\n\nclass FrameTask {\n    constructor(\n        public callback: (...params) => any,\n        public params: any[]) {\n    }\n\n    call(): any {\n        return this.callback(...this.params);\n    }\n}\n\n/**\n * A utility class to log execution durations\n */\nexport class Timer {\n    /**\n     * Contains the timestamp of when the `Timer` object was instantiated\n     */\n    readonly start = performance.now();\n    /**\n     * Contains the current durartion in milliseconds of the `Timer` object\n     */\n    duration = 0;\n\n    constructor(private readonly name: string) {\n    }\n\n    /**\n     * Updates the `duration` of the `Timer` object\n     */\n    stop() {\n        this.duration = performance.now() - this.start;\n        console.log(`Timer: ${this.name} finished in ${Math.round(this.duration)} ms`);\n    }\n}\n\n/**\n * A generic interface for tree nodes\n */\nexport interface TreeNode {\n    /**\n     * Children elements of this tree node\n     */\n    items?: TreeNode[];\n}\n\n/**\n * A utility class containing a variety of static methods and properties\n */\n// @dynamic\nexport class Utils {\n    /**\n     * The number of milliseconds in one day\n     */\n    static readonly oneDay = 86400000;\n    /**\n     * The number of milliseconds in one hour\n     */\n    static readonly oneHour = 3600000;\n    /**\n     * The number of milliseconds in one minute\n     */\n    static readonly oneMinute = 60000;\n    /**\n     * The number of milliseconds in one second\n     */\n    static readonly oneSecond = 1000;\n\n    private static baseExtend(dst, objs, deep?: boolean, sort?: boolean | ((a: string, b: string) => number)) {\n        for (let i = 0, ii = objs.length; i < ii; ++i) {\n            const obj = objs[i];\n            if (!Utils.isObject(obj) && !Utils.isFunction(obj)) {\n                continue;\n            }\n            let keys = Object.keys(obj);\n            if (sort) {\n                if (Utils.isFunction(sort)) {\n                    keys = keys.sort(sort);\n                }\n                else {\n                    keys = keys.sort();\n                }\n            }\n            for (let j = 0, jj = keys.length; j < jj; j++) {\n                const key = keys[j];\n                const src = obj[key];\n                if (deep && Utils.isObject(src)) {\n                    if (Utils.isDate(src)) {\n                        dst[key] = new Date(src.valueOf());\n                    }\n                    else if (Utils.isRegExp(src)) {\n                        dst[key] = new RegExp(src);\n                    }\n                    else if (src.nodeName) {\n                        dst[key] = src.cloneNode(true);\n                    }\n                    else {\n                        if (!Utils.isObject(dst[key])) {\n                            dst[key] = Utils.isArray(src) ? [] : {};\n                        }\n                        Utils.baseExtend(dst[key], [src], true);\n                    }\n                }\n                else {\n                    dst[key] = src;\n                }\n            }\n        }\n        return dst;\n    }\n\n    /**\n     * Shallowly copy the properties in the source objects to the destination object.\n     * Any nested objects or arrays will be copied by reference, not duplicated.\n     * The source objects are treated in order so properties in later\n     * objects will override properties in earlier ones.\n     *\n     * @param destination The object to which properties are copied\n     * @param sources Objects from which properties are copied\n     * @return the destination object\n     */\n    static extend(destination: any, ...sources: any[]): any {\n        return Utils.baseExtend(destination, sources, false);\n    }\n\n    /**\n     * Deeply copy the properties in the source objects to the destination object.\n     * Any nested objects or arrays will be duplicated.\n     * The source objects are treated in order so properties in later\n     * objects will override properties in earlier ones.\n     *\n     * @param destination The object to which properties are copied\n     * @param sources Objects from which properties are copied\n     * @return the destination object\n     */\n    static merge(destination: any, ...sources: any[]): any {\n        return Utils.baseExtend(destination, sources, true);\n    }\n\n    /**\n     * Deeply copy the properties in the source objects to the destination object.\n     * Any nested objects or arrays will be duplicated.\n     * The source objects are treated in order so properties in later\n     * objects will override properties in earlier ones.\n     * The properties of the source objects are sorted in ascending, ASCII character order\n     * before they are copied to ensure a consistent insertion order in the destination\n     * object.\n     *\n     * @param destination The object to which properties are copied\n     * @param sources Objects from which properties are copied\n     * @return the destination object\n     */\n    static mergeAndSort(destination: any, ...sources: any[]): any {\n        return Utils.baseExtend(destination, sources, true, true);\n    }\n\n    private static forEach(obj, iterator, context?) {\n        let key, length;\n        if (obj) {\n            if (Utils.isFunction(obj)) {\n                for (key in obj) {\n                    // Need to check if hasOwnProperty exists,\n                    // as on IE8 the result of querySelectorAll is an object without a hasOwnProperty function\n                    if (key !== 'prototype' && key !== 'length' && key !== 'name' && (!obj.hasOwnProperty || obj.hasOwnProperty(key))) {\n                    iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            } else if (Utils.isArray(obj) || Utils.isArrayLike(obj)) {\n                const isPrimitive = typeof obj !== 'object';\n                for (key = 0, length = obj.length; key < length; key++) {\n                    if (isPrimitive || key in obj) {\n                        iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            } else if (obj.forEach && obj.forEach !== Utils.forEach) {\n                obj.forEach(iterator, context, obj);\n            } else if (Utils.isBlankObject(obj)) {\n                // createMap() fast path --- Safe to avoid hasOwnProperty check because prototype chain is empty\n                for (key in obj) {\n                    iterator.call(context, obj[key], key, obj);\n                }\n            } else if (typeof obj.hasOwnProperty === 'function') {\n                // Slow path for objects inheriting Object.prototype, hasOwnProperty check needed\n                for (key in obj) {\n                    if (obj.hasOwnProperty(key)) {\n                    iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            } else {\n            // Slow path for objects which do not have a method `hasOwnProperty`\n            for (key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    iterator.call(context, obj[key], key, obj);\n                }\n            }\n            }\n        }\n        return obj;\n    }\n\n    /**\n     * Makes a deep copy of the passed object or array and returns it.\n     * Copies of source objects of the following types: `TypedArray`, `Date`, `RegExp` `Node` are\n     * made using the appropriate constructor. Arrays are created using `[]`. Other objects are created\n     * using `Object.create` passing the source object's protptype, if any.\n     *\n     * @param source The source item to copy (`Object`, `Array`, `TypedArray`, `Date`, `RegExp`, `Node`)\n     * @param destination An optional item to use as the destination. If passed, the item is cleared\n     * before the source is copied to it. The destination cannot be a `TypedArray` and cannot be the same\n     * as the source\n     * @return The copied item\n     */\n    static copy<T extends object>(source: T, destination?: T): T {\n        const stackSource: object[] = [];\n        const stackDest: object[] = [];\n\n        if (destination) {\n            if (Utils.isTypedArray(destination)) {\n                throw new Error(\"Can't copy! TypedArray destination cannot be mutated.\");\n            }\n            if (source === destination) {\n                throw new Error(\"Can't copy! Source and destination are identical.\");\n            }\n\n            // Empty the destination object\n            if (Utils.isArray(destination)) {\n                (destination as Array<any>).length = 0;\n            }\n            else {\n                Utils.forEach(destination, (value, key) => {\n                    if (!source.hasOwnProperty(key)) {\n                        delete destination[key];\n                    }\n                });\n            }\n\n            stackSource.push(source);\n            stackDest.push(destination);\n            return copyRecurse(source, destination);\n        }\n\n        return copyElement(source);\n\n        function copyRecurse(source, destination) {\n            let key;\n            if (Utils.isArray(source)) {\n                for (let i = 0, ii = source.length; i < ii; i++) {\n                    destination.push(copyElement(source[i]));\n                }\n            } else if (Utils.isBlankObject(source)) {\n                // createMap() fast path --- Safe to avoid hasOwnProperty check because prototype chain is empty\n                for (key in source) {\n                    destination[key] = copyElement(source[key]);\n                }\n            } else if (source && typeof source.hasOwnProperty === 'function') {\n                // Slow path, which must rely on hasOwnProperty\n                for (key in source) {\n                    if (source.hasOwnProperty(key)) {\n                        destination[key] = copyElement(source[key]);\n                    }\n                }\n            } else {\n                // Slowest path --- hasOwnProperty can't be called as a method\n                for (key in source) {\n                    if (Object.prototype.hasOwnProperty.call(source, key)) {\n                        destination[key] = copyElement(source[key]);\n                    }\n                }\n            }\n            return destination;\n        }\n\n        function copyElement(source) {\n            // Simple values\n            if (!Utils.isObject(source)) {\n                return source;\n            }\n\n            // Already copied values\n            const index = stackSource.indexOf(source);\n            if (index !== -1) {\n                return stackDest[index];\n            }\n\n            if (Utils.isWindow(source)) {\n                throw new Error(\"Can't copy! Making copies of Window instances is not supported.\");\n            }\n\n            let needsRecurse = false;\n            let destination;\n\n            if (Utils.isArray(source)) {\n                destination = [];\n                needsRecurse = true;\n            } else if (Utils.isTypedArray(source)) {\n                destination = new source.constructor(source);\n            } else if (Utils.isDate(source)) {\n                destination = new Date(source.getTime());\n            } else if (Utils.isRegExp(source)) {\n                const matches = source.toString().match(/[^\\/]*$/);\n                destination = new RegExp(source.source, matches ? matches[0] : \"\");\n                destination.lastIndex = source.lastIndex;\n            } else if (Utils.isFunction(source.cloneNode)) {\n                destination = source.cloneNode(true);\n            } else {\n                destination = Object.create(Object.getPrototypeOf(source));\n                needsRecurse = true;\n            }\n\n            stackSource.push(source);\n            stackDest.push(destination);\n\n            return needsRecurse ? copyRecurse(source, destination) : destination;\n        }\n    }\n\n    // Not currently used\n    private static copyWithoutNullOrEmpty(dst: MapOf<any>, src: MapOf<any>): MapOf<any> {\n        const keys = Object.keys(src);\n        for (let j = 0, jj = keys.length; j < jj; j++) {\n            const key = keys[j];\n            const value = src[key];\n            if (value === null || Utils.isEmpty(null)) {\n                continue;\n            }\n            else if (Utils.isObject(value)) {\n                if (Utils.isDate(value)) {\n                    dst[key] = new Date(value.valueOf());\n                }\n                else if (Utils.isRegExp(value)) {\n                    dst[key] = new RegExp(value);\n                }\n                else {\n                    if (!Utils.isObject(dst[key])) {\n                        dst[key] = Utils.isArray(value) ? [] : {};\n                    }\n                    dst[key] = Utils.copyWithoutNullOrEmpty(dst[key], value);\n                }\n            }\n            else {\n                dst[key] = value;\n            }\n        }\n        return dst;\n    }\n\n    /**\n     * Makes a shallow copy of the passed object. Empty string values are removed from the copied object.\n     * A string value containing `\"\"` is copied as an empty string.\n     *\n     * @param defaults The object to copy\n     * @return The copied object\n     */\n    static copyDefaults(defaults: {}): {} {\n        const _defaults = Utils.copy(defaults);\n        if (_defaults) {\n            Object.keys(_defaults).forEach(key => {\n                // Unset parameters will come through as empty strings (regardless of type)\n                // Filter these out (to not hide defaults on the server) and accept \"\" as a way of explicitly\n                // setting a parameter to be an empty string\n                const value = _defaults[key];\n                if (value === \"\") {\n                    delete _defaults[key];\n                }\n                if (value === \"\\\"\\\"\") {\n                    _defaults[key] = \"\";\n                }\n            });\n        }\n        return _defaults;\n    }\n\n    /**\n     * Performs an optimized deep comparison between two objects to determine if they should be considered equal\n     * @param o1 The first object to be compared\n     * @param o2 The second object to be compared\n     */\n    static equals(o1: any, o2:any): boolean {\n        return isEqual(o1, o2);\n    }\n\n    /**\n     * Converts a string to an integer value using `parseInt` with radix = 10.\n     * If the string cannot be converted or contains additional characters then the\n     * passed default value is returned\n     * @param str The string to convert\n     * @param _default The default value to use if the string cannot be converted\n     */\n    static toInt(str: string, _default: number = 0): number {\n        let value = parseInt(str, 10);\n        if (isNaN(value) || (value + \"\" !== str)) {\n            value = _default;\n        }\n        return value;\n    }\n\n    /**\n     * Converts a string to a floating point value using `parseFloat`.\n     * If the string cannot be converted then the passed default value is returned\n     * @param str The string to convert\n     * @param _default The default value to use if the string cannot be converted\n     */\n    static toNumber(str: string, _default: number = 0): number {\n        let value = parseFloat(str);\n        if (isNaN(value)) {\n            value = _default;\n        }\n        return value;\n    }\n\n    /**\n     * Converts a string to a `Date` using `Date.parse`.\n     * The date is returned in UTC. If the string cannot be converted then `undefined` is returned\n     * @param str The string to convert\n     * @return The converted `Date` in UTC or `undefined`\n     */\n    static toDate(str: string): Date | undefined {\n        const ms = Date.parse(str);\n        if (!ms && ms !== 0) {\n            return undefined;\n        }\n        return new Date(ms + new Date(ms).getTimezoneOffset() * 60000); // get date in UTC\n    }\n\n    /**\n     * Get the time component of a `Date` in milliseconds\n     *\n     * @param date The date\n     * @return The time in milliseconds\n     */\n    static getTime(date: Date): number {\n        if (!date) {\n            return 0;\n        }\n        return (date.getHours() * 60 * 60 + date.getMinutes() * 60 + date.getSeconds()) * 1000 + date.getMilliseconds();\n    }\n\n    /**\n     * Return the current date and time\n     */\n    static get now(): Date {\n        return new Date();\n    }\n\n    /**\n     * Converts a `Date` to a Sinequa system date string (`dd-mm-yyyy[ hh:mm:ss]`)\n     * If the time component of the date is 0 then only the date portion of the string is included\n     *\n     * @param date The `Date` to convert\n     */\n    static toSysDateStr(date: Date): string {\n        if (!date)  {\n            return \"\";\n        }\n        const m = moment(date);\n        if (Utils.getTime(date) === 0) {\n            return m.format(\"YYYY-MM-DD\");\n        }\n        else {\n            return m.format(\"YYYY-MM-DD HH:mm:ss\");\n        }\n    }\n\n    /**\n     * Converts a Sinequa system date string (`dd-mm-yyyy[ hh:mm:ss]`) to a `Date`\n     * If the string cannot be converted then `undefined` is returned\n     *\n     * @param date The Sinequa system date string to convert\n     */\n    static fromSysDateStr(value: string): Date | undefined {\n        const m = moment(value, \"YYYY-MM-DD HH:mm:ss\");\n        if (m.isValid()) {\n            return m.toDate();\n        }\n        return undefined;\n    }\n\n    private static rxSysDateTime = /^\\d{4}-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])(?: (?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d)?$/;\n    // private static rxISO8601 = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n    // ISO8601 combined date and time\n    private static rxISO8601DateTime = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*))(?:Z|(\\+|-)([\\d|:]*))?$/;\n\n    private static isSysDateTime(str: string): boolean {\n        return Utils.rxSysDateTime.test(str);\n    }\n\n    private static isISO8601DateTime(str: string): boolean {\n        return Utils.rxISO8601DateTime.test(str);\n    }\n\n    /**\n     * Converts a Javascript value to a JSON string using `JSON.stringify`.\n     * Date objects are converted to Sinequa system strings\n     *\n     * @param value The value to convert\n     * @param options Options for the conversion. The default is `{pretty: false}`\n     */\n    static toJson(value: any, options: ToJsonOptions = {pretty: false}): string {\n        return JSON.stringify(value,\n            function(key: string, value: any): any  {\n                if (key && Utils.isDate(this[key])) {\n                    const str = Utils.toSysDateStr(this[key]);\n                    return str;\n                }\n                return value;\n            }, options.pretty ? 2 : 0);\n    }\n\n    /**\n     * Converts a string to an object using `JSON.parse`.\n     * Strings that are either in Sinequa system date or ISO8601 format are converted to\n     * `Date` objects if the `reviveDates` option is specified.\n     *\n     * @param str The string to convert\n     * @param options Options for the conversion. The default is `{reviveDates: false}`\n     */\n    static fromJson(str: string, options: FromJsonOptions = {reviveDates: false}): any {\n        if (!str || typeof str !== \"string\") {\n            return {};\n        }\n        try {\n            return JSON.parse(str, options.reviveDates ?\n                (key, value) => {\n                    if (options.reviveDates && typeof value === \"string\") {\n                        if (Utils.isSysDateTime(value)) {\n                            const m = moment(value, \"YYYY-MM-DD HH:mm:ss\");\n                            if (m.isValid()) {\n                                return m.toDate();\n                            }\n                        }\n                        else if (Utils.isISO8601DateTime(value)) {\n                            const m = moment(value, moment.ISO_8601);\n                            if (m.isValid()) {\n                                return m.toDate();\n                            }\n                        }\n                    }\n                    return value;\n                } : undefined);\n        }\n        catch (exception) {\n            console.log(\"Utils.fromJson exception:\", exception);\n            return null;\n        }\n    }\n\n    /**\n     * Converts a `FieldValue` value to a string compatible with Sinequa's SQL syntax.\n     * String and `Date` values are enclosed in single quotes if the quote parameter is `true`\n     *\n     * @param value The value to convert\n     * @param quote If set, the returned string will be enclosed in single quotes for string and `Date` values\n     */\n    static toSqlValue(value: FieldValue, quote?: boolean): string {\n        if (Utils.isNumber(value)) {\n            return value + \"\";\n        }\n        if (Utils.isDate(value)) {\n            if (quote) {\n                return \"'\" + Utils.toSysDateStr(value) + \"'\";\n            }\n            else {\n                return Utils.toSysDateStr(value);\n            }\n        }\n        if (Utils.isBoolean(value)) {\n            return value ? \"true\" : \"false\";\n        }\n        if (Utils.isArray(value)) {\n            const ret: string[] = [];\n            value.forEach(v => {\n                if (ret.length > 0) {\n                    ret.push(\",\");\n                }\n                if (!v) {\n                    ret.push(\"null\");\n                }\n                else if (Utils.isString(v)) {\n                    ret.push(v);\n                }\n                else {\n                    ret.push(v.display || v.value || \"\");\n                }\n            });\n            ret.splice(0, 0, \"[\");\n            ret.push(\"]\");\n            return ret.join(\"\");\n        }\n        if (quote) {\n            return \"'\" + value + \"'\";\n        }\n        else {\n            return value;\n        }\n    }\n\n    /**\n     * Clean a string so it is compatible with values stored in a Sinequa tree type-column.\n     * The following operations are performed:\n     * * ensure that the string starts and ends with forward slashes\n     * * replace tab characters with spaces\n     * * replace semi-colons with commas\n     * * replace back slashes with forward slashes\n     *\n     * @param s The string to clean\n     */\n    static treeClean(s: string): string {\n        if (Utils.isEmpty(s)) {\n            return s;\n        }\n        return Utils.addUrl(\"/\", Utils.replace(Utils.replace(Utils.replace(s, \"\\t\", \" \"), \";\", \",\"), \"\\\\\", \"/\"), \"/\");\n    }\n\n    /**\n     * Return the first node of a Sinequa tree value enclosed in forward slashes\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeFirst(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts.length === 0 ? \"\" : `/${parts[0]}/`;\n    }\n\n    /**\n     * Return the first node of a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeFirstNode(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts[0];\n    }\n\n    /**\n     * Return the last node of a Sinequa tree value enclosed in forward slashes\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeLast(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts.length === 0 ? \"\" : `/${parts[parts.length - 1]}/`;\n    }\n\n    /**\n     * Return the last node of a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeLastNode(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts[parts.length - 1];\n    }\n\n    /**\n     * Return the nodes making up a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeNodes(s: string): string[] {\n        return Utils.split(s, \"/\");\n    }\n\n    /**\n     * Return a Sinequa tree value, removing enclosing forward slash characters\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeDisplay(s: string): string {\n        if (!!s) {\n            if (s[0] === \"/\") {\n                s = s.substr(1);\n            }\n            if (s[s.length - 1] === \"/\") {\n                s = s.substr(0, s.length - 1);\n            }\n        }\n        return s;\n    }\n\n    /**\n     * Return the node count of a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeCount(s: string): number {\n        const count = Utils.count(s, \"/\");\n        return count > 0 ? count - 1 : 0;\n    }\n\n    /**\n     * Traverses a tree structure, executing a callback function at every node\n     * @param nodes the nodes to traverse\n     * @param callback the callback function\n     */\n    public static traverse<T extends TreeNode>(nodes: T[], callback: (lineage: T[] | undefined) => boolean): boolean {\n        if (!nodes || nodes.length === 0) {\n            return false;\n        }\n        if (!callback) {\n            return false;\n        }\n        const lineage: T[] = [];\n        const stack: (T | undefined)[] = [];\n        let _i = nodes.length;\n        while (_i--) {\n            stack.push(nodes[_i]);\n        }\n        while (stack.length) {\n            const node = stack.pop();\n            if (!node) {\n                lineage.pop();\n                callback(undefined);\n            }\n            else {\n                lineage.push(node);\n                if (callback(lineage)) {\n                    return true;\n                }\n                stack.push(undefined);\n                if (node.items && node.items.length > 0) {\n                    _i = node.items.length;\n                    while (_i--) {\n                        stack.push(node.items[_i] as T);\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Return a pseudo-GUID value using `Math.random`\n     *\n     * @param withHyphens If set, the returned GUID includes hyphen separators\n     */\n    static guid(withHyphens = true): string {\n        let d = Date.now();\n        const guid = (withHyphens ?\n            'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx' : 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx').replace(/[xy]/g, (c) => {\n                const r = (d + Math.random() * 16) % 16 | 0;\n                d = Math.floor(d / 16);\n                return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n            });\n        return guid;\n    }\n\n    /**\n     * Return `true` if the passed value is `undefined`\n     */\n    static isUndefined(value): value is undefined {\n        return typeof value === 'undefined';\n    }\n\n    /**\n     * Return `true` if the passed value is an `object`\n     */\n    static isObject(value): value is any {\n        return value !== null && typeof value === 'object';\n    }\n\n    /**\n     * Return `true` if the passed value is a `string`\n     */\n    static isString(value): value is string {\n        return typeof value === 'string';\n    }\n\n    /**\n     * Return `true` if the passed value is a `number`\n     */\n    static isNumber(value): value is number {\n        return typeof value === 'number';\n    }\n\n    /**\n     * Return `true` if the passed value is a `boolean`\n     */\n    static isBoolean(value): value is boolean {\n        return typeof value === 'boolean';\n    }\n\n    /**\n     * Return `true` if the passed value is a `Date`\n     */\n    static isDate(value): value is Date {\n        return Object.prototype.toString.call(value) === '[object Date]';\n    }\n\n    /**\n     * Return `true` if the passed value is a scalar (`number`, `boolean` or `Date`)\n     */\n    static isScalar(value): value is number | boolean | Date {\n        return Utils.isNumber(value) || Utils.isBoolean(value) || Utils.isDate(value);\n    }\n\n    /**\n     * Return `true` if the passed value is an `Array`\n     */\n    static isArray(value): value is Array<any> {\n        return Array.isArray(value);\n    }\n\n    /**\n     * Return `true` if the passed value is iterable\n     */\n    static isIterable(value): value is Array<any> {\n        if (value === null || value === undefined) {\n            return false;\n        }\n        return typeof value[Symbol.iterator] === \"function\";\n    }\n\n    /**\n     * Return `true` if the passed value is a `Map`\n     */\n    static isMap(value): value is Map<any, any> {\n        return Object.prototype.toString.call(value) === '[object Map]';\n    }\n\n    /**\n     * Return `true` if the passed value is a `Function`\n     */\n    static isFunction(value): value is Function {\n        return typeof value === 'function';\n    }\n\n    /**\n     * Return `true` if the passed value is a `RegExp`\n     */\n    static isRegExp(value): value is RegExp {\n        return Object.prototype.toString.call(value) === '[object RegExp]';\n    }\n\n    /**\n     * Return `true` if the passed value is a `Window`\n     */\n    static isWindow(value): value is Window {\n        return value && value.window === value;\n    }\n\n    /**\n     * Return `true` if the passed value is a `File`\n     */\n    static isFile(value: any): value is File {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object File]\";\n    }\n\n    /**\n     * Return `true` if the passed value is a `FormData`\n     */\n    static isFormData(value: any): value is FormData {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object FormData]\";\n    }\n\n    /**\n     * Return `true` if the passed value is a `Blob`\n     */\n    static isBlob(value: any): value is Blob {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object Blob]\";\n    }\n\n    /**\n     * Return `true` if the passed value is an `ArrayBuffer`\n     */\n    static isArrayBuffer(value: any): value is ArrayBuffer {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object ArrayBuffer]\";\n    }\n\n    private static isArrayLike(obj): boolean {\n        // `null`, `undefined` and `window` are not array-like\n        if (obj == null || Utils.isWindow(obj)) return false;\n\n        // arrays, strings and jQuery/jqLite objects are array like\n        // * jqLite is either the jQuery or jqLite constructor function\n        // * we have to check the existance of jqLite first as this method is called\n        //   via the forEach method when constructing the jqLite object in the first place\n        if (Utils.isArray(obj) || Utils.isString(obj) /*|| (jqLite && obj instanceof jqLite)*/) return true;\n\n        // Support: iOS 8.2 (not reproducible in simulator)\n        // \"length\" in obj used to prevent JIT error (gh-11508)\n        const length = \"length\" in Object(obj) && obj.length;\n\n        // NodeList objects (with `item` method) and\n        // other objects with suitable length characteristics are array-like\n        return Utils.isNumber(length) &&\n            (length >= 0 && (length - 1) in obj || typeof obj.item === 'function');\n    }\n\n    /**\n     * Return `true` if the passed value is an `object` without a prototype\n     */\n    static isBlankObject(value): value is object {\n        return value !== null && typeof value === 'object' && !Object.getPrototypeOf(value);\n    }\n\n    private static TYPED_ARRAY_REGEXP = /^\\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\\]$/;\n    /**\n     * Return true if the passed value is a `TypedArray`\n     */\n    static isTypedArray(value) {\n        return value && Utils.isNumber(value.length) && Utils.TYPED_ARRAY_REGEXP.test(Object.prototype.toString.call(value));\n    }\n\n    /**\n     * Return a promise that is a resolved after a specified amount of time\n     *\n     * @param ms The time to delay in milliseconds\n     */\n    static delay(ms: number = 0): Promise<void> {\n        return new Promise<void>((resolve, reject) => {\n            window.setTimeout(() => {\n                resolve();\n            }, ms);\n        });\n    }\n\n    /**\n     *\n     * @param value\n     * @param _default\n     */\n    static isTrue(\n        value,\n        _default?: boolean): boolean {\n        if (typeof (value) === 'string') {\n            value = value.toLowerCase();\n        }\n        switch (value) {\n            case true:\n            case \"true\":\n            case 1:\n            case \"1\":\n            case \"on\":\n            case \"yes\":\n                return true;\n            case \"\":\n            case undefined:\n                return !!_default;\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * Compares two strings using the current locale. The return value is negative\n     * if `a` comes before `b` and positive if `a` comes after `b`. If the values\n     * are equal then `0` is returned\n     *\n     * @param a The first string\n     * @param b The second string\n     * @param ignoreCase If set, do a case-insensitive comparison\n     */\n    static compare(a: string, b: string, ignoreCase: boolean = true): number {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.localeCompare(b);\n    }\n\n    /**\n     * Return `true` if two strings are equal, respecting case\n     *\n     * @param a The first string\n     * @param b The second string\n     */\n    static eq(a: string, b: string): boolean {\n        return Utils.compare(a, b, false) === 0;\n    }\n\n    /**\n     * Return `true` if two strings are equal, ignoring case\n     *\n     * @param a The first string\n     * @param b The second string\n     */\n    static eqNC(a: string, b: string): boolean {\n        return Utils.compare(a, b, true) === 0;\n    }\n\n    /**\n     * Return `true` if a number of strings are equal, ignoring case\n     *\n     * @param a The first string\n     * @param b Remaining strings\n     */\n    static eqNCN(a: string, ...b: string[]) {\n        if (!b) {\n            return false;\n        }\n        for (const s of b) {\n            if (Utils.eqNC(a, s)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Return the length of a string. If the string is empty (`null` or `undefined`)\n     * @param s A string\n     */\n    static len(s: string) {\n        return (s || '').length;\n    }\n\n    /**\n     * Return `true` if a string starts with another\n     *\n     * @param a The string to test\n     * @param b The prefix\n     * @param ignoreCase If `true` then ignore case\n     */\n    static startsWith(a: string, b: string, ignoreCase: boolean = true): boolean {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.startsWith(b);\n    }\n\n    /**\n     * Return `true` if a string ends with another\n     *\n     * @param a The string to test\n     * @param b The postfix\n     * @param ignoreCase If `true` then ignore case\n     */\n    static endsWith(a: string, b: string, ignoreCase: boolean = true): boolean {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.endsWith(b);\n    }\n\n    /**\n     * Return `true` if a string is a substring of another\n     * @param a The string to test\n     * @param b The substring\n     * @param ignoreCase If `true` then ignore case\n     */\n    static includes(a: string, b: string, ignoreCase: boolean = true): boolean {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.includes(b);\n    }\n\n    /**\n     * Return the upper case value of a string using the current locale\n     */\n    static toUpperCase(s: string): string {\n        if (s) {\n            return s.toLocaleUpperCase();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string with the first character converted to upper case using the current locale\n     */\n    static toUpperFirst(s: string): string {\n        if (s) {\n            return s[0].toLocaleUpperCase() + s.substr(1);\n        }\n        return \"\";\n    }\n\n    /**\n     * Return the lower case value of a string using the current locale\n     */\n    static toLowerCase(s: string): string {\n        if (s) {\n            return s.toLocaleLowerCase();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string with the first character converted to lower case using the current locale\n     */\n    static toLowerFirst(s: string): string {\n        if (s) {\n            return s[0].toLocaleLowerCase() + s.substr(1);\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where the first character of each space separated word is converted to upper case.\n     * However, if a word contains a full stop character the first character is left unchanged\n     */\n    static toStartCase(text: string): string {\n        if (text) {\n            const words = text.split(/[\\s]+/);\n            return words.map(value => !value.includes(\".\") ? Utils.toUpperFirst(value) : value).join(\" \");\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where any leading and trailing whitespace characters are removed\n     */\n    static trim(s: string): string {\n        if (s) {\n            return s.trim();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where any leading whitespace characters are removed\n     */\n    static trimStart(s: string): string {\n        if (s) {\n            return s.trimStart();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where any trailing whitespace characters are removed\n     */\n    static trimEnd(s: string): string {\n        if (s) {\n            return s.trimEnd();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string truncated to a maximum length. If the length of the string is greater than `maxLength`\n     * then it is truncated to `maxLength and a `suffix` appended. Otherwise the string is returned unchanged\n     *\n     * @param s The string to truncate\n     * @param maxLength The maximum length\n     * @param suffix The value to append if the string is truncated. The default is `...`\n     */\n    static truncate(s: string, maxLength: number, suffix?: string): string {\n        if (!s) {\n            return \"\";\n        }\n        suffix = suffix || \"...\";\n        if (s.length <= maxLength) {\n            return s;\n        }\n        return s.substring(0, maxLength - suffix.length) + suffix;\n    }\n\n    private static regExEscapeRegEx = /[-\\/\\\\^$*+?.()|[\\]{}]/g;\n\n    /**\n     * Return a string where any regular expresion operators are escaped\n     */\n    static regExEscape(s: string): string {\n        if (!s) {\n            return \"\";\n        }\n        return s.replace(Utils.regExEscapeRegEx, \"\\\\$&\");\n    }\n\n    /**\n     * Replaces patterns in a string with a replacement string. The pattern can either a string\n     * or a `RegExp`.\n     *\n     * @param s The string in which to search for a pattern\n     * @param pattern The pattern\n     * @param replacement The replacement string to replace any occurrences of the pattern in the string\n     */\n    static replace(s: string, pattern: string | RegExp, replacement: string): string {\n        if (!s || !pattern) {\n            return \"\";\n        }\n        if (Utils.isRegExp(pattern)) {\n            return s.replace(pattern, replacement);\n        }\n        else {\n            return s.replace(new RegExp(Utils.regExEscape(pattern), \"g\"), replacement);\n        }\n    }\n\n    /**\n     * Split a string into an array of substrings using the passed separators\n     *\n     * @param s The string to split\n     * @param separators One or more separators\n     * @param trim If `true` trim any leading and trailing spaces from the substrings\n     * @param removeEmpty If `true` exclude any empty strings from the array of substrings\n     */\n    static split(s: string, separators: string | string[], trim = true, removeEmpty = true): string[] {\n        if (!s) {\n            return [];\n        }\n        if (!separators) {\n            return [s];\n        }\n        let split: string[];\n        if (typeof separators === \"string\") {\n            split = s.split(separators);\n            if (trim) {\n                split = split.map(value => value.trim());\n            }\n        }\n        else {\n            let rxs = separators.map((value) => Utils.regExEscape(value)).join(\"|\");\n            if (trim) {\n                rxs = \"(?:^\\\\s*)|(?:\\\\s*(?:\" + rxs + \")\\\\s*)|(?:\\\\s*$)\";\n            }\n            split = s.split(new RegExp(rxs));\n        }\n        if (removeEmpty) {\n            split = split.filter((value) => {\n                return !Utils.isEmpty(value);\n            });\n        }\n        return split;\n    }\n\n    /**\n     * Return a string in kebab case (`CatDog => cat-dog`)\n     */\n    static toKebabCase(text: string): string {\n        return kebabCase(text);\n    }\n\n    /**\n     * Return a string in snake case (`CatDog => cat_dog`)\n     */\n    static toSnakeCase(text: string): string {\n        return snakeCase(text);\n    }\n\n    /**\n     * Return a string in camel case (`CatDog => catDog`)\n     */\n    static toCamelCase(text: string): string {\n        return camelCase(text);\n    }\n\n    /**\n     * Return a string with any diacritics removed\n     */\n    static removeAccents(text: string): string {\n        if (!text) {\n            return \"\";\n        }\n        return removeDiacritics(text);\n    }\n\n    /**\n     * Return a string in normalized form which can be used to match entity values. A normalized value\n     * has any diacritics removed and is converted to upper case\n     */\n    static normalize(text: string | null | undefined): string {\n        if (!text) {\n            return \"\";\n        }\n        return Utils.removeAccents(text).toUpperCase();\n    }\n\n    /**\n     * Return `true` if a string is valid as a simple value for the Sinequa admininistration\n     */\n    static isValidSimpleName(name: string): boolean {\n        return /^[a-zA-Z_][a-zA-Z0-9_]*$/.test(name);\n    }\n\n    /**\n     * Return `true` if a string is valid as a scoped (`.` separated) simple value for the Sinequa admininistration\n     */\n    static isValidScopedSimpleName(name: string): boolean {\n        return /^[a-zA-Z_]([\\.]?[a-zA-Z0-9_]+)*$/.test(name);\n    }\n\n    /**\n     * Return `true` if a value is `null`, `undefined` or `\"\"`\n     */\n    static isEmpty(value: any): boolean {\n        if (value === \"\") {\n            return true;\n        }\n        if (value === null) {\n            return true;\n        }\n        if (Utils.isUndefined(value)) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Return the number of occurrences of a substring in a string\n     *\n     * @param text The text to test\n     * @param sub The substring\n     * @param ignoreCase If `true` don't respect case when matching the substring\n     */\n    static count(text: string, sub: string, ignoreCase = true): number {\n        if (!text || !sub) {\n            return 0;\n        }\n        if (ignoreCase) {\n            text = text.toLocaleUpperCase();\n            sub = sub.toLocaleUpperCase();\n        }\n        let pos = -1;\n        let count = 0;\n        while (true) {\n            pos = text.indexOf(sub, pos + 1);\n            if (pos === -1) {\n                break;\n            }\n            count++;\n        }\n        return count;\n    }\n\n    /**\n     * Return a string converted to base64\n     */\n    static toBase64(value: string): string {\n        return btoa(encodeURIComponent(value).replace(/%([0-9A-F]{2})/g, (match, hex) => String.fromCharCode(parseInt(hex, 16))));\n    }\n\n    /**\n     * Return a string converted from base64\n     */\n    static fromBase64(value: string): string {\n        return decodeURIComponent(atob(value).split('').map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));\n    }\n\n    /**\n     * Return the SHA256 hash value of string\n     */\n    static sha256(value: string): string {\n        const sha = new jsSHA(\"SHA-256\", \"TEXT\");\n        sha.update(value);\n        return sha.getHash(\"B64\");\n    }\n\n    /**\n     * Return the SHA512 hash value of string\n     */\n    static sha512(value: string): string {\n        const sha = new jsSHA(\"SHA-512\", \"TEXT\");\n        sha.update(value);\n        return sha.getHash(\"B64\");\n    }\n\n    /**\n     * Return a string where any HTML special characters are percent encoded\n     */\n    static encodeHTML(value: string): string {\n        return escape(value);\n    }\n\n    /**\n     * Return a string where any percent encoded characters are replaced by their corresponding unencoded characters\n     */\n    static decodeHTML(value: string): string {\n        return unescape(value);\n    }\n\n    /**\n     * Get a field with passed name from an object. The field name is matched insensitive of case\n     */\n    static getField<T>(obj: MapOf<T>, name: string): T | undefined {\n        if (!Utils.isObject(obj) || Utils.isEmpty(name)) {\n            return undefined;\n        }\n        const keys = Object.keys(obj).filter(key => Utils.eqNC(key, name));\n        if (keys.length === 0) {\n            return undefined;\n        }\n        return obj[keys[0]];\n    }\n\n    /**\n     * Clear fields from an object. If the `_delete` parameter is `false` then\n     * array or map fields are emptied and other fields are set to `undefined`.\n     * If the `_delete` parameter is `true` then fields are deleted\n     */\n    static clearObject(obj: {}, _delete: boolean = false): {} {\n        for (const prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (_delete) {\n                    delete obj[prop];\n                }\n                else {\n                    if (Utils.isArray(obj[prop])) {\n                        obj[prop].length = 0;\n                    }\n                    else if (Utils.isMap(obj[prop])) {\n                        obj[prop].clear();\n                    }\n                    else {\n                        obj[prop] = undefined;\n                    }\n                }\n            }\n        }\n        return obj;\n    }\n\n    /**\n     * Return the non-empty fields in the `override` object that that are different to fields of the same name\n     * in the `template` object\n     * @param template The object to compare against\n     * @param override The object defining the fields and values to be compared\n     * @param ret An optional return object. If not set a new object is created\n     */\n    static deltas(template: {}, override: {}, ret?: {}): {} {\n        if (!ret) {\n            ret = {};\n        }\n        for (const name of Object.keys(override)) {\n            if (name in template) {\n                if (Utils.isObject(override[name]) && !Utils.isArray(override[name])) {\n                    const diff = Utils.deltas(template[name], override[name]);\n                    if (!Utils.equals(diff, {})) {\n                        ret[name] = diff;\n                    }\n                }\n                else if (!Utils.equals(template[name], override[name])) {\n                    if (!Utils.isEmpty(override[name])) {\n                        ret[name] = override[name];\n                    }\n                }\n            }\n            else {\n                if (!Utils.isEmpty(override[name])) {\n                    ret[name] = override[name];\n                }\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * Returns an object containing the fields in a source object whose names match one of the passed keys. The keys can either be\n     * an array of strings or a callback function that is called for each field in the source object and returns `true` if a field\n     * should be \"picked\".\n     *\n     * @param obj The source object\n     * @param keys An array of keys or a callback function\n     */\n    static pick(obj: {}, keys: string[] | ((value: any, key: string, obj: object) => boolean)): {} {\n        const ret = {};\n        if (!!obj) {\n            if (Utils.isFunction(keys)) {\n                Object.keys(obj).forEach(key => {\n                    if (keys(obj[key], key, obj)) {\n                        ret[key] = obj[key];\n                    }\n                });\n            }\n            else {\n                for (const key of keys) {\n                    if (obj.hasOwnProperty(key)) {\n                        ret[key] = obj[key];\n                    }\n                }\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * Create a debounce function that delays invoking `func` until after `wait` millseconds have elapsed since the previous invocation.\n     *\n     * @param func The function to debounce\n     * @param wait The delay in milliseconds to wait before calling `func`\n     * @param immediate If `true` then make an initial call to `func`\n     * @param every An optional callback to call without debouncing\n     */\n    static debounce(func: (...params) => any, wait = 0, immediate = false, every?: (...params) => any): (...params) => any {\n        let timeout, args, context, timestamp, result;\n\n        const later = function() {\n            const last = Date.now() - timestamp;\n\n            if (last < wait && last >= 0) {\n                timeout = setTimeout(later, wait - last);\n            }\n            else {\n                timeout = null;\n                if (!immediate) {\n                    result = func.apply(context, args);\n                    if (!timeout) {\n                        context = args = null;\n                    }\n                }\n            }\n        };\n\n        return function(this: any) {\n            context = this;\n            args = arguments;\n            if (every) {\n                every.apply(context, args);\n            }\n            timestamp = Date.now();\n            const callNow = immediate && !timeout;\n            if (!timeout) {\n                timeout = setTimeout(later, wait);\n            }\n            if (callNow) {\n                result = func.apply(context, args);\n                context = args = null;\n            }\n\n            return result;\n        };\n    }\n\n    /**\n     * Create a throttled function that only invokes func at most once per every `wait` milliseconds.\n     *\n     * @param func The function to throttle\n     * @param wait The number of milliseconds to throttle invocations to\n     * @param options Options to control the throttling behaviour\n     */\n    static throttle(func: (...params) => any, wait: number, options: ThrottleSettings = {}): (...pararms) => any {\n        let timeout, context, args, result;\n        let previous = 0;\n\n        const later = function() {\n            previous = options.leading === false ? 0 : Date.now();\n            timeout = null;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        };\n\n        const throttled = function(this: any) {\n            const now = Date.now();\n            if (!previous && options.leading === false) previous = now;\n            const remaining = wait - (now - previous);\n            context = this;\n            args = arguments;\n            if (remaining <= 0 || remaining > wait) {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                }\n                previous = now;\n                result = func.apply(context, args);\n                if (!timeout) context = args = null;\n            }\n            else if (!timeout && options.trailing !== false) {\n                timeout = setTimeout(later, remaining);\n            }\n            return result;\n        };\n\n        throttled[\"cancel\"] = function() {\n            clearTimeout(timeout);\n            previous = 0;\n            timeout = context = args = null;\n        };\n\n        return throttled;\n    }\n\n    private static frameTasks: Map<(...params) => any, FrameTask> = new Map<(...params) => any, FrameTask>();\n\n    /**\n     * Create a function that calls `callback` the next time the browser next repaints\n     */\n    static frame(callback: (...params) => any): (...params) => any {\n        return (...params) => {\n            if (Utils.frameTasks.size === 0) {\n                requestAnimationFrame((timestamp) => {\n                    Utils.frameTasks.forEach((task, key, map) => {\n                        task.call();\n                    });\n                    Utils.frameTasks.clear();\n                });\n            }\n            const task = Utils.frameTasks.get(callback);\n            if (task) {\n                // Update params\n                task.params = params;\n            }\n            else {\n                // Add new task\n                Utils.frameTasks.set(callback, new FrameTask(callback, params));\n            }\n        };\n    }\n\n    /**\n     * Create a URL object from a `url` string. If the string is a relative url then\n     * `base` specifies the base to use\n     */\n    static makeURL(url: string, base?: string): URL {\n        if (!base) {\n            base = \"http://x.y.z\"; // Firefox and IOS need this\n        }\n        return new URL(url, base);\n    }\n\n    /**\n     * Add query string parameters to a url\n     *\n     * @param url The url to which to add the parameters\n     * @param params An object whose fields should be added as parameters\n     */\n    static addSearchParams(url: string, params: MapOf<any>): string {\n        if (!url || !params) {\n            return url;\n        }\n        const urlObj = Utils.makeURL(url);\n        for (const param in params) {\n            if (params.hasOwnProperty(param)) {\n                urlObj.searchParams.set(param, params[param]);\n            }\n        }\n        const index = url.indexOf(\"?\");\n        if (index !== -1) {\n            url = url.substr(0, index);\n        }\n        url += \"?\" + urlObj.searchParams.toString();\n        return url;\n    }\n\n    private static _addUrl(url: string, path: string): string {\n        if (!path) {\n            return url;\n        }\n        if (!url) {\n            return path;\n        }\n        if (url[url.length - 1] === \"/\") {\n            if (path[0] === \"/\") {\n                return url + path.substr(1);\n            }\n            else {\n                return url + path;\n            }\n        }\n        else {\n            if (path[0] === \"/\") {\n                return url + path;\n            }\n            else {\n                return url + \"/\" + path;\n            }\n        }\n    }\n\n    /**\n     * Add paths to a url adding path separators as necessary\n     *\n     * @param url The url\n     * @param paths One or more paths to add to the url\n     */\n    static addUrl(url: string, ...paths: string[]): string {\n        let _url = url;\n        for (const path of paths) {\n            _url = Utils._addUrl(_url, path);\n        }\n        return _url;\n    }\n\n    /**\n     * Return `true` if a url is absolute\n     */\n    static isUrlAbsolute(url: string): boolean {\n        return /^(?:[a-zA-Z][a-zA-Z\\d+.-]*:|\\/\\/)/.test(url);\n    }\n\n    /**\n     * Return an `HttpParams` object containing the fields in the passed object\n     */\n    static makeHttpParams(params: MapOf<string | boolean | number | Date | object | undefined>): HttpParams {\n        let httpParams = new HttpParams({encoder: new SqHttpParameterCodec()});\n        if (params) {\n            for (const param in params) {\n                if (params.hasOwnProperty(param)) {\n                    const _value = params[param];\n                    let value = \"\";\n                    if (Utils.isString(_value)) {\n                        value = _value;\n                    }\n                    else if (Utils.isBoolean(_value) || Utils.isNumber(_value)) {\n                        value = _value.toString();\n                    }\n                    else if (Utils.isDate(_value)) {\n                        value = Utils.toSysDateStr(_value);\n                    }\n                    else {\n                        value = Utils.toJson(_value);\n                    }\n                    httpParams = httpParams.set(param, value);\n                }\n            }\n        }\n        return httpParams;\n    }\n\n    private static escapeDiv: HTMLElement;\n\n    /**\n     * Return a string with HTML special characters escaped\n     *\n     * @param html The string to escape\n     */\n    static escapeHtml(html: string): string {\n        if (!html) {\n            return html;\n        }\n        if (!Utils.escapeDiv) {\n            Utils.escapeDiv = document.createElement(\"div\");\n        }\n        const textNode = Utils.escapeDiv.appendChild(document.createTextNode(html));\n        const escapedHtml = Utils.escapeDiv.innerHTML;\n        Utils.escapeDiv.removeChild(textNode);\n        return escapedHtml;\n    }\n\n    /**\n     * Move an element in an array\n     *\n     * @param array The array containing the element to move\n     * @param from The index of the element to move\n     * @param to The index that the element should be moved to\n     */\n    static arrayMove(array: any[], from: number, to: number): void {\n        if (to === from ) {\n            return;\n        }\n        array.splice(to, 0, array.splice(from, 1)[0]);\n    }\n\n    /**\n     * Set the contents of a target array to the contents of a source array\n     *\n     * @param target The target array\n     * @param source The source array\n     */\n    static arraySet(target: any[], source: any[]): any[] {\n        return target.splice.apply(target, [0, target.length].concat(source));\n    }\n\n    private static genericNext(value) {\n    }\n\n    private static genericError(error: any) {\n    }\n\n    private static genericComplete() {\n    }\n\n    /**\n     * A simple wrapped around `Observable.subscribe`\n     */\n    static subscribe<T>(\n        observable: Observable<T>,\n        next: (value: T) => void, error?: (err: any) => void, complete?: () => void): Subscription {\n        if (!next) {\n            next = Utils.genericNext;\n        }\n        if (!error) {\n            error = Utils.genericError;\n        }\n        if (!complete) {\n            complete = Utils.genericComplete;\n        }\n        return observable.subscribe(next, error, complete);\n    }\n\n    /**\n     * Return a value as a `Date` converting as necessary. If the value\n     * cannot be converted then `undefined` is returned\n     */\n    static asDate(value: any): Date | undefined {\n        if (!value) {\n            return undefined;\n        }\n\n        if (Utils.isDate(value)) {\n            return value as Date;\n        }\n\n        if (Utils.isString(value)) {\n            return Utils.toDate(value as string);\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Return a value as a `number` converting as necessary. If the value\n     * cannot be converted then `undefined` is returned.\n     */\n    static asNumber(value: any): number | undefined {\n        if (!value && value !== 0) {\n            return undefined;\n        }\n        if (Utils.isNumber(value)) {\n            return value;\n        }\n        if (Utils.isString(value)) {\n            if (Utils.testInteger(value)) {\n                return Utils.toInt(value);\n            }\n            if (Utils.testFloat(value)) {\n                return Utils.toNumber(value);\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Return a value as a `string` converting as necessary\n     */\n    static asString(value: any): string | undefined {\n        if (!value && value !== \"\") {\n            return undefined;\n        }\n\n        if (Utils.isString(value)) {\n            return value as string;\n        }\n\n        return value.toString();\n    }\n\n    /**\n     * Return `true` if a string represents an integer\n     */\n    static testInteger(str: string): boolean {\n        return /^(\\-|\\+)?([0-9]+)$/.test(str);\n    }\n\n    /**\n     * Return `true` if a string represents a floating point number\n     */\n    static testFloat(str: string): boolean {\n        return /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$/.test(str);\n    }\n\n    /**\n     * Round the passed number away from zero: 4.5 => 5, -4.5 => -5\n     */\n    static roundAway(num: number): number {\n        return num >= 0 ? Math.round(num) : Math.sign(num) * Math.round(Math.abs(num));\n    }\n\n    private static matchSuffix(str: string, factor: number, ...suffixes: string[]): {str: string, factor: number} | undefined {\n        for (const suffix of suffixes) {\n            if (Utils.endsWith(str, suffix)) {\n                return {\n                    str: Utils.trimEnd(str.substr(0, str.length - suffix.length)),\n                    factor\n                };\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Convert a size in string form to a number in bytes.\n     *\n     * The following units are supported: `b`, `kb`, `mb`, `gb`, `tb`, `pb`\n     *\n     * For example `2.5 gb` will return `2621440`.\n     */\n    static toSize(str: string, _default = 0): number {\n        str = Utils.trim(str);\n        if (!str) {\n            return _default;\n        }\n        let factor = 1;\n        let ret = Utils.matchSuffix(str, 1024 * 1024 * 1024 * 1024 * 1024, \"PB\", \"PO\");\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024 * 1024 * 1024 * 1024, \"TB\", \"TO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024 * 1024 * 1024, \"GB\", \"GO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024 * 1024, \"MB\", \"MO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024, \"KB\", \"KO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1, \"B\", \"O\");\n        }\n        if (ret !== undefined) {\n            str = ret.str;\n            factor = ret.factor;\n        }\n        if (!Utils.testFloat(str)) {\n            return _default;\n        }\n        const value = Utils.toNumber(str, _default) * factor;\n        return Math.round(value);\n    }\n\n    private static calculateDuration(current: number, unit: string): number {\n        switch (Utils.toLowerCase(unit)) {\n            case \"d\":    case \"j\":\n            case \"days\": case \"jours\":\n            case \"day\":  case \"jour\":\n                return current * Utils.oneDay;\n            case \"h\":\n            case \"hours\": case \"heures\":\n            case \"hour\":  case \"heure\":\n                return current * Utils.oneHour;\n            case \"m\":\n            case \"minutes\": case \"minute\":\n            case \"mins\":    case \"min\":\n                return current * Utils.oneMinute;\n            case \"s\":\n            case \"seconds\":  case \"secondes\":\n            case \"second\":   case \"seconde\":\n            case \"secs\": case \"sec\":\n                return current * Utils.oneSecond;\n                break;\n            case \"ms\":\n            case \"milliseconds\": case \"miliseconds\":  case \"millisecondes\": case \"milisecondes\":\n            case \"millisecond\":  case \"milliseconde\": case \"milisecond\":    case \"miliseconde\":\n                return current;\n            default:\n                return 0;\n        }\n    }\n\n    /**\n     * Convert a duration in string form to a number in milliseconds.\n     *\n     * These units are supported: `days`, `hours`, `minutes`, `seconds`, `milliseconds` (abbreviations are also supported)\n     *\n     * For example `3 h 2mins 4s => 10924000`\n     *\n     * @param defaultUnit The unit to use if no units are in the string. The default value is `ms`\n     */\n    static toDuration(str: string, defaultUnit = \"ms\"): number {\n        let total = 0;\n        if (str) {\n            let current = 0;\n            const tokens = str.match(/[0-9\\.,]+|[a-zA-Z]+/g) || [];\n            for (const token of tokens) {\n                if (/[a-zA-Z]/.test(token)) {\n                    total += Utils.calculateDuration(current, token);\n                    current = 0;\n                }\n                else {\n                    if (current) {\n                        total += Utils.calculateDuration(current, defaultUnit);\n                    }\n                    current = Utils.toNumber(token);\n                }\n            }\n            if (current) {\n                total += Utils.calculateDuration(current, defaultUnit);\n            }\n        }\n        return total;\n    }\n}\n","import {Utils} from \"./utils\";\n\n/**\n * Describes the error codes that can be set in the {@link SqError} class.\n */\nexport enum SqErrorCode {\n    loginCancelled,\n    processedCredentialsError,\n    principalSwitched,\n    autoLoginError\n}\n\n/**\n * A subclass of the built-in {@link Error} class with added `code` and\n * `data` (optional) properties.\n */\nexport class SqError extends Error {\n    // See https://github.com/Microsoft/TypeScript/issues/7639\n    // and https://github.com/Microsoft/TypeScript/issues/1168#issuecomment-107833988\n    /**\n     * The error code associated with the error.\n     */\n    code: SqErrorCode;\n    /**\n     * Arbitrary data associated with the error.\n     */\n    data: any;\n\n    constructor(code: SqErrorCode, message?: string, data?: any) {\n        super(message || SqError.message(code));\n        this.code = code;\n        this.name = \"SqError\";\n        this.message = message || SqError.message(code);\n        if (data) {\n            this.data = data;\n        }\n    }\n\n    /**\n     * Return `true` if the passed `error` is a valid `SqErrorCode` instance.\n     * If the optional `code` parameter is defined then only return true\n     * if the code on `error` matches this value.\n     */\n    static is(error: any, code?: SqErrorCode): error is SqError {\n        if (error instanceof SqError || (error instanceof Error && error.name === \"SqError\")) {\n            return Utils.isUndefined(code) || (error as SqError).code === code;\n        }\n        return false;\n    }\n\n    /**\n     * Return the message corresponding to the passed error `code`.\n     */\n    static message(code: SqErrorCode) {\n        switch (code) {\n            case SqErrorCode.loginCancelled: return \"msg#error.loginCancelled\";\n            case SqErrorCode.processedCredentialsError: return \"msg#error.processedCredentialsError\";\n            case SqErrorCode.principalSwitched: return \"msg#error.principalSwitched\";\n            case SqErrorCode.autoLoginError: return \"msg#error.autoLoginError\";\n            default: return \"msg#error.unknownError\";\n        }\n    }\n}\n","/**\n * An enumeration of keyboard code values\n */\nexport enum Keys {\n    up = 38,\n    down = 40,\n    left = 37,\n    right = 39,\n    del = 46,\n    tab = 9,\n    enter = 13,\n    esc = 27,\n    comma = 188,\n    space = 32,\n    pageUp = 33,\n    pageDown = 34,\n    home = 36,\n    end = 35,\n    backspace = 8\n}\n","import {Utils} from \"./utils\";\n\n/**\n * Defines the different pattern types\n * `Empty`: no pattern\n * `RegExp`: a regular expression pattern\n * `Value`: a literal value\n */\nexport enum PatternType {\n    Empty = 0,\n    RegExp = 1,\n    // WildCard = 2,\n    Value = 3\n}\n\n/**\n * A class that represents a single pattern. The pattern type is deduced automatically from the input pattern text.\n *\n * `<empty string>` => `Empty`\n * `<pattern with wildcards ?*>` => `RegExp` (wildcards are converted to regular expressions)\n * `<pattern starting with ~>` => `RegExp` (the text following the ~ character is treated as a regular expression)\n * `<any other value>` => `Value` (a literal value that is matched as-is)\n */\nexport class Pattern {\n    private _type: PatternType;\n    public get type(): PatternType {\n        return this._type;\n    }\n    private reg?: RegExp;\n    private preparedPattern1?: string;\n    // private preparedPattern2: string;\n    private _text?: string;\n    public get text(): string | undefined {\n        return this._text;\n    }\n\n    public static getPatternType(pattern: string): PatternType {\n        if (!pattern) {\n            return PatternType.Empty;\n        }\n        if (pattern[0] === \"~\" || pattern.includes(\"*\") || pattern.includes(\"?\")) {\n            return PatternType.RegExp;\n        }\n        return PatternType.Value;\n    }\n\n    public static isPattern(pattern: string): boolean {\n        if (!pattern) {\n            return false;\n        }\n        if (pattern[0] === \"~\" || pattern.includes(\"*\") || pattern.includes(\"?\")) {\n            return true;\n        }\n        return false;\n    }\n\n    public static doMatch(pattern: string, text: string): boolean {\n        const _pattern = new Pattern();\n        _pattern.load(pattern);\n        return _pattern.isMatch(text);\n    }\n\n    public static wildcardToRegex(pattern: string): string {\n        if (!pattern) {\n            return pattern;\n        }\n        return \"^\" + Utils.regExEscape(pattern).replace(\"\\\\*\", \".*\").replace(\"\\\\?\", \".\") + \"$\";\n    }\n\n    public constructor(pattern?: string) {\n        if (!pattern) {\n            this.clear();\n        }\n        else {\n            this.load(pattern);\n        }\n    }\n\n    private static cleanPattern(s: string): string {\n        if (!s) {\n            return s;\n        }\n        const sb: string[] = [];\n        let lastIsStar = false;\n        for (const ch of s) {\n            if (ch === \"*\") {\n                if (!lastIsStar) {\n                    lastIsStar = true;\n                    sb.push(ch);\n                }\n            }\n            else {\n                lastIsStar = false;\n                sb.push(ch);\n            }\n        }\n        return sb.join(\"\");\n    }\n\n    public clear():void {\n        this.reg= undefined;\n        this._text = undefined;\n        this.preparedPattern1 = undefined;\n        // this.preparedPattern2 = undefined;\n        this._type = PatternType.Empty;\n    }\n\n    public isEmpty(): boolean {\n        return this._type === PatternType.Empty;\n    }\n\n    public load(pattern: string): boolean {\n        this.clear();\n        try {\n            let s = pattern;\n            this._text = pattern;\n            this._type = Pattern.getPatternType(s);\n            if (this._type === PatternType.Empty) {\n                return true;\n            }\n            if (this._type === PatternType.Value) {\n                this.preparedPattern1= s ;\n                return true;\n            }\n            if (this._type === PatternType.RegExp) {\n                if (s[0] === \"~\") {\n                    s = s.substring(1);\n                }\n                else {\n                    s = Pattern.wildcardToRegex(Pattern.cleanPattern(s));\n                }\n                this.preparedPattern1 = s;\n                this.reg = new RegExp(s, \"i\");\n                return true;\n            }\n            return false;\n        }\n        catch (e) {\n            console.log(`Pattern.Load '${pattern}' error:`, e);\n            this.clear();\n            return false;\n        }\n    }\n\n    public getTypeValueText(): string | undefined {\n        if (this.type === PatternType.Value) {\n            return this.preparedPattern1;\n        }\n        return undefined;\n    }\n\n    public getTypeRegexPattern(): string | undefined {\n        if (this.type === PatternType.RegExp) {\n            return this.preparedPattern1;\n        }\n        return undefined;\n    }\n\n    public isTypeValue(): boolean {\n        return this.type === PatternType.Value;\n    }\n\n    public isMatch(text: string): boolean {\n        text = text || \"\";\n        switch (this._type) {\n            default:\n            case PatternType.Empty:\n                return true;\n            case PatternType.Value:\n                return Utils.eqNC(text, this.preparedPattern1 || \"\");\n            case PatternType.RegExp:\n                return this.reg?.test(text) || false;\n        }\n    }\n}\n\nexport class Patterns {\n    private _text?: string;\n    private _preparedPatterns?: Pattern[];\n    private _values?: { [key: string]: true };\n    private _isEmpty: boolean;\n\n    constructor(text?: string) {\n        this.text = text;\n    }\n\n    public clear(): void {\n        this._preparedPatterns = undefined;\n        this._values = undefined;\n        this._isEmpty = true;\n    }\n\n    public get text(): string | undefined {\n        return this._text;\n    }\n\n    public set text(value: string | undefined) {\n        if (value === this._text) {\n            return;\n        }\n        this._text = value;\n        const l = Utils.split(this._text || \"\", \";\");\n        this.innerSetList(l);\n\n    }\n\n    public getTypeCount(type: PatternType): number {\n        if (!this._preparedPatterns) {\n            return 0;\n        }\n        if (type === PatternType.Value) {\n            return !!this._values ? Object.keys(this._values).length : 0;\n        }\n        let count = 0;\n        for (const pattern of this._preparedPatterns) {\n            if (pattern.type === type) {\n                count++;\n            }\n        }\n        return count;\n    }\n\n    private innerSetList(l: string[] | undefined): void {\n        this._preparedPatterns = undefined;\n        this._values = undefined;\n        this._isEmpty = true;\n\n        if (!!l) {\n            for (const s of l) {\n                if (!s) {\n                    continue;\n                }\n                const pattern = new Pattern();\n                if (pattern.load(s)) {\n                    if (!this._preparedPatterns) {\n                        this._preparedPatterns = [];\n                    }\n                    this._preparedPatterns.push(pattern);\n                }\n            }\n        }\n        if (this._preparedPatterns) {\n            const c = this._preparedPatterns.length;\n            if (c > 0) {\n                this._isEmpty = false;\n            }\n            for (let i = c - 1; i >= 0; i--) {\n                const pattern = this._preparedPatterns[i];\n                //do values\n                if (pattern.isTypeValue()) {\n                    if (!this._values) {\n                        this._values = {};\n                    }\n                    const val = pattern.getTypeValueText() || \"\";\n                    this._values[val] = true;\n                    this._preparedPatterns.splice(i, 1);\n                }\n            }\n        }\n    }\n\n    public get list(): string[] {\n        return Utils.split(this.text || \"\", \";\");\n    }\n\n    public set list(value: string[]) {\n        this.text = !!value ? value.join(\";\") : undefined;\n        this.innerSetList(value);\n    }\n\n    public setText(list: string[]): void {\n        this.list = list;\n    }\n\n    public isEmpty(): boolean {\n        return this._isEmpty;\n    }\n\n    public hasPatterns(): boolean {\n        return !this.isEmpty();\n    }\n\n    public isMatch(name: string, logdisplay?: string) {\n        if (this.isEmpty()) {\n            return true;\n        }\n\n        if (!!this._values) {\n            if (this._values[name]) {\n                if (!!logdisplay) {\n                    console.log(logdisplay, ` : the pattern '${name}' matches the value '${name}'`);\n                }\n                return true;\n            }\n        }\n\n        if (!!this._preparedPatterns) {\n            for (const pattern of this._preparedPatterns) {\n                if (!pattern) {\n                    continue;\n                }\n                if (pattern.isTypeValue()) {\n                    continue;\n                }\n                if (pattern.isMatch(name)) {\n                    if (!!logdisplay) {\n                        console.log(logdisplay, ` : the pattern '${pattern.text}' matches the value '${name}'`);\n                    }\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n}\n\n/**\n * This class is used to process \"included\" and \"excluded\" patterns typically specified in the Sinequa configuration.\n */\nexport class PatternMatcher {\n    public includedPattern: Patterns;\n    public excludedPattern: Patterns;\n\n    public get included(): string | undefined {\n        return this.includedPattern.text;\n    }\n\n    public set included(value: string | undefined) {\n        this.includedPattern.text = value;\n    }\n\n    public get excluded(): string | undefined {\n        return this.excludedPattern.text;\n    }\n\n    public set excluded(value: string | undefined) {\n        this.excludedPattern.text = value;\n    }\n\n    public set includedList(value: string[]) {\n        this.includedPattern.list = value;\n    }\n\n    public set excludedList(value: string[]) {\n        this.excludedPattern.list = value;\n    }\n\n    public includedLogDisplay?: string;\n    public excludedLogDisplay?: string;\n\n    constructor(includedLogDisplay?: string, excludedLogDisplay?: string) {\n        this.includedPattern = new Patterns();\n        this.excludedPattern = new Patterns();\n        this.includedLogDisplay = includedLogDisplay;\n        this.excludedLogDisplay = excludedLogDisplay;\n    }\n\n    public hasPatterns(): boolean {\n        return this.includedPattern.hasPatterns() || this.excludedPattern.hasPatterns();\n    }\n\n    public isExcluded(name: string): boolean {\n        return !this.isIncluded(name);\n    }\n\n    public isIncluded(name: string): boolean {\n        if (!name) {\n            return true;\n        }\n        if (this.includedPattern.hasPatterns()) {\n            if (this.excludedPattern.hasPatterns()) {\n                if (this.excludedPattern.isMatch(name, this.excludedLogDisplay)) {\n                    return false;\n                }\n            }\n            if (!this.includedPattern.isMatch(name, this.includedLogDisplay)) {\n                return false;\n            }\n            return true;\n        }\n        else if (this.excludedPattern.hasPatterns()) {\n            if (this.excludedPattern.isMatch(name, this.excludedLogDisplay)) {\n                return false;\n            }\n            return true;\n        }\n        return true;\n    }\n\n    public isExplicitlyIncluded(name: string): boolean {\n        return this.includedPattern.hasPatterns() && this.includedPattern.isMatch(name, this.includedLogDisplay);\n    }\n\n    public isExplicitlyExcluded(name: string): boolean {\n        return this.excludedPattern.hasPatterns() && this.excludedPattern.isMatch(name, this.excludedLogDisplay);\n    }\n}\n","export class IteratorAdaptor<T,B> implements IterableIterator<T> {\n    readonly return?: (value?: any) => IteratorResult<T>;\n    readonly throw?: (error?: any) => IteratorResult<T>;\n\n    constructor(private base: Iterator<B>, private adaptor: (b: B) => T) {\n        this.return = (base.return) ? (v) => this.translate(this.base.return!(v)) : undefined;\n        this.throw  = (base.throw)  ? (e) => this.translate(this.base.throw!(e))  : undefined;\n    }\n\n    static forIterable<B, T>(iterable: Iterable<B>, adaptor: (b: B) => T): IterableIterator<T> {\n        /*if (iterable === undefined) {\n            return undefined;\n        }*/\n\n        return new IteratorAdaptor<T,B>(\n            iterable[Symbol.iterator](),\n            adaptor\n        );\n    }\n\n    private translate(result: IteratorResult<B>): IteratorResult<T> {\n        if (result.done) {\n            return {\n                done: result.done,\n                value: (result.done && result.value === undefined) ? undefined : this.adaptor(result.value)\n            };\n        }\n        else {\n            return {\n                value: this.adaptor(result.value)\n            };\n        }\n    }\n\n    next(value?: any)  { return this.translate(this.base.next(value)); }\n\n    [Symbol.iterator](): IterableIterator<T> { return this; }\n}\n","import { ArrayView } from \"./array-view\";\nimport { IteratorAdaptor } from \"./iterator-adaptor\";\n\n/**\n * A generic interface describing a name and associated value\n */\nexport interface NameValuePair<U, V> {\n    name: U;\n    value: V;\n}\n\n/**\n * An {@link ArrayView} of {@link NameValuePair}\n */\nexport interface NameValueArrayView<U, V> extends ArrayView<NameValuePair<U, V>> {\n    getName(index: number): U;\n    getValue(index: number): V;\n    items(): IterableIterator<NameValuePair<U, V>>;\n    names(): IterableIterator<U>;\n    values(): IterableIterator<V>;\n}\n\nclass ArrayBasedView<T, U, V> implements NameValueArrayView<U, V> {\n    constructor(\n        private base: T[],\n        private nameSelector: (t: T) => U,\n        private valueSelector: (t: T) => V\n    ) { }\n\n    get length(): number {\n        return this.base.length;\n    }\n\n    get(index: number): NameValuePair<U, V> {\n        return this.toNameValuePair(this.base[index]);\n    }\n\n    getName(index: number): U {\n        return this.nameSelector(this.base[index]);\n    }\n\n    getValue(index: number): V {\n        return this.valueSelector(this.base[index]);\n    }\n\n    private toNameValuePair(obj: T): NameValuePair<U, V> {\n        return { name: this.nameSelector(obj), value: this.valueSelector(obj) };\n    }\n\n    /*\n        Iterators\n    */\n\n    [Symbol.iterator](): IterableIterator<NameValuePair<U, V>> {\n        return this.items();\n    }\n\n    items(): IterableIterator<NameValuePair<U, V>> {\n        return IteratorAdaptor.forIterable(\n            this.base,\n            (obj) => this.toNameValuePair(obj)\n        );\n    }\n\n    names(): IterableIterator<U> {\n        return IteratorAdaptor.forIterable(this.base, this.nameSelector);\n    }\n\n    values(): IterableIterator<V> {\n        return IteratorAdaptor.forIterable(this.base, this.valueSelector);\n    }\n\n    forEach(callback: (item: NameValuePair<U, V>, index?: number, items?: NameValueArrayView<U, V>) => void, thisArg?: any) {\n        for (let idx = 0; idx < this.length; idx++) {\n            const r = this.get(idx);\n            if (thisArg)\n                callback.call(thisArg, r, idx, this);\n            else\n                callback(r, idx, this);\n        }\n        return this;\n    }\n}\n\n/**\n * A helper class for creating {@link NameValueArrayView} instances\n */\n// @dynamic\nexport class NameValueArrayViewHelper {\n    /**\n     * Creates a {@link NameValueArrayView} from an array of {@link NameValuePair} items\n     *\n     * @param items An array of `NameValuePair` items\n     */\n    static fromArray<U, V>(items: NameValuePair<U, V>[]): NameValueArrayView<U, V> {\n        return new ArrayBasedView(items || [], p => p.name, p => p.value);\n    }\n\n    static fromObjects<T>(items: T[], nameKey: keyof T, valueKey: keyof T): NameValueArrayView<T[keyof T], T[keyof T]> {\n        return new ArrayBasedView(items || [], p => p[nameKey], p => p[valueKey]);\n    }\n\n    static from<T, U, V>(items: T[], nameSelector: (t: T) => U, valueSelector: (t: T) => V): NameValueArrayView<U, V> {\n        return new ArrayBasedView(items || [], nameSelector, valueSelector);\n    }\n}\n","import \"fast-text-encoding\"; // IE 11 / Edge\n\n// NB the name of the intl polyfill (below) conflicts with @sinequa/core/intl in the module resolution.\n// Output of traceResolution: true gives the following:\n//\n// Resolving module name 'intl' relative to base url 'D:/ice/sba/ng-ws/projects/core' - 'D:/ice/sba/ng-ws/projects/core/intl'.\n// Loading module as file / folder, candidate module location 'D:/ice/sba/ng-ws/projects/core/intl', target file type 'TypeScript'.\n// ...\n// This can be worked around in a number of ways:\n// 1. Rename the @sinequa/core/intl folder and all references to it (not overly desirable)\n// 2. Install the intl polyfill using an alias: npm install my-intl-alias@npm:intl. But then references in the locale files would have\n//    to use import \"my-intl-alias/...\"\n// 3. Don't use index.ts as the entry point filename. This is a bit hacky but it works and has the least impact so that's what we've gone with\n//    _index.ts is used and referenced in package.json: { \"ngPackage\": { \"lib\": { \"entryFile\": \"index.ts\" } } }\n//    We also put an explicit Path to @sinequa/core/intl => ./intl/_index in the local tsconfig.json so that references to @sinequa/core/intl\n//    are resolved correctly in VSCode\nimport \"intl\"; // Safari\nimport \"intl/locale-data/jsonp/en-US\"; // Locale needed for formatjs initialization (new Intl.NumberFormat())\nimport \"js-polyfills/url\";\nimport \"matchmedia-polyfill\";\nimport focusWithin from \"focus-within\"; // IE 11 / Edge - https://github.com/jonathantneal/focus-within\n\nfocusWithin(document);\n\n// String.trimStart, String.trimEnd\nif (!(<any>String.prototype).trimStart) {\n  (<any>String.prototype).trimStart = function () {\n    return this.replace(/^[\\s\\uFEFF\\xA0]+/g, '');\n  };\n}\n\nif (!(<any>String.prototype).trimEnd) {\n  (<any>String.prototype).trimEnd = function () {\n    return this.replace(/[\\s\\uFEFF\\xA0]+$/g, '');\n  };\n}\n\n// See https://gist.github.com/jocki84/6ffafd003387179a988e\nif (!(<any>Element.prototype).scrollIntoViewIfNeeded) {\n    (<any>Element.prototype).scrollIntoViewIfNeeded = function (centerIfNeeded) {\n        function withinBounds(value, min, max, extent) {\n            if (false === centerIfNeeded || max <= value + extent && value <= min + extent) {\n                return Math.min(max, Math.max(min, value));\n            } else {\n                return (min + max) / 2;\n            }\n        }\n\n        function makeArea(left, top, width, height) {\n            return  { \"left\": left, \"top\": top, \"width\": width, \"height\": height\n                    , \"right\": left + width, \"bottom\": top + height\n                    , \"translate\":\n                        function (x, y) {\n                            return makeArea(x + left, y + top, width, height);\n                        }\n                    , \"relativeFromTo\":\n                        function (lhs, rhs) {\n                            let newLeft = left, newTop = top;\n                            lhs = lhs.offsetParent;\n                            rhs = rhs.offsetParent;\n                            if (lhs === rhs) {\n                                return area;\n                            }\n                            for (; lhs; lhs = lhs.offsetParent) {\n                                newLeft += lhs.offsetLeft + lhs.clientLeft;\n                                newTop += lhs.offsetTop + lhs.clientTop;\n                            }\n                            for (; rhs; rhs = rhs.offsetParent) {\n                                newLeft -= rhs.offsetLeft + rhs.clientLeft;\n                                newTop -= rhs.offsetTop + rhs.clientTop;\n                            }\n                            return makeArea(newLeft, newTop, width, height);\n                        }\n                    };\n        }\n\n        let parent, elem = this, area = makeArea(\n            this.offsetLeft, this.offsetTop,\n            this.offsetWidth, this.offsetHeight);\n        while ((parent = elem.parentNode) instanceof HTMLElement) {\n            const clientLeft = parent.offsetLeft + parent.clientLeft;\n            const clientTop = parent.offsetTop + parent.clientTop;\n\n            // Make area relative to parent's client area.\n            area = area.\n                relativeFromTo(elem, parent).\n                translate(-clientLeft, -clientTop);\n\n            parent.scrollLeft = withinBounds(\n                parent.scrollLeft,\n                area.right - parent.clientWidth, area.left,\n                parent.clientWidth);\n\n            parent.scrollTop = withinBounds(\n                parent.scrollTop,\n                area.bottom - parent.clientHeight, area.top,\n                parent.clientHeight);\n\n            // Determine actual scroll amount by reading back scroll properties.\n            area = area.translate(clientLeft - parent.scrollLeft,\n                                  clientTop - parent.scrollTop);\n            elem = parent;\n        }\n    };\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n(function () {\n\n  if ( typeof (<any>window).CustomEvent === \"function\" ) return;\n\n  function CustomEvent ( event, params ) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    const evt = document.createEvent( 'CustomEvent' );\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    return evt;\n   }\n\n  CustomEvent.prototype = (<any>window).Event.prototype;\n\n  (<any>window).CustomEvent = CustomEvent;\n})();\n\n// IE\nif (!window.location.origin) { // Some browsers (mainly IE) do not have this property, so we need to build it manually...\n    try {\n        window.location[/*foo readonly*/<string>\"origin\"] = window.location.protocol + '//' + window.location.hostname + (window.location.port ? (':' + window.location.port) : '');\n    }\n    catch (e) {\n    }\n}\n\n// fake storage (eg for Safari private browsing)\nfunction fakeStorage(storageName: string) {\n    let fakeStorage = {};\n    let storage;\n    let needed = false;\n\n    if (typeof window[storageName] === \"object\") {\n        // Storage is there, does it work (eg Safari private browsing)\n        try {\n            window[storageName].setItem(\"fakeStorageTest\", \"1\");\n            window[storageName].removeItem(\"fakeStorageTest\");\n        }\n        catch (e) {\n            needed = true;\n        }\n    }\n    else {\n        needed = true;\n    }\n\n    if (!needed) {\n        return;\n    }\n\n    if (typeof window[storageName] === \"object\") {\n        // Override with fake implementation\n        storage = window[storageName];\n    }\n    else {\n        // Implement with fake\n        try {\n            storage = window[/*fool readonly*/<string>storageName] = {};\n        }\n        catch (e) {\n            console.warn(\"Unable to set fake\", storageName);\n            return;\n        }\n    }\n\n    console.warn(\"Using fake\", storageName);\n\n    const dispatchStorageEvent = function(key, newValue) {\n        const oldValue = (!key) ? null : storage.getItem(key);\n        const url = location.href.substr(location.origin.length);\n        const storageEvent = document.createEvent(\"StorageEvent\"); // For IE, http://stackoverflow.com/a/25514935/1214183\n\n        storageEvent[\"initStorageEvent\"](\"storage\", false, false, key, oldValue, newValue, url, storage);\n        window.dispatchEvent(storageEvent);\n    };\n\n    storage.key = function(i) {\n        const key = Object.keys(fakeStorage)[i];\n        return typeof key === \"string\" ? key : null;\n    };\n\n    storage.getItem = function(key) {\n        return typeof fakeStorage[key] === 'string' ? fakeStorage[key] : null;\n    };\n\n    storage.setItem = function(key, value) {\n        dispatchStorageEvent(key, value);\n        fakeStorage[key] = String(value);\n    };\n\n    storage.removeItem = function(key) {\n        dispatchStorageEvent(key, null);\n        delete fakeStorage[key];\n    };\n\n    storage.clear = function() {\n        dispatchStorageEvent(null, null);\n        fakeStorage = {};\n    };\n}\n\nfakeStorage(\"localStorage\");\nfakeStorage(\"sessionStorage\");\n\n// DOMRect polyfill\n// Credit: https://github.com/Financial-Times/polyfill-service/pull/1732\n(function(global: any) {\n    if (global.DOMRect) {\n        return;\n    }\n    function number(v) {\n        return v === undefined ? 0 : Number(v);\n    }\n    function different(u, v) {\n        return u !== v && !(isNaN(u) && isNaN(v));\n    }\n    function DOMRect(this: DOMRect, xArg, yArg, wArg, hArg) {\n        let x; let y; let width; let height; let left; let right; let top; let bottom;\n        x = number(xArg);\n        y = number(yArg);\n        width = number(wArg);\n        height = number(hArg);\n        Object.defineProperties(this, {\n            x: {\n                get: function () { return x; },\n                set: function (newX) {\n                    if (different(x, newX)) {\n                        x = newX;\n                        left = right = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            y: {\n                get: function () { return y; },\n                set: function (newY) {\n                    if (different(y, newY)) {\n                        y = newY;\n                        top = bottom = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            width: {\n                get: function () { return width; },\n                set: function (newWidth) {\n                    if (different(width, newWidth)) {\n                        width = newWidth;\n                        left = right = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            height: {\n                get: function () { return height; },\n                set: function (newHeight) {\n                    if (different(height, newHeight)) {\n                        height = newHeight;\n                        top = bottom = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            left: {\n                get: function () {\n                    if (left === undefined) {\n                        left = x + Math.min(0, width);\n                    }\n                    return left;\n                },\n                enumerable: true\n            },\n            right: {\n                get: function () {\n                    if (right === undefined) {\n                        right = x + Math.max(0, width);\n                    }\n                    return right;\n                },\n                enumerable: true\n            },\n            top: {\n                get: function () {\n                    if (top === undefined) {\n                        top = y + Math.min(0, height);\n                    }\n                    return top;\n                },\n                enumerable: true\n            },\n            bottom: {\n                get: function () {\n                    if (bottom === undefined) {\n                        bottom = y + Math.max(0, height);\n                    }\n                    return bottom;\n                },\n                enumerable: true\n            }\n        });\n    }\n    global.DOMRect = DOMRect;\n}(window));\n\n// Element.closest and Element.matches polyfills (see https://developer.mozilla.org/en-US/docs/Web/API/Element/closest)\nif (!Element.prototype.matches) {\n    Element.prototype.matches =\n        (Element.prototype as any).msMatchesSelector ||\n        Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n    Element.prototype.closest = function(s) {\n        let el = this;\n        do {\n            if (el.matches(s)) {\n                return el;\n            }\n            el = el.parentElement || el.parentNode as Element;\n        } while (el !== null && el.nodeType === 1);\n        return null;\n    };\n}\n\nexport {\n};\n","import {NgModule} from \"@angular/core\";\nimport \"./polyfills\";\n\n/**\n * This module contains a variety of base types and utility classes including the {@link Utils} utilility class\n */\n@NgModule({\n    imports: [\n    ],\n    declarations: [\n    ],\n    exports: [\n    ]\n})\nexport class BaseModule {\n}"]}