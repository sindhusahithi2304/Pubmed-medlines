{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/core/intl/import-moment.ts","../../../projects/core/intl/intl.service.ts","../../../projects/core/intl/abstract-intl.pipe.ts","../../../projects/core/intl/message.pipe.ts","../../../projects/core/intl/module.providers.ts","../../../projects/core/intl/intl.module.ts","../../projects/core/intl/messages/de.ts","../../projects/core/intl/messages/en.ts","../../projects/core/intl/messages/fr.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","create","__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","__read","n","r","e","ar","push","error","__spread","arguments","concat","window","moment","formatters","getMessageFormat","memoizeFormatConstructor","IntlMessageFormat","getNumberFormat","Intl","NumberFormat","getDateTimeFormat","DateTimeFormat","getRelativeTimeFormat","RelativeTimeFormat","getPluralRules","PluralRules","DATE_TIME_FORMAT_OPTIONS","NUMBER_FORMAT_OPTIONS","RELATIVE_TIME_FORMAT_OPTIONS","LOCALES_CONFIG","InjectionToken","INTL_CONFIG","DEFAULT_FORMATS","date","sqDateTime","day","month","year","hour","minute","second","sqDate","sqYear","sqMonthYear","time","number","sqWeek","minimumIntegerDigits","useGrouping","sqNoGrouping","sqZeroDecimalPlaces","maximumFractionDigits","sqOneDecimalPlace","sqTwoDecimalPlaces","sqThreeDecimalPlaces","sqFourDecimalPlaces","sqFiveDecimalPlaces","IntlService","intlConfig","localesConfig","this","messagePrefix","textPrefix","console","_events","Subject","locales","defaultLocale","getLanguage","name","sepPos","indexOf","substring","getBrowserLanguages","navigator","languages","language","userLanguage","browserLanguage","systemLanguage","prototype","ngOnDestroy","complete","defineProperty","getInitialLocale","localStorage","getItem","locale","getLocale","init","formats","Utils","merge","observable","use","initialLocale","log","pipe","last","subscribe","loadData","loadLocale","throwError","names","approximate","this_1","find","locale1","names_1","names_1_1","store","_this","newLocale","data","of","currentLocale","setItem","direction","d3","formatDefaultLocale","format","timeFormatDefaultLocale","d3.formatDefaultLocale","d3.timeFormatDefaultLocale","intl","intlLocale","observable2","map","getDefaultMessages","_default","messages","getMessages","getMessage","key","startsWith","substr","message","get","defaultMessages","nextLang","text","start","allowNone","ic","end","lang1","charCodeAt","lang2","sysLang","iStart","len","defaultLang","curLang","processFormatMessage","values","keys","formatMessage","trim","sysLangStr","_values","_b","_c","valueName","isString","eq","formatText","parseDate","isValid","toDate","getNamedFormat","type","warn","filterProps","props","whitelist","defaults","reduce","filtered","formatDate","options","Date","filteredOptions","String","formatTime","assign","makeRelativeTimeParams","diff","getTime","now","absDiff","Math","abs","oneSecond","unit","oneMinute","roundAway","oneHour","oneDay","formatRelativeTime","undefined","isDate","params","numeric","formatNumber","i0","ɵɵinject","factory","ɵfac","providedIn","AbstractIntlPipe","intlService","changeDetectorRef","updateValue","lastValue","lastParams","markForCheck","transform","equals","localeChange","events","event","isEmpty","unsubscribe","ɵɵdirectiveInject","ɵɵinjectPipeChangeDetectorRef","pure","MessagePipe","_super","__","constructor","__extends","INTL_MODULE_PROVIDERS","IntlInitializer","toPromise","IntlModule","forRoot","localeConfig","ngModule","providers","provide","useClass","APP_INITIALIZER","useFactory","deps","multi","imports","CommonModule","BaseModule","declarations","exports","system","boolean","percent","fieldSeparator","memorySize","bytes","kb","mb","gb","tb","pb","serverError","loginCancelled","processedCredentialsError","autoLoginError","principalSwitched","userOverrideFailure","responseLoadFailure","unknownError","da","de","el","en","es","fi","fr","it","ja","ko","nl","no","pl","pt","ro","ru","sv","th","zh","zs","zz"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// moment locales need moment set globally\nimport moment from \"moment\";\n(window as any).moment = moment;\n","import {Injectable, Optional, Inject, OnDestroy, InjectionToken} from \"@angular/core\";\nimport {Subject, Observable, concat, of, throwError} from \"rxjs\";\nimport {map, last} from \"rxjs/operators\";\nimport IntlMessageFormat from \"intl-messageformat\";\nimport memoizeFormatConstructor from \"intl-format-cache\";\n// TODO - check loading of locale data per locale - the ponyfill doesn't seem to work\nimport \"@formatjs/intl-relativetimeformat/polyfill\";\nimport \"intl-pluralrules\";\nimport get from \"lodash/get\";\nimport {Utils, MapOf, JsonObject} from \"@sinequa/core/base\";\n// We support loading d3 bundled and unbundled as it is typically easier\n// for others to integrate bundled examples but some 3rd party libs (eg swimlane/charts)\n// load d3 unbundled.\nimport {FormatLocaleDefinition, formatDefaultLocale} from \"d3-format\";\nimport {TimeLocaleDefinition, timeFormatDefaultLocale} from \"d3-time-format\";\nimport * as d3 from \"d3\";\nimport moment from \"moment\";\n\n/**\n * @ignore\n */\nconst formatters = {\n    getMessageFormat: memoizeFormatConstructor(IntlMessageFormat),\n    getNumberFormat: memoizeFormatConstructor(Intl.NumberFormat),\n    getDateTimeFormat: memoizeFormatConstructor(Intl.DateTimeFormat),\n    getRelativeTimeFormat: memoizeFormatConstructor(Intl.RelativeTimeFormat),\n    getPluralRules: memoizeFormatConstructor(Intl.PluralRules)\n};\n\n/**\n * @ignore\n */\nconst DATE_TIME_FORMAT_OPTIONS = [\n    \"dateStyle\",\n    \"timeStyle\",\n    \"localeMatcher\",\n    \"timeZone\",\n    \"hour12\",\n    \"hourCycle\",\n    \"formatMatcher\",\n    \"weekday\",\n    \"era\",\n    \"year\",\n    \"month\",\n    \"day\",\n    \"hour\",\n    \"minute\",\n    \"second\",\n    \"timeZoneName\",\n];\n\n/**\n * @ignore\n */\nconst NUMBER_FORMAT_OPTIONS = [\n    \"localeMatcher\",\n    \"style\",\n    \"currency\",\n    \"currencyDisplay\",\n    \"useGrouping\",\n    \"minimumIntegerDigits\",\n    \"minimumFractionDigits\",\n    \"maximumFractionDigits\",\n    \"minimumSignificantDigits\",\n    \"maximumSignificantDigits\",\n];\n\n/**\n * @ignore\n */\nconst RELATIVE_TIME_FORMAT_OPTIONS = [\n    \"localeMatcher\",\n    \"numeric\",\n    \"style\"\n];\n\n/**\n * Describes event emitted by {@link IntlService} when the current locale changes\n */\nexport interface LocaleChangeEvent {\n    /**\n     * The name of the newly selected locale\n     */\n    locale: string;\n}\n\n/**\n * Describes the data that can be set in a Sinequa locale. Instances are normally\n * defined in application locale modules which can be included statically or loaded\n * dynamically\n */\nexport interface LocaleData {\n    /**\n     * Options pertaining to the `Intl` API\n     */\n    intl: {\n        locale: string\n    };\n    /**\n     * Options pertaining to the `Moment.js` library\n     */\n    moment?: { // default to built-in en-us, data is auto set by moment.defineLocale when the locale module is loaded\n        locale: string\n    };\n    /**\n     * Options pertaining to the `D3.js` library\n     */\n    d3?: {\n        locale: string,\n        format: FormatLocaleDefinition,\n        time: TimeLocaleDefinition\n    };\n    /**\n     * The messages (ICU Message syntax) for this locale\n     */\n    messages: JsonObject;\n}\n\n/**\n * Describes a Sinequa locale\n */\nexport interface Locale {\n    /**\n     * The name identifying the locale\n     */\n    name: string;\n    /**\n     * A display name for the locale\n     */\n    display: string;\n    /**\n     * The directionality of text in this locale (left-to-right or right-to-left)\n     */\n    direction?: \"ltr\" | \"rtl\";\n    /**\n     * The locale data for the locale\n     */\n    data?: LocaleData;\n}\n\n/**\n * @ignore\n */\ninterface NextLang {\n    start: number;\n    end: number;\n    lang1: number;\n    lang2: number;\n}\n\n\n// moment needs to be set globally to load moment locales successfully when the locales are bundled in the main rollup bundle\n// see: https://github.com/rollup/rollup/issues/641\nimport \"./import-moment\";\n\n/**\n * Describes the locales configuration object defined by an application and used by the {@link IntlService}\n */\nexport interface LocalesConfig {\n    /**\n     * The default locale\n     */\n    defaultLocale: Locale;\n    /**\n     * The set of locales supported by the application\n     */\n    locales?: Locale[];\n    /**\n     * An optional loader for the dynamic loading of locale data\n     * for locales that do not define the data statically\n     */\n    loadLocale?(locale: string): Observable<LocaleData>;\n}\n\n/**\n * An injection token used to initialize the [locales configuration]{@link LocalesConfig} of {@link IntlModule}\n */\nexport const LOCALES_CONFIG = new InjectionToken<LocalesConfig>('LOCALES_CONFIG');\n\n/**\n * Describes the object to specify custom ICU Message formats\n */\nexport interface IntlFormats {\n    /**\n     * Format options for dates\n     */\n    date?: MapOf<Intl.DateTimeFormatOptions>;\n    /**\n     * Format options for times\n     */\n    time?: MapOf<Intl.DateTimeFormatOptions>;\n    /**\n     * Format options for numbers\n     */\n    number?: MapOf<Intl.NumberFormatOptions>;\n    /**\n     * Format options for relative times\n     */\n    relativeTime?: MapOf<Intl.RelativeTimeFormatOptions>;\n}\n\n/**\n * Describes a general configuration object for the {@link IntlModule}\n */\nexport interface IntlConfig {\n    /**\n     * Custom formats for ICU Message processing\n     */\n    formats?: IntlFormats;\n}\n\n/**\n * An injection token used to initialize the [general configuration]{@link IntlConfig} of {@link IntlModule}\n */\nexport const INTL_CONFIG = new InjectionToken<IntlConfig>('INTL_CONFIG');\n\n/**\n * Default custom ICU Message formats\n */\nconst DEFAULT_FORMATS: IntlFormats = {\n    date: {\n        sqDateTime: {\n            day: \"2-digit\",\n            month: \"2-digit\",\n            year: \"numeric\",\n            hour: \"2-digit\",\n            minute: \"2-digit\",\n            second: \"2-digit\"\n        },\n        sqDate: {\n            day: \"2-digit\",\n            month: \"2-digit\",\n            year: \"numeric\"\n        },\n        sqYear: {\n            year: \"numeric\"\n        },\n        sqMonthYear: {\n            month: \"short\",\n            year: \"numeric\"\n        }\n    },\n    time: {\n    },\n    number: {\n        sqWeek: {\n            minimumIntegerDigits: 2,\n            useGrouping: false\n        },\n        sqYear: {\n            useGrouping: false\n        },\n        sqNoGrouping: {\n            useGrouping: false\n        },\n        sqZeroDecimalPlaces: {\n            maximumFractionDigits: 0\n        },\n        sqOneDecimalPlace: {\n            maximumFractionDigits: 1\n        },\n        sqTwoDecimalPlaces: {\n            maximumFractionDigits: 2\n        },\n        sqThreeDecimalPlaces: {\n            maximumFractionDigits: 3\n        },\n        sqFourDecimalPlaces: {\n            maximumFractionDigits: 4\n        },\n        sqFiveDecimalPlaces: {\n            maximumFractionDigits: 5\n        }\n    }\n};\n\n/* eslint-disable jsdoc/check-alignment,jsdoc/check-indentation,jsdoc/newline-after-description */\n/**\n * This service provides methods for managing locales and for formatting dates, numbers and strings using\n * [ICU Message syntax]{@link https://formatjs.io/guides/message-syntax/}. [Messages]{@link LocaleData#messages} stored\n * in a locale's data are referenced using a key in the following form: `msg#<JSONPath>`. Given the following messages:\n``` json\n{\n    \"myComponent\": {\n        \"title\": \"Component: {name}\",\n        \"footer\": \"Created on {created, date, medium} by {author}\"\n    }\n}\n```\n * this key: `msg#myComponent.footer` references myComponent's footer message. The message itself uses\n * ICU Message syntax.\n *\n * This service registers a number of [default custom ICU formats]{@link DEFAULT_FORMATS}. These can be overridden or\n * extended by providing the [INTL_CONFIG]{@link INTL_CONFIG} injection token.\n */\n/* eslint-enable jsdoc/check-alignment, jsdoc/check-indentation, jsdoc/newline-after-description */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class IntlService implements OnDestroy {\n    /**\n     * The prefix for ICU messages to be retrieved from [LocaleData.messages]{@link LocaleData#messages}\n     * by {@link formatMessage}\n     */\n    readonly messagePrefix = \"msg#\";\n    /**\n     * An alternative prefix for inline ICU messages processed by {@link formatMessage}\n     */\n    readonly textPrefix = \"txt#\";\n    /**\n     * The available locales\n     */\n    locales: Locale[];\n    /** The current locale */\n    currentLocale: Locale;\n    protected intlLocale: string;\n    /** The current direction */\n    direction: \"ltr\" | \"rtl\";\n    protected _events: Subject<LocaleChangeEvent>;\n    protected formats: IntlFormats;\n\n    constructor(\n        @Optional() @Inject(INTL_CONFIG) protected intlConfig: IntlConfig,\n        @Optional() @Inject(LOCALES_CONFIG) protected localesConfig: LocalesConfig\n    ) {\n        if (!this.intlConfig) {\n            this.intlConfig = {};\n        }\n        if (!localesConfig) {\n            if (!localesConfig) {\n                console.error(\"LOCALES_CONFIG has not been provided by the calling app. \" +\n                    \"Please import IntlModule using the forRoot method to which you should pass a LocalesConfig object\");\n            }\n        }\n        this._events = new Subject<LocaleChangeEvent>();\n        this.locales = localesConfig.locales || [localesConfig.defaultLocale];\n    }\n\n    private static getLanguage(name: string) {\n        const sepPos = name.indexOf(\"-\");\n        if (sepPos === -1) {\n            return name;\n        }\n        return name.substring(0, sepPos);\n    }\n\n    private static getBrowserLanguages(): string[] {\n        if ((navigator as any).languages) {\n            return (navigator as any).languages;\n        }\n        const language = navigator.language || (navigator as any).userLanguage ||\n            (navigator as any).browserLanguage || (navigator as any).systemLanguage;\n        return !!language ? [language] : [];\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n    }\n\n    /**\n     * The observable events emitted by this service\n     */\n    get events(): Observable<LocaleChangeEvent> {\n        return this._events;\n    }\n\n    private getInitialLocale(): Locale {\n        const language = window.localStorage.getItem(\"sinequa-locale\");\n        const languages = !!language ? [language] : IntlService.getBrowserLanguages();\n        let locale = this.getLocale(languages);\n        if (locale) {\n            return locale;\n        }\n        locale = this.getLocale(languages, true);\n        if (locale) {\n            return locale;\n        }\n        return this.localesConfig.defaultLocale;\n    }\n\n    /**\n     * Initialize the service. The current locale is initialized to either the `sinequa-locale` local\n     * storage value, the browser language or the default locale.\n     *\n     * This method is called automatically by the {@link IntlModule} at application startup.\n     *\n     * @return An observable of the current locale\n     */\n    init(): Observable<string> {\n        // Set up formats\n        this.formats = Utils.merge(DEFAULT_FORMATS, this.intlConfig.formats);\n        // Load default locale\n        let observable = this.use(this.localesConfig.defaultLocale.name, false);\n        const initialLocale = this.getInitialLocale();\n        if (initialLocale !== this.localesConfig.defaultLocale) {\n            // Load initial locale if different to default\n            console.log(\"Setting initial locale: \", initialLocale.name);\n            observable = concat<string>(observable, this.use(initialLocale.name, false)).pipe(last<string>());\n        }\n        Utils.subscribe(observable,\n            (value) => {\n                console.log(\"Initial locale set: \", value);\n            });\n        return observable;\n    }\n\n    private loadData(locale: string): Observable<LocaleData> {\n        if (!this.localesConfig.loadLocale) {\n            return throwError(\"Dynamic locale loading has not been implemented in the calling app - \"  +\n                \"please add a loadLocale handler to your LocalesConfig\");\n        }\n        return this.localesConfig.loadLocale(locale);\n    }\n\n    private getLocale(names: string | string[], approximate = false): Locale | undefined {\n        if (typeof names === \"string\") {\n            names = [names];\n        }\n        for (const name of names) {\n            const locale = this.locales.find((locale1) => {\n                if (locale1.name === name) {\n                    return true;\n                }\n                if (approximate && IntlService.getLanguage(locale1.name) === IntlService.getLanguage(name)) {\n                    return true;\n                }\n                return false;\n            });\n            if (locale) {\n                return locale;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Change the current locale. The change is made asynchronously as the locale may need to be\n     * downloaded. The current locale is optionally stored in local storage (`sinequa-locale`)\n     * to be picked up the next time the service is initialized\n     *\n     * @param locale The name of the locale to use\n     * @param store If `true` the current locale is stored in local storage\n     */\n    use(locale: string, store = true): Observable<string> {\n        const newLocale = this.getLocale(locale);\n        if (!newLocale) {\n            return throwError({error: \"unsupported locale\"});\n        }\n\n        const observable = !!newLocale.data ? of(newLocale.data) : this.loadData(locale);\n        Utils.subscribe<LocaleData>(observable,\n            (data) => {\n                this.currentLocale = newLocale;\n\n                if (store) {\n                    window.localStorage.setItem(\"sinequa-locale\", this.currentLocale.name);\n                }\n\n                this.direction = this.currentLocale.direction || \"ltr\";\n\n                if (!this.currentLocale.data) {\n                    this.currentLocale.data = data;\n                }\n\n                // Set moment locale\n                if (this.currentLocale.data.moment) {\n                    // Set (and define if necessary) moment locale (it auto-defines when we are not bundled)\n                    if (moment.locale(this.currentLocale.data.moment.locale) !== this.currentLocale.data.moment.locale) {\n                        console.log(`moment locale not defined: ${this.currentLocale.data.moment.locale} - defaulting to en`);\n                        moment.locale(\"en\");\n                    }\n                }\n                else {\n                    moment.locale(\"en\");\n                }\n\n                // Set d3 locale\n                if (this.currentLocale.data.d3) {\n                    formatDefaultLocale(this.currentLocale.data.d3.format);\n                    timeFormatDefaultLocale(this.currentLocale.data.d3.time);\n                    d3.formatDefaultLocale(this.currentLocale.data.d3.format);\n                    d3.timeFormatDefaultLocale(this.currentLocale.data.d3.time);\n                }\n\n                if (this.currentLocale.data.intl && this.currentLocale.data.intl.locale) {\n                    this.intlLocale = this.currentLocale.data.intl.locale;\n                }\n                else {\n                    this.intlLocale = this.localesConfig.defaultLocale.data ? this.localesConfig.defaultLocale.data.intl.locale : \"en\";\n                }\n                return of(this.intlLocale);\n            });\n\n        const observable2 = observable.pipe(map((value) => {\n            return this.currentLocale.name;\n        }));\n\n        Utils.subscribe(observable2,\n            (name) => {\n                this._events.next({locale: name});\n            });\n\n        return observable2;\n    }\n\n    private getDefaultMessages(): any {\n        const _default = this.locales.find((value) => !!value.data && !!value.data.messages);\n        if (_default) {\n            return _default.data && _default.data.messages;\n        }\n        return {};\n    }\n\n    private getMessages(): any {\n        let messages;\n        if (this.currentLocale && this.currentLocale.data) {\n            messages = this.currentLocale.data.messages;\n        }\n        if (!messages) {\n            messages = this.getDefaultMessages();\n        }\n        return messages;\n    }\n\n    /**\n     * Get the message from the current locale that corresponds to the passed `key`.\n     * If the is not prefixed by {@link messagePrefix} then `null` is returned\n     *\n     * @param key The message key\n     */\n    getMessage(key: string): string | undefined {\n        if (!Utils.startsWith(key, this.messagePrefix)) {\n            return undefined;\n        }\n        key = key.substr(this.messagePrefix.length);\n        const messages = this.getMessages();\n        let message = get(messages, key);\n        if (!message) {\n            const defaultMessages = this.getDefaultMessages();\n            if (messages !== defaultMessages) {\n                message = get(defaultMessages, key);\n            }\n        }\n        return message;\n    }\n\n    // Returned start and end are for the text BEFORE the language specifier and so refer to the previous\n    // language not the one returned by the same call to this method\n    private nextLang(text: string, start: number, allowNone: boolean): NextLang | undefined {\n        for (let i = start, ic = text.length - 3; i < ic; i++) {\n            if (text[i] === \"[\" && text[i + 3] === \"]\") {\n                return {\n                    start,\n                    end: i,\n                    lang1: text.charCodeAt(i + 1),\n                    lang2: text.charCodeAt(i + 2)\n                };\n            }\n        }\n        if (allowNone) {\n            return {\n                start,\n                end: text.length,\n                lang1: -1,\n                lang2: -1\n            };\n        }\n        return undefined;\n    }\n\n    // ([nnn])<default>[fr]<french>[de]<german>...\n    private sysLang(text: string): string {\n        if (!text) {\n            return text;\n        }\n        let iStart = 0;\n        const len = text.length;\n        // Skip order\n        let i = 0;\n        if (text[i] === \"[\") {\n            while (i < len && text[i] >= \"0\" && text[i] <= \"9\") {\n                i++;\n            }\n            if (text[i] === \"]\") {\n                iStart = i + 1;\n            }\n        }\n        // Pick out default value\n        const defaultLang = this.nextLang(text, iStart, false);\n        if (!defaultLang) {\n            return text; // Not a sys lang formatted text\n        }\n        // Look for a matching language\n        const lang1 = this.currentLocale.name.charCodeAt(0);\n        const lang2 = this.currentLocale.name.charCodeAt(1);\n        let curLang: NextLang | undefined = defaultLang;\n        while (curLang) {\n            if (lang1 === curLang.lang1 && lang2 === curLang.lang2) {\n                // We have a matching language, get its text\n                const nextLang = this.nextLang(text, curLang.end + 4, true);\n                return text.substring(nextLang!.start, nextLang!.end);\n            }\n            else {\n                curLang = this.nextLang(text, curLang.end + 4, false);\n            }\n        }\n        // return default language text\n        return text.substring(defaultLang.start, defaultLang.end);\n    }\n\n    private processFormatMessage(message: string, values = {}): string {\n        const hasValues = Object.keys(values).length > 0;\n        if (!hasValues) {\n            return message;\n        }\n        if (message) {\n            try {\n                const formatter = formatters.getMessageFormat(message, this.intlLocale, this.formats, {formatters});\n                const formattedMessage = formatter.format(values);\n                return formattedMessage;\n            }\n            catch (e) {\n                console.log(\"IntlService.processFormatMessage error:\", e);\n                return message;\n            }\n        }\n        else {\n            return message;\n        }\n    }\n\n    /**\n     * Format a message identified by a `key`. Any values referenced\n     * by the message are taken from an optional `values` map. The key can be\n     * in a variety of forms:\n     * * a Sinequa \"syslang\" string: `apple[fr]pomme[de]Apfel`\n     * * a message key resolved in the [messages]{@link LocaleData#messages} of the current\n     * locale:  `msg#path1.path2.path3`\n     * * an ICU message using the `txt#` prefix: `txt#Hello {name}`\n     *\n     * @param key The message identifier\n     * @param values Values referenced by an ICU message\n     * @return The formatted message. If the key is not resolved then it is returned unprocessed\n     */\n    formatMessage(key: string, values?: MapOf<any>): string {\n        key = Utils.trim(key);\n        const sysLangStr = this.sysLang(key);\n        if (sysLangStr !== key) {\n            return sysLangStr;\n        }\n        const _values = {};\n        if (values) {\n            for (const valueName of Object.keys(values)) {\n                const value = values[valueName];\n                if (value && Utils.isString(value)) {\n                    _values[valueName] = this.formatMessage(value);\n                }\n                else {\n                    _values[valueName] = value;\n                }\n            }\n        }\n        if (Utils.startsWith(key, this.messagePrefix)) {\n            if (Utils.eq(key, this.messagePrefix)) {\n                return key;\n            }\n            let message = this.getMessage(key);\n            if (!Utils.isString(message)) {\n                message = key;\n            }\n            const formattedMessage = this.processFormatMessage(message, _values);\n            return formattedMessage;\n        }\n        else if (Utils.startsWith(key, this.textPrefix)) {\n            if (Utils.eq(key, this.textPrefix)) {\n                return key;\n            }\n            key = key.substr(this.textPrefix.length);\n            const formattedMessage = this.processFormatMessage(key, _values);\n            return formattedMessage;\n        }\n        else {\n            return key;\n        }\n    }\n\n    /**\n     * Format an ICU Message string\n     *\n     * @param text An ICU Message to format\n     * @param values Values referenced by an ICU message\n     */\n    formatText(text: string, values?: {}): string {\n        const formattedMessage = this.processFormatMessage(text, values);\n        return formattedMessage;\n    }\n\n    /**\n     * Parse a date string in the current locale - eg `04/09/1986`\n     *\n     * @param value A date string\n     * @returns The parse `Date` or `undefined` if the date cannot be parsed\n     */\n    parseDate(value: string): Date | undefined {\n        const m = moment(value, \"L\");\n        if (m.isValid()) {\n            return m.toDate();\n        }\n        return undefined;\n    }\n\n    private getNamedFormat(type: string, name: string): Intl.DateTimeFormatOptions | Intl.NumberFormatOptions | undefined {\n        const format = this.formats && this.formats[type] && this.formats[type][name];\n        if (format) {\n            return format;\n        }\n        console.warn(`IntlService.getNamedFormat - not found - type: ${type}, name: ${name}`);\n        return undefined;\n    }\n\n    private filterProps(props: {[k: string]: any}, whitelist: string[], defaults: {[k: string]: any} = {}): any {\n        return whitelist.reduce<{[k: string]: string}>((filtered, name) => {\n            if (props.hasOwnProperty(name)) {\n                filtered[name] = props[name];\n            }\n            else if (defaults.hasOwnProperty(name)) {\n                filtered[name] = defaults[name];\n            }\n            return filtered;\n        }, {});\n    }\n\n    /**\n     * Format a date in the current locale according to the passed options. If the passed `value` is not a `Date`\n     * then one is constructed from it.\n     *\n     * @param value The date to format\n     * @param options The options can include a custom format\n     */\n    formatDate(value: string | number | Date, options: Intl.DateTimeFormatOptions & { format?: string } = {}): string {\n        const {format} = options;\n        const date = value instanceof Date ? value : new Date(value);\n        const defaults = (format && this.getNamedFormat(\"date\", format)) || {};\n        const filteredOptions = this.filterProps(options, DATE_TIME_FORMAT_OPTIONS, defaults);\n        try {\n            return formatters.getDateTimeFormat(this.intlLocale, filteredOptions).format(date);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatDate:\", e);\n        }\n        return String(date);\n    }\n\n    /**\n     * Format a time in the current locale according to the passed options. If the passed `value` is not a `Date` then one is\n     * constructed from it.\n     *\n     * @param value The date to format\n     * @param options The options can include a custom format\n     */\n    formatTime(value: string | number | Date, options: Intl.DateTimeFormatOptions & { format?: string } = {}): string {\n        const {format} = options;\n        const date = value instanceof Date ? value : new Date(value);\n        const defaults = (format && this.getNamedFormat(\"time\", format)) || {};\n        let filteredOptions = this.filterProps(options, DATE_TIME_FORMAT_OPTIONS, defaults);\n        if (!filteredOptions.hour && !filteredOptions.minute && !filteredOptions.second) {\n            // Add default formatting options if hour, minute, or second isn't defined.\n            filteredOptions = Object.assign({},\n                filteredOptions,\n                {\n                    hour: 'numeric',\n                    minute: 'numeric'\n                });\n        }\n        try {\n            return formatters.getDateTimeFormat(this.intlLocale, filteredOptions).format(date);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatTime:\", e);\n        }\n        return String(date);\n    }\n\n    private makeRelativeTimeParams(value: Date): { value: number, unit: Intl.RelativeTimeUnit } {\n        const diff = value.getTime() - Utils.now.getTime();\n        const absDiff = Math.abs(diff);\n        if (absDiff < Utils.oneSecond) {\n            return { value: 0, unit: \"seconds\" };\n        }\n        else if (absDiff < Utils.oneMinute) {\n            return { value: Utils.roundAway(diff / Utils.oneSecond), unit: \"seconds\" };\n        }\n        else if (absDiff < Utils.oneHour) {\n            return { value: Utils.roundAway(diff / Utils.oneMinute), unit: \"minutes\" };\n        }\n        else if (absDiff < Utils.oneDay) {\n            return { value: Utils.roundAway(diff / Utils.oneHour), unit: \"hours\" };\n        }\n        else if (absDiff < (Utils.oneDay * 30)) {\n            return { value: Utils.roundAway(diff / Utils.oneDay), unit: \"days\" };\n        }\n        else if (absDiff < (Utils.oneDay * 365)) {\n            return { value: Utils.roundAway(diff / (Utils.oneDay * 30)), unit: \"months\" };\n        }\n        else {\n            return { value: Utils.roundAway(diff / (Utils.oneDay * 365)), unit: \"years\" };\n        }\n    }\n\n    /**\n     * Format a relative time in the current locale according to the passed options\n     *\n     * @param value The relative time to format. Negative number values represent times in the past.\n     * If a Date value is passed then a number value and unit are deduced automatically based on\n     * the current date and time.\n     * @param unit The relative time unit (eg years, days or seconds). Must be passed if value\n     * is a number.\n     * @param options The options can include a custom format\n     */\n    formatRelativeTime(\n        value: string | number | Date | undefined, unit?: Intl.RelativeTimeUnit,\n        options: Intl.RelativeTimeFormatOptions & { format?: string } = {}\n    ): string {\n        if (value === undefined) {\n            return \"\";\n        }\n        if (Utils.isString(value)) {\n            value = new Date(value);\n        }\n        if (Utils.isDate(value)) {\n            const params =  this.makeRelativeTimeParams(value);\n            value = params.value;\n            unit = params.unit;\n        }\n        const { format } = options;\n        const defaults = (format && this.getNamedFormat(\"relativeTime\", format)) || {};\n        const filteredOptions = this.filterProps(options, RELATIVE_TIME_FORMAT_OPTIONS, defaults);\n        if (!filteredOptions.numeric) {\n            filteredOptions.numeric = \"auto\"; // default is always - we prefer auto\n        }\n        try {\n            return formatters.getRelativeTimeFormat(this.intlLocale, filteredOptions).format(value, unit);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatRelativeTime:\", e);\n        }\n        return String(value);\n    }\n\n    /**\n     * Format a number in the current locale\n     *\n     * @param value The number to format\n     * @param options The options can include a custom format\n     */\n    formatNumber(value: any, options: Intl.NumberFormatOptions & { format?: any } = {}): string {\n        const {format} = options;\n        const defaults = format && this.getNamedFormat(\"number\", format);\n        const filteredOptions = this.filterProps(options, NUMBER_FORMAT_OPTIONS, defaults);\n        try {\n          return formatters.getNumberFormat(this.intlLocale, filteredOptions).format(value);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatNumber:\", e);\n        }\n        return String(value);\n    }\n}\n","import {Pipe, PipeTransform, OnDestroy, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {IntlService} from \"./intl.service\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * An abstract base class for pipes that should refresh automatically\n * when the current locale on {@link IntlService} changes. Pipes should\n * be declared as `pure: false` - the current value is cached to avoid\n * unnecessary processing\n */\n@Pipe({name: \"sqAbstractIntlPipe\", pure: false})\nexport abstract class AbstractIntlPipe implements PipeTransform, OnDestroy {\n    protected value: any = \"\";\n    protected lastValue: any;\n    protected lastParams: any;\n    protected localeChange: Subscription;\n\n    constructor(\n        protected intlService: IntlService,\n        protected changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    protected updateValue(value: any, params?: any): void {\n        this.lastValue = value;\n        this.lastParams = params;\n        this.changeDetectorRef.markForCheck();\n    }\n\n    transform(value: any, params?: any): any {\n        // if we ask another time for the same key, return the last value\n        if (Utils.equals(value, this.lastValue) && Utils.equals(params, this.lastParams)) {\n            return this.value;\n        }\n\n        // set the value\n        this.updateValue(value, params);\n\n        // subscribe to localeChange event\n        if (!this.localeChange) {\n            this.localeChange = this.intlService.events.subscribe(\n                (event) => {\n                    if (!Utils.isEmpty(this.lastValue)) {\n                        this.lastValue = null;\n                        this.updateValue(value, params);\n                    }\n                });\n        }\n\n        return this.value;\n    }\n\n    ngOnDestroy(): void {\n        if (this.localeChange) {\n            this.localeChange.unsubscribe();\n        }\n    }\n}\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe} from \"./abstract-intl.pipe\";\nimport {IntlService} from \"./intl.service\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\n\n/**\n * Describes the parameters that can be passed to the [sqMessage]{@link MessagePipe} pipe\n */\nexport interface MessageParams {\n    /**\n     * Values that can be referenced from ICU messages\n     */\n    values?: MapOf<any>;\n}\n\n/**\n * A pipe to display messages in the current locale. Inputs are processed by\n * [IntlService.formatMessage]{@link IntlService#formatMessage}\n */\n@Pipe({name: \"sqMessage\", pure: false})\nexport class MessagePipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    protected updateValue(value: any, params: MessageParams): void {\n        if (!Utils.isEmpty(value)) {\n            // coerce to string (eg sys date strings get converted to dates so if this happens to a title we will break otherwise)\n            value = value + \"\";\n        }\n        super.updateValue(value, params);\n        if (!value) {\n            this.value = value;\n            return;\n        }\n        let values: MapOf<any> | undefined;\n        if (params) {\n            values = params.values ? params.values : params;\n        }\n        this.value = this.intlService.formatMessage(value, values);\n    }\n}\n","const INTL_MODULE_PROVIDERS = [];\n\nexport {INTL_MODULE_PROVIDERS};\n","import {NgModule, APP_INITIALIZER, ModuleWithProviders, Type} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {BaseModule} from \"@sinequa/core/base\";\n\nimport {IntlService, LOCALES_CONFIG, LocalesConfig} from \"./intl.service\";\nimport {MessagePipe} from \"./message.pipe\";\nimport {INTL_MODULE_PROVIDERS} from \"./module.providers\";\n\n/**\n * An APP_INITIALIZER factory function for initialising the {@link IntlService} before any UI is displayed\n */\nexport function IntlInitializer(intlService: IntlService): () => Promise<string> {\n    const init = () => intlService.init().toPromise();\n    return init;\n}\n\n/**\n * This module contains core internationalization functionality for the formatting of numbers, dates and strings.\n * It is based on the industry standard\n * [Intl]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl} API\n * and an implementation of the ICU Message syntax provided by [FormatJS]{@link https://formatjs.io/}.\n *\n * The module provides mechanisms for the definition and loading of locales which can be extended with library specific\n * locale information. By default, locales contain support for `Moment.js` and `D3.js`.\n *\n * The module can be initialized by importing it using the `forRoot` static method or otherwise providing the\n * {@link LOCALES_CONFIG} injection token\n */\n@NgModule({\n    imports: [\n        CommonModule,\n        BaseModule\n    ],\n    declarations: [\n        MessagePipe\n    ],\n    exports: [\n        MessagePipe\n    ],\n    providers: [\n        {provide: APP_INITIALIZER, useFactory: IntlInitializer, deps: [IntlService], multi: true},\n        ...INTL_MODULE_PROVIDERS\n    ]\n})\nexport class IntlModule {\n    static forRoot(localeConfig: Type<LocalesConfig>): ModuleWithProviders<IntlModule> {\n        return {\n            ngModule: IntlModule,\n            providers: [\n                {provide: LOCALES_CONFIG, useClass: localeConfig},\n            ]\n        };\n    }\n}\n","export default {\n    \"system\": {\n        \"date\": \"{time, selectordinal, =0 {{date, date}} other {{date, date}, {date, time, medium}}}\",\n        \"number\": \"{value, number}\",\n        \"boolean\": \"{value, select, true {wahr} other {falsch}}\",\n        \"percent\": \"{value, number, percent}\",\n        \"fieldSeparator\": \": \",\n        \"memorySize\": {\n            \"bytes\": \"{value, number, sqZeroDecimalPlaces} B\",\n            \"kb\": \"{value, number, sqZeroDecimalPlaces} KB\",\n            \"mb\": \"{value, number, sqOneDecimalPlace} MB\",\n            \"gb\": \"{value, number, sqTwoDecimalPlaces} GB\",\n            \"tb\": \"{value, number, sqThreeDecimalPlaces} TB\",\n            \"pb\": \"{value, number, sqFourDecimalPlaces} PB\"\n        }\n    },\n\n    \"error\": {\n        \"serverError\": \"Serverfehler\",\n        \"loginCancelled\": \"Anmeldung abgebrochen (login cancelled)\",\n        \"processedCredentialsError\": \"Verarbeitete Anmeldeinformationen konnten nicht ermittelt werden (unable to get processed credentials)\",\n        \"autoLoginError\": \"Anmeldung fehlgeschlagen (login failed)\",\n        \"principalSwitched\": \"Der angemeldete Benutzer hat sich geändert (the logged in user has changed)\",\n        \"userOverrideFailure\": \"Benutzerwechsel fehlgeschlagen (unable to override user)\",\n        \"responseLoadFailure\": \"Antwort konnte nicht geladen werden (failed to load response)\",\n        \"unknownError\": \"Unbekannter Fehler\"\n    },\n\n    \"language\": {\n        \"ar\": \"Arabisch\",\n        \"da\": \"Dänisch\",\n        \"de\": \"Deutsch\",\n        \"el\": \"Griechisch\",\n        \"en\": \"Englisch\",\n        \"es\": \"Spanisch\",\n        \"fi\": \"Finnisch\",\n        \"fr\": \"Französisch\",\n        \"it\": \"Italienisch\",\n        \"ja\": \"Japanisch\",\n        \"ko\": \"Koreanisch\",\n        \"nl\": \"Niederländisch\",\n        \"no\": \"Norwegisch\",\n        \"pl\": \"Polnisch\",\n        \"pt\": \"Portugiesisch\",\n        \"ro\": \"Rumänisch\",\n        \"ru\": \"Russisch\",\n        \"sv\": \"Schwedisch\",\n        \"th\": \"Thailändisch\",\n        \"zh\": \"Traditionelles Chinesisch\",\n        \"zs\": \"Vereinfachtes Chinesisch\",\n        \"zz\": \"Unbekannt\"\n    },\n};\n","export default {\n    \"system\": {\n        \"date\": \"{time, selectordinal, =0 {{date, date}} other {{date, date}, {date, time, medium}}}\",\n        \"number\": \"{value, number}\",\n        \"boolean\": \"{value, select, true {true} other {false}}\",\n        \"percent\": \"{value, number, percent}\",\n        \"fieldSeparator\": \": \",\n        \"memorySize\": {\n            \"bytes\": \"{value, number, sqZeroDecimalPlaces} B\",\n            \"kb\": \"{value, number, sqZeroDecimalPlaces} KB\",\n            \"mb\": \"{value, number, sqOneDecimalPlace} MB\",\n            \"gb\": \"{value, number, sqTwoDecimalPlaces} GB\",\n            \"tb\": \"{value, number, sqThreeDecimalPlaces} TB\",\n            \"pb\": \"{value, number, sqFourDecimalPlaces} PB\"\n        }\n    },\n\n    \"error\": {\n        \"serverError\": \"Server error\",\n        \"loginCancelled\": \"login cancelled\",\n        \"processedCredentialsError\": \"unable to get processed credentials\",\n        \"autoLoginError\": \"login failed\",\n        \"principalSwitched\": \"the logged in user has changed\",\n        \"userOverrideFailure\": \"unable to override user\",\n        \"responseLoadFailure\": \"failed to load response\",\n        \"unknownError\": \"unknown error\"\n    },\n\n    \"language\": {\n        \"ar\": \"Arabic\",\n        \"da\": \"Danish\",\n        \"de\": \"German\",\n        \"el\": \"Greek\",\n        \"en\": \"English\",\n        \"es\": \"Spanish\",\n        \"fi\": \"Finnish\",\n        \"fr\": \"French\",\n        \"it\": \"Italian\",\n        \"ja\": \"Japanese\",\n        \"ko\": \"Korean\",\n        \"nl\": \"Dutch\",\n        \"no\": \"Norwegian\",\n        \"pl\": \"Polish\",\n        \"pt\": \"Portuguese\",\n        \"ro\": \"Romanian\",\n        \"ru\": \"Russian\",\n        \"sv\": \"Swedish\",\n        \"th\": \"Thai\",\n        \"zh\": \"Traditional Chinese\",\n        \"zs\": \"Simplified Chinese\",\n        \"zz\": \"Unknown\"\n    }\n};\n","export default {\n    \"system\": {\n        \"date\": \"{time, selectordinal, =0 {{date, date}} other {{date, date} à {date, time, medium}}}\",\n        \"number\": \"{value, number}\",\n        \"boolean\": \"{value, select, true {vrai} other {faux}}\",\n        \"percent\": \"{value, number, percent}\",\n        \"fieldSeparator\": \" : \",\n        \"memorySize\": {\n            \"bytes\": \"{value, number, sqZeroDecimalPlaces} o\",\n            \"kb\": \"{value, number, sqZeroDecimalPlaces} Ko\",\n            \"mb\": \"{value, number, sqOneDecimalPlace} Mo\",\n            \"gb\": \"{value, number, sqTwoDecimalPlaces} Go\",\n            \"tb\": \"{value, number, sqThreeDecimalPlaces} To\",\n            \"pb\": \"{value, number, sqFourDecimalPlaces} Po\"\n        }\n    },\n\n    \"error\": {\n        \"serverError\": \"Erreur de serveur\",\n        \"loginCancelled\": \"Connexion annulée\",\n        \"processedCredentialsError\": \"Impossible d'obtenir les informations d'identification\",\n        \"autoLoginError\": \"Echec de la connexion\",\n        \"principalSwitched\": \"L'utilisateur connecté a été modifié\",\n        \"userOverrideFailure\": \"Echec de surchargement de l'utilisateur\",\n        \"responseLoadFailure\": \"Echec de chargement de la réponse\",\n        \"unknownError\": \"Erreur inconnue\"\n    },\n\n    \"language\": {\n        \"ar\": \"Arabe\",\n        \"da\": \"Danois\",\n        \"de\": \"Allemand\",\n        \"el\": \"Grec\",\n        \"en\": \"Anglais\",\n        \"es\": \"Espagnol\",\n        \"fi\": \"Finlandais\",\n        \"fr\": \"Français\",\n        \"it\": \"Italien\",\n        \"ja\": \"Japonais\",\n        \"ko\": \"Coréen\",\n        \"nl\": \"Néerlandais\",\n        \"no\": \"Norvégien\",\n        \"pl\": \"Polonais\",\n        \"pt\": \"Portugais\",\n        \"ro\": \"Roumain\",\n        \"ru\": \"Russe\",\n        \"sv\": \"Suédois\",\n        \"th\": \"Thaïlandais\",\n        \"zh\": \"Chinois traditionnel\",\n        \"zs\": \"Chinois simplifié\",\n        \"zz\": \"Inconnu\"\n    },\n};\n"]}