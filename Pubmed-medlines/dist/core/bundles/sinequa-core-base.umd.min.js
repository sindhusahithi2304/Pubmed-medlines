!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("moment"),require("diacritics"),require("jssha"),require("lodash/kebabCase"),require("lodash/snakeCase"),require("lodash/camelCase"),require("lodash/escape"),require("lodash/unescape"),require("lodash/isEqual"),require("@angular/core"),require("fast-text-encoding"),require("intl"),require("intl/locale-data/jsonp/en-US"),require("js-polyfills/url"),require("matchmedia-polyfill"),require("focus-within")):"function"==typeof define&&define.amd?define("@sinequa/core/base",["exports","@angular/common/http","moment","diacritics","jssha","lodash/kebabCase","lodash/snakeCase","lodash/camelCase","lodash/escape","lodash/unescape","lodash/isEqual","@angular/core","fast-text-encoding","intl","intl/locale-data/jsonp/en-US","js-polyfills/url","matchmedia-polyfill","focus-within"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).sinequa=e.sinequa||{},e.sinequa.core=e.sinequa.core||{},e.sinequa.core.base={}),e.ng.common.http,e.moment,e.diacritics,e.jsSHA,e.kebabCase,e.snakeCase,e.camelCase,e.escape,e.unescape,e.isEqual,e.ng.core,null,null,null,null,null,e.focusWithin)}(this,(function(e,t,r,n,o,i,a,u,s,c,l,f,p,d,h,y,m,v){"use strict";function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=g(r),x=g(o),w=g(i),E=g(a),P=g(u),S=g(s),O=g(c),T=g(l),j=g(v),D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};Object.create;function C(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}Object.create;var L,M=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),N=function(){function e(e,t){this.callback=e,this.params=t}return e.prototype.call=function(){return this.callback.apply(this,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}(this.params))},e}(),A=function(){function e(e){this.name=e,this.start=performance.now(),this.duration=0}return e.prototype.stop=function(){this.duration=performance.now()-this.start,console.log("Timer: "+this.name+" finished in "+Math.round(this.duration)+" ms")},e}(),q=function(){function e(){}return e.baseExtend=function(t,r,n,o){for(var i=0,a=r.length;i<a;++i){var u=r[i];if(e.isObject(u)||e.isFunction(u)){var s=Object.keys(u);o&&(s=e.isFunction(o)?s.sort(o):s.sort());for(var c=0,l=s.length;c<l;c++){var f=s[c],p=u[f];n&&e.isObject(p)?e.isDate(p)?t[f]=new Date(p.valueOf()):e.isRegExp(p)?t[f]=new RegExp(p):p.nodeName?t[f]=p.cloneNode(!0):(e.isObject(t[f])||(t[f]=e.isArray(p)?[]:{}),e.baseExtend(t[f],[p],!0)):t[f]=p}}}return t},e.extend=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.baseExtend(t,r,!1)},e.merge=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.baseExtend(t,r,!0)},e.mergeAndSort=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.baseExtend(t,r,!0,!0)},e.forEach=function(t,r,n){var o,i;if(t)if(e.isFunction(t))for(o in t)"prototype"===o||"length"===o||"name"===o||t.hasOwnProperty&&!t.hasOwnProperty(o)||r.call(n,t[o],o,t);else if(e.isArray(t)||e.isArrayLike(t)){var a="object"!=typeof t;for(o=0,i=t.length;o<i;o++)(a||o in t)&&r.call(n,t[o],o,t)}else if(t.forEach&&t.forEach!==e.forEach)t.forEach(r,n,t);else if(e.isBlankObject(t))for(o in t)r.call(n,t[o],o,t);else if("function"==typeof t.hasOwnProperty)for(o in t)t.hasOwnProperty(o)&&r.call(n,t[o],o,t);else for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.call(n,t[o],o,t);return t},e.copy=function(t,r){var n=[],o=[];if(r){if(e.isTypedArray(r))throw new Error("Can't copy! TypedArray destination cannot be mutated.");if(t===r)throw new Error("Can't copy! Source and destination are identical.");return e.isArray(r)?r.length=0:e.forEach(r,(function(e,n){t.hasOwnProperty(n)||delete r[n]})),n.push(t),o.push(r),i(t,r)}return a(t);function i(t,r){var n;if(e.isArray(t))for(var o=0,i=t.length;o<i;o++)r.push(a(t[o]));else if(e.isBlankObject(t))for(n in t)r[n]=a(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(r[n]=a(t[n]));else for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=a(t[n]));return r}function a(t){if(!e.isObject(t))return t;var r=n.indexOf(t);if(-1!==r)return o[r];if(e.isWindow(t))throw new Error("Can't copy! Making copies of Window instances is not supported.");var a,u=!1;if(e.isArray(t))a=[],u=!0;else if(e.isTypedArray(t))a=new t.constructor(t);else if(e.isDate(t))a=new Date(t.getTime());else if(e.isRegExp(t)){var s=t.toString().match(/[^\/]*$/);(a=new RegExp(t.source,s?s[0]:"")).lastIndex=t.lastIndex}else e.isFunction(t.cloneNode)?a=t.cloneNode(!0):(a=Object.create(Object.getPrototypeOf(t)),u=!0);return n.push(t),o.push(a),u?i(t,a):a}},e.copyWithoutNullOrEmpty=function(t,r){for(var n=Object.keys(r),o=0,i=n.length;o<i;o++){var a=n[o],u=r[a];null===u||e.isEmpty(null)||(e.isObject(u)?e.isDate(u)?t[a]=new Date(u.valueOf()):e.isRegExp(u)?t[a]=new RegExp(u):(e.isObject(t[a])||(t[a]=e.isArray(u)?[]:{}),t[a]=e.copyWithoutNullOrEmpty(t[a],u)):t[a]=u)}return t},e.copyDefaults=function(t){var r=e.copy(t);return r&&Object.keys(r).forEach((function(e){var t=r[e];""===t&&delete r[e],'""'===t&&(r[e]="")})),r},e.equals=function(e,t){return T.default(e,t)},e.toInt=function(e,t){void 0===t&&(t=0);var r=parseInt(e,10);return(isNaN(r)||r+""!==e)&&(r=t),r},e.toNumber=function(e,t){void 0===t&&(t=0);var r=parseFloat(e);return isNaN(r)&&(r=t),r},e.toDate=function(e){var t=Date.parse(e);if(t||0===t)return new Date(t+6e4*new Date(t).getTimezoneOffset())},e.getTime=function(e){return e?1e3*(60*e.getHours()*60+60*e.getMinutes()+e.getSeconds())+e.getMilliseconds():0},Object.defineProperty(e,"now",{get:function(){return new Date},enumerable:!1,configurable:!0}),e.toSysDateStr=function(t){if(!t)return"";var r=b.default(t);return 0===e.getTime(t)?r.format("YYYY-MM-DD"):r.format("YYYY-MM-DD HH:mm:ss")},e.fromSysDateStr=function(e){var t=b.default(e,"YYYY-MM-DD HH:mm:ss");if(t.isValid())return t.toDate()},e.isSysDateTime=function(t){return e.rxSysDateTime.test(t)},e.isISO8601DateTime=function(t){return e.rxISO8601DateTime.test(t)},e.toJson=function(t,r){return void 0===r&&(r={pretty:!1}),JSON.stringify(t,(function(t,r){return t&&e.isDate(this[t])?e.toSysDateStr(this[t]):r}),r.pretty?2:0)},e.fromJson=function(t,r){if(void 0===r&&(r={reviveDates:!1}),!t||"string"!=typeof t)return{};try{return JSON.parse(t,r.reviveDates?function(t,n){if(r.reviveDates&&"string"==typeof n)if(e.isSysDateTime(n)){if((o=b.default(n,"YYYY-MM-DD HH:mm:ss")).isValid())return o.toDate()}else if(e.isISO8601DateTime(n)){var o;if((o=b.default(n,b.default.ISO_8601)).isValid())return o.toDate()}return n}:void 0)}catch(e){return console.log("Utils.fromJson exception:",e),null}},e.toSqlValue=function(t,r){if(e.isNumber(t))return t+"";if(e.isDate(t))return r?"'"+e.toSysDateStr(t)+"'":e.toSysDateStr(t);if(e.isBoolean(t))return t?"true":"false";if(e.isArray(t)){var n=[];return t.forEach((function(t){n.length>0&&n.push(","),t?e.isString(t)?n.push(t):n.push(t.display||t.value||""):n.push("null")})),n.splice(0,0,"["),n.push("]"),n.join("")}return r?"'"+t+"'":t},e.treeClean=function(t){return e.isEmpty(t)?t:e.addUrl("/",e.replace(e.replace(e.replace(t,"\t"," "),";",","),"\\","/"),"/")},e.treeFirst=function(t){var r=e.split(t,"/");return 0===r.length?"":"/"+r[0]+"/"},e.treeFirstNode=function(t){return e.split(t,"/")[0]},e.treeLast=function(t){var r=e.split(t,"/");return 0===r.length?"":"/"+r[r.length-1]+"/"},e.treeLastNode=function(t){var r=e.split(t,"/");return r[r.length-1]},e.treeNodes=function(t){return e.split(t,"/")},e.treeDisplay=function(e){return e&&("/"===e[0]&&(e=e.substr(1)),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1))),e},e.treeCount=function(t){var r=e.count(t,"/");return r>0?r-1:0},e.traverse=function(e,t){if(!e||0===e.length)return!1;if(!t)return!1;for(var r=[],n=[],o=e.length;o--;)n.push(e[o]);for(;n.length;){var i=n.pop();if(i){if(r.push(i),t(r))return!0;if(n.push(void 0),i.items&&i.items.length>0)for(o=i.items.length;o--;)n.push(i.items[o])}else r.pop(),t(void 0)}return!1},e.guid=function(e){void 0===e&&(e=!0);var t=Date.now();return(e?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx":"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx").replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:3&r|8).toString(16)}))},e.isUndefined=function(e){return void 0===e},e.isObject=function(e){return null!==e&&"object"==typeof e},e.isString=function(e){return"string"==typeof e},e.isNumber=function(e){return"number"==typeof e},e.isBoolean=function(e){return"boolean"==typeof e},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.isScalar=function(t){return e.isNumber(t)||e.isBoolean(t)||e.isDate(t)},e.isArray=function(e){return Array.isArray(e)},e.isIterable=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},e.isMap=function(e){return"[object Map]"===Object.prototype.toString.call(e)},e.isFunction=function(e){return"function"==typeof e},e.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},e.isWindow=function(e){return e&&e.window===e},e.isFile=function(t){return e.isObject(t)&&"[object File]"===Object.prototype.toString.call(t)},e.isFormData=function(t){return e.isObject(t)&&"[object FormData]"===Object.prototype.toString.call(t)},e.isBlob=function(t){return e.isObject(t)&&"[object Blob]"===Object.prototype.toString.call(t)},e.isArrayBuffer=function(t){return e.isObject(t)&&"[object ArrayBuffer]"===Object.prototype.toString.call(t)},e.isArrayLike=function(t){if(null==t||e.isWindow(t))return!1;if(e.isArray(t)||e.isString(t))return!0;var r="length"in Object(t)&&t.length;return e.isNumber(r)&&(r>=0&&r-1 in t||"function"==typeof t.item)},e.isBlankObject=function(e){return null!==e&&"object"==typeof e&&!Object.getPrototypeOf(e)},e.isTypedArray=function(t){return t&&e.isNumber(t.length)&&e.TYPED_ARRAY_REGEXP.test(Object.prototype.toString.call(t))},e.delay=function(e){return void 0===e&&(e=0),new Promise((function(t,r){window.setTimeout((function(){t()}),e)}))},e.isTrue=function(e,t){switch("string"==typeof e&&(e=e.toLowerCase()),e){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;case"":case void 0:return!!t;default:return!1}},e.compare=function(e,t,r){return void 0===r&&(r=!0),e=e||"",t=t||"",r&&(e=e.toLocaleUpperCase(),t=t.toLocaleUpperCase()),e.localeCompare(t)},e.eq=function(t,r){return 0===e.compare(t,r,!1)},e.eqNC=function(t,r){return 0===e.compare(t,r,!0)},e.eqNCN=function(t){for(var r,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(!o)return!1;try{for(var a=C(o),u=a.next();!u.done;u=a.next()){var s=u.value;if(e.eqNC(t,s))return!0}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!1},e.len=function(e){return(e||"").length},e.startsWith=function(e,t,r){return void 0===r&&(r=!0),e=e||"",t=t||"",r&&(e=e.toLocaleUpperCase(),t=t.toLocaleUpperCase()),e.startsWith(t)},e.endsWith=function(e,t,r){return void 0===r&&(r=!0),e=e||"",t=t||"",r&&(e=e.toLocaleUpperCase(),t=t.toLocaleUpperCase()),e.endsWith(t)},e.includes=function(e,t,r){return void 0===r&&(r=!0),e=e||"",t=t||"",r&&(e=e.toLocaleUpperCase(),t=t.toLocaleUpperCase()),e.includes(t)},e.toUpperCase=function(e){return e?e.toLocaleUpperCase():""},e.toUpperFirst=function(e){return e?e[0].toLocaleUpperCase()+e.substr(1):""},e.toLowerCase=function(e){return e?e.toLocaleLowerCase():""},e.toLowerFirst=function(e){return e?e[0].toLocaleLowerCase()+e.substr(1):""},e.toStartCase=function(t){return t?t.split(/[\s]+/).map((function(t){return t.includes(".")?t:e.toUpperFirst(t)})).join(" "):""},e.trim=function(e){return e?e.trim():""},e.trimStart=function(e){return e?e.trimStart():""},e.trimEnd=function(e){return e?e.trimEnd():""},e.truncate=function(e,t,r){return e?(r=r||"...",e.length<=t?e:e.substring(0,t-r.length)+r):""},e.regExEscape=function(t){return t?t.replace(e.regExEscapeRegEx,"\\$&"):""},e.replace=function(t,r,n){return t&&r?e.isRegExp(r)?t.replace(r,n):t.replace(new RegExp(e.regExEscape(r),"g"),n):""},e.split=function(t,r,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=!0),!t)return[];if(!r)return[t];var i;if("string"==typeof r)i=t.split(r),n&&(i=i.map((function(e){return e.trim()})));else{var a=r.map((function(t){return e.regExEscape(t)})).join("|");n&&(a="(?:^\\s*)|(?:\\s*(?:"+a+")\\s*)|(?:\\s*$)"),i=t.split(new RegExp(a))}return o&&(i=i.filter((function(t){return!e.isEmpty(t)}))),i},e.toKebabCase=function(e){return w.default(e)},e.toSnakeCase=function(e){return E.default(e)},e.toCamelCase=function(e){return P.default(e)},e.removeAccents=function(e){return e?n.remove(e):""},e.normalize=function(t){return t?e.removeAccents(t).toUpperCase():""},e.isValidSimpleName=function(e){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)},e.isValidScopedSimpleName=function(e){return/^[a-zA-Z_]([\.]?[a-zA-Z0-9_]+)*$/.test(e)},e.isEmpty=function(t){return""===t||(null===t||!!e.isUndefined(t))},e.count=function(e,t,r){if(void 0===r&&(r=!0),!e||!t)return 0;r&&(e=e.toLocaleUpperCase(),t=t.toLocaleUpperCase());for(var n=-1,o=0;-1!==(n=e.indexOf(t,n+1));)o++;return o},e.toBase64=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})))},e.fromBase64=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e.sha256=function(e){var t=new x.default("SHA-256","TEXT");return t.update(e),t.getHash("B64")},e.sha512=function(e){var t=new x.default("SHA-512","TEXT");return t.update(e),t.getHash("B64")},e.encodeHTML=function(e){return S.default(e)},e.decodeHTML=function(e){return O.default(e)},e.getField=function(t,r){if(e.isObject(t)&&!e.isEmpty(r)){var n=Object.keys(t).filter((function(t){return e.eqNC(t,r)}));if(0!==n.length)return t[n[0]]}},e.clearObject=function(t,r){for(var n in void 0===r&&(r=!1),t)t.hasOwnProperty(n)&&(r?delete t[n]:e.isArray(t[n])?t[n].length=0:e.isMap(t[n])?t[n].clear():t[n]=void 0);return t},e.deltas=function(t,r,n){var o,i;n||(n={});try{for(var a=C(Object.keys(r)),u=a.next();!u.done;u=a.next()){var s=u.value;if(s in t)if(e.isObject(r[s])&&!e.isArray(r[s])){var c=e.deltas(t[s],r[s]);e.equals(c,{})||(n[s]=c)}else e.equals(t[s],r[s])||e.isEmpty(r[s])||(n[s]=r[s]);else e.isEmpty(r[s])||(n[s]=r[s])}}catch(e){o={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n},e.pick=function(t,r){var n,o,i={};if(t)if(e.isFunction(r))Object.keys(t).forEach((function(e){r(t[e],e,t)&&(i[e]=t[e])}));else try{for(var a=C(r),u=a.next();!u.done;u=a.next()){var s=u.value;t.hasOwnProperty(s)&&(i[s]=t[s])}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},e.debounce=function(e,t,r,n){var o,i,a,u,s;void 0===t&&(t=0),void 0===r&&(r=!1);var c=function(){var n=Date.now()-u;n<t&&n>=0?o=setTimeout(c,t-n):(o=null,r||(s=e.apply(a,i),o||(a=i=null)))};return function(){a=this,i=arguments,n&&n.apply(a,i),u=Date.now();var l=r&&!o;return o||(o=setTimeout(c,t)),l&&(s=e.apply(a,i),a=i=null),s}},e.throttle=function(e,t,r){var n,o,i,a;void 0===r&&(r={});var u=0,s=function(){u=!1===r.leading?0:Date.now(),n=null,a=e.apply(o,i),n||(o=i=null)},c=function(){var c=Date.now();u||!1!==r.leading||(u=c);var l=t-(c-u);return o=this,i=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),u=c,a=e.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(s,l)),a};return c.cancel=function(){clearTimeout(n),u=0,n=o=i=null},c},e.frame=function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];0===e.frameTasks.size&&requestAnimationFrame((function(t){e.frameTasks.forEach((function(e,t,r){e.call()})),e.frameTasks.clear()}));var o=e.frameTasks.get(t);o?o.params=r:e.frameTasks.set(t,new N(t,r))}},e.makeURL=function(e,t){return t||(t="http://x.y.z"),new URL(e,t)},e.addSearchParams=function(t,r){if(!t||!r)return t;var n=e.makeURL(t);for(var o in r)r.hasOwnProperty(o)&&n.searchParams.set(o,r[o]);var i=t.indexOf("?");return-1!==i&&(t=t.substr(0,i)),t+="?"+n.searchParams.toString()},e._addUrl=function(e,t){return t?e?"/"===e[e.length-1]?"/"===t[0]?e+t.substr(1):e+t:"/"===t[0]?e+t:e+"/"+t:t:e},e.addUrl=function(t){for(var r,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=t;try{for(var u=C(o),s=u.next();!s.done;s=u.next()){var c=s.value;a=e._addUrl(a,c)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return a},e.isUrlAbsolute=function(e){return/^(?:[a-zA-Z][a-zA-Z\d+.-]*:|\/\/)/.test(e)},e.makeHttpParams=function(r){var n=new t.HttpParams({encoder:new M});if(r)for(var o in r)if(r.hasOwnProperty(o)){var i=r[o],a="";a=e.isString(i)?i:e.isBoolean(i)||e.isNumber(i)?i.toString():e.isDate(i)?e.toSysDateStr(i):e.toJson(i),n=n.set(o,a)}return n},e.escapeHtml=function(t){if(!t)return t;e.escapeDiv||(e.escapeDiv=document.createElement("div"));var r=e.escapeDiv.appendChild(document.createTextNode(t)),n=e.escapeDiv.innerHTML;return e.escapeDiv.removeChild(r),n},e.arrayMove=function(e,t,r){r!==t&&e.splice(r,0,e.splice(t,1)[0])},e.arraySet=function(e,t){return e.splice.apply(e,[0,e.length].concat(t))},e.genericNext=function(e){},e.genericError=function(e){},e.genericComplete=function(){},e.subscribe=function(t,r,n,o){return r||(r=e.genericNext),n||(n=e.genericError),o||(o=e.genericComplete),t.subscribe(r,n,o)},e.asDate=function(t){if(t)return e.isDate(t)?t:e.isString(t)?e.toDate(t):void 0},e.asNumber=function(t){if(t||0===t){if(e.isNumber(t))return t;if(e.isString(t)){if(e.testInteger(t))return e.toInt(t);if(e.testFloat(t))return e.toNumber(t)}}},e.asString=function(t){if(t||""===t)return e.isString(t)?t:t.toString()},e.testInteger=function(e){return/^(\-|\+)?([0-9]+)$/.test(e)},e.testFloat=function(e){return/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/.test(e)},e.roundAway=function(e){return e>=0?Math.round(e):Math.sign(e)*Math.round(Math.abs(e))},e.matchSuffix=function(t,r){for(var n,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];try{for(var u=C(i),s=u.next();!s.done;s=u.next()){var c=s.value;if(e.endsWith(t,c))return{str:e.trimEnd(t.substr(0,t.length-c.length)),factor:r}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}},e.toSize=function(t,r){if(void 0===r&&(r=0),!(t=e.trim(t)))return r;var n=1,o=e.matchSuffix(t,0x4000000000000,"PB","PO");if(void 0===o&&(o=e.matchSuffix(t,1099511627776,"TB","TO")),void 0===o&&(o=e.matchSuffix(t,1073741824,"GB","GO")),void 0===o&&(o=e.matchSuffix(t,1048576,"MB","MO")),void 0===o&&(o=e.matchSuffix(t,1024,"KB","KO")),void 0===o&&(o=e.matchSuffix(t,1,"B","O")),void 0!==o&&(t=o.str,n=o.factor),!e.testFloat(t))return r;var i=e.toNumber(t,r)*n;return Math.round(i)},e.calculateDuration=function(t,r){switch(e.toLowerCase(r)){case"d":case"j":case"days":case"jours":case"day":case"jour":return t*e.oneDay;case"h":case"hours":case"heures":case"hour":case"heure":return t*e.oneHour;case"m":case"minutes":case"minute":case"mins":case"min":return t*e.oneMinute;case"s":case"seconds":case"secondes":case"second":case"seconde":case"secs":case"sec":return t*e.oneSecond;case"ms":case"milliseconds":case"miliseconds":case"millisecondes":case"milisecondes":case"millisecond":case"milliseconde":case"milisecond":case"miliseconde":return t;default:return 0}},e.toDuration=function(t,r){var n,o;void 0===r&&(r="ms");var i=0;if(t){var a=0,u=t.match(/[0-9\.,]+|[a-zA-Z]+/g)||[];try{for(var s=C(u),c=s.next();!c.done;c=s.next()){var l=c.value;/[a-zA-Z]/.test(l)?(i+=e.calculateDuration(a,l),a=0):(a&&(i+=e.calculateDuration(a,r)),a=e.toNumber(l))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}a&&(i+=e.calculateDuration(a,r))}return i},e}();q.oneDay=864e5,q.oneHour=36e5,q.oneMinute=6e4,q.oneSecond=1e3,q.rxSysDateTime=/^\d{4}-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])(?: (?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d)?$/,q.rxISO8601DateTime=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/,q.TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,q.regExEscapeRegEx=/[-\/\\^$*+?.()|[\]{}]/g,q.frameTasks=new Map,(L=e.SqErrorCode||(e.SqErrorCode={}))[L.loginCancelled=0]="loginCancelled",L[L.processedCredentialsError=1]="processedCredentialsError",L[L.principalSwitched=2]="principalSwitched",L[L.autoLoginError=3]="autoLoginError";var U,k,I=function(t){function r(e,n,o){var i=t.call(this,n||r.message(e))||this;return i.code=e,i.name="SqError",i.message=n||r.message(e),o&&(i.data=o),i}return function(e,t){function r(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(r,t),r.is=function(e,t){return(e instanceof r||e instanceof Error&&"SqError"===e.name)&&(q.isUndefined(t)||e.code===t)},r.message=function(t){switch(t){case e.SqErrorCode.loginCancelled:return"msg#error.loginCancelled";case e.SqErrorCode.processedCredentialsError:return"msg#error.processedCredentialsError";case e.SqErrorCode.principalSwitched:return"msg#error.principalSwitched";case e.SqErrorCode.autoLoginError:return"msg#error.autoLoginError";default:return"msg#error.unknownError"}},r}(Error),R=function(){function e(e,t){var r=this;this.base=e,this.adaptor=t,this.return=e.return?function(e){return r.translate(r.base.return(e))}:void 0,this.throw=e.throw?function(e){return r.translate(r.base.throw(e))}:void 0}return e.forIterable=function(t,r){return new e(t[Symbol.iterator](),r)},e.prototype.translate=function(e){return e.done?{done:e.done,value:e.done&&void 0===e.value?void 0:this.adaptor(e.value)}:{value:this.adaptor(e.value)}},e.prototype.next=function(e){return this.translate(this.base.next(e))},e.prototype[Symbol.iterator]=function(){return this},e}(),F=function(){function e(e,t,r){this.base=e,this.nameSelector=t,this.valueSelector=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.base.length},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this.toNameValuePair(this.base[e])},e.prototype.getName=function(e){return this.nameSelector(this.base[e])},e.prototype.getValue=function(e){return this.valueSelector(this.base[e])},e.prototype.toNameValuePair=function(e){return{name:this.nameSelector(e),value:this.valueSelector(e)}},e.prototype[Symbol.iterator]=function(){return this.items()},e.prototype.items=function(){var e=this;return R.forIterable(this.base,(function(t){return e.toNameValuePair(t)}))},e.prototype.names=function(){return R.forIterable(this.base,this.nameSelector)},e.prototype.values=function(){return R.forIterable(this.base,this.valueSelector)},e.prototype.forEach=function(e,t){for(var r=0;r<this.length;r++){var n=this.get(r);t?e.call(t,n,r,this):e(n,r,this)}return this},e}(),V=function(){function e(){}return e.fromArray=function(e){return new F(e||[],(function(e){return e.name}),(function(e){return e.value}))},e.fromObjects=function(e,t,r){return new F(e||[],(function(e){return e[t]}),(function(e){return e[r]}))},e.from=function(e,t,r){return new F(e||[],t,r)},e}();(U=e.Keys||(e.Keys={}))[U.up=38]="up",U[U.down=40]="down",U[U.left=37]="left",U[U.right=39]="right",U[U.del=46]="del",U[U.tab=9]="tab",U[U.enter=13]="enter",U[U.esc=27]="esc",U[U.comma=188]="comma",U[U.space=32]="space",U[U.pageUp=33]="pageUp",U[U.pageDown=34]="pageDown",U[U.home=36]="home",U[U.end=35]="end",U[U.backspace=8]="backspace",(k=e.PatternType||(e.PatternType={}))[k.Empty=0]="Empty",k[k.RegExp=1]="RegExp",k[k.Value=3]="Value";var H=function(){function t(e){e?this.load(e):this.clear()}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),t.getPatternType=function(t){return t?"~"===t[0]||t.includes("*")||t.includes("?")?e.PatternType.RegExp:e.PatternType.Value:e.PatternType.Empty},t.isPattern=function(e){return!!e&&!("~"!==e[0]&&!e.includes("*")&&!e.includes("?"))},t.doMatch=function(e,r){var n=new t;return n.load(e),n.isMatch(r)},t.wildcardToRegex=function(e){return e?"^"+q.regExEscape(e).replace("\\*",".*").replace("\\?",".")+"$":e},t.cleanPattern=function(e){var t,r;if(!e)return e;var n=[],o=!1;try{for(var i=C(e),a=i.next();!a.done;a=i.next()){var u=a.value;"*"===u?o||(o=!0,n.push(u)):(o=!1,n.push(u))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n.join("")},t.prototype.clear=function(){this.reg=void 0,this._text=void 0,this.preparedPattern1=void 0,this._type=e.PatternType.Empty},t.prototype.isEmpty=function(){return this._type===e.PatternType.Empty},t.prototype.load=function(r){this.clear();try{var n=r;return this._text=r,this._type=t.getPatternType(n),this._type===e.PatternType.Empty||(this._type===e.PatternType.Value?(this.preparedPattern1=n,!0):this._type===e.PatternType.RegExp&&(n="~"===n[0]?n.substring(1):t.wildcardToRegex(t.cleanPattern(n)),this.preparedPattern1=n,this.reg=new RegExp(n,"i"),!0))}catch(e){return console.log("Pattern.Load '"+r+"' error:",e),this.clear(),!1}},t.prototype.getTypeValueText=function(){if(this.type===e.PatternType.Value)return this.preparedPattern1},t.prototype.getTypeRegexPattern=function(){if(this.type===e.PatternType.RegExp)return this.preparedPattern1},t.prototype.isTypeValue=function(){return this.type===e.PatternType.Value},t.prototype.isMatch=function(t){var r;switch(t=t||"",this._type){default:case e.PatternType.Empty:return!0;case e.PatternType.Value:return q.eqNC(t,this.preparedPattern1||"");case e.PatternType.RegExp:return(null===(r=this.reg)||void 0===r?void 0:r.test(t))||!1}},t}(),B=function(){function t(e){this.text=e}return t.prototype.clear=function(){this._preparedPatterns=void 0,this._values=void 0,this._isEmpty=!0},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(e!==this._text){this._text=e;var t=q.split(this._text||"",";");this.innerSetList(t)}},enumerable:!1,configurable:!0}),t.prototype.getTypeCount=function(t){var r,n;if(!this._preparedPatterns)return 0;if(t===e.PatternType.Value)return this._values?Object.keys(this._values).length:0;var o=0;try{for(var i=C(this._preparedPatterns),a=i.next();!a.done;a=i.next()){a.value.type===t&&o++}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},t.prototype.innerSetList=function(e){var t,r;if(this._preparedPatterns=void 0,this._values=void 0,this._isEmpty=!0,e)try{for(var n=C(e),o=n.next();!o.done;o=n.next()){var i=o.value;if(i)(s=new H).load(i)&&(this._preparedPatterns||(this._preparedPatterns=[]),this._preparedPatterns.push(s))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}if(this._preparedPatterns){var a=this._preparedPatterns.length;a>0&&(this._isEmpty=!1);for(var u=a-1;u>=0;u--){var s;if((s=this._preparedPatterns[u]).isTypeValue()){this._values||(this._values={});var c=s.getTypeValueText()||"";this._values[c]=!0,this._preparedPatterns.splice(u,1)}}}},Object.defineProperty(t.prototype,"list",{get:function(){return q.split(this.text||"",";")},set:function(e){this.text=e?e.join(";"):void 0,this.innerSetList(e)},enumerable:!1,configurable:!0}),t.prototype.setText=function(e){this.list=e},t.prototype.isEmpty=function(){return this._isEmpty},t.prototype.hasPatterns=function(){return!this.isEmpty()},t.prototype.isMatch=function(e,t){var r,n;if(this.isEmpty())return!0;if(this._values&&this._values[e])return t&&console.log(t," : the pattern '"+e+"' matches the value '"+e+"'"),!0;if(this._preparedPatterns)try{for(var o=C(this._preparedPatterns),i=o.next();!i.done;i=o.next()){var a=i.value;if(a&&(!a.isTypeValue()&&a.isMatch(e)))return t&&console.log(t," : the pattern '"+a.text+"' matches the value '"+e+"'"),!0}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t}(),Y=function(){function e(e,t){this.includedPattern=new B,this.excludedPattern=new B,this.includedLogDisplay=e,this.excludedLogDisplay=t}return Object.defineProperty(e.prototype,"included",{get:function(){return this.includedPattern.text},set:function(e){this.includedPattern.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"excluded",{get:function(){return this.excludedPattern.text},set:function(e){this.excludedPattern.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"includedList",{set:function(e){this.includedPattern.list=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"excludedList",{set:function(e){this.excludedPattern.list=e},enumerable:!1,configurable:!0}),e.prototype.hasPatterns=function(){return this.includedPattern.hasPatterns()||this.excludedPattern.hasPatterns()},e.prototype.isExcluded=function(e){return!this.isIncluded(e)},e.prototype.isIncluded=function(e){return!e||(this.includedPattern.hasPatterns()?(!this.excludedPattern.hasPatterns()||!this.excludedPattern.isMatch(e,this.excludedLogDisplay))&&!!this.includedPattern.isMatch(e,this.includedLogDisplay):!this.excludedPattern.hasPatterns()||!this.excludedPattern.isMatch(e,this.excludedLogDisplay))},e.prototype.isExplicitlyIncluded=function(e){return this.includedPattern.hasPatterns()&&this.includedPattern.isMatch(e,this.includedLogDisplay)},e.prototype.isExplicitlyExcluded=function(e){return this.excludedPattern.hasPatterns()&&this.excludedPattern.isMatch(e,this.excludedLogDisplay)},e}();if(j.default(document),String.prototype.trimStart||(String.prototype.trimStart=function(){return this.replace(/^[\s\uFEFF\xA0]+/g,"")}),String.prototype.trimEnd||(String.prototype.trimEnd=function(){return this.replace(/[\s\uFEFF\xA0]+$/g,"")}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){function t(t,r,n,o){return!1===e||n<=t+o&&t<=r+o?Math.min(n,Math.max(r,t)):(r+n)/2}for(var r,n=this,o=function e(t,r,n,i){return{left:t,top:r,width:n,height:i,right:t+n,bottom:r+i,translate:function(o,a){return e(o+t,a+r,n,i)},relativeFromTo:function(a,u){var s=t,c=r;if((a=a.offsetParent)===(u=u.offsetParent))return o;for(;a;a=a.offsetParent)s+=a.offsetLeft+a.clientLeft,c+=a.offsetTop+a.clientTop;for(;u;u=u.offsetParent)s-=u.offsetLeft+u.clientLeft,c-=u.offsetTop+u.clientTop;return e(s,c,n,i)}}}(this.offsetLeft,this.offsetTop,this.offsetWidth,this.offsetHeight);(r=n.parentNode)instanceof HTMLElement;){var i=r.offsetLeft+r.clientLeft,a=r.offsetTop+r.clientTop;o=o.relativeFromTo(n,r).translate(-i,-a),r.scrollLeft=t(r.scrollLeft,o.right-r.clientWidth,o.left,r.clientWidth),r.scrollTop=t(r.scrollTop,o.bottom-r.clientHeight,o.top,r.clientHeight),o=o.translate(i-r.scrollLeft,a-r.scrollTop),n=r}}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),!window.location.origin)try{window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}catch(e){}function W(e){var t,r={},n=!1;if("object"==typeof window[e])try{window[e].setItem("fakeStorageTest","1"),window[e].removeItem("fakeStorageTest")}catch(e){n=!0}else n=!0;if(n){if("object"==typeof window[e])t=window[e];else try{t=window[e]={}}catch(t){return void console.warn("Unable to set fake",e)}console.warn("Using fake",e);var o=function(e,r){var n=e?t.getItem(e):null,o=location.href.substr(location.origin.length),i=document.createEvent("StorageEvent");i.initStorageEvent("storage",!1,!1,e,n,r,o,t),window.dispatchEvent(i)};t.key=function(e){var t=Object.keys(r)[e];return"string"==typeof t?t:null},t.getItem=function(e){return"string"==typeof r[e]?r[e]:null},t.setItem=function(e,t){o(e,t),r[e]=String(t)},t.removeItem=function(e){o(e,null),delete r[e]},t.clear=function(){o(null,null),r={}}}}W("localStorage"),W("sessionStorage"),function(e){function t(e){return void 0===e?0:Number(e)}function r(e,t){return e!==t&&!(isNaN(e)&&isNaN(t))}e.DOMRect||(e.DOMRect=function(e,n,o,i){var a,u,s,c,l,f,p,d;a=t(e),u=t(n),s=t(o),c=t(i),Object.defineProperties(this,{x:{get:function(){return a},set:function(e){r(a,e)&&(a=e,l=f=void 0)},enumerable:!0},y:{get:function(){return u},set:function(e){r(u,e)&&(u=e,p=d=void 0)},enumerable:!0},width:{get:function(){return s},set:function(e){r(s,e)&&(s=e,l=f=void 0)},enumerable:!0},height:{get:function(){return c},set:function(e){r(c,e)&&(c=e,p=d=void 0)},enumerable:!0},left:{get:function(){return void 0===l&&(l=a+Math.min(0,s)),l},enumerable:!0},right:{get:function(){return void 0===f&&(f=a+Math.max(0,s)),f},enumerable:!0},top:{get:function(){return void 0===p&&(p=u+Math.min(0,c)),p},enumerable:!0},bottom:{get:function(){return void 0===d&&(d=u+Math.max(0,c)),d},enumerable:!0}})})}(window),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var z=function(){};z.ɵmod=f.ɵɵdefineNgModule({type:z}),z.ɵinj=f.ɵɵdefineInjector({factory:function(e){return new(e||z)},imports:[[]]}),e.BaseModule=z,e.IteratorAdaptor=R,e.NameValueArrayViewHelper=V,e.Pattern=H,e.PatternMatcher=Y,e.Patterns=B,e.SqError=I,e.Timer=A,e.Utils=q,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sinequa-core-base.umd.min.js.map