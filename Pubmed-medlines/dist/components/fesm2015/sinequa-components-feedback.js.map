{"version":3,"file":"sinequa-components-feedback.js","sources":["../../../projects/components/feedback/feedback.service.ts","../projects/components/feedback/bootstrap/feedback-menu/feedback-menu.ts","../projects/components/feedback/bootstrap/feedback-menu/feedback-menu.html","../../projects/components/feedback/bootstrap/feedback.module.ts","../../projects/components/feedback/messages/en.ts","../../projects/components/feedback/messages/fr.ts","../../projects/components/feedback/messages/de.ts","../../projects/components/feedback/messages/index.ts","../../../projects/components/feedback/sinequa-components-feedback.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\nimport {AuditWebService, AuditEvent} from \"@sinequa/core/web-services\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Action} from \"@sinequa/components/action\";\n\nexport const AuditFeedbackType = \"UserFeedback\";\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class FeedbackService {\n\n    constructor(\n        public auditService: AuditWebService,\n        public modalService: ModalService,\n        public appService: AppService,\n        public notificationsService: NotificationsService\n        ) {\n    }\n\n    public sendUserFeedback(type: string, message: string, thankUser: boolean){\n        const event : AuditEvent = {\n            type: AuditFeedbackType,\n            detail: {\n                app: this.appService.appName,\n                message: type,\n                detail: message\n            }\n        };\n        Utils.subscribe(this.auditService.notify([event]),\n            (result) => {\n                if(thankUser)\n                    this.notificationsService.success(\"msg#feedback.thankyou\");\n        });\n    }\n\n    public buildFeedbackAction() : Action[] {\n        return [new Action({\n            text: \"msg#feedback.text\",\n            title: \"msg#feedback.title\",\n            icon: \"fas fa-comment\",\n            headerGroup: true,\n            children: [\n                this.createAction(\"content\", \"msg#feedback.content.text\", \"msg#feedback.content.title\", \"far fa-file-alt fa-fw\"),\n                this.createAction(\"ui\", \"msg#feedback.ui.text\", \"msg#feedback.ui.title\", \"fas fa-desktop fa-fw\"),\n                this.createAction(\"lang\", \"msg#feedback.lang.text\", \"msg#feedback.lang.title\", \"far fa-comments fa-fw\"),\n                this.createAction(\"other\", \"msg#feedback.other.text\", \"msg#feedback.other.title\", \"far fa-lightbulb fa-fw\"),\n            ]\n        })];\n    }\n\n    public createAction(type:string, text:string, title:string, icon:string) : Action {\n        return new Action({\n            text: text,\n            title: title,\n            icon: icon,\n            action: () => this.openFeedbackModal(type, title)\n        });\n    }\n\n    public openFeedbackModal(type: string, title: string){\n        const model = {title: 'msg#feedback.title', message: title, output: '', buttons: [], rowCount: 5};\n        this.modalService.prompt(model)\n            .then((result) => {\n                if (result === ModalResult.OK && model.output.trim() !== \"\") {\n                    this.sendUserFeedback(type, model.output, true);\n                }\n            });\n    }\n}","import {Component, OnInit, Input, ChangeDetectionStrategy} from \"@angular/core\";\nimport {Action, ActionButtonsOptions} from \"@sinequa/components/action\";\nimport {FeedbackService} from \"../../feedback.service\";\n\n@Component({\n    selector: \"sq-feedback-menu\",\n    templateUrl: \"./feedback-menu.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsFeedbackMenu implements OnInit {\n\n    @Input() size: string;\n    @Input() style: string;\n    @Input() rightAligned: boolean;\n\n    items: Action[];\n    options: ActionButtonsOptions;\n\n    constructor(\n        public feedbackService: FeedbackService) {\n    }\n\n    ngOnInit() {\n        this.items = this.feedbackService.buildFeedbackAction();\n        this.options = {\n            items: this.items, \n            autoAdjust: true, \n            rightAligned: this.rightAligned, \n            size: this.size, \n            style: this.style\n        };\n    }\n\n\n}","<div [sq-action-buttons]=\"options\"></div>","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\n\nimport {BsFeedbackMenu} from \"./feedback-menu/feedback-menu\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        BsActionModule,\n        ValidationModule,\n        BsModalModule\n    ],\n    declarations: [\n        BsFeedbackMenu\n    ],\n    exports: [\n        BsFeedbackMenu\n    ]\n})\nexport class BsFeedbackModule {\n}\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\" : \"Send feedback to the Sinequa admin\",\n        \"content\" : {\n            \"text\" : \"Content\",\n            \"title\" : \"Propose to add new content or improve the current content\"\n        },\n        \"ui\" : {\n            \"text\" : \"User Interface\",\n            \"title\" : \"Propose improvements to the User Interface\"\n        },\n        \"lang\" : {\n            \"text\" : \"Language\",\n            \"title\" : \"Propose language processing improvements, like new words, synonyms to add to the dictionaries (this affects directly the relevance of the search engine)\"\n        },\n        \"other\" : {\n            \"text\" : \"Other\",\n            \"title\" : \"Submit feature requests, and other improvement ideas\"\n        },\n        \"thankyou\": \"Thank you for your feedback!\",\n        \"quality\" : {\n            \"label\" : \"Quality of the document:\"\n        },\n        \"relevance\" : {\n            \"label\" : \"Relevance of the document:\"\n        },\n        \"labels\" : {\n            \"public\" : {\n                \"label\" : \"Tags:\"\n            },\n            \"private\" : {\n                \"label\" : \"Private tags:\"\n            }\n        }\n    }\n};\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\" : \"Envoyer un feedback à l'admin Sinequa\",\n        \"content\" : {\n            \"text\" : \"Contenu\",\n            \"title\" : \"Proposer d'ajouter du contenu ou d'améliorer le contenu actuel\"\n        },\n        \"ui\" : {\n            \"text\" : \"Interface Utilisateur\",\n            \"title\" : \"Proposer des améliorations d'interfaces utilisateur\"\n        },\n        \"lang\" : {\n            \"text\" : \"Langage\",\n            \"title\" : \"Proposer des améliorations linguistiques, comme des nouveaux mots et synonymes à ajouter aux dictionaires (cela affecte directement la pertinence du moteur de recherche)\"\n        },\n        \"other\" : {\n            \"text\" : \"Autre\",\n            \"title\" : \"Proposer des fonctionnalités supplémentaires et autres idées d'améliorations\"\n        },\n        \"thankyou\": \"Merci pour votre commentaire !\",\n        \"quality\" : {\n            \"label\" : \"Qualité du document:\"\n        },\n        \"relevance\" : {\n            \"label\" : \"Pertinence du document:\"\n        },\n        \"labels\" : {\n            \"public\" : {\n                \"label\" : \"Tags:\"\n            },\n            \"private\" : {\n                \"label\" : \"Tags privés:\"\n            }\n        }\n    },\n};\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\": \"Sende Rückmeldung an den Sinequa-Admin\",\n        \"content\": {\n          \"text\": \"Inhalt\",\n          \"title\": \"Vorschlag zum Hinzufügen neuer Inhalte oder zur Verbesserung vorhandener Inhalte\"\n        },\n        \"ui\": {\n          \"text\": \"Benutzeroberfläche\",\n          \"title\": \"Schlage Verbesserungen für die Benutzeroberfläche vor\"\n        },\n        \"lang\": {\n          \"text\": \"Sprache\",\n          \"title\": \"Schlage Verbesserungen für die Sprachverarbeitung vor wie neue Worte oder Synonyme, die zu den Wörterbüchern hinzugefügt werden sollen (dies hat direkte Auswirkungen auf die Relevanzberechnung der Suchmaschine)\"\n        },\n        \"other\": {\n          \"text\": \"Andere\",\n          \"title\": \"Reichen Sie einen Vorschlag für eine zusätzliche Funktion oder andere Verbesserungvorschläge ein\"\n        },\n        \"thankyou\": \"Vielen Dank für Ihre Rückmeldung!\",\n        \"quality\": {\n          \"label\": \"Qualität des Dokuments:\"\n        },\n        \"relevance\": {\n          \"label\": \"Relevanz des Dokuments:\"\n        },\n        \"labels\" : {\n            \"public\": {\n              \"label\": \"Etiketten:\"\n            },\n            \"private\": {\n              \"label\": \"Private Etiketten:\"\n            }\n        }\n    }\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enFeedback from \"./en\";\nimport _frFeedback from \"./fr\";\nimport _deFeedback from \"./de\";\n\nconst enFeedback = Utils.merge({}, _enFeedback, enModal);\nconst frFeedback = Utils.merge({}, _frFeedback, frModal);\nconst deFeedback = Utils.merge({}, _deFeedback, deModal);\n\nexport { enFeedback, frFeedback, deFeedback };\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i0.ɵɵelement","i0.ɵɵproperty"],"mappings":"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"}