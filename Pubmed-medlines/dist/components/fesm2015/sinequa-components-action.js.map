{"version":3,"file":"sinequa-components-action.js","sources":["../../../projects/components/action/action.ts","../projects/components/action/bootstrap/action-item-content/action-item-content.html","../projects/components/action/bootstrap/action-item-content/action-item-content.ts","../../projects/components/action/bootstrap/dropdown.service.ts","../../projects/components/action/bootstrap/dropdown.directive.ts","../projects/components/action/bootstrap/dropdown-menu/dropdown-menu.html","../projects/components/action/bootstrap/dropdown-menu/dropdown-menu.ts","../projects/components/action/bootstrap/action-item/action-item.html","../projects/components/action/bootstrap/action-item/action-item.ts","../projects/components/action/bootstrap/action-buttons/action-buttons.html","../projects/components/action/bootstrap/action-buttons/action-buttons.ts","../projects/components/action/bootstrap/action-menu/action-menu.html","../projects/components/action/bootstrap/action-menu/action-menu.ts","../../projects/components/action/bootstrap/action.module.ts","../../../projects/components/action/sinequa-components-action.ts"],"sourcesContent":["import {Type} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {MessageParams} from \"@sinequa/core/intl\";\n\nexport abstract class IAction {\n    name?: string;\n    text?: string;\n    href?: string;\n    icon?: string;\n    styles?: string | string[] | Set<string> | {[klass: string]: any};\n    iconAfter?: string;\n    separator?: boolean;\n    scrollable?: boolean; // The children are scrollable\n    scrollGroup?: boolean; // A separate item whose children are scrollable \"in place\"\n    component?: Type<any>;\n    componentInputs?: any;\n    data?: any;\n    title?: string; // display as a tooltip\n    selected?: boolean;\n    disabled?: boolean;\n    hidden?: boolean;\n    flattenable?: boolean; // A dropdown with only one child is flattened to show only the child at the top level\n    messageParams?: MessageParams; // i18n - passed to sqMessage in (eg) action-item-content\n    headerGroup?: boolean; // display 'title' property as dropdown header before children\n\n    action?: (item: Action, event: UIEvent) => void;\n    toggle?: (item: Action, open: boolean) => void;\n    updater?: (item: Action) => void;\n    init?: (item: Action) => void;\n    destroy?: (item: Action) => void;\n\n    children?: Action[];\n}\n\nexport class Action extends IAction {\n\n    constructor(options: IAction) {\n        super();\n        Utils.extend(this, options);\n    }\n\n    get hasChildren(): boolean {\n        return !!this.children && (this.children.length > 0);\n    }\n\n    get showSelected(): boolean {\n        return typeof this.selected !== 'undefined';\n    }\n\n    update(): void {\n        if (this.updater) {\n            this.updater(this);\n        }\n        if (this.children) {\n            for (const child of this.children) {\n                child.update();\n            }\n        }\n    }\n}","<ng-container *ngIf=\"inDropdownMenu; then in_dropdown_menu else not_in_dropdown_menu\"></ng-container>\n\n<ng-template #in_dropdown_menu>\n    <ng-container *ngIf=\"!!item.component\" (click)=\"componentClick($event)\"[sqLoadComponent]=\"{component: item.component, inputs: item.componentInputs }\"></ng-container>\n    <div *ngIf=\"!!!item.component\" class=\"d-flex flex-row sq-action-item-content-container\">\n        <div *ngIf=\"item.showSelected\"><span class=\"fas fa-check {{item.selected ? '' : 'invisible'}}\" aria-hidden=\"true\"></span></div>\n        <div *ngIf=\"!!item.icon\"><span class=\"{{item.icon}}\" aria-hidden=\"true\"></span></div>\n        <div>{{text | sqMessage:item.messageParams}}</div>\n        <div *ngIf=\"!!item.iconAfter\" class=\"ml-auto\"><span class=\"{{item.iconAfter}}\" aria-hidden=\"true\"></span></div>\n    </div>\n</ng-template>\n\n<ng-template #not_in_dropdown_menu>\n    <span [ngClass]=\"item.styles || ''\">\n        <span *ngIf=\"!!item.icon\" class=\"{{item.icon}}\" aria-hidden=\"true\"></span>\n        {{text | sqMessage:item.messageParams}}\n        <span *ngIf=\"!!item.iconAfter\" class=\"{{item.iconAfter}}\" aria-hidden=\"true\"></span>\n    </span>\n</ng-template>","import {Component, Input} from \"@angular/core\";\nimport {Action} from \"../../action\";\n\n@Component({\n    selector: \"sq-action-item-content\",\n    templateUrl: \"./action-item-content.html\",\n    styles: [`\n.sq-action-item-content-container > div:not(:last-child) {\n    margin-right: 0.25rem;\n}\n    `]\n})\nexport class BsActionItemContent {\n    @Input() item: Action;\n    @Input() text: string;\n    @Input(\"in-dropdown-menu\") inDropdownMenu: boolean;\n\n    componentClick(event: UIEvent) {\n        if (this.item.action && !this.item.disabled) {\n            this.item.action(this.item, event);\n        }\n        event.stopPropagation();\n        return false;\n    }\n}","import {Injectable, OnDestroy, RendererFactory2, Renderer2} from \"@angular/core\";\nimport {Subject, Observable} from \"rxjs\";\nimport {Keys} from \"@sinequa/core/base\";\n\n// Based on  Bootstrap (v4.4.1): dropdown.js\n\nexport interface DropdownEvent {\n    type: \"clear\" | \"toggle\";\n}\n\nexport interface DropdownClearEvent extends DropdownEvent {\n    type: \"clear\";\n    sourceEvent: KeyboardEvent | MouseEvent | undefined;\n}\n\nexport interface DropdownToggleEvent extends DropdownEvent {\n    type: \"toggle\";\n    element: Element;\n}\n\nexport type DropdownEvents = DropdownClearEvent | DropdownToggleEvent;\n\nexport const gClassName = {\n    DISABLED        : 'disabled',\n    SHOW            : 'show',\n    DROPUP          : 'dropup',\n    DROPRIGHT       : 'dropright',\n    DROPLEFT        : 'dropleft',\n    MENURIGHT       : 'dropdown-menu-right',\n    MENULEFT        : 'dropdown-menu-left',\n    POSITION_STATIC : 'position-static'\n};\n\nexport const gSelector = {\n    DROPDOWN      : '.dropdown',\n    DATA_TOGGLE   : '[data-toggle=\"dropdown\"]',\n    FORM_CHILD    : '.dropdown form',\n    MENU          : '.dropdown-menu',\n    NAVBAR_NAV    : '.navbar-nav',\n    VISIBLE_ITEMS : '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n};\n\nexport const gAttachmentMap = {\n    TOP       : 'top-start',\n    TOPEND    : 'top-end',\n    BOTTOM    : 'bottom-start',\n    BOTTOMEND : 'bottom-end',\n    RIGHT     : 'right-start',\n    RIGHTEND  : 'right-end',\n    LEFT      : 'left-start',\n    LEFTEND   : 'left-end'\n};\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class BsDropdownService implements OnDestroy {\n    protected _events: Subject<DropdownEvents>;\n    protected unlisteners: (() => void)[];\n    protected renderer: Renderer2;\n\n    constructor(\n        rendererFactory: RendererFactory2\n    ) {\n        this._events = new Subject<DropdownEvents>();\n        this.renderer = rendererFactory.createRenderer(null, null);\n        this.unlisteners = [];\n        this.unlisteners.push(this.renderer.listen(document, \"keydown\", this.dataApiKeydownHandler));\n        this.unlisteners.push(this.renderer.listen(document, \"click\", this.clearMenus));\n        this.unlisteners.push(this.renderer.listen(document, \"keyup\", this.clearMenus));\n        this.unlisteners.push(this.renderer.listen(document, \"click\", this.toggle));\n        this.unlisteners.push(this.renderer.listen(document, \"click\", this.formChildClick));\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n        this.unlisteners.forEach((unlistener) => unlistener());\n    }\n\n    get events(): Observable<DropdownEvents> {\n        return this._events;\n    }\n\n    private matchDescendant(base: Element, event: Event, selector: string): HTMLElement | null {\n        let element: HTMLElement | null = event.target as HTMLElement;\n        while (element && element !== base) {\n            if (element.matches(selector)) {\n                return element;\n            }\n            element = element.parentElement;\n        }\n        return null;\n    }\n\n    private getSelectorFromElement(element: HTMLElement) {\n        let selector = element.getAttribute('data-target');\n\n        if (!selector || selector === '#') {\n            const hrefAttr = element.getAttribute('href');\n            selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : '';\n        }\n\n        try {\n            return document.querySelector(selector) ? selector : null;\n        }\n        catch (err) {\n            return null;\n        }\n    }\n\n    getParentFromElement(element: HTMLElement): Node | null {\n        let parent: HTMLElement | null = null;\n        const selector = this.getSelectorFromElement(element);\n\n        if (selector) {\n            parent = document.querySelector(selector);\n        }\n        if (!parent) {\n            // Account for scroll menus and sub menus\n            parent = element.parentElement;\n            while (parent &&\n                (parent.classList.contains(\"sq-scroll-menu\") ||\n                parent.classList.contains(\"sq-scroll-menu-item\") ||\n                parent.classList.contains(\"dropdown-submenu\"))) {\n                parent = parent.parentElement;\n            }\n        }\n        return parent;\n    }\n\n    private dataApiKeydownHandler = (event: KeyboardEvent): boolean | void => {\n        const descendant = this.matchDescendant(document.documentElement, event, `${gSelector.DATA_TOGGLE},${gSelector.MENU}`);\n        if (!descendant) {\n            return;\n        }\n        // If not input/textarea:\n        //  - And not a key in REGEXP_KEYDOWN => not a dropdown command\n        // If input/textarea:\n        //  - If space key => not a dropdown command\n        //  - If key is other than escape\n        //    - If key is not up or down => not a dropdown command\n        //    - If trigger inside the menu => not a dropdown command\n        if (/input|textarea/i.test((event.target as Element).tagName) ?\n            event.which === Keys.space || event.which !== Keys.esc &&\n            (event.which !== Keys.down && event.which !== Keys.up || (event.target as Element).closest(gSelector.MENU)) :\n            !(event.which === Keys.up || event.which === Keys.down || event.which === Keys.esc)) {\n            return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (/*TODO descendant.disabled || */descendant.classList.contains(gClassName.DISABLED)) {\n            return;\n        }\n\n        const parent = this.getParentFromElement(descendant);\n        const isActive = parent instanceof HTMLElement && parent.classList.contains(gClassName.SHOW);\n\n        if (!isActive && event.which === Keys.esc) {\n            return;\n        }\n\n        if (!isActive || isActive && (event.which === Keys.esc || event.which === Keys.space)) {\n            if (event.which === Keys.esc) {\n                const toggle = parent instanceof Element && parent.querySelector(gSelector.DATA_TOGGLE);\n                if (toggle instanceof HTMLElement) {\n                    // toggle.dispatchEvent(new Event(\"focus\", {bubbles: true}));\n                    // NB $(toggle).trigger('focus') will set the focus on toggle\n                    toggle.focus();\n                }\n            }\n\n            descendant.dispatchEvent(new Event(\"click\", {bubbles: true}));\n            return;\n        }\n\n        let items: HTMLElement[] = [];\n        if (parent instanceof Element) {\n            items = items.slice.call(parent.querySelectorAll(gSelector.VISIBLE_ITEMS))\n                .filter((item: Element) => item instanceof HTMLElement && (item.offsetWidth > 0 || item.offsetHeight > 0));\n        }\n\n        if (items.length === 0) {\n            return;\n        }\n\n        let index = items.indexOf(event.target as HTMLElement);\n\n        if (event.which === Keys.up && index > 0) { // Up\n            index--;\n        }\n\n        if (event.which === Keys.down && index < items.length - 1) { // Down\n            index++;\n        }\n\n        if (index < 0) {\n            index = 0;\n        }\n\n        items[index].focus();\n    }\n\n    private clearMenus = (event: KeyboardEvent | MouseEvent): boolean | void => {\n        if (event && (event.which === 3 /*RIGHT_MOUSE_BUTTON_WHICH*/ ||\n            event.type === 'keyup' && event.which !== Keys.tab)) {\n            return;\n        }\n        this._events.next({type: \"clear\", sourceEvent: event});\n    }\n\n    private toggle = (event: UIEvent): boolean | void => {\n        const descendant = this.matchDescendant(document.documentElement, event, gSelector.DATA_TOGGLE);\n        if (!descendant) {\n            return;\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        this._events.next({type: \"toggle\", element: descendant});\n    }\n\n    private formChildClick = (event: UIEvent): boolean | void => {\n        if (!this.matchDescendant(document.documentElement, event, gSelector.FORM_CHILD)) {\n            return;\n        }\n        event.stopPropagation();\n    }\n\n    raiseClear() {\n        this._events.next({type: \"clear\", sourceEvent: undefined});\n    }\n}\n","import {Directive, OnInit, OnDestroy, AfterViewInit, ElementRef, HostListener} from \"@angular/core\";\nimport {Subscription} from 'rxjs';\nimport Popper from 'popper.js';\nimport {Keys} from \"@sinequa/core/base\";\nimport {BsDropdownService, gClassName, gSelector, gAttachmentMap} from './dropdown.service';\n\n// Based on  Bootstrap (v4.4.1): dropdown.js\n\nfunction noop() {}\n\nconst gConfig = {\n    offset       : 0,\n    flip         : true,\n    boundary     : 'scrollParent',\n    reference    : 'toggle',\n    display      : 'dynamic',\n    popperConfig : null\n};\n\n@Directive({\n    selector: gSelector.DATA_TOGGLE\n})\nexport class BsDropdownDirective implements OnInit, OnDestroy, AfterViewInit {\n    private subscription: Subscription;\n    private inNavbar: boolean;\n    private dropdown: HTMLElement;\n    private dropdownToggle: HTMLElement;\n    private _dropdownMenu: HTMLElement | null;\n    private popper;\n\n    constructor(\n        private elementRef: ElementRef,\n        private dropdownService: BsDropdownService\n    ) {\n    }\n\n    get dropdownMenu(): HTMLElement | null {\n        if (!this._dropdownMenu && this.dropdown) {\n            this._dropdownMenu = this.dropdown.querySelector(gSelector.MENU);\n        }\n        return this._dropdownMenu;\n    }\n\n    ngOnInit() {\n        this.subscription = this.dropdownService.events.subscribe((event) => {\n            if (event.type === \"clear\") {\n                this.clear(event.sourceEvent);\n            }\n            else if (event.type === \"toggle\") {\n                this.toggle(event.element);\n            }\n        });\n    }\n\n    ngAfterViewInit() {\n        this.dropdownToggle = this.elementRef.nativeElement;\n        this.dropdown = this.dropdownService.getParentFromElement(this.dropdownToggle) as HTMLElement;\n        this.inNavbar = !!this.dropdownToggle.closest('.navbar');\n    }\n\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n\n    @HostListener(\"click\", [\"$event\"])\n    clickHandler(event: Event) {\n        // before event.stopPropagation() \n        // needed to avoid dropdown menu list to stay opened,\n        // bubble event to his root parent first and once\n        const isActive = this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.SHOW);\n        if (!isActive) this.dropdown.dispatchEvent(new Event('click', {bubbles: true, cancelable: false}));\n        \n        event.preventDefault();\n        event.stopPropagation();\n        this.toggle(this.dropdownToggle);\n    }\n\n    private toggle(element: Element) {\n        if (!element || this.dropdownToggle !== element || !this.dropdownMenu || !this.dropdown) {\n            return;\n        }\n\n        if (/*TODO element.disabled || */element.classList.contains(gClassName.DISABLED)) {\n            return;\n        }\n\n        const isActive = this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.SHOW);\n\n        this.dropdownService.raiseClear();\n\n        if (isActive) {\n            return;\n        }\n\n        this.show(true);\n    }\n\n    private getPlacement(): string {\n        let placement = gAttachmentMap.BOTTOM;\n\n        // Handle dropup\n        if (this.dropdown.classList.contains(gClassName.DROPUP)) {\n            placement = gAttachmentMap.TOP;\n            if (this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.MENURIGHT)) {\n                placement = gAttachmentMap.TOPEND;\n            }\n        }\n        else if (this.dropdown.classList.contains(gClassName.DROPRIGHT)) {\n            placement = gAttachmentMap.RIGHT;\n        }\n        else if (this.dropdown.classList.contains(gClassName.DROPLEFT)) {\n            placement = gAttachmentMap.LEFT;\n        }\n        else if (this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.MENURIGHT)) {\n            placement = gAttachmentMap.BOTTOMEND;\n        }\n        return placement;\n    }\n\n    private getOffset() {\n        return {\n            offset: gConfig.offset\n        };\n    }\n\n    private getPopperConfig() {\n        const popperConfig: any = {\n            placement: this.getPlacement(),\n            modifiers: {\n                offset: this.getOffset(),\n                flip: {\n                    enabled: gConfig.flip\n                },\n                preventOverflow: {\n                    boundariesElement: gConfig.boundary\n                }\n            }\n        };\n\n        // Disable Popper.js if we have a static display\n        if (gConfig.display === 'static') {\n            popperConfig.modifiers.applyStyle = {\n                enabled: false\n            };\n        }\n\n        return popperConfig;\n    }\n\n    show(usePopper = false) {\n        if (!this.dropdownToggle || !this.dropdownMenu || !this.dropdown) {\n            return;\n        }\n        if (/*TODO element.disabled || */\n            this.dropdownToggle.classList.contains(gClassName.DISABLED) ||\n            this.dropdownMenu.classList.contains(gClassName.SHOW)) {\n          return;\n        }\n\n        const parent = this.dropdown;\n\n        // Disable totally Popper.js for Dropdown in Navbar\n        if (!this.inNavbar && usePopper) {\n            /**\n             * Check for Popper dependency\n             * Popper - https://popper.js.org\n             */\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('Bootstrap\\'s dropdowns require Popper.js (https://popper.js.org/)');\n            }\n\n            let referenceElement = this.dropdownToggle;\n\n            if (gConfig.reference === 'parent') {\n                referenceElement = parent;\n            }\n\n            // If boundary is not `scrollParent`, then set position to `static`\n            // to allow the menu to \"escape\" the scroll parent's boundaries\n            // https://github.com/twbs/bootstrap/issues/24251\n            if (gConfig.boundary !== 'scrollParent') {\n                parent.classList.add(gClassName.POSITION_STATIC);\n            }\n            this.popper = new Popper(referenceElement, this.dropdownMenu, this.getPopperConfig());\n        }\n\n        // If this is a touch-enabled device we add extra\n        // empty mouseover listeners to the body's immediate children;\n        // only needed because of broken event delegation on iOS\n        // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n        if ('ontouchstart' in document.documentElement &&\n            !parent.closest(gSelector.NAVBAR_NAV)) {\n            Array.from(document.body.children).forEach((element) => element.addEventListener('mouseover', noop));\n        }\n\n        this.dropdownToggle.focus();\n        this.dropdownToggle.setAttribute('aria-expanded', \"true\");\n\n        this.dropdownMenu.classList.toggle(gClassName.SHOW);\n        parent.classList.toggle(gClassName.SHOW);\n    }\n\n    private clear(event: KeyboardEvent | MouseEvent | undefined) {\n        if (!this.dropdownToggle || !this.dropdownMenu || !this.dropdown) {\n            return;\n        }\n        const parent = this.dropdown;\n\n        if (!parent.classList.contains(gClassName.SHOW)) {\n            return;\n        }\n\n        if (event && (event.type === 'click' &&\n            /input|textarea/i.test((event.target as Element).tagName) || event.type === 'keyup' && event.which === Keys.tab) &&\n            parent.contains(event.target as Node)) {\n            return;\n        }\n\n        // If this is a touch-enabled device we remove the extra\n        // empty mouseover listeners we added for iOS support\n        if ('ontouchstart' in document.documentElement) {\n            Array.from(document.body.children).forEach((element) => element.removeEventListener('mouseover', noop));\n        }\n\n        this.dropdownToggle.setAttribute('aria-expanded', 'false');\n\n        if (this.popper) {\n            this.popper.destroy();\n        }\n\n        this.dropdownMenu.classList.remove(gClassName.SHOW);\n        parent.classList.remove(gClassName.SHOW);\n    }\n}\n","<h6 *ngIf=\"options.item.title && options.item.headerGroup\" class=\"dropdown-header\">{{ options.item.title | sqMessage:options.item.messageParams }}</h6>\n<ng-container *ngFor=\"let child of options.item.children\">\n    <li *ngIf=\"!child.hidden\" class=\"{{child.separator ? 'dropdown-divider' : child.scrollGroup ? 'sq-scroll-menu-item open' : child.hasChildren ? 'dropdown-submenu' : ''}}\" title=\"{{child.title | sqMessage:child.messageParams}}\" [attr.aria-label]=\"child.title | sqMessage:child.messageParams\">\n        <ng-container *ngIf=\"!child.separator\">\n            <a *ngIf=\"!child.scrollGroup && child.href\" class=\"dropdown-item {{child.disabled ? 'disabled' : ''}}\" tabindex=\"-1\" href=\"{{child.href}}\">\n                <sq-action-item-content [item]=\"child\" [text]=\"child.text\" [in-dropdown-menu]=\"true\"></sq-action-item-content>\n            </a>\n            <a *ngIf=\"!child.scrollGroup && !child.href && !child.component\" href=\"javascript:void(0)\" class=\"dropdown-item {{child.hasChildren ? 'dropdown-toggle': ''}} {{child.disabled ? 'disabled' : ''}}\" [attr.data-toggle]=\"child.hasChildren ? 'dropdown' : ''\" tabindex=\"-1\" (click)=\"click(child, $event)\">\n                <sq-action-item-content [item]=\"child\" [text]=\"child.text\" [in-dropdown-menu]=\"true\"></sq-action-item-content>\n            </a>\n            <sq-action-item-content *ngIf=\"child.component\" [item]=\"child\" [text]=\"child.text\" [in-dropdown-menu]=\"true\"></sq-action-item-content>\n            <ul *ngIf=\"child.hasChildren\" [sq-dropdown-menu]=\"{item: child, showMenuClass: options.showMenuClass}\"></ul>\n        </ng-container>\n    </li>\n</ng-container>","import {Component, Input, OnInit, ElementRef, HostBinding, ChangeDetectionStrategy} from \"@angular/core\";\nimport {Action} from \"../../action\";\n\nexport interface DropdownMenuOptions {\n    item: Action;\n    rightAligned?: boolean;\n    showMenuClass: string;\n    header?: string;\n}\n\n@Component({\n    selector: \"[sq-dropdown-menu]\",\n    host: {\n        \"class\": \"dropdown-menu\",\n        \"role\": \"menu\"\n    },\n    templateUrl: \"./dropdown-menu.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsDropdownMenu implements OnInit {\n    children: Action[];\n    \n    private _options: DropdownMenuOptions;\n    \n    @Input(\"sq-dropdown-menu\")\n    set options(opts: DropdownMenuOptions) {\n        this._options = {...opts};\n        this.children = opts.item.children?.filter(child => !child.hidden) || [];\n    }\n    get options(): DropdownMenuOptions {\n        return this._options;\n    }\n    \n    @HostBinding(\"class.dropdown-menu-right\") rightAligned;\n\n    constructor(\n        private elementRef: ElementRef) {\n    }\n\n    ngOnInit() {\n        const element: HTMLElement = this.elementRef.nativeElement;\n        if (this.options.item.scrollable) {\n            element.classList.add(\"sq-scrollable-menu\");\n        }\n        else if (this.options.item.scrollGroup) {\n            element.classList.add(\"sq-scroll-menu\");\n        }\n        this.rightAligned = this.options.rightAligned;\n    }\n\n    private getLi(element: HTMLElement): HTMLElement | null {\n        let element1: HTMLElement | null = element;\n        while (element1 && element1.nodeName !== \"LI\") {\n            element1 = element1.parentElement;\n        }\n        return element1;\n    }\n\n    click(item: Action, event: UIEvent) {\n        if (!this.options.item.disabled) {\n            // Handle sub-menu opening\n            let isOpen = false;\n            const li = this.getLi(<HTMLElement>event.target);\n            if (!!li && li.classList.contains(\"dropdown-submenu\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                isOpen = li.classList.contains(this.options.showMenuClass);\n                const ul = li.parentElement;\n                if (ul) {\n                    for (let i = 0, ic = ul.children.length; i < ic; i++) {\n                        const _li = ul.children[i];\n                        _li.classList.remove(this.options.showMenuClass);\n                    }\n                }\n                // NB toggle's second param does not work on IE\n                // li.classList.toggle(this.options.showMenuClass, !isOpen);\n                if (!isOpen) {\n                    li.classList.add(this.options.showMenuClass);\n                }\n            }\n            if (item.action) {\n                item.action(item, event);\n            }\n            if (item.toggle) {\n                item.toggle(item, !isOpen);\n            }\n        }\n    }\n}","<!-- dropdown button -->\n<ng-container *ngIf=\"isDropdownButton\">\n    <button *ngIf=\"hasAction\" class=\"btn {{styleClass}} {{sizeClass}} {{options.item.disabled ? 'disabled' : ''}}\" type=\"button\" (click)=\"click($event)\" sqTooltip=\"{{itemTitle | sqMessage:itemMessageParams}}\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\">\n        <sq-action-item-content [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n    </button>\n    <ng-container *ngIf=\"options.item.flattenable && options.item.children?.length === 1; then flattened else unflattened\"></ng-container>\n    <ng-template #flattened>\n        <div *ngIf=\"!hasAction\" class=\"btn-text {{sizeClass}}\">\n            <sq-action-item-content *ngIf=\"!hasAction\" [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n        </div>\n    </ng-template>\n    <ng-template #unflattened>\n        <button class=\"btn {{styleClass}} dropdown-toggle {{sizeClass}}\" type=\"button\" data-toggle=\"dropdown\" sqTooltip=\"{{itemTitle | sqMessage:itemMessageParams}}\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\" (touchstart)=\"touchstart()\" (mousedown)=\"mousedown()\" (focusin)=\"focusin()\">\n            <sq-action-item-content *ngIf=\"!hasAction\" [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n        </button>\n        <ul *ngIf=\"showDropdown\" [sq-dropdown-menu]=\"dropdownMenuOptions\"></ul>\n    </ng-template>\n</ng-container>\n<!-- button -->\n<sq-action-item-content *ngIf=\"isButton\" [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n<!-- dropdown list item -->\n<ng-container *ngIf=\"isDropdownListItem\">\n    <a href=\"javascript:void(0)\" (click)=\"click($event)\" class=\"{{options.inMenu ? 'nav-link' : 'dropdown-item'}} dropdown-toggle {{options.item.disabled ? 'disabled' : ''}}\" data-toggle=\"dropdown\" role=\"button\" title=\"{{itemTitle | sqMessage:itemMessageParams}}\" aria-haspopup=\"true\" aria-expanded=\"false\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\">\n        <sq-action-item-content [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n    </a>\n    <ul [sq-dropdown-menu]=\"dropdownMenuOptions\"></ul>   \n</ng-container>\n\n<!-- list item -->\n<a *ngIf=\"isListItem\" href=\"javascript:void(0)\" class=\"{{options.inMenu ? 'nav-link' : 'dropdown-item'}} {{options.item.disabled ? 'disabled' : ''}}\" role=\"button\" (click)=\"click($event)\" title=\"{{itemTitle | sqMessage:itemMessageParams}}\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\">\n    <sq-action-item-content [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n</a>\n","import {Component, Input, OnInit, AfterViewInit, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef} from \"@angular/core\";\nimport {Action} from \"../../action\";\nimport {UIService} from \"@sinequa/components/utils\";\nimport {DropdownMenuOptions} from \"../dropdown-menu/dropdown-menu\";\n\n\nexport interface ActionItemOptions {\n    item: Action;\n    size?: string;\n    style?: string;\n    autoAdjust?: boolean;\n    autoAdjustBreakpoint?: string;\n    inMenu: boolean;\n    rightAligned?: boolean;\n}\n\n@Component({\n    selector: \"[sq-action-item]\",\n    templateUrl: \"./action-item.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsActionItem implements OnInit, AfterViewInit {\n    @Input(\"sq-action-item\") options: ActionItemOptions;\n    @Input() collapseBreakpoint: string = \"md\";\n    inListItem: boolean;\n    dropdownButton: Element;\n    dropdownListItem: Element;\n    autoAdjustBreakpoint?: string;\n    showDropdown: boolean;\n\n    constructor(\n        private uiService: UIService,\n        private elementRef: ElementRef,\n        private cdRef: ChangeDetectorRef) {\n    }\n\n    get haveItem(): boolean {\n        return !!this.options.item;\n    }\n\n    get isVisible(): boolean {\n        return this.haveItem && !this.options.item.hidden;\n    }\n\n    get hasAction(): boolean {\n        return this.haveItem && !!this.options.item.action;\n    }\n\n    get isDropdownButton(): boolean {\n        return this.isVisible && !this.inListItem && this.options.item.hasChildren;\n    }\n\n    get isButton(): boolean {\n        return this.isVisible && !this.inListItem && !this.options.item.hasChildren && this.hasAction;\n    }\n\n    get isDropdownListItem(): boolean {\n        return this.isVisible && this.inListItem && this.options.item.hasChildren;\n    }\n\n    get isListItem(): boolean {\n        return this.isVisible && this.inListItem && !this.options.item.hasChildren && this.hasAction;\n    }\n\n    get haveSpace(): boolean {\n        if (this.uiService.screenSizeIsGreaterOrEqual(this.autoAdjustBreakpoint)) {\n            return true;\n        }\n        if (this.inListItem && this.uiService.screenSizeIsLess(this.collapseBreakpoint)) {\n            return true;\n        }\n        return false;\n    }\n\n    get haveIcon(): boolean {\n        return !!this.options.item.icon || !!this.options.item.iconAfter;\n    }\n\n    get itemText(): string {\n        if (!this.haveItem) {\n            return \"\";\n        }\n        const text = this.options.item.text || \"\";\n        if (this.options.autoAdjust && this.haveIcon) {\n            return this.haveSpace ? text : \"\";\n        }\n        else {\n            return text;\n        }\n    }\n\n    get itemTitle(): string {\n        if (!this.haveItem) {\n            return \"\";\n        }\n        const text = this.options.item.text || \"\";\n        const title = this.options.item.title || \"\";\n        if (this.options.autoAdjust && this.haveIcon) {\n            return this.haveSpace ? (title !== text ? title : \"\") : title || text;\n        }\n        else {\n            return title;\n        }\n    }\n\n    get itemMessageParams(): any {\n        if (!this.haveItem) {\n            return null;\n        }\n        return this.options.item.messageParams;\n    }\n\n    get sizeClass(): string {\n        return this.options.size ? `btn-${this.options.size}` : \"\";\n    }\n\n    get styleClass(): string {\n        return this.options.style ? `btn-${this.options.style}` : \"btn-light\";\n    }\n    \n    get dropdownMenuOptions(): DropdownMenuOptions {\n        return ({...this.options, showMenuClass: 'show'});\n    }\n\n    ngAfterViewInit() {\n        this.dropdownButton = this.elementRef.nativeElement.querySelector(\"div.dropdown\");\n        this.dropdownListItem = this.elementRef.nativeElement.querySelector(\"li.dropdown-toggle\");\n    }\n\n    ngOnInit() {\n        this.inListItem = (this.elementRef.nativeElement.nodeName === \"LI\");\n        if (this.options.item.init) {\n            this.options.item.init(this.options.item);\n        }\n        this.autoAdjustBreakpoint = this.options.autoAdjustBreakpoint;\n        this.uiService.resizeEvent.subscribe(e => this.cdRef.detectChanges());\n    }\n\n    ngOnDestroy() {\n        if (this.options.item.destroy) {\n            this.options.item.destroy(this.options.item);\n        }\n    }\n\n    click(event: UIEvent) {\n        if (!this.options.item.disabled) {\n            if (this.options.item.action) {\n                this.options.item.action(this.options.item, event);\n            }\n            if (this.options.item.toggle && (this.isDropdownButton || this.isDropdownListItem)) {\n                const openElement = this.dropdownButton || (this.dropdownListItem ? this.dropdownListItem.parentElement : null);\n                if (openElement) {\n                    this.options.item.toggle(this.options.item, !openElement.classList.contains(\"open\"));\n                }\n            }\n        }\n    }\n\n    touchstart() {\n        this.showDropdown = true;\n    }\n\n    mousedown() {\n        this.showDropdown = true;\n    }\n\n    focusin() {\n        this.showDropdown = true;\n    }\n}","<ng-container *ngFor=\"let item of itemsVisible\">\n    <a *ngIf=\"item.href\" class=\"btn-text\" [attr.href]=\"!item.disabled ? item.href : null\" (click)=\"itemClick(item, $event)\" [sq-action-item]=\"getActionItemOptions(item)\"></a>\n    <ng-container *ngIf=\"!item.href\">\n        <div *ngIf=\"item.hasChildren\" class=\"btn-group dropdown\" [sq-action-item]=\"getActionItemOptions(item)\"></div>\n        <button *ngIf=\"!item.hasChildren\" type=\"button\" class=\"btn {{styleClass}} {{sizeClass}} {{item.selected ? 'active' : ''}} {{item.disabled ? 'disabled' : ''}}\" [sq-action-item]=\"getActionItemOptions(item)\" (click)=\"itemClick(item, $event)\" sqTooltip=\"{{item.title | sqMessage:item.messageParams}}\" [attr.aria-label]=\"item.title | sqMessage:item.messageParams\"></button>\n    </ng-container>\n</ng-container>","import {Component, Input} from \"@angular/core\";\nimport {ActionItemOptions} from \"..\";\nimport {Action} from \"../../action\";\n\nexport interface ActionButtonsOptions {\n    items: Action[] | Action;\n    size?: string;\n    style?: string;\n    autoAdjust?: boolean;\n    autoAdjustBreakpoint?: string;\n    rightAligned?: boolean;\n}\n\n@Component({\n    selector: \"[sq-action-buttons]\",\n    templateUrl: \"./action-buttons.html\"\n})\nexport class BsActionButtons {\n    private _options: ActionButtonsOptions;\n    \n    @Input(\"sq-action-buttons\")\n    set options (opts: ActionButtonsOptions) {\n        this._options = opts;\n    }\n    get options(): ActionButtonsOptions {\n        return this._options;\n    }\n\n    get sizeClass(): string {\n        return this._options.size ? `btn-${this._options.size}` : \"\";\n    }\n\n    get styleClass(): string {\n        return this._options.style ? `btn-${this._options.style}` : \"btn-light\";\n    }\n    \n    get itemsVisible(): Action[] {\n        // hidden items are not displayed\n        return (Array.isArray(this._options.items)) ? this._options.items.filter(item => !item.hidden) : this._options.items.hidden ? [] : [this._options.items];\n    }\n    \n    getActionItemOptions(item: Action): ActionItemOptions {\n        return ({...this._options, item, inMenu: false});\n    }\n\n    itemClick(item: Action, event: UIEvent) {\n        if (!item.disabled && item.action) {\n            item.action(item, event);\n        }\n        if (item.href === \"#\" || (!!item.href && item.disabled)) {\n            event.preventDefault();\n        }\n    }\n}","<ul class=\"navbar-nav {{right ? 'navbar-right' : ''}}\">\n    <ng-container *ngFor=\"let item of items; trackBy(identify)\">\n        <li *ngIf=\"!item.hidden\" class=\"nav-item {{item.hasChildren ? 'dropdown' : ''}}\"\n            [sq-action-item]=\"{item: item, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n            [collapseBreakpoint]=\"collapseBreakpoint\"></li>\n    </ng-container>\n</ul>","import {ChangeDetectionStrategy, Component, Input, OnInit} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Action} from \"../../action\";\n\n@Component({\n    selector: \"sq-action-menu\",\n    templateUrl: \"./action-menu.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsActionMenu implements OnInit{\n    @Input() items: Action[];\n    @Input() size: string;\n    @Input() autoAdjust: boolean;\n    @Input() autoAdjustBreakpoint: string;\n    @Input() collapseBreakpoint: string;\n    @Input() right: boolean;\n\n    ngOnInit() {\n        if (!Utils.isArray(this.items)) {\n            this.items = [<Action>this.items];\n        }\n    }\n\n    identify(index:number, item: Action) {\n        return item.name || item.text || item.title || index;\n    }\n}","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {LoadComponentModule} from \"@sinequa/core/load-component\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsActionButtons} from \"./action-buttons/action-buttons\";\nimport {BsActionItemContent} from \"./action-item-content/action-item-content\";\nimport {BsActionItem} from \"./action-item/action-item\";\nimport {BsActionMenu} from \"./action-menu/action-menu\";\nimport {BsDropdownMenu} from \"./dropdown-menu/dropdown-menu\";\nimport {BsDropdownDirective} from \"./dropdown.directive\";\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        LoadComponentModule,\n        UtilsModule\n    ],\n    declarations: [\n        BsActionButtons,\n        BsActionItemContent,\n        BsActionItem,\n        BsActionMenu,\n        BsDropdownMenu,\n        BsDropdownDirective\n    ],\n    exports: [\n        BsActionButtons,\n        BsActionMenu,\n        BsActionItem,\n        BsDropdownDirective\n    ]\n})\nexport class BsActionModule {\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i0.ɵɵelementContainer","i0.ɵɵelementContainerStart","i0.ɵɵlistener","i0.ɵɵelementContainerEnd","i0.ɵɵproperty","i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵclassMapInterpolate1","i0.ɵɵclassMap","i0.ɵɵtemplate","i0.ɵɵtext","i0.ɵɵtextInterpolate","i0.ɵɵtextInterpolate1","i0.ɵɵpropertyInterpolate","i0.ɵɵclassMapInterpolate2","i0.ɵɵattribute","i0.ɵɵclassMapInterpolate3","i0.ɵɵclassMapInterpolate4"],"mappings":"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"}