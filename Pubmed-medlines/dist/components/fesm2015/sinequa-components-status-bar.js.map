{"version":3,"file":"sinequa-components-status-bar.js","sources":["../projects/components/status-bar/bootstrap/fullscreen-activator/fullscreen-activator.ts","../projects/components/status-bar/bootstrap/fullscreen-activator/fullscreen-activator.html","../projects/components/status-bar/bootstrap/network-activity/network-activity.ts","../projects/components/status-bar/bootstrap/network-activity/network-activity.html","../../projects/components/status-bar/bootstrap/status-bar.module.ts","../../projects/components/status-bar/messages/en.ts","../../projects/components/status-bar/messages/fr.ts","../../projects/components/status-bar/messages/de.ts","../../../projects/components/status-bar/sinequa-components-status-bar.ts"],"sourcesContent":["import {Component} from \"@angular/core\";\nimport {Action} from \"@sinequa/components/action\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Subscription} from \"rxjs\";\nimport {UIService} from \"@sinequa/components/utils\";\n\n@Component({\n    selector: \"sq-fullscreen-activator\",\n    templateUrl: \"./fullscreen-activator.html\"\n})\nexport class BsFullscreenActivator {\n    action: Action;\n    resizeSubscription: Subscription | undefined;\n\n    constructor(\n        private uiService: UIService) {\n        this.buildAction();\n    }\n\n    getFullscreenIcon(): string {\n        return !this.isFullscreen() ? \"fas fa-expand\" : \"fas fa-compress\";\n    }\n\n    getFullscreenTitle(): string {\n        return !this.isFullscreen() ? \"msg#statusbar.fullscreenTitleEnter\" : \"msg#statusbar.fullscreenTitleExit\";\n    }\n\n    buildAction() {\n        this.action = new Action({\n            icon: this.getFullscreenIcon(),\n            title: this.getFullscreenTitle(),\n            action: (item, $event) => {\n                this.toggleFullscreen();\n                item.icon = this.getFullscreenIcon();\n                item.title = this.getFullscreenTitle();\n            },\n            init: (item) => {\n\n                this.resizeSubscription = Utils.subscribe(this.uiService.resizeEvent,\n                    (event) => {\n                        this.action.icon = this.getFullscreenIcon();\n                        this.action.title = this.getFullscreenTitle();\n                    });\n\n            },\n            destroy: (item) => {\n\n                if (this.resizeSubscription) {\n                    this.resizeSubscription.unsubscribe();\n                    this.resizeSubscription = undefined;\n                }\n\n            }\n        });\n    }\n\n    requestFullscreen() {\n        const doc = window.document;\n        const docEl = doc.documentElement;\n        const requestFullScreen = docEl[\"requestFullscreen\"] || docEl[\"mozRequestFullScreen\"] || docEl[\"webkitRequestFullScreen\"] || docEl[\"msRequestFullscreen\"];\n        if (requestFullScreen) {\n            requestFullScreen.call(docEl);\n        }\n    }\n\n    cancelFullscreen() {\n        const doc = window.document;\n        const cancelFullScreen = doc[\"exitFullscreen\"] || doc[\"mozCancelFullScreen\"] || doc[\"webkitExitFullscreen\"] || doc[\"msExitFullscreen\"];\n        if (cancelFullScreen) {\n            cancelFullScreen.call(doc);\n        }\n    }\n\n    isFullscreen() {\n        const doc = window.document;\n        return doc[\"fullscreenElement\"] || doc[\"mozFullScreenElement\"] || doc[\"webkitFullscreenElement\"] || doc[\"msFullscreenElement\"];\n    }\n\n    toggleFullscreen() {\n        if (!this.isFullscreen()) {\n            this.requestFullscreen();\n        }\n        else {\n            this.cancelFullscreen();\n        }\n    }\n}","<div class=\"btn-toolbar\">\n    <div class=\"btn-group\" [sq-action-buttons]=\"{items: [action]}\"></div>\n</div>","import {Component, OnInit, OnDestroy, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\n\n@Component({\n    selector: \"sq-network-activity\",\n    templateUrl: \"./network-activity.html\",\n    styleUrls: [\"./network-activity.scss\"]\n})\nexport class BsNetworkActivity implements OnInit, OnDestroy {\n    subscription: Subscription | undefined;\n    active: boolean;\n    hidden: boolean;\n\n    constructor(\n        private notificationsService: NotificationsService,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnInit() {\n        this.unbind();\n        this.bind();\n    }\n\n    ngOnDestroy() {\n        this.unbind();\n    }\n\n    bind() {\n        this.subscription = this.notificationsService.events.subscribe(\n            (value) => {\n                this.active = this.notificationsService.get(\"network\") > 0;\n                setTimeout(() => this.changeDetectorRef.markForCheck(), 0); // Value can switch synchronously => this can cause \"Expression has changed\" error\n            });\n    }\n\n    unbind() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n            this.subscription = undefined;\n        }\n    }\n\n}","<div class=\"btn-toolbar\">\n    <div class=\"btn-group\">\n        <div class=\"btn-text\" title=\"{{'msg#statusbar.networkActivity' | sqMessage}}\">\n            <span class=\"fas fa-bolt\" [ngClass]=\"{'blink': active}\"></span>\n        </div>\n    </div>\n</div>","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsFullscreenActivator} from \"./fullscreen-activator/fullscreen-activator\";\nimport {BsNetworkActivity} from \"./network-activity/network-activity\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        BsActionModule,\n        UtilsModule,\n    ],\n    declarations: [\n        BsFullscreenActivator, BsNetworkActivity,\n    ],\n    exports: [\n        BsFullscreenActivator, BsNetworkActivity,\n    ]\n})\nexport class BsStatusBarModule {\n}\n","export default {\n    \"statusBar\": {\n        \"fullscreenTitleEnter\": \"Fullscreen\",\n        \"fullscreenTitleExit\": \"Exit fullscreen\",\n        \"networkActivity\": \"Network activity\"\n    }\n};\n","export default {\n    \"statusBar\": {\n        \"fullscreenTitleEnter\": \"Plein écran\",\n        \"fullscreenTitleExit\": \"Quitter le mode plein écran\",\n        \"networkActivity\": \"Activité reseau\"\n    }\n};\n","export default {\n    \"statusBar\": {\n        \"fullscreenTitleEnter\": \"Vollbildmodus\",\n        \"fullscreenTitleExit\": \"Volbildmodus verlassen\",\n        \"networkActivity\": \"Netzwerk-Aktivität\"\n    }\n};\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵproperty","i0.ɵɵpropertyInterpolate"],"mappings":"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"}