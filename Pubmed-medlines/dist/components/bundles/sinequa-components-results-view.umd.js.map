{"version":3,"file":"sinequa-components-results-view.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/components/results-view/results-view.service.ts","../projects/components/results-view/bootstrap/results-grid-view/results-grid-view.html","../projects/components/results-view/bootstrap/results-grid-view/results-grid-view.ts","../projects/components/results-view/bootstrap/results-view-selector/results-view-selector.ts","../projects/components/results-view/bootstrap/results-view-selector/results-view-selector.html","../../projects/components/results-view/bootstrap/results-view-module.ts","../../projects/components/results-view/messages/en.ts","../../projects/components/results-view/messages/fr.ts","../../projects/components/results-view/messages/de.ts","../../projects/components/results-view/messages/index.ts","../../../projects/components/results-view/sinequa-components-results-view.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable, Inject, InjectionToken } from \"@angular/core\";\nimport { Router, ActivatedRoute, NavigationEnd } from \"@angular/router\";\nimport { Subject, Observable } from \"rxjs\";\nimport { Utils } from '@sinequa/core/base';\nimport { SearchService } from '@sinequa/components/search';\nimport { Query } from '@sinequa/core/app-utils';\n\n/**\n * Configuration of a Results View\n */\nexport interface ResultsView {\n    /** Name of the results view */\n    name: string;\n    /** Type of the results view (not used internally, but may be useful if multiple views share a common component) */\n    type: string;\n    /** How the results view should be displayed (default to the name) */\n    display?: string;\n    /** Icon class for the results view */\n    icon?: string;\n    /** List of tab for which this tab can be displayed (defaults to all if undefined) */\n    includedTabs?: string[];\n    /** List of tab for which this tab is excluded (defaults to none if undefined) */\n    excludedTabs?: string[];\n    /**\n     * Method called when selecting this results view. It can be used to modify the search query\n     * when a view has specific data to display. If the method returns true, then selecting this view\n     * triggers a search and the view selection becomes effective upon results. If the method results false,\n     * (or if the method is undefined), then selecting this view does not trigger a new search\n     * and the view selection is immediate.\n     */\n    beforeSearch?: (query: Query, previousView: ResultsView) => boolean;\n}\n\nexport interface ResultsViewEvent {\n    type: \"before-select\" | \"after-select\" | \"select-cancelled\";\n}\n\nexport interface ResultsViewBeforeSelectEvent extends ResultsViewEvent {\n    type: \"before-select\";\n    view: ResultsView;\n    promises: Promise<boolean>[];\n}\n\nexport interface ResultsViewAfterSelectEvent extends ResultsViewEvent {\n    type: \"after-select\";\n    view: ResultsView;\n}\n\nexport interface ResultsViewSelectCancelledEvent extends ResultsViewEvent {\n    type: \"select-cancelled\";\n    view: ResultsView;\n}\n\nexport type ResultsViewEvents =\n    ResultsViewBeforeSelectEvent |\n    ResultsViewAfterSelectEvent |\n    ResultsViewSelectCancelledEvent;\n\nexport const RESULTS_VIEWS = new InjectionToken<ResultsView[]>(\"RESULTS_VIEWS\");\n//export const DEFAULT_VIEW = new InjectionToken<ResultsView>(\"DEFAULT_VIEW\");\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ResultsViewService {\n\n    protected _resultsView : ResultsView;\n    protected readonly _resultsViews : ResultsView[];\n\n    protected _resultsViewSelected = new Subject<ResultsView>();\n    protected _events = new Subject<ResultsViewEvents>();\n\n    protected pendingView: ResultsView | undefined;\n\n    /**\n     * Constructor: Expects the configuration for a list of views and\n     * one default view. These views can be set when importing the module in the AppModule\n     * with the ResultsViewModule.forRoot() method.\n     */\n    constructor(\n       // @Inject(DEFAULT_VIEW) public defaultView: ResultsView,\n        @Inject(RESULTS_VIEWS) resultsViews: ResultsView[],\n        protected router: Router,\n        protected route: ActivatedRoute,\n        protected searchService: SearchService\n    ) {\n        this._resultsViews = resultsViews;\n       // this._resultsView = this.defaultView;\n\n        /**\n         * Listener triggered whenever the URL changes\n         */\n        this.router.events.subscribe(event => {\n            if (event instanceof NavigationEnd) {\n                this.handleNavigation();\n            }\n        });\n\n        /**\n         * Listener triggered whenever new results come in.\n         * Some views must be displayed after a search, hence the\n         * pendingView flag.\n         */\n        this.searchService.resultsStream.subscribe(results => {\n            if(this.pendingView) {\n                this.searchService.queryStringParams.view = this.pendingView.name;\n                this.searchService.navigate({skipSearch: true});\n                this.pendingView = undefined;\n            }\n        });\n\n        // Automatically switch results views, if we go to a tab that has specific list of views\n        this.searchService.events.subscribe(event => {\n            // Event called just before the query for the new tab is searched\n            if(event.type === \"before-select-tab\" && event.query.tab) {\n                const views = this.getIncludedViews(event.query.tab);\n                // If there are views for this tab and they don't include the current one...\n                if(views.length > 0 && !views.includes(this.resultsView)) {\n                    // Set the view as pending\n                    this.pendingView = views[0];\n                    // Modify the query if needed\n                    if(this.pendingView.beforeSearch) {\n                        this.pendingView.beforeSearch(event.query, this.resultsView);\n                    }\n                }\n            }\n        })\n    }\n\n\n    // GETTERS\n\n    public get resultsViewSelected(): Observable<ResultsView> {\n        return this._resultsViewSelected;\n    }\n\n    public get events(): Observable<ResultsViewEvents> {\n        return this._events;\n    }\n\n    public get resultsView(): ResultsView {\n        return this._resultsView;\n    }\n\n    public get views(): ResultsView[] {\n        return this._resultsViews;\n    }\n\n    // EVENT HANDLERS\n\n    /**\n     * Navigate to a new URL including the given results view's name\n     * @param view \n     */\n    protected navigate(view: ResultsView) {\n        let waitForResults = !!view.beforeSearch;\n        if(view.beforeSearch) {\n            waitForResults = view.beforeSearch(this.searchService.query, this.resultsView);\n        }\n        if(!waitForResults) {\n            // We switch view immediately via the search service (which centralizes the navigation)\n            this.searchService.queryStringParams.view = view.name;\n            this.searchService.navigate({skipSearch: true});\n        }\n        else {\n            // We set the view as \"pending\", that is waiting for new results to come in\n            this.pendingView = view;\n            this.searchService.search();\n        }\n    }\n\n    /**\n     * Responds to a change in the URL: Sets the results view if the URL\n     * specifies a different results view name.\n     */\n    protected handleNavigation() {\n        const url = Utils.makeURL(this.router.url);\n        const view = this.getView(url.searchParams.get(\"view\"));\n        if(view && view !== this.resultsView) {\n            this.searchService.queryStringParams.view = view.name; // Needed when refreshing the page\n            this.setResultsView(view);\n        }\n    }\n\n    /**\n     * Sets the results view and emits an event\n     * @param view \n     */\n    protected setResultsView(view: ResultsView) {\n        this._resultsView = view;\n        this._events.next({type: \"after-select\", view});\n        this._resultsViewSelected.next(view);\n    }\n\n\n    // PUBLIC API\n\n    /**\n     * Selects the given results view. This method is asynchronous:\n     * - The selected results view might modify the query before being displayed\n     * - The view selection works with a navigation via the router (adding the view name to the URL)\n     * @param view \n     */\n    public selectResultsView(view: ResultsView) {\n        if (view) {\n            // Raise before event...\n            const beforeEvent: ResultsViewBeforeSelectEvent = {\n                type: \"before-select\",\n                view,\n                promises: []\n            }\n            this._events.next(beforeEvent);\n            if (beforeEvent.promises.length === 0) {\n                this.navigate(view);\n            }\n            else {\n                Promise.all(beforeEvent.promises)\n                    .then((results) => {\n                        const ok = results.every(result => result);\n                        if (ok) {\n                            this.navigate(view);\n                        }\n                        else {\n                            console.log(\"selectResultsView cancelled\");\n                            this._events.next({type: \"select-cancelled\", view});\n                        }\n                    })\n                    .catch((reason) => {\n                        console.log(\"selectResultsView error:\", reason);\n                        this._events.next({type: \"select-cancelled\", view});\n                    });\n            }\n        }\n        else {\n            console.error(\"Undefined Results View\");\n        }\n    }\n\n    /**\n     * Selects the results view with the given name. This method is asynchronous:\n     * - The selected results view might modify the query before being displayed\n     * - The view selection works with a navigation via the router (adding the view name to the URL)\n     * @param viewName \n     */\n    public selectResultsViewName(viewName: string){\n        const view = this.getView(viewName);\n        if (view) {\n            this.selectResultsView(view);\n        }\n    }\n\n    /**\n     * Returns the results view with the given name\n     * @param viewName \n     */\n    public getView(viewName): ResultsView | undefined {\n        return this.views.find(v => v.name === viewName);\n    }\n\n    /**\n     * Returns the list of results views compatible with a given tab\n     * @param tab \n     */\n    public getIncludedViews(tab?: string): ResultsView[] {\n        const views: ResultsView[] = [];\n        for (const view of this.views) {\n            const included = !!view.includedTabs\n                ? view.includedTabs.includes(tab || \"\")\n                : !view.excludedTabs || !view.excludedTabs.includes(tab || \"\");\n\n            if (included) {\n                views.push(view);\n            }\n        }\n        return views;\n    }\n\n}","<table class=\"sq-results-grid-view\">\n    <thead>\n        <tr>\n            <th class=\"sq-grid-view-checkbox\">\n                <label class=\"custom-control custom-checkbox\" title=\"{{(haveSelectedRecords ? 'msg#results.resultsGridView.unselectDocuments' : 'msg#results.resultsGridView.selectDocuments') | sqMessage}}\">\n                    <input class=\"custom-control-input\" type=\"checkbox\" [checked]=\"haveSelectedRecords\" (change)=\"toggleSelectedRecords()\">\n                    <span class=\"custom-control-label\">&#8203;</span>\n                </label>            \n            </th>\n            <th *ngFor=\"let columnData of columnsData\" scope=\"col\" [ngClass]=\"{'sq-clickable': isSortable(columnData)}\" (click)=\"setSort(columnData)\">{{columnData.config.title | sqMessage}}{{columnData.sortIndicator}}<span *ngIf=\"isSortable(columnData)\" class=\"{{columnData.sortIcon}}\"></span></th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let record of results.records\">\n            <td class=\"sq-grid-view-checkbox\">\n                <sq-result-selector [record]=\"record\"></sq-result-selector>\n            </td>\n            <ng-container *ngFor=\"let columnData of columnsData; let $index = index\">\n                <td *ngIf=\"columnData.config.renderAsHtml\" [attr.scope]=\"$index === 0 ? 'row' : null\" [innerHTML]=\"record[columnData.config.field] | sqValue:columnData.column\"></td>\n                <td *ngIf=\"!columnData.config.renderAsHtml\" [attr.scope]=\"$index === 0 ? 'row' : null\">{{record[columnData.config.field] | sqValue:columnData.column}}</td>\n            </ng-container>\n        </tr>\n    </tbody>\n</table>","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AppService, FormatService} from \"@sinequa/core/app-utils\";\nimport {CCColumn, Results} from \"@sinequa/core/web-services\";\nimport {SelectionService} from \"@sinequa/components/selection\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {ResultsView} from \"../../results-view.service\";\n\nexport interface GridView extends ResultsView {\n    columns: Column[];\n}\n\nexport interface Column {\n    active: boolean;\n    title: string;\n    field: string;\n    sortable: boolean;\n    renderAsHtml: boolean;\n}\n\nexport interface ColumnData {\n    config: Column;\n    column: CCColumn | undefined;\n    // Sorting data\n    sortIndex?: number;\n    ascending?: boolean;\n    sortIcon?: string;\n    sortIndicator?: string;\n}\n\n@Component({\n    selector: \"sq-results-grid-view\",\n    templateUrl: \"./results-grid-view.html\"\n})\nexport class BsResultsGridView implements OnChanges {\n    @Input() results: Results;\n    @Input() view: GridView;\n    private orderBy: string | undefined;\n    columnsData: ColumnData[] | undefined;\n\n    constructor(\n        public appService: AppService,\n        public searchService: SearchService,\n        public formatService: FormatService,\n        private selectionService: SelectionService) {\n    }\n\n    observeQueryFields() {\n        this.initSorts();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.columnsData) {\n            if (!!this.view.columns) {\n                this.columnsData = this.view.columns.filter(config => config.active).map(config => ({\n                    config: config,\n                    column: this.appService.getColumn(config.field)\n                }));\n                this.clearSorts();\n            }\n            else {\n                this.columnsData = [];\n            }\n        }\n        if (!!changes[\"query\"]) {\n            this.observeQueryFields();\n        }\n    }\n\n\n    toggleSelectedRecords() {\n        this.selectionService.toggleSelectedRecords();\n    }\n\n    get haveSelectedRecords(){\n        return this.selectionService.haveSelectedRecords;\n    }\n\n    getSortIndicator(columnData: ColumnData): string | undefined {\n        if (columnData.sortIndex === -1) {\n            return undefined;\n        }\n        if (this.maxSortIndex === 0) {\n            return undefined;\n        }\n        switch (columnData.sortIndex || -1 + 1) {\n            case 1: return \"\\u00B9\";\n            case 2: return \"\\u00B2\";\n            case 3: return \"\\u00B3\";\n            case 4: return \"\\u2074\";\n            case 5: return \"\\u2075\";\n            case 6: return \"\\u2076\";\n            case 7: return \"\\u2077\";\n            case 8: return \"\\u2078\";\n            case 9: return \"\\u2079\";\n            default: return \"\\u207A\";\n        }\n    }\n\n    ascendingFirst(column: Column): boolean {\n        //return this.appService.isNumber(column.field);\n        return false;\n    }\n\n    get maxSortIndex(): number {\n        let sortIndex = -1;\n        if (this.columnsData) {\n            for (const columnData of this.columnsData) {\n                if (columnData.sortIndex !== undefined && columnData.sortIndex > sortIndex) {\n                    sortIndex = columnData.sortIndex;\n                }\n            }\n        }\n        return sortIndex;\n    }\n\n    _setSort(columnData: ColumnData, ascending: boolean) {\n        const previousSortIndex = columnData.sortIndex;\n        if (previousSortIndex === -1) {\n            columnData.sortIndex = this.maxSortIndex + 1;\n        }\n        columnData.ascending = ascending;\n        columnData.sortIcon = columnData.ascending ? \"fas fa-caret-up\" : \"fas fa-caret-down\";\n        columnData.sortIndicator = this.getSortIndicator(columnData);\n        if (previousSortIndex === -1) {\n            if (this.columnsData) {\n                for (const columnData1 of this.columnsData) {\n                    columnData1.sortIndicator = this.getSortIndicator(columnData1);\n                }\n            }\n        }\n    }\n\n    _clearSort(columnData: ColumnData) {\n        const previousSortIndex = columnData.sortIndex || -1;\n        columnData.sortIndex = -1;\n        columnData.ascending = false;\n        columnData.sortIcon = \"fas fa-sort\";\n        columnData.sortIndicator = undefined;\n        if (previousSortIndex !== -1) {\n            if (this.columnsData) {\n                for (const columnData1 of this.columnsData) {\n                    if (columnData1.sortIndex !== undefined && columnData1.sortIndex > previousSortIndex) {\n                        columnData1.sortIndex--;\n                    }\n                    columnData1.sortIndicator = this.getSortIndicator(columnData1);\n                }\n            }\n        }\n    }\n\n    clearSorts() {\n        if (this.columnsData) {\n            for (const columnData of this.columnsData) {\n                this._clearSort(columnData);\n            }\n        }\n    }\n\n    isSortable(columnData: ColumnData): boolean {\n        return !!columnData && columnData.config.sortable && this.appService.isSortable(columnData.config.field);\n    }\n\n    initSorts() {\n        if (this.searchService.query.orderBy === this.orderBy) {\n            return;\n        }\n        this.orderBy = this.searchService.query.orderBy;\n        this.clearSorts();\n        if (!!this.orderBy) {\n            const parts = Utils.split(this.orderBy, \",\");\n            for (const part of parts) {\n                const tokens = Utils.split(part, \" \");\n                if (tokens.length > 0) {\n                    const field = tokens[0];\n                    if (this.columnsData) {\n                        const columnData = this.columnsData.find(value => Utils.eqNC(field, value.config.field));\n                        if (columnData && this.isSortable(columnData)) {\n                            this._setSort(columnData, tokens.length > 1 ? Utils.eqNC(tokens[1], \"asc\") : true);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    setSort(columnData: ColumnData) {\n        if (this.isSortable(columnData)) {\n            if (columnData.sortIndex !== -1) {\n                if (this.ascendingFirst(columnData.config)) {\n                    if (columnData.ascending) {\n                        this._setSort(columnData, false);\n                    }\n                    else {\n                        this._clearSort(columnData);\n                    }\n                }\n                else {\n                    if (columnData.ascending) {\n                        this._clearSort(columnData);\n                    }\n                    else {\n                        this._setSort(columnData, true);\n                    }\n                }\n            }\n            else {\n                this._setSort(columnData, this.ascendingFirst(columnData.config));\n            }\n            const orderBy: string[] = [];\n            if (this.columnsData) {\n                for (let sortIndex = 0; ; sortIndex++) {\n                    const columnData = this.columnsData.find(columnData => columnData.sortIndex === sortIndex);\n                    if (!columnData) {\n                        break;\n                    }\n                    if (orderBy.length !== 0) {\n                        orderBy.push(\",\");\n                    }\n                    orderBy.push(columnData.config.field);\n                    if (!columnData.ascending) {\n                        orderBy.push(\" desc\");\n                    }\n                }\n            }\n            if (orderBy.length === 0) {\n                this.searchService.query.orderBy = this.orderBy = undefined;\n            }\n            else {\n                this.searchService.query.orderBy = this.orderBy = orderBy.join(\"\");\n            }\n            this.searchService.search();\n        }\n    }\n\n}","import {Component, Input, OnChanges, SimpleChanges, OnDestroy} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Query} from \"@sinequa/core/app-utils\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {ResultsViewService, ResultsView} from \"../../results-view.service\";\nimport {Action} from \"@sinequa/components/action\";\nimport {Subscription} from 'rxjs';\n\n\n@Component({\n    selector: \"sq-results-view-selector\",\n    templateUrl: \"./results-view-selector.html\"\n})\nexport class BsResultsViewSelector implements OnChanges, OnDestroy {\n    @Input() query: Query;  // Needed to get tab, and possibly include/exclude results views\n    @Input() results: Results;  // Needed to detect Changes\n    // UI inputs\n    @Input() rightAligned: boolean;\n    @Input() useDropdownMenu: boolean = true;\n    @Input() size: string;\n\n    private viewAction: Action | Action[] | undefined;\n    items: Action[];\n\n    constructor(\n        public resultsViewService : ResultsViewService\n    ) {\n        this._subscription = this.resultsViewService.resultsViewSelected.subscribe(\n            (view : ResultsView) => {\n                this.setCurrentViewAction();\n        });\n    }\n\n    private _subscription: Subscription;\n    ngOnDestroy(){\n        if(this._subscription){\n            this._subscription.unsubscribe();\n        }\n    }\n\n    private setCurrentViewAction() {\n        if (!!this.viewAction && !!this.resultsViewService.resultsView) {\n            if (!Utils.isArray(this.viewAction)) {\n                const view = this.resultsViewService.views.find(view => Utils.eqNC(this.resultsViewService.resultsView.name, view.name));\n                if (view) {\n                    this.viewAction.text = view.display || view.name;\n                    this.viewAction.icon = view.icon || 'fas fa-list';\n                }\n                else {\n                    this.viewAction.text = \"msg#results.unselectableViewDisplay\";\n                    this.viewAction.icon = \"far fa-square fa-fw\";\n                }\n                this.viewAction.messageParams = {values: {text: this.viewAction.text}}; // for title\n            }\n            else {\n                this.viewAction.forEach(action => {\n                    action.selected = Utils.eqNC(action.data.name, this.resultsViewService.resultsView.name);\n                });\n            }\n        }\n    }\n\n    private buildViewAction() {\n        if (this.resultsViewService.views.length <= 1) {\n            this.viewAction = undefined;\n            this.items = [];\n            return;\n        }\n        const includedViews = this.resultsViewService.getIncludedViews(this.query.tab);\n        if (includedViews.length <= 1) {\n            this.viewAction = undefined;\n            this.items = [];\n            return;\n        }\n        if (this.useDropdownMenu) {\n            this.viewAction = new Action({\n                title: \"msg#results.viewTitle\",\n                children: includedViews.map(view => new Action({\n                    text: view.display,\n                    icon: view.icon,\n                    data: view,\n                    action: (item: Action, event: Event) => {\n                        this.selectView(item.data);\n                    }\n                }))\n            });\n            this.items = [this.viewAction];\n        }\n        else {\n            this.viewAction = [];\n            for (const view of includedViews) {\n                this.viewAction.push(new Action({\n                    icon: view.icon,\n                    title: view.display,\n                    data: view,\n                    action: (item: Action, event: Event) => {\n                        this.selectView(item.data);\n                    }\n                }));\n            }\n            this.items = this.viewAction;\n        }\n        this.setCurrentViewAction();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.buildViewAction();\n    }\n\n    selectView(view: ResultsView) {\n        this.resultsViewService.selectResultsView(view);\n    }\n}","<div [sq-action-buttons]=\"{items: items, autoAdjust: true, rightAligned: rightAligned, size: size}\"></div>","import {NgModule, ModuleWithProviders} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {LoadComponentModule} from \"@sinequa/core/load-component\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\n\nimport {RESULTS_VIEWS, ResultsView} from \"../results-view.service\";\n\nimport {BsResultsViewSelector} from \"./results-view-selector/results-view-selector\";\nimport {BsResultsGridView} from \"./results-grid-view/results-grid-view\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n\n        LoadComponentModule,\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsActionModule,\n        BsSelectionModule\n    ],\n    declarations: [\n        BsResultsViewSelector,\n        BsResultsGridView,\n    ],\n    exports: [\n        BsResultsViewSelector,\n        BsResultsGridView,\n    ],\n})\nexport class BsResultsViewModule {\n    public static forRoot(resultsViews: ResultsView[], defaultView: ResultsView): ModuleWithProviders<BsResultsViewModule> {\n        return {\n            ngModule: BsResultsViewModule,\n            providers: [\n                {\n                    provide: RESULTS_VIEWS,\n                    useValue: resultsViews\n                },\n              /*  {\n                    provide: DEFAULT_VIEW,\n                    useValue: defaultView\n                } */\n            ]\n        };\n    }\n}\n","export default {\n    \"results\": {\n        \"viewTitle\": \"View: {text}\",\n        \"unselectableViewDisplay\": \"<Other>\",\n        \"resultsListView\": {\n            \"display\": \"List\",\n            \"selectDocument\": \"Select document\",\n            \"unselectDocument\": \"Unselect document\",\n            \"previewPopup\": \"Document Navigator\",\n            \"previewInCurrentPage\": \"Document Navigator (in current page)\",\n            \"previewInNewTab\": \"Document Navigator (in new tab)\",\n            \"showMetadata\": \"Details\",\n            \"showLabels\": \"Labels\"\n        },\n        \"resultsGridView\": {\n            \"display\": \"Grid\",\n            \"selectDocument\": \"Select document\",\n            \"unselectDocument\": \"Unselect document\",\n            \"selectDocuments\": \"Select documents\",\n            \"unselectDocuments\": \"Unselect documents\"\n        },\n        \"viewPageSize\": \"Number of results per page\",\n        \"viewUpdateApply\": \"Apply\",\n        \"warningNoViewForTab\": \"The '{tab}' tab has no associated result views.\",\n        \"warningCannotDisplayTabOnView\": \"The '{tab}' tab cannot be displayed using '{view}' view because it is not included in the view configuration.\",\n\n        \"resultsAllTab\": \"All\",\n        \"resultsTextTab\": \"Text\",\n        \"results_all_tab\": \"All\",\n        \"results_text_tab\": \"Text\",\n    }\n};\n","export default {\n    \"results\": {\n        \"viewTitle\": \"Vue : {text}\",\n        \"unselectableViewDisplay\": \"<Autre>\",\n        \"resultsListView\": {\n            \"display\": \"Liste\",\n            \"selectDocument\": \"Sélectionner le document\",\n            \"unselectDocument\": \"Désélectionner le document\",\n            \"previewPopup\": \"Document Navigator\",\n            \"previewInCurrentPage\": \"Document Navigator (dans la page courante)\",\n            \"previewInNewTab\": \"Document Navigator (dans un nouvel onglet)\",\n            \"showMetadata\": \"Détails\",\n            \"showLabels\": \"Libellés\"\n        },\n        \"resultsGridView\": {\n            \"display\": \"Grille\",\n            \"selectDocument\": \"Sélectionner le document\",\n            \"unselectDocument\": \"Désélectionner le document\",\n            \"selectDocuments\": \"Sélectionner les documents\",\n            \"unselectDocuments\": \"Désélectionner les documents \"\n        },\n        \"viewPageSize\": \"Nombre de résultats par page\",\n        \"viewUpdateApply\": \"Appliquer\",\n        \"warningNoViewForTab\": \"L'onglet '{tab}' n'est associé à aucune vue.\",\n        \"warningCannotDisplayTabOnView\": \"L'onglet '{tab}' ne peut pas être affiché dans la vue '{view}' car il n'est pas inclus dans la configuration de la vue.\",\n\n        \"resultsAllTab\": \"Tous\",\n        \"resultsTextTab\": \"Texte\",\n        \"results_all_tab\": \"Tous\",\n        \"results_text_tab\": \"Texte\",\n    }\n};\n","export default {\n    \"results\": {\n        \"viewTitle\": \"Anzeige: {text}\",\n        \"unselectableViewDisplay\": \"<Andere>\",\n        \"resultsListView\": {\n            \"display\": \"Liste\",\n            \"selectDocument\": \"Dokument auswählen\",\n            \"unselectDocument\": \"Dokumentauswahl aufheben\",\n            \"previewPopup\": \"[Dokument-Navigator]\",\n            \"previewInCurrentPage\": \"[Dokument-Navigator (auf der aktuellen Seite)]\",\n            \"previewInNewTab\": \"[Dokument-Navigator (in einem neuen Reiter)]\",\n            \"showMetadata\": \"[Metadaten]\",\n            \"showLabels\": \"[Etiketten]\"\n        },\n        \"resultsGridView\": {\n            \"display\": \"Tabelle\",\n            \"selectDocument\": \"Dokument auswählen\",\n            \"unselectDocument\": \"Dokumentauswahl aufheben\",\n            \"selectDocuments\": \"Dokumente auswählen\",\n            \"unselectDocuments\": \"Dokumentauswahl aufheben\"\n        },\n        \"viewPageSize\": \"Anzahl der Ergebnisse pro Seite\",\n        \"viewUpdateApply\": \"Anwenden\",\n        \"warningNoViewForTab\": \"Der Reiter '{tab}' hat keine zugewiesenen Ergebnisansichten.\",\n        \"warningCannotDisplayTabOnView\": \"Der Reiter '{tab}' kann nicht mit der Ansicht '{view}' angezeigt werden, da diese nicht in der Ansichtskonfiguration enthalten ist.\",\n\n        \"resultsAllTab\": \"Alle\",\n        \"resultsTextTab\": \"Text\",\n        \"results_all_tab\": \"Alle\",\n        \"results_text_tab\": \"Text\",\n    }\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enSelection, frSelection, deSelection} from \"@sinequa/components/selection\";\n\nimport _enResultsView from \"./en\";\nimport _frResultsView from \"./fr\";\nimport _deResultsView from \"./de\";\n\nconst enResultsView = Utils.merge({}, _enResultsView, enSearch, enSelection);\nconst frResultsView = Utils.merge({}, _frResultsView, frSearch, frSelection);\nconst deResultsView = Utils.merge({}, _deResultsView, deSearch, deSelection);\n\nexport { enResultsView, frResultsView, deResultsView };\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["InjectionToken","Subject","NavigationEnd","Utils","Injectable","Inject","i0.ɵɵelement","i0.ɵɵclassMap","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵtext","i0.ɵɵtemplate","i0.ɵɵelementEnd","i0.ɵɵproperty","i0.ɵɵadvance","i0.ɵɵtextInterpolate2","i0.ɵɵattribute","i0.ɵɵtextInterpolate","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵpropertyInterpolate","Component","Input","Action","CommonModule","LoadComponentModule","IntlModule","ValidationModule","UtilsModule","BsActionModule","BsSelectionModule","NgModule","enSearch","enSelection","frSearch","frSelection","deSearch","deSelection"],"mappings":"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"}