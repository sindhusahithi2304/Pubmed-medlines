{"version":3,"file":"sinequa-components-baskets.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/components/baskets/baskets.service.ts","../projects/components/baskets/bootstrap/edit-basket/edit-basket.ts","../projects/components/baskets/bootstrap/edit-basket/edit-basket.html","../projects/components/baskets/bootstrap/manage-baskets/manage-baskets.html","../projects/components/baskets/bootstrap/manage-baskets/manage-baskets.ts","../projects/components/baskets/bootstrap/select-basket/select-basket.html","../projects/components/baskets/bootstrap/select-basket/select-basket.ts","../projects/components/baskets/bootstrap/result-baskets/result-baskets.ts","../projects/components/baskets/bootstrap/result-baskets/result-baskets.html","../projects/components/baskets/bootstrap/baskets-menu/baskets-menu.component.html","../projects/components/baskets/bootstrap/baskets-menu/baskets-menu.component.ts","../projects/components/baskets/bootstrap/facet-baskets/facet-baskets.component.html","../projects/components/baskets/bootstrap/facet-baskets/facet-baskets.component.ts","../../projects/components/baskets/bootstrap/baskets.module.ts","../../projects/components/baskets/messages/en.ts","../../projects/components/baskets/messages/fr.ts","../../projects/components/baskets/messages/de.ts","../../projects/components/baskets/messages/index.ts","../../../projects/components/baskets/sinequa-components-baskets.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {Injectable, Inject, InjectionToken, Type, OnDestroy} from \"@angular/core\";\nimport {Observable, Subject} from \"rxjs\";\nimport {UserSettingsWebService, AuditEvent, AuditEvents} from \"@sinequa/core/web-services\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SelectionService} from \"@sinequa/components/selection\";\nimport {Action} from \"@sinequa/components/action\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {Query} from '@sinequa/core/app-utils';\n\n// Basket interface (from models/UserSettings)\nexport interface Basket {\n    name: string;\n    description?: string;\n    ids?: string[];\n}\n\n\n// Audit Events (from models/Audit)\nexport const enum BasketEventType {\n    Loaded = \"Basket_Loaded\",\n    Add = \"Basket_Add\",\n    Delete = \"Basket_Delete\",\n    DeleteAll = \"Basket_DeleteAll\",\n    Update = \"Basket_Update\",\n    Rename = \"Basket_Rename\",\n\n    AddDoc = \"Basket_AddDoc\",\n    RemoveDoc = \"Basket_RemoveDoc\",\n    Open = \"Basket_Open\",\n    ExportCSV = \"Basket_ExportCSV\",\n    Patched = \"Basked_Patched\"\n}\n\n\n// Types of events triggering a change event\nexport const BASKET_CHANGE_EVENTS = [\n    BasketEventType.Loaded,\n    BasketEventType.Add,\n    BasketEventType.Delete,\n    BasketEventType.DeleteAll,\n    BasketEventType.Update,\n    BasketEventType.Rename\n];\n\n\n// CRUD Events\nexport interface BasketChangeEvent {\n    type: BasketEventType;\n    basket?: Basket;\n}\n\n\n// Model expected by the SelectBasket Modal.\n// The filter allows to filter out baskets from the complete list\nexport interface SelectBasketModel {\n    basket: Basket | undefined;\n    basketFilter?: (basket: Basket) => boolean;\n    allowNew?: boolean;\n}\n\n// Model expected by the ManageBaskets Modal.\nexport interface ManageBasketsModel {\n    baskets: Basket[];\n    auditEvents?: AuditEvent[];\n}\n\n\n/**\n * The modal types are unknown to this service.\n * The module using this service must provide these components\n * in their forRoot() method\n *\n * Example below:\n *\n *  public static forRoot(): ModuleWithProviders<BasketsModule> {\n        return {\n            ngModule: BasketsModule,\n            providers: [\n                {\n                    provide: BASKET_COMPONENTS,\n                    useValue: {\n                        selectBasketModal: SelectBasket,\n                        editBasketModal: EditBasket,\n                        manageBasketsModal: ManageBaskets\n                    }\n                },\n                BasketsService\n            ]\n        };\n    }\n */\nexport interface BasketComponents {\n    selectBasketModal: Type<any>;\n    editBasketModal: Type<any>;\n    manageBasketsModal: Type<any>;\n}\nexport const BASKET_COMPONENTS = new InjectionToken<BasketComponents>('BASKET_COMPONENTS');\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class BasketsService implements OnDestroy {\n\n    private readonly _events = new Subject<BasketChangeEvent>();\n    private readonly _changes = new Subject<BasketChangeEvent>();\n\n    // An application may want to alter the action (icon, etc.)\n    public selectedRecordsAction: Action;\n\n    constructor(\n        public userSettingsService: UserSettingsWebService,\n        public searchService: SearchService,\n        public modalService: ModalService,\n        public selectionService: SelectionService,\n        @Inject(BASKET_COMPONENTS) public basketComponents: BasketComponents\n    ){\n        // Listen to the user settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Menus need to be rebuilt\n            this._events.next({type: BasketEventType.Loaded});\n        });\n        // Listen to own events, to trigger change events\n        this._events.subscribe(event => {\n            if(BASKET_CHANGE_EVENTS.indexOf(event.type) !== -1){\n                this.changes.next(event);\n            }\n        });\n        // Register a basket action onto the selection service, so that users can add/remove to/from baskets when documents are selected\n        this.selectedRecordsAction = this.buildBasketsAction();\n    }\n\n    // GETTERS\n\n    /**\n     * Returns the list of this user's baskets.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of baskets if it does not already exist.\n     */\n    public get baskets() : Basket[] {\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"baskets\"])\n            this.userSettingsService.userSettings[\"baskets\"] = [];\n        return this.userSettingsService.userSettings[\"baskets\"];\n    }\n\n    /**\n     * Triggers any event among BasketChangeEvent\n     * (use for fine-grained control of baskets workflow)\n     */\n    public get events() : Subject<BasketChangeEvent> {\n        return this._events;\n    }\n\n    /**\n     * Triggers when events affect the list of baskets\n     * (use to refresh basket menus)\n     * Cf. CHANGE_EVENTS list\n     */\n    public get changes() : Subject<BasketChangeEvent> {\n        return this._changes;\n    }\n\n    /**\n     * @returns true if there is at least one basket\n     */\n    public get hasBasket(): boolean {\n        return this.baskets.length > 0;\n    }\n\n    /**\n     * @returns a basket with the given name or null if it does not exist\n     * @param name\n     */\n    public basket(name: string): Basket | undefined {\n        const i = this.basketIndex(name);\n        return i>= 0? this.baskets[i] : undefined;\n    }\n\n    private basketIndex(name: string): number {\n        for (let i = 0, ic = this.baskets.length; i < ic; i++) {\n            const basket = this.baskets[i];\n            if (basket && basket.name === name) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n\n    // CRUD\n\n    /**\n     * Creates a new basket unless it already exists.\n     * Emits an Basket event.\n     * Update the data on the server.\n     * @param basket the basket to create\n     * @returns true if basket was created\n     */\n    public createBasket(basket: Basket) : boolean {\n\n        if(this.basketIndex(basket.name) >= 0)\n            return false; // This basket already exists\n\n        this.baskets.unshift(basket);\n        this._events.next({type : BasketEventType.Add, basket: basket});\n        this.patchBaskets([{\n            type: BasketEventType.Add,\n            detail: {\n                basket: basket.name\n            }\n        }]);\n        return true;\n    }\n\n    /**\n     * Update the basket at the given index, unless a basket with the same name\n     * already exists in the list of baskets.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param basket the basket to update\n     * @param index the index at which to update the basket\n     * @returns true if basket was updated\n     */\n    public updateBasket(basket: Basket, index : number) : boolean {\n\n        const prevIndex = this.basketIndex(basket.name);\n        if(prevIndex !== -1 && index !== prevIndex)\n            return false; // A basket with the same name exists at a different index\n\n        if(index >= 0 && index < this.baskets.length){\n\n            this.baskets.splice(index, 1, basket);\n            this._events.next({type : BasketEventType.Update, basket: basket});\n            this.patchBaskets([\n                {\n                    type: BasketEventType.Update,\n                    detail: {\n                        basket: basket.name\n                    }\n                }\n            ], true);\n            return true;\n\n        }\n        return false;   // This basket does not exist\n    }\n\n    /**\n     * Updates the full list of Baskets.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param baskets the new list of baskets\n     * @param auditEvents the list of audit events to log\n     */\n    public updateBaskets(baskets: Basket[], auditEvents?: AuditEvents) : boolean {\n        Utils.arraySet(this.baskets, baskets);\n        this._events.next({type : BasketEventType.Update});\n        this.patchBaskets(auditEvents, true);\n        return true;\n    }\n\n    /**\n     * Deletes the given Basket (based on its name)\n     * Emits an Basket event.\n     * Update the data on the server.\n     * @param basket\n     * @returns true if basket was deleted\n     */\n    public deleteBasket(basket: Basket) : boolean {\n\n        const index = this.basketIndex(basket.name);\n\n        if(index === -1)\n            return false; // Nothing to delete\n\n        this.baskets.splice(index, 1);\n        this._events.next({type : BasketEventType.Delete, basket: basket});\n        this.patchBaskets([\n            {\n                type: BasketEventType.Delete,\n                detail: {\n                    savedquery: basket.name\n                }\n            }\n        ], true);\n        return true;\n    }\n\n    /**\n     * Adds one or more documents to a basket.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param name basket to which to add the document(s)\n     * @param ids id(s) of the document(s) to add to the basket\n     * @param skipPatch if true, will not update the data on the server (use for bulk updates)\n     * @returns true if the document was added\n     */\n    public addToBasket(name: string, ids: string | string[], skipPatch?: boolean): boolean {\n        if (!ids) {\n            return false;\n        }\n        const basket = this.basket(name);\n        if (!basket) return false;\n        if (!basket.ids) basket.ids = [];\n        if (Utils.isArray(ids)) {\n            for (let i = 0, ic = ids.length; i < ic; i++) {\n                const id = ids[i];\n                if (basket.ids.indexOf(id) === -1) {\n                    basket.ids.push(id);\n                }\n            }\n        }\n        else {\n            if (basket.ids.indexOf(<string>ids) === -1) {\n                basket.ids.push(<string>ids);\n            }\n        }\n        if(!skipPatch){\n            this._events.next({type : BasketEventType.AddDoc});\n            this.patchBaskets({\n                type: BasketEventType.AddDoc,\n                detail: {\n                    basket: name,\n                    \"doc-id\": basket.ids[0]\n                }\n            });\n        }\n        return true;\n    }\n\n    /**\n     * Removes one or more documents from a basket.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param name basket from which to remove the document(s)\n     * @param ids id(s) of the document(s) to remove from the basket\n     * @param skipPatch if true, will not update the data on the server (use for bulk updates)\n     * @returns true if the document was removed\n     */\n    public removeFromBasket(name: string, ids: string | string[], skipPatch?: boolean): boolean {\n        if (!ids) {\n            return false;\n        }\n        const basket = this.basket(name);\n        if (!basket) return false;\n        if (!basket.ids) basket.ids = [];\n        if (Utils.isArray(ids)) {\n            for (let i = 0, ic = ids.length; i < ic; i++) {\n                const id = ids[i];\n                const index = basket.ids.indexOf(id);\n                if (index !== -1) {\n                    basket.ids.splice(index, 1);\n                }\n            }\n        }\n        else {\n            const index = basket.ids.indexOf(<string>ids);\n            if (index !== -1) {\n                basket.ids.splice(index, 1);\n            }\n        }\n        if(!skipPatch){\n            this._events.next({type : BasketEventType.RemoveDoc});\n            this.patchBaskets({\n                type: BasketEventType.RemoveDoc,\n                detail: {\n                    basket: name,\n                    \"doc-id\": basket.ids[0]\n                }\n            }, true);\n        }\n        return true;\n    }\n\n    /**\n     * Removes a document from all the baskets\n     * @param id id of the document to remove\n     */\n    public removeFromAllBaskets(id: string) : boolean {\n        const auditEvents: AuditEvent[] = [];\n        for (const basket of this.baskets) {\n            if( this.removeFromBasket(basket.name, id, true) ){\n                auditEvents.push({\n                    type: BasketEventType.RemoveDoc,\n                    detail: {\n                        basket: basket.name,\n                        \"doc-id\": id\n                    }\n                });\n            }\n        }\n        if(auditEvents.length > 0) {\n            this._events.next({type : BasketEventType.RemoveDoc});\n            this.patchBaskets(auditEvents, true);\n            return true;\n        }\n        return false;\n    }\n\n\n    /**\n     * Updates Baskets in User settings.\n     * @param auditEvents : Audit Events to be triggered\n     * @returns an Observable which can be used to trigger further events\n     */\n    private patchBaskets(auditEvents?: AuditEvents, updateSearch?: boolean): Observable<void> {\n        const obs = this.userSettingsService.patch({baskets: this.baskets}, auditEvents);\n        obs.subscribe(\n            next => {\n                this._events.next({type: BasketEventType.Patched});\n                if(updateSearch && this.searchService.query.basket) {\n                    this.searchService.search(); // Update search results to reflect the new basket content\n                }\n            },\n            error => {\n                console.error(\"Could not patch Baskets!\", error);\n        });\n        return obs;\n    }\n\n\n\n\n    // EVENT HANDLERS (Menus)\n\n    /**\n     * Uses the SearchService to perform a search returning all\n     * the documents in this basket\n     * @param basket\n     * @param path\n     * @returns the search service promise\n     */\n    public searchBasket(basket : Basket, path?: string) : Promise<boolean> {\n        const query = this.searchService.makeQuery();\n        query.basket = basket.name;\n        this.searchService.setQuery(query);\n        this._events.next({type: BasketEventType.Open, basket: basket});\n        return this.searchService.search({ path: path }, {\n            type: BasketEventType.Open,\n            detail: {\n                basket: basket.name\n            }\n        });\n    }\n\n    /**\n     * Opens a dialog allowing a user to add one (or more) document(s)\n     * to a basket.\n     * @param ids id(s) of the documents to add to a basket\n     * @param recordBaskets names of the baskets the document already belongs to\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the document was added to a basket\n     */\n    public addToBasketModal(ids: string | string[], recordBaskets?: string[])\n            : Promise<boolean> {\n        const model : SelectBasketModel = {\n            basket: undefined,\n            basketFilter: recordBaskets? b => !recordBaskets.includes(b.name) : undefined,\n            allowNew: true\n        };\n        return this.modalService\n            .open(this.basketComponents.selectBasketModal, {model: model})\n            .then(result => {\n                if (result === ModalResult.OK && model.basket) {\n                    return this.addToBasket(model.basket.name, ids);\n                }\n                return false;\n            });\n    }\n\n    /**\n     * Opens a dialog allowing a user to remove one (or more) document(s)\n     * from a basket.\n     * @param ids id(s) of the documents to remove from a basket\n     * @param recordBaskets names of the baskets the document already belongs to\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the document was removed from a basket\n     */\n    public removeFromBasketModal(ids: string | string[], recordBaskets?: string[])\n            : Promise<boolean> {\n        const model : SelectBasketModel = {\n            basket: undefined,\n            basketFilter: recordBaskets? b => recordBaskets.includes(b.name) : undefined\n        };\n        return this.modalService\n            .open(this.basketComponents.selectBasketModal, {model: model})\n            .then(result => {\n                if (result === ModalResult.OK && model.basket) {\n                    return this.removeFromBasket(model.basket.name, ids);\n                }\n                return false;\n            });\n    }\n\n    /**\n     * Opens a dialog allowing a user to create new basket.\n     * @param model the initial basket object model\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the basket was created.\n     */\n    public createBasketModal(model: Basket = {name: \"\"}) : Promise<boolean> {\n\n        return this.modalService.open(this.basketComponents.editBasketModal, {model: model})\n            .then((result) => {\n\n                if (result === ModalResult.OK) {\n                    const index = this.basketIndex(model.name);\n                    if (index !== -1) {\n\n                        return this.modalService.yesNo(\"msg#baskets.basketAlreadyExists\")\n                            .then((result) => {\n                                if (result === ModalResult.Yes) {\n                                    return this.updateBasket(model, index);\n                                }\n                                return false;\n                            });\n\n                    }\n                    else {\n\n                        return this.createBasket(model);\n\n                    }\n                }\n\n                return false;\n            });\n    }\n\n    // Not relevant as of now\n    // public editBasketModal(basket: Basket)\n\n    /**\n     * Opens a dialog allowing a user to reorganize and edit the\n     * list of baskets.\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true is the list was updated.\n     */\n    public manageBasketsModal() : Promise<boolean> {\n\n        const model: ManageBasketsModel = { baskets: Utils.copy(this.baskets) };\n\n        return this.modalService.open(this.basketComponents.manageBasketsModal, {model: model})\n            .then((result) => {\n                if (result === ModalResult.OK) {\n                    return this.updateBaskets(model.baskets, model.auditEvents);\n                }\n                return false;\n            });\n\n    }\n\n\n    private buildBasketsAction() : Action {\n        return new Action({\n            icon: \"fas fa-shopping-basket\",\n            title: \"msg#baskets.baskets\",\n            hidden: true,\n            children: [\n                new Action({\n                    text: \"msg#baskets.addToBasket\",\n                    action: (item, $event) => {\n                        this.addToBasketModal(this.selectionService.getSelectedIds());\n                    }\n                }),\n                new Action({\n                    text: \"msg#baskets.removeFromBasket\",\n                    action: (item, $event) => {\n                        this.removeFromBasketModal(this.selectionService.getSelectedIds());\n                    }\n                })\n            ],\n            updater: (action) => {\n                action.hidden = !this.selectionService.haveSelectedRecords;\n            }\n        });\n    }\n\n    makeQuery(basket: Basket): Query {\n        const query = this.searchService.makeQuery();\n        query.basket = basket.name;\n        return query;\n    }\n\n    notifyOpenBasket(basket: Basket) {\n        this._events.next({type: BasketEventType.Open, basket});\n    }\n\n    ngOnDestroy() {\n        this.events.complete();\n        this.changes.complete();\n    }\n}\n","import {Component, OnInit, OnDestroy, Inject} from \"@angular/core\";\nimport {FormBuilder, FormGroup, FormControl, Validators} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Basket} from \"../../baskets.service\";\n\n@Component({\n    selector: \"sq-edit-basket\",\n    templateUrl: \"./edit-basket.html\"\n})\nexport class BsEditBasket implements OnInit, OnDestroy {\n    nameControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n    buttons: ModalButton[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: Basket,\n        private formBuilder: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.nameControl = new FormControl(this.model.name, Validators.required);\n        this.form = this.formBuilder.group({\n            basketName: this.nameControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.model.name = this.nameControl.value;\n            }\n        );\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.form\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n}\n","<form name=\"editBasket\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#editBasket.title'\" [buttons]=\"buttons\">\n        <div class=\"form-group sq-form-group\">\n            <label for=\"basketName\">{{'msg#editBasket.name' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"basketName\" formControlName=\"basketName\" spellcheck=\"off\" sqAutofocus>\n        </div>\n    </sq-modal>\n</form>","<form name=\"manageBaskets\" novalidate>\n    <sq-modal [title]=\"'msg#manageBaskets.title'\" [buttons]=\"buttons\">\n        <div *ngIf=\"model.baskets.length\" class=\"form-group clearfix\">\n            <button type=\"button\" class=\"btn btn-secondary float-right\" (click)=\"reorder()\">{{(reordering ? \"msg#manageBaskets.edit\" : \"msg#manageBaskets.reorder\") | sqMessage}}</button>\n        </div>\n        <div class=\"form-group\">\n            <div class=\"list-group\" cdkDropList [cdkDropListData]=\"model.baskets\" [cdkDropListDisabled]=\"!reordering\" (cdkDropListDropped)=\"dropped($event)\">\n                <div *ngFor=\"let basket of model.baskets; let $index = index\" cdkDrag \n                    [ngClass]=\"['list-group-item list-group-item-action d-flex w-auto-unimportant', reordering ? 'cursor-move': '']\">\n                    <div *ngIf=\"reordering\" class=\"sq-basket-text\">{{basket.name}}</div>\n                    <sq-editable *ngIf=\"!reordering\" [value]=\"basket.name\" (valueChange)=\"setName(basket, $event)\" name=\"msg#manageBaskets.name\"\n                        [model]=\"basket\" [validators]=\"nameValidators\"></sq-editable>\n                    <div class=\"ml-auto\">\n                        <a *ngIf=\"!reordering\" class=\"ml-2\" href=\"#\" (click)=\"remove(basket, $index)\" title=\"{{'msg#manageBaskets.remove' | sqMessage}}\">\n                            <span class=\"fas fa-times sq-remove\"></span>\n                        </a>\n                        <span *ngIf=\"reordering\" class=\"ml-2 fas fa-bars sq-move\"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </sq-modal>\n</form>\n","import {Component, OnInit, Inject} from \"@angular/core\";\nimport {Validators, AbstractControl} from \"@angular/forms\";\nimport {ValidatorFn} from \"@angular/forms\";\nimport {CdkDragDrop} from \"@angular/cdk/drag-drop\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AuditEvent} from \"@sinequa/core/web-services\";\nimport {Basket, BasketEventType, ManageBasketsModel} from \"../../baskets.service\";\n\n@Component({\n    selector: \"sq-manage-baskets\",\n    templateUrl: \"./manage-baskets.html\",\n    styleUrls: [\"./manage-baskets.scss\"]\n})\nexport class BsManageBaskets implements OnInit {\n    reordering: boolean;\n    buttons: ModalButton[];\n    removeAllButton: ModalButton;\n    nameValidators: ValidatorFn[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: ManageBasketsModel) {\n        this.reordering = false;\n\n        this.nameValidators = [\n            Validators.required,\n            (control: AbstractControl) => {\n                const modelControl = control.root.get(\"model\");\n                if (modelControl) {\n                    for (const item of this.model.baskets) {\n                        if (modelControl.value === item) {\n                            continue;\n                        }\n                        if (control.value === item.name) {\n                            return {\n                                unique: true\n                            };\n                        }\n                    }\n                }\n                return null;\n            }\n        ];\n    }\n\n    ngOnInit() {\n        this.buttons = [\n            this.removeAllButton = new ModalButton({\n                text: \"msg#manageBaskets.removeAll\",\n                result: ModalResult.Custom,\n                action: (button) => {\n                    this.model.baskets.splice(0);\n                    button.visible = false;\n                    this.addAuditEvent({\n                        type: BasketEventType.DeleteAll\n                    });\n                },\n                visible: this.model.baskets.length > 0\n            }),\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    addAuditEvent(auditEvent: AuditEvent) {\n        if (!this.model.auditEvents) {\n            this.model.auditEvents = [];\n        }\n        this.model.auditEvents.push(auditEvent);\n    }\n\n    reorder() {\n        this.reordering = !this.reordering;\n    }\n\n    setName(basket: Basket, name: string) {\n        if (!Utils.eqNC(basket.name, name)) {\n            this.addAuditEvent({\n                type: BasketEventType.Rename,\n                detail: {\n                    basket: name,\n                    \"old-name\": basket.name\n                }\n            });\n            basket.name = name;\n        }\n    }\n\n    remove(basket: Basket, index: number) {\n        this.model.baskets.splice(index, 1);\n        this.removeAllButton.visible = this.model.baskets.length > 0;\n        this.addAuditEvent({\n            type: BasketEventType.Delete,\n            detail: {\n                basket: basket.name\n            }\n        });\n        return false;\n    }\n\n    dropped(drop: CdkDragDrop<Basket[]>) {\n        Utils.arrayMove(this.model.baskets, drop.previousIndex, drop.currentIndex);\n    }\n}\n","<form name=\"selectBasket\" novalidate>\n    <sq-modal [title]=\"'msg#selectBasket.title'\" [buttons]=\"buttons\">\n        <div class=\"form-group\">\n            <div class=\"list-group sq-list-group\">\n                <a *ngFor=\"let basket of baskets\" href=\"javascript:void(0)\" class=\"list-group-item list-group-item-action\" (click)=\"select(basket)\">\n                    <div>{{basket.name | sqMessage}}</div>\n                </a>\n                <a *ngIf=\"model.allowNew\" href=\"javascript:void(0)\" class=\"list-group-item list-group-item-action\" (click)=\"newBasket()\">\n                    <div><i>{{'msg#selectBasket.newBasket' | sqMessage}}</i></div>\n                </a>\n            </div>\n        </div>\n    </sq-modal>\n</form>","import {Component, OnInit, Inject} from \"@angular/core\";\nimport {MODAL_MODEL, ModalRef, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Basket, BasketsService, SelectBasketModel} from \"../../baskets.service\";\n\n@Component({\n    selector: \"sq-select-basket\",\n    templateUrl: \"./select-basket.html\"\n})\nexport class BsSelectBasket implements OnInit {\n    baskets: Basket[];\n    buttons: ModalButton[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: SelectBasketModel,\n        private basketsService: BasketsService,\n        private modalRef: ModalRef) {\n        this.baskets = this.basketsService.baskets;\n\n        if (!this.baskets) {\n            this.baskets = [];\n        }\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    ngOnInit(): void {\n        if (!!this.model.basketFilter) {\n            this.baskets = this.baskets.filter(this.model.basketFilter);\n        }\n    }\n\n    activate(model) {\n        this.model = model;\n    }\n\n    select(basket: Basket) {\n        if (basket) {\n            this.model.basket = basket;\n            this.modalRef.close(ModalResult.OK);\n        }\n    }\n\n    newBasket(){\n        const model : Basket = {name : \"\"};\n        this.basketsService.createBasketModal(model)\n            .then((result) => {\n                if(result){ // The basket was created\n                    this.select(model);\n                }\n            });\n    }\n}\n","import { Component, Input, OnChanges, SimpleChanges, ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Record } from \"@sinequa/core/web-services\";\nimport { ModalService, ModalResult } from \"@sinequa/core/modal\";\nimport { BasketsService, Basket } from \"../../baskets.service\";\nimport { Action } from \"@sinequa/components/action\";\n\n/**\n * Component representing the add-to-baskets button in one item of the result list view.\n *\n */\n@Component({\n    selector: 'sq-result-baskets',\n    templateUrl: './result-baskets.html'\n})\nexport class BsResultBaskets implements OnChanges, OnDestroy {\n    @Input() record: Record;\n    @Input() rightAligned: boolean;\n\n    public basketsAction: Action;\n    private addToBasketAction: Action;\n    private removeFromBasketAction: Action;\n    private removeFromAllBasketsAction: Action;\n\n    private baskets: string[];\n    private initialized: boolean;\n    private basketsSubscription: Subscription;\n\n    constructor(\n        private modalService: ModalService,\n        private basketsService: BasketsService,\n        private changeDetectorRef: ChangeDetectorRef\n    ) {\n        this.baskets = [];\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (!this.initialized) {\n            this.initialized = true;\n            this.addToBasketAction = this.buildAddToBasketAction();\n            this.removeFromBasketAction = this.buildRemoveFromBasketAction();\n            this.removeFromAllBasketsAction = this.buildRemovalFromAllBasketsAction();\n            this.basketsSubscription = this.basketsService.changes.subscribe(event => {\n                this.updateRecordBaskets();\n                this.refreshVisualization();\n            });\n        }\n        this.updateRecordBaskets();\n        this.refreshVisualization();\n    }\n\n    ngOnDestroy(): void {\n        if (this.basketsSubscription) {\n            this.basketsSubscription.unsubscribe();\n        }\n    }\n\n    public get isInBaskets(): boolean {\n        return this.baskets.length > 0;\n    }\n\n    private refreshVisualization(): void {\n        this.basketsAction = this.buildBasketsAction();\n        this.changeDetectorRef.markForCheck();\n    }\n\n    private updateRecordBaskets(): void {\n        const currentBaskets: Basket[] = this.basketsService.baskets;\n        this.baskets = [];\n        for (const basket of currentBaskets) {\n            if (!!basket.ids && basket.ids.includes(this.record.id)) {\n                this.baskets.push(basket.name);\n            }\n        }\n    }\n\n    private buildAddToBasketAction(): Action {\n        return new Action({\n            text: 'msg#baskets.addToBasket',\n            action: (item, $event) => {\n                this.basketsService.addToBasketModal(this.record.id, this.baskets);\n            }\n        });\n    }\n\n    private buildRemoveFromBasketAction(): Action {\n        return new Action({\n            text: 'msg#baskets.removeFromBasket',\n            action: (item, $event) => {\n                this.basketsService.removeFromBasketModal(this.record.id, this.baskets);\n            }\n        });\n    }\n\n    private buildRemovalFromAllBasketsAction(): Action {\n        return new Action({\n            text: 'msg#baskets.removeFromAllBaskets',\n            action: () => {\n                this.modalService\n                    .yesNo(\n                        'msg#baskets.removeFromAllBasketsConfirmation',\n                        {values: {baskets: this.baskets.join(', ')}})\n                    .then(result => {\n                        if (result === ModalResult.Yes) {\n                            this.basketsService.removeFromAllBaskets(this.record.id);\n                        }\n                    });\n            }\n        });\n    }\n\n    private buildBasketsAction(): Action {\n        return new Action({\n            icon: 'fas fa-shopping-basket',\n            title: 'msg#baskets.baskets',\n            children: this.isInBaskets\n                ? this.baskets.length === 1\n                    ? [this.addToBasketAction, this.removeFromBasketAction]\n                    : [this.addToBasketAction, this.removeFromBasketAction, this.removeFromAllBasketsAction]\n                : [this.addToBasketAction]\n        });\n    }\n}\n","<div class=\"btn-group {{ isInBaskets ? 'sq-document-in-baskets' : 'sq-document-not-in-baskets' }}\"\n    [sq-action-buttons]=\"{\n        items: [basketsAction],\n        autoAdjust: true,\n        rightAligned: rightAligned\n    }\"></div>\n","<li *ngIf=\"!!menu && !menu.hidden\" class=\"nav-item dropdown\" \r\n    [sq-action-item]=\"{item: menu, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\r\n    [collapseBreakpoint]=\"collapseBreakpoint\"\r\n></li>\r\n\r\n\r\n\r\n\r\n","import { Component, OnInit, Input } from \"@angular/core\";\r\nimport { Action } from \"@sinequa/components/action\";\r\nimport { LoginService } from \"@sinequa/core/login\";\r\nimport { BasketsService } from \"../../baskets.service\";\r\nimport {PrincipalWebService} from \"@sinequa/core/web-services\";\r\nimport {UserSettingsWebService} from \"@sinequa/core/web-services\";\r\nimport {AppWebService} from \"@sinequa/core/web-services\";\r\n\r\n@Component({\r\n  selector: \"sq-baskets-menu\",\r\n  templateUrl: \"./baskets-menu.component.html\",\r\n})\r\nexport class BsBasketsMenuComponent implements OnInit {\r\n  @Input() searchRoute: string = \"/search\";\r\n  @Input() icon: string = \"fas fa-shopping-basket\";\r\n  @Input() autoAdjust: boolean = true;\r\n  @Input() autoAdjustBreakpoint: string = \"xl\";\r\n  @Input() collapseBreakpoint: string = \"sm\";\r\n  @Input() size: string;\r\n\r\n  basketOptions: string[] = [\"Select\", \"Share\"];\r\n\r\n  menu: Action | undefined;\r\n\r\n  // Basket actions\r\n  createAction: Action;\r\n  manageAction: Action;\r\n  selectAction: Action;\r\n  shareAction: Action;\r\n  basketCustomOptions: Action[] = [];\r\n\r\n  constructor(\r\n    public loginService: LoginService,\r\n    public basketsService: BasketsService,\r\n    public principalService:PrincipalWebService,\r\n    public userSettingsService:UserSettingsWebService,\r\n    public appService: AppWebService\r\n  ) {\r\n    this.createAction = new Action({\r\n      text: \"msg#baskets.createBasket\",\r\n      title: \"msg#baskets.createBasket\",\r\n      action: (_) => {\r\n        this.basketsService.createBasketModal();\r\n      },\r\n    });\r\n\r\n    this.manageAction = new Action({\r\n      text: \"msg#baskets.manageBaskets\",\r\n      title: \"msg#baskets.manageBaskets\",\r\n      action: (_) => {\r\n        this.basketsService.manageBasketsModal();\r\n      },\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updateMenu();\r\n    this.basketsService.changes.subscribe({\r\n      next: () => {\r\n        this.updateMenu();\r\n      },\r\n    });\r\n    this.loginService.events.subscribe((event) => {\r\n      if (event.type === \"session-changed\") {\r\n        this.updateMenu();\r\n      }\r\n    });\r\n  }\r\n\r\n  updateMenu() {\r\n    if (!this.loginService.complete) {\r\n      this.menu = undefined;\r\n      return;\r\n    }\r\n\r\n    //Select and Share options//\r\n\r\n    const basketsActions: Action[] = [];\r\n    if (this.basketsService.hasBasket) {\r\n      this.basketsService.baskets.map((basket) =>\r\n        basketsActions.push(\r\n          new Action({\r\n            text: basket.name,\r\n            title: basket.name,\r\n            children: [\r\n              new Action({\r\n                text: \"Select\",\r\n                title: \"Select\",\r\n                action: () =>\r\n                  this.basketsService.searchBasket(basket, this.searchRoute),\r\n              }),\r\n              new Action({\r\n                text: \"Share\",\r\n                title: \"Share\",\r\n                action:()=>this.sendEmail(basket,this.searchRoute),\r\n              }),\r\n            ],\r\n          })\r\n        )\r\n      );\r\n    }\r\n    basketsActions.push(new Action({ separator: true }));\r\n    basketsActions.push(this.createAction);\r\n\r\n    if (this.basketsService.hasBasket) {\r\n      basketsActions.push(this.manageAction);\r\n    }\r\n\r\n    this.menu = new Action({\r\n      icon: this.icon,\r\n      text: \"msg#baskets.baskets\",\r\n      title: \"msg#baskets.baskets\",\r\n      children: basketsActions,\r\n    });\r\n  }\r\n\r\n  sendEmail(basket,curr)\r\n{\r\n            let mailToUrl = \"\";\r\n            let name = this.principalService?.principal?.name;\r\n            \r\n            let basketName = basket.name\r\n\t\t\t\t    var query=\"#/search?query=%7B%22name%22:%22\"+this.appService.appName+\"%22,%22basket%22:%22\"+basketName+\"%22,%22user%22:%22\"+name+\"%22,%22tab%22:%22ALL%22%7D&view=list\"+\"&user=\"+name+\"&sharedBasket=\"+basketName;\r\n                \r\n            var body = \"https://\"+window.location.host+window.location.pathname+ encodeURIComponent(query);\r\n            console.log(body);\r\n                //?query={%22name%22:%22GlobalSearch_V3.2%22,%22basket%22:%22Favorites%22,%22tab%22:%22ALL%22}&view=list&user=200035114&sharedBasket=Favorites\r\n                \r\n            mailToUrl = \"mailto:?subject=Pubmed Search Basket&body=\"+body;\r\n            console.log(mailToUrl);\r\n            window.location.href=mailToUrl;\r\n    }\r\n}\r\n\r\n\r\n","<div class=\"list-group list-group-flush\">\n    <a *ngFor=\"let basket of basketsService.baskets | slice:startIndex:endIndex\"\n        class=\"basket-item list-group-item list-group-item-action d-flex align-items-center\"\n        [routerLink]=\"[searchRoute]\" [queryParams]=\"getQueryParams(basket)\" [state]=\"getRouterState(basket)\"\n        (click)=\"openBasket(basket)\">\n        <span class=\"basket-name text-truncate mr-auto\">{{ basket.name }}</span>\n        <span *ngIf=\"basket.ids\" class=\"basket-count ml-2 text-muted small\">{{ basket.ids.length }}</span>\n        <i *ngIf=\"enableDelete\" class=\"basket-delete ml-2 fas fa-times\" [title]=\"'msg#baskets.delete' | sqMessage\" (click)=\"deleteBasket(basket, $event)\"></i>\n    </a>\n    <div *ngIf=\"basketsService.baskets.length == 0\" class=\"list-group-item text-center text-muted font-italic small py-5\">\n        {{ 'msg#baskets.noBasket' | sqMessage }}\n    </div>\n</div>","import { Component, Input } from '@angular/core';\nimport { BasketsService, Basket, BasketEventType } from '../../baskets.service';\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\n\n@Component({\n  selector: 'sq-facet-baskets',\n  templateUrl: './facet-baskets.component.html',\n  styles: [`\n.basket-item .basket-delete{\n    opacity: 0;\n}\n\n.basket-item:hover .basket-delete{\n    opacity: 1;\n    transition: opacity 0.2s ease-in-out;\n}\n  `]\n})\nexport class BsFacetBasketsComponent extends AbstractFacet {\n  @Input() searchRoute: string = \"/search\";\n  @Input() maxBaskets: number = 5;\n  @Input() enableDelete: boolean = true;\n\n  page: number = 0;\n\n  createBasket: Action;\n  manageBasket: Action;\n  previousPage: Action;\n  nextPage: Action;\n\n  constructor(\n    public basketsService: BasketsService) {\n    super();\n\n    this.createBasket = new Action({\n      icon: \"fas fa-plus\",\n      title: \"msg#baskets.createBasket\",\n      action: () => {\n        this.basketsService.createBasketModal();\n      }\n    });\n\n    this.manageBasket = new Action({\n      icon: \"fas fa-cog\",\n      title: \"msg#baskets.manageBaskets\",\n      action: () => {\n        this.basketsService.manageBasketsModal();\n      }\n    });\n\n    this.previousPage = new Action({\n      icon: \"fas fa-chevron-left\",\n      title: \"msg#facet.previous\",\n      action: () => {\n        this.page--;\n      },\n      updater: (action: Action) => {\n        action.disabled = this.page <= 0;\n        action.hidden = this.maxPage === 0;\n      }\n    });\n\n    this.nextPage = new Action({\n      icon: \"fas fa-chevron-right\",\n      title: \"msg#facet.next\",\n      action: () => {\n        this.page++;\n      },\n      updater: (action: Action) => {\n        action.disabled = this.page >= this.maxPage;\n        action.hidden = this.maxPage === 0;\n      }\n    });\n  }\n\n  get maxPage(): number {\n    return Math.max(0, Math.ceil(this.basketsService.baskets.length / this.maxBaskets) - 1);\n  }\n\n  get startIndex(): number {\n    return this.page * this.maxBaskets;\n  }\n\n  get endIndex(): number {\n    return (this.page+1) * this.maxBaskets;\n  }\n\n  openBasket(basket: Basket){\n    this.basketsService.notifyOpenBasket(basket)\n    return true;\n  }\n\n  get actions(): Action[] {\n    this.previousPage.update();\n    this.nextPage.update();\n    return [this.createBasket, this.previousPage, this.nextPage, this.manageBasket];\n  }\n\n  deleteBasket(basket: Basket, event: Event){\n    event.stopPropagation();\n    this.basketsService.deleteBasket(basket);\n    this.page = Math.min(this.page, this.maxPage);\n    return false;\n  }\n\n  getQueryParams(basket: Basket) {\n    const query = this.basketsService.makeQuery(basket);\n    const queryParams = query.toJsonForQueryString();\n    return {query: queryParams};\n  }\n\n  getRouterState(basket: Basket) {\n    return {\n      audit: {\n        type: BasketEventType.Open,\n        detail: {\n          basket: basket.name\n        }\n      }\n    }\n  }\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {DragDropModule} from \"@angular/cdk/drag-drop\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\nimport {BsActionModule} from \"@sinequa/components/action\";\n\nimport {BASKET_COMPONENTS} from \"../baskets.service\";\nimport {BsEditBasket} from \"./edit-basket/edit-basket\";\nimport {BsManageBaskets} from \"./manage-baskets/manage-baskets\";\nimport {BsSelectBasket} from \"./select-basket/select-basket\";\nimport {BsResultBaskets} from \"./result-baskets/result-baskets\";\nimport {BsBasketsMenuComponent} from \"./baskets-menu/baskets-menu.component\";\nimport {BsFacetBasketsComponent} from './facet-baskets/facet-baskets.component';\nimport {RouterModule} from '@angular/router';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n        DragDropModule,\n        RouterModule,\n\n        BsModalModule,\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsSelectionModule,\n        BsActionModule\n    ],\n    declarations: [\n        BsEditBasket, BsManageBaskets, BsSelectBasket,\n        BsResultBaskets, BsBasketsMenuComponent,\n        BsFacetBasketsComponent\n    ],\n    exports: [\n        BsEditBasket, BsManageBaskets, BsSelectBasket,\n        BsResultBaskets, BsBasketsMenuComponent,\n        BsFacetBasketsComponent\n    ],\n    providers: [\n        {\n            provide: BASKET_COMPONENTS,\n            useValue: {\n                selectBasketModal: BsSelectBasket,\n                editBasketModal: BsEditBasket,\n                manageBasketsModal: BsManageBaskets\n            }\n        }\n    ]\n})\nexport class BsBasketsModule {\n}\n","export default {\n    \"baskets\": {\n        \"baskets\": \"Baskets\",\n        \"addToBasket\": \"Add to basket\",\n        \"removeFromBasket\": \"Remove from basket\",\n        \"removeFromAllBaskets\": \"Remove from all baskets\",\n        \"removeFromAllBasketsConfirmation\": \"Are you sure you want to remove this result from these baskets: {baskets}?\",\n        \"basketAlreadyExists\": \"A basket with that name already exists. Would you like to replace it?\",\n        \"noBasket\": \"You have not yet added a document to a basket...\",\n        \"createBasket\": \"Create Basket\",\n        \"manageBaskets\": \"Manage Baskets\",\n        \"delete\": \"Delete this basket\"\n    },\n\n    \"editBasket\": {\n        \"title\": \"Basket\",\n        \"name\": \"Name\"\n    },\n\n    \"manageBaskets\": {\n        \"title\": \"Manage Baskets\",\n        \"edit\": \"Edit\",\n        \"reorder\": \"Reorder\",\n        \"remove\": \"Remove\",\n        \"removeAll\": \"Remove all\",\n        \"name\": \"Name\"\n    },\n\n    \"selectBasket\": {\n        \"title\": \"Select Basket\",\n        \"newBasket\": \"New basket...\"\n    }\n};\n","export default {\n    \"baskets\": {\n        \"baskets\": \"Paniers\",\n        \"addToBasket\": \"Ajouter au panier\",\n        \"removeFromBasket\": \"Supprimer du panier\",\n        \"removeFromAllBaskets\": \"Supprimer de tous les paniers\",\n        \"removeFromAllBasketsConfirmation\": \"Êtes-vous sûr de vouloir supprimer ce résultat de ces paniers : {baskets} ?\",\n        \"basketAlreadyExists\": \"Un panier avec ce nom existe déjà. Voulez-vous le remplacer ?\",\n        \"noBasket\": \"Vous n'avez pas encore ajouté de document à un panier...\",\n        \"createBasket\": \"Créer un panier\",\n        \"manageBaskets\": \"Gérer les paniers\",\n        \"delete\": \"Supprimer ce panier\"\n    },\n\n    \"editBasket\": {\n        \"title\": \"Panier\",\n        \"name\": \"Nom\"\n    },\n\n    \"manageBaskets\": {\n        \"title\": \"Gérer les paniers\",\n        \"edit\": \"Editer\",\n        \"reorder\": \"Réorganiser\",\n        \"remove\": \"Effacer\",\n        \"removeAll\": \"Effacer tout\",\n        \"name\": \"Nom\"\n    },\n\n    \"selectBasket\": {\n        \"title\": \"Sélectionner un panier\",\n        \"newBasket\": \"Nouveau panier...\"\n    },\n\n};\n","export default {\n    \"baskets\": {\n        \"baskets\": \"Ablagekörbe\",\n        \"addToBasket\": \"Zum Ablagekorb hinzufügen\",\n        \"removeFromBasket\": \"Aus dem Ablagekorb entfernen\",\n        \"removeFromAllBaskets\": \"Von allen Ablagekörben entfernen\",\n        \"removeFromAllBasketsConfirmation\": \"Möchten Sie dieses Eregbnis wirklich von diesen Ablagekörben entfernen: {baskets}?\",\n        \"basketAlreadyExists\": \"Es existiert bereits ein Ablagekorb mit diesem Namen. Möchten Sie ihn ersetzen?\",\n        \"noBasket\": \"Sie haben noch kein Dokument zu einem Ablagekorb hinzugefügt...\",\n        \"createBasket\": \"Ablagekorb erstellen\",\n        \"manageBaskets\": \"Ablagekörbe verwalten\",\n        \"delete\": \"Diesen Ablagekorb löschen\"\n    },\n\n    \"editBasket\": {\n        \"title\": \"Ablagekorb\",\n        \"name\": \"Name\"\n    },\n\n    \"manageBaskets\": {\n        \"title\": \"Ablagekörbe verwalten\",\n        \"edit\": \"Bearbeiten\",\n        \"reorder\": \"Neu sortieren\",\n        \"remove\": \"Entfernen\",\n        \"removeAll\": \"Alle entfernen\",\n        \"name\": \"Name\"\n    },\n\n    \"selectBasket\": {\n        \"title\": \"Ablagekorb auswählen\",\n        \"newBasket\": \"Neuer Ablagekorb...\"\n    },\n\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enSelection, frSelection, deSelection} from \"@sinequa/components/selection\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enBaskets from \"./en\";\nimport _frBaskets from \"./fr\";\nimport _deBaskets from \"./de\";\n\nconst enBaskets = Utils.merge({}, _enBaskets, enSearch, enSelection, enModal);\nconst frBaskets = Utils.merge({}, _frBaskets, frSearch, frSelection, frModal);\nconst deBaskets = Utils.merge({}, _deBaskets, deSearch, deSelection, deModal);\n\nexport { enBaskets, frBaskets, deBaskets };","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["InjectionToken","Subject","Utils","Action","Injectable","Inject","FormControl","Validators","ModalButton","MODAL_MODEL","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵelement","i0.ɵɵproperty","i0.ɵɵadvance","i0.ɵɵtextInterpolate","Component","i0.ɵɵlistener","i0.ɵɵpropertyInterpolate","i0.ɵɵtemplate","i0.ɵɵclassMapInterpolate1","Input","i0.ɵɵtextInterpolate1","AbstractFacet","CommonModule","FormsModule","ReactiveFormsModule","DragDropModule","RouterModule","BsModalModule","IntlModule","ValidationModule","UtilsModule","BsSelectionModule","BsActionModule","NgModule","enSearch","enSelection","enModal","frSearch","frSelection","frModal","deSearch","deSelection","deModal"],"mappings":"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"}