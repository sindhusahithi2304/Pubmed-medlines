{"version":3,"file":"sinequa-components-search.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/components/search/breadcrumbs.ts","../../../projects/components/search/search.service.ts","../../../projects/components/search/first-page.service.ts","../projects/components/search/bootstrap/breadcrumbs/breadcrumbs.html","../projects/components/search/bootstrap/breadcrumbs/breadcrumbs.ts","../projects/components/search/bootstrap/did-you-mean/did-you-mean.html","../projects/components/search/bootstrap/did-you-mean/did-you-mean.ts","../projects/components/search/bootstrap/page-size-selector/page-size-selector.html","../projects/components/search/bootstrap/page-size-selector/page-size-selector.ts","../projects/components/search/bootstrap/pager/pager.html","../projects/components/search/bootstrap/pager/pager.ts","../projects/components/search/bootstrap/sort-selector/sort-selector.ts","../projects/components/search/bootstrap/sort-selector/sort-selector.html","../projects/components/search/bootstrap/tabs/tabs.html","../projects/components/search/bootstrap/tabs/tabs.ts","../projects/components/search/bootstrap/loading-bar/loading-bar.ts","../projects/components/search/bootstrap/scroller/scroller.ts","../projects/components/search/bootstrap/load-more/load-more.html","../projects/components/search/bootstrap/load-more/load-more.ts","../../projects/components/search/bootstrap/search.module.ts","../../projects/components/search/messages/en.ts","../../projects/components/search/messages/fr.ts","../../projects/components/search/messages/de.ts","../../../projects/components/search/sinequa-components-search.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {Query, AppService, ExprParser, Expr, ExprValueInitializer} from \"@sinequa/core/app-utils\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SearchService} from \"./search.service\";\n\nexport interface BreadcrumbsItem {\n    expr: Expr | undefined;\n    display: Expr | string; // Either expr or a label (error string, basket name or <empty search>)\n    facet?: string; // associated facet, if any\n    active?: boolean; // true if the active item\n    hidden?: boolean; // true for \"empty search\" item when !ccquery.allowEmptySearch\n}\n\n/**\n * Description of the Breadcrumbs class - link to {@link SearchService}\n */\nexport class Breadcrumbs {\n    appService: AppService;\n    searchService: SearchService;\n    items: BreadcrumbsItem[]; // always starts with the text expression followed by any selects\n    advanced: Expr[];\n    query: Query; // the associated query. Will be different to the current query if any item other than the last is selected\n    fields: Set<string>;\n\n    static create(appService: AppService, searchService: SearchService, query: Query): Breadcrumbs {\n        const breadcrumbs = new Breadcrumbs(appService, searchService, query);\n        return breadcrumbs.init();\n    }\n\n    private constructor(appService: AppService, searchService: SearchService, query: Query) {\n        this.appService = appService;\n        this.searchService = searchService;\n        this.query = query.copy();\n        this.items = [];\n        this.advanced = [];\n        this.fields = new Set<string>();\n    }\n\n    get activeIndex(): number {\n        return this.items.findIndex(item => item.active);\n    }\n\n    get activeItem(): BreadcrumbsItem | undefined {\n        const index = this.activeIndex;\n        if (index !== -1) {\n            return this.items[index];\n        }\n        return undefined;\n    }\n\n    get text(): Expr | string {\n        return this.items[0].display;\n    }\n\n    get textExpr(): Expr | undefined {\n        return this.items[0].expr;\n    }\n\n    get selects(): BreadcrumbsItem[] {\n        return this.items.slice(1);\n    }\n\n    get activeSelects(): BreadcrumbsItem[] {\n        return this.items.slice(1, this.activeIndex + 1);\n    }\n\n    get activeItems():  BreadcrumbsItem[] {\n        return this.items.slice(0, this.activeIndex + 1);\n    }\n\n    get isEmpty(): boolean {\n        if (this.items.length === 0) {\n            return true;\n        }\n        if (this.items.length === 1 && this.items[0].hidden) {\n            return true;\n        }\n        return false;\n    }\n\n    find(expr: Expr | ExprValueInitializer): Expr | undefined {\n        let expr1 = expr as Expr;\n        const init = expr as ExprValueInitializer;\n        if (!(expr instanceof Expr)) {\n            expr1 = new Expr(init);\n        }\n        if (!expr1.every((expr2) => {\n            const field = expr2.exprContext.appService.resolveColumnAlias(expr2.field);\n            return !field || this.fields.has(field);\n        })) {\n            return undefined;\n        }\n        for (const expr3 of this.advanced) {\n            const expr2 = expr3.find(expr1);\n            if (expr2) {\n                return expr2;\n            }\n        }\n        for (const select of this.selects) {\n            if (select.expr) {\n                const expr2 = select.expr.find(expr1);\n                if (expr2) {\n                    return expr2;\n                }\n            }\n        }\n        if (this.textExpr) {\n            let expr2 = this.textExpr.find(expr1, (expr3) => expr3.isStructured);\n            if (expr2) {\n                return expr2;\n            }\n            expr2 = this.textExpr.find(expr1, (expr3) => !expr3.isStructured);\n            if (expr2) {\n                return expr2;\n            }\n        }\n        return undefined;\n    }\n\n    findSelect(facet: string, exprOrField?: Expr | string): Expr | undefined {\n        // Active selects only, most recent first\n        const activeSelects = this.activeSelects;\n        for (let i = activeSelects.length - 1; i >= 0; i--) {\n            const select = activeSelects[i];\n            if (select.expr && (!facet || Utils.eqNC(facet, select.facet || \"\"))) {\n                if (!exprOrField ) {\n                    return select.expr;\n                }\n                if (Utils.isString(exprOrField)) {\n                    if (Utils.eqNC(exprOrField, select.expr.field || \"\")) {\n                        return select.expr;\n                    }\n                }\n                else {\n                    const expr1 = select.expr.find(exprOrField);\n                    if (expr1) {\n                        return expr1;\n                    }\n                }\n            }\n        }\n        return undefined;\n    }\n\n    private addFields(expr: Expr | undefined) {\n        if (expr) {\n            const fields = expr.getFields();\n            fields.forEach((field) => {\n                this.fields.add(field);\n            });\n        }\n    }\n\n    private makeBreadcrumbsItemFromExpr(text: string): BreadcrumbsItem {\n        let expr = this.appService.parseExpr(text);\n        if (!(expr instanceof Expr)) {\n            expr = this.appService.parseExpr(ExprParser.escape(text));\n        }\n        if (expr instanceof Expr) {\n            return {expr, display: expr};\n        }\n        else {\n            return {expr: undefined, display: expr};\n        }\n    }\n\n    private initItems() {\n        // Text\n        if (this.query && this.query.text) {\n            const item = this.makeBreadcrumbsItemFromExpr(this.query.text);\n            this.items.push(item);\n            this.addFields(item.expr);\n        }\n        else {\n            this.items.push({\n                expr: undefined,\n                display: this.query && this.query.basket ? this.query.basket : \"msg#breadcrumbs.emptySearch\",\n                hidden: this.appService.ccquery && !this.appService.ccquery.allowEmptySearch &&\n                    this.searchService.isEmptySearchIgnoreSelects(this.query)\n            });\n        }\n        // Selects\n        if (this.query && this.query.select) {\n            for (const select of this.query.select) {\n                const item = this.makeBreadcrumbsItemFromExpr(select.expression);\n                item.facet = select.facet;\n                this.items.push(item);\n                this.addFields(item.expr);\n            }\n        }\n        // Set last item active\n        this.items[this.items.length - 1].active = true;\n    }\n\n    private init(): Breadcrumbs {\n        this.initItems();\n        return this;\n    }\n\n    selectItem(item: BreadcrumbsItem): Query | undefined {\n        const index = this.items.indexOf(item);\n        if (this.query && index !== -1) {\n            const query = this.query.copy();\n            if (query.select) {\n                query.select.splice(index);\n            }\n            this.items.forEach(item1 => item1.active = false);\n            item.active = true;\n            return query;\n        }\n        return undefined;\n    }\n\n    removeItem(item: BreadcrumbsItem): BreadcrumbsItem | undefined {\n        const index = this.items.indexOf(item);\n        if (this.query && index !== -1) {\n            let next: BreadcrumbsItem | undefined;\n            if (index === 0) { // Text\n                if (this.query.text || this.query.basket) {\n                    delete this.query.text;\n                    delete this.query.basket;\n                    item.expr = undefined;\n                    item.display = \"msg#breadcrumbs.emptySearch\";\n                    item.hidden = this.appService.ccquery && !this.appService.ccquery.allowEmptySearch &&\n                        this.searchService.isEmptySearchIgnoreSelects(this.query);\n                }\n                if (!item.hidden) {\n                    next = this.activeItem;\n                }\n                else if (this.items.length > 1) {\n                    next = this.items[this.items.length - 1];\n                }\n            }\n            else {\n                // Find next item to activate, if necessary\n                const activeIndex = this.activeIndex;\n                if (activeIndex >= index) {\n                    if (activeIndex > index) {\n                        next = this.items[activeIndex];\n                    }\n                    else {\n                        if (index === this.items.length - 1) {\n                            next = this.items[index - 1];\n                        }\n                        else {\n                            next = this.items[index + 1];\n                        }\n                        if (next.hidden) {\n                            next = undefined;\n                        }\n                    }\n                }\n                if (this.query.select) {\n                    this.query.select.splice(index - 1, 1);\n                }\n                this.items.splice(index, 1);\n            }\n            return next;\n        }\n        return undefined;\n    }\n\n    update(query: Query) {\n        if (!this.query) {\n            this.query = query.copy();\n        }\n        this.query.text = query.text;\n        this.query.basket = query.basket;\n        if (!this.query.text && !this.query.basket) {\n            const item = this.items[0];\n            item.expr = undefined;\n            item.display = \"msg#breadcrumbs.emptySearch\";\n            item.hidden = this.appService.ccquery && !this.appService.ccquery.allowEmptySearch &&\n                this.searchService.isEmptySearchIgnoreSelects(this.query);\n        }\n    }\n}\n","import {Injectable, InjectionToken, Inject, Optional, OnDestroy} from \"@angular/core\";\nimport {Router, NavigationStart, NavigationEnd, Params} from \"@angular/router\";\nimport {Subject, BehaviorSubject, Observable, Subscription, of, throwError} from \"rxjs\";\nimport {map, catchError  } from \"rxjs/operators\";\nimport {QueryWebService, AuditWebService, CCQuery, QueryIntentData, Results, Record, Tab, DidYouMeanKind,\n    QueryIntentAction, QueryIntent, QueryAnalysis, IMulti, CCTab,\n    AuditEvents, AuditEventType, AuditEvent} from \"@sinequa/core/web-services\";\nimport {AppService, FormatService, ValueItem, Query, ExprParser, Expr, ExprBuilder} from \"@sinequa/core/app-utils\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {LoginService} from \"@sinequa/core/login\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Breadcrumbs, BreadcrumbsItem} from './breadcrumbs';\n\nexport interface SearchOptions {\n    routes?: string[];\n    skipSearchRoutes?: string[];\n    homeRoute?: string;\n    deactivateRouting?: boolean;\n    preventQueryNameChanges?: boolean;\n}\n\nexport const SEARCH_OPTIONS = new InjectionToken<SearchOptions>(\"SEARCH_OPTIONS\");\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class SearchService implements OnDestroy {\n    protected _query: Query | undefined;\n    queryStringParams: Params = {};\n    results: Results | undefined;\n    breadcrumbs: Breadcrumbs | undefined;\n    searchActive: boolean;\n\n    protected loginSubscription: Subscription;\n    protected routerSubscription: Subscription;\n    protected appSubscription: Subscription;\n    protected fetchingLoadMore = false;\n    protected _events = new Subject<SearchService.Events>();\n    protected _queryStream = new BehaviorSubject<Query | undefined>(undefined);\n    protected _resultsStream = new BehaviorSubject<Results | undefined>(undefined);\n\n    constructor(\n        @Optional() @Inject(SEARCH_OPTIONS) protected options: SearchOptions,\n        protected router: Router,\n        protected appService: AppService,\n        protected queryService: QueryWebService,\n        protected loginService: LoginService,\n        protected intlService: IntlService,\n        protected formatService: FormatService,\n        protected auditService: AuditWebService,\n        protected notificationsService: NotificationsService,\n        protected exprBuilder: ExprBuilder) {\n\n        if (!this.options) {\n            this.options = {\n                routes: [\"search\"]\n            };\n        }\n\n        this.results = undefined;\n        this.breadcrumbs = undefined;\n\n        this.loginSubscription = this.loginService.events.subscribe(\n            (value) => {\n                if (value.type === \"session-changed\") {\n                    this.handleLogin();\n                }\n            });\n        this.routerSubscription = this.router.events.subscribe(\n            (event) => {\n                if (event instanceof NavigationStart) {\n                    // Restore state on back/forward until this issue is fixed: https://github.com/angular/angular/issues/28108\n                    const currentNavigation = this.router.getCurrentNavigation();\n                    if (currentNavigation && event.navigationTrigger === \"popstate\" &&\n                        !currentNavigation.extras.state && event.restoredState) {\n                        currentNavigation.extras.state = event.restoredState;\n                    }\n                }\n                else if (event instanceof NavigationEnd) {\n                    this.handleNavigation();\n                }\n            });\n        this.appSubscription = this.appService.events.subscribe(\n            (event) => {\n                if (event.type === \"query-changed\") {\n                    if (this._query && (!this.appService.ccquery || (this._query.name !== this.appService.ccquery.name))) {\n                        this.clearQuery();\n                    }\n                }\n            });\n    }\n\n    ngOnDestroy() {\n        this.loginSubscription.unsubscribe();\n        this.routerSubscription.unsubscribe();\n        this.appSubscription.unsubscribe();\n        this._events.complete();\n        this._queryStream.complete();\n        this._resultsStream.complete();\n    }\n\n    get events(): Observable<SearchService.Events> {\n        return this._events;\n    }\n\n    get queryStream(): Observable<Query | undefined> {\n        return this._queryStream;\n    }\n\n    get resultsStream(): Observable<Results | undefined> {\n        return this._resultsStream.asObservable();\n    }\n\n    getTabConfig(name: string): CCTab | undefined {\n        if (this.appService.ccquery && this.appService.ccquery.tabSearch && this.appService.ccquery.tabSearch.tabs) {\n            return this.appService.ccquery.tabSearch.tabs.find(t => Utils.eqNC(t.name, name));\n        }\n        return undefined;\n    }\n\n    get query(): Query {\n        if (!this._query) {\n            this._query = this.makeQuery();\n            this._events.next({type: \"new-query\", query: this._query});\n        }\n        return this._query;\n    }\n\n    public setQuery(query: Query | undefined, newQuery = true) {\n        if (query === this._query) {\n            return;\n        }\n        this._query = query;\n        if (this._query) {\n            let ccquery: CCQuery | undefined;\n            if (this.options.preventQueryNameChanges) {\n                ccquery = this.appService.ccquery || this.appService.defaultCCQuery;\n            }\n            else {\n                ccquery = this.appService.getCCQuery(this._query.name);\n                if (!ccquery) {\n                    console.warn(`Query '${this._query.name}' not found`);\n                    ccquery = this.appService.defaultCCQuery;\n                }\n            }\n            if (ccquery) {\n                this._query.name = ccquery.name;\n                if (this.appService.ccquery !== ccquery) {\n                    this.appService.ccquery = ccquery;\n                }\n            }\n        }\n        if (newQuery) {\n            this._events.next({type: \"new-query\", query: this._query});\n        }\n    }\n\n    public clearQuery() {\n        this.setQuery(undefined);\n    }\n\n    public updateBreadcrumbs(results: Results | undefined, options: SearchService.SetResultsOptions) {\n        if (!results) {\n            this.breadcrumbs = undefined;\n            return;\n        }\n        if (!this.breadcrumbs || (!options.resuseBreadcrumbs && !options.advanced)) {\n            this.breadcrumbs = Breadcrumbs.create(this.appService, this, this.query);\n        }\n        else if (options.advanced) {\n            this.breadcrumbs.update(this.query);\n        }\n    }\n\n    private _setResults(results: Results | undefined, options: SearchService.SetResultsOptions = {}) {\n        if (results === this.results) {\n            return;\n        }\n        this._events.next({type: \"before-new-results\", results});\n        this.results = results;\n        this.treatQueryIntents(results);\n        this.updateBreadcrumbs(results, options);\n        if (this.results) {\n            if (this.results.tab) {\n                this.query.tab = this.results.tab;\n            }\n            if (this.results.attributes && this.results.attributes.queryid) {\n                this.query.queryId = this.results.attributes.queryid;\n            }\n        }\n        this._events.next({type: \"new-results\", results: this.results});\n        this._resultsStream.next(this.results);\n    }\n\n    public setResults(results: Results) {\n        return this._setResults(results);\n    }\n\n    // TODO: queryintents in their own service ?\n\n    private treatQueryIntents (results: Results | undefined) {\n        if (results && results.queryAnalysis && results.queryIntents) {\n            const queryIntents = results.queryIntents;\n            for (const intent of queryIntents) {\n                if (intent.actions) {\n                    for (const action of intent.actions) {\n                        const event: SearchService.ProcessQueryIntentActionEvent = {type: \"process-query-intent-action\", action: action, intent: intent, analysis: results.queryAnalysis};\n                        this._events.next(event);\n                        if (!event.actionProcessed) {\n                            if (!!action.data) {\n                                switch (action.type) {\n                                    case \"tab\":\n                                        if (results.queryAnalysis.initial && this.query &&\n                                            !Utils.eqNC(this.query.tab || \"\", action.data)) {\n                                            this.selectTab(action.data, {skipLocationChange: true});\n                                        }\n                                        break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    get haveRecords(): boolean {\n        return !!this.results && !!this.results.records && this.results.records.length > 0;\n    }\n\n    get rowCount(): number {\n        return (!!this.results && this.results.rowCount) ? this.results.rowCount : 0;\n    }\n\n    get totalRowCount(): number {\n        return (!!this.results && this.results.totalRowCount) ? this.results.totalRowCount : 0;\n    }\n\n    get pageSize(): number {\n        if (this.query && this.query.pageSize) {\n            return this.query.pageSize;\n        }\n        if (this.appService.ccquery && this.appService.ccquery.pageSize) {\n            return this.appService.ccquery.pageSize;\n        }\n        return SearchService.DefaultPageSize;\n    }\n\n    get page(): number {\n        if (!this.results) {\n            return 1;\n        }\n        return this.results.page;\n    }\n\n    get pageCount(): number {\n        if (!this.results || !this.results.rowCount) {\n            return 0;\n        }\n        return Math.ceil(this.results.rowCount / this.results.pageSize);\n    }\n\n    makeQuery(recentQuery?: Query): Query {\n        const ccquery = this.appService.ccquery;\n        const query = new Query(ccquery ? ccquery.name : \"_unknown\");\n        if(recentQuery){\n            Object.assign(query, recentQuery);\n        }\n        this._events.next({type: \"make-query\", query: query});\n        return query;\n    }\n\n    protected makeAuditEvent(event: AuditEvent): AuditEvent {\n        this._events.next({type: \"make-audit-event\", event: event});\n        return event;\n    }\n\n    selectBreadcrumbsItem(item: BreadcrumbsItem) {\n        if (this.breadcrumbs) {\n            const query = this.breadcrumbs.selectItem(item);\n            if (query) {\n                this.setQuery(query, false);\n                this.search({reuseBreadcrumbs: true}); // audit?\n            }\n        }\n    }\n\n    removeBreadcrumbsItem(item: BreadcrumbsItem) {\n        if (this.breadcrumbs) {\n            const next = this.breadcrumbs.removeItem(item);\n            if (this.isEmptySearch(this.breadcrumbs.query)) {\n                this.clear();\n                return;\n            }\n            if (next) {\n                this.selectBreadcrumbsItem(next);\n            }\n        }\n    }\n\n    removeSelect(index: number) {\n        if (this.breadcrumbs) {\n            const item = this.breadcrumbs.items[index + 1];\n            this.removeBreadcrumbsItem(item);\n        }\n    }\n\n    removeText() {\n        if (this.breadcrumbs) {\n            const item = this.breadcrumbs.items[0];\n            this.removeBreadcrumbsItem(item);\n        }\n    }\n\n    clear(navigate = true, path?: string) {\n        this.clearQuery();\n        path = path || this.options.homeRoute;\n        this._setResults(undefined);\n        this._events.next({type: \"clear\", path});\n        if (navigate) {\n            this.navigate({path: path || this.options.homeRoute});\n        }\n    }\n\n    home(path = this.options.homeRoute) {\n        this.clear(true, path);\n    }\n\n    protected makeQueryIntentData(queryIntentData: QueryIntentData): QueryIntentData {\n        this._events.next({type: \"make-query-intent-data\", intentData: queryIntentData});\n        return queryIntentData;\n    }\n\n    isEmptySearchIgnoreSelects(query: Query | undefined): boolean {\n        if (!query) {\n            return true;\n        }\n        if (!query.action || query.action === \"search\") {\n            // Test isFirstPage\n            if (query.isFirstPage) {\n                return false;\n            }\n            // Test empty text\n            if (query.text && Utils.trim(query.text)) {\n                return false;\n            }\n            // Test basket\n            if (query.basket) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEmptySearch(query: Query | undefined): boolean {\n        if (!query) {\n            return true;\n        }\n        if (!query.action || query.action === \"search\") {\n            if (!this.isEmptySearchIgnoreSelects(query)) {\n                return false;\n            }\n            // Test no facet selection\n            if (query.select && query.select.length > 0) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    checkEmptySearch(queries: Query | Query[]): boolean {\n        if (this.appService.ccquery && !this.appService.ccquery.allowEmptySearch) {\n            if (!Utils.isArray(queries)) {\n                queries = [queries];\n            }\n            for (const query of queries) {\n                if (this.isEmptySearch(query)) {\n                    this.notificationsService.info(\"msg#search.emptySearchNotification\");\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    getResults(\n        query: Query, auditEvents?: AuditEvents,\n        options: SearchService.GetResultsOptions = {}): Observable<Results> {\n        if (!this.checkEmptySearch(query)) {\n            return throwError(\"empty search\");\n        }\n        if (!options.searchInactive) {\n            this.searchActive = true;\n        }\n        const tab = this.getCurrentTab();\n        return this.queryService.getResults(query, auditEvents,\n            this.makeQueryIntentData({\n                tab: !!tab ? tab.name : undefined,\n                queryIntents: options.queryIntents,\n                queryAnalysis: options.queryAnalysis\n            })\n        ).pipe(\n            map((results) => {\n                this.searchActive = false;\n                return results;\n            })\n        );\n    }\n\n    getMultipleResults(queries: Query[], auditEvents?: AuditEvents): Observable<IMulti<Results>> {\n        if (!this.checkEmptySearch(queries)) {\n            return of({results: []});\n        }\n        return this.queryService.getMultipleResults(queries, auditEvents);\n    }\n\n    navigate(options?: SearchService.NavigationOptions, audit?: AuditEvents): Promise<boolean> {\n        if (!options) {\n            options = {};\n        }\n        if (!options.analyzeQueryText && this.results) {\n            options.queryIntents = this.results.queryIntents;\n            options.queryAnalysis = this.results.queryAnalysis;\n        }\n        if (!this.routingActive) {\n            this.handleNavigation(options, audit);\n            return Promise.resolve(true);\n        }\n        else {\n            // Save currentPath and currentSearch\n            let url = Utils.makeURL(this.router.url);\n            const currentPath = url.pathname;\n            url.searchParams.delete(\"$refresh\");\n            const currentSearch = decodeURIComponent(url.search);\n            // Set up queryParams and add current query\n            const queryParams = Utils.copy(this.queryStringParams);\n            if (this._query) {\n                queryParams.query = this._query.toJsonForQueryString();\n            }\n            // Set up history state\n            const state: SearchService.HistoryState = {\n                audit,\n                navigationOptions: options\n            };\n            const extras = {\n                queryParams,\n                state,\n                skipLocationChange: options.skipLocationChange\n            };\n            // Calculate new search\n            let path = options.path;\n            if (!path) {\n                path = currentPath;\n            }\n            url = Utils.makeURL(path);\n            path = url.pathname; // normalized\n            for (const key of Object.keys(queryParams)) {\n                url.searchParams.set(key, queryParams[key]);\n            }\n            const search = decodeURIComponent(url.search);\n            // If path and search are both the same as current then force navigation (without adding to history)\n            if (Utils.eq(currentPath, path) && Utils.eq(currentSearch, search)) {\n                // We want to force the navigation so that the query will be processed\n                extras.queryParams.$refresh = Utils.now.getTime();\n                // But don't update the browser url\n                extras.skipLocationChange = true;\n            }\n            return this.router.navigate([path], extras);\n        }\n    }\n\n    protected getHistoryState(): SearchService.HistoryState {\n        const navigation = this.router.getCurrentNavigation();\n        if (navigation) {\n            return navigation.extras && navigation.extras.state || {};\n        }\n        return window.history.state || {};\n    }\n\n    public isSearchRouteActive(): boolean {\n        const url = Utils.makeURL(this.router.url);\n        return this.isSearchRoute(url.pathname);\n    }\n\n    protected isSearchRoute(pathname: string): boolean {\n        return this.checkSearchRoute(pathname, this.options.routes);\n    }\n\n    protected isSkipSearchRoute(pathname: string): boolean {\n        return this.checkSearchRoute(pathname, this.options.skipSearchRoutes);\n    }\n\n    private checkSearchRoute(pathname: string, routes: string[] | undefined): boolean {\n        if (routes) {\n            for (const route of routes) {\n                if (Utils.endsWith(pathname, Utils.addUrl(\"/\", route))) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    public getQueryFromUrl(): Query | undefined {\n        let query: Query | undefined;\n        const url = Utils.makeURL(this.router.url);\n        if (this.isSearchRoute(url.pathname)) {\n            const jquery = url.searchParams.get(\"query\");\n            if (jquery) {\n                try {\n                    query = this.makeQuery().fromJson(jquery);\n                }\n                catch {}\n            }\n        }\n        return query;\n    }\n\n    protected ensureQueryFromUrl(): Query | undefined {\n        const query = this.getQueryFromUrl();\n        if (!query) {\n            this.clear(false);\n            return undefined;\n        }\n        else {\n            // The url query should be the same as the current query on SearchService unless\n            // it's the initial navigation or if the url is changed manually.\n            // In any case, we always set the query from the url. We only send a new-query\n            // event if the current query is empty so that we don't systematically create a\n            // new query \"session\" (ml-audit)\n            this.setQuery(query, !this._query);\n            return query;\n        }\n    }\n\n    protected handleLogin(): Promise<boolean> {\n        if (!this.loginService.complete) {\n            return Promise.resolve(false);\n        }\n        if (!!this.ensureQueryFromUrl()) {\n            return this.navigate();\n        }\n        else {\n            return Promise.resolve(true);\n        }\n    }\n\n    get routingActive(): boolean {\n        return !this.options.deactivateRouting;\n    }\n\n    set routingActive(value: boolean) {\n        this.options.deactivateRouting = !value;\n    }\n\n    protected makeAuditEventFromCurrentQuery(): AuditEvent | undefined {\n        const lastSelect = this.query.lastSelect();\n        if (lastSelect) {\n            const lastExpr = this.appService.parseExpr(lastSelect.expression);\n            if (lastExpr instanceof Expr) {\n                if (lastExpr.field === \"refine\") {\n                    return this.makeAuditEvent({\n                        type: AuditEventType.Search_Refine,\n                        detail: {\n                            text: lastExpr.value,\n                            itembox: lastSelect.facet,\n                            \"from-result-id\": !!this.results ? this.results.id : null\n                        }\n                    });\n                }\n                else {\n                    return this.makeAuditEvent({\n                        type: AuditEventType.Search_Select_Item,\n                        detail: {\n                            item: lastSelect as any,\n                            itembox: lastSelect.facet,\n                            itemcolumn: lastExpr.field,\n                            isitemexclude: lastExpr.not,\n                            \"from-result-id\": !!this.results ? this.results.id : null\n                        }\n                    });\n                }\n            }\n        }\n        else {\n            if (this.query.basket) {\n                return this.makeAuditEvent({\n                    type: AuditEventType.Basket_Open,\n                    detail: {\n                        basket: this.query.basket\n                    }\n                });\n            }\n            else {\n                return this.makeAuditEvent({\n                    type: AuditEventType.Search_Text,\n                    detail: {\n                        text: this.query.text,\n                        scope: this.query.scope\n                    }\n                });\n            }\n        }\n        return undefined;\n    }\n\n    protected handleNavigation(navigationOptions?: SearchService.NavigationOptions, audit?: AuditEvents): Promise<boolean> {\n        if (!this.loginService.complete) {\n            return Promise.resolve(false);\n        }\n        if (!this.appService.ccquery) {\n            return Promise.resolve(false);\n        }\n        let query = this._query;\n        if (this.routingActive) {\n            query = this.ensureQueryFromUrl();\n        }\n        this._events.next({type: \"update-query\", query});\n        this._queryStream.next(query);\n        if (!query) {\n            return Promise.resolve(true);\n        }\n        if (this.routingActive) {\n            const state = this.getHistoryState();\n            // console.log(\"history.state:\", state);\n            audit = state.audit;\n            navigationOptions = state.navigationOptions;\n        }\n        navigationOptions = navigationOptions || {};\n        const pathName = navigationOptions.path ? navigationOptions.path : Utils.makeURL(this.router.url).pathname;\n        if(navigationOptions.skipSearch || this.isSkipSearchRoute(pathName)) {\n            return Promise.resolve(true);\n        }\n        if (!audit) {\n            audit = this.makeAuditEventFromCurrentQuery();\n            if (audit && audit.type === AuditEventType.Search_Text) {\n                delete navigationOptions.queryIntents;\n                delete navigationOptions.queryAnalysis;\n            }\n        }\n        let observable = this.getResults(this.query, audit,\n            {\n                queryIntents: navigationOptions.queryIntents,\n                queryAnalysis: navigationOptions.queryAnalysis\n            });\n        Utils.subscribe(observable,\n            (results) => {\n                navigationOptions = navigationOptions || {};\n                this._setResults(results, {\n                    resuseBreadcrumbs: navigationOptions.reuseBreadcrumbs,\n                });\n                return results;\n            });\n        if (navigationOptions.selectTab) {\n            const afterSelectTabEvent: SearchService.AfterSelectTabEvent = {\n                type: \"after-select-tab\",\n                observable\n            };\n            this._events.next(afterSelectTabEvent);\n            observable = afterSelectTabEvent.observable;\n        }\n        return observable.pipe(\n            map(() => true),\n            catchError(() => of(false))).toPromise();\n    }\n\n    search(navigationOptions?: SearchService.NavigationOptions, audit?: AuditEvents): Promise<boolean> {\n        delete this.query.page;\n        delete this.query.spellingCorrectionMode;\n        return this.navigate(navigationOptions, audit);\n    }\n\n    searchText(path?: string): Promise<boolean> {\n        // Check for empty search preemptively to avoid clearing the current results in the most\n        // common case of the user entering empty search text in the search box\n        // The lower level check in getResults will handle less obvious cases (url editing etc)\n        if (!this.checkEmptySearch(this.query)) {\n            return Promise.resolve(false);\n        }\n        return this.search(\n            {\n                path,\n                analyzeQueryText: true\n            },\n            this.makeAuditEvent({\n                type: AuditEventType.Search_Text,\n                detail: {\n                    text: this.query.text,\n                    scope: this.query.scope,\n                    language: this.intlService.currentLocale.name\n                }\n            }));\n    }\n\n    searchRefine(text: string): Promise<boolean> {\n        // add \"refine\" name to facet value is mandatory as it's used in preview's query\n        this.query.addSelect(this.exprBuilder.makeRefineExpr(text), \"refine\");\n        return this.search(undefined,\n            this.makeAuditEvent({\n                type: AuditEventType.Search_Refine,\n                detail: {\n                    text: text,\n                    itembox: \"refine\",\n                    \"from-result-id\": !!this.results ? this.results.id : null\n                }\n            }));\n    }\n\n    gotoPage(page: number): Promise<boolean> {\n        this.query.page = page;\n        return this.navigate(undefined, this.makeAuditEvent({\n            type: AuditEventType.Search_GotoPage,\n            detail: {\n                page: page,\n                \"from-result-id\": !!this.results ? this.results.id : null\n            }\n        }));\n    }\n\n    /**\n     * Load more results and append them to previous results\n     */\n    loadMore() {\n        if(!this.fetchingLoadMore) {\n            let page = this.query.page || this.page;\n            page += (page <= this.pageCount) ? 1 : 0;\n            if (page <= this.pageCount) {\n                this.fetchingLoadMore = true;\n                this.query.page = page;\n\n                const auditEvents = this.makeAuditEvent({\n                    type: AuditEventType.Search_GotoPage,\n                    detail: {\n                        page: page,\n                        \"from-result-id\": !!this.results ? this.results.id : null\n                    }\n                })\n\n                this.getResults(this.query, auditEvents)\n                .subscribe(results => {\n                    if(this.results && results) {\n                        this.results.records = [...this.results?.records || [], ...results.records] || [];\n                        this._resultsStream.next(this.results);\n                    }\n                    this.fetchingLoadMore = false;\n                });\n            }\n        }\n    }\n\n    /**\n     * @returns true if more are available otherwise false\n     */\n    hasMore(): boolean {\n        const page = this.query.page || this.page;\n        return (page < this.pageCount);\n    }\n\n    didYouMean(text: string, context: \"search\" | \"refine\", kind: DidYouMeanKind): Promise<boolean> {\n        if (context === \"search\") {\n            this.query.text = text;\n        }\n        else {\n            const refineSelect = this.query.findSelect(\"refine\");\n            if (refineSelect) {\n                refineSelect.expression = \"refine:\" + ExprParser.escape(text);\n            }\n        }\n        this.query.spellingCorrectionMode = \"dymonly\";\n        return this.navigate(undefined, this.makeAuditEvent({\n            type: kind === DidYouMeanKind.Original ? AuditEventType.Search_DidYouMean_Original : AuditEventType.Search_DidYouMean_Correction,\n            detail: {\n                text: text\n            }\n        }));\n    }\n\n    getCurrentRecordIds(): string[]{\n        if (this.results && this.results.records) {\n            return this.results.records.map(record => record.id);\n        }\n        return [];\n    }\n\n    getRecordFromId(id: string): Record | undefined {\n        if (this.results && this.results.records) {\n            return this.results.records.find(record => Utils.eq(record.id, id));\n        }\n        return undefined;\n    }\n\n    addFieldSelect(field: string, items: ValueItem | ValueItem[], options?: SearchService.AddSelectOptions): boolean {\n        if (items && (!Utils.isArray(items) || items.length > 0)) {\n            let expr = this.exprBuilder.makeFieldExpr(field, items, options?.and);\n            if (options?.not) {\n                expr = this.exprBuilder.makeNotExpr(expr);\n            }\n            this.query.addSelect(expr, options?.facetName);\n            return true;\n        }\n        return false;\n    }\n\n\n    get lastRefineText(): string {\n        if (this.breadcrumbs) {\n            const refineExpr = this.breadcrumbs.findSelect(\"refine\");\n            if (refineExpr) {\n                return ExprParser.unescape(refineExpr.toString(false));\n            }\n        }\n        return \"\";\n    }\n\n    get hasRelevance(): boolean {\n        if (!this.breadcrumbs) {\n            return false;\n        }\n        if (this.breadcrumbs.textExpr?.hasRelevance) {\n            return true;\n        }\n        const refineExpr = this.breadcrumbs.findSelect(\"refine\");\n        return refineExpr?.hasRelevance || false;\n    }\n\n    selectTab(arg: string | Tab, options: SearchService.NavigationOptions = {}): Promise<boolean> {\n        options.selectTab = true;\n        const tabName = typeof arg === 'string' ? arg : arg.name;\n        this.query.tab = tabName;\n        delete this.query.queryId; // SBA-154\n        this._events.next({type: \"before-select-tab\", query: this.query});\n        return this.search(options,\n            this.makeAuditEvent({\n                type: AuditEventType.Search_GotoTab,\n                detail: {\n                    tab: tabName,\n                    \"from-result-id\": !!this.results ? this.results.id : null\n                }\n            }));\n    }\n\n    selectScope(scope: string) {\n        this.query.scope = scope;\n    }\n\n    getTab(tabName: string): Tab | undefined {\n        if (this.results && this.results.tabs) {\n            for (const tab of this.results.tabs) {\n                if (Utils.equals(tab.name, tabName)) {\n                    return tab;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    getCurrentTab(): Tab | undefined {\n        if (this.results && this.results.tab) {\n            return this.getTab(this.results.tab);\n        }\n        return undefined;\n    }\n\n    notifyOpenOriginalDocument(record: Record, resultId?: string): void {\n        const results = this.results && this.results.records && this.results.records.includes(record) ? this.results : undefined;\n        this._events.next({ type: \"open-original-document\", record });\n        const querylang = this.results?.queryAnalysis?.queryLanguage\n            || this.query?.questionLanguage\n            || this.appService?.ccquery?.questionLanguage;\n        this.auditService.notifyDocument(\n            AuditEventType.Click_ResultLink,\n            record,\n            results || resultId || \"\",\n            {\n                text: this.query.text,\n                querylang,\n            },\n            {\n                queryhash: results ? results.rfmQueryHash : undefined,\n                querytext: this.query.text,\n                querylang: querylang\n            }\n        );\n    }\n\n    checkBeforeSearch(cancelReasons?: string[]): boolean {\n        const beforeSearch: SearchService.BeforeSearchEvent = {type: \"before-search\"};\n        this._events.next(beforeSearch);\n        if (cancelReasons && beforeSearch.cancelReasons) {\n            cancelReasons.splice(0, 0, ...beforeSearch.cancelReasons);\n        }\n        return !beforeSearch.cancel;\n    }\n}\n\nexport module SearchService {\n    export interface GetResultsOptions {\n        queryIntents?: QueryIntent[];\n        queryAnalysis?: QueryAnalysis;\n        searchInactive?: boolean;   // default \"false\"\n    }\n\n    export interface SetResultsOptions {\n        resuseBreadcrumbs?: boolean;\n        advanced?: boolean;\n    }\n\n    export interface AddSelectOptions {\n        not?: boolean;      // default \"false\"\n        and?: boolean;      // default \"false\"\n        facetName?: string; // default: undefined\n    }\n\n    export interface NavigationOptions {\n        path?: string; // absolute path, current path used if not specified\n        reuseBreadcrumbs?: boolean;\n        selectTab?: boolean;\n        analyzeQueryText?: boolean;\n        queryIntents?: QueryIntent[];\n        queryAnalysis?: QueryAnalysis;\n        skipLocationChange?: boolean;\n        skipSearch?: boolean;\n    }\n\n    export interface HistoryState {\n        audit?: AuditEvents;\n        navigationOptions?: NavigationOptions;\n    }\n\n    export interface Event {\n        type: \"new-query\" | \"update-query\" | \"make-query\" | \"before-new-results\" | \"new-results\" | \"make-query-intent-data\" |\n            \"process-query-intent-action\" | \"make-audit-event\" |\n            \"before-select-tab\" | \"after-select-tab\" | \"clear\" | \"open-original-document\" | \"before-search\";\n    }\n\n    export interface NewQueryEvent extends Event {\n        type: \"new-query\";\n        query: Query | undefined;\n    }\n\n    export interface UpdateQueryEvent extends Event {\n        type: \"update-query\";\n        query: Query | undefined;\n    }\n\n    export interface MakeQueryEvent extends Event {\n        type: \"make-query\";\n        query: Query;\n    }\n\n    export interface BeforeNewResultsEvent extends Event {\n        type: \"before-new-results\";\n        results: Results | undefined;\n    }\n\n    export interface NewResultsEvent extends Event {\n        type: \"new-results\";\n        results: Results | undefined;\n    }\n\n    export interface MakeQueryIntentDataEvent extends Event {\n        type: \"make-query-intent-data\";\n        intentData: QueryIntentData;\n    }\n\n    export interface ProcessQueryIntentActionEvent extends Event {\n        type: \"process-query-intent-action\";\n        action: QueryIntentAction;\n        intent: QueryIntent;\n        analysis: QueryAnalysis;\n        actionProcessed?: boolean;\n    }\n\n    export interface MakeAuditEventEvent extends Event {\n        type: \"make-audit-event\";\n        event: AuditEvent;\n    }\n\n    export interface BeforeSelectTabEvent extends Event {\n        type: \"before-select-tab\";\n        query: Query;\n    }\n\n    export interface AfterSelectTabEvent extends Event {\n        type: \"after-select-tab\";\n        observable: Observable<Results>;\n    }\n\n    export interface ClearEvent extends Event {\n        type: \"clear\";\n        path?: string;\n    }\n\n    export interface OpenOriginalDocument extends Event {\n        type: \"open-original-document\";\n        record: Record;\n    }\n\n    export interface BeforeSearchEvent extends Event {\n        type: \"before-search\";\n        cancel?: boolean;\n        cancelReasons?: string[];\n    }\n\n    export type Events =\n        NewQueryEvent |\n        UpdateQueryEvent |\n        MakeQueryEvent |\n        BeforeNewResultsEvent |\n        NewResultsEvent |\n        MakeQueryIntentDataEvent |\n        ProcessQueryIntentActionEvent |\n        MakeAuditEventEvent |\n        BeforeSelectTabEvent |\n        AfterSelectTabEvent |\n        ClearEvent |\n        OpenOriginalDocument |\n        BeforeSearchEvent;\n\n    export const DefaultPageSize = 20;\n}\n","import {Injectable, InjectionToken, Optional, Inject, OnDestroy} from \"@angular/core\";\nimport {Router} from \"@angular/router\";\nimport {SearchService} from \"./search.service\";\nimport {Subscription, Observable, of} from 'rxjs';\nimport {Utils} from \"@sinequa/core/base\";\nimport {AuditEventType, Results} from \"@sinequa/core/web-services\";\n\nexport interface FirstPageOptions {\n    displayOnHomePage?: boolean;\n}\n\nexport const FIRST_PAGE_OPTIONS = new InjectionToken<FirstPageOptions>(\"FIRST_PAGE_OPTIONS\");\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class FirstPageService implements OnDestroy {\n    private searchSubscription: Subscription;\n    firstPage: Results;\n\n    constructor(\n        @Optional() @Inject(FIRST_PAGE_OPTIONS) protected options: FirstPageOptions,\n        protected searchService: SearchService,\n        protected router: Router\n    ) {\n        if (!this.options) {\n            this.options = {};\n        }\n        this.searchSubscription = this.searchService.events.subscribe(\n            (event) => {\n                if (event.type === \"clear\") {\n                    if (this.displayOnHomePage(event.path)) {\n                        Utils.subscribe(this.getFirstPage(),\n                            (results) => {\n                                this.searchService.setResults(results);\n                            });\n                    }\n                }\n            }\n        );\n    }\n\n    ngOnDestroy() {\n        this.searchSubscription.unsubscribe();\n    }\n\n    /**\n     * @ignore\n     * legacy\n     */\n    get isFirstPage(): boolean {\n        return this.isCurrentSearchResults;\n    }\n\n    get isCurrentSearchResults(): boolean {\n        return !!this.searchService.results && this.searchService.results === this.firstPage;\n    }\n\n    displayOnHomePage(path?: string): boolean {\n        if (Utils.isArray(this.options.displayOnHomePage)) {\n            if (!path) {\n                const url = Utils.makeURL(this.router.url);\n                path = url.pathname;\n            }\n            for (const path1 of this.options.displayOnHomePage) {\n                if (Utils.endsWith(path, Utils.addUrl(\"/\", path1))) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            return !!this.options.displayOnHomePage;\n        }\n    }\n\n    getFirstPage(): Observable<Results> {\n        if (this.firstPage) {\n            return of<Results>(this.firstPage);\n        }\n        const query = this.searchService.makeQuery();\n        query.isFirstPage = true;\n        const observable = this.searchService.getResults(query, {\n            type: AuditEventType.Search_FirstPage\n        }, {\n            searchInactive: true\n        });\n        Utils.subscribe(observable,\n            (results) => {\n                this.firstPage = results;\n                return results;\n            });\n        return observable;\n    }\n}\n","<ol class=\"breadcrumb\">\n    <li class=\"breadcrumb-item\">\n        <a href=\"#\" (click)=\"home()\" title=\"Home\"><span class=\"fas fa-home\"></span></a>\n    </li>\n    <ng-container *ngFor=\"let item of searchService.breadcrumbs?.items\">\n        <li *ngIf=\"!item.hidden\" class=\"breadcrumb-item {{item.active ? 'active' : ''}} sq-breadcrumb-item  sq-breadcrumb-item-{{getField(item)}}\"><!--\n            --><a *ngIf=\"!item.active\" href=\"#\" (click)=\"selectItem(item)\" [innerHTML]=\"item.display | sqExpr:{withFields: displayFieldNames, asHTML: true}\"></a><!--\n            --><span *ngIf=\"item.active\" [innerHTML]=\"item.display | sqExpr:{withFields: displayFieldNames, asHTML: true}\"></span>\n            <span *ngIf=\"allowDeletion\" class=\"fas fa-times\" role=\"button\" (click)=\"removeItem(item)\" title=\"{{'msg#breadcrumbs.itemRemove' | sqMessage}}\"></span>\n        </li>\n    </ng-container>\n</ol>","import {Component, Input} from \"@angular/core\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\nimport {BreadcrumbsItem} from \"../../breadcrumbs\";\n\n@Component({\n    selector: \"sq-breadcrumbs\",\n    templateUrl: \"./breadcrumbs.html\",\n    styleUrls: [\"./breadcrumbs.css\"]\n})\nexport class BsBreadcrumbs {\n    @Input() results: Results;\n    @Input() allowDeletion: boolean = true;\n    @Input() displayFieldNames: boolean = true;\n\n    constructor(\n        public searchService: SearchService) {\n    }\n\n    getField(item: BreadcrumbsItem): string {\n        if (item.expr) {\n            if (item.expr.field) {\n                return item.expr.field;\n            }\n            else {\n                if (!item.expr.isStructured) {\n                    return \"text\";\n                }\n                else {\n                    const fields = item.expr.getFields();\n                    return fields.join(\"-\");\n                }\n            }\n        }\n        return \"unknown\";\n    }\n\n    home() {\n        this.searchService.home();\n        return false;\n    }\n\n    selectItem(item: BreadcrumbsItem) {\n        this.searchService.selectBreadcrumbsItem(item);\n        return false;\n    }\n\n    removeItem(item: BreadcrumbsItem) {\n        this.searchService.removeBreadcrumbsItem(item);\n    }\n}","<div *ngIf=\"!!item\" class=\"sq-did-you-mean sq-text {{'sq-' + context}}\" [ngSwitch]=\"results.didYouMean.spellingCorrectionMode\">\n    <ng-container *ngSwitchCase=\"'DYMOnly'\">\n        {{'msg#didYouMean.dymonlyBeforeCorrected' | sqMessage}}<a class=\"sq-did-you-mean-corrected\" href=\"#\" (click)=\"selectCorrected()\">{{item.corrected}}</a>{{'msg#didYouMean.dymonlyAfterCorrected' | sqMessage}}\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'Correct'\">\n        {{'msg#didYouMean.correctBeforeCorrected' | sqMessage}}<a class=\"sq-did-you-mean-corrected\" href=\"#\" (click)=\"selectCorrected()\">{{item.corrected}}</a>{{'msg#didYouMean.correctBeforeOriginal' | sqMessage}}<a class=\"sq-did-you-mean-original\" href=\"#\" (click)=\"selectOriginal()\">{{item.original}}</a>{{'msg#didYouMean.correctAfterOriginal' | sqMessage}}\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'Smart'\">\n        {{'msg#didYouMean.smartBeforeOriginal' | sqMessage}}<a class=\"sq-did-you-mean-original\" href=\"#\" (click)=\"selectOriginal()\">{{item.original}}</a>{{'msg#didYouMean.smartBeforeCorrected' | sqMessage}}<a class=\"sq-did-you-mean-original\" href=\"#\" (click)=\"selectCorrected()\">{{item.corrected}}</a>{{'msg#didYouMean.smartAfterCorrected' | sqMessage}}\n    </ng-container>\n</div>","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Results, DidYouMeanItem, DidYouMeanKind} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-did-you-mean\",\n    templateUrl: \"./did-you-mean.html\",\n    styleUrls: [\"./did-you-mean.css\"]\n})\nexport class BsDidYouMean implements OnChanges {\n    @Input() results: Results;\n    @Input() context: \"search\" | \"refine\" = \"search\";\n    item: DidYouMeanItem | undefined;\n\n    constructor(\n        public searchService: SearchService) {\n    }\n\n    private handleResults() {\n        this.item = undefined;\n        if (this.results && this.results.didYouMean) {\n            if (this.context === \"search\") {\n                const item = this.results.didYouMean.text;\n                if (item && item.corrected) {\n                    this.item = item;\n                }\n            }\n            else {\n                const refineSelect = this.searchService.query.findSelect(\"refine\");\n                if (refineSelect && Utils.startsWith(refineSelect.expression, \"refine:\") && !!this.results.didYouMean.refine) {\n                    const dymItem = this.results.didYouMean.refine[this.results.didYouMean.refine.length - 1];\n                    if (dymItem.corrected) {\n                        this.item = dymItem;\n                    }\n                }\n            }\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!!changes[\"results\"]) {\n            this.handleResults();\n        }\n    }\n\n    selectOriginal() {\n        if (this.item) {\n            this.searchService.didYouMean(this.item.original, this.context, DidYouMeanKind.Original);\n        }\n        return false;\n    }\n\n    selectCorrected() {\n        if (this.item) {\n            this.searchService.didYouMean(this.item.corrected, this.context, DidYouMeanKind.Corrected);\n        }\n        return false;\n    }\n}","<div class=\"btn-toolbar\" *ngIf=\"!!results\">\n    <div class=\"btn-group\"\n        [sq-action-buttons]=\"{\n            items: [pageSizingAction],\n            autoAdjust: true,\n            rightAligned: rightAligned\n        }\"></div>\n</div>\n","import {Component, OnChanges, SimpleChanges, Input} from '@angular/core';\nimport {Results} from \"@sinequa/core/web-services\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {Action} from \"@sinequa/components/action\";\nimport {SearchService} from \"../../search.service\";\n//import {ResultsView} from '@sinequa/components/results-view';\n\n// TODO restore functionality of storing page size in user settings ?\n\n/**\n * Component for choosing the page size of the results view\n *\n */\n@Component({\n    selector: 'sq-page-size-selector',\n    templateUrl: './page-size-selector.html'\n})\nexport class BsPageSizeSelector implements OnChanges {\n    @Input() results: Results;\n    //@Input() resultsView: ResultsView;\n    @Input() showInRegularView: boolean = true;\n    @Input() showInCustomization: boolean;\n    @Input() pageSizes: number[];\n    @Input() rightAligned: boolean;\n\n    public pageSizingAction: Action;\n\n    private availableSizes: number[];\n    private currentPageSize: number;\n\n    constructor(\n        private appService: AppService,\n        private searchService: SearchService\n    ) { }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.refreshVisualisation();\n    }\n\n    /*\n    private get globalPageSize(): number {\n        const globalQueryParams = this.userSettingsService.getUserSettings().queryParams;\n        return globalQueryParams ? globalQueryParams.pageSize : undefined;\n    }\n    */\n\n    private get configPageSize(): number {\n        return this.appService.ccquery ? this.appService.ccquery.pageSize : 0;\n    }\n\n    private get defaultPageSize(): number {\n        //let res = this.globalPageSize;\n        //if (!res) {\n        let res = this.configPageSize;\n        if (!res) {\n            res = SearchService.DefaultPageSize;\n        }\n        //}\n\n        return res;\n    }\n\n    private buildPageSizingAction(): Action {\n        this.availableSizes = this.pageSizes ? this.pageSizes.slice(0) : [];\n        this.availableSizes.sort((a, b) => a - b);\n        const children: Action[] = [];\n\n        children.push(new Action({\n            text: 'msg#pageSizeSelector.defaultPageSize',\n            messageParams: { values: { size: this.defaultPageSize } },\n            data: undefined, // To make sure that setCurrentSize() always chooses the default choice text.\n            action: (item: Action, event: Event) => {\n                this.updatePageSize(item.data);\n            }\n        }));\n\n        for (const size of this.availableSizes) {\n            children.push(new Action({\n                text: size.toString(),\n                data: size,\n                action: (item: Action, event: Event) => {\n                    this.updatePageSize(item.data);\n                }\n            }));\n        }\n\n        return new Action({\n            icon: 'fas fa-arrows-alt-v',\n            text: 'msg#pageSizeSelector.pageSizeChoice',\n            children: children\n        });\n    }\n\n    private refreshVisualisation(): void {\n        this.pageSizingAction = this.buildPageSizingAction();\n        if (this.results) {\n            //const queryParams = this.userSettingsService.getViewQueryParams(this.resultsView.name);\n            //this.currentPageSize = queryParams.pageSize;\n            this.setCurrentSize(this.currentPageSize);\n        }\n    }\n\n    private setCurrentSize(size: number): void {\n        if (!size) {\n            this.pageSizingAction.text = 'msg#pageSizeSelector.defaultPageSizeChoice';\n            this.pageSizingAction.messageParams = { values: { size: this.defaultPageSize } };\n        }\n        else {\n            const selectedAction = this.pageSizingAction.children?.find(action => action.data === size);\n            this.pageSizingAction.text = 'msg#pageSizeSelector.pageSizeChoice';\n            this.pageSizingAction.messageParams = { values: { size: selectedAction?.data } };\n        }\n    }\n\n    private updatePageSize(size: number): void {\n        if (this.currentPageSize !== size) {\n            //this.userSettingsService.saveResultsViewPageSize(this.resultsView.name, size);\n            this.currentPageSize = size;\n\n            this.searchService.query.pageSize = size;\n            this.searchService.search();\n        }\n\n        this.setCurrentSize(size);\n    }\n}\n","<ul class=\"pagination my-0\" *ngIf=\"pageCount > 1\">\n    <li *ngFor=\"let item of items\" \n        title=\"{{item.title | sqMessage:{values: {page: item.page} } }}\" \n        class=\"page-item\" \n        [ngClass]=\"{'active': item.active, 'disabled': item.disabled, 'sq-navigation': item.isNavigation, 'sq-page': item.isPage, 'sq-ellipsis': item.isEllipsis}\" \n        (click)=\"gotoPage(item.page)\">\n        <a href=\"javascript:void(0)\" class=\"page-link\"> \n            <span>{{item.display | sqNumber}}</span>\n        </a>            \n    </li>\n</ul>","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-pager\",\n    templateUrl: \"./pager.html\",\n})\nexport class BsPager implements OnChanges {\n    @Input() results: Results;\n    @Input() showNavigation: boolean = true;\n    @Input() showFirstLast: boolean = true;\n    @Input() showPages: boolean = true;\n    @Input() endPages: number = 1;\n    @Input() pages: number = 5;\n\n    items: BsPager.Item[] | undefined;\n\n    private currentPage: number;\n    pageCount: number = 0;\n\n    static FIRST_PAGE = \"«\";\n    static PREVIOUS_PAGE = \"‹\";\n    static NEXT_PAGE = \"›\";\n    static LAST_PAGE = \"»\";\n    static ELLIPSIS = \"…\";\n\n    constructor(\n        private searchService: SearchService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"results\"]) {\n            this.makeItems();\n        }\n    }\n\n    makeItems() {\n        this.pageCount = this.searchService.pageCount;\n        this.currentPage = this.searchService.page;\n        if (this.pageCount === 0) {\n            this.items = undefined;\n            return;\n        }\n        let endPages = this.endPages;\n        if (!endPages || endPages <= 0) {\n            endPages = 1;\n        }\n\n        const endWidth = endPages + 1; // +1 for the …\n\n        let pages = this.pages;\n        if (!pages) {\n            pages = 3 + endWidth * 2;\n        }\n        if (pages < 3 + endWidth * 2) {\n            pages = 3 + endWidth * 2; // 3 is the minimum number of pages to show between the … separators\n        }\n        let split1 = -1, split2 = -1;\n        if (this.pageCount <= pages) {\n            pages = this.pageCount;\n        }\n        else {\n            // pages must be an odd number to accommodate:  (First page) … (Current page - 1) (Current page) (Current page + 1) … (Last page)\n            pages = Math.floor(pages / 2) * 2 + 1;\n            const mid = pages - endWidth * 2;\n            const delta = Math.floor(mid / 2);\n            if ((this.currentPage - delta) > endPages + 1 + 1) {\n                split1 = this.currentPage - delta;\n            }\n            if ((this.currentPage + delta) < (this.pageCount - endWidth)) {\n                split2 = this.currentPage + delta;\n            }\n            if (split1 === -1 && split2 !== -1) {\n                split2 += endPages + 1 + 1 - (this.currentPage - delta);\n            }\n            else if (split2 === -1 && split1 !== -1)  {\n                split1 -= (this.currentPage + delta) - (this.pageCount - endWidth);\n            }\n        }\n        this.items = [];\n        if (this.showNavigation) {\n            if (this.showFirstLast) {\n                this.items.push(new BsPager.Item(1, this.currentPage, BsPager.FIRST_PAGE, \"msg#pager.firstPage\"));\n            }\n            this.items.push(new BsPager.Item(this.currentPage > 1 ? this.currentPage - 1 : 1, this.currentPage, BsPager.PREVIOUS_PAGE, \"msg#pager.previousPage\"));\n        }\n        if (this.showPages) {\n            for (let i = 1, ic = split1 !== -1 ? endPages : split2 !== -1 ? split2 : this.pageCount; i <= ic; i++) {\n                this.items.push(new BsPager.Item(i, this.currentPage));\n            }\n            if (split1 !== -1) {\n                this.items.push(new BsPager.Item(0, this.currentPage, BsPager.ELLIPSIS));\n                for (let i = split1, ic = split2 !== -1 ? split2 : this.pageCount; i <= ic; i++) {\n                    this.items.push(new BsPager.Item(i, this.currentPage));\n                }\n            }\n            if (split2 !== -1) {\n                this.items.push(new BsPager.Item(0, this.currentPage, BsPager.ELLIPSIS));\n                for (let i = this.pageCount - endPages + 1, ic = this.pageCount; i <= ic; i++) {\n                    this.items.push(new BsPager.Item(i, this.currentPage));\n                }\n            }\n        }\n        if (this.showNavigation) {\n            this.items.push(new BsPager.Item(this.currentPage < this.pageCount ? this.currentPage + 1 : this.pageCount, this.currentPage, BsPager.NEXT_PAGE, \"msg#pager.nextPage\"));\n            if (this.showFirstLast) {\n                this.items.push(new BsPager.Item(this.pageCount, this.currentPage, BsPager.LAST_PAGE, \"msg#pager.lastPage\"));\n            }\n        }\n    }\n\n    gotoPage(page: number) {\n        if (page !== this.currentPage && page > 0) {\n            this.searchService.gotoPage(page);\n        }\n    }\n}\n\nexport namespace BsPager {\n    export class Item {\n        constructor(\n            public page: number,\n            public currentPage: number,\n            public display?: string | number,\n            public title?: string) {\n            if (display) {\n                this.display = display;\n            }\n            else {\n                this.display = page;\n            }\n            if (Utils.isUndefined(title) && page) {\n                this.title = \"msg#pager.pageNumberTitle\";\n            }\n        }\n\n        get active(): boolean {\n            return this.isPage && (this.currentPage === this.page);\n        }\n\n        get disabled(): boolean {\n            return this.isEllipsis || ((this.currentPage === this.page) && this.isNavigation);\n        }\n\n        get isNavigation(): boolean {\n            return this.display === BsPager.FIRST_PAGE ||\n                this.display === BsPager.PREVIOUS_PAGE ||\n                this.display === BsPager.NEXT_PAGE ||\n                this.display === BsPager.LAST_PAGE;\n        }\n\n        get isPage(): boolean {\n            return !!this.page && !this.isNavigation;\n        }\n\n        get isEllipsis(): boolean {\n            return this.display === BsPager.ELLIPSIS;\n        }\n    }\n}","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {AuditEvent, AuditEventType, CCSortingChoice, Results} from \"@sinequa/core/web-services\";\nimport {Action} from \"@sinequa/components/action\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-sort-selector\",\n    templateUrl: \"./sort-selector.html\"\n})\nexport class BsSortSelector implements OnChanges {\n    @Input() results: Results;  // Needed to detect Changes\n    @Input() rightAligned: boolean;\n    @Input() style: string;\n    @Input() size: string;\n    sortAction: Action | undefined;\n\n    constructor(\n        public appService: AppService,\n        public searchService: SearchService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"results\"]) {\n            this.buildSortAction();\n        }\n    }\n\n    private setCurrentSort(name: string) {\n        if (this.sortAction) {\n            const sortingChoices = this.getSortingChoices();\n            const current = sortingChoices && sortingChoices.find((value) => {\n                return Utils.eqNC(value.name, name);\n            });\n            if (current) {\n                const queryOrderBy = this.searchService.query.orderBy;\n                this.sortAction.text = !!queryOrderBy ? \"msg#sortSelector.sortOther\" : current.display || current.name;\n                this.sortAction.icon = !!queryOrderBy ? 'fas fa-sort'\n                    : this.isAscendingSort(current.orderByClause) ? 'fas fa-sort-amount-up'\n                    : this.isDescendingSort(current.orderByClause) ? 'fas fa-sort-amount-down' : 'fas fa-sort';\n            }\n            else {\n                this.sortAction.text = \"msg#sortSelector.sortOther\";\n                this.sortAction.icon = \"fas fa-sort\";\n            }\n            this.sortAction.messageParams = {values: {text: this.sortAction.text}}; // for title\n        }\n    }\n\n    private selectSort(sortingChoice: CCSortingChoice) {\n        this.setCurrentSort(sortingChoice.name);\n        this.searchService.query.sort = sortingChoice.name;\n        const audit: AuditEvent = {\n            type: AuditEventType.Search_Sort,\n            detail: {\n                sort: sortingChoice.name,\n                orderByClause: sortingChoice.orderByClause,\n            }\n        };\n        this.searchService.search(undefined, audit);\n    }\n\n    private buildSortAction() {\n        const sortingChoices = this.getSortingChoices();\n        if (!sortingChoices || sortingChoices.length === 0) {\n            this.sortAction = undefined;\n            return;\n        }\n        this.sortAction = new Action({\n            title: \"msg#sortSelector.sortByTitle\",\n            children: sortingChoices\n                .filter(sortingChoice => this.searchService.hasRelevance || !Utils.includes(sortingChoice.orderByClause, \"globalrelevance\"))\n                .map(sortingChoice => new Action({\n                    icon: this.isAscendingSort(sortingChoice.orderByClause) ? 'fas fa-sort-amount-up'\n                            : this.isDescendingSort(sortingChoice.orderByClause) ? 'fas fa-sort-amount-down' : '',\n                    text: sortingChoice.display || sortingChoice.name,\n                    data: sortingChoice,\n                    action: (item: Action, event: Event) => {\n                        this.selectSort(item.data);\n                    }\n                }))\n        });\n        if (!!this.searchService.results) {\n            this.setCurrentSort(this.searchService.results.sort);\n        }\n    }\n\n    private isAscendingSort(orderByClause: string): boolean {\n        if (!orderByClause) {\n            return false;\n        }\n\n        const lastElement: string = orderByClause.substring(orderByClause.lastIndexOf(' ') + 1);\n        return Utils.eqNC('asc', lastElement);\n    }\n\n    private isDescendingSort(orderByClause: string): boolean {\n        if (!orderByClause) {\n            return false;\n        }\n\n        const lastElement: string = orderByClause.substring(orderByClause.lastIndexOf(' ') + 1);\n        return Utils.eqNC('desc', lastElement);\n    }\n\n    private isTabSearch(): boolean {\n        const query = this.appService.ccquery;\n        if (!query)\n            return false;\n        const tabSearch = query.tabSearch;\n        return !(!tabSearch || !tabSearch.column || !tabSearch.isActive ||\n            !tabSearch.tabs || tabSearch.tabs.length === 0);\n    }\n\n    private getSortingChoices(): CCSortingChoice[] | null | undefined {\n        if (this.isTabSearch()) {\n            const tabName = this.searchService.results && this.searchService.results.tab;\n            if (tabName && this.appService.ccquery) {\n                for (const t of this.appService.ccquery.tabSearch.tabs) {\n                    if (t.name === tabName) {\n                        const s = t.sortingChoices;\n                        if (s && s.length > 0)\n                            return s;\n                        else\n                            break;\n                    }\n                }\n            }\n        }\n        const q = this.appService.ccquery;\n        return q && q.sortingChoices;\n    }\n}","<div class=\"btn-toolbar\" role=\"toolbar\" aria-label=\"Toolbar\">\n    <div class=\"btn-group\" [hidden]=\"!searchService.haveRecords || !sortAction\" [sq-action-buttons]=\"{items: [sortAction], style: style, autoAdjust: true, rightAligned: rightAligned, size: size}\"></div>\n</div>","<ul *ngIf=\"!!searchtabs || !!customtabs\" class=\"nav nav-tabs mb-1\">\n    <ng-container *ngIf=\"!!searchtabs\">\n        <li *ngFor=\"let tab of searchtabs\" class=\"nav-item\">\n            <a href=\"#\" class=\"nav-link\" [ngClass]=\"{'active' : tab == currentTab, 'disabled': tab.count == 0}\" (click)=\"selectTab(tab)\">\n                <i [ngClass]=\"iconMap[tab.name]\"></i>\n                {{(tab.display || tab.name) | sqMessage}} \n                <span class=\"count\">({{tab.count | sqNumber}})</span>\n            </a>\n        </li>\n    </ng-container>\n    <ng-container *ngIf=\"!!customtabs\">\n        <li *ngFor=\"let tab of customtabs\" class=\"nav-item\">\n            <a href=\"#\" class=\"nav-link\" [ngClass]=\"{'active' : tab == currentTab, 'disabled': tab.count == 0}\" (click)=\"selectTab(tab, false)\">\n                <i [ngClass]=\"iconMap[tab.name]\"></i>\n                {{(tab.display || tab.name) | sqMessage}}\n                <span class=\"count\" *ngIf=\"tab.count >= 0\">({{tab.count | sqNumber}})</span>\n            </a>\n        </li>\n    </ng-container>\n</ul>","import {Component, Input, Output, OnChanges, SimpleChanges, EventEmitter} from \"@angular/core\";\nimport {Results, Tab} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-tabs\",\n    templateUrl: \"./tabs.html\"\n})\nexport class BsTabs implements OnChanges {\n\n    @Input() results: Results;\n\n    /**\n     * List of custom tabs (complementing the search query tabs)\n     * Actions can be performed on click via the events Output.\n     *\n     * When the results are updated (new search text, facet\n     * selection...), the custom tab selection is discarded.\n     * If the custom action updates the results, the tab selection\n     * will revert to previous state unless the query is updated.\n     */\n    @Input() customtabs: Tab[];\n\n    /**\n     * Associate icon to a tab name ({tab1 : 'icon class 1', tab2 : ...})\n     */\n    @Input() iconMap: {[key: string]: string} = {};\n\n    /**\n     * Emits an event when a tab is selected\n     */\n    @Output() events = new EventEmitter<Tab>();\n\n    currentTab: Tab | undefined;\n    searchtabs: Tab[] | undefined;\n\n    constructor(\n        private searchService: SearchService) {\n    }\n\n    update() {\n        if (this.results && this.results.tabs) {\n            this.currentTab = this.searchService.getCurrentTab();\n            this.searchtabs = this.results.tabs;\n        }\n        else {\n            this.currentTab = undefined;\n            this.searchtabs = undefined;\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!!changes[\"results\"]) {\n            this.update();\n        }\n    }\n\n    selectTab(tab: Tab, search = true) {\n        if (tab !== this.currentTab) {\n            if(search){\n                this.searchService.selectTab(tab); // the currentTab will be updated in update()\n            } else {\n                this.currentTab = tab;\n            }\n            this.events.next(tab);\n        }\n        return false;   // Stop following href\n    }\n}","import {Component, Input} from '@angular/core';\nimport {SearchService} from \"../../search.service\";\n\n// From https://stackoverflow.com/questions/34773266/how-to-write-css-keyframes-to-indeterminate-material-design-progress-bar\n\n@Component({\n    selector: 'sq-loading-bar',\n    template: `\n<div class=\"slider\" *ngIf=\"isActive()\">\n\t<div class=\"line\"></div>\n  <div class=\"subline inc\"></div>\n  <div class=\"subline dec\"></div>\n</div>\n    `,\n    styles: [`\n\n.slider{\n  position:absolute;\n  width:100%;\n  height:3px;\n  overflow: hidden;\n  z-index: 3;\n}\n\n.line{\n  position:absolute;\n  opacity: 0.4;\n  background:#4a8df8;\n  width:150%;\n  height:5px;\n}\n\n.subline{\n  position:absolute;\n  background:#4a8df8;\n  height:5px;\n}\n.inc{\nanimation: increase 1s infinite;\n}\n.dec{\nanimation: decrease 1s 0.25s infinite;\n}\n\n@keyframes increase {\n from { left: -5%; width: 5%; }\n to { left: 130%; width: 100%;}\n}\n@keyframes decrease {\n from { left: -80%; width: 80%; }\n to { left: 110%; width: 10%;}\n}\n    `]\n})\nexport class BsLoadingBar {\n  /**\n   * active can provided as a boolean to activate the loading bar.\n   * If it is not provided, the SearchService searchActive property is used.\n   */\n  @Input() active?: boolean;\n\n  constructor(\n    public searchService: SearchService\n  ) { }\n\n  isActive() {\n    return this.active === undefined ? this.searchService.searchActive : this.active;\n  }\n}\n","  import {Component, ElementRef, ViewChild, Input, OnDestroy, AfterViewInit} from '@angular/core';\r\n  import {SearchService} from '../../search.service';\r\n\r\n  @Component({\r\n    selector: 'sq-scroller',\r\n    template: `<div #anchor style=\"height:5px\"></div>`\r\n  })\r\n  export class BsScroller implements AfterViewInit, OnDestroy {\r\n  @Input() options = {};\r\n  @ViewChild('anchor') anchor: ElementRef<HTMLElement>;\r\n\r\n  private observer: IntersectionObserver;\r\n\r\n  constructor(private searchService: SearchService) {}\r\n\r\n  ngAfterViewInit() {\r\n    const options = {\r\n      root: null,\r\n      ...this.options\r\n    };\r\n\r\n    this.observer = new IntersectionObserver(([entry]) => {\r\n      if(entry.isIntersecting) {\r\n        this.searchService.loadMore();\r\n      }\r\n    }, options);\r\n\r\n    this.observer.observe(this.anchor.nativeElement);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.observer.disconnect();\r\n  }\r\n\r\n}","<div *ngIf=\"hasMore\" class=\"btn-group\" [sq-action-buttons]=\"{items: [loadMoreAction], style: buttonsStyle, size: actionsSize, rightAligned: false}\"></div>\r\n","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {Action, IAction} from '@sinequa/components/action';\r\nimport {Subscription} from 'rxjs';\r\n\r\nimport {SearchService} from '../../search.service';\r\n\r\n@Component({\r\n  selector: \"sq-load-more\",\r\n  templateUrl: \"./load-more.html\"\r\n})\r\nexport class BsLoadMore implements OnInit, OnDestroy {\r\n  @Input() buttonsStyle = \"outline-primary\";\r\n  @Input() actionsSize = \"sm\"\r\n\r\n  private subscription: Subscription = new Subscription();\r\n  loadMoreAction: IAction;\r\n  hasMore = false;\r\n\r\n  constructor(private searchService: SearchService) {\r\n    this.loadMoreAction = new Action({\r\n      text: \"msg#facet.loadMore\",\r\n      title: \"msg#facet.loadMore\",\r\n      action: (action) => {\r\n        this.searchService.loadMore();\r\n        action.update();\r\n      },\r\n      updater:() => {\r\n        // hide button while fetching new data\r\n        this.hasMore = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subscription = this.searchService.resultsStream\r\n      .subscribe(results => {\r\n        this.hasMore = this.searchService.hasMore();\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n}","import {NgModule, ModuleWithProviders} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {WebServicesModule} from \"@sinequa/core/web-services\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {LoginModule} from \"@sinequa/core/login\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {SearchOptions, SEARCH_OPTIONS} from \"../search.service\";\n\nimport {BsDidYouMean} from \"./did-you-mean/did-you-mean\";\nimport {BsBreadcrumbs} from \"./breadcrumbs/breadcrumbs\";\nimport {BsPager} from \"./pager/pager\";\nimport {BsPageSizeSelector} from \"./page-size-selector/page-size-selector\";\nimport {BsSortSelector} from \"./sort-selector/sort-selector\";\nimport {BsTabs} from \"./tabs/tabs\";\nimport {BsLoadingBar} from \"./loading-bar/loading-bar\";\nimport {BsScroller} from \"./scroller/scroller\"\nimport {BsLoadMore} from './load-more/load-more';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n\n        WebServicesModule,\n        IntlModule,\n        LoginModule,\n\n        UtilsModule,\n        BsActionModule\n    ],\n    declarations: [\n        BsDidYouMean,\n        BsBreadcrumbs, BsPager, BsPageSizeSelector, BsSortSelector,\n        BsTabs, BsLoadingBar,\n        BsScroller, BsLoadMore\n    ],\n    exports: [\n        BsDidYouMean,\n        BsBreadcrumbs, BsPager, BsPageSizeSelector, BsSortSelector,\n        BsTabs, BsLoadingBar,\n        BsScroller, BsLoadMore\n    ],\n})\nexport class BsSearchModule {\n    static forRoot(searchOptions: SearchOptions) : ModuleWithProviders<BsSearchModule> {\n        return {\n            ngModule: BsSearchModule,\n            providers: [\n                // Provide SEARCH_OPTIONS\n                {provide: SEARCH_OPTIONS, useValue: searchOptions},\n            ]\n        };\n    }\n}\n","export default {\n    \"search\": {\n        \"emptySearchNotification\": \"Please enter some search terms to perform a search\",\n        \"alreadyFiltered\": \"Already selected\"\n    },\n\n    \"breadcrumbs\": {\n        \"emptySearch\": \"<empty search>\",\n        \"itemRemove\": \"Remove\"\n    },\n\n    \"didYouMean\": {\n        \"dymonlyBeforeCorrected\": \"Did you mean: \",\n        \"dymonlyAfterCorrected\": \"?\",\n        \"correctBeforeCorrected\": \"Showing results for: \",\n        \"correctBeforeOriginal\": \". Search instead for: \",\n        \"correctAfterOriginal\": \"\",\n        \"smartBeforeOriginal\": \"Showing results for: \",\n        \"smartBeforeCorrected\": \" and \",\n        \"smartAfterCorrected\": \"\"\n    },\n\n    \"pageSizeSelector\": {\n        \"pageSizeChoice\": \"{size, number} per page\",\n        \"defaultPageSize\": \"Default ({size, number})\",\n        \"defaultPageSizeChoice\": \"{size, number} per page (default)\"\n    },\n\n    \"pager\": {\n        \"pageNumberTitle\": \"Page {page, number}\",\n        \"firstPage\": \"First page\",\n        \"nextPage\": \"Next page\",\n        \"previousPage\": \"Previous page\",\n        \"lastPage\": \"Last page\"\n    },\n\n    \"sortSelector\": {\n        \"sortByTitle\": \"Sort by: {text}\",\n        \"sortOther\": \"<Other>\"\n    },\n\n    \"sort\": {\n        \"relevance\": \"Relevance\",\n        \"date\": \"Date\",\n        \"filename\": \"File name\",\n        \"title\": \"Title\"\n    },\n\n    \"queryIntent\": {\n        \"externalServiceTimeoutError\": \"This result page is incomplete due to an internal timeout. Please retry later.\"\n    }\n};\n","export default {\n    \"search\": {\n        \"emptySearchNotification\": \"Veuillez saisir des termes de recherche pour effectuer une recherche\",\n        \"alreadySelected\": \"Déjà sélectionné\"\n    },\n\n    \"breadcrumbs\": {\n        \"emptySearch\": \"<recherche vide>\",\n        \"itemRemove\": \"Supprimer\"\n    },\n\n    \"didYouMean\": {\n        \"dymonlyBeforeCorrected\": \"Essayez avec cette orthographe : \",\n        \"dymonlyAfterCorrected\": \"\",\n        \"correctBeforeCorrected\": \"Résultats pour : \",\n        \"correctBeforeOriginal\": \". Essayez avec l'orthographe : \",\n        \"correctAfterOriginal\": \"\",\n        \"smartBeforeOriginal\": \"Résultats pour : \",\n        \"smartBeforeCorrected\": \" et \",\n        \"smartAfterCorrected\": \"\"\n    },\n\n    \"pageSizeSelector\": {\n        \"pageSizeChoice\": \"{size, number} par page\",\n        \"defaultPageSize\": \"Défaut ({size, number})\",\n        \"defaultPageSizeChoice\": \"{size, number} par page (défaut)\"\n    },\n\n    \"pager\": {\n        \"pageNumberTitle\": \"Page {page, number}\",\n        \"firstPage\": \"Première page\",\n        \"nextPage\": \"Page suivante\",\n        \"previousPage\": \"Page précédente\",\n        \"lastPage\": \"Dernière page\"\n    },\n\n    \"sortSelector\": {\n        \"sortByTitle\": \"Trier par: {text}\",\n        \"sortOther\": \"<Autre>\"\n    },\n\n    \"sort\": {\n        \"relevance\": \"Pertinence\",\n        \"date\": \"Date\",\n        \"filename\": \"Nom de fichier\",\n        \"title\": \"Titre\"\n    },\n\n    \"queryIntent\": {\n        \"externalServiceTimeoutError\": \"Cette page de résultat est incomplète due à un délai d'attente interne dépassé. S'il vous plaît, réessayez plus tard.\"\n    }\n};\n","export default {\n    \"search\": {\n        \"emptySearchNotification\": \"Bitte geben Sie einige Suchbegriffe ein, um eine Suche durchzuführen\",\n        \"alreadyFiltered\": \"bereits ausgewählt\"\n    },\n\n    \"breadcrumbs\": {\n        \"emptySearch\": \"<Suche ohne Suchbegriff>\",\n        \"itemRemove\": \"Entfernen\"\n    },\n\n    \"didYouMean\": {\n        \"dymonlyBeforeCorrected\": \"Meinten Sie: \",\n        \"dymonlyAfterCorrected\": \"?\",\n        \"correctBeforeCorrected\": \"Zeige Ergebnisse für [\",\n        \"correctBeforeOriginal\": \"]. Zeige stattdessen Ergebnisse für [\",\n        \"correctAfterOriginal\": \"]\",\n        \"smartBeforeOriginal\": \"Zeige Ergebnisse für [\",\n        \"smartBeforeCorrected\": \"] und [\",\n        \"smartAfterCorrected\": \"]\"\n    },\n\n    \"pageSizeSelector\": {\n        \"pageSizeChoice\": \"{size, number} pro Seite\",\n        \"defaultPageSize\": \"Standard ({size, number})\",\n        \"defaultPageSizeChoice\": \"{size, number} pro Seite (standard)\"\n    },\n\n    \"pager\": {\n        \"pageNumberTitle\": \"Seite {page, number}\",\n        \"firstPage\": \"Erste Seite\",\n        \"nextPage\": \"Nächste Seite\",\n        \"previousPage\": \"Vorherige Seite\",\n        \"lastPage\": \"Letzte Seite\"\n    },\n\n    \"sortSelector\": {\n        \"sortByTitle\": \"Sortieren nach: {text}\",\n        \"sortOther\": \"<Andere>\"\n    },\n\n    \"sort\": {\n        \"relevance\": \"Relevanz\",\n        \"date\": \"Datum\",\n        \"filename\": \"Dateiname\",\n        \"title\": \"Titel\"\n    },\n\n    \"queryIntent\": {\n        \"externalServiceTimeoutError\": \"Diese Ergebnisseite ist aufgrund eines internen Zeitlimits unvollständig. Bitte versuchen Sie es später noch einmal.\"\n    }\n};\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Expr","Utils","ExprParser","InjectionToken","Subject","BehaviorSubject","NavigationStart","NavigationEnd","Query","throwError","map","of","catchError","DidYouMeanKind","SearchService","Injectable","Optional","Inject","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelementEnd","i0.ɵɵproperty","i0.ɵɵelement","i0.ɵɵpropertyInterpolate","i0.ɵɵtemplate","i0.ɵɵclassMapInterpolate2","i0.ɵɵadvance","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","Component","Input","i0.ɵɵtext","i0.ɵɵtextInterpolate1","i0.ɵɵtextInterpolate","i0.ɵɵclassMapInterpolate1","Action","BsPager","EventEmitter","Output","ViewChild","Subscription","CommonModule","FormsModule","ReactiveFormsModule","WebServicesModule","IntlModule","LoginModule","UtilsModule","BsActionModule","NgModule"],"mappings":"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"}