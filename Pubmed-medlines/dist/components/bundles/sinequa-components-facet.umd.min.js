!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@sinequa/core/app-utils"),require("@sinequa/core/base"),require("rxjs"),require("rxjs/operators"),require("@sinequa/core/web-services"),require("@sinequa/components/search"),require("@sinequa/components/autocomplete"),require("@sinequa/core/intl"),require("@angular/common"),require("@sinequa/components/action"),require("@sinequa/components/collapse"),require("@angular/forms"),require("@sinequa/components/utils"),require("ng5-slider"),require("moment"),require("@sinequa/components/advanced"),require("@sinequa/components/selection")):"function"==typeof define&&define.amd?define("@sinequa/components/facet",["exports","@angular/core","@sinequa/core/app-utils","@sinequa/core/base","rxjs","rxjs/operators","@sinequa/core/web-services","@sinequa/components/search","@sinequa/components/autocomplete","@sinequa/core/intl","@angular/common","@sinequa/components/action","@sinequa/components/collapse","@angular/forms","@sinequa/components/utils","ng5-slider","moment","@sinequa/components/advanced","@sinequa/components/selection"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).sinequa=e.sinequa||{},e.sinequa.components=e.sinequa.components||{},e.sinequa.components.facet={}),e.ng.core,e.sinequa.core["app-utils"],e.sinequa.core.base,e.rxjs,e.rxjs.operators,e.sinequa.core["web-services"],e.sinequa.components.search,e.sinequa.components.autocomplete,e.sinequa.core.intl,e.ng.common,e.sinequa.components.action,e.sinequa.components.collapse,e.ng.forms,e.sinequa.components.utils,e["ng5-slider"],e.moment,e.sinequa.components.advanced,e.sinequa.components.selection)}(this,(function(e,t,n,r,i,a,o,s,l,c,u,p,d,f,h,g,m,v,y){"use strict";function x(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var S=x(m),C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function w(e,t){function n(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function b(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function I(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F(arguments[t]));return e}Object.create;var A=["Facet_Loaded","Facet_Added","Facet_Removed"],M=new t.InjectionToken("ALL_FACETS"),O=new t.InjectionToken("DEFAULT_FACETS"),E=function(){function e(e,t,n,r,a,o,s,l,c){var u=this;this.userSettingsService=e,this.searchService=t,this.suggestService=n,this.appService=r,this.intlService=a,this.formatService=o,this.exprBuilder=s,this.allFacets=l,this.defaultFacets=c,this._events=new i.Subject,this._changes=new i.Subject,this.findAggregationItemIndex=function(e,t){var n=e.findIndex((function(e){return e.value===t.value}));return-1===n&&t.display&&(n=e.findIndex((function(e){return e.display===t.display}))),n},this.trimAllWhitespace=function(e){switch(typeof e){case"string":return e.replace(/\s/g,"");default:return e}},this.userSettingsService.events.subscribe((function(e){u.events.next({type:"Facet_Loaded"})})),this._events.subscribe((function(e){-1!==A.indexOf(e.type)&&u.changes.next(e)}))}return Object.defineProperty(e.prototype,"facets",{get:function(){var e;return this.userSettingsService.userSettings||(this.userSettingsService.userSettings={}),this.userSettingsService.userSettings.facets||(this.userSettingsService.userSettings.facets=[],this.defaultFacets&&((e=this.userSettingsService.userSettings.facets).push.apply(e,I(this.defaultFacets)),this.patchFacets())),this.userSettingsService.userSettings.facets},enumerable:!1,configurable:!0}),e.prototype.facet=function(e){var t=this.facetIndex(e);return t>=0?this.facets[t]:void 0},e.prototype.getFacets=function(e){var t=this;return void 0===e&&(e=0),this.allFacets?this.facets.filter((function(t){return t.position===e})).map((function(e){return t.allFacets.find((function(t){return t.name===e.name}))})):[]},e.prototype.isFacetOpened=function(e){return!!this.facets.find((function(t){return t.name===e}))},e.prototype.facetIndex=function(e){for(var t=0,n=this.facets.length;t<n;t++){var r=this.facets[t];if(r&&r.name===e)return t}return-1},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"changes",{get:function(){return this._changes},enumerable:!1,configurable:!0}),e.prototype.addFacet=function(e){this.facets.push(e),this.events.next({type:"Facet_Added",facet:e}),this.patchFacets([{type:"Facet_Added",detail:{facet:e.name}}])},e.prototype.removeFacet=function(e){var t=this.facetIndex(e.name);-1!==t&&(this.facets.splice(t,1),this.events.next({type:"Facet_Removed",facet:e}),this.patchFacets([{type:"Facet_Removed",detail:{facet:e.name}}]))},e.prototype.addAllFacet=function(){var e;this.facets.splice(0,this.facets.length),this.defaultFacets&&(e=this.facets).push.apply(e,I(this.defaultFacets)),this.events.next({type:"Facets_Added"}),this.patchFacets([{type:"Facets_Added"}])},e.prototype.removeAllFacet=function(){this.facets.splice(0,this.facets.length),this.events.next({type:"Facets_Removed"}),this.patchFacets([{type:"Facets_Removed"}])},e.prototype.patchFacets=function(e){var t=this;return this.userSettingsService.patch({facets:this.facets},e).subscribe((function(e){t.events.next({type:"Facet_Patched"})}),(function(e){console.error("Could not patch Facets!",e)}))},e.prototype.addFilterSearch=function(e,t,n,r){var i;return void 0===r&&(r={}),this.addFilter(e,t,n,r)?(this.events.next({type:"Facet_AddFilter",facet:this.facet(e)}),this.searchService.search(void 0,{type:"Facet_AddFilter",detail:{item:this.searchService.query.lastSelect(),itembox:e,itemcolumn:t.column,isitemexclude:r.not,"from-result-id":null===(i=this.searchService.results)||void 0===i?void 0:i.id}})):Promise.resolve(!1)},e.prototype.addFilter=function(e,t,n,r,i,a){if(void 0===r&&(r={}),void 0===i&&(i=this.searchService.query),void 0===a&&(a=this.searchService.breadcrumbs),!n)return!1;if(r.replaceCurrent&&i.removeSelect(e),!t.isTree&&(null==a?void 0:a.activeSelects.length)&&!r.replaceCurrent){var o=a.findSelect(e),s=a.activeSelects.findIndex((function(t){return t.facet===e&&(t.expr===o||t.expr===(null==o?void 0:o.parent))})),l=!Array.isArray(n)||(r.and?"AND":"OR")==((null==o?void 0:o.and)?"AND":"OR")&&(r.not?"YES":"NO")==((null==o?void 0:o.not)?"YES":"NO");if(o&&l&&-1!==s){var c=void 0;(c=(null==o?void 0:o.operands)?this.exprToAggregationItem(o.operands,t.valuesAreExpressions).concat(n):this.exprToAggregationItem(o,t.valuesAreExpressions).concat(n)).forEach((function(e){return e.$excluded=void 0}));var u=this.exprBuilder.makeAggregationExpr(t,c,r.and||o.and);if((r.not||o.not)&&(u=this.exprBuilder.makeNotExpr(u)),u)return i.replaceSelect(s,{expression:u,facet:e}),!0}}var p=this.exprBuilder.makeAggregationExpr(t,n,r.and);return r.not&&(p=this.exprBuilder.makeNotExpr(p)),!!p&&(i.addSelect(p,e),!0)},e.prototype.clearFilters=function(e,t,n){void 0===n&&(n=this.searchService.query),n.removeSelect(e,t)},e.prototype.clearFiltersSearch=function(e,t){var n,r=this;return[].concat(e).forEach((function(e){r.clearFilters(e,t),r._events.next({type:"Facet_ClearFilters",facet:r.facet(e)})})),this.searchService.search(void 0,{type:"Facet_ClearFilters",detail:{itembox:e,"from-result-id":null===(n=this.searchService.results)||void 0===n?void 0:n.id}})},e.prototype.removeFilter=function(e,t,n,r,i){if(void 0===r&&(r=this.searchService.query),void 0===i&&(i=this.searchService.breadcrumbs),i){var a=n.$excluded?this.exprBuilder.makeNotExpr(this.exprBuilder.makeAggregationExpr(t,n)):this.exprBuilder.makeAggregationExpr(t,n),o=this.findItemFilter(e,t,n,i)||this.appService.parseExpr(a),s=i.findSelect(e,o),l=i.activeSelects.findIndex((function(t){return t.facet===e&&(t.expr===s||t.expr===(null==s?void 0:s.parent))}));if(!(!t.isTree&&s&&s.parent&&s.parent.operands.length>1)){var c=r.select?r.select[l]:void 0;return r.removeSelect(l),c}var u=t.valuesAreExpressions?function(e){return e.value.toString().replace(/ /g,"")!==n.value.toString().replace(/ /g,"")}:function(e){return e.value!==n.value},p=this.exprToAggregationItem(s.parent.operands,t.valuesAreExpressions).filter(u);p.forEach((function(e){return e.$excluded=void 0}));var d=i.selects[l].expr||{},f=d.not,h=d.and,g=this.exprBuilder.makeAggregationExpr(t,p,h);if(f&&(g=this.exprBuilder.makeNotExpr(g)),g)return r.replaceSelect(l,{expression:g,facet:e}),{expression:this.exprBuilder.makeAggregationExpr(t,n),facet:e}}},e.prototype.removeFilterSearch=function(e,t,n){var r=this.removeFilter(e,t,n);return r?(this._events.next({type:"Facet_RemoveFilter",facet:this.facet(e||"")}),delete this.searchService.query.queryId,this.searchService.search(void 0,{type:"Facet_RemoveFilter",detail:{item:{expression:null==r?void 0:r.expression,facet:null==r?void 0:r.facet},itembox:e,itemcolumn:t.column,"from-result-id":this.searchService.results?this.searchService.results.id:null}})):Promise.resolve(!1)},e.prototype.loadData=function(e,t,n,i,o){var s=this;return void 0===t&&(t=0),void 0===n&&(n=10),void 0===i&&(i=this.searchService.query),void 0===o&&(o=!0),(i=r.Utils.copy(i)).action="aggregate",i.aggregations={},i.aggregations[e]={skip:t,count:n},this.searchService.getResults(i,void 0,{searchInactive:o}).pipe(a.map((function(t){var n=t.aggregations.find((function(t){return r.Utils.eqNC(t.name,e)}));return n&&s.setColumn(n),n})))},e.prototype.suggest=function(e,t,n){return void 0===n&&(n=this.appService.suggestQueries[0]),this.suggestService.get(n,e,[t],this.searchService.query)},e.prototype.formatValue=function(e){return this.intlService.formatMessage(this.formatService.formatFieldValue(e,e.$column))},e.prototype.hasFiltered=function(e,t){return void 0===t&&(t=this.searchService.breadcrumbs),!!this.findFilter(e,t)},e.prototype.findFilter=function(e,t){return void 0===t&&(t=this.searchService.breadcrumbs),null==t?void 0:t.findSelect(e)},e.prototype.getAggregation=function(e,t,n){if(void 0===t&&(t=this.searchService.results),null==t?void 0:t.aggregations){var i=t.aggregations.find((function(t){return r.Utils.eqNC(t.name,e)}));if(i){if(this.setColumn(i),i.isTree&&n){var a=this.findFilter(n.facetName),o=a?a.getValues(i.column):[];return this.initTreeNodes(n.facetName,i,"/",i.items,o,n.levelCallback),i}return i}}},e.prototype.getTreeAggregation=function(e,t,n,r){void 0===n&&(n=this.searchService.results);var i=this.getAggregation(t,n);if(null==i?void 0:i.isTree){var a=this.findFilter(e),o=a?a.getValues(i.column):[];return this.initTreeNodes(e,i,"/",i.items,o,r),i}},e.prototype.getAggregationCount=function(e){var t;return(null===(t=this.appService.getCCAggregation(e))||void 0===t?void 0:t.count)||10},e.prototype.open=function(t,r,i,o,s,l){var c=this;void 0===s&&(s=this.searchService.query),void 0===l&&(l=!0);var u=i.$path+"*";(s=n.Query.copy(s)).action="open";var p=this.exprBuilder.makeExpr(r.column,u);return s.addOpen(p,r.name),this.events.next({type:"Facet_TreeOpen",facet:this.facet(t)}),this.searchService.getResults(s,void 0,{searchInactive:l}).pipe(a.map((function(n){if(i.$path){var a=e.getAggregationNode(n.aggregations[0].items,i.$path),s=e.getAggregationNode(r.items,i.$path);a&&s&&(s.items=a.items),s&&s.items&&c.initTreeNodes(t,r,i.$path,s.items,void 0,o)}return n})))},e.prototype.itemFiltered=function(e,t,n,r){return void 0===r&&(r=this.searchService.breadcrumbs),!!this.findItemFilter(e,t,n,r)},e.prototype.findItemFilter=function(e,t,i,a){var o,s;if(t.valuesAreExpressions)s=i.value;else{var l=void 0;l=t.isTree?r.Utils.toSqlValue(i.$path+"*"):r.Utils.toSqlValue(i.value),s=this.exprBuilder.makeExpr(t.column,l)}var c=this.appService.parseExpr(s);if(c instanceof n.Expr&&(o=c),o){var u=null==a?void 0:a.findSelect(e,o);if(u&&(!u.parent||!u.parent.parent))return u}},e.prototype.initTreeNodes=function(e,t,n,i,a,o){var s=this;if(i){var l;n?l=r.Utils.count(n,"/",!1)-1:(n="/",l=0);var c=this.appService.getColumn(t.column);r.Utils.traverse(i,(function(r){var i,u;if(!r)return!1;var p=n,d=l;try{for(var f=b(r),h=f.next();!h.done;h=f.next()){var g=h.value;p=p+g.value+"/",d++}}catch(e){i={error:e}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(i)throw i.error}}var m=r[r.length-1];return m.$path=p,m.$column=c,m.$level=d,m.$opened=!1,m.$filtered=s.itemFiltered(e,t,m),null==a||a.forEach((function(e){0===e.indexOf(p)&&((m.items?m.items.length:m.hasChildren?-1:0)>0&&(m.$opened=!0))})),o&&o(r,d,m),!1}))}},e.prototype.setColumn=function(e){if(!e.isTree&&e.items){var t=this.appService.getColumn(e.column);e.items.forEach((function(e){return e.$column=t}))}},e.splitTreepath=function(e){return e?((e=e.trim()).length>0&&"/"===e[0]&&(e=e.substr(1)),e.length>0&&"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),0===e.length?[]:e.split("/")):[]},e.treepathLast=function(t){var n=e.splitTreepath(t);return n&&0!==n.length?n[n.length-1]:""},e.getAggregationNode=function(t,n){if(t&&0!==t.length){for(var r,i=0,a=e.splitTreepath(n);i<a.length;i++){if(!t||0===t.length)return;var o=a[i].toLocaleLowerCase();r=void 0;for(var s=0,l=t;s<l.length;s++){var c=l[s];if(c.value.toLocaleLowerCase()===o){r=c;break}}if(!r)return;t=r.items}return r}},e.prototype.exprToAggregationItem=function(e,t){void 0===t&&(t=!1);var n=[function(e){var t,n,i=e.value;return 1===(null===(t=e.column)||void 0===t?void 0:t.eType)&&(i=r.Utils.isTrue(e.value)),{count:0,value:i,display:e.display,$column:e.column,$excluded:(null==e?void 0:e.not)||(null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.not)}},function(e){var t;return{count:0,value:e.toString(!!e.value),display:e.display,$column:e.column,$excluded:(null==e?void 0:e.not)||(null===(t=null==e?void 0:e.parent)||void 0===t?void 0:t.not)}}],i=t?n[1]:n[0];return[].concat(e).map(i)},e.prototype.getBreadcrumbsItems=function(e,t){return(null==t?void 0:t.items.filter((function(t){return t.facet===e})))||[]},e.prototype.getAggregationItemsFiltered=function(e,t,n){var r,i,a,o;void 0===t&&(t=!1),void 0===n&&(n=this.searchService.breadcrumbs);var s=this.getBreadcrumbsItems(e,n),l=[];try{for(var c=b(s),u=c.next();!u.done;u=c.next()){var p=u.value,d=void 0===(null===(a=p.expr)||void 0===a?void 0:a.display)&&(null===(o=p.expr)||void 0===o?void 0:o.operands)||p.expr;d&&l.push(d)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var f=[].concat.apply([],l);return this.exprToAggregationItem(f,t)},e.prototype.suggestionToAggregationItem=function(e){var t,n={value:e.normalized||e.display,display:e.display,count:+(e.frequency||0),$column:this.appService.getColumn(e.category)};return 1===(null===(t=n.$column)||void 0===t?void 0:t.eType)&&(n.value=r.Utils.isTrue(n.value)),n},e.prototype.suggestionsToTreeAggregationNodes=function(e,t,n){var r=this,i=[];if(e.length>0){var a=new Map,o=new RegExp("\\b"+t,"i"),s=this.appService.getColumn(null==n?void 0:n.column);e.forEach((function(e){if(e.display.length>1){var n=o.exec(e.display);r.addNode(i,a,"/",e.display,+(e.frequency||0),1,((null==n?void 0:n.index)||0)+t.length,s)}}))}return i},e.prototype.addNode=function(e,t,n,r,i,a,o,s){var l=r.indexOf("/",n.length),c=r.substring(0,l+1),u=t.get(c);u||(u={value:r.substring(n.length,l),count:i,items:[],hasChildren:!1,$column:s,$level:a,$opened:o>=c.length,$path:c},t.set(c,u),e.push(u));c.length<r.length&&(u.hasChildren=!0,this.addNode(u.items,t,c,r,i,a+1,o,s))},e.prototype.hasData=function(e,t){var n,i;return!!(null===(i=null===(n=t.aggregations.find((function(t){return r.Utils.eqNC(t.name,e)})))||void 0===n?void 0:n.items)||void 0===i?void 0:i.length)},e.prototype.filteredIndex=function(e,t,n){var r=this,i=-1;if(null==e?void 0:e.valuesAreExpressions){var a=this.trimAllWhitespace(n.value);i=(t.map((function(e){return Object.assign(Object.assign({},e),{value:r.trimAllWhitespace(e.value)})}))||[]).findIndex((function(e){return e.value===a}))}else i=this.findAggregationItemIndex(t,n);return i},e}();E.ɵfac=function(e){return new(e||E)(t.ɵɵinject(o.UserSettingsWebService),t.ɵɵinject(s.SearchService),t.ɵɵinject(l.SuggestService),t.ɵɵinject(n.AppService),t.ɵɵinject(c.IntlService),t.ɵɵinject(n.FormatService),t.ɵɵinject(n.ExprBuilder),t.ɵɵinject(M,8),t.ɵɵinject(O,8))},E.ɵprov=t.ɵɵdefineInjectable({token:E,factory:E.ɵfac,providedIn:"root"});var q=["settingsTpl"],k=["headerTpl"],D=["subHeaderTpl"],_=["footerTpl"],R=function(){function e(){this.actionsChanged=new t.EventEmitter}return Object.defineProperty(e.prototype,"actions",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.onCollapse=function(e){},e.prototype.onExpand=function(e){},e.prototype.onOpenSettings=function(e){},e.prototype.isHidden=function(){return!1},e}();R.ɵfac=function(e){return new(e||R)},R.ɵcmp=t.ɵɵdefineComponent({type:R,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&(t.ɵɵstaticViewQuery(q,!0,t.TemplateRef),t.ɵɵstaticViewQuery(k,!0,t.TemplateRef),t.ɵɵstaticViewQuery(D,!0,t.TemplateRef),t.ɵɵstaticViewQuery(_,!0,t.TemplateRef)),2&e){var r=void 0;t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.settingsTpl=r.first),t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.headerTpl=r.first),t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.subHeaderTpl=r.first),t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.footerTpl=r.first)}},outputs:{actionsChanged:"actionsChanged"},decls:0,vars:0,template:function(e,t){},encapsulation:2});var T=["facet"];function P(e,n){if(1&e&&t.ɵɵelement(0,"div",10),2&e){var r=t.ɵɵnextContext();t.ɵɵclassMapInterpolate1("card-icon ",r.icon," mr-2")}}function N(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",11),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.title))}}function $(e,n){if(1&e&&t.ɵɵelementContainer(0,12),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngTemplateOutlet",r.facetComponent.headerTpl)}}function B(e,n){if(1&e&&t.ɵɵelementContainer(0,12),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngTemplateOutlet",r.facetComponent.subHeaderTpl)}}function V(e,n){1&e&&t.ɵɵprojection(0)}function j(e,n){if(1&e&&(t.ɵɵelementStart(0,"sq-collapse",13),t.ɵɵtemplate(1,V,1,0,"ng-template"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("collapsed",r._collapsed)}}function U(e,n){if(1&e&&t.ɵɵelementContainer(0,12),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngTemplateOutlet",r.facetComponent.settingsTpl)}}function z(e,n){if(1&e&&t.ɵɵelementContainer(0,14),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngTemplateOutlet",r.facetComponent.footerTpl)}}var Q=function(e,t,n){return{items:e,style:t,size:n,rightAligned:!0}},L=function(){function e(e){var n=this;this.changeDetectorRef=e,this.actions=[],this.actionsFirst=!0,this.actionsSize="sm",this.collapsible=!0,this.startCollapsed=!1,this.hideActionsCollapsed=!0,this.expandable=!1,this.startExpanded=!1,this.startSettingsOpened=!1,this.facetExpanded=new t.EventEmitter,this.facetCollapsed=new t.EventEmitter,this.settingsOpened=new t.EventEmitter,this.collapseAction=new p.Action({action:function(e){n._collapsed=!n._collapsed,n.facetCollapsed.next(n._collapsed?"collapsed":"expanded"),n.facetComponent&&n.facetComponent.onCollapse(n._collapsed),e.update()},updater:function(e){e.icon=n._collapsed?"fas fa-chevron-down":"fas fa-chevron-up",e.title=n._collapsed?"msg#facetCard.expand":"msg#facetCard.collapse"}}),this.expandAction=new p.Action({action:function(e){n._expanded=!n._expanded,n.facetExpanded.next(n._expanded?"expanded":"reduced"),n.facetComponent&&n.facetComponent.onExpand(n._expanded),e.update()},updater:function(e){e.icon=n._expanded?"fas fa-compress":"fas fa-expand",e.title=n._expanded?"msg#facetCard.reduce":"msg#facetCard.enlarge"}}),this.settingsAction=new p.Action({action:function(e){n._settingsOpened=!n._settingsOpened,n.settingsOpened.next(n._settingsOpened?"opened":"saved"),n.facetComponent&&n.facetComponent.onOpenSettings(n._settingsOpened),e.update()},updater:function(e){e.icon=n._settingsOpened?"far fa-save":"fas fa-cog",e.title=n._settingsOpened?"msg#facetCard.saveSettings":"msg#facetCard.openSettings"}})}return Object.defineProperty(e.prototype,"hidden",{get:function(){return!!this.facetComponent&&!!this.facetComponent.isHidden&&this.facetComponent.isHidden()},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this._collapsed=this.startCollapsed,this._expanded=this.startExpanded,this._settingsOpened=this.startSettingsOpened,this.collapseAction.update(),this.expandAction.update(),this.settingsAction.update()},e.prototype.ngAfterContentInit=function(){var e=this;this.facetComponent?this.actionChangedSubscription=this.facetComponent.actionsChanged.subscribe((function(t){e.allActions.forEach((function(e){return e.update()})),e.changeDetectorRef.markForCheck()})):console.warn("No #facet component is defined in this facet card: ",this.title)},e.prototype.ngOnDestroy=function(){this.actionChangedSubscription&&this.actionChangedSubscription.unsubscribe()},Object.defineProperty(e.prototype,"allActions",{get:function(){if(this.hideActionsCollapsed&&this._collapsed)return[this.collapseAction];var e=[];return this.actionsFirst&&e.push.apply(e,I(this.actions)),this.facetComponent&&(e=e.concat(this.facetComponent.actions)),this.hasSettings&&e.push(this.settingsAction),this.expandable&&e.push(this.expandAction),this.collapsible&&e.push(this.collapseAction),this.actionsFirst||e.push.apply(e,I(this.actions)),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasSettings",{get:function(){return!!this.facetComponent&&!!this.facetComponent.settingsTpl},enumerable:!1,configurable:!0}),e}();L.ɵfac=function(e){return new(e||L)(t.ɵɵdirectiveInject(t.ChangeDetectorRef))},L.ɵcmp=t.ɵɵdefineComponent({type:L,selectors:[["sq-facet-card"]],contentQueries:function(e,n,r){if(1&e&&t.ɵɵcontentQuery(r,T,!0),2&e){var i;t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.facetComponent=i.first)}},hostVars:7,hostBindings:function(e,n){2&e&&(t.ɵɵhostProperty("hidden",n.hidden),t.ɵɵclassProp("collapsed",n._collapsed)("expanded",n._expanded)("settings-opened",n._settingsOpened))},inputs:{title:"title",tooltip:"tooltip",icon:"icon",buttonsStyle:"buttonsStyle",actions:"actions",actionsFirst:"actionsFirst",actionsSize:"actionsSize",collapsible:"collapsible",startCollapsed:"startCollapsed",hideActionsCollapsed:"hideActionsCollapsed",expandable:"expandable",startExpanded:"startExpanded",startSettingsOpened:"startSettingsOpened"},outputs:{facetExpanded:"facetExpanded",facetCollapsed:"facetCollapsed",settingsOpened:"settingsOpened"},ngContentSelectors:["*"],decls:13,vars:15,consts:[[1,"card"],[1,"card-header","cursor-default","pl-3","pr-2","py-1"],[1,"d-flex"],[1,"d-flex","align-items-center","text-truncate","mr-auto",3,"title"],["aria-hidden","true",3,"class",4,"ngIf"],["class","card-title text-truncate mb-0 py-1 mr-auto",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"btn-group",3,"sq-action-buttons"],[3,"collapsed",4,"ngIf"],["class","card-footer",3,"ngTemplateOutlet",4,"ngIf"],["aria-hidden","true"],[1,"card-title","text-truncate","mb-0","py-1","mr-auto"],[3,"ngTemplateOutlet"],[3,"collapsed"],[1,"card-footer",3,"ngTemplateOutlet"]],template:function(e,n){1&e&&(t.ɵɵprojectionDef(),t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵelementStart(3,"div",3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵtemplate(5,P,1,3,"div",4),t.ɵɵtemplate(6,N,3,3,"div",5),t.ɵɵelementEnd(),t.ɵɵtemplate(7,$,1,1,"ng-container",6),t.ɵɵelement(8,"div",7),t.ɵɵelementEnd(),t.ɵɵtemplate(9,B,1,1,"ng-container",6),t.ɵɵelementEnd(),t.ɵɵtemplate(10,j,2,1,"sq-collapse",8),t.ɵɵtemplate(11,U,1,1,"ng-container",6),t.ɵɵtemplate(12,z,1,1,"ng-container",9),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("title",t.ɵɵpipeBind1(4,9,n.tooltip||n.title)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!!n.icon),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.title),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.facetComponent&&n.facetComponent.headerTpl),t.ɵɵadvance(1),t.ɵɵproperty("sq-action-buttons",t.ɵɵpureFunction3(11,Q,n.allActions,n.buttonsStyle,n.actionsSize)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.facetComponent&&n.facetComponent.subHeaderTpl),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n._settingsOpened),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.hasSettings&&n._settingsOpened),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.facetComponent&&n.facetComponent.footerTpl))},directives:[u.NgIf,p.BsActionButtons,u.NgTemplateOutlet,d.Collapse],pipes:[c.MessagePipe],styles:[".cursor-default[_ngcontent-%COMP%] {cursor: default;}"]});var H=function(e){return{items:e,size:"sm"}};function Y(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9),t.ɵɵelement(1,"div",10),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("sq-action-buttons",t.ɵɵpureFunction1(1,H,r.actions))}}function W(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",11),t.ɵɵelementStart(1,"div",12),t.ɵɵelement(2,"input",13),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelement(4,"sq-loading-bar",14),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵproperty("formGroup",r.myGroup),t.ɵɵadvance(2),t.ɵɵproperty("placeholder",t.ɵɵpipeBind1(3,3,"msg#facet.searchPlaceholder")),t.ɵɵadvance(2),t.ɵɵproperty("active",r.searchActive)}}function G(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",21),t.ɵɵtext(1),t.ɵɵpipe(2,"sqNumber"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.count))}}var K=function(e,t){return{"list-group-item-success":e,"list-group-item-secondary":t}};function J(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",15),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).filterItem(i,e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵelementStart(2,"a",16),t.ɵɵtext(3),t.ɵɵpipe(4,"sqValue"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,G,3,3,"span",17),t.ɵɵelementStart(6,"span",18),t.ɵɵelement(7,"i",19),t.ɵɵelement(8,"i",20),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("ngClass",t.ɵɵpureFunction2(9,K,!i.$excluded,i.$excluded))("title",t.ɵɵpipeBind1(1,4,"msg#facet.selectedValue")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(4,6,i,i.$column)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.showCount&&i.count)}}function Z(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",21),t.ɵɵtext(1),t.ɵɵpipe(2,"sqNumber"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.count))}}var X=function(e){return{terme:e}};function ee(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",22),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).selectItem(i,e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵelementStart(2,"a",23),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).filterItem(i,e)})),t.ɵɵpipe(3,"sqMessage"),t.ɵɵpipe(4,"sqValue"),t.ɵɵtext(5),t.ɵɵpipe(6,"sqValue"),t.ɵɵelementEnd(),t.ɵɵtemplate(7,Z,3,3,"span",17),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("title",t.ɵɵpipeBind1(1,4,"msg#facet.itemUnselect")),t.ɵɵadvance(2),t.ɵɵproperty("title",t.ɵɵpipeBind2(3,6,"msg#facet.filterItem",t.ɵɵpureFunction1(15,X,t.ɵɵpipeBind2(4,9,i,i.$column)))),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(6,12,i,i.$column)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.showCount&&i.count)}}function te(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",27),t.ɵɵtext(1),t.ɵɵpipe(2,"sqNumber"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.count))}}var ne=function(e){return{"list-group-item-primary":e}};function re(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",24),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).selectItem(i,e)})),t.ɵɵelementStart(1,"a",25),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).filterItem(i,e)})),t.ɵɵpipe(2,"sqMessage"),t.ɵɵpipe(3,"sqValue"),t.ɵɵtext(4),t.ɵɵpipe(5,"sqValue"),t.ɵɵelementEnd(),t.ɵɵtemplate(6,te,3,3,"span",26),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(13,ne,a.isSelected(i))),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind2(2,4,"msg#facet.filterItem",t.ɵɵpureFunction1(15,X,t.ɵɵpipeBind2(3,7,i,i.$column)))),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(5,10,i,i.$column)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.showCount&&i.count)}}function ie(e,n){1&e&&(t.ɵɵelementStart(0,"span",28),t.ɵɵelementStart(1,"i"),t.ɵɵtext(2),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"msg#facet.searchNoResult")))}function ae(e,n){if(1&e&&t.ɵɵelement(0,"div",36),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext(3);t.ɵɵstyleProp("--count",i.getPercent(r.count))}}function oe(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",27),t.ɵɵtext(1),t.ɵɵpipe(2,"sqNumber"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.count))}}function se(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",32),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(3).selectItem(i,e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵtemplate(2,ae,1,2,"div",33),t.ɵɵelementStart(3,"div",34),t.ɵɵelementStart(4,"a",35),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(3).filterItem(i,e)})),t.ɵɵpipe(5,"sqMessage"),t.ɵɵpipe(6,"sqValue"),t.ɵɵtext(7),t.ɵɵpipe(8,"sqValue"),t.ɵɵelementEnd(),t.ɵɵtemplate(9,oe,3,3,"span",26),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(17,ne,a.isSelected(i)))("title",t.ɵɵpipeBind1(1,6,a.isSelected(i)?"msg#facet.itemUnselect":"msg#facet.itemSelect")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.showProgressBar&&a.resultsLength>1),t.ɵɵadvance(2),t.ɵɵproperty("title",t.ɵɵpipeBind2(5,8,"msg#facet.filterItem",t.ɵɵpureFunction1(19,X,t.ɵɵpipeBind2(6,11,i,i.$column)))),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(8,14,i,i.$column)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.showCount&&i.count)}}function le(e,n){1&e&&t.ɵɵelement(0,"span",40)}function ce(e,n){1&e&&(t.ɵɵelementStart(0,"small"),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"msg#facet.loadMore")))}function ue(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",37),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(3).loadMore(e)})),t.ɵɵtemplate(1,le,1,0,"span",38),t.ɵɵtemplate(2,ce,3,3,"small",39),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.loadingMore),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.loadingMore)}}function pe(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",29),t.ɵɵtemplate(1,se,10,21,"div",30),t.ɵɵpipe(2,"async"),t.ɵɵtemplate(3,ue,3,2,"a",31),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(2,2,r.items$)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.hasMore)}}function de(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",1),t.ɵɵtemplate(1,Y,2,3,"div",2),t.ɵɵtemplate(2,W,5,5,"div",3),t.ɵɵtemplate(3,J,9,12,"div",4),t.ɵɵtemplate(4,ee,8,17,"div",5),t.ɵɵtemplate(5,re,7,17,"div",6),t.ɵɵpipe(6,"async"),t.ɵɵtemplate(7,ie,4,3,"span",7),t.ɵɵtemplate(8,pe,4,4,"div",8),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.displayActions&&r.actions),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.searchItems.selected),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.filtered),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.hiddenSelected),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(6,7,r.suggestions$)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.noResults),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.hasSuggestions())}}var fe=function(e){function t(t,n){var r=e.call(this)||this;return r.facetService=t,r.changeDetectorRef=n,r.showCount=!0,r.searchable=!0,r.allowExclude=!0,r.allowOr=!0,r.allowAnd=!0,r.displayEmptyDistributionIntervals=!1,r.displayActions=!1,r.showProgressBar=!1,r.data$=new i.BehaviorSubject(void 0),r.items$=new i.BehaviorSubject([]),r.data=function(){return r.data$.getValue()},r.subscriptions=[],r.filtering=!1,r.suggestDelay=200,r.noResults=!1,r.searchActive=!1,r.suggestions$=new i.BehaviorSubject([]),r.selected=[],r.hiddenSelected=[],r.filtered=[],r.skip=0,r.count=0,r.loadingMore=!1,r.suggest$=function(e){return e.pipe(a.debounceTime(r.suggestDelay),a.distinctUntilChanged(),a.switchMap((function(e){var t;return""===e.trim()?(r.noResults=!1,i.of([])):(r.searchActive=!0,r.changeDetectorRef.markForCheck(),r.facetService.suggest(e,(null===(t=r.data())||void 0===t?void 0:t.column)||"").pipe(a.catchError((function(e){return console.log(e),r.noResults=!1,i.of([])})),a.map((function(t){var n=t.slice(0,r.count).map((function(e){return r.facetService.suggestionToAggregationItem(e)})).filter((function(e){return!r.isFiltered(r.data(),e)}));return r.noResults=0===n.length&&""!==e.trim(),n}))))})))},r.myGroup=new f.FormGroup({searchQuery:new f.FormControl}),r.searchQuery=r.myGroup.get("searchQuery"),r.subscriptions.suggest=r.suggest$(r.searchQuery.valueChanges).subscribe((function(e){r.suggestions$.next(e),r.refreshHiddenSelected(),r.searchActive=!1,r.changeDetectorRef.markForCheck()})),r.filterItemsOr=new p.Action({icon:"fas fa-filter",title:"msg#facet.filterItems",action:function(){r.data()&&r.facetService.addFilterSearch(r.getName(),r.data(),r.selected)}}),r.filterItemsAnd=new p.Action({icon:"fas fa-bullseye",title:"msg#facet.filterItemsAnd",action:function(){r.data()&&r.facetService.addFilterSearch(r.getName(),r.data(),r.selected,{and:!0})}}),r.excludeItems=new p.Action({icon:"fas fa-times",title:"msg#facet.excludeItems",action:function(){r.data()&&r.facetService.addFilterSearch(r.getName(),r.data(),r.selected,{not:!0})}}),r.clearFilters=new p.Action({icon:"far fa-minus-square",title:"msg#facet.clearSelects",action:function(){r.facetService.clearFiltersSearch(r.getName(),!0)}}),r.searchItems=new p.Action({icon:"fas fa-search",title:"msg#facet.searchItems",action:function(e,t){e.selected=!e.selected,e.selected||r.clearSearch(),t.stopPropagation(),r.changeDetectorRef.markForCheck()}}),r}return w(t,e),t.prototype.clearSearch=function(){this.searchQuery.setValue(""),this.noResults=!1,this.suggestions$.next([])},t.prototype.getName=function(){return this.name||this.aggregation},t.prototype.ngOnChanges=function(e){void 0===this.showCount&&(this.showCount=!0),void 0===this.searchable&&(this.searchable=!0),void 0===this.allowExclude&&(this.allowExclude=!0),void 0===this.allowOr&&(this.allowOr=!0),void 0===this.allowAnd&&(this.allowAnd=!0),e.results&&(this.count||(this.count=this.facetService.getAggregationCount(this.aggregation)),this.filtered.length=0,this.selected.length=0,this.hiddenSelected.length=0,this.skip=0,this.searchItems.selected=!1,this.clearSearch(),this.data$.next(this.facetService.getAggregation(this.aggregation,this.results)))},t.prototype.ngOnInit=function(){var e=this;this.subscriptions.data=this.data$.pipe(a.map((function(t){var n=e.refreshFiltered(t);return!(null==t?void 0:t.isDistribution)||e.displayEmptyDistributionIntervals?n:n.filter((function(e){return e.count>0}))}))).subscribe((function(t){e.sumOfCount=t.length>0?t.map((function(e){return e.count})).reduce((function(e,t){return e+t}))/100:0,e.items$.next(t),e.refreshHiddenSelected()}))},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},Object.defineProperty(t.prototype,"actions",{get:function(){var e=[];return this.selected.length>0&&(this.allowOr&&e.push(this.filterItemsOr),this.allowAnd&&this.selected.length>1&&e.push(this.filterItemsAnd),this.allowExclude&&e.push(this.excludeItems)),!this.hasSuggestions()&&this.hasFiltered()&&e.push(this.clearFilters),this.searchable&&e.push(this.searchItems),e},enumerable:!1,configurable:!0}),t.prototype.refreshFiltered=function(e){var t,n=this;this.facetService.getAggregationItemsFiltered(this.getName(),null==e?void 0:e.valuesAreExpressions).forEach((function(t){n.isFiltered(e,t)||n.filtered.push(t)}));var r=[];return null===(t=null==e?void 0:e.items)||void 0===t||t.forEach((function(t){var i=n.facetService.filteredIndex(e,n.filtered,t);n.facetService.itemFiltered(n.getName(),e,t)?n.isFiltered(e,t)?n.filtered[i].count=t.count:n.filtered.push(t):-1!==i?n.filtered[i].count=t.count:r.push(t)})),r},t.prototype.refreshHiddenSelected=function(){var e=this;this.hiddenSelected=this.selected.filter((function(t){return-1===(e.hasSuggestions()?e.facetService.findAggregationItemIndex(e.suggestions$.getValue(),t):e.facetService.findAggregationItemIndex(e.items$.getValue()||[],t))}))},t.prototype.isFiltered=function(e,t){return-1!==this.facetService.filteredIndex(e,this.filtered,t)},t.prototype.hasFiltered=function(){return this.facetService.hasFiltered(this.getName())},t.prototype.filterItem=function(e,t){var n=this.data();n&&(this.filtering=!0,this.isFiltered(n,e)?this.facetService.removeFilterSearch(this.getName(),n,e):this.facetService.addFilterSearch(this.getName(),n,e)),t.preventDefault()},t.prototype.isSelected=function(e){return-1!==this.facetService.findAggregationItemIndex(this.selected,e)},t.prototype.selectItem=function(e,t){t.preventDefault(),this.filtering||(this.updateSelected(e),t.stopPropagation()),this.filtering=!1},t.prototype.updateSelected=function(e){if(!this.isFiltered(this.data(),e)){var t=this.facetService.findAggregationItemIndex(this.selected,e);-1===t?this.selected.push(e):this.selected.splice(t,1),this.refreshHiddenSelected()}},Object.defineProperty(t.prototype,"hasMore",{get:function(){return this.resultsLength>=this.skip+this.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resultsLength",{get:function(){return this.items$.getValue().length+this.filtered.length},enumerable:!1,configurable:!0}),t.prototype.loadMore=function(e){var t=this;if(e.stopPropagation(),this.data()){var n=this.resultsLength;this.loadingMore=!0,this.changeDetectorRef.markForCheck(),r.Utils.subscribe(this.facetService.loadData(this.aggregation,n,this.count),(function(e){t.skip=n,(null==e?void 0:e.items)&&t.data()&&(e.items=t.items$.getValue().concat(e.items),t.data$.next(e))}),void 0,(function(){t.loadingMore=!1,t.changeDetectorRef.markForCheck()}))}return!1},t.prototype.hasSuggestions=function(){return this.suggestions$.getValue().length>0||this.noResults},t.prototype.isHidden=function(){return!this.data()},t.prototype.getPercent=function(e){return 100-e/this.sumOfCount+"%"},t}(R);fe.ɵfac=function(e){return new(e||fe)(t.ɵɵdirectiveInject(E),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},fe.ɵcmp=t.ɵɵdefineComponent({type:fe,selectors:[["sq-facet-list"]],inputs:{name:"name",results:"results",aggregation:"aggregation",showCount:"showCount",searchable:"searchable",allowExclude:"allowExclude",allowOr:"allowOr",allowAnd:"allowAnd",displayEmptyDistributionIntervals:"displayEmptyDistributionIntervals",displayActions:"displayActions",showProgressBar:"showProgressBar"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],["class","d-flex pb-2 pr-2",4,"ngIf"],["class","position-relative",3,"formGroup",4,"ngIf"],["class","d-flex flex-row align-items-center list-group-item list-group-item-action list-group-item-success text-truncate border-0 px-3 py-1 facet-row cursor-pointer",3,"ngClass","title","click",4,"ngFor","ngForOf"],["class","d-flex flex-row align-items-center list-group-item list-group-item-primary text-truncate border-0 px-3 py-1 facet-row cursor-pointer",3,"title","click",4,"ngFor","ngForOf"],["class","d-flex flex-row align-items-center list-group-item list-group-item-action text-truncate border-0 px-3 py-1 facet-row cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],["class","d-block text-center text-muted small py-1",4,"ngIf"],["class","facet-results-scrollable",4,"ngIf"],[1,"d-flex","pb-2","pr-2"],[1,"btn-group","ml-auto",3,"sq-action-buttons"],[1,"position-relative",3,"formGroup"],[1,"p-1"],["sqAutofocus","","formControlName","searchQuery",1,"form-control",3,"placeholder"],[3,"active"],[1,"d-flex","flex-row","align-items-center","list-group-item","list-group-item-action","list-group-item-success","text-truncate","border-0","px-3","py-1","facet-row","cursor-pointer",3,"ngClass","title","click"],["href","#",1,"text-truncate","mr-auto"],["class","ml-2 text-muted small",4,"ngIf"],[1,"fa-stack","cursor-pointer"],[1,"ml-2","far","fa-minus-square","fa-stack-1x","icons","icon-hover","rotate"],[1,"ml-2","far","fa-check-square","fa-stack-1x","icons","icon-default","rotate"],[1,"ml-2","text-muted","small"],[1,"d-flex","flex-row","align-items-center","list-group-item","list-group-item-primary","text-truncate","border-0","px-3","py-1","facet-row","cursor-pointer",3,"title","click"],["href","#",1,"text-truncate","mr-auto",3,"title","click"],[1,"d-flex","flex-row","align-items-center","list-group-item","list-group-item-action","text-truncate","border-0","px-3","py-1","facet-row","cursor-pointer",3,"ngClass","click"],["href","#","role","button",1,"text-truncate","mr-auto",3,"title","click"],["class","ml-2 text-muted small","style","z-index: 1;",4,"ngIf"],[1,"ml-2","text-muted","small",2,"z-index","1"],[1,"d-block","text-center","text-muted","small","py-1"],[1,"facet-results-scrollable"],["class","position-relative list-group-item list-group-item-action border-0 px-3 py-1 facet-row cursor-pointer",3,"ngClass","title","click",4,"ngFor","ngForOf"],["class","d-block border-0 px-3 py-1 text-center","href","#",3,"click",4,"ngIf"],[1,"position-relative","list-group-item","list-group-item-action","border-0","px-3","py-1","facet-row","cursor-pointer",3,"ngClass","title","click"],["class","position-absolute progress-bar progress-color",3,"--count",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-baseline"],["href","#",1,"text-truncate","mr-auto",2,"z-index","1",3,"title","click"],[1,"position-absolute","progress-bar","progress-color"],["href","#",1,"d-block","border-0","px-3","py-1","text-center",3,"click"],["class","fas fa-sync fa-fw fa-spin",4,"ngIf"],[4,"ngIf"],[1,"fas","fa-sync","fa-fw","fa-spin"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,de,9,9,"div",0),2&e&&t.ɵɵproperty("ngIf",!n.isHidden())},directives:[u.NgIf,u.NgForOf,p.BsActionButtons,f.NgControlStatusGroup,f.FormGroupDirective,f.DefaultValueAccessor,h.Autofocus,f.NgControlStatus,f.FormControlName,s.BsLoadingBar,u.NgClass],pipes:[u.AsyncPipe,c.MessagePipe,h.ValuePipe,h.NumberPipe],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ccc}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f3f3f3}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.progress-bar[_ngcontent-%COMP%]{bottom:0;height:2px;right:0;width:calc(100% - var(--count))}.progress-bar.progress-color[_ngcontent-%COMP%]{background-color:#7c7c7c;background-image:linear-gradient(90deg,#b8daff,transparent)}.facet-row[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{transition:opacity .3s,transform .3s ease}.facet-row[_ngcontent-%COMP%]   .icons.icon-hover[_ngcontent-%COMP%]{opacity:0}.facet-row[_ngcontent-%COMP%]   .icons.icon-hover.rotate[_ngcontent-%COMP%]{transform:rotate(-180deg)}.facet-row[_ngcontent-%COMP%]:hover   .icon-default[_ngcontent-%COMP%]{opacity:0}.facet-row[_ngcontent-%COMP%]:hover   .icon-default.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.facet-row[_ngcontent-%COMP%]:hover   .icon-hover[_ngcontent-%COMP%]{opacity:1}.facet-row[_ngcontent-%COMP%]:hover   .icon-hover.rotate[_ngcontent-%COMP%]{transform:rotate(0deg)}.facet-row[_ngcontent-%COMP%]   .fa-stack[_ngcontent-%COMP%]{height:1.5em;line-height:1.5em}.facet-results-scrollable[_ngcontent-%COMP%]{max-height:385px;overflow-y:auto}"],changeDetection:0});var he=function(e){return{items:e,size:"sm"}};function ge(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",8),t.ɵɵelement(1,"div",9),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("sq-action-buttons",t.ɵɵpureFunction1(1,he,r.actions))}}function me(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10),t.ɵɵelementStart(1,"div",11),t.ɵɵelement(2,"input",12),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelement(4,"sq-loading-bar",13),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵproperty("formGroup",r.myGroup),t.ɵɵadvance(2),t.ɵɵproperty("placeholder",t.ɵɵpipeBind1(3,3,"msg#facet.searchPlaceholder")),t.ɵɵadvance(2),t.ɵɵproperty("active",r.searchActive)}}function ve(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",17),t.ɵɵtext(1),t.ɵɵpipe(2,"sqNumber"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.count))}}var ye=function(e){return{terme:e}};function xe(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",14),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(2).selectItem(e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵelementStart(2,"a",15),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).filterItem(i,e)})),t.ɵɵpipe(3,"sqMessage"),t.ɵɵpipe(4,"slice"),t.ɵɵtext(5),t.ɵɵpipe(6,"slice"),t.ɵɵelementEnd(),t.ɵɵtemplate(7,ve,3,3,"span",16),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("title",t.ɵɵpipeBind1(1,4,"msg#facet.itemUnselect")),t.ɵɵadvance(2),t.ɵɵproperty("title",t.ɵɵpipeBind2(3,6,"msg#facet.filterItem",t.ɵɵpureFunction1(17,ye,t.ɵɵpipeBind3(4,9,i.$path,1,-1)))),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind3(6,13,i.$path,1,-1)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.showCount&&i.count)}}function Se(e,n){1&e&&(t.ɵɵelementStart(0,"span",18),t.ɵɵelementStart(1,"i"),t.ɵɵtext(2),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"msg#facet.searchNoResult")))}function Ce(e,n){1&e&&t.ɵɵelementContainer(0)}var we=function(e){return{scrollable:e}};function be(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",2),t.ɵɵtemplate(1,ge,2,3,"div",3),t.ɵɵtemplate(2,me,5,5,"div",4),t.ɵɵtemplate(3,xe,8,19,"div",5),t.ɵɵtemplate(4,Se,4,3,"span",6),t.ɵɵtemplate(5,Ce,1,0,"ng-container",7),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(),i=t.ɵɵreference(2);t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(7,we,r.forceMaxHeight)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.displayActions&&r.actions),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.searchItems.selected),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.hiddenSelected),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.noResults),t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",r.data)}}function Fe(e,n){1&e&&t.ɵɵelement(0,"span",31)}function Ie(e,n){1&e&&t.ɵɵelement(0,"span",32)}function Ae(e,n){1&e&&t.ɵɵelement(0,"span",33)}function Me(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",27),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).open(n,e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵtemplate(2,Fe,1,0,"span",28),t.ɵɵtemplate(3,Ie,1,0,"span",29),t.ɵɵtemplate(4,Ae,1,0,"span",30),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext().$implicit;t.ɵɵproperty("title",t.ɵɵpipeBind1(1,4,i.$opened?"msg#facet.closeItem":"msg#facet.openItem")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",i.$opening),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.$opening&&i.$opened),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.$opening&&!i.$opened)}}function Oe(e,n){1&e&&t.ɵɵelement(0,"span",34)}function Ee(e,n){1&e&&t.ɵɵelement(0,"i",35)}function qe(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",17),t.ɵɵtext(1),t.ɵɵpipe(2,"sqNumber"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.count))}}function ke(e,n){1&e&&t.ɵɵelementContainer(0)}function De(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,ke,1,0,"ng-container",7),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵnextContext(2);var i=t.ɵɵreference(2);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",r)}}var _e=function(e,t,n,r){return{"list-group-item-primary":e,"list-group-item-success":t,"list-group-item-action":n,filtered:r}},Re=function(e){return{"margin-left.rem":e}};function Te(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"a",20),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(2).selectItem(e)})),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementStart(3,"span",21),t.ɵɵtemplate(4,Me,5,6,"a",22),t.ɵɵtemplate(5,Oe,1,0,"span",23),t.ɵɵelementStart(6,"a",24),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).filterItem(i,e)})),t.ɵɵpipe(7,"sqValue"),t.ɵɵtext(8),t.ɵɵpipe(9,"sqValue"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(10,Ee,1,0,"i",25),t.ɵɵtemplate(11,qe,3,3,"span",16),t.ɵɵelementEnd(),t.ɵɵtemplate(12,De,2,2,"ng-container",26),t.ɵɵelementContainerEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngClass",t.ɵɵpureFunction4(18,_e,a.isSelected(i),a.isFiltered(i),!a.isFiltered(i),a.isFiltered(i)))("title",t.ɵɵpipeBind1(2,10,a.isFiltered(i)?"msg#facet.selectedValue":"msg#facet.itemSelect")),t.ɵɵadvance(2),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(23,Re,i.$level-1)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.hasChildren),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.hasChildren),t.ɵɵadvance(1),t.ɵɵproperty("title",t.ɵɵpipeBind2(7,12,i,i.$column)),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind2(9,15,i,i.$column),""),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.isFiltered(i)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",a.showCount&&i.count),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.$opened)}}function Pe(e,n){if(1&e&&t.ɵɵtemplate(0,Te,13,25,"ng-container",19),2&e){var r=n.items;t.ɵɵproperty("ngForOf",r)}}var Ne=function(e){function t(t,n){var r=e.call(this)||this;return r.facetService=t,r.changeDetectorRef=n,r.showCount=!0,r.allowExclude=!0,r.allowOr=!0,r.searchable=!0,r.expandedLevel=2,r.forceMaxHeight=!0,r.displayActions=!1,r.subscriptions=[],r.filtered=new Set,r.selected=new Map,r.hiddenSelected=[],r.suggestDelay=200,r.searchActive=!1,r.noResults=!1,r.initNodes=function(e,t,n){n.$filtered&&r.filtered.add(n),n.hasChildren&&!n.$opened&&n.items&&n.items.length>=0&&t<=r.expandedLevel&&(n.$opened=!0)},r.suggest$=function(e){return e.pipe(a.debounceTime(r.suggestDelay),a.distinctUntilChanged(),a.switchMap((function(e){var t;return""===e.trim()?(r.noResults=!1,i.of([])):(r.changeDetectorRef.markForCheck(),r.searchActive=!0,r.facetService.suggest(e,(null===(t=r.data)||void 0===t?void 0:t.column)||"").pipe(a.catchError((function(e){return console.log(e),r.noResults=!1,i.of([])})),a.map((function(t){var n=r.facetService.suggestionsToTreeAggregationNodes(t,e,r.data);return r.noResults=0===n.length&&""!==e.trim(),n}))))})))},r.myGroup=new f.FormGroup({searchQuery:new f.FormControl}),r.searchQuery=r.myGroup.get("searchQuery"),r.subscriptions.suggest=r.suggest$(r.searchQuery.valueChanges).subscribe((function(e){if(r.data){var t=r.searchQuery.value?e:r.originalItems;r.data={column:r.data.column,name:r.data.name,isTree:!0,items:t},r.refreshHiddenSelected(),r.searchActive=!1,r.changeDetectorRef.markForCheck()}})),r.filterItemsOr=new p.Action({icon:"fas fa-filter",title:"msg#facet.filterItems",action:function(){r.data&&r.facetService.addFilterSearch(r.getName(),r.data,r.getSelectedItems())}}),r.excludeItems=new p.Action({icon:"fas fa-times",title:"msg#facet.excludeItems",action:function(){r.data&&r.facetService.addFilterSearch(r.getName(),r.data,r.getSelectedItems(),{not:!0})}}),r.clearFilters=new p.Action({icon:"far fa-minus-square",title:"msg#facet.clearSelects",action:function(){r.facetService.clearFiltersSearch(r.getName(),!0)}}),r.searchItems=new p.Action({icon:"fas fa-search",title:"msg#facet.searchItems",action:function(e,t){e.selected=!e.selected,e.selected||r.clearSearch(),t.stopPropagation(),r.changeDetectorRef.markForCheck()}}),r}return w(t,e),t.prototype.getName=function(){return this.name||this.aggregation},t.prototype.ngOnChanges=function(e){var t;void 0===this.showCount&&(this.showCount=!0),void 0===this.searchable&&(this.searchable=!0),void 0===this.allowExclude&&(this.allowExclude=!0),void 0===this.allowOr&&(this.allowOr=!0),e.results&&(this.filtered.clear(),this.selected.clear(),this.hiddenSelected.length=0,this.data=this.facetService.getAggregation(this.aggregation,this.results,{facetName:this.getName(),levelCallback:this.initNodes}),this.originalItems=null===(t=this.data)||void 0===t?void 0:t.items,this.searchItems.selected=!1,this.clearSearch())},Object.defineProperty(t.prototype,"actions",{get:function(){var e=[];return this.selected.size>0&&(this.allowOr&&e.push(this.filterItemsOr),this.allowExclude&&e.push(this.excludeItems)),this.hasFiltered()&&e.push(this.clearFilters),this.searchable&&e.push(this.searchItems),e},enumerable:!1,configurable:!0}),t.prototype.isFiltered=function(e){return this.filtered.has(e)},t.prototype.hasFiltered=function(){return this.facetService.hasFiltered(this.getName())},t.prototype.filterItem=function(e,t){return this.data&&(this.isFiltered(e)?this.facetService.removeFilterSearch(this.getName(),this.data,e):this.facetService.addFilterSearch(this.getName(),this.data,e)),t.preventDefault(),t.stopPropagation(),!1},t.prototype.isSelected=function(e){return this.selected.has(e.$path)},t.prototype.getSelectedItems=function(){return Array.from(this.selected.values())},t.prototype.selectItem=function(e){return this.isFiltered(e)||(this.selected.has(e.$path)?this.selected.delete(e.$path):this.selected.set(e.$path,e),this.refreshHiddenSelected()),!1},t.prototype.refreshHiddenSelected=function(){var e=this;this.hiddenSelected=this.getSelectedItems().filter((function(t){var n;return!e.find(null===(n=e.data)||void 0===n?void 0:n.items,t)}))},t.prototype.find=function(e,t){var n,r;if(e)try{for(var i=b(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(o.$path===t.$path||o.$opened&&this.find(o.items,t))return!0}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1},t.prototype.open=function(e,t){var n=this;return e.hasChildren&&(e.$opened=!e.$opened,e.items&&0!==e.items.length||(e.$opening=!0,this.data&&r.Utils.subscribe(this.facetService.open(this.getName(),this.data,e,this.initNodes),(function(t){e.$opening=!1,n.refreshHiddenSelected(),n.changeDetectorRef.markForCheck()}))),this.refreshHiddenSelected()),t.preventDefault(),t.stopPropagation(),!1},t.prototype.isHidden=function(){return!this.data},t.prototype.clearSearch=function(){this.searchQuery.setValue(""),this.noResults=!1},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},t}(R);function $e(e,n){if(1&e&&t.ɵɵelement(0,"sq-facet-list",5,6),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext();t.ɵɵproperty("name",r.name)("results",i.results)("aggregation",r.aggregations)}}function Be(e,n){if(1&e&&t.ɵɵelement(0,"sq-facet-tree",5,6),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext();t.ɵɵproperty("name",r.name)("results",i.results)("aggregation",r.aggregations)}}function Ve(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"sq-facet-card",3),t.ɵɵtemplate(2,$e,2,3,"sq-facet-list",4),t.ɵɵtemplate(3,Be,2,3,"sq-facet-tree",4),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵclassMap(r.className),t.ɵɵproperty("ngSwitch",r.type)("title",r.title),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","list"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","tree")}}Ne.ɵfac=function(e){return new(e||Ne)(t.ɵɵdirectiveInject(E),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},Ne.ɵcmp=t.ɵɵdefineComponent({type:Ne,selectors:[["sq-facet-tree"]],inputs:{name:"name",results:"results",aggregation:"aggregation",showCount:"showCount",allowExclude:"allowExclude",allowOr:"allowOr",searchable:"searchable",expandedLevel:"expandedLevel",forceMaxHeight:"forceMaxHeight",displayActions:"displayActions",initNodes:"initNodes"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:3,vars:1,consts:[["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],["itemsTpl",""],[1,"list-group","list-group-flush",3,"ngClass"],["class","d-flex pb-2 pr-2",4,"ngIf"],["class","position-relative",3,"formGroup",4,"ngIf"],["class","d-flex flex-row align-items-center list-group-item list-group-item-primary border-0 px-3 py-1 facet-row cursor-pointer",3,"title","click",4,"ngFor","ngForOf"],["class","d-block text-center text-muted small py-1",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","pb-2","pr-2"],[1,"btn-group","ml-auto",3,"sq-action-buttons"],[1,"position-relative",3,"formGroup"],[1,"p-1"],["sqAutofocus","","formControlName","searchQuery",1,"form-control",3,"placeholder"],[3,"active"],[1,"d-flex","flex-row","align-items-center","list-group-item","list-group-item-primary","border-0","px-3","py-1","facet-row","cursor-pointer",3,"title","click"],["href","#",1,"text-truncate","mr-auto",3,"title","click"],["class","ml-2 text-muted small",4,"ngIf"],[1,"ml-2","text-muted","small"],[1,"d-block","text-center","text-muted","small","py-1"],[4,"ngFor","ngForOf"],["href","#",1,"d-flex","flex-row","align-items-center","list-group-item","border-0","pl-1","pr-3","py-1",3,"ngClass","title","click"],[1,"mr-auto","text-truncate",3,"ngStyle"],["class","item-opener","href","#",3,"title","click",4,"ngIf"],["class","fas fa-fw",4,"ngIf"],["href","#","role","button",1,"text-truncate",3,"title","click"],["class","ml-2 far fa-check-square",4,"ngIf"],[4,"ngIf"],["href","#",1,"item-opener",3,"title","click"],["class","fas fa-sync fa-fw fa-spin",4,"ngIf"],["class","fas fa-caret-down fa-fw",4,"ngIf"],["class","fas fa-caret-right fa-fw",4,"ngIf"],[1,"fas","fa-sync","fa-fw","fa-spin"],[1,"fas","fa-caret-down","fa-fw"],[1,"fas","fa-caret-right","fa-fw"],[1,"fas","fa-fw"],[1,"ml-2","far","fa-check-square"]],template:function(e,n){1&e&&(t.ɵɵtemplate(0,be,6,9,"div",0),t.ɵɵtemplate(1,Pe,1,1,"ng-template",null,1,t.ɵɵtemplateRefExtractor)),2&e&&t.ɵɵproperty("ngIf",!n.isHidden())},directives:[u.NgIf,u.NgClass,u.NgForOf,u.NgTemplateOutlet,p.BsActionButtons,f.NgControlStatusGroup,f.FormGroupDirective,f.DefaultValueAccessor,h.Autofocus,f.NgControlStatus,f.FormControlName,s.BsLoadingBar,u.NgStyle],pipes:[c.MessagePipe,u.SlicePipe,h.NumberPipe,h.ValuePipe],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ccc}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f3f3f3}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.scrollable[_ngcontent-%COMP%]{max-height:85vh;overflow-y:auto}.item-opener[_ngcontent-%COMP%]{text-decoration:none!important}a.filtered[_ngcontent-%COMP%], a.filtered[_ngcontent-%COMP%]:hover{color:inherit;cursor:inherit;text-decoration:none}"],changeDetection:0});var je=function(){function e(e){this.facetService=e,this.containerIndex=0}return Object.defineProperty(e.prototype,"facets",{get:function(){return this.facetService.getFacets(this.containerIndex)},enumerable:!1,configurable:!0}),e}();function Ue(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",1),t.ɵɵelement(1,"sq-action-menu",2),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("items",r.filters)("autoAdjust",r.autoAdjust)("autoAdjustBreakpoint",r.autoAdjustBreakpoint)("collapseBreakpoint",r.collapseBreakpoint)("right",r.rightAligned)("size",r.size)}}je.ɵfac=function(e){return new(e||je)(t.ɵɵdirectiveInject(E))},je.ɵcmp=t.ɵɵdefineComponent({type:je,selectors:[["sq-facet-bar"]],inputs:{results:"results",containerIndex:"containerIndex"},ngContentSelectors:["*"],decls:4,vars:1,consts:[[1,"container-fluid"],[1,"row"],[4,"ngFor","ngForOf"],[3,"ngSwitch","title"],[3,"name","results","aggregation",4,"ngSwitchCase"],[3,"name","results","aggregation"],["facet",""]],template:function(e,n){1&e&&(t.ɵɵprojectionDef(),t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵprojection(2),t.ɵɵtemplate(3,Ve,4,7,"ng-container",2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.facets))},directives:[u.NgForOf,L,u.NgSwitch,u.NgSwitchCase,fe,Ne],encapsulation:2});var ze=function(){function e(e){this.facetService=e,this.enableCustomization=!1,this.autoAdjust=!0,this.autoAdjustBreakpoint="xl",this.collapseBreakpoint="sm",this.rightAligned=!1,this.filters=[],this.hidden=!1,this.facetStatus={add:{title:"msg#facet.filters.add",icon:"fas fa-plus"},remove:{title:"msg#facet.filters.remove",icon:"fas fa-minus"}},this.hidden=!1,this.filters=[]}return e.prototype.ngOnInit=function(){var e,t;if(this.enableCustomization){if(!this.facetService.defaultFacets){this.facetService.defaultFacets=[];try{for(var n=b(this.facets),r=n.next();!r.done;r=n.next()){var i=r.value;this.facetService.defaultFacets.push({name:i.name,position:0,hidden:!1,expanded:!0,view:""})}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}this.facetService.allFacets||(this.facetService.allFacets=this.facets)}},e.prototype.ngOnChanges=function(){this.results&&this.buildFilters(),this.results||(this.hidden=!0)},e.prototype.buildFilters=function(){var e=this;this.filters=this.filteredFacets.map((function(t){var n=[new p.Action({component:"list"===t.type?fe:Ne,componentInputs:{results:e.results,name:t.name,aggregation:t.aggregation,searchable:t.searchable,displayActions:!0}})];return new p.Action({name:t.name,text:t.title,title:t.title,icon:t.icon,disabled:!e.hasData(t),styles:e.hasFiltered(t.name)?"ml-2 font-weight-bold":"ml-2",children:n})})),this.enableCustomization&&this.addFacetMenu()},e.prototype.hasFiltered=function(e){return this.facetService.hasFiltered(e)},e.prototype.hasData=function(e){return this.facetService.hasData(e.aggregation,this.results)},e.prototype.addFacetMenu=function(){var e,t,n,r,i=this,a=[];a.push(new p.Action({name:"add_remove_all",text:this.userFacets.length<this.facets.length?"msg#facet.filters.addAll":"msg#facet.filters.removeAll",icon:this.hasFacetSelected?this.userFacets.length<this.facets.length?"far fa-minus-square mr-1":"far fa-check-square mr-1":"far fa-square mr-1",title:this.userFacets.length<this.facets.length?"msg#facet.filters.addAll":"msg#facet.filters.removeAll",action:function(){i.hasFacetSelected&&i.userFacets.length===i.facets.length?i.facetService.removeAllFacet():i.facetService.addAllFacet(),i.buildFilters()}}));var o=function(e){a.push(new p.Action({name:"add_remove_"+e.name,text:e.title,icon:e.icon,selected:!!(null===(n=s.userFacets)||void 0===n?void 0:n.find((function(t){return t.name===e.name}))),title:(null===(r=s.userFacets)||void 0===r?void 0:r.find((function(t){return t.name===e.name})))?"msg#facet.filters.add":"msg#facet.filters.remove",action:function(){var t;(null===(t=i.userFacets)||void 0===t?void 0:t.find((function(t){return t.name===e.name})))?i.facetService.removeFacet({name:e.name,position:0,hidden:!1,expanded:!0,view:""}):i.facetService.addFacet({name:e.name,position:0,hidden:!1,expanded:!0,view:""}),i.buildFilters()}}))},s=this;try{for(var l=b(this.facets),c=l.next();!c.done;c=l.next()){o(c.value)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}var u=new p.Action({name:"facets_config",icon:"fas fa-cog",title:"msg#facet.filters.customizeFacets",children:a});this.filters=I([u],this.filters)},Object.defineProperty(e.prototype,"filteredFacets",{get:function(){var e,t;if(!this.enableCustomization)return this.facets;var n=[];if(this.userFacets){var r=function(e){i.userFacets.findIndex((function(t){return t.name===e.name}))>=0&&n.push(e)},i=this;try{for(var a=b(this.facets),o=a.next();!o.done;o=a.next()){r(o.value)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userFacets",{get:function(){return this.facetService.facets},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasFacetSelected",{get:function(){var e,t;if(0===this.userFacets.length)return!1;var n=function(e){if(r.userFacets.find((function(t){return t.name===e.name})))return{value:!0}},r=this;try{for(var i=b(this.facets),a=i.next();!a.done;a=i.next()){var o=n(a.value);if("object"==typeof o)return o.value}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!1},enumerable:!1,configurable:!0}),e}();function Qe(e,n){if(1&e&&(t.ɵɵelementStart(0,"small",14),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r.label||r.category))}}function Le(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",12),t.ɵɵtext(1),t.ɵɵtemplate(2,Qe,3,3,"small",13),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate1("",r.display," "),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.category)}}ze.ɵfac=function(e){return new(e||ze)(t.ɵɵdirectiveInject(E))},ze.ɵcmp=t.ɵɵdefineComponent({type:ze,selectors:[["sq-facet-filters"]],inputs:{results:"results",facets:"facets",enableCustomization:"enableCustomization",autoAdjust:"autoAdjust",autoAdjustBreakpoint:"autoAdjustBreakpoint",collapseBreakpoint:"collapseBreakpoint",rightAligned:"rightAligned",size:"size"},features:[t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[["class","facet-filters-bar",4,"ngIf"],[1,"facet-filters-bar"],[3,"items","autoAdjust","autoAdjustBreakpoint","collapseBreakpoint","right","size"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Ue,2,6,"div",0),2&e&&t.ɵɵproperty("ngIf",!n.hidden)},directives:[u.NgIf,p.BsActionMenu],styles:[".navbar-nav[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.nav-item[_ngcontent-%COMP%]{padding:.25rem .75rem}div.sq-collapse.ng-animating[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}"]});var He=function(e){function t(t,n,i){var a=e.call(this)||this;return a.formBuilder=t,a.searchService=n,a.changeDetectorRef=i,a.suggestDelay=200,a.doRefine=function(){if(a.searchControl){var e=r.Utils.trim(a.searchControl.value);e&&a.searchService.searchRefine(e)}},a}return w(t,e),t.prototype.ngOnChanges=function(e){this.form||(this.form=this.formBuilder.group({search:""}),this.searchControl=this.form.get("search")),e.results&&this.searchControl&&this.searchControl.setValue(this.searchService.lastRefineText)},t.prototype.setError=function(e){void 0===e&&(e={}),e.error!==this.inputErrorMessage&&(this.inputErrorMessage=e.error||"",this.changeDetectorRef.markForCheck())},t}(R);function Ye(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",7),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext(2).$implicit;return t.ɵɵnextContext().removeItem(e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵelementEnd()}2&e&&t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(1,1,"msg#facet.mySearch.itemRemove"))}He.ɵfac=function(e){return new(e||He)(t.ɵɵdirectiveInject(f.FormBuilder),t.ɵɵdirectiveInject(s.SearchService),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},He.ɵcmp=t.ɵɵdefineComponent({type:He,selectors:[["sq-refine"]],inputs:{results:"results",autocompleteEnabled:"autocompleteEnabled",suggestQuery:"suggestQuery",suggestDelay:"suggestDelay"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:18,vars:20,consts:[[1,"card-body"],["role","search","novalidate","",3,"formGroup"],[1,"d-flex","flex-column","flex-grow-1","position-relative"],[1,"input-group"],[1,"sr-only"],["type","text","formControlName","search","spellcheck","false","autocomplete","off","sqAutocomplete","",3,"title","placeholder","dropdown","suggestQuery","off","suggestDelay","submit","parse"],[1,"input-group-append"],["type","button",1,"btn","btn-light",3,"title","click"],[1,"fas","fa-search"],["dropdown",""],["itemTpl",""],[3,"results","context"],[1,"py-2",2,"padding-left","0.75rem"],["class","ml-2 text-muted",4,"ngIf"],[1,"ml-2","text-muted"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"form",1),t.ɵɵelementStart(2,"div",2),t.ɵɵelementStart(3,"div",3),t.ɵɵelementStart(4,"label",4),t.ɵɵtext(5),t.ɵɵpipe(6,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"input",5),t.ɵɵlistener("submit",(function(){return n.doRefine()}))("parse",(function(e){return n.setError(e)})),t.ɵɵpipe(8,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",6),t.ɵɵelementStart(10,"button",7),t.ɵɵlistener("click",(function(){return n.doRefine()})),t.ɵɵpipe(11,"sqMessage"),t.ɵɵelement(12,"i",8),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"sq-autocomplete-list",null,9),t.ɵɵtemplate(15,Le,3,2,"ng-template",null,10,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(17,"sq-did-you-mean",11),t.ɵɵelementEnd()),2&e){var r=t.ɵɵreference(14);t.ɵɵadvance(1),t.ɵɵproperty("formGroup",n.form),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(6,14,"msg#facet.refine.input.label")),t.ɵɵadvance(2),t.ɵɵclassMapInterpolate1("form-control ",n.inputErrorMessage?"is-invalid":"",""),t.ɵɵproperty("title",n.inputErrorMessage)("placeholder",t.ɵɵpipeBind1(8,16,"msg#facet.refine.input.placeholder"))("dropdown",r)("suggestQuery",n.suggestQuery)("off",!n.autocompleteEnabled)("suggestDelay",n.suggestDelay),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(11,18,"msg#facet.refine.input.buttonTitle")),t.ɵɵadvance(7),t.ɵɵproperty("results",n.results)("context","refine")}},directives:[f.ɵangular_packages_forms_forms_y,f.NgControlStatusGroup,f.FormGroupDirective,f.DefaultValueAccessor,f.NgControlStatus,f.FormControlName,l.Autocomplete,l.BsAutocompleteList,s.BsDidYouMean,u.NgIf],pipes:[c.MessagePipe],encapsulation:2});var We=function(e){return{"sq-metadata-border":e}},Ge=function(e){return{withFields:e,asHTML:!0}};function Ke(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelement(1,"span",5),t.ɵɵpipe(2,"sqExpr"),t.ɵɵtemplate(3,Ye,2,3,"span",6),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(),i=r.index,a=r.$implicit,o=t.ɵɵnextContext();t.ɵɵclassMapInterpolate1("px-1 ml-1 mb-1 sq-metadata-item sq-metadata-color-",o.fields[i],""),t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(10,We,o.useBadges)),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("title",o.fields[i]),t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(2,7,a.display,t.ɵɵpureFunction1(12,Ge,o.displayFieldNames)),t.ɵɵsanitizeHtml),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",o.allowDeletion)}}function Je(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Ke,4,14,"div",3),t.ɵɵelementContainerEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.hidden)}}function Ze(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"hr"),t.ɵɵelementStart(2,"i",8),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext();return e.collapsed=!e.collapsed})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵclassMapInterpolate1("fas fa-chevron-circle-",i.collapsed?"down":"up","")}}var Xe=function(e){function t(t){var n=e.call(this)||this;return n.searchService=t,n.allowDeletion=!0,n.displayFieldNames=!1,n.collapsible=!1,n.useBadges=!1,n.ignoreText=!0,n.excludedFacets=["search-form"],n.collapsed=!1,n.items=[],n.fields=[],n.clearAction=new p.Action({icon:"far fa-minus-square",title:"msg#facet.filters.clear",action:function(){return n.clear()}}),n}return w(t,e),t.prototype.ngOnChanges=function(e){var t,n,r,i,a=this;if(e.results){this.items=this.ignoreText?(null===(r=this.searchService.breadcrumbs)||void 0===r?void 0:r.items.filter((function(e){return e.expr&&!(e.expr&&!e.expr.field&&!e.expr.isStructured)&&!a.excludedFacets.includes(e.facet)})))||[]:(null===(i=this.searchService.breadcrumbs)||void 0===i?void 0:i.items)||[],this.fields=[];try{for(var o=b(this.items),s=o.next();!s.done;s=o.next()){var l=s.value;this.fields.push(this.getField(l))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},t.prototype.getField=function(e){return e.expr?e.expr.field?e.expr.field:e.expr.isStructured?e.expr.getFields().join("-"):"text":"unknown"},t.prototype.removeItem=function(e){this.searchService.removeBreadcrumbsItem(e)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actions",{get:function(){var e=[];return!this.isEmpty&&this.allowDeletion&&e.push(this.clearAction),e},enumerable:!1,configurable:!0}),t.prototype.clear=function(){var e,t;try{for(var n=b(this.items),r=n.next();!r.done;r=n.next()){var i=r.value;this.searchService.removeBreadcrumbsItem(i)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(R);Xe.ɵfac=function(e){return new(e||Xe)(t.ɵɵdirectiveInject(s.SearchService))},Xe.ɵcmp=t.ɵɵdefineComponent({type:Xe,selectors:[["sq-facet-mysearch"]],inputs:{results:"results",allowDeletion:"allowDeletion",displayFieldNames:"displayFieldNames",collapsible:"collapsible",useBadges:"useBadges",ignoreText:"ignoreText",excludedFacets:"excludedFacets"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:3,vars:3,consts:[[1,"my-search","d-flex","flex-row","align-items-center","flex-wrap",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[3,"innerHTML","title"],["class","far fa-times-circle pl-1","role","button",3,"title","click",4,"ngIf"],["role","button",1,"far","fa-times-circle","pl-1",3,"title","click"],[3,"click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,Je,2,1,"ng-container",1),t.ɵɵelementEnd(),t.ɵɵtemplate(2,Ze,3,3,"div",2)),2&e&&(t.ɵɵproperty("ngClass",n.collapsed?"collapsed-view":"expanded-view"),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.items),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.collapsible&&!n.isEmpty))},directives:[u.NgClass,u.NgForOf,u.NgIf],pipes:[h.ExprPipe,c.MessagePipe],styles:[".my-search[_ngcontent-%COMP%]{font-size:.85rem}.sq-metadata-item[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px;cursor:pointer}.sq-metadata-item[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;opacity:.8}.sq-metadata-item[_ngcontent-%COMP%]   .fa-times-circle[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.8}.sq-metadata-border[_ngcontent-%COMP%]{border:1px solid}.text-decoration-line-through[_ngcontent-%COMP%]{text-decoration:line-through}.collapsed-view[_ngcontent-%COMP%]{height:29px;overflow-y:hidden}.expanded-view[_ngcontent-%COMP%]{height:unset}.fa-chevron-circle-down[_ngcontent-%COMP%], .fa-chevron-circle-up[_ngcontent-%COMP%]{color:#a9a9a9;left:49%;position:relative;top:-5px}.fa-chevron-circle-down[_ngcontent-%COMP%]:hover, .fa-chevron-circle-up[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.7}hr[_ngcontent-%COMP%]{margin-bottom:0!important;margin-top:0!important;width:30%}"]});var et,tt,nt=["slider"];function rt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ng5-slider",4),t.ɵɵlistener("valueChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).value=e}))("highValueChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).highValue=e}))("userChangeEnd",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onUserChangeEnd(e)})),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵproperty("value",i.value)("highValue",i.highValue)("options",i.options)("manualRefresh",i.manualRefresh)}}function it(e,n){1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"msg#facet.range.unavailable")))}function at(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",1,2),t.ɵɵtemplate(3,rt,1,4,"ng5-slider",3),t.ɵɵtemplate(4,it,3,3,"span",0),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵproperty("ngIf",r.sliderActive),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.sliderActive)}}(et=e.RoundTarget||(e.RoundTarget={}))[et.number=0]="number",et[et.year=1]="year",et[et.month=2]="month",et[et.week=3]="week",et[et.day=4]="day",(tt=e.RoundType||(e.RoundType={}))[tt.up=0]="up",tt[tt.down=1]="down",tt[tt.nearest=2]="nearest";var ot=function(i){function a(e,a,o,s,l,c,u,d){var f=i.call(this)||this;return f.facetService=e,f.appService=a,f.searchService=o,f.formatService=s,f.intlService=l,f.uiService=c,f.advancedService=u,f.exprBuilder=d,f.manualRefresh=new t.EventEmitter,f.translate=function(e,t){var i=f.roundNearest(e);if(f.format){if(f.column&&n.AppService.isDate(f.column)){var a=new Date(i),o=S.default(a);return f.intlService.formatMessage(f.format,{date:a,time:r.Utils.getTime(a),weekDay:o.weekday(),week:o.week(),weekYear:o.weekYear()})}return f.intlService.formatMessage(f.format,{value:i})}return f.formatService.formatFieldValue(f.column&&n.AppService.isDate(f.column)?new Date(i):i,f.column)},f.onResize=function(){f.manualRefresh.emit()},f.clearFiltersAction=new p.Action({icon:"far fa-minus-square",title:"msg#facet.range.clear",action:function(){return f.clearRange()}}),f.applyFiltersAction=new p.Action({icon:"fas fa-filter",title:"msg#facet.range.apply",action:function(){return f.applyRange()}}),f}return w(a,i),a.prototype.roundAdjustment=function(t,n,r){switch(r){case e.RoundType.up:return n-t%n;default:case e.RoundType.down:return-t%n;case e.RoundType.nearest:var i=n-t%n,a=-t%n;return Math.abs(i)<=Math.abs(a)?i:a}},a.prototype._roundNumberUp=function(e,t){return(e>=0?Math.ceil(e/t):Math.floor(e/t))*t},a.prototype._roundNumberDown=function(e,t){return(e>=0?Math.floor(e/t):Math.ceil(e/t))*t},a.prototype._roundNumber=function(t,n,r){switch(r){case e.RoundType.up:return this._roundNumberUp(t,n);default:case e.RoundType.down:return this._roundNumberDown(t,n);case e.RoundType.nearest:var i=this._roundNumberUp(t,n),a=this._roundNumberDown(t,n);return Math.abs(i-t)<=Math.abs(a-t)?i:a}},a.prototype._getNearestDate=function(e,t,n){return Math.abs(t.getTime()-e.getTime())<=Math.abs(n.getTime()-e.getTime())?t:n},a.prototype._getNearestTargetDate=function(t,n){switch(n){case e.RoundTarget.year:return this._getNearestDate(t,new Date(t.getFullYear()+1,0),new Date(t.getFullYear(),0));case e.RoundTarget.month:return this._getNearestDate(t,new Date(t.getFullYear(),t.getMonth()+1),new Date(t.getFullYear(),t.getMonth()));default:case e.RoundTarget.week:case e.RoundTarget.day:return this._getNearestDate(t,new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),new Date(t.getFullYear(),t.getMonth(),t.getDate()))}},a.prototype._round=function(t,r,i,a,o){if(void 0===o&&(o=e.RoundType.down),this.column&&n.AppService.isDate(this.column)){var s=new Date(t);switch(o===e.RoundType.nearest&&(s=this._getNearestTargetDate(s,i)),i){case e.RoundTarget.year:var l=s.getFullYear();l%a==0&&0===s.getMonth()&&1===s.getDate()&&0===s.getHours()&&0===s.getMinutes()&&0===s.getSeconds()&&0===s.getMilliseconds()||(s=new Date(l+this.roundAdjustment(l,a,o),0));break;case e.RoundTarget.month:var c=s.getMonth();c%a==0&&1===s.getDate()&&0===s.getHours()&&0===s.getMinutes()&&0===s.getSeconds()&&0===s.getMilliseconds()||(s=new Date(s.getFullYear(),c+this.roundAdjustment(c,a,o)));break;case e.RoundTarget.week:var u=s.getDay();if(1!==u||0!==s.getHours()||0!==s.getMinutes()||0!==s.getSeconds()||0!==s.getMilliseconds()){var p=void 0,d=7-(u-1),f=-(u-1);switch(o){case e.RoundType.up:p=d;break;default:case e.RoundType.down:p=f;break;case e.RoundType.nearest:p=Math.abs(d)>=Math.abs(f)?d:f}s=new Date(s.getFullYear(),s.getMonth(),s.getDate()+p)}var h=S.default(s).week();h%a!=0&&(s=new Date(s.getFullYear(),s.getMonth(),s.getDate()+7*this.roundAdjustment(h,a,o)));break;case e.RoundTarget.day:var g=s.getDate();0===s.getHours()&&0===s.getMinutes()&&0===s.getSeconds()&&0===s.getMilliseconds()||(s=new Date(s.getFullYear(),s.getMonth(),g+this.roundAdjustment(g,a,o)))}return s.getTime()}return this._roundNumber(t,r,o)},a.prototype.round=function(t,n){return void 0===n&&(n=e.RoundType.down),this._round(t,this.options.step||1,this.roundTarget,this.roundMultiple,n)},a.prototype.roundDown=function(t){return this.round(t,e.RoundType.down)},a.prototype.roundUp=function(t){return this.round(t,e.RoundType.up)},a.prototype.roundNearest=function(t){return this.round(t,e.RoundType.nearest)},a.prototype.fixDate=function(e){if(e){var t=e.lastIndexOf(":");if(t>0){var n=r.Utils.toInt(e.substr(t+1));n<0?n=0:n>59&&(n=59),e=e.substr(0,t+1)+n}}return e},a.prototype.initMinMax=function(){var e,t=0,i=0;if(r.Utils.isEmpty(this.min)||r.Utils.isEmpty(this.max)){if(null===(e=this.data)||void 0===e?void 0:e.items){var a=this.data.items[0];if(a&&a.operatorResults)if(this.column&&n.AppService.isDate(this.column)){if(r.Utils.isString(a.operatorResults.min)){var o=r.Utils.fromSysDateStr(this.fixDate(a.operatorResults.min));r.Utils.isDate(o)&&(a.operatorResults.min=o)}if(r.Utils.isString(a.operatorResults.max)){o=r.Utils.fromSysDateStr(this.fixDate(a.operatorResults.max));r.Utils.isDate(o)&&(a.operatorResults.max=o)}t=r.Utils.isDate(a.operatorResults.min)?a.operatorResults.min.getTime():0,i=r.Utils.isDate(a.operatorResults.max)?a.operatorResults.max.getTime():0}else t=r.Utils.isNumber(a.operatorResults.min)?a.operatorResults.min:0,i=r.Utils.isNumber(a.operatorResults.max)?a.operatorResults.max:0}}else t=this.parseValue(new Date(this.min).getDate()?new Date(this.min):this.min),i=this.parseValue(new Date(this.max).getDate()?new Date(this.max):this.max);this.options.floor=t,this.options.ceil=i},a.prototype.parseValue=function(e){if(r.Utils.isDate(e))return e.getTime();if(!r.Utils.isString(e))return 0;var t;if(this.column&&this.column.parser){var i=this.formatService.parseValue(e,this.column.parser);t=r.Utils.toNumber(i)}return r.Utils.isUndefined(t)&&(t=this.column&&n.AppService.isDate(this.column)?r.Utils.toDuration(e):r.Utils.toSize(e)),t},a.prototype.initStep=function(){var t,i,a,o;if(this.stepDefs)try{for(var s=b(this.stepDefs),l=s.next();!l.done;l=s.next()){var c=l.value;if(c.step){var u=this.parseValue(c.step);if(u&&c.active){if(!c.minRange){o=u,a=c.format;break}var p=this.getRoundTarget(u),d=p.roundTarget,f=p.roundMultiple,h=this._round(this.options.floor||0,u,d,f,e.RoundType.down);if(this._round(this.options.ceil||0,u,d,f,e.RoundType.up)-h>=this.parseValue(c.minRange)){o=u,a=c.format;break}}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}o||(o=this.column&&n.AppService.isDate(this.column)?r.Utils.oneDay:1);var g=this.getRoundTarget(o),m=g.roundTarget,v=g.roundMultiple;switch(m){case e.RoundTarget.year:o=365.25*v*r.Utils.oneDay;break;case e.RoundTarget.month:o=365.25*v*r.Utils.oneDay/12}if(this.roundTarget=m,this.roundMultiple=v,!a)switch(this.roundTarget){case e.RoundTarget.year:a="msg#facet.range.year";break;case e.RoundTarget.month:a="msg#facet.range.monthYear";break;case e.RoundTarget.week:a="msg#facet.range.weekYear";break;default:a=""}this.options.step=o,this.format=a},a.prototype.getRoundTarget=function(t){var i={roundTarget:e.RoundTarget.number,roundMultiple:1};return this.column&&n.AppService.isDate(this.column)&&(t%(365*r.Utils.oneDay)==0?(i.roundTarget=e.RoundTarget.year,i.roundMultiple=t/(365*r.Utils.oneDay)):t%(30*r.Utils.oneDay)==0?(i.roundTarget=e.RoundTarget.month,i.roundMultiple=t/(30*r.Utils.oneDay)):t%(7*r.Utils.oneDay)==0?(i.roundTarget=e.RoundTarget.week,i.roundMultiple=t/(7*r.Utils.oneDay)):t%r.Utils.oneDay==0&&(i.roundTarget=e.RoundTarget.day,i.roundMultiple=t/r.Utils.oneDay)),i},a.prototype.init=function(){this.options={draggableRange:!0,enforceStep:!1,translate:this.translate},this.initMinMax(),this.initStep();var e=this.options.ceil||0,t=this.options.floor||0;this.sliderActive=e>t,e>t&&(t=this.options.floor=this.roundDown(t),e=this.options.ceil=this.roundUp(e));var n=F(this.getRange(),2),i=n[0],a=n[1];this.rangeActive=!r.Utils.isUndefined(i)||!r.Utils.isUndefined(a),this.rangeSelected=!1,this.value=this.startValue=Math.max(i||t,t),this.highValue=this.startHighValue=Math.min(a||e,e)},a.prototype.ngOnChanges=function(e){var t=this;this.initDone||(this.initDone=!0,this.localeChange=r.Utils.subscribe(this.intlService.events,(function(e){t.manualRefresh.emit()}))),e.results&&(this.data=this.facetService.getAggregation(this.aggregation,this.results),this.column=this.data&&this.appService.getColumn(this.data.column),this.init())},a.prototype.ngAfterViewInit=function(){this.uiService.addElementResizeListener(this.slider.nativeElement,this.onResize)},a.prototype.ngOnDestroy=function(){this.localeChange&&this.localeChange.unsubscribe(),this.uiService&&this.slider&&this.uiService.removeElementResizeListener(this.slider.nativeElement,this.onResize)},a.prototype.onUserChangeEnd=function(e){this.rangeSelected=this.value!==this.startValue||this.highValue!==this.startHighValue},a.prototype.getRange=function(){var e,t,i=this;if(this.column){var a=void 0,o=void 0,s=null===(t=null===(e=this.searchService.query)||void 0===e?void 0:e.findSelect(this.column.name))||void 0===t?void 0:t.expression;if(s&&(a=this.appService.parseExpr(s))instanceof n.Expr)return o=a.values&&a.values.length>1?a.values:a.value,r.Utils.isArray(o)||(3===a.operator?o=[o,void 0]:5===a.operator&&(o=[void 0,o])),o=o.map((function(e){return e?i.advancedService.castAdvancedValue(e,i.column):e})),n.AppService.isDate(this.column)&&(o=o.map((function(e){return e?new Date(e).getTime():e}))),o}return[void 0,void 0]},a.prototype.setRange=function(e,t){var i,a,o,s,l;this.column&&(o=n.AppService.isDate(this.column)&&r.Utils.isNumber(e)?new Date(e):e,s=n.AppService.isDate(this.column)&&r.Utils.isNumber(t)?new Date(t):t,o&&s?l=this.exprBuilder.makeRangeExpr(this.column.name,o,s):o?l=this.exprBuilder.makeNumericalExpr(this.column.name,">=",o):s&&(l=this.exprBuilder.makeNumericalExpr(this.column.name,"<=",s)),null===(i=this.searchService.query)||void 0===i||i.removeSelect(this.column.name),l&&(null===(a=this.searchService.query)||void 0===a||a.addSelect(l,this.column.name)))},a.prototype.applyRange=function(){this.setRange(this.roundNearest(this.value),this.roundNearest(this.highValue)),this.searchService.search()},a.prototype.clearRange=function(){this.setRange(void 0,void 0),this.searchService.search()},Object.defineProperty(a.prototype,"actions",{get:function(){var e=[];return this.rangeSelected&&e.push(this.applyFiltersAction),this.rangeActive&&e.push(this.clearFiltersAction),e},enumerable:!1,configurable:!0}),a}(R);ot.ɵfac=function(e){return new(e||ot)(t.ɵɵdirectiveInject(E),t.ɵɵdirectiveInject(n.AppService),t.ɵɵdirectiveInject(s.SearchService),t.ɵɵdirectiveInject(n.FormatService),t.ɵɵdirectiveInject(c.IntlService),t.ɵɵdirectiveInject(h.UIService),t.ɵɵdirectiveInject(v.AdvancedService),t.ɵɵdirectiveInject(n.ExprBuilder))},ot.ɵcmp=t.ɵɵdefineComponent({type:ot,selectors:[["sq-facet-range"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(nt,!0),2&e){var r;t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.slider=r.first)}},inputs:{name:"name",results:"results",aggregation:"aggregation",min:"min",max:"max",stepDefs:"stepDefs"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"card-body"],["slider",""],[3,"value","highValue","options","manualRefresh","valueChange","highValueChange","userChangeEnd",4,"ngIf"],[3,"value","highValue","options","manualRefresh","valueChange","highValueChange","userChangeEnd"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,at,5,2,"ng-container",0),2&e&&t.ɵɵproperty("ngIf",n.data)},directives:[u.NgIf,g.ɵa],pipes:[c.MessagePipe],encapsulation:2});var st=["facet"];function lt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",9),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).clearFacetFilters(n,e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵelement(2,"i",10),t.ɵɵelement(3,"i",11),t.ɵɵelementEnd()}2&e&&t.ɵɵpropertyInterpolate("sqTooltip",t.ɵɵpipeBind1(1,1,"msg#facet.filters.clear"))}var ct=function(e){return{count:e}},ut=function(e){return{values:e}};function pt(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",12),t.ɵɵpipe(1,"sqMessage"),t.ɵɵtext(2),t.ɵɵpipe(3,"sqNumber"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind2(1,2,"msg#facet.filterItemCountTooltip",t.ɵɵpureFunction1(9,ut,t.ɵɵpureFunction1(7,ct,r.$count)))),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,5,r.$count)," ")}}var dt=function(e,t){return{"list-group-item-success":e,disabled:t}};function ft(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",4),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(2).openFacet(e)})),t.ɵɵelementStart(1,"span",5),t.ɵɵtext(2),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(4,lt,4,3,"span",6),t.ɵɵtemplate(5,pt,4,11,"span",7),t.ɵɵelement(6,"i",8),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("ngClass",t.ɵɵpureFunction2(6,dt,i.$hasFiltered,!i.$hasData)),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,4,i.title)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",i.$hasFiltered),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",a.showCount)}}function ht(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",2),t.ɵɵtemplate(1,ft,7,9,"div",3),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.facets)}}function gt(e,n){if(1&e&&t.ɵɵelement(0,"sq-facet-list",15,16),2&e){var r=t.ɵɵnextContext(2);t.ɵɵproperty("name",r.openedFacet.name)("results",r.results)("aggregation",r.openedFacet.aggregation)("showCount",r.openedFacet.showCount)("searchable",r.openedFacet.searchable)("allowExclude",r.openedFacet.allowExclude)("allowOr",r.openedFacet.allowOr)("allowAnd",r.openedFacet.allowAnd)("displayEmptyDistributionIntervals",r.openedFacet.displayEmptyDistributionIntervals)("showProgressBar",r.showProgressBar)}}function mt(e,n){if(1&e&&t.ɵɵelement(0,"sq-facet-tree",17,16),2&e){var r=t.ɵɵnextContext(2);t.ɵɵproperty("name",r.openedFacet.name)("results",r.results)("aggregation",r.openedFacet.aggregation)("showCount",r.openedFacet.showCount)("allowExclude",r.openedFacet.allowExclude)("allowOr",r.openedFacet.allowOr)}}function vt(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,gt,2,10,"sq-facet-list",13),t.ɵɵtemplate(2,mt,2,6,"sq-facet-tree",14),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf","list"===r.openedFacet.type),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","tree"===r.openedFacet.type)}}var yt=function(e){function n(n,r){var i=e.call(this)||this;return i.facetService=n,i.changeDetectorRef=r,i.showCount=!0,i.showProgressBar=!1,i.events=new t.EventEmitter,i.backAction=new p.Action({name:"back",icon:"fas fa-arrow-left",title:"msg#facet.filters.back",action:function(){i.openedFacet=void 0,i.events.next(void 0),i.changeDetectorRef.detectChanges()}}),i.clearAllFiltersAction=new p.Action({icon:"far fa-minus-square",title:"msg#facet.filters.clear",action:function(){var e=i.facets.filter((function(e){return e.$hasFiltered})).map((function(e){return e.name}));i.facetService.clearFiltersSearch(e,!0)}}),i}return w(n,e),Object.defineProperty(n.prototype,"actions",{get:function(){var e=[];this.openedFacet?e.push(this.backAction):this.facets.some((function(e){return e.$hasFiltered}))&&e.push(this.clearAllFiltersAction);return this.facetComponent&&e.push.apply(e,I(this.facetActions)),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"facetActions",{get:function(){return this.facetComponent?this.facetComponent.actions:[]},enumerable:!1,configurable:!0}),n.prototype.openFacet=function(e){this.openedFacet=e,this.events.next(e),this.changeDetectorRef.detectChanges()},n.prototype.clearFacetFilters=function(e,t){return t.stopPropagation(),this.facetService.clearFiltersSearch(e.name,!0),!1},n.prototype.getFacetCount=function(e){var t=this.results.aggregations.find((function(t){return r.Utils.eqNC(t.name,e.aggregation)}));if(!(null==t?void 0:t.items))return"";var n=this.facetService.getAggregationCount(e.aggregation),i=!t.isDistribution||e.displayEmptyDistributionIntervals?t.items.length:t.items.filter((function(e){return e.count>0})).length;return i>=n?n+"+":""+i},n.prototype.hasFiltered=function(e){return this.facetService.hasFiltered(e.name)},n.prototype.ngOnChanges=function(){var e=this;this.facets.forEach((function(t){t.$count=e.getFacetCount(t),t.$hasData=e.facetService.hasData(t.aggregation,e.results),t.$hasFiltered=e.hasFiltered(t)})),this.changeDetectorRef.detectChanges()},n}(R);function xt(e,n){1&e&&t.ɵɵelement(0,"i",4)}function St(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li"),t.ɵɵelementStart(1,"a",2),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext().filterItem(i,e)})),t.ɵɵtemplate(2,xt,1,0,"i",3),t.ɵɵtext(3),t.ɵɵpipe(4,"sqValue"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵclassMapInterpolate1("sq-metadata-color-",i.aggregation.column,""),t.ɵɵattribute("data-count",i.item.count)("data-weight",a.proportionalWeight?i.weight:null),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.item.$filtered),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind2(4,7,i.item,i.item.$column)," ")}}yt.ɵfac=function(e){return new(e||yt)(t.ɵɵdirectiveInject(E),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},yt.ɵcmp=t.ɵɵdefineComponent({type:yt,selectors:[["sq-facet-multi"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(st,!0),2&e){var r;t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.facetComponent=r.first)}},inputs:{results:"results",facets:"facets",showCount:"showCount",showProgressBar:"showProgressBar"},outputs:{events:"events"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:2,vars:2,consts:[["class","list-group list-group-flush",4,"ngIf"],[4,"ngIf"],[1,"list-group","list-group-flush"],["class","open-facet d-flex flex-row list-group-item border-0 list-group-item-action px-3 py-1 align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"open-facet","d-flex","flex-row","list-group-item","border-0","list-group-item-action","px-3","py-1","align-items-center",3,"ngClass","click"],[1,"flex-grow-1"],["class","fa-stack icons-group",3,"sqTooltip","click",4,"ngIf"],["class","mx-2 text-muted small",3,"title",4,"ngIf"],[1,"fas","fa-caret-right"],[1,"fa-stack","icons-group",3,"sqTooltip","click"],[1,"ml-2","far","fa-minus-square","fa-stack-1x","icons","icon-hover"],[1,"ml-2","far","fa-check-square","fa-stack-1x","icons","icon-default"],[1,"mx-2","text-muted","small",3,"title"],[3,"name","results","aggregation","showCount","searchable","allowExclude","allowOr","allowAnd","displayEmptyDistributionIntervals","showProgressBar",4,"ngIf"],[3,"name","results","aggregation","showCount","allowExclude","allowOr",4,"ngIf"],[3,"name","results","aggregation","showCount","searchable","allowExclude","allowOr","allowAnd","displayEmptyDistributionIntervals","showProgressBar"],["facet",""],[3,"name","results","aggregation","showCount","allowExclude","allowOr"]],template:function(e,n){1&e&&(t.ɵɵtemplate(0,ht,2,1,"div",0),t.ɵɵtemplate(1,vt,3,2,"ng-container",1)),2&e&&(t.ɵɵproperty("ngIf",!n.openedFacet),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.openedFacet))},directives:[u.NgIf,u.NgForOf,u.NgClass,h.TooltipDirective,fe,Ne],pipes:[c.MessagePipe,h.NumberPipe],styles:[".open-facet[_ngcontent-%COMP%]{cursor:pointer}.list-group-item.disabled[_ngcontent-%COMP%]{color:#d3d3d3}.icons-group[_ngcontent-%COMP%]{cursor:pointer}.icons-group[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{transition:opacity .3s,transform .3s}.icons-group[_ngcontent-%COMP%]   .icons.icon-hover[_ngcontent-%COMP%]{opacity:0;transform:rotate(-180deg)}.icons-group[_ngcontent-%COMP%]:hover   .icon-default[_ngcontent-%COMP%]{opacity:0;transform:rotate(180deg)}.icons-group[_ngcontent-%COMP%]:hover   .icon-hover[_ngcontent-%COMP%]{opacity:1;transform:rotate(0deg)}"]});var Ct=function(e){function t(t){var n=e.call(this)||this;return n.facetService=t,n.limit=50,n.uniformRepartition=!1,n.showCount=!1,n.proportionalWeight=!0,n.countThreshold=0,n.shuffleData=!1,n.isolateFacetFilters=!1,n.aggregationsData=[],n.tagCloudData=[],n.filtered=[],n.defaultWeight=2,n.tagCloudFacetPrefix="tag-cloud_",n.clearFilters=new p.Action({icon:"far fa-minus-square",title:"msg#facet.clearSelects",action:function(){var e,t;if(r.Utils.isArray(n.aggregations))try{for(var i=b(n.aggregations),a=i.next();!a.done;a=i.next()){var o=a.value;n.facetService.clearFiltersSearch(n.getName(o),!0)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}else n.facetService.clearFiltersSearch(n.getName(n.aggregations),!0)}}),n}return w(t,e),t.prototype.ngOnChanges=function(e){e.results&&(this.filtered=[],this.tagCloudData=this.getTagCloudData())},t.prototype.getTagCloudData=function(){var e=this,t=this.getAggregationsData();if(0===t.length)return[];var n=[];if(this.uniformRepartition)t.forEach((function(r){var i=Math.floor(e.limit/t.length);n.push.apply(n,I(r.items.filter((function(e){return e.$filtered})).sort((function(e,t){return t.count-e.count})).slice(0,i).map((function(t){return{aggregation:r,item:t,weight:e.proportionalWeight?t.count:e.defaultWeight}})))),n.length<i&&n.push.apply(n,I(r.items.filter((function(t){return t.count>e.countThreshold&&!t.$filtered})).sort((function(e,t){return t.count-e.count})).slice(0,i-n.length).map((function(t){return{aggregation:r,item:t,weight:e.proportionalWeight?t.count:e.defaultWeight}}))))})),n=n.sort((function(e,t){return t.item.count-e.item.count}));else{t.forEach((function(t){n.push.apply(n,I(t.items.filter((function(t){return t.count>e.countThreshold||t.$filtered})).map((function(n){return{aggregation:t,item:n,weight:e.proportionalWeight?n.count:e.defaultWeight}}))))}));var r=n.filter((function(e){return e.item.$filtered}));if(r.length<this.limit){var i=n.filter((function(e){return!e.item.$filtered})).sort((function(e,t){return t.item.count-e.item.count}));(n=I(r)).push.apply(n,I(i.slice(0,this.limit-r.length)))}else n=r.slice(0,this.limit)}return n=n.sort((function(e,t){return t.item.count-e.item.count})).map((function(t){return Object.assign(Object.assign({},t),{weight:e.proportionalWeight?e.scaleItemWeight(n,t.item.count):e.defaultWeight})})),this.shuffleData&&(n=this.shuffle(n)),n},t.prototype.filterItem=function(e,t){var n=this.getName(e.aggregation.name),r=e.aggregation,i=e.item;this.isFiltered(r,i)?this.facetService.removeFilterSearch(n,r,i):this.facetService.addFilterSearch(n,r,i),t.preventDefault()},Object.defineProperty(t.prototype,"actions",{get:function(){var e=[];return this.isFiltering()&&e.push(this.clearFilters),e},enumerable:!1,configurable:!0}),t.prototype.getAggregationsData=function(){var e=this;return[].concat(this.aggregations).filter((function(t){return e.facetService.hasData(t,e.results)})).map((function(t){return e.facetService.getAggregation(t,e.results)})).map((function(t){return e.refreshFiltered(t)}))},t.prototype.refreshFiltered=function(e){var t=this,n=this.getName(e.name);this.facetService.hasFiltered(n)&&(this.facetService.getAggregationItemsFiltered(n,e.valuesAreExpressions).forEach((function(n){t.isFiltered(e,n)||(n.$filtered=!0,t.filtered.push(n))})),e.items.forEach((function(r){var i=t.facetService.filteredIndex(e,t.filtered,r);t.facetService.itemFiltered(n,e,r)?(r.$filtered=!0,t.isFiltered(e,r)||t.filtered.push(r)):-1!==i&&(r.$filtered=!0)})));return e},t.prototype.getName=function(e){return this.isolateFacetFilters?this.tagCloudFacetPrefix+e:e},t.prototype.scaleItemWeight=function(e,t){return Math.round((t-e[e.length-1].weight)/(e[0].weight-e[e.length-1].weight)*9)+1},t.prototype.isFiltered=function(e,t){return-1!==this.facetService.filteredIndex(e,this.filtered,t)},t.prototype.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*t),r=e[t];e[t]=e[n],e[n]=r}return e},t.prototype.isFiltering=function(){var e=this;return[].concat(this.aggregations).some((function(t){return e.facetService.hasFiltered(e.getName(t))}))},t}(R);Ct.ɵfac=function(e){return new(e||Ct)(t.ɵɵdirectiveInject(E))},Ct.ɵcmp=t.ɵɵdefineComponent({type:Ct,selectors:[["sq-facet-tag-cloud"]],inputs:{results:"results",aggregations:"aggregations",limit:"limit",uniformRepartition:"uniformRepartition",showCount:"showCount",proportionalWeight:"proportionalWeight",countThreshold:"countThreshold",shuffleData:"shuffleData",isolateFacetFilters:"isolateFacetFilters"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:2,vars:2,consts:[[1,"cloud"],[4,"ngFor","ngForOf"],["href","#",3,"click"],["class","far fa-check-circle filtered",4,"ngIf"],[1,"far","fa-check-circle","filtered"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"ul",0),t.ɵɵtemplate(1,St,5,10,"li",1),t.ɵɵelementEnd()),2&e&&(t.ɵɵattribute("data-show-count",n.showCount?"":null),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.tagCloudData))},directives:[u.NgForOf,u.NgIf],pipes:[h.ValuePipe],styles:['ul.cloud[_ngcontent-%COMP%]{align-items:center;display:flex;flex-wrap:wrap;justify-content:center;list-style:none;overflow-wrap:anywhere;padding-left:0}ul.cloud[_ngcontent-%COMP%]   a[data-weight="1"][_ngcontent-%COMP%]{--size:1}ul.cloud[_ngcontent-%COMP%]   a[data-weight="2"][_ngcontent-%COMP%]{--size:2}ul.cloud[_ngcontent-%COMP%]   a[data-weight="3"][_ngcontent-%COMP%]{--size:3}ul.cloud[_ngcontent-%COMP%]   a[data-weight="4"][_ngcontent-%COMP%]{--size:4}ul.cloud[_ngcontent-%COMP%]   a[data-weight="5"][_ngcontent-%COMP%]{--size:5}ul.cloud[_ngcontent-%COMP%]   a[data-weight="6"][_ngcontent-%COMP%]{--size:6}ul.cloud[_ngcontent-%COMP%]   a[data-weight="7"][_ngcontent-%COMP%]{--size:7}ul.cloud[_ngcontent-%COMP%]   a[data-weight="8"][_ngcontent-%COMP%]{--size:8}ul.cloud[_ngcontent-%COMP%]   a[data-weight="9"][_ngcontent-%COMP%]{--size:9}ul.cloud[_ngcontent-%COMP%]   a[data-weight="10"][_ngcontent-%COMP%]{--size:10}ul.cloud[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{--color:#a33;--size:2;color:var(--color);display:block;font-size:calc(var(--size)*0.25rem + .5rem);padding:.125rem .25rem;position:relative;text-decoration:none}ul[data-show-count][_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:" (" attr(data-count) ")";font-size:calc(var(--size)*0.125rem + .5rem)}ul.cloud[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{background:rgba(0,0,0,.03);content:"";height:100%;left:50%;position:absolute;top:0;transform:translate(-50%);transition:width .25s;width:0}ul.cloud[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus:before, ul.cloud[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%}.filtered[_ngcontent-%COMP%]{font-size:calc(var(--size)*0.125rem + .5rem)}']});var wt=function(){function e(){}return e.forRoot=function(t,n){return void 0===t&&(t=void 0),void 0===n&&(n=void 0),{ngModule:e,providers:[{provide:M,useValue:t},{provide:O,useValue:n}]}},e}();wt.ɵmod=t.ɵɵdefineNgModule({type:wt}),wt.ɵinj=t.ɵɵdefineInjector({factory:function(e){return new(e||wt)},imports:[[u.CommonModule,f.FormsModule,f.ReactiveFormsModule,c.IntlModule,h.UtilsModule,d.CollapseModule,p.BsActionModule,s.BsSearchModule,l.BsAutocompleteModule,g.Ng5SliderModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(wt,{declarations:[L,fe,Ne,ze,He,ot,Xe,je,yt,Ct],imports:[u.CommonModule,f.FormsModule,f.ReactiveFormsModule,c.IntlModule,h.UtilsModule,d.CollapseModule,p.BsActionModule,s.BsSearchModule,l.BsAutocompleteModule,g.Ng5SliderModule],exports:[L,fe,Ne,ze,He,ot,Xe,je,yt,Ct]});var bt=r.Utils.merge({},{facet:{showFacetTextView:"Show text",showFacetChartView:"Show chart",itemExclude:"Exclude",applyFilters:"{selections, plural, one {Apply filter} other {Apply filters}}",clearFilters:"{selected, plural, one {Clear filter} other {Clear filters}}",loadMore:"Load more",showMore:"Show more",showLess:"Show less",displayed:"Displayed",removeAll:"Remove all",searchPlaceholder:"Search...",itemSelect:"Select this value",itemUnselect:"Unselect this value",filterItem:"Keep documents with {terme}",filterItems:"Keep documents with ANY of the selected items",filterItemsAnd:"Keep documents with ALL the selected items",excludeItems:"Exclude document with selected items",clearSelects:"Clear the current filters",searchItems:"Search for a value in this list",searchNoResult:"No results",openItem:"Open",closeItem:"Close",authors:{title:"Authors"},concepts:{title:"Concepts"},company:{title:"Companies"},docformat:{title:"Formats"},doctype:{title:"Document Types"},documentlanguages:{title:"Languages"},fileext:{title:"File Extensions"},filename:{title:"Filenames"},geo:{title:"Places"},matchingpartnames:{title:"Matching Partnames"},modified:{title:"Dates"},person:{title:"People"},refine:{title:"Refine Search",input:{label:"Refine",buttonTitle:"Refine",placeholder:"Refine by..."}},size:{title:"Sizes"},tagcloud:{title:"Tag Cloud"},title:{title:"Titles"},treepath:{title:"Sources"},recentQueries:{title:"Recent queries"},recentQueriesPublic:{title:"Public recent queries"},mySearch:{title:"My Search",itemRemove:"Remove"},search:{label:"Search",buttonTitle:"Search",placeholder:"Search...",showSearchForm:"Show search form",hideSearchForm:"Hide search form"},range:{year:"{date, date, sqYear}",monthYear:"{date, date, sqMonthYear}",weekYear:"W{week, number, sqWeek} {weekYear, number, sqYear}",apply:"Apply",clear:"Clear",unavailable:"No available range"},filters:{add:"Add facet",addAll:"Add all facets",remove:"Remove facet",removeAll:"Remove all facets",clear:"Clear filter",moreFilters:"",showFilters:"Show filters",hideFilters:"Hide filters",back:"Back to filters",selectedFilters:"This filter is active in the current query",customizeFacets:"Select facets to display or hide"},selectedValue:"This value is selected in the current query",previous:"Previous",next:"Next",filterItemCountTooltip:"{count} possible values for this filter"},facetCard:{expand:"Expand",collapse:"Collapse",enlarge:"Enlarge",reduce:"Reduce",openSettings:"Open settings",saveSettings:"Save settings"}},s.enSearch,y.enSelection,d.enCollapse),Ft=r.Utils.merge({},{facet:{showFacetTextView:"Afficher le texte",showFacetChartView:"Afficher le graphique",itemExclude:"Exclure",applyFilters:"{selections, plural, one {Appliquer le filtre} other {Appliquer les filtres}}",clearFilters:"{selected, plural, one {Effacer le filtre} other {Effacer les filtres}}",loadMore:"Charger plus",showMore:"Afficher plus",showLess:"Afficher moins",displayed:"Affiché",removeAll:"Supprimer tout",searchPlaceholder:"Rechercher...",itemSelect:"Sélectionner cette valeur",itemUnselect:"Désélectionner cette valeur",filterItem:"Garder les documents qui contiennent {terme}",filterItems:"Garder les documents qui contiennent n'importe lequel de ces termes",filterItemsAnd:"Garder les documents qui contiennent tous ces termes",excludeItems:"Exclure les documents contenant un de ces termes",clearSelects:"Enlever les filtres",searchItems:"Rechercher une valeur dans cette liste",searchNoResult:"Pas de résultat",openItem:"Ouvrir",closeItem:"Refermer",authors:{title:"Auteurs"},concepts:{title:"Concepts"},company:{title:"Sociétés"},docformat:{title:"Formats"},doctype:{title:"Types de document"},documentlanguages:{title:"Langues"},fileext:{title:"Extensions de fichiers"},filename:{title:"Noms de fichiers"},geo:{title:"Lieux"},matchingpartnames:{title:"Partnames"},modified:{title:"Dates"},person:{title:"Personnes"},refine:{title:"Affiner la recherche",input:{label:"Affiner",buttonTitle:"Affiner",placeholder:"Affiner par ..."}},size:{title:"Tailles"},tagcloud:{title:"Nuage de mots"},title:{title:"Titres"},treepath:{title:"Sources"},recentQueries:{title:"Requêtes récentes"},recentQueriesPublic:{title:"Requêtes publiques récentes"},mySearch:{title:"Ma recherche",itemRemove:"Supprimer"},search:{label:"Rechercher",buttonTitle:"Rechercher",placeholder:"Rechercher ...",showSearchForm:"Afficher le formulaire de recherche",hideSearchForm:"Masquer le formulaire de recherche"},range:{year:"{date, date, sqYear}",monthYear:"{date, date, sqMonthYear}",weekYear:"s{week, number, sqWeek} {weekYear, number, sqYear}",apply:"Appliquer",clear:"Effacer",unavailable:"Aucune plage disponible"},filters:{add:"Ajouter la facette",addAll:"Ajouter toutes les facettes",remove:"Retirer la facette",removeAll:"Retirer toutes les facettes",clear:"Réinitialiser",moreFilters:"",showFilters:"Montrer les filtres",hideFilters:"Cacher les filtres",back:"Retour aux filtres",selectedFilters:"Ce filtre est utilisé dans la recherche actuelle",customizeFacets:"Sélectionnez les facettes à montrer ou cacher"},selectedValue:"Cette valeur est sélectionnée dans la recherche actuelle",previous:"Précédent",next:"Suivant",filterItemCountTooltip:"{count} valeurs possibles pour ce filtre"},facetCard:{expand:"Déplier",collapse:"Replier",enlarge:"Agrandir",reduce:"Réduire",openSettings:"Ouvrir les paramètres",saveSettings:"Enregistrer les paramètres"}},s.frSearch,y.frSelection,d.frCollapse),It=r.Utils.merge({},{facet:{show_text_view:"Text anzeigen",show_chart_view:"Chart anzeigen",itemExclude:"Exkludieren",applyFilters:"{selections, plural, one {Filter anwenden} other {Filter anwenden}}",clearFilters:"{selected, plural, one {Filter löschen} other {Filter löschen}}",loadMore:"Mehr laden",showMore:"Mehr anzeigen",showLess:"Weniger anzeigen",displayed:"Angezeigt",removeAll:"Alle entfernen",searchPlaceholder:"Suche...",itemSelect:"Diesen Wert auswählen",filterItems:"Behalte Dokumente mit MINDESTENS EINEM der ausgewählten Werte",filterItemsAnd:"Behalte Dokumente mit ALLEN ausgewählten Werten",excludeItems:"Exckludiere Dokumente mit den ausgewählten Werten",clearSelects:"Entferne die aktuellen Filter",searchItems:"Suche nach eniem Wert in dieser Liste",searchNoResult:"Keine Ergebnisse",openItem:"Öffnen",closeItem:"Schließen",authors:{title:"Autoren"},concepts:{title:"Konzepte"},company:{title:"Firmen"},docformat:{title:"Formate"},doctype:{title:"Dokumenttypen"},documentlanguages:{title:"Sprachen"},fileext:{title:"Dateierweiterungen"},filename:{title:"Dateinamen"},geo:{title:"Orte"},matchingpartnames:{title:"Übereinstimmende Partnames"},modified:{title:"Datumsangaben"},person:{title:"Personen"},refine:{title:"Suche verfeinern",input:{label:"Verfeinern",buttonTitle:"Verfeinern",placeholder:"Verfeinern nach..."}},size:{title:"Größen"},tagcloud:{title:"Wortwolke"},title:{title:"Titel"},treepath:{title:"Quellen"},recentQueries:{title:"Kürzliche Suchanfragen"},recentQueriesPublic:{title:"Kürzliche öffentliche Suchanfragen"},mySearch:{title:"Meine Suche",itemRemove:"Entfernen"},search:{label:"Suche",buttonTitle:"Suche",placeholder:"Suche...",showSearchForm:"Suchmaske einblenden",hideSearchForm:"Suchmaske ausblenden"},range:{year:"{date, date, sqYear}",monthYear:"{date, date, sqMonthYear}",weekYear:"W{week, number, sqWeek} {weekYear, number, sqYear}",apply:"Anwenden",clear:"Löschen",unavailable:"Kein Bereich verfügbar"},filters:{add:"Filter hinzufügen",addAll:"Alle Facetten hinzufügen",remove:"Filter entfernen",removeAll:"Alle Facetten entfernen",clear:"Filter löschen",moreFilters:"",showFilters:"Filter einblenden",hideFilters:"Filter ausblenden",back:"Zurück zu den Filtern",selectedFilters:"Dieser Filter ist in der aktuellen Suchanfrage aktiv",customizeFacets:"Facetten zum Anzeigen oder Ausblenden auswählen"},selectedValue:"Dieser Wert ist in der aktuellen Anfrage ausgewählt.",previous:"Zurück",next:"Weiter",filterItemCountTooltip:"{count} mögliche Werte für diesen Filter"},facetCard:{expand:"Erweitern",collapse:"Reduzieren",enlarge:"Vergrößern",reduce:"Reduzieren",openSettings:"Einstellungen öffnen",saveSettings:"Einstellungen speichern"}},s.deSearch,y.deSelection,d.deCollapse);e.ALL_FACETS=M,e.AbstractFacet=R,e.BsFacetBar=je,e.BsFacetCard=L,e.BsFacetFilters=ze,e.BsFacetList=fe,e.BsFacetModule=wt,e.BsFacetMultiComponent=yt,e.BsFacetRange=ot,e.BsFacetTagCloud=Ct,e.BsFacetTree=Ne,e.BsMySearch=Xe,e.BsRefine=He,e.DEFAULT_FACETS=O,e.FACET_CHANGE_EVENTS=A,e.FacetService=E,e.deFacet=It,e.enFacet=bt,e.frFacet=Ft,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sinequa-components-facet.umd.min.js.map