{"version":3,"file":"sinequa-components-feedback.umd.js","sources":["../../../projects/components/feedback/feedback.service.ts","../projects/components/feedback/bootstrap/feedback-menu/feedback-menu.ts","../projects/components/feedback/bootstrap/feedback-menu/feedback-menu.html","../../projects/components/feedback/bootstrap/feedback.module.ts","../../projects/components/feedback/messages/en.ts","../../projects/components/feedback/messages/fr.ts","../../projects/components/feedback/messages/de.ts","../../projects/components/feedback/messages/index.ts","../../../projects/components/feedback/sinequa-components-feedback.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\nimport {AuditWebService, AuditEvent} from \"@sinequa/core/web-services\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Action} from \"@sinequa/components/action\";\n\nexport const AuditFeedbackType = \"UserFeedback\";\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class FeedbackService {\n\n    constructor(\n        public auditService: AuditWebService,\n        public modalService: ModalService,\n        public appService: AppService,\n        public notificationsService: NotificationsService\n        ) {\n    }\n\n    public sendUserFeedback(type: string, message: string, thankUser: boolean){\n        const event : AuditEvent = {\n            type: AuditFeedbackType,\n            detail: {\n                app: this.appService.appName,\n                message: type,\n                detail: message\n            }\n        };\n        Utils.subscribe(this.auditService.notify([event]),\n            (result) => {\n                if(thankUser)\n                    this.notificationsService.success(\"msg#feedback.thankyou\");\n        });\n    }\n\n    public buildFeedbackAction() : Action[] {\n        return [new Action({\n            text: \"msg#feedback.text\",\n            title: \"msg#feedback.title\",\n            icon: \"fas fa-comment\",\n            headerGroup: true,\n            children: [\n                this.createAction(\"content\", \"msg#feedback.content.text\", \"msg#feedback.content.title\", \"far fa-file-alt fa-fw\"),\n                this.createAction(\"ui\", \"msg#feedback.ui.text\", \"msg#feedback.ui.title\", \"fas fa-desktop fa-fw\"),\n                this.createAction(\"lang\", \"msg#feedback.lang.text\", \"msg#feedback.lang.title\", \"far fa-comments fa-fw\"),\n                this.createAction(\"other\", \"msg#feedback.other.text\", \"msg#feedback.other.title\", \"far fa-lightbulb fa-fw\"),\n            ]\n        })];\n    }\n\n    public createAction(type:string, text:string, title:string, icon:string) : Action {\n        return new Action({\n            text: text,\n            title: title,\n            icon: icon,\n            action: () => this.openFeedbackModal(type, title)\n        });\n    }\n\n    public openFeedbackModal(type: string, title: string){\n        const model = {title: 'msg#feedback.title', message: title, output: '', buttons: [], rowCount: 5};\n        this.modalService.prompt(model)\n            .then((result) => {\n                if (result === ModalResult.OK && model.output.trim() !== \"\") {\n                    this.sendUserFeedback(type, model.output, true);\n                }\n            });\n    }\n}","import {Component, OnInit, Input, ChangeDetectionStrategy} from \"@angular/core\";\nimport {Action, ActionButtonsOptions} from \"@sinequa/components/action\";\nimport {FeedbackService} from \"../../feedback.service\";\n\n@Component({\n    selector: \"sq-feedback-menu\",\n    templateUrl: \"./feedback-menu.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsFeedbackMenu implements OnInit {\n\n    @Input() size: string;\n    @Input() style: string;\n    @Input() rightAligned: boolean;\n\n    items: Action[];\n    options: ActionButtonsOptions;\n\n    constructor(\n        public feedbackService: FeedbackService) {\n    }\n\n    ngOnInit() {\n        this.items = this.feedbackService.buildFeedbackAction();\n        this.options = {\n            items: this.items, \n            autoAdjust: true, \n            rightAligned: this.rightAligned, \n            size: this.size, \n            style: this.style\n        };\n    }\n\n\n}","<div [sq-action-buttons]=\"options\"></div>","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\n\nimport {BsFeedbackMenu} from \"./feedback-menu/feedback-menu\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        BsActionModule,\n        ValidationModule,\n        BsModalModule\n    ],\n    declarations: [\n        BsFeedbackMenu\n    ],\n    exports: [\n        BsFeedbackMenu\n    ]\n})\nexport class BsFeedbackModule {\n}\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\" : \"Send feedback to the Sinequa admin\",\n        \"content\" : {\n            \"text\" : \"Content\",\n            \"title\" : \"Propose to add new content or improve the current content\"\n        },\n        \"ui\" : {\n            \"text\" : \"User Interface\",\n            \"title\" : \"Propose improvements to the User Interface\"\n        },\n        \"lang\" : {\n            \"text\" : \"Language\",\n            \"title\" : \"Propose language processing improvements, like new words, synonyms to add to the dictionaries (this affects directly the relevance of the search engine)\"\n        },\n        \"other\" : {\n            \"text\" : \"Other\",\n            \"title\" : \"Submit feature requests, and other improvement ideas\"\n        },\n        \"thankyou\": \"Thank you for your feedback!\",\n        \"quality\" : {\n            \"label\" : \"Quality of the document:\"\n        },\n        \"relevance\" : {\n            \"label\" : \"Relevance of the document:\"\n        },\n        \"labels\" : {\n            \"public\" : {\n                \"label\" : \"Tags:\"\n            },\n            \"private\" : {\n                \"label\" : \"Private tags:\"\n            }\n        }\n    }\n};\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\" : \"Envoyer un feedback à l'admin Sinequa\",\n        \"content\" : {\n            \"text\" : \"Contenu\",\n            \"title\" : \"Proposer d'ajouter du contenu ou d'améliorer le contenu actuel\"\n        },\n        \"ui\" : {\n            \"text\" : \"Interface Utilisateur\",\n            \"title\" : \"Proposer des améliorations d'interfaces utilisateur\"\n        },\n        \"lang\" : {\n            \"text\" : \"Langage\",\n            \"title\" : \"Proposer des améliorations linguistiques, comme des nouveaux mots et synonymes à ajouter aux dictionaires (cela affecte directement la pertinence du moteur de recherche)\"\n        },\n        \"other\" : {\n            \"text\" : \"Autre\",\n            \"title\" : \"Proposer des fonctionnalités supplémentaires et autres idées d'améliorations\"\n        },\n        \"thankyou\": \"Merci pour votre commentaire !\",\n        \"quality\" : {\n            \"label\" : \"Qualité du document:\"\n        },\n        \"relevance\" : {\n            \"label\" : \"Pertinence du document:\"\n        },\n        \"labels\" : {\n            \"public\" : {\n                \"label\" : \"Tags:\"\n            },\n            \"private\" : {\n                \"label\" : \"Tags privés:\"\n            }\n        }\n    },\n};\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\": \"Sende Rückmeldung an den Sinequa-Admin\",\n        \"content\": {\n          \"text\": \"Inhalt\",\n          \"title\": \"Vorschlag zum Hinzufügen neuer Inhalte oder zur Verbesserung vorhandener Inhalte\"\n        },\n        \"ui\": {\n          \"text\": \"Benutzeroberfläche\",\n          \"title\": \"Schlage Verbesserungen für die Benutzeroberfläche vor\"\n        },\n        \"lang\": {\n          \"text\": \"Sprache\",\n          \"title\": \"Schlage Verbesserungen für die Sprachverarbeitung vor wie neue Worte oder Synonyme, die zu den Wörterbüchern hinzugefügt werden sollen (dies hat direkte Auswirkungen auf die Relevanzberechnung der Suchmaschine)\"\n        },\n        \"other\": {\n          \"text\": \"Andere\",\n          \"title\": \"Reichen Sie einen Vorschlag für eine zusätzliche Funktion oder andere Verbesserungvorschläge ein\"\n        },\n        \"thankyou\": \"Vielen Dank für Ihre Rückmeldung!\",\n        \"quality\": {\n          \"label\": \"Qualität des Dokuments:\"\n        },\n        \"relevance\": {\n          \"label\": \"Relevanz des Dokuments:\"\n        },\n        \"labels\" : {\n            \"public\": {\n              \"label\": \"Etiketten:\"\n            },\n            \"private\": {\n              \"label\": \"Private Etiketten:\"\n            }\n        }\n    }\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enFeedback from \"./en\";\nimport _frFeedback from \"./fr\";\nimport _deFeedback from \"./de\";\n\nconst enFeedback = Utils.merge({}, _enFeedback, enModal);\nconst frFeedback = Utils.merge({}, _frFeedback, frModal);\nconst deFeedback = Utils.merge({}, _deFeedback, deModal);\n\nexport { enFeedback, frFeedback, deFeedback };\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Utils","Action","Injectable","i0.ɵɵelement","i0.ɵɵproperty","Component","ChangeDetectionStrategy","Input","CommonModule","IntlModule","BsActionModule","ValidationModule","BsModalModule","NgModule","enModal","frModal","deModal"],"mappings":"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"}