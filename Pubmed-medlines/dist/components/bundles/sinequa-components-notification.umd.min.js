!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@angular/core"),require("@angular/common"),require("@angular/animations"),require("@sinequa/core/base"),require("@sinequa/core/notification"),require("@sinequa/core/intl"),require("@sinequa/components/action")):"function"==typeof define&&define.amd?define("@sinequa/components/notification",["exports","@angular/core","@angular/common","@angular/animations","@sinequa/core/base","@sinequa/core/notification","@sinequa/core/intl","@sinequa/components/action"],i):i(((t="undefined"!=typeof globalThis?globalThis:t||self).sinequa=t.sinequa||{},t.sinequa.components=t.sinequa.components||{},t.sinequa.components.notification={}),t.ng.core,t.ng.common,t.ng.animations,t.sinequa.core.base,t.sinequa.core.notification,t.sinequa.core.intl,t.sinequa.components.action)}(this,(function(t,i,n,e,o,a,c,s){"use strict";function r(t,n){if(1&t){var e=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",7),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(e),i.ɵɵnextContext().close()})),i.ɵɵelementStart(1,"span",8),i.ɵɵtext(2,"×"),i.ɵɵelementEnd(),i.ɵɵelementStart(3,"span",9),i.ɵɵtext(4,"Close"),i.ɵɵelementEnd(),i.ɵɵelementEnd()}}function f(t,n){if(1&t&&(i.ɵɵelementContainerStart(0),i.ɵɵelementStart(1,"span",10),i.ɵɵtext(2),i.ɵɵpipe(3,"sqMessage"),i.ɵɵelementEnd(),i.ɵɵelement(4,"hr"),i.ɵɵelementContainerEnd()),2&t){var e=i.ɵɵnextContext();i.ɵɵadvance(2),i.ɵɵtextInterpolate(i.ɵɵpipeBind1(3,1,e.notification.title))}}var u=function(t){return{values:t}};function l(t){return[e.trigger("autoClose",[e.transition("1 => void",[e.animate(t,e.style({opacity:0}))])])]}var p=function(){function t(t){this.notificationsService=t}return t.prototype.ngOnInit=function(){var t=this;this.notification.autoClose&&0===this.notification.state&&(this.autoClose=!0,o.Utils.delay(5e3).then((function(i){0===t.notification.state&&t.close()})))},Object.defineProperty(t.prototype,"alertClass",{get:function(){switch(this.notification.type){case 1:return"info";case 0:return"success";case 2:return"warning";case 3:return"danger"}return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"notificationClass",{get:function(){switch(this.notification.type){case 1:return"fas fa-info-circle fa-lg";case 0:return"fas fa-check-circle fa-lg";case 2:return"fas fa-exclamation-triangle fa-lg";case 3:return"fas fa-exclamation-circle fa-lg"}return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showClose",{get:function(){return!this.notification.autoClose||0!==this.notification.state},enumerable:!1,configurable:!0}),t.prototype.close=function(){this.notificationsService.closeNotification(this.notification)},t}();p.ɵfac=function(t){return new(t||p)(i.ɵɵdirectiveInject(a.NotificationsService))},p.ɵcmp=i.ɵɵdefineComponent({type:p,selectors:[["sq-notification"]],inputs:{notification:"notification"},decls:10,vars:15,consts:[["role","alert"],["type","button","class","close","aria-label","Close",3,"click",4,"ngIf"],[1,"sq-notification-container"],[1,"sq-notification-icon"],[1,"sq-notification-message"],[4,"ngIf"],[1,"sq-notification-text"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"sr-only"],[1,"sq-notification-title"]],template:function(t,n){1&t&&(i.ɵɵelementStart(0,"div",0),i.ɵɵtemplate(1,r,5,0,"button",1),i.ɵɵelementStart(2,"div",2),i.ɵɵelementStart(3,"div",3),i.ɵɵelement(4,"span"),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"div",4),i.ɵɵtemplate(6,f,5,3,"ng-container",5),i.ɵɵelementStart(7,"span",6),i.ɵɵtext(8),i.ɵɵpipe(9,"sqMessage"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&t&&(i.ɵɵclassMapInterpolate1("alert alert-",n.alertClass," sq-notification"),i.ɵɵproperty("@autoClose",n.autoClose),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",n.showClose),i.ɵɵadvance(3),i.ɵɵclassMap(n.notificationClass),i.ɵɵadvance(2),i.ɵɵproperty("ngIf",!!n.notification.title),i.ɵɵadvance(2),i.ɵɵtextInterpolate(i.ɵɵpipeBind2(9,10,n.notification.text,i.ɵɵpureFunction1(13,u,n.notification.params))))},directives:[n.NgIf],pipes:[c.MessagePipe],encapsulation:2,data:{animation:l(".15s ease-in-out")}});Object.create;function d(t){var i="function"==typeof Symbol&&Symbol.iterator,n=i&&t[i],e=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;function h(t,n){if(1&t&&i.ɵɵelement(0,"sq-notification",2),2&t){var e=n.$implicit;i.ɵɵproperty("notification",e)}}var m=function(){function t(t,i){this.notificationsService=t,this.changeDetectorRef=i,this.notifications=[]}return t.prototype.ngOnInit=function(){var t=this;this.loadNotifications(),this.subscription=this.notificationsService.events.subscribe((function(i){"updated"===i.type&&(t.loadNotifications(),t.changeDetectorRef.markForCheck())}))},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.loadNotifications=function(){var t,i;this.notifications.splice(0);try{for(var n=d(this.notificationsService.notifications),e=n.next();!e.done;e=n.next()){var o=e.value;2!==o.state&&this.notifications.unshift(o)}}catch(i){t={error:i}}finally{try{e&&!e.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}},t}();m.ɵfac=function(t){return new(t||m)(i.ɵɵdirectiveInject(a.NotificationsService),i.ɵɵdirectiveInject(i.ChangeDetectorRef))},m.ɵcmp=i.ɵɵdefineComponent({type:m,selectors:[["sq-notifications"]],decls:2,vars:1,consts:[[1,"sq-notifications"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"]],template:function(t,n){1&t&&(i.ɵɵelementStart(0,"div",0),i.ɵɵtemplate(1,h,1,1,"sq-notification",1),i.ɵɵelementEnd()),2&t&&(i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",n.notifications))},directives:[n.NgForOf,p],encapsulation:2});var g=function(t){return[t]},v=function(t){return{items:t}},b=function(){function t(t,i){this.notificationsService=t,this.changeDetectorRef=i}return t.prototype.ngOnInit=function(){this.buildAction(),this.unbind(),this.bind()},t.prototype.bind=function(){var t=this;this.subscription=this.notificationsService.notificationsStream.subscribe((function(i){t.action.update()}))},t.prototype.unbind=function(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},t.prototype.ngOnDestroy=function(){this.unbind()},t.prototype.buildAction=function(){var t=this;this.action=new s.Action({icon:"fas fa-shield-alt",title:"msg#notification.title",hidden:!0,children:[new s.Action({text:"msg#notification.showNotifications",action:function(i,n){t.notificationsService.showNotifications()},updater:function(i){i.hidden=t.notificationsService.allNotificationsShowing,t.changeDetectorRef.markForCheck()}}),new s.Action({text:"msg#notification.hideNotifications",action:function(i,n){t.notificationsService.hideNotifications()},updater:function(i){i.hidden=t.notificationsService.allNotificationsHidden,t.changeDetectorRef.markForCheck()}}),new s.Action({separator:!0}),new s.Action({text:"msg#notification.clearNotifications",action:function(i,n){t.notificationsService.deleteAllNotifications()}})]})},t}();b.ɵfac=function(t){return new(t||b)(i.ɵɵdirectiveInject(a.NotificationsService),i.ɵɵdirectiveInject(i.ChangeDetectorRef))},b.ɵcmp=i.ɵɵdefineComponent({type:b,selectors:[["sq-notifications-manager"]],decls:2,vars:5,consts:[[1,"btn-toolbar","dropup"],[1,"btn-group",3,"sq-action-buttons"]],template:function(t,n){1&t&&(i.ɵɵelementStart(0,"div",0),i.ɵɵelement(1,"div",1),i.ɵɵelementEnd()),2&t&&(i.ɵɵadvance(1),i.ɵɵproperty("sq-action-buttons",i.ɵɵpureFunction1(3,v,i.ɵɵpureFunction1(1,g,n.action))))},directives:[s.BsActionButtons],encapsulation:2});var y=function(){};y.ɵmod=i.ɵɵdefineNgModule({type:y}),y.ɵinj=i.ɵɵdefineInjector({factory:function(t){return new(t||y)},imports:[[n.CommonModule,c.IntlModule,s.BsActionModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&i.ɵɵsetNgModuleScope(y,{declarations:[p,m,b],imports:[n.CommonModule,c.IntlModule,s.BsActionModule],exports:[m,b]});t.BsNotification=p,t.BsNotificationModule=y,t.BsNotifications=m,t.BsNotificationsManager=b,t.deNotification={notification:{title:"Benachrichtigungen",showNotifications:"Zeige Benachrichtigungen",hideNotifications:"Benachrichtigungen verstecken",clearNotifications:"Benachrichtigungen löschen"}},t.enNotification={notification:{title:"Notifications",showNotifications:"Show notifications",hideNotifications:"Hide notifications",clearNotifications:"Clear notifications"}},t.frNotification={notification:{title:"Notifications",showNotifications:"Afficher les notifications",hideNotifications:"Masquer les notifications",clearNotifications:"Effacer les notifications"}},t.notificationAnimations=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=sinequa-components-notification.umd.min.js.map