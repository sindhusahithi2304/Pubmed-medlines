!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@sinequa/core/intl"),require("@sinequa/core/web-services"),require("@sinequa/components/utils"),require("@sinequa/core/base"),require("@angular/platform-browser"),require("rxjs"),require("@angular/router"),require("@sinequa/core/app-utils"),require("@sinequa/core/login"),require("@sinequa/components/search"),require("@sinequa/core/modal"),require("@sinequa/components/saved-queries"),require("@sinequa/components/result"),require("@sinequa/components/facet"),require("@sinequa/components/action"),require("@sinequa/components/metadata"),require("@angular/forms"),require("@angular/cdk/scrolling"),require("@sinequa/core/validation"),require("@sinequa/components/collapse"),require("@sinequa/components/modal")):"function"==typeof define&&define.amd?define("@sinequa/components/preview",["exports","@angular/core","@angular/common","@sinequa/core/intl","@sinequa/core/web-services","@sinequa/components/utils","@sinequa/core/base","@angular/platform-browser","rxjs","@angular/router","@sinequa/core/app-utils","@sinequa/core/login","@sinequa/components/search","@sinequa/core/modal","@sinequa/components/saved-queries","@sinequa/components/result","@sinequa/components/facet","@sinequa/components/action","@sinequa/components/metadata","@angular/forms","@angular/cdk/scrolling","@sinequa/core/validation","@sinequa/components/collapse","@sinequa/components/modal"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).sinequa=e.sinequa||{},e.sinequa.components=e.sinequa.components||{},e.sinequa.components.preview={}),e.ng.core,e.ng.common,e.sinequa.core.intl,e.sinequa.core["web-services"],e.sinequa.components.utils,e.sinequa.core.base,e.ng.platformBrowser,e.rxjs,e.ng.router,e.sinequa.core["app-utils"],e.sinequa.core.login,e.sinequa.components.search,e.sinequa.core.modal,e.sinequa.components["saved-queries"],e.sinequa.components.result,e.sinequa.components.facet,e.sinequa.components.action,e.sinequa.components.metadata,e.ng.forms,e.ng.cdk.scrolling,e.sinequa.core.validation,e.sinequa.components.collapse,e.sinequa.components.modal)}(this,(function(e,t,n,i,r,o,a,s,l,c,p,u,d,g,h,m,v,f,y,x,w,S,C,b){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function I(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function D(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}var q;Object.create;function M(e,t){e.forEach?e.forEach(t):Array.from(e).forEach(t)}(q=e.HighlightCategoryFilterChoice||(e.HighlightCategoryFilterChoice={}))[q.All=0]="All",q[q.None=1]="None",q[q.Value=2]="Value";var T=function(){function n(e){var n,i;e instanceof t.ElementRef?(this._window=null===(n=null==e?void 0:e.nativeElement)||void 0===n?void 0:n.contentWindow,(null===(i=this._window)||void 0===i?void 0:i.frames)&&this._window.frames.frSheet&&(this._window=this._window.frames.frSheet)):this._document=e}return n.prototype.getContentWindow=function(){return this._window},Object.defineProperty(n.prototype,"document",{get:function(){return this._document||this._window.document},enumerable:!1,configurable:!0}),n.prototype.insertComponent=function(e){this.document.body.appendChild(e)},n.prototype.getHighlightText=function(e,t){if(t<0)return"";var n=this.document.querySelectorAll("#"+e+"_"+t);if(!n||0===n.length)return"";var i="";return M(n,(function(e){return i+=e.innerHTML||e.textContent})),i},n.prototype.setSvgBackgroundPositionAndSize=function(){var e=this.document.querySelectorAll("svg");if(null!=e)for(var t=0,n=e.length;t<n;t++){var i=e.item(t).getElementsByTagName("tspan");if(null!=i)for(var r=0,o=i.length;r<o;r++){var a=i.item(r);if(a){var s=a.getAttribute("data-entity-background");if(s){var l=this.getFirst(this.getDocElements(s));l&&this.resizeSvgBackground(l,a)}}}}},n.prototype.selectHighlight=function(e,t){this.clearHighlightSelection(),this.previousElement=this.document.getElementById(e+"_"+t),this.previousElement&&(this.setHighlightSelection(this.previousElement,!0,!0),this.previousElement.scrollIntoView({block:"center"}))},n.prototype.clearHighlightSelection=function(){this.previousElement&&this.previousElement.classList.remove(n.SELECTED_HIGHLIGHT_CLASS);for(var e=this.document.querySelectorAll("line.sq-svg"),t=0;t<e.length;t++){var i=e[t].parentNode;i&&i.removeChild(e[t])}},n.prototype.filterHighlights=function(e){this.updateHighlightFilterState(e),this.clearHighlightSelection()},n.prototype.updateHighlightFilterState=function(e){var t=this.document.querySelectorAll("[data-entity-display], .extractslocations, .matchlocations");a.Utils.isArray(e)?M(t,(function(t){e.some((function(e){return t.classList.contains(e)}))?t.classList.remove(n.FILTERED_OUT_HIGHLIGHT_CLASS):t.classList.add(n.FILTERED_OUT_HIGHLIGHT_CLASS)})):M(t,(function(t){n.elementIsFilteredOut(t,e)?t.classList.add(n.FILTERED_OUT_HIGHLIGHT_CLASS):t.classList.remove(n.FILTERED_OUT_HIGHLIGHT_CLASS)}))},n.prototype.toggleHighlight=function(e,t,i){M(this.document.querySelectorAll("."+e),(function(e){(!i||e.hasAttribute(n.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE)&&i===e.getAttribute(n.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE)||e.hasAttribute(n.ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE)&&i===e.getAttribute(n.ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE))&&(t?e.classList.remove(n.FILTERED_OUT_HIGHLIGHT_CLASS):e.classList.add(n.FILTERED_OUT_HIGHLIGHT_CLASS))}))},n.prototype.setHighlightSelection=function(e,t,n){this.isSvgElement(e)?this.setHighlightSelectionSVG(e,t,n):this.setHighlightSelectionHTML(e,t,n)},n.prototype.setHighlightSelectionHTML=function(e,t,i){e.classList.add(n.SELECTED_HIGHLIGHT_CLASS),t&&e.classList.add(n.SELECTED_HIGHLIGHT_FIRST_FRAGMENT_CLASS),i&&e.classList.add(n.SELECTED_HIGHLIGHT_LAST_FRAGMENT_CLASS)},n.prototype.setHighlightSelectionSVG=function(e,t,n){var i=e.getAttribute("data-entity-background");if(i){var r=this.getFirst(this.getDocElements(i)),o=r.parentNode,a=r.getBBox();if(o){var s=a.y,l=a.y+a.height,c=a.x,p=a.x+a.width,u=r.getAttribute("transform");this.addSvgLine(o,c,s,p,s,u),this.addSvgLine(o,c,l,p,l,u),t&&this.addSvgLine(o,c,s,c,l,u),n&&this.addSvgLine(o,p,s,p,l,u)}}},n.prototype.addSvgLine=function(e,t,i,r,o,a){var s=this.document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("class",n.SVG_LINE_CLASS),s.setAttribute("x1",String(t)),s.setAttribute("y1",String(i)),s.setAttribute("x2",String(r)),s.setAttribute("y2",String(o)),a&&s.setAttribute("transform",a),e.appendChild(s)},n.prototype.resizeSvgBackground=function(e,t){for(var n=t;"text"!==n.tagName&&null!=(n=n.parentNode););var i=n,r=i.getBoundingClientRect(),o=i.getBBox();if(0!==r.height&&0!==r.width){var a=2*(o.width/r.width),s=2*(o.height/r.height),l=t.getExtentOfChar(0),c=t.getComputedTextLength();e.setAttribute("x",String(l.x-a)),e.setAttribute("y",String(l.y-s)),e.setAttribute("width",String(c+2*a)),e.setAttribute("height",String(o.height+2*s));var p=i.getAttribute("transform");p&&e.setAttribute("transform",p)}},n.prototype.getDocElements=function(e){for(var t=Array(),n=this.document.querySelectorAll("#"+e),i=0;i<n.length;i++)t.push(n[i]);var r=this.document.querySelectorAll("svg");if(null!=r){i=0;for(var o=r.length;i<o;i++){var a=r.item(i).getElementsByTagName("tspan");if(null!=a)for(var s=0,l=a.length;s<l;s++){var c=a.item(s);c&&c.id===e&&t.push(c)}}}return t},n.prototype.getFirst=function(e){return null!=e&&e.length>0?e[0]:null},n.prototype.isSvgElement=function(e){return null!=e&&"viewportElement"in e},n.elementIsFilteredOut=function(t,i){var r=this.getElementCategory(t,Object.keys(i));if(null==r)return!1;var o=i[r];return null!=o&&(o.choice===e.HighlightCategoryFilterChoice.None||o.choice!==e.HighlightCategoryFilterChoice.All&&(t.hasAttribute(n.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE)?o.filterValue!==t.getAttribute(n.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE):o.filterValue!==t.getAttribute(n.ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE)))},n.getElementCategory=function(e,t){var n,i;try{for(var r=D(t),o=r.next();!o.done;o=r.next()){var a=o.value;if(e.classList.contains(a))return a}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return""},n}();T.SELECTED_HIGHLIGHT_CLASS="sq-current",T.SELECTED_HIGHLIGHT_FIRST_FRAGMENT_CLASS="sq-first",T.SELECTED_HIGHLIGHT_LAST_FRAGMENT_CLASS="sq-last",T.FILTERED_OUT_HIGHLIGHT_CLASS="sq-inactive",T.SVG_LINE_CLASS="sq-svg",T.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE="data-entity-basic",T.ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE="data-entity-display";var A=["tooltip"],F=["documentFrame"],k=function(e){return{"-ms-zoom":e,"-moz-transform":"scale(var(--factor))","-o-transform":"scale(var(--factor))","-webkit-transform":"scale(var(--factor))"}},_=function(){function e(e,n){this.cdr=e,this.sanitizer=n,this.defaultSandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts",this.scalingFactor=1,this.onPreviewReady=new t.EventEmitter,this.pageChange=new t.EventEmitter,this.previewDocLoadHandler=this.onPreviewDocLoad.bind(this)}return e.prototype.onPreviewDocLoad=function(){var e=this;if(void 0!==this.downloadUrl){this.previewDocument=new T(this.documentFrame);try{this.previewDocument.setSvgBackgroundPositionAndSize()}catch(e){console.error(e)}var t=this.documentFrame.nativeElement.contentDocument.getElementsByName("frSheet");t.length>0&&(t[0].removeEventListener("load",(function(){})),t[0].addEventListener("load",(function(){e.previewDocument=new T(e.documentFrame),e.pageChange.next(e.previewDocument),e.cdr.markForCheck()}),!0)),this.tooltip&&this.addTooltip(this.previewDocument),this.onPreviewReady.next(this.previewDocument),this.cdr.markForCheck()}},e.prototype.addTooltip=function(e){e.insertComponent(this.tooltip.nativeElement)},e.prototype.ngOnInit=function(){this.documentFrame.nativeElement.addEventListener("load",this.previewDocLoadHandler,!0)},e.prototype.ngOnDestroy=function(){this.documentFrame.nativeElement.removeEventListener("load",this.previewDocLoadHandler)},e.prototype.ngOnChanges=function(e){e.scalingFactor&&!e.scalingFactor.firstChange||(this.resetContent(),e.downloadUrl&&void 0!==e.downloadUrl.currentValue&&(this._sandbox=null===this.sandbox?void 0:a.Utils.isString(this.sandbox)?this.sandbox:this.defaultSandbox,this.sanitizedUrlSrc=this.sanitizer.bypassSecurityTrustResourceUrl(this.downloadUrl)))},e.prototype.ngAfterViewInit=function(){var e=this;this.resetContent(),this.iframeURLChange(this.documentFrame.nativeElement,(function(t){e.previewDocument=new T(e.documentFrame),e.pageChange.next(t)}))},e.prototype.iframeURLChange=function(e,t){var n=null,i=function(){if(e.contentWindow){var i=e.contentWindow.location.href;if("about:blank"===i)return;i!==n&&(t(i),n=i)}},r=function(e){setTimeout(i,0)};function o(){e.contentWindow&&(e.contentWindow.removeEventListener("unload",r),e.contentWindow.addEventListener("unload",r))}e.addEventListener("load",(function(){o(),i()})),o()},e.prototype.resetContent=function(){this.sanitizedUrlSrc=this.sanitizer.bypassSecurityTrustResourceUrl("about:blank")},e}();_.ɵfac=function(e){return new(e||_)(t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(s.DomSanitizer))},_.ɵcmp=t.ɵɵdefineComponent({type:_,selectors:[["sq-preview-document-iframe"]],contentQueries:function(e,n,i){if(1&e&&t.ɵɵcontentQuery(i,A,!0,t.ElementRef),2&e){var r;t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.tooltip=r.first)}},viewQuery:function(e,n){if(1&e&&t.ɵɵstaticViewQuery(F,!0),2&e){var i;t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.documentFrame=i.first)}},inputs:{sandbox:"sandbox",downloadUrl:"downloadUrl",scalingFactor:"scalingFactor"},outputs:{onPreviewReady:"onPreviewReady",pageChange:"pageChange"},features:[t.ɵɵNgOnChangesFeature],decls:2,vars:7,consts:[[3,"src","ngStyle"],["documentFrame",""]],template:function(e,n){1&e&&t.ɵɵelement(0,"iframe",0,1),2&e&&(t.ɵɵstyleProp("--factor",n.scalingFactor),t.ɵɵproperty("src",n.sanitizedUrlSrc,t.ɵɵsanitizeResourceUrl)("ngStyle",t.ɵɵpureFunction1(5,k,n.scalingFactor)),t.ɵɵattribute("sandbox",n._sandbox))},directives:[n.NgStyle],styles:["[_nghost-%COMP%]{\n    flex: 1;\n}\n\n\niframe[_ngcontent-%COMP%] {\n    background-color: white;\n    flex: 1;\n    position: relative;\n    display: block;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    height: calc(100% / var(--factor));\n    width: calc(100% / var(--factor));\n    border: 0;\n\n    -moz-transform-origin: 0 0;\n    -o-transform-origin: 0 0;\n    -webkit-transform-origin: 0 0;\n}\n\n.spinner-grow[_ngcontent-%COMP%] {\n    width: 3rem;\n    height: 3rem\n}"],changeDetection:0});var O=["tooltip"],H=function(e){return{disabled:e}};function N(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"span",9),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(i),t.ɵɵnextContext(2).previousEntity(e)})),t.ɵɵpipe(2,"sqMessage"),t.ɵɵtext(3,"❬"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"span",10),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(i),t.ɵɵnextContext(2).nextEntity(e)})),t.ɵɵpipe(5,"sqMessage"),t.ɵɵtext(6,"❭"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(2,4,"msg#preview.previousHighlightButtonAltText")),t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(8,H,r.entityIdx<=1)),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(5,6,"msg#preview.nextHighlightButtonAltText")),t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(10,H,r.entityIdx>=r.entityCount))}}function B(e,n){if(1&e&&t.ɵɵelement(0,"span"),2&e){var i=t.ɵɵnextContext().$implicit;t.ɵɵclassMap(i.icon)}}var L=function(e,t,n){return{type:e,value:t,display:n}},V=function(e){return{values:e}};function R(e,n){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(2,1,i.text,t.ɵɵpureFunction1(8,V,t.ɵɵpureFunction3(4,L,r.entityType,r.entityValue,r.entityDisplay))))}}function j(e,n){if(1&e&&t.ɵɵelement(0,"span"),2&e){var i=t.ɵɵnextContext().$implicit;t.ɵɵclassMap(i.iconAfter)}}function U(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",11),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(i);var r=n.$implicit;return t.ɵɵnextContext(2).entityAction(r,e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵtemplate(2,B,1,3,"span",12),t.ɵɵtemplate(3,R,3,10,"span",2),t.ɵɵtemplate(4,j,1,3,"span",12),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind2(1,6,r.title||"",t.ɵɵpureFunction1(13,V,t.ɵɵpureFunction3(9,L,o.entityType,o.entityValue,o.entityDisplay)))),t.ɵɵproperty("disabled",r.disabled)("hidden",r.hidden),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.icon),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.text),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.iconAfter)}}function z(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"span",3),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"span",4),t.ɵɵtext(4),t.ɵɵpipe(5,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"span",5),t.ɵɵtext(7),t.ɵɵelementEnd(),t.ɵɵtext(8,"/"),t.ɵɵelementStart(9,"span",6),t.ɵɵtext(10),t.ɵɵelementEnd(),t.ɵɵtemplate(11,N,7,12,"ng-container",2),t.ɵɵelementStart(12,"div",7),t.ɵɵtemplate(13,U,5,15,"button",8),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1("",i.entityDisplay," "),t.ɵɵadvance(2),t.ɵɵtextInterpolate1("(",t.ɵɵpipeBind1(5,6,i.entityLabel),") "),t.ɵɵadvance(3),t.ɵɵtextInterpolate1("",i.entityIdx," "),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",i.entityCount," "),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.entityNavActions),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",i.entityActions)}}function $(e,n){if(1&e&&t.ɵɵelement(0,"span"),2&e){var i=t.ɵɵnextContext().$implicit;t.ɵɵclassMap(i.icon)}}var G=function(e){return{text:e}};function W(e,n){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(2,1,i.text,t.ɵɵpureFunction1(6,V,t.ɵɵpureFunction1(4,G,r.selectedText.slice(0,50)))))}}function Q(e,n){if(1&e&&t.ɵɵelement(0,"span"),2&e){var i=t.ɵɵnextContext().$implicit;t.ɵɵclassMap(i.iconAfter)}}function Y(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"button",11),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(i);var r=n.$implicit;return t.ɵɵnextContext(2).selectedTextAction(r,e)})),t.ɵɵpipe(2,"sqMessage"),t.ɵɵtemplate(3,$,1,3,"span",12),t.ɵɵtemplate(4,W,3,8,"span",2),t.ɵɵtemplate(5,Q,1,3,"span",12),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()}if(2&e){var r=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind2(2,6,r.title||"",t.ɵɵpureFunction1(11,V,t.ɵɵpureFunction1(9,G,o.selectedText.slice(0,50))))),t.ɵɵproperty("disabled",r.disabled)("hidden",r.hidden),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.icon),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.text),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.iconAfter)}}function J(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Y,6,13,"ng-container",13),t.ɵɵelementContainerEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.selectedTextActions)}}var K=function(e,t,n){return{visibility:e,bottom:t,left:n}},Z=function(){function e(e,t,n){var i=this;this.zone=e,this.changeDetectorRef=t,this.sanitizer=n,this.entityActions=[],this.entityNavActions=!0,this.selectedTextActions=[],this.scalingFactor=1,this.selectedText="",this.entityType="",this.bottom="0px",this.left="0px",this.isBottom=!1,this.handleMouseDown=function(e){i.selectedText=""},this.handleMouseUp=function(){var e=i.document.getSelection();if(i.selectedText=e?e.toString().trim():"",e&&i.selectedText){var t=e.getRangeAt(0);i.changeDetectorRef.detectChanges(),i.positionTooltipAbove(t.getBoundingClientRect())}i.changeDetectorRef.detectChanges()},this._inTime=0,this.handleMouseMove=function(e){if(!i.selectedText&&e.path){var t=e.path;if(t.length>0){var n=t[0];if(1===n.nodeType&&"SPAN"===n.nodeName&&(n.attributes["data-entity-basic"]||n.attributes["data-entity-display"])){if(i.entityType!==n.className.split(" ")[0]||i.entityDisplay!==n.textContent){i.entityType=n.className.split(" ")[0],i.entityDisplay=n.textContent||"";var r=n.attributes["data-entity-basic"]||n.attributes["data-entity-display"];i.entityValue=r.value;var o=i.previewData.highlightsPerCategory[i.entityType].values.find((function(e){return e.value===r.value}));i.entityCount=o?o.locations.length:0,i.entityLabel=i.previewData.highlightsPerCategory[i.entityType].categoryDisplayLabel;var a=n.id.split("_"),s=parseInt(a[a.length-1],10),l=i.findEntity(i.entityType,i.entityValue,(function(e,t){return t===s}));i.entityIdx=l?l.valueIndex:0,i.changeDetectorRef.detectChanges(),i.positionTooltipAbove(n.getBoundingClientRect())}return void(i._inTime=Date.now())}}}i.entityType&&(!!e.path.find((function(e){return"sq-preview-tooltip"===e.localName}))?i._inTime=Date.now():Date.now()-i._inTime>200&&(i.entityType="",i.entityValue="",i.entityDisplay="",i.entityLabel="",i.entityCount=0,i.entityIdx=0,i.changeDetectorRef.detectChanges()))},this.handleScroll=function(e){""!==i.selectedText?i.handleMouseUp():""!==i.entityType&&(i.entityType="",i.entityValue="",i.changeDetectorRef.detectChanges())}}return e.prototype.ngOnChanges=function(e){var t=this;e.previewDocument&&this.previewDocument&&void 0!==typeof this.previewDocument.document.addEventListener&&(this.document.addEventListener("mouseup",this.handleMouseUp,!1),this.document.addEventListener("mousedown",this.handleMouseDown,!1),this.document.addEventListener("mousemove",this.handleMouseMove,!1),this.window.addEventListener("scroll",this.handleScroll,!1)),e.scalingFactor&&this.previewDocument&&setTimeout((function(){return t.handleMouseUp()}))},Object.defineProperty(e.prototype,"document",{get:function(){return this.previewDocument.document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return this.previewDocument.getContentWindow()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibility",{get:function(){return""!==this.selectedText||""!==this.entityType?"visible":"hidden"},enumerable:!1,configurable:!0}),e.prototype.positionTooltipAbove=function(e){var t=this;this.zone.run((function(){var n=t.tooltip.nativeElement.getBoundingClientRect().width,i=t.tooltip.nativeElement.getBoundingClientRect().height,r=t.scalingFactor*(e.left+.5*e.width)-.5*n;r=Math.min(Math.max(r,0),t.scalingFactor*t.document.body.clientWidth-n),t.left=Math.round(r)+"px";var o=Math.round(100*(t.scalingFactor*(e.left+.5*e.width)-r)/n);t.leftPin=t.sanitizer.bypassSecurityTrustStyle(o+"%"),Math.round(e.top-5-i)>0?(t.isBottom=!1,t.bottom=Math.round(t.scalingFactor*(t.window.innerHeight-e.top)+5)+"px"):(t.isBottom=!0,t.bottom=Math.round(t.scalingFactor*(t.window.innerHeight-e.top-e.height)-i-5)+"px"),t.changeDetectorRef.detectChanges()}))},e.prototype.previousEntity=function(e){var t=this;if(e.stopPropagation(),this.entityIdx>1){var n=this.findEntity(this.entityType,this.entityValue,(function(e,n){return e===t.entityIdx-1}));if(n){var i=n.idIndex;this.previewDocument.selectHighlight(this.entityType,i)}}},e.prototype.nextEntity=function(e){var t=this;if(e.stopPropagation(),this.entityIdx<this.entityCount){var n=this.findEntity(this.entityType,this.entityValue,(function(e,n){return e===t.entityIdx+1}));if(n){var i=n.idIndex;this.previewDocument.selectHighlight(this.entityType,i)}}},e.prototype.entityAction=function(e,t){var n=this;t.stopPropagation(),this.zone.run((function(){e.action&&e.action(e,{type:n.entityType,idx:n.entityIdx,value:n.entityValue,display:n.entityDisplay})}))},e.prototype.selectedTextAction=function(e,t){var n=this;t.stopPropagation(),this.zone.run((function(){e.action&&e.action(e,{text:n.selectedText})}))},e.prototype.findEntity=function(e,t,n){for(var i=0,r=0;r<this.previewData.highlightsPerLocation.length;r++)for(var o=this.previewData.highlightsPerLocation[r],a=Object.keys(o.positionInCategories),s=0;s<a.length;s++)if(a[s]===e&&o.values[s]===t&&n(++i,o.positionInCategories[e]))return{valueIndex:i,idIndex:o.positionInCategories[e]}},e}();Z.ɵfac=function(e){return new(e||Z)(t.ɵɵdirectiveInject(t.NgZone),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(s.DomSanitizer))},Z.ɵcmp=t.ɵɵdefineComponent({type:Z,selectors:[["sq-preview-tooltip"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(O,!0),2&e){var i;t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.tooltip=i.first)}},inputs:{previewDocument:"previewDocument",previewData:"previewData",entityActions:"entityActions",entityNavActions:"entityNavActions",selectedTextActions:"selectedTextActions",scalingFactor:"scalingFactor"},features:[t.ɵɵNgOnChangesFeature],decls:4,vars:12,consts:[[1,"sq-selection-tooltip",3,"ngClass","ngStyle"],["tooltip",""],[4,"ngIf"],[1,"display"],[1,"label"],[1,"index"],[1,"count"],[1,"btn-list"],[3,"disabled","hidden","title","click",4,"ngFor","ngForOf"],[1,"nav-btn","previous",3,"ngClass","title","click"],[1,"nav-btn","next",3,"ngClass","title","click"],[3,"disabled","hidden","title","click"],[3,"class",4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0,1),t.ɵɵtemplate(2,z,14,8,"ng-container",2),t.ɵɵtemplate(3,J,2,1,"ng-container",2),t.ɵɵelementEnd()),2&e&&(t.ɵɵstyleProp("--left",n.leftPin)("--factor",1/n.scalingFactor),t.ɵɵproperty("ngClass",n.isBottom?"sq-bottom-tooltip":"sq-top-tooltip")("ngStyle",t.ɵɵpureFunction3(8,K,n.visibility,n.bottom,n.left)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.entityType&&!n.selectedText),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.selectedText))},directives:[n.NgClass,n.NgStyle,n.NgIf,n.NgForOf],pipes:[i.MessagePipe],encapsulation:2});var X=new t.InjectionToken("PREVIEW_MODAL"),ee=function(){function e(e,t,n,i,r,o,a,s,c){var p=this;this.previewModal=e,this.router=t,this.previewWebService=n,this.appService=i,this.authenticationService=r,this.searchService=o,this.modalService=a,this.recentDocumentsService=s,this.exprBuilder=c,this._events=new l.Subject,this.events.subscribe((function(e){!e.record||"Preview_Modal"!==e.type&&"Preview_Route"!==e.type&&"Preview_Window"!==e.type||p.recentDocumentsService.addDocument(e.record,!1)}))}return Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),e.prototype.makeQuery=function(e){return delete(e=a.Utils.copy(e)).sort,delete e.scope,delete e.tab,delete e.basket,delete e.page,delete e.queryId,e.select&&(e.select=e.select.filter((function(e){return a.Utils.eqNC(e.facet,"refine")})),0===e.select.length&&delete e.select),e},e.prototype.getPreviewData=function(e,t,n){var i,r;void 0===n&&(n=!0);var o=this.searchService.getRecordFromId(e),s=o?null===(i=this.searchService.results)||void 0===i?void 0:i.id:void 0;n&&(r={type:"Doc_Preview",detail:this.getAuditPreviewDetail(e,t,o,s)}),t=this.makeQuery(t);var l=this.previewWebService.get(e,t,r);return a.Utils.subscribe(l,(function(e){return e.resultId=s||"",e})),this._events.next({type:"Preview_Data",record:o,query:t}),l},e.prototype.makeDownloadUrl=function(e){return e?this.appService.updateUrlForCors(e):void 0},e.prototype.openModal=function(e,t,n){n.record=e,n.query=t,this._events.next({type:"Preview_Modal",record:e,query:t}),this.modalService.open(this.previewModal,{model:n})},e.prototype.getQueryStr=function(e){return(e=this.makeQuery(e)).toJsonForQueryString()},e.prototype.openNewWindow=function(e,t){var n={id:e.id,query:this.getQueryStr(t),app:this.appService.appName};this.authenticationService.userOverrideActive&&this.authenticationService.userOverride&&(n.overrideUser=this.authenticationService.userOverride.userName,n.overrideDomain=this.authenticationService.userOverride.domain);var i="#/preview?"+a.Utils.makeHttpParams(n).toString();return this._events.next({type:"Preview_Window",record:e,query:t}),window.open(i,"_blank")},e.prototype.openRoute=function(e,t,n){return void 0===n&&(n="preview"),this._events.next({type:"Preview_Route",record:e,query:t}),this.rank=e.rank,this.router.navigate([n],{queryParams:{id:e.id,query:this.getQueryStr(t)}})},e.prototype.getPageNumber=function(e){var t=e.containerid;if(t&&e.id.startsWith(t)){var n=e.id.slice(t.length+1);if(/#\d+#/g.test(n)){var i=parseInt(n.slice(1,n.length-1),10);if(!isNaN(i))return e.$page=i,i}}},e.prototype.fetchPages=function(e,t){return(t=this.makeQuery(t)).groupBy="",t.addSelect(this.exprBuilder.makeExpr("containerid",e)),this.searchService.getResults(t)},e.prototype.getAuditPreviewDetail=function(e,t,n,i){var r,o,s,l,c,p,u=(null===(o=null===(r=this.searchService.results)||void 0===r?void 0:r.queryAnalysis)||void 0===o?void 0:o.queryLanguage)||(null===(l=null===(s=this.searchService)||void 0===s?void 0:s.query)||void 0===l?void 0:l.questionLanguage)||(null===(p=null===(c=this.appService)||void 0===c?void 0:c.ccquery)||void 0===p?void 0:p.questionLanguage),d=null==n?void 0:n.collection,g=d?d[0]:a.Utils.split(e,"|")[0];return{"doc-id":e,rank:n?n.rank:this.rank||0,collection:g,source:a.Utils.treeFirstNode(g),resultid:i,querylang:u,text:t.text,filename:null==n?void 0:n.filename,fileext:null==n?void 0:n.fileext}},e.prototype.getHtmlPreview=function(e){return this.previewWebService.getHtmlPreview(e)},e}();ee.ɵfac=function(e){return new(e||ee)(t.ɵɵinject(X,8),t.ɵɵinject(c.Router),t.ɵɵinject(r.PreviewWebService),t.ɵɵinject(p.AppService),t.ɵɵinject(u.AuthenticationService),t.ɵɵinject(d.SearchService),t.ɵɵinject(g.ModalService),t.ɵɵinject(h.RecentDocumentsService),t.ɵɵinject(p.ExprBuilder))},ee.ɵprov=t.ɵɵdefineInjectable({token:ee,factory:ee.ɵfac,providedIn:"root"});var te=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:X,useValue:t}]}},e}();te.ɵmod=t.ɵɵdefineNgModule({type:te}),te.ɵinj=t.ɵɵdefineInjector({factory:function(e){return new(e||te)},imports:[[n.CommonModule,i.IntlModule,r.WebServicesModule,o.UtilsModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(te,{declarations:[_,Z],imports:[n.CommonModule,i.IntlModule,r.WebServicesModule,o.UtilsModule],exports:[_,Z]});var ne=function(e){return{height:e}};function ie(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",2),t.ɵɵelementStart(1,"sq-preview-document-iframe",3),t.ɵɵlistener("onPreviewReady",(function(e){return t.ɵɵrestoreView(i),t.ɵɵnextContext().document=e})),t.ɵɵelement(2,"sq-preview-tooltip",4,5),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵclassMapInterpolate1("d-flex flex-column ",r.iframeClass,""),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(8,ne,r.height)),t.ɵɵadvance(1),t.ɵɵproperty("sandbox",r.sandbox)("downloadUrl",r.downloadUrl),t.ɵɵadvance(1),t.ɵɵproperty("previewDocument",r.document)("previewData",r.data)}}function re(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li",8),t.ɵɵelement(1,"sq-result-title",9),t.ɵɵelementStart(2,"div",10),t.ɵɵelementStart(3,"span",11),t.ɵɵtext(4),t.ɵɵpipe(5,"number"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"a",12),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=n.$implicit;return t.ɵɵnextContext(2).openSimilarDoc(e)})),t.ɵɵelement(7,"i",13),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("record",r)("titleLinkBehavior","open"),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(5,3,100*r.globalrelevance,"1.0-0"))}}function oe(e,n){if(1&e&&(t.ɵɵelementStart(0,"ul",6),t.ɵɵtemplate(1,re,8,6,"li",7),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.similarDocuments)}}var ae=function(){function e(e){this.previewService=e,this.recordOpened=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=this;(e.record||e.query)&&this.previewService.getPreviewData(this.record.id,this.query).subscribe((function(e){t.data=e,t.downloadUrl=t.data?t.previewService.makeDownloadUrl(t.data.documentCachedContentUrl):void 0}))},e.prototype.openSimilarDoc=function(e){return this.recordOpened.next({record:e,query:this.query,startSmall:!0,iframeClass:this.iframeClass}),!1},e}();function se(e,n){if(1&e&&t.ɵɵelement(0,"sq-result-title",4),2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("record",i.record)("originalDocTarget",i.originalDocTarget)}}function le(e,n){if(1&e&&t.ɵɵelement(0,"sq-metadata",6),2&e){var i=t.ɵɵnextContext(2);t.ɵɵproperty("record",i.record)("items",i.metadata)("showTitles",!0)("showIcons",!0)("clickable",!1)}}function ce(e,n){if(1&e&&t.ɵɵtemplate(0,le,1,5,"sq-metadata",5),2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("ngIf",i.metadata&&i.metadata.length>0)}}ae.ɵfac=function(e){return new(e||ae)(t.ɵɵdirectiveInject(ee))},ae.ɵcmp=t.ɵɵdefineComponent({type:ae,selectors:[["sq-facet-preview"]],inputs:{record:"record",sandbox:"sandbox",query:"query",height:"height",iframeClass:"iframeClass",similarDocuments:"similarDocuments"},outputs:{recordOpened:"recordOpened"},features:[t.ɵɵNgOnChangesFeature],decls:2,vars:2,consts:[[3,"class","ngStyle",4,"ngIf"],["class","list-group",4,"ngIf"],[3,"ngStyle"],[3,"sandbox","downloadUrl","onPreviewReady"],[3,"previewDocument","previewData"],["tooltip",""],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center","style","background-color: transparent;",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center",2,"background-color","transparent"],[3,"record","titleLinkBehavior"],[1,"d-flex"],[1,"badge","badge-pill","badge-secondary",2,"padding-top","5px"],["href","#","title","Open document in workspace",1,"open-record","ml-2",3,"click"],[1,"fas","fa-arrow-circle-right"]],template:function(e,n){1&e&&(t.ɵɵtemplate(0,ie,4,10,"div",0),t.ɵɵtemplate(1,oe,2,1,"ul",1)),2&e&&(t.ɵɵproperty("ngIf",!n.similarDocuments),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!!n.similarDocuments))},directives:[n.NgIf,n.NgStyle,_,Z,n.NgForOf,m.ResultTitle],pipes:[n.DecimalPipe],encapsulation:2});var pe=function(){return{"height.%":100}},ue=function(e){function n(n){var i=e.call(this)||this;return i.previewService=n,i.height=500,i.scalingFactor=.6,i.metadata=[],i.expandModal=!0,i.closable=!0,i.highlightActions=!0,i.recordClosed=new t.EventEmitter,i.previewLoaded=new t.EventEmitter,i._height=i.height,i.scaleFactorThreshold=.1,i.loaded=!1,i.closeAction=new f.Action({icon:"fas fa-times",title:"msg#facet.preview.closeTitle",action:function(){i.recordClosed.next()}}),i.expandModalAction=new f.Action({icon:"far fa-window-maximize",title:"msg#facet.preview.expandTitle",action:function(){i.previewService.openModal(i.record,i.query,{displaySimilarDocuments:!1,metadata:i.metadata})}}),i.toggleEntitiesAction=new f.Action({icon:"fas fa-lightbulb",title:"msg#facet.preview.toggleEntities",selected:!0,action:function(e){var t;e.selected=!e.selected,(null===(t=i.data)||void 0===t?void 0:t.highlightsPerCategory)&&Object.keys(i.data.highlightsPerCategory).filter((function(e){return"extractslocations"!==e&&"matchlocations"!==e})).forEach((function(t){var n;return null===(n=i.document)||void 0===n?void 0:n.toggleHighlight(t,e.selected)}))}}),i.toggleExtractsAction=new f.Action({icon:"fas fa-highlighter",title:"msg#facet.preview.toggleExtracts",selected:!0,action:function(e){var t,n;e.selected=!e.selected,null===(t=i.document)||void 0===t||t.toggleHighlight("matchlocations",e.selected),null===(n=i.document)||void 0===n||n.toggleHighlight("extractslocations",e.selected)}}),i.maximizeAction=new f.Action({icon:"fas fa-search-plus",title:"msg#facet.preview.maximize",action:function(){i.scalingFactor=i.scalingFactor+i.scaleFactorThreshold}}),i.minimizeAction=new f.Action({icon:"fas fa-search-minus",title:"msg#facet.preview.minimize",disabled:.1===i.scalingFactor,action:function(){i.scalingFactor=Math.round(100*Math.max(.1,i.scalingFactor-i.scaleFactorThreshold))/100},updater:function(e){e.disabled=.1===i.scalingFactor}}),i}return I(n,e),Object.defineProperty(n.prototype,"actions",{get:function(){var e=[];return this.customActions&&e.push.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(P(arguments[t]));return e}(this.customActions)),this.highlightActions&&e.push(this.toggleExtractsAction,this.toggleEntitiesAction),this.minimizeAction.update(),e.push(this.minimizeAction,this.maximizeAction),this.expandModal&&e.push(this.expandModalAction),this.closable&&e.push(this.closeAction),e},enumerable:!1,configurable:!0}),n.prototype.ngOnChanges=function(e){var t=this;e.record&&(this.previewService.getPreviewData(this.record.id,this.query).subscribe((function(e){t.data=e,t.downloadUrl=t.data?t.previewService.makeDownloadUrl(t.data.documentCachedContentUrl):void 0})),this.downloadUrl=void 0,this.data=void 0,this.document=void 0),(e.height||e.scalingFactor)&&(this._height=this.height)},n.prototype.ngAfterViewChecked=function(){this.document&&this.loaded&&(this.loaded=!1,this.previewLoaded.emit(this.document))},n.prototype.onPreviewReady=function(e){this.document=e,this.document&&this.filters&&this.document.filterHighlights(this.filters),this.loaded=!0},n}(v.AbstractFacet);function de(e,n){1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",4),t.ɵɵtext(2),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,1,"msg#preview.noEntityToHighlight")," "))}function ge(e,n){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵelement(1,"span"),t.ɵɵelementStart(2,"span",30),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var i=n.$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵclassMapInterpolate2("fas fa-bullseye ",r.categoryIconClass(i)," ",i,""),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(4,5,r.categoryDisplayLabel(i),r.categoryLabelPipeParams(i)))}}function he(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",26),t.ɵɵelementStart(1,"div",27),t.ɵɵtemplate(2,ge,5,8,"span",28),t.ɵɵelementEnd(),t.ɵɵelement(3,"div",29),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",i.currentCategories),t.ɵɵadvance(1),t.ɵɵproperty("innerHTML",i.currentValue,t.ɵɵsanitizeHtml)}}function me(e,n){1&e&&(t.ɵɵelementStart(0,"div",31),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div"),t.ɵɵtext(4," "),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"msg#preview.noSelectedHighlight")," "))}function ve(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",32),t.ɵɵelement(1,"div",33),t.ɵɵelement(2,"div",33),t.ɵɵelementStart(3,"div",34),t.ɵɵelementStart(4,"div",35),t.ɵɵelementStart(5,"button",36),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext(2).selectAll()})),t.ɵɵpipe(6,"sqMessage"),t.ɵɵelement(7,"span",37),t.ɵɵtext(8),t.ɵɵpipe(9,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"div",35),t.ɵɵelementStart(11,"button",36),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext(2).selectNone()})),t.ɵɵpipe(12,"sqMessage"),t.ɵɵelement(13,"span",38),t.ɵɵtext(14),t.ɵɵpipe(15,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(6,6,"msg#preview.highlightFilters.keepAll")),t.ɵɵproperty("disabled",!r.previewReady||r.allSelected),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(9,8,"msg#preview.highlightFilters.keepAll")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(12,10,"msg#preview.highlightFilters.keepNone")),t.ɵɵproperty("disabled",!r.previewReady||r.noneSelected),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(15,12,"msg#preview.highlightFilters.keepNone")," ")}}function fe(e,n){if(1&e&&(t.ɵɵelementStart(0,"option",45),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var i=n.$implicit,r=t.ɵɵnextContext(4);t.ɵɵproperty("ngValue",r.newFilter(i.value)),t.ɵɵadvance(1),t.ɵɵtextInterpolate(i.displayValue)}}function ye(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"select",44),t.ɵɵlistener("ngModelChange",(function(e){t.ɵɵrestoreView(i);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).navigationState.filters[n]=e}))("ngModelChange",(function(e){t.ɵɵrestoreView(i);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).selectFilter(n,e)})),t.ɵɵelementStart(2,"option",45),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵpipe(5,"sqNumber"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"option",45),t.ɵɵtext(7),t.ɵɵpipe(8,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"option",46),t.ɵɵtext(10," "),t.ɵɵelementEnd(),t.ɵɵtemplate(11,fe,2,2,"option",47),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()}if(2&e){var r,o,a,s=t.ɵɵnextContext().$implicit,l=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngModel",l.navigationState.filters[s])("compareWith",l.compareFilters),t.ɵɵadvance(1),t.ɵɵproperty("ngValue",l.keepAllFilter),t.ɵɵadvance(1),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(4,8,null==(r=l.getCategoryHighlightData(s))?null:r.categoryFilterAllLabel)," (",t.ɵɵpipeBind1(5,10,l.getHighlightValueCount(s)),")"),t.ɵɵadvance(3),t.ɵɵproperty("ngValue",l.keepNoneFilter),t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,12,null==(o=l.getCategoryHighlightData(s))?null:o.categoryFilterNoneLabel)),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",null==(a=l.getCategoryHighlightData(s))?null:a.values)}}function xe(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtext(1),t.ɵɵelementContainerEnd()),2&e){var i=n.ngIf;t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" (",i,") ")}}function we(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"select",44),t.ɵɵlistener("ngModelChange",(function(e){t.ɵɵrestoreView(i);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).navigationState.filters[n]=e}))("ngModelChange",(function(e){t.ɵɵrestoreView(i);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).selectFilter(n,e)})),t.ɵɵelementStart(1,"option",45),t.ɵɵtext(2),t.ɵɵpipe(3,"sqMessage"),t.ɵɵtemplate(4,xe,2,1,"ng-container",48),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"option",45),t.ɵɵtext(6),t.ɵɵpipe(7,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r,o,a,s=t.ɵɵnextContext().$implicit,l=t.ɵɵnextContext(2);t.ɵɵproperty("ngModel",l.navigationState.filters[s])("compareWith",l.compareFilters),t.ɵɵadvance(1),t.ɵɵproperty("ngValue",l.keepAllFilter),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,7,null==(r=l.getCategoryHighlightData(s))?null:r.categoryFilterAllLabel)," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",null==(o=l.getCategoryHighlightData(s))?null:o.values[0].displayValue),t.ɵɵadvance(1),t.ɵɵproperty("ngValue",l.keepNoneFilter),t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(7,9,null==(a=l.getCategoryHighlightData(s))?null:a.categoryFilterNoneLabel))}}function Se(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",39),t.ɵɵelementStart(1,"div",40),t.ɵɵelement(2,"span"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",41),t.ɵɵtext(4),t.ɵɵpipe(5,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",42),t.ɵɵtemplate(7,ye,12,14,"ng-container",2),t.ɵɵtemplate(8,we,8,11,"ng-template",null,43,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var i,r=n.$implicit,o=t.ɵɵreference(9),a=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵclassMapInterpolate2("fas fa-bullseye ",a.categoryIconClass(r)," ",r,""),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind2(5,7,null==(i=a.getCategoryHighlightData(r))?null:i.categoryDisplayLabelPlural,a.categoryLabelPipeParams(r)),": "),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",a.categoryHasMultipleValues(r))("ngIfElse",o)}}function Ce(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",5),t.ɵɵelementStart(1,"div",6),t.ɵɵelementStart(2,"div",7),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",8),t.ɵɵtemplate(6,he,4,2,"div",9),t.ɵɵtemplate(7,me,5,3,"ng-template",null,10,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",11),t.ɵɵelementStart(10,"button",12),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().first()})),t.ɵɵpipe(11,"sqMessage"),t.ɵɵelement(12,"span",13),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"button",12),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().previous()})),t.ɵɵpipe(14,"sqMessage"),t.ɵɵelement(15,"span",14),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"div",15),t.ɵɵelementStart(17,"span",16),t.ɵɵtext(18),t.ɵɵpipe(19,"sqNumber"),t.ɵɵpipe(20,"sqNumber"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"span",17),t.ɵɵtext(22),t.ɵɵpipe(23,"sqNumber"),t.ɵɵpipe(24,"sqNumber"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"button",12),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().next()})),t.ɵɵpipe(26,"sqMessage"),t.ɵɵelement(27,"span",18),t.ɵɵelementEnd(),t.ɵɵelementStart(28,"button",12),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().last()})),t.ɵɵpipe(29,"sqMessage"),t.ɵɵelement(30,"span",19),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(31,"div",20),t.ɵɵelementStart(32,"div",21),t.ɵɵelement(33,"span",22),t.ɵɵtext(34),t.ɵɵpipe(35,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(36,ve,16,14,"div",23),t.ɵɵelementStart(37,"div",24),t.ɵɵtemplate(38,Se,10,10,"div",25),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵreference(8),o=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(4,18,"msg#preview.selectedHighlight"),":"),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",o.currentValue||o.currentCategories)("ngIfElse",r),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(11,20,"msg#preview.firstHighlightButtonAltText")),t.ɵɵproperty("disabled",!o.previewReady),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(14,22,"msg#preview.previousHighlightButtonAltText")),t.ɵɵproperty("disabled",!o.previewReady),t.ɵɵadvance(5),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(19,24,o.current)," / ",t.ɵɵpipeBind1(20,26,o.total),""),t.ɵɵadvance(4),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(23,28,o.total)," / ",t.ɵɵpipeBind1(24,30,o.total),""),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(26,32,"msg#preview.nextHighlightButtonAltText")),t.ɵɵproperty("disabled",!o.previewReady),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(29,34,"msg#preview.lastHighlightButtonAltText")),t.ɵɵproperty("disabled",!o.previewReady),t.ɵɵadvance(6),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(35,36,"msg#preview.highlightFilters.title")," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",o.nonEmptyCategoryIds.length>1),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",o.nonEmptyCategoryIds)}}ue.ɵfac=function(e){return new(e||ue)(t.ɵɵdirectiveInject(ee))},ue.ɵcmp=t.ɵɵdefineComponent({type:ue,selectors:[["sq-facet-preview-2"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ɵɵstyleProp("height",n._height,"px")},inputs:{record:"record",query:"query",iframeClass:"iframeClass",sandbox:"sandbox",height:"height",scalingFactor:"scalingFactor",metadata:"metadata",expandModal:"expandModal",closable:"closable",highlightActions:"highlightActions",customActions:"customActions",filters:"filters",originalDocTarget:"originalDocTarget"},outputs:{recordClosed:"recordClosed",previewLoaded:"previewLoaded"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:6,vars:8,consts:[[3,"ngStyle"],[3,"sandbox","downloadUrl","scalingFactor","onPreviewReady"],["headerTpl",""],["subHeaderTpl",""],["titleLinkBehavior","open-if-url",1,"flex-grow-1","flex-basis-0",3,"record","originalDocTarget"],[3,"record","items","showTitles","showIcons","clickable",4,"ngIf"],[3,"record","items","showTitles","showIcons","clickable"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"sq-preview-document-iframe",1),t.ɵɵlistener("onPreviewReady",(function(e){return n.onPreviewReady(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(2,se,1,2,"ng-template",null,2,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(4,ce,1,1,"ng-template",null,3,t.ɵɵtemplateRefExtractor)),2&e&&(t.ɵɵclassMapInterpolate1("d-flex flex-column ",n.iframeClass,""),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction0(7,pe)),t.ɵɵadvance(1),t.ɵɵproperty("sandbox",n.sandbox)("downloadUrl",n.downloadUrl)("scalingFactor",n.scalingFactor))},directives:[n.NgStyle,_,m.ResultTitle,n.NgIf,y.Metadata],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}.sq-app-loading[_ngcontent-%COMP%]{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}"]});var be=function(){function t(){this.keepAllFilter=new Ie,this.keepNoneFilter=new Ie(e.HighlightCategoryFilterChoice.None)}return t.prototype.ngOnChanges=function(e){e.previewData&&this.initialize(),e.previewDocument&&this.previewReady&&this.moveToFirstSearchTerm()},t.prototype.initialize=function(){this.highlightDataPerCategory=this.previewData?this.previewData.highlightsPerCategory:void 0,this.highlightDataPerLocation=this.previewData?this.previewData.highlightsPerLocation:void 0,this.navigationState=new Ee(this.nonEmptyCategoryIds),this.reset()},t.prototype.reset=function(){this.navigationState.current=-1,this.previewReady&&this.previewDocument.filterHighlights(this.navigationState.filters),this.filteredHighlightData=this.highlightDataPerLocation?new De(this.highlightDataPerLocation,this.navigationState.filters):void 0},t.prototype.moveToFirstSearchTerm=function(){if(this.filteredHighlightData)for(var e=0,t=this.total;e<t;e++){var n=this.filteredHighlightData[e];if(n.positionInCategories){var i="term1",r=n.positionInCategories[i];if(a.Utils.isNumber(r)||(i="matchlocations",r=n.positionInCategories[i]),a.Utils.isNumber(r)){this.navigationState.current=e,this.previewDocument.selectHighlight(i,r);break}}}},Object.defineProperty(t.prototype,"current",{get:function(){return this.navigationState.current+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noData",{get:function(){return 0===this.nonEmptyCategoryIds.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this.filteredHighlightData?this.filteredHighlightData.size():0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previewReady",{get:function(){return!!this.previewDocument},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentValue",{get:function(){if(this.navigationState.current<0||!this.filteredHighlightData)return"";var e=this.filteredHighlightData[this.navigationState.current].displayValue;if(e)return e;var t=this.filteredHighlightData[this.navigationState.current].values;return t&&t.length>0&&t[0]&&t[0].length>0?t[0]:1===Object.keys(this.filteredHighlightData[this.navigationState.current].positionInCategories).length&&this.filteredHighlightData[this.navigationState.current].positionInCategories.extractslocations?this.previewDocument.getHighlightText("extractslocations",this.filteredHighlightData[this.navigationState.current].positionInCategories.extractslocations):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentCategories",{get:function(){var e=[];if(this.navigationState.current<0||!this.filteredHighlightData||this.navigationState.current>=this.filteredHighlightData.size())return e;for(var t in this.filteredHighlightData[this.navigationState.current].positionInCategories)e.push(t);return e},enumerable:!1,configurable:!0}),t.prototype.categoryIconClass=function(e){return e.startsWith("term")?"far fa-flag":"sq-icon-"+e},t.prototype.getCategoryHighlightData=function(e){return this.highlightDataPerCategory?this.highlightDataPerCategory[e]:void 0},t.prototype.categoryDisplayLabel=function(e){return this.highlightDataPerCategory?this.highlightDataPerCategory[e].categoryDisplayLabel:""},t.prototype.categoryLabelPipeParams=function(e){if(!e.startsWith("term"))return{};var t=Number(e.slice("term".length));return isNaN(t)?{}:{values:{index:t}}},Object.defineProperty(t.prototype,"nonEmptyCategoryIds",{get:function(){var e=[];for(var t in this.highlightDataPerCategory)this.categoryIsEmpty(t,this.highlightDataPerCategory)||e.push(t);return e},enumerable:!1,configurable:!0}),t.prototype.categoryIsEmpty=function(e,t){return null==t[e]||null==t[e].values||t[e].values.length<=0},t.prototype.categoryHasMultipleValues=function(e){return this.getHighlightValueCount(e)>1},t.prototype.getHighlightValueCount=function(e){if(!this.highlightDataPerCategory||this.categoryIsEmpty(e,this.highlightDataPerCategory))return 0;var t=this.highlightDataPerCategory[e].values;return null==t?0:t.length},t.prototype.first=function(){this.navigationState.current>0&&(this.navigationState.current=0,this.selectHighlight())},t.prototype.previous=function(){this.navigationState.current>0&&(this.navigationState.current--,this.selectHighlight())},t.prototype.next=function(){this.navigationState.current<this.total-1&&(this.navigationState.current++,this.selectHighlight())},t.prototype.last=function(){this.navigationState.current!==this.total-1&&(this.navigationState.current=this.total-1,this.selectHighlight())},t.prototype.selectHighlight=function(){if(this.filteredHighlightData){var e=this.filteredHighlightData[this.navigationState.current].positionInCategories,t=Object.keys(e)[0];this.previewDocument.selectHighlight(t,e[t])}},t.prototype.selectAll=function(){for(var e in this.navigationState.filters)this.navigationState.filters[e]=this.keepAllFilter;this.reset()},t.prototype.selectNone=function(){for(var e in this.navigationState.filters)this.navigationState.filters[e]=this.keepNoneFilter;this.reset()},Object.defineProperty(t.prototype,"allSelected",{get:function(){for(var t in this.navigationState.filters){var n=this.navigationState.filters[t];if(n&&n.choice!==e.HighlightCategoryFilterChoice.All)return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneSelected",{get:function(){for(var t in this.navigationState.filters){var n=this.navigationState.filters[t];if(!n||n.choice!==e.HighlightCategoryFilterChoice.None)return!1}return!0},enumerable:!1,configurable:!0}),t.prototype.newFilter=function(e){return new Ie(e)},t.prototype.selectFilter=function(t,n){if(n.choice===e.HighlightCategoryFilterChoice.Value){for(var i in this.navigationState.filters)i!==t&&this.navigationState.filters[i]!==this.keepAllFilter&&this.navigationState.filters[i]!==this.keepNoneFilter&&(this.navigationState.filters[i]=this.keepAllFilter);var r=void 0;for(var i in this.highlightDataPerLocation)if((r=this.highlightDataPerLocation[i]).positionInCategories[t]&&r.values.includes(n.filterValue))break;r&&this.previewDocument.selectHighlight(t,r.positionInCategories[t])}else{for(var i in this.navigationState.filters)this.navigationState.filters[i]!==this.keepAllFilter&&this.navigationState.filters[i]!==this.keepNoneFilter&&(this.navigationState.filters[i]=this.keepAllFilter);this.reset()}},t.prototype.compareFilters=function(e,t){return Ie.compare(e,t)},t}();be.ɵfac=function(e){return new(e||be)},be.ɵcmp=t.ɵɵdefineComponent({type:be,selectors:[["sq-preview-highlights"]],inputs:{previewDocument:"previewDocument",previewData:"previewData"},features:[t.ɵɵNgOnChangesFeature],decls:7,vars:5,consts:[[1,"card","sq-facet"],[1,"card-header"],[4,"ngIf","ngIfElse"],["normalCase",""],[1,"card-body","noEntityToHighlightMessage"],[1,"card-body"],[1,"currentSelection"],[1,"selectedHighlightTitle"],[1,"currentSelectionPanel"],["class","selectedHighlight",4,"ngIf","ngIfElse"],["noSelection",""],[1,"navigation-buttons"],[1,"btn","btn-secondary",3,"disabled","title","click"],[1,"fas","fa-fast-backward"],[1,"fas","fa-step-backward"],[1,"counter-container"],[1,"counter"],[1,"counter","ghost"],[1,"fas","fa-step-forward"],[1,"fas","fa-fast-forward"],[1,"card-body","filterPanel"],[1,"filterPanelTitle"],[1,"fas","fa-filter"],["class","batchSelectButtonsContainer",4,"ngIf"],[1,"filters"],["class","sq-highlight",4,"ngFor","ngForOf"],[1,"selectedHighlight"],[1,"currentCategories"],[4,"ngFor","ngForOf"],[1,"selectedHighlightValue",3,"innerHTML"],[1,"currentCategoryLabel"],[1,"noSelectionMessage"],[1,"batchSelectButtonsContainer"],[1,"batchSelectButtonsPaddingPlaceholder"],[1,"batchSelectButtons"],[1,"batchSelectButton"],[1,"btn",3,"disabled","title","click"],[1,"far","fa-check-square"],[1,"fas","fa-times"],[1,"sq-highlight"],[1,"categoryIcon"],[1,"categoryLabel"],[1,"categoryFilter"],["singleValue",""],[1,"custom-select",3,"ngModel","compareWith","ngModelChange"],[3,"ngValue"],["disabled","",1,"selectSeparator"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵtext(2),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(4,de,4,3,"ng-container",2),t.ɵɵtemplate(5,Ce,39,38,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()),2&e){var i=t.ɵɵreference(6);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,3,"msg#preview.highlightsTitle")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.noData)("ngIfElse",i)}},directives:[n.NgIf,n.NgForOf,x.SelectControlValueAccessor,x.NgControlStatus,x.NgModel,x.NgSelectOption,x.ɵangular_packages_forms_forms_x],pipes:[i.MessagePipe,o.NumberPipe],styles:[".noEntityToHighlightMessage[_ngcontent-%COMP%]{opacity:.5}.currentSelection[_ngcontent-%COMP%]{margin-bottom:.75rem}.selectedHighlightTitle[_ngcontent-%COMP%]{padding-bottom:.375em}.currentSelectionPanel[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.125);padding:.5rem;text-align:center}.currentCategories[_ngcontent-%COMP%]{height:1.5em}.selectedHighlightValue[_ngcontent-%COMP%]{font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.noSelectionMessage[_ngcontent-%COMP%]{opacity:.5}.navigation-buttons[_ngcontent-%COMP%]{text-align:center}.counter-container[_ngcontent-%COMP%]{display:inline-block;position:relative}.counter[_ngcontent-%COMP%]{padding-left:.125rem;padding-right:.125rem;position:absolute;right:0}.ghost[_ngcontent-%COMP%]{position:static;visibility:hidden}.filterPanel[_ngcontent-%COMP%]{border-spacing:0 .375em;display:table}.filterPanelTitle[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.125);display:table-caption;margin-bottom:-.5em;padding-left:.75em;padding-top:.75em}.batchSelectButtonsContainer[_ngcontent-%COMP%]{display:table-row}.batchSelectButtonsPaddingPlaceholder[_ngcontent-%COMP%]{display:table-cell}.batchSelectButtons[_ngcontent-%COMP%]{border-spacing:0;display:table;table-layout:fixed;width:100%}.batchSelectButton[_ngcontent-%COMP%]{display:table-cell}.batchSelectButton[_ngcontent-%COMP%]:not(:last-child){padding-right:.5rem}.batchSelectButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;white-space:normal;width:100%}.filterPanelTitle[_ngcontent-%COMP%]   .fa-filter[_ngcontent-%COMP%]{padding-right:.375em}.filters[_ngcontent-%COMP%]{display:table-row-group}.sq-highlight[_ngcontent-%COMP%]{display:table-row}.categoryIcon[_ngcontent-%COMP%], .categoryLabel[_ngcontent-%COMP%]{display:table-cell;padding-right:.375em;white-space:nowrap}.categoryFilter[_ngcontent-%COMP%]{display:table-cell;width:100%}.selectSeparator[_ngcontent-%COMP%]{background-color:#ccc;font-size:1pt}.sq-highlight[_ngcontent-%COMP%]{flex-wrap:nowrap}.sq-highlight[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{z-index:4}.sq-highlight[_ngcontent-%COMP%]   .sq-highlight-btns[_ngcontent-%COMP%]{flex-direction:row}.sq-highlight[_ngcontent-%COMP%]   .sq-highlight-item[_ngcontent-%COMP%]{width:100%}.sq-highlight[_ngcontent-%COMP%]   .sq-highlight-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{white-space:normal;width:100%}.sq-highlight[_ngcontent-%COMP%]:not(:first-child){margin-top:.25rem}"]});var Ee=function(e){var t,n;this.current=-1,this.filters={};try{for(var i=D(e),r=i.next();!r.done;r=i.next()){var o=r.value;this.filters[o]=new Ie}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},Ie=function(){function t(t){this.choice=e.HighlightCategoryFilterChoice.All,this._filterValue="",null!=t&&("string"==typeof t?(this.choice=e.HighlightCategoryFilterChoice.Value,this._filterValue=t):this.choice=t)}return Object.defineProperty(t.prototype,"filterValue",{get:function(){return this.choice===e.HighlightCategoryFilterChoice.Value?this._filterValue:""},enumerable:!1,configurable:!0}),t.compare=function(t,n){return t&&n?t.choice===n.choice&&(t.choice!==e.HighlightCategoryFilterChoice.Value||t.filterValue===n.filterValue):t===n},t}(),De=function(){function t(e,t){var n=0;for(var i in e){var r=e[i].positionInCategories?Object.keys(e[i].positionInCategories):void 0;r&&this.locationIsIncluded(e[i].values,r,t)&&(this[n]=e[i],n++)}}return t.prototype.size=function(){return Object.keys(this).length},t.prototype.locationIsIncluded=function(t,n,i){var r,o;if(!n)return!1;try{for(var a=D(n),s=a.next();!s.done;s=a.next()){var l=s.value;if(i[l]&&(i[l].choice===e.HighlightCategoryFilterChoice.All||i[l].choice===e.HighlightCategoryFilterChoice.Value&&null!=t&&t.includes(i[l].filterValue)))return!0}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return!1},t}();function Pe(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",1),t.ɵɵelementStart(1,"div",2),t.ɵɵelementStart(2,"nav"),t.ɵɵelementStart(3,"ul",3),t.ɵɵelementStart(4,"li",4),t.ɵɵelementStart(5,"a",5),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().click()})),t.ɵɵelement(6,"span"),t.ɵɵtext(7),t.ɵɵpipe(8,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("href",r.originalDocumentUrl,t.ɵɵsanitizeUrl),t.ɵɵadvance(1),t.ɵɵclassMapInterpolate1("far fa-file sq-icon-file-",r.record.fileext,""),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(8,5,"msg#preview.originalDocument")," ")}}var qe=function(){function e(e){this.searchService=e}return e.prototype.ngOnChanges=function(){this.originalDocumentUrl=this.record.url1},e.prototype.click=function(){this.searchService.notifyOpenOriginalDocument(this.record,this.resultId)},e}();function Me(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",5),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).onLinkClick(e)})),t.ɵɵelement(2,"div"),t.ɵɵelementStart(3,"a",6),t.ɵɵtext(4),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()}if(2&e){var r=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵclassMapInterpolate1("similarDocumentIcon ",o.documentIconClass(r),""),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.title)}}function Te(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Me,5,4,"ng-container",4),t.ɵɵelementContainerEnd()),2&e){var i=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i)}}function Ae(e,n){if(1&e&&(t.ɵɵelementStart(0,"sq-facet-card",1),t.ɵɵelementStart(1,"div",2),t.ɵɵtemplate(2,Te,2,1,"ng-container",3),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("title","msg#preview.similarDocumentsTitle"),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",i.documents)}}qe.ɵfac=function(e){return new(e||qe)(t.ɵɵdirectiveInject(d.SearchService))},qe.ɵcmp=t.ɵɵdefineComponent({type:qe,selectors:[["sq-preview-links"]],inputs:{record:"record",resultId:"resultId"},features:[t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[["class","card sq-facet",4,"ngIf"],[1,"card","sq-facet"],[1,"card-body"],[1,"nav","nav-pills","nav-stacked"],[1,"nav-item"],["target","_blank",1,"nav-link","originalDocumentLink",3,"href","click"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Pe,9,7,"div",0),2&e&&t.ɵɵproperty("ngIf",!!n.originalDocumentUrl)},directives:[n.NgIf],pipes:[i.MessagePipe],styles:[".originalDocumentLink[_ngcontent-%COMP%]{padding-left:0}"]});var Fe=function(){function e(e,t,n){this.similarDocumentsService=e,this.previewService=t,this.changeDetectorRef=n}return Object.defineProperty(e.prototype,"documents",{get:function(){return this.documentList},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){var e=this;null!=this.sourceDocumentId?this.similarDocumentsService.get(this.sourceDocumentId,this.query.name).subscribe((function(t){e.documentList=t,e.changeDetectorRef.markForCheck()})):this.documentList=[]},e.prototype.documentIconClass=function(e){return e.fileext?"far fa-file sq-icon-file-"+e.fileext:"far fa-file"},e.prototype.onLinkClick=function(e){this.previewService.openNewWindow(e,this.query)},e}();function ke(e,n){if(1&e&&t.ɵɵelement(0,"sq-metadata",14),2&e){var i=t.ɵɵnextContext(2);t.ɵɵproperty("record",i.previewData.record)("items",i.metadata)("showTitles",!1)("showIcons",!0)("clickable",!1)}}function _e(e,n){if(1&e&&t.ɵɵelement(0,"sq-similar-documents",15),2&e){var i=t.ɵɵnextContext(2);t.ɵɵproperty("sourceDocumentId",i.previewData.record.id)("query",i.query)}}function Oe(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",1),t.ɵɵelementStart(1,"div",2),t.ɵɵelementStart(2,"div"),t.ɵɵelementStart(3,"div",3),t.ɵɵelement(4,"sq-preview-links",4),t.ɵɵelement(5,"sq-preview-highlights",5),t.ɵɵelementStart(6,"sq-facet-card",6),t.ɵɵelementStart(7,"div",7),t.ɵɵtemplate(8,ke,1,5,"sq-metadata",8),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(9,_e,1,2,"sq-similar-documents",9),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"div",10),t.ɵɵelementStart(11,"sq-preview-document-iframe",11),t.ɵɵlistener("onPreviewReady",(function(e){return t.ɵɵrestoreView(i),t.ɵɵnextContext().onPreviewReady(e)})),t.ɵɵelement(12,"sq-preview-tooltip",12,13),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵclassMapInterpolate1("col-lg-3 sq-col ",r.leftPaneAdditionalClasses,""),t.ɵɵadvance(2),t.ɵɵproperty("record",r.previewData.record)("resultId",r.previewData.resultId),t.ɵɵadvance(1),t.ɵɵproperty("previewDocument",r.previewDocument)("previewData",r.previewData),t.ɵɵadvance(1),t.ɵɵproperty("title","msg#preview.documentPropertiesTitle"),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.previewData.record),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.displaySimilarDocuments),t.ɵɵadvance(2),t.ɵɵproperty("sandbox",r.sandbox)("downloadUrl",r.downloadUrl),t.ɵɵadvance(1),t.ɵɵproperty("previewDocument",r.previewDocument)("previewData",r.previewDocument)}}Fe.ɵfac=function(e){return new(e||Fe)(t.ɵɵdirectiveInject(r.SimilarDocumentsWebService),t.ɵɵdirectiveInject(ee),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},Fe.ɵcmp=t.ɵɵdefineComponent({type:Fe,selectors:[["sq-similar-documents"]],inputs:{sourceDocumentId:"sourceDocumentId",query:"query"},features:[t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[[3,"title",4,"ngIf"],[3,"title"],["id","similarDocumentsBody",1,"card-body","collapse","show"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"similarDocument",3,"click"],["href","javascript:void(0)",1,"similarDocumentTitle"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Ae,3,2,"sq-facet-card",0),2&e&&t.ɵɵproperty("ngIf",null!=n.documents&&n.documents.length>0)},directives:[n.NgIf,v.BsFacetCard,n.NgForOf],encapsulation:2});var He=function(){function e(e,t){this.previewService=e,this.changeDetectorRef=t}return e.prototype.ngOnChanges=function(e){e.previewData&&(this.downloadUrl=this.previewData?this.previewService.makeDownloadUrl(this.previewData.documentCachedContentUrl):void 0)},e.prototype.onPreviewReady=function(e){this.previewDocument=e,this.changeDetectorRef.markForCheck()},e}();function Ne(e,n){1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"msg#preview.previousDocument"),""))}function Be(e,n){1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"msg#preview.nextDocument"),""))}function Le(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"button",5),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().previous()})),t.ɵɵelement(2,"span",6),t.ɵɵtemplate(3,Ne,3,3,"span",7),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"button",5),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().next()})),t.ɵɵelement(5,"span",8),t.ɵɵtemplate(6,Be,3,3,"span",7),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵclassMapInterpolate1("btn btn btn-outline-primary ",r.previousEnabled?"":"disabled",""),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.showPreviousNextText),t.ɵɵadvance(1),t.ɵɵclassMapInterpolate1("btn btn btn-outline-primary ",r.nextEnabled?"":"disabled",""),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.showPreviousNextText)}}He.ɵfac=function(e){return new(e||He)(t.ɵɵdirectiveInject(ee),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},He.ɵcmp=t.ɵɵdefineComponent({type:He,selectors:[["sq-preview-panel"]],inputs:{query:"query",previewData:"previewData",sandbox:"sandbox",displaySimilarDocuments:"displaySimilarDocuments",metadata:"metadata",leftPaneAdditionalClasses:"leftPaneAdditionalClasses"},features:[t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[["class","container-fluid sq-preview",4,"ngIf"],[1,"container-fluid","sq-preview"],[1,"row","sq-row"],[1,"sq-preview-bar"],[1,"d-block","mb-3",3,"record","resultId"],[1,"d-block","mb-3",3,"previewDocument","previewData"],[1,"d-block","mb-3",3,"title"],["id","documentPropertiesBody",1,"card-body","collapse","show"],[3,"record","items","showTitles","showIcons","clickable",4,"ngIf"],["class","d-block mb-3",3,"sourceDocumentId","query",4,"ngIf"],[1,"col-lg-9","sq-col","d-flex","flex-column"],[3,"sandbox","downloadUrl","onPreviewReady"],[3,"previewDocument","previewData"],["tooltip",""],[3,"record","items","showTitles","showIcons","clickable"],[1,"d-block","mb-3",3,"sourceDocumentId","query"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Oe,14,14,"div",0),2&e&&t.ɵɵproperty("ngIf",!!n.previewData)},directives:[n.NgIf,qe,be,v.BsFacetCard,_,Z,y.Metadata,Fe],styles:[".sq-preview-document-properties[_ngcontent-%COMP%]{margin-top:.5em}.collapseButton[_ngcontent-%COMP%]{float:right}.sq-preview-bar[_ngcontent-%COMP%]{min-height:100%;overflow-x:hidden}.sq-preview[_ngcontent-%COMP%]{height:100%}.sq-preview[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%]{flex-wrap:nowrap;height:100%}.sq-preview[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;height:100%;overflow-x:hidden;overflow-y:auto}"]});var Ve=function(){function e(e,t,n,i,r){this.model=e,this.searchService=t,this.previewService=n,this.uiService=i,this.changeDetectorRef=r}return e.prototype.ngOnInit=function(){var e=this;this.screenSize=this.uiService.screenSize,this.resizeSubscription=a.Utils.subscribe(this.uiService.resizeEvent,(function(t){e.screenSize!==e.uiService.screenSize&&(e.screenSize=e.uiService.screenSize,e.changeDetectorRef.markForCheck())})),this.updatePreviewData(this.model.record.id)},e.prototype.ngOnDestroy=function(){this.resizeSubscription.unsubscribe()},Object.defineProperty(e.prototype,"currentId",{get:function(){return this.previewData&&this.previewData.record?this.previewData.record.id:""},enumerable:!1,configurable:!0}),e.prototype.updatePreviewData=function(e){var t=this;this.previewService.getPreviewData(e,this.model.query).subscribe((function(e){t.previewData=e,t.previewDataError=!1,t.changeDetectorRef.markForCheck()}),(function(e){t.previewDataError=!0}))},Object.defineProperty(e.prototype,"recordTitle",{get:function(){return this.previewData&&null!=this.previewData.record?this.previewData.record.title:this.previewDataError?"msg#preview.noDocumentDataErrorPopupTitle":""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showPreviousNextText",{get:function(){return this.uiService.screenSizeIsGreaterOrEqual("lg")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showPreviousNext",{get:function(){return this.getSearchPositionInPage()>=0&&!!this.searchService.results&&!!this.searchService.results.records&&this.searchService.results.records.length>1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousEnabled",{get:function(){return this.getSearchPositionInPage()>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextEnabled",{get:function(){if(!this.searchService.results||!this.searchService.results.records)return!1;var e=this.getSearchPositionInPage();return e>=0&&e<this.searchService.results.records.length-1},enumerable:!1,configurable:!0}),e.prototype.getSearchPositionInPage=function(){var e=this.currentId;if(e&&this.searchService.results&&this.searchService.results.records)for(var t=0,n=this.searchService.results.records.length;t<n;t++){if(this.searchService.results.records[t].id===e)return t}return-1},e.prototype.previous=function(){if(this.searchService.results&&this.searchService.results.records){var e=this.getSearchPositionInPage();if(!(e<=0)){var t=this.searchService.results.records[e-1];this.updatePreviewData(t.id)}}},e.prototype.next=function(){if(this.searchService.results&&this.searchService.results.records){var e=this.getSearchPositionInPage();if(!(-1===e||e>=this.searchService.results.records.length-1)){var t=this.searchService.results.records[e+1];this.updatePreviewData(t.id)}}},e}();function Re(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelement(1,"span"),t.ɵɵelementContainerEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵclassMap(i.icon)}}function je(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementContainerEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,i.text))}}Ve.ɵfac=function(e){return new(e||Ve)(t.ɵɵdirectiveInject(g.MODAL_MODEL),t.ɵɵdirectiveInject(d.SearchService),t.ɵɵdirectiveInject(ee),t.ɵɵdirectiveInject(o.UIService),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},Ve.ɵcmp=t.ɵɵdefineComponent({type:Ve,selectors:[["sq-preview-popup"]],decls:4,vars:8,consts:[[1,"modal-content","sq-preview-popup"],[3,"title","showFooter"],["header","","class","previousNextDocumentButtons",4,"ngIf"],[3,"leftPaneAdditionalClasses","query","previewData","displaySimilarDocuments","metadata"],["header","",1,"previousNextDocumentButtons"],[3,"click"],["aria-hidden","true",1,"fas","fa-arrow-left"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-arrow-right"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"sq-modal",1),t.ɵɵtemplate(2,Le,7,8,"div",2),t.ɵɵelement(3,"sq-preview-panel",3),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("title",n.recordTitle)("showFooter",!1),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showPreviousNext),t.ɵɵadvance(1),t.ɵɵproperty("leftPaneAdditionalClasses","d-none d-lg-block")("query",n.model.query)("previewData",n.previewData)("displaySimilarDocuments",n.model.displaySimilarDocuments)("metadata",n.model.metadata))},directives:[b.BsModal,n.NgIf,He],pipes:[i.MessagePipe],styles:[".previousNextDocumentButtons[_ngcontent-%COMP%]{display:inline-block;margin-left:auto;white-space:nowrap}.previousNextDocumentButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:first-child){margin-left:.5em}.sq-preview-popup[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{margin:0 15px}"]});var Ue=function(){function e(e,t){this.modalService=e,this.previewService=t,this.icon="fas fa-search",this.text="",this.title=""}return e.prototype.click=function(e){return this.usePopup?e.ctrlKey?this.previewService.openNewWindow(this.record,this.query):this.previewService.openModal(this.record,this.query,{displaySimilarDocuments:this.displaySimilarDocuments,metadata:this.metadata}):this.newWindow?this.previewService.openNewWindow(this.record,this.query):this.previewService.openRoute(this.record,this.query),!1},e}();function ze(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",9),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext().prevEntity(e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵelement(2,"i",10),t.ɵɵelementEnd()}2&e&&t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(1,1,"msg#preview.previousHighlightButtonAltText"))}function $e(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",9),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext().nextEntity(e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵelement(2,"i",11),t.ɵɵelementEnd()}2&e&&t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(1,1,"msg#preview.nextHighlightButtonAltText"))}Ue.ɵfac=function(e){return new(e||Ue)(t.ɵɵdirectiveInject(g.ModalService),t.ɵɵdirectiveInject(ee))},Ue.ɵcmp=t.ɵɵdefineComponent({type:Ue,selectors:[["sq-result-link-preview"]],inputs:{query:"query",record:"record",icon:"icon",text:"text",title:"title",usePopup:"usePopup",newWindow:"newWindow",displaySimilarDocuments:"displaySimilarDocuments",metadata:"metadata"},decls:4,vars:5,consts:[["href","#",3,"title","click"],[4,"ngIf"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"a",0),t.ɵɵlistener("click",(function(e){return n.click(e)})),t.ɵɵpipe(1,"sqMessage"),t.ɵɵtemplate(2,Re,2,3,"ng-container",1),t.ɵɵtemplate(3,je,3,3,"ng-container",1),t.ɵɵelementEnd()),2&e&&(t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(1,3,n.title)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!!n.icon),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!!n.text))},directives:[n.NgIf],pipes:[i.MessagePipe],encapsulation:2});var Ge=function(e,t){return{"fa-check-square":e,"fa-square":t}};function We(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3),t.ɵɵelementStart(1,"span",4),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=n.$implicit;return t.ɵɵnextContext().toggleEntity(e)})),t.ɵɵelement(2,"i",5),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"span",6),t.ɵɵtext(4),t.ɵɵpipe(5,"sqValue"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"span",7),t.ɵɵtext(7),t.ɵɵelementEnd(),t.ɵɵtemplate(8,ze,3,3,"span",8),t.ɵɵtemplate(9,$e,3,3,"span",8),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,o=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵproperty("ngClass",t.ɵɵpureFunction2(8,Ge,!o.entityHidden(r),o.entityHidden(r))),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(5,5,r.displayValue,o.column)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(o.entityCount(r)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.previewDocument),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.previewDocument)}}function Qe(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",12),t.ɵɵelementStart(1,"a",13),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().showAll()})),t.ɵɵpipe(2,"sqMessage"),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}2&e&&(t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(2,2,"msg#preview.showAll")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,4,"msg#preview.showAll")))}var Ye=function(e){function n(n){var i=e.call(this)||this;return i.appService=n,i.itemsChecked=new t.EventEmitter,i.count=10,i.sortFreq=!0,i.hidden=new Map,i.nav=new Map,i.unselectAll=function(e){i.previewDocument&&i.previewDocument.toggleHighlight(i.entity,!1),i.data.forEach((function(e){i.hidden.set(e.value,!0)})),e&&(e.update(),i.itemsChecked.next(!1))},i.selectAll=function(e){i.previewDocument&&i.previewDocument.toggleHighlight(i.entity,!0),i.data.forEach((function(e){i.hidden.set(e.value,!1)})),e&&(e.update(),i.itemsChecked.next(!0))},i.checkAction=new f.Action({icon:"far fa-check-square",title:"msg#preview.highlightFilters.keepNone",action:i.unselectAll,updater:function(e){var t=!1,n=!1;i.data.forEach((function(e){t=t||i.hidden.get(e.value)||!1,n=n||!i.hidden.get(e.value)})),t?n?(e.action=i.selectAll,e.icon="far fa-check-square",e.title="msg#preview.highlightFilters.keepAll"):(e.action=i.selectAll,e.icon="far fa-square",e.title="msg#preview.highlightFilters.keepAll"):(e.action=i.unselectAll,e.icon="far fa-check-square",e.title="msg#preview.highlightFilters.keepNone")}}),i.sortAlphaAction=new f.Action({icon:"fas fa-sort-alpha-down",title:"msg#preview.sortAlphabetically",action:function(){i.sortFreq=!1}}),i.sortFreqAction=new f.Action({icon:"fas fa-sort-amount-down",title:"msg#preview.sortFrequency",action:function(){i.sortFreq=!0}}),i}return I(n,e),Object.defineProperty(n.prototype,"actions",{get:function(){var e=[];return this.previewDocument&&e.push(this.checkAction),e.push(this.sortFreq?this.sortAlphaAction:this.sortFreqAction),e},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){this.startUnchecked&&(this.unselectAll(),this.checkAction.update()),this.column=this.appService.getColumn(this.entity)},n.prototype.ngOnChanges=function(e){var t=this;e.previewDocument&&this.previewDocument&&this.data.forEach((function(e){t.hidden.get(e.value)&&t.previewDocument.toggleHighlight(t.entity,!1,e.value)}))},Object.defineProperty(n.prototype,"entityValues",{get:function(){var e=this;return this.data.sort((function(t,n){var i=n.locations.length-t.locations.length;return e.sortFreq&&0!==i?i:t.displayValue.localeCompare(n.displayValue)})).slice(0,this.count)},enumerable:!1,configurable:!0}),n.prototype.entityCount=function(e){var t=e.locations.length+"",n=this.nav.get(e.value);return void 0!==n&&(t=n+1+" / "+t),t},n.prototype.entityHidden=function(e){return!!this.hidden.get(e.value)},n.prototype.showAll=function(){return this.count=this.data.length,!1},n.prototype.toggleEntity=function(e){this.hidden.set(e.value,!this.hidden.get(e.value)),this.previewDocument&&this.previewDocument.toggleHighlight(this.entity,!this.hidden.get(e.value),e.value),this.checkAction.update()},n.prototype.nextEntity=function(e){var t=this.nav.get(e.value);void 0===t?(t=0,this.nav.set(e.value,t)):t<e.locations.length-1&&(t++,this.nav.set(e.value,t)),this.selectEntity(this.entity,e.value,t)},n.prototype.prevEntity=function(e){var t=this.nav.get(e.value);void 0===t?(t=0,this.nav.set(e.value,t)):t>0&&(t--,this.nav.set(e.value,t)),this.selectEntity(this.entity,e.value,t)},n.prototype.selectEntity=function(e,t,n){var i=this.getEntityIndexes(e,t);this.previewDocument.selectHighlight(e,i[n])},n.prototype.getEntityIndexes=function(e,t){for(var n,i,r,o,a=[],s=0;s<this.previewData.highlightsPerLocation.length;s++){var l=this.previewData.highlightsPerLocation[s],c=Object.keys(l.positionInCategories);try{for(var p=(n=void 0,D(c)),u=p.next();!u.done;u=p.next()){if(u.value===e)try{for(var d=(r=void 0,D(l.values)),g=d.next();!g.done;g=d.next()){g.value===t&&a.push(l.positionInCategories[e])}}catch(e){r={error:e}}finally{try{g&&!g.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}return a},n}(v.AbstractFacet);function Je(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"sq-facet-card",2),t.ɵɵelementStart(1,"sq-preview-entity-facet",3,4),t.ɵɵlistener("itemsChecked",(function(e){t.ɵɵrestoreView(i);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext().itemsChecked(n,e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext();t.ɵɵproperty("title",o.entityDisplay(r))("icon",o.entityIcon(r))("collapsible",o.collapsible)("buttonsStyle",o.style),t.ɵɵadvance(1),t.ɵɵproperty("entity",r)("data",o.entityValues(r))("previewData",o.previewData)("previewDocument",o.previewDocument)("startUnchecked",o.startUnchecked[r])}}function Ke(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Je,3,9,"sq-facet-card",1),t.ɵɵelementContainerEnd()),2&e){var i=n.$implicit,r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.entityValues(i).length)}}Ye.ɵfac=function(e){return new(e||Ye)(t.ɵɵdirectiveInject(p.AppService))},Ye.ɵcmp=t.ɵɵdefineComponent({type:Ye,selectors:[["sq-preview-entity-facet"]],inputs:{entity:"entity",data:"data",previewData:"previewData",previewDocument:"previewDocument",startUnchecked:"startUnchecked"},outputs:{itemsChecked:"itemsChecked"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:3,vars:2,consts:[[1,"list-group","list-group-flush","entity-facet"],["class","list-group-item align-items-center border-0 py-1 px-3 d-flex",4,"ngFor","ngForOf"],["class","list-group-item border-0 py-1 text-center",4,"ngIf"],[1,"list-group-item","align-items-center","border-0","py-1","px-3","d-flex"],[1,"text-muted","px-1","cursor-pointer",3,"click"],[1,"far",3,"ngClass"],[1,"mr-auto","mx-1"],[1,"text-muted","small","mx-1"],["class","text-muted px-1 cursor-pointer",3,"title","click",4,"ngIf"],[1,"text-muted","px-1","cursor-pointer",3,"title","click"],[1,"fas","fa-chevron-left"],[1,"fas","fa-chevron-right"],[1,"list-group-item","border-0","py-1","text-center"],["href","#",1,"text-muted","small",3,"title","click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,We,10,11,"div",1),t.ɵɵtemplate(2,Qe,5,6,"div",2),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.entityValues),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.data.length>n.count))},directives:[n.NgForOf,n.NgIf,n.NgClass],pipes:[o.ValuePipe,i.MessagePipe],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.entity-facet[_ngcontent-%COMP%]{font-size:.9em}"]});var Ze=function(){function e(){this.collapsible=!0,this.startUnchecked={},this.facetChecked=new t.EventEmitter,this._entities=[]}return e.prototype.ngOnChanges=function(){this.entities&&this.previewData?this._entities=this.entities:this.previewData?this._entities=Object.keys(this.previewData.highlightsPerCategory).filter((function(e){return"extractslocations"!==e})):this._entities=[]},e.prototype.data=function(e){return this.previewData.highlightsPerCategory[e]},e.prototype.entityDisplay=function(e){return this.data(e).categoryDisplayLabelPlural||this.data(e).categoryDisplayLabel||e},e.prototype.entityIcon=function(e){return"sq-icon-"+e},e.prototype.entityValues=function(e){return this.data(e).values},e.prototype.itemsChecked=function(e,t){this.facetChecked.next({entity:e,checked:t})},e}();Ze.ɵfac=function(e){return new(e||Ze)},Ze.ɵcmp=t.ɵɵdefineComponent({type:Ze,selectors:[["sq-preview-entity-panel"]],inputs:{previewData:"previewData",previewDocument:"previewDocument",style:"style",collapsible:"collapsible",startUnchecked:"startUnchecked",entities:"entities"},outputs:{facetChecked:"facetChecked"},features:[t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","d-block my-3",3,"title","icon","collapsible","buttonsStyle",4,"ngIf"],[1,"d-block","my-3",3,"title","icon","collapsible","buttonsStyle"],[3,"entity","data","previewData","previewDocument","startUnchecked","itemsChecked"],["facet",""]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Ke,2,1,"ng-container",0),2&e&&t.ɵɵproperty("ngForOf",n._entities)},directives:[n.NgForOf,n.NgIf,v.BsFacetCard,Ye],styles:[""]});var Xe=["scrollViewport"],et=function(e){return[e]},tt=function(e){return{items:e,autoAdjust:!0}};function nt(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",6),t.ɵɵelementStart(1,"button",7),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext(2).previousExtract()})),t.ɵɵelement(2,"i",8),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelement(5,"div",9),t.ɵɵelementStart(6,"button",10),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext(2).nextExtract()})),t.ɵɵtext(7),t.ɵɵpipe(8,"sqMessage"),t.ɵɵelement(9,"i",11),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("disabled",r.currentIndex<1),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,5,"msg#preview.previousDocument")," "),t.ɵɵadvance(2),t.ɵɵproperty("sq-action-buttons",t.ɵɵpureFunction1(11,tt,t.ɵɵpureFunction1(9,et,r.sortAction))),t.ɵɵadvance(1),t.ɵɵproperty("disabled",r.currentIndex>=r.extracts.length-1),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(8,7,"msg#preview.nextDocument")," ")}}function it(e,n){1&e&&(t.ɵɵelementStart(0,"div",12),t.ɵɵelement(1,"div",13),t.ɵɵelementEnd())}function rt(e,n){1&e&&(t.ɵɵelementStart(0,"div",14),t.ɵɵelementStart(1,"span"),t.ɵɵtext(2),t.ɵɵpipe(3,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"msg#preview.noextract")))}var ot=function(e){return{active:e}};function at(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",18),t.ɵɵelementStart(1,"a",19),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=n.$implicit,r=n.index;return t.ɵɵnextContext(3).scrollExtract(e,r)})),t.ɵɵelement(2,"p",20),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,o=n.index,a=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(2,ot,o===a.currentIndex)),t.ɵɵadvance(1),t.ɵɵproperty("innerHTML",r.text,t.ɵɵsanitizeHtml)}}function st(e,n){if(1&e&&(t.ɵɵelementStart(0,"cdk-virtual-scroll-viewport",15,16),t.ɵɵtemplate(2,at,3,4,"div",17),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext(2);t.ɵɵproperty("itemSize",64),t.ɵɵadvance(2),t.ɵɵproperty("cdkVirtualForOf",i.extracts)}}function lt(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,nt,10,13,"div",2),t.ɵɵtemplate(2,it,2,0,"div",3),t.ɵɵtemplate(3,rt,4,3,"div",4),t.ɵɵtemplate(4,st,3,2,"ng-template",null,5,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){var i=t.ɵɵreference(5),r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",(null==r.extracts?null:r.extracts.length)>0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.loading),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.loading&&0===(null==r.extracts?null:r.extracts.length))("ngIfElse",i)}}function ct(e,n){1&e&&(t.ɵɵelementStart(0,"div",21),t.ɵɵtext(1),t.ɵɵpipe(2,"sqMessage"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"msg#preview.loading"),"\n"))}var pt=function(){},ut=function(){function e(e,t,n,i){this.previewService=t,this.cdr=n,this.domSanitizer=i,this.style="light",this.extracts=[],this.currentIndex=-1,this.loading=!1}return e.prototype.ngOnDestroy=function(){this.loadCompleteSubscription&&this.loadCompleteSubscription.unsubscribe()},e.prototype.ngOnChanges=function(e){var t,n,i=this;if(this.extracts=[],this.previewData&&this.previewDocument){var r=null===(t=this.previewData.highlightsPerCategory.extractslocations)||void 0===t?void 0:t.values;if(r&&r.length>0)return void this.extractAll(r,this.previewDocument)}if(this.previewData&&this.downloadUrl){var o=null===(n=this.previewData.highlightsPerCategory.extractslocations)||void 0===n?void 0:n.values;o&&o.length>0&&(this.loading=!0,this.previewDocument?this.extractAll(o,this.previewDocument):this.previewService.getHtmlPreview(this.downloadUrl).subscribe((function(e){var t=i.createDocument(e);i.extractAll(o,t)})))}},e.prototype.createDocument=function(e){var t=document.implementation.createHTMLDocument("");t.write(e),t.close();var n=new T(t);return 0===n.document.querySelectorAll("[id^='extractslocations']").length&&this.previewDocument&&(n=this.previewDocument),n},e.prototype.extractAll=function(e,t){var n=this;this.extracts=e[0].locations.map((function(e,t){return{text:"",startIndex:e.start,relevanceIndex:t,textIndex:0}})),this.extracts.sort((function(e,t){return e.startIndex-t.startIndex})).forEach((function(e,i){e.text=n.sanitize(t.getHighlightText("extractslocations",i)),e.textIndex=i})),this.extracts=this.extracts.filter((function(e){return""!==e.text})),this.extracts.sort((function(e,t){return e.relevanceIndex-t.relevanceIndex})),this.buildSortAction(),this.loading=!1,this.currentIndex=-1,this.cdr.detectChanges()},e.prototype.buildSortAction=function(){var e=this;this.sortAction=new f.Action({title:"msg#sortSelector.sortByTitle",text:"msg#preview.relevanceSortHighlightButtonText",children:[new f.Action({icon:"fas fa-sort-amount-down",text:"msg#preview.relevanceSortHighlightButtonText",action:function(t,n){e.extracts=e.extracts.map((function(e){return e})).sort((function(e,t){return e.relevanceIndex-t.relevanceIndex})),e.sortAction.text=t.text,e.currentIndex=-1}}),new f.Action({icon:"fas fa-sort-amount-down",text:"msg#preview.textOrderSortHighlightButtonText",action:function(t,n){e.extracts=e.extracts.map((function(e){return e})).sort((function(e,t){return e.textIndex-t.textIndex})),e.sortAction.text=t.text,e.currentIndex=-1}})]})},e.prototype.scrollExtract=function(e,t){return void 0!==t&&(this.currentIndex=t),this.previewDocument&&this.previewDocument.selectHighlight("extractslocations",e.textIndex),!1},e.prototype.sanitize=function(e){return""!==e?this.domSanitizer.bypassSecurityTrustHtml(e.replace(/sq\-current/,"")):""},e.prototype.previousExtract=function(){this.currentIndex--,this.scrollTo()},e.prototype.nextExtract=function(){this.currentIndex++,this.scrollTo()},e.prototype.scrollTo=function(){this.cdkScrollViewport.scrollToIndex(this.currentIndex);var e=this.extracts[this.currentIndex];this.scrollExtract(e)},e}();ut.ɵfac=function(e){return new(e||ut)(t.ɵɵdirectiveInject(n.DOCUMENT),t.ɵɵdirectiveInject(ee),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(s.DomSanitizer))},ut.ɵcmp=t.ɵɵdefineComponent({type:ut,selectors:[["sq-preview-extracts-panel"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(Xe,!0),2&e){var i;t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.cdkScrollViewport=i.first)}},inputs:{previewData:"previewData",previewDocument:"previewDocument",downloadUrl:"downloadUrl",style:"style"},features:[t.ɵɵNgOnChangesFeature],decls:2,vars:2,consts:[[4,"ngIf"],["class","text-center",4,"ngIf"],["class","d-flex justify-content-between p-2",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100",4,"ngIf"],["class","text-center text-muted",4,"ngIf","ngIfElse"],["extractsTpl",""],[1,"d-flex","justify-content-between","p-2"],[1,"btn","btn-light",3,"disabled","click"],[1,"fas","fa-arrow-left"],[1,"btn-group",3,"sq-action-buttons"],[1,"btn","btn-light","float-right",3,"disabled","click"],[1,"fas","fa-arrow-right"],[1,"d-flex","justify-content-center","align-items-center","h-100"],["role","status",1,"spinner-grow"],[1,"text-center","text-muted"],[2,"height","100%",3,"itemSize"],["scrollViewport",""],["class","pl-2 pr-2",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"pl-2","pr-2"],["href","#",1,"card","my-1","list-group-item-action",3,"ngClass","click"],[1,"card-body","m-0",3,"innerHTML"],[1,"text-center"]],template:function(e,n){1&e&&(t.ɵɵtemplate(0,lt,6,4,"ng-container",0),t.ɵɵtemplate(1,ct,3,3,"div",1)),2&e&&(t.ɵɵproperty("ngIf",n.previewData),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.previewData))},directives:[n.NgIf,f.BsActionButtons,w.CdkVirtualScrollViewport,w.CdkFixedSizeVirtualScroll,w.CdkVirtualForOf,n.NgClass],pipes:[i.MessagePipe],styles:["[_nghost-%COMP%]     .cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{max-width:100%;min-width:100%}.spinner-grow[_ngcontent-%COMP%]{height:3rem;width:3rem}.active[_ngcontent-%COMP%]{background-color:#f8f9fa}.dark[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#e9ecef;color:#768883}"],changeDetection:0});var dt=function(){function e(e){this.formBuilder=e,this.searchText=new t.EventEmitter,this.searchControl=new x.FormControl(""),this.form=this.formBuilder.group({search:this.searchControl})}return e.prototype.ngOnChanges=function(){this.searchControl.setValue(this.query&&this.query.text?this.query.text:"")},e.prototype.search=function(){this.searchText.next(this.searchControl.value||"")},e}();dt.ɵfac=function(e){return new(e||dt)(t.ɵɵdirectiveInject(x.FormBuilder))},dt.ɵcmp=t.ɵɵdefineComponent({type:dt,selectors:[["sq-preview-search-form"]],inputs:{query:"query"},outputs:{searchText:"searchText"},features:[t.ɵɵNgOnChangesFeature],decls:12,vars:10,consts:[["novalidate","",3,"formGroup"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["for","search-input",1,"input-group-text"],["id","search-input","type","text","formControlName","search","sqAutofocus","",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary",3,"title","click"],[1,"fas","fa-fw","fa-search"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"form",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵelementStart(3,"label",3),t.ɵɵtext(4),t.ɵɵpipe(5,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(6,"input",4),t.ɵɵpipe(7,"sqMessage"),t.ɵɵelementStart(8,"div",5),t.ɵɵelementStart(9,"button",6),t.ɵɵlistener("click",(function(){return n.search()})),t.ɵɵpipe(10,"sqMessage"),t.ɵɵelement(11,"i",7),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.form),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,4,"msg#preview.search")),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,6,"msg#searchForm.searchFor")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("title",t.ɵɵpipeBind1(10,8,"msg#searchForm.search")))},directives:[x.ɵangular_packages_forms_forms_y,x.NgControlStatusGroup,x.FormGroupDirective,x.DefaultValueAccessor,x.NgControlStatus,x.FormControlName,o.Autofocus],pipes:[i.MessagePipe],styles:[""]});var gt=["currentPageEl"];function ht(e,n){1&e&&(t.ɵɵelementStart(0,"div",8),t.ɵɵelement(1,"div",9),t.ɵɵelementEnd())}var mt=function(){return{page:1}},vt=function(e){return{values:e}};function ft(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",4),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext(2).selectPage(1)})),t.ɵɵelementStart(1,"div",5),t.ɵɵelementStart(2,"span",6),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,ht,2,0,"div",7),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(4,2,"msg#preview.page",t.ɵɵpureFunction1(6,vt,t.ɵɵpureFunction0(5,mt)))),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",1===r._pendingPage)}}function yt(e,n){if(1&e&&t.ɵɵelement(0,"p",12),2&e){var i=t.ɵɵnextContext(2).$implicit;t.ɵɵproperty("innerHTML",i.relevantExtracts,t.ɵɵsanitizeHtml)}}function xt(e,n){1&e&&(t.ɵɵelementStart(0,"div",8),t.ɵɵelement(1,"div",9),t.ɵɵelementEnd())}var wt=function(e){return{page:e}};function St(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",4),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(2).selectPage(e.$page)})),t.ɵɵelementStart(1,"div",5),t.ɵɵelementStart(2,"span",6),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,yt,1,1,"p",11),t.ɵɵtemplate(6,xt,2,0,"div",7),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext(2);t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(4,3,"msg#preview.page",t.ɵɵpureFunction1(8,vt,t.ɵɵpureFunction1(6,wt,r.$page)))),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",o._pendingPage!==r.$page),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o._pendingPage===r.$page)}}function Ct(e,n){1&e&&(t.ɵɵelementStart(0,"div",8),t.ɵɵelement(1,"div",9),t.ɵɵelementEnd())}function bt(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",4),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext(4).selectPrevious()})),t.ɵɵelementStart(1,"div",5),t.ɵɵelementStart(2,"span",6),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵpipe(5,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(6,Ct,2,0,"div",7),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind2(4,3,"msg#preview.page",t.ɵɵpureFunction1(10,vt,t.ɵɵpureFunction1(8,wt,r.currentPage-1)))," (",t.ɵɵpipeBind1(5,6,"msg#preview.previousDocument"),")"),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",r._pendingPage===r.currentPage-1)}}function Et(e,n){if(1&e&&t.ɵɵelement(0,"sq-preview-extracts-panel",18),2&e){var i=t.ɵɵnextContext(4);t.ɵɵstyleMap(i.style),t.ɵɵproperty("previewData",i.previewData)("previewDocument",i.previewDocument)}}function It(e,n){1&e&&(t.ɵɵelementStart(0,"div",8),t.ɵɵelement(1,"div",9),t.ɵɵelementEnd())}function Dt(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",4),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext(4).selectNext()})),t.ɵɵelementStart(1,"div",5),t.ɵɵelementStart(2,"span",6),t.ɵɵtext(3),t.ɵɵpipe(4,"sqMessage"),t.ɵɵpipe(5,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(6,It,2,0,"div",7),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind2(4,3,"msg#preview.page",t.ɵɵpureFunction1(10,vt,t.ɵɵpureFunction1(8,wt,r.currentPage+1)))," (",t.ɵɵpipeBind1(5,6,"msg#preview.nextDocument"),")"),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",r._pendingPage===r.currentPage+1)}}function Pt(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,bt,7,12,"a",2),t.ɵɵelementStart(2,"div",13,14),t.ɵɵelementStart(4,"div",15),t.ɵɵelementStart(5,"span",16),t.ɵɵtext(6),t.ɵɵpipe(7,"sqMessage"),t.ɵɵpipe(8,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵtemplate(9,Et,1,4,"sq-preview-extracts-panel",17),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(10,Dt,7,12,"a",2),t.ɵɵelementContainerEnd()),2&e){var i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.hasPrevious),t.ɵɵadvance(5),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind2(7,5,"msg#preview.page",t.ɵɵpureFunction1(12,vt,t.ɵɵpureFunction1(10,wt,i.currentPage)))," (",t.ɵɵpipeBind1(8,8,"msg#preview.current"),")"),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",!i._pendingPreviewDocument),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.hasNext)}}function qt(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,St,7,10,"a",2),t.ɵɵtemplate(2,Pt,11,14,"ng-container",10),t.ɵɵelementContainerEnd()),2&e){var i=n.$implicit,r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.currentPage!==i.$page),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.currentPage===i.$page)}}function Mt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",1),t.ɵɵtemplate(1,ft,6,8,"a",2),t.ɵɵtemplate(2,qt,3,2,"ng-container",3),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i.hasFirst),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.sortedPages)}}var Tt=function(){function e(e){this.previewService=e,this.style="light",this.gotopage=new t.EventEmitter,this._pendingPreviewDocument=!0,this._pendingPages=!0}return e.prototype.ngOnChanges=function(e){var t=this;e.previewData&&(this._pendingPreviewDocument=!0,this._pendingPages=!0),e.previewDocument&&(this._pendingPreviewDocument=!1),e.pages&&(this._pendingPages=!1),this._pendingPreviewDocument||this._pendingPages||(this._pendingPage=void 0,this.previewData&&(this.currentPage=this.previewData.record.$page,this.containerid=this.previewData.record.containerid),this.pages&&this.currentPage&&this.containerid&&(this.sortedPages=this.pages.records,this.sortedPages.forEach((function(e){if(t.previewService.getPageNumber(e),!e.$page)throw new Error("Record is not page... "+e.id)})),this.sortedPages.find((function(e){return e.$page===t.currentPage}))||this.sortedPages.push(this.previewData.record),this.sortedPages.sort((function(e,t){return e.$page-t.$page})),this.hasFirst=!!this.sortedPages.find((function(e){return 1===e.$page||2===t.currentPage})),this.hasPrevious=1===this.currentPage||!!this.sortedPages.find((function(e){return e.$page===t.currentPage-1})),this.hasNext=!!this.sortedPages.find((function(e){return e.$page===t.currentPage+1}))),setTimeout((function(){var e,n;null===(n=null===(e=t.currentPageEl)||void 0===e?void 0:e.first)||void 0===n||n.nativeElement.scrollIntoView({behaviour:"smooth",block:"start"})})))},e.prototype.selectPage=function(e){return this.gotopage.next(e),this._pendingPage=e,!1},e.prototype.selectPrevious=function(){return this.selectPage(this.currentPage-1)},e.prototype.selectNext=function(){return this.selectPage(this.currentPage+1)},e}();Tt.ɵfac=function(e){return new(e||Tt)(t.ɵɵdirectiveInject(ee))},Tt.ɵcmp=t.ɵɵdefineComponent({type:Tt,selectors:[["sq-preview-pages-panel"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(gt,!0,t.ElementRef),2&e){var i;t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.currentPageEl=i)}},inputs:{pages:"pages",previewData:"previewData",previewDocument:"previewDocument",style:"style"},outputs:{gotopage:"gotopage"},features:[t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[["class","list-group",4,"ngIf"],[1,"list-group"],["href","#","class","card my-1 list-group-item-action",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["href","#",1,"card","my-1","list-group-item-action",3,"click"],[1,"card-body"],[1,"small","text-muted"],["class","text-center my-3",4,"ngIf"],[1,"text-center","my-3"],["role","status",1,"spinner-grow"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"card","my-1"],["currentPageEl",""],[1,"card-body","m-0"],[1,"small","font-weight-bold","mb-1"],["class","d-flex flex-column","style","height: 300px;",3,"previewData","previewDocument","style",4,"ngIf"],[1,"d-flex","flex-column",2,"height","300px",3,"previewData","previewDocument"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Mt,3,2,"div",0),2&e&&t.ɵɵproperty("ngIf",n.sortedPages)},directives:[n.NgIf,n.NgForOf,ut],pipes:[i.MessagePipe],encapsulation:2});var At=function(e){return{form:e,controlName:"page"}};function Ft(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"form",1),t.ɵɵelementStart(1,"div",2),t.ɵɵelementStart(2,"div",3),t.ɵɵelementStart(3,"label",4),t.ɵɵtext(4),t.ɵɵpipe(5,"sqMessage"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(6,"input",5),t.ɵɵelementStart(7,"div",6),t.ɵɵelementStart(8,"button",7),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(i),t.ɵɵnextContext().submit()})),t.ɵɵelement(9,"i",8),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("formGroup",r.form),t.ɵɵadvance(1),t.ɵɵproperty("sqValidation",t.ɵɵpureFunction1(5,At,r.form)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,3,"msg#preview.gotopage"))}}var kt=function(){function e(e,n){this.gotopage=new t.EventEmitter,this.pageControl=new x.FormControl("",[n.integerValidator(),n.minValidator(1)]),this.form=e.group({page:this.pageControl})}return e.prototype.ngOnChanges=function(){this.pageControl.setValue(this.pageNumber)},e.prototype.submit=function(){var e=parseInt(this.pageControl.value,10);isNaN(e)||e===this.pageNumber||(this.pageNumber=e,this.gotopage.next(e))},e}();kt.ɵfac=function(e){return new(e||kt)(t.ɵɵdirectiveInject(x.FormBuilder),t.ɵɵdirectiveInject(S.ValidationService))},kt.ɵcmp=t.ɵɵdefineComponent({type:kt,selectors:[["sq-preview-page-form"]],inputs:{pageNumber:"pageNumber"},outputs:{gotopage:"gotopage"},features:[t.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[["novalidate","","class","mb-2",3,"formGroup",4,"ngIf"],["novalidate","",1,"mb-2",3,"formGroup"],[1,"input-group","mb-1",3,"sqValidation"],[1,"input-group-prepend"],["for","page-input",1,"input-group-text"],["id","page-input","type","text","placeholder","page","formControlName","page","autocomplete","off","spellcheck","off",1,"form-control"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-fw","fa-arrow-right"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Ft,10,7,"form",0),2&e&&t.ɵɵproperty("ngIf",n.pageNumber)},directives:[n.NgIf,x.ɵangular_packages_forms_forms_y,x.NgControlStatusGroup,x.FormGroupDirective,S.ValidationDirective,x.DefaultValueAccessor,x.NgControlStatus,x.FormControlName],pipes:[i.MessagePipe],encapsulation:2});var _t=function(){};_t.ɵmod=t.ɵɵdefineNgModule({type:_t}),_t.ɵinj=t.ɵɵdefineInjector({factory:function(e){return new(e||_t)},providers:[{provide:X,useValue:Ve}],imports:[[n.CommonModule,x.FormsModule,x.ReactiveFormsModule,w.ScrollingModule,i.IntlModule,r.WebServicesModule,S.ValidationModule,o.UtilsModule,C.CollapseModule,y.MetadataModule,b.BsModalModule,v.BsFacetModule,m.ResultModule,f.BsActionModule,te],te]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(_t,{declarations:[be,qe,Ve,He,Ue,ae,ue,Fe,Ye,Ze,ut,dt,Tt,kt],imports:[n.CommonModule,x.FormsModule,x.ReactiveFormsModule,w.ScrollingModule,i.IntlModule,r.WebServicesModule,S.ValidationModule,o.UtilsModule,C.CollapseModule,y.MetadataModule,b.BsModalModule,v.BsFacetModule,m.ResultModule,f.BsActionModule,te],exports:[te,be,qe,Ve,He,Ue,ae,ue,Fe,Ye,Ze,ut,dt,Tt,kt]});var Ot=a.Utils.merge({},{preview:{noDocumentDataErrorPopupTitle:"Error loading document's data",highlightsTitle:"Highlights",noEntityToHighlight:"No highlighted entity in document",termXLabel:"Search term {index, number}",otherTerms:"Other terms",previousDocument:"Previous",nextDocument:"Next",originalDocument:"Original document",selectedHighlight:"Selected highlight",noSelectedHighlight:"No highlight selected",firstHighlightButtonAltText:"First",previousHighlightButtonAltText:"Previous",nextHighlightButtonAltText:"Next",relevanceSortHighlightButtonText:"Relevance",textOrderSortHighlightButtonText:"Text order",lastHighlightButtonAltText:"Last",highlightFilters:{title:"Filters",keepAll:"All",keepNone:"None",keepAllInCategory:"All",keepNoneInCategory:"None"},documentPropertiesTitle:"Details",similarDocumentsTitle:"Similar documents",showAll:"Show all values",sortAlphabetically:"Sort alphabetically",sortFrequency:"Sort by frequency",loading:"Loading...",noextract:"No extract",search:"Search",gotopage:"Go to page",page:"Page {page}",current:"current"},facet:{preview:{closeTitle:"Close",expandTitle:"Maximize",minimize:"Zoom out",maximize:"Zoom in",toggleExtracts:"Toggle relevant extracts highlighting",toggleEntities:"Toggle entities highlighting"}}},d.enSearch,C.enCollapse,y.enMetadata,b.enModal,v.enFacet,m.enResult),Ht=a.Utils.merge({},{preview:{noDocumentDataErrorPopupTitle:"Echec d'accès aux données de ce document",highlightsTitle:"Surlignage",noEntityToHighlight:"Aucune entité affichée dans ce document",termXLabel:"Terme recherché {index, number}",otherTerms:"Autres termes",previousDocument:"Précédent",nextDocument:"Suivant",originalDocument:"Document original",selectedHighlight:"Elément sélectionné",noSelectedHighlight:"Aucun élément sélectionné",firstHighlightButtonAltText:"Premier élément",previousHighlightButtonAltText:"Elément précédent",nextHighlightButtonAltText:"Elément suivant",relevanceSortHighlightButtonText:"Pertinence",textOrderSortHighlightButtonText:"Ordre du texte",lastHighlightButtonAltText:"Dernier élément",highlightFilters:{title:"Filtres",keepAll:"Tout inclure",keepNone:"Tout exclure",keepAllInCategory:"Toutes les entités",keepNoneInCategory:"Aucune entité"},documentPropertiesTitle:"Détails",similarDocumentsTitle:"Documents similaires",showAll:"Montrer toutes les valeurs",sortAlphabetically:"Trier par ordre alphabetique",sortFrequency:"Trier par fréquence",loading:"Chargement...",noextract:"Pas d'extrait",search:"Recherche",gotopage:"Aller à la page",page:"Page {page}",current:"actuel"},facet:{preview:{closeTitle:"Fermer",expandTitle:"Maximiser",minimize:"Réduire",maximize:"Agrandir",toggleExtracts:"Surlignage des extraits pertinents",toggleEntities:"Surlignage des entités"}}},d.frSearch,C.frCollapse,y.frMetadata,b.frModal,v.frFacet,m.frResult),Nt=a.Utils.merge({},{preview:{noDocumentDataErrorPopupTitle:"Fehler beim Laden der Dokumentdaten",highlightsTitle:"Markierungen",noEntityToHighlight:"Keine Markierungen im Dokument verfügbar",termXLabel:"Suchbegriff",otherTerms:"Andere Begriffe",previousDocument:"Vorheriges Dokument",nextDocument:"Nächstes Dokument",originalDocument:"Originales Dokument",selectedHighlight:"Ausgewählte Markierung",noSelectedHighlight:"Keine Markierung ausgewählt",firstHighlightButtonAltText:"Erste Markierung",previousHighlightButtonAltText:"Vorherige Markierung",nextHighlightButtonAltText:"Nächste Markierung",lastHighlightButtonAltText:"Letzte Markierung",highlightFilters:{title:"Filter",keepAll:"Alle",keepNone:"Keine",keepAllInCategory:"Alle",keepNoneInCategory:"Keine"},documentPropertiesTitle:"Dokumenteigenschaften",similarDocumentsTitle:"Ähnliche Dokumente",showAll:"Zeige alle Werte",sortAlphabetically:"Alphabetische Sortierung",sortFrequency:"Sortierung nach Häufigkeit",loading:"Laden...",noextract:"kein Auszug",search:"Suche",gotopage:"Zur Seite gehen",page:"Seite {page}",current:"aktuell"},facet:{preview:{closeTitle:"Schließen",expandTitle:"Maximieren",minimize:"Rauszoomen",maximize:"hineinzoomen",toggleExtracts:"Schalten Sie die Hervorhebung relevanter Auszüge um",toggleEntities:"Schalten Sie die Hervorhebung von Objekten"}}},d.deSearch,C.deCollapse,y.deMetadata,b.deModal,v.deFacet,m.deResult);e.BsFacetPreview=ae,e.BsFacetPreviewComponent2=ue,e.BsPreviewEntityFacetComponent=Ye,e.BsPreviewEntityPanelComponent=Ze,e.BsPreviewExtractsPanelComponent=ut,e.BsPreviewHighlights=be,e.BsPreviewLinks=qe,e.BsPreviewModule=_t,e.BsPreviewPageFormComponent=kt,e.BsPreviewPagesPanelComponent=Tt,e.BsPreviewPanel=He,e.BsPreviewPopup=Ve,e.BsPreviewSearchFormComponent=dt,e.BsResultLinkPreview=Ue,e.BsSimilarDocuments=Fe,e.Extract=pt,e.PREVIEW_MODAL=X,e.PreviewDocument=T,e.PreviewDocumentIframe=_,e.PreviewModule=te,e.PreviewService=ee,e.PreviewTooltip=Z,e.dePreview=Nt,e.enPreview=Ot,e.frPreview=Ht,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sinequa-components-preview.umd.min.js.map