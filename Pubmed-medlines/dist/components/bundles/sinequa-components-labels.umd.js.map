{"version":3,"file":"sinequa-components-labels.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/components/labels/labels.service.ts","../../../projects/components/labels/label.pipe.ts","../../../projects/components/labels/labels.component.html","../../../projects/components/labels/labels.component.ts","../../../projects/components/labels/result-labels.component.html","../../../projects/components/labels/result-labels.component.ts","../../../projects/components/labels/labels-autocomplete.directive.ts","../../../projects/components/labels/labels.module.ts","../projects/components/labels/bootstrap/labels-autocomplete/labels-autocomplete.component.html","../projects/components/labels/bootstrap/labels-autocomplete/labels-autocomplete.component.ts","../projects/components/labels/bootstrap/rename-label/rename-label.html","../projects/components/labels/bootstrap/rename-label/rename-label.ts","../projects/components/labels/bootstrap/labels-menu/labels-menu.component.html","../projects/components/labels/bootstrap/labels-menu/labels-menu.component.ts","../projects/components/labels/bootstrap/delete-label/delete-label.html","../projects/components/labels/bootstrap/delete-label/delete-label.ts","../projects/components/labels/bootstrap/add-label/add-label.html","../projects/components/labels/bootstrap/add-label/add-label.ts","../projects/components/labels/bootstrap/edit-label/edit-label.html","../projects/components/labels/bootstrap/edit-label/edit-label.ts","../../projects/components/labels/bootstrap/labels.module.ts","../../projects/components/labels/messages/en.ts","../../projects/components/labels/messages/fr.ts","../../projects/components/labels/messages/de.ts","../../projects/components/labels/messages/index.ts","../../../projects/components/labels/sinequa-components-labels.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {\n    Injectable,\n    Inject,\n    InjectionToken,\n    Type,\n    OnDestroy,\n} from \"@angular/core\";\nimport { Observable, of, Subscription } from \"rxjs\";\nimport {\n    PrincipalWebService,\n    LabelsWebService,\n    AuditEventType,\n    LabelsRights,\n} from \"@sinequa/core/web-services\";\nimport { AppService, ValueItem } from \"@sinequa/core/app-utils\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { SearchService } from \"@sinequa/components/search\";\nimport { ModalService, ModalResult } from \"@sinequa/core/modal\";\nimport { Action } from \"@sinequa/components/action\";\nimport { IntlService } from \"@sinequa/core/intl\";\nimport { NotificationsService } from \"@sinequa/core/notification\";\nimport { SelectionService } from \"@sinequa/components/selection\";\n\nexport interface LabelsComponents {\n    renameModal: Type<any>;\n    labelsAutocompleteComponent: Type<any>;\n    deleteModal: Type<any>;\n    addModal: Type<any>;\n    editModal: Type<any>;\n}\n\nexport interface ModalProperties {\n    public: boolean;\n    allowEditPublicLabels: boolean;\n    allowManagePublicLabels: boolean;\n    allowNewLabels: boolean;\n    disableAutocomplete: boolean;\n    action: number;\n    radioButtons: any[];\n}\n\nexport const enum UpdateLabelsAction {\n    add,\n    remove,\n    rename,\n    delete,\n    bulkAdd,\n    bulkRemove,\n    edit,\n}\n\nexport const LABELS_COMPONENTS = new InjectionToken<LabelsComponents>(\n    \"LABELS_COMPONENTS\"\n);\n\n@Injectable({\n    providedIn: \"root\",\n})\nexport class LabelsService implements OnDestroy {\n    private _privateLabelsPrefix: string | undefined;\n    private static readonly defaultLabelsRights: LabelsRights = {\n        canManagePublicLabels: true,\n        canEditPublicLabels: true,\n    };\n    private labelsRightsSubscription: Subscription | undefined;\n    private labelsRights: LabelsRights | undefined;\n\n    constructor(\n        private labelsWebService: LabelsWebService,\n        private appService: AppService,\n        private searchService: SearchService,\n        private modalService: ModalService,\n        private principalWebService: PrincipalWebService,\n        private intlService: IntlService,\n        private notificationService: NotificationsService,\n        private selectionService: SelectionService,\n        @Inject(LABELS_COMPONENTS) public labelsComponents: LabelsComponents\n    ) {\n        this.principalWebService.events.subscribe((event) => {\n            switch (event.type) {\n                case \"changed\":\n                    this._privateLabelsPrefix = undefined;\n                    this.labelsRights = undefined;\n                    this.labelsRightsSubscription = undefined;\n                    break;\n            }\n        });\n    }\n\n    public get publicLabelsField(): string | undefined {\n        return this.appService.cclabels\n            ? this.appService.cclabels.publicLabelsField\n            : undefined;\n    }\n\n    public get privateLabelsField(): string | undefined {\n        return this.appService.cclabels\n            ? this.appService.cclabels.privateLabelsField\n            : undefined;\n    }\n\n    public get labelsAutoSuggestWildcard(): string | undefined {\n        return this.appService.cclabels\n            ? this.appService.cclabels.labelsAutoSuggestWildcard\n            : undefined;\n    }\n\n    public get allowPublicLabelsManagement(): boolean {\n        return this.appService.cclabels\n            ? this.appService.cclabels.allowPublicLabelsCreation\n            : false;\n    }\n\n    public get allowPublicLabelsEdition(): boolean {\n        return this.appService.cclabels\n            ? this.appService.cclabels.allowPublicLabelsModification\n            : false;\n    }\n\n    public get userLabelsRights(): LabelsRights {\n        let rights: LabelsRights | undefined;\n        if (!this.labelsRights) {\n            if (!this.labelsRightsSubscription) {\n                const observable = this.labelsWebService.getUserRights();\n                this.labelsRightsSubscription = Utils.subscribe(\n                    observable,\n                    (response) => (rights = response)\n                );\n            } else {\n                rights = LabelsService.defaultLabelsRights;\n            }\n            this.labelsRights = !!rights\n                ? rights\n                : LabelsService.defaultLabelsRights;\n        }\n        return this.labelsRights;\n    }\n\n    ngOnDestroy() {\n        if (this.labelsRightsSubscription) {\n            this.labelsRightsSubscription.unsubscribe();\n        }\n    }\n\n    /** From navbar */\n    public renameLabelModal(): Promise<ModalResult> {\n        const data = {\n            oldValues: [],\n            newValue: \"\",\n            properties: this._modalProperties(UpdateLabelsAction.rename),\n        };\n        return this.modalService.open(this.labelsComponents.renameModal, {\n            model: data,\n        });\n    }\n\n    public deleteLabelModal(): Promise<ModalResult> {\n        const data = {\n            values: [],\n            properties: this._modalProperties(UpdateLabelsAction.delete),\n        };\n        return this.modalService.open(this.labelsComponents.deleteModal, {\n            model: data,\n        });\n    }\n\n    public bulkAddLabelModal(): Promise<ModalResult> {\n        const data = {\n            values: [],\n            properties: this._modalProperties(UpdateLabelsAction.bulkAdd),\n        };\n        return this.modalService.open(this.labelsComponents.addModal, {\n            model: data,\n        });\n    }\n\n    public bulkRemoveLabelModal(): Promise<ModalResult> {\n        const data = {\n            values: [],\n            properties: this._modalProperties(UpdateLabelsAction.bulkRemove),\n        };\n        return this.modalService.open(this.labelsComponents.deleteModal, {\n            model: data,\n        });\n    }\n\n    private _modalProperties(action: number): ModalProperties {\n        const allowManagePublicLabels: boolean =\n            this.allowPublicLabelsManagement &&\n            this.userLabelsRights &&\n            this.userLabelsRights.canManagePublicLabels;\n        const allowEditPublicLabels: boolean =\n            this.allowPublicLabelsEdition &&\n            this.userLabelsRights &&\n            this.userLabelsRights.canEditPublicLabels;\n        let allowNewLabels: boolean = false;\n        let radioButtonsConf: any;\n\n        switch (action) {\n            case UpdateLabelsAction.rename:\n            case UpdateLabelsAction.remove:\n            case UpdateLabelsAction.delete:\n            case UpdateLabelsAction.bulkRemove:\n                allowNewLabels = false;\n                break;\n            case UpdateLabelsAction.add:\n            case UpdateLabelsAction.bulkAdd:\n            case UpdateLabelsAction.edit:\n                allowNewLabels = true;\n                break;\n            default:\n                break;\n        }\n\n        switch (action) {\n            case UpdateLabelsAction.rename:\n            case UpdateLabelsAction.delete:\n                radioButtonsConf = this._getModalRadioButtonsConf(\n                    allowManagePublicLabels\n                );\n                break;\n            case UpdateLabelsAction.add:\n            case UpdateLabelsAction.bulkAdd:\n            case UpdateLabelsAction.remove:\n            case UpdateLabelsAction.bulkRemove:\n            case UpdateLabelsAction.edit:\n                radioButtonsConf = this._getModalRadioButtonsConf(\n                    allowManagePublicLabels || allowEditPublicLabels\n                );\n                break;\n            default:\n                break;\n        }\n\n        return {\n            allowEditPublicLabels: allowEditPublicLabels,\n            allowManagePublicLabels: allowManagePublicLabels,\n            allowNewLabels: allowNewLabels,\n            action: action,\n            ...radioButtonsConf,\n        };\n    }\n\n    private _getModalRadioButtonsConf(publicRight: boolean): any {\n        let isPublic: boolean = true;\n        let disableAutocomplete: boolean = false;\n        let radioButtons: any[] = [];\n        let publicRadioButton = {\n            id: \"publicLabel\",\n            name: \"msg#labels.public\",\n            value: true,\n            disabled: false,\n            checked: true,\n        };\n        let privateRadioButton = {\n            id: \"privateLabel\",\n            name: \"msg#labels.private\",\n            value: false,\n            disabled: false,\n            checked: false,\n        };\n        if (!!this.publicLabelsField && !!this.privateLabelsField) {\n            if (publicRight) {\n                isPublic = true;\n                radioButtons = [publicRadioButton, privateRadioButton];\n            } else {\n                isPublic = false;\n                publicRadioButton = {\n                    ...publicRadioButton,\n                    disabled: true,\n                    checked: false,\n                };\n                privateRadioButton = {\n                    ...privateRadioButton,\n                    disabled: true,\n                    checked: true,\n                };\n                radioButtons = [publicRadioButton, privateRadioButton];\n            }\n        } else if (!!this.publicLabelsField) {\n            if (publicRight) {\n                isPublic = true;\n                publicRadioButton = {\n                    ...publicRadioButton,\n                    disabled: true,\n                    checked: true,\n                };\n                radioButtons = [publicRadioButton];\n            } else {\n                isPublic = false;\n                disableAutocomplete = true;\n                publicRadioButton = {\n                    ...publicRadioButton,\n                    disabled: true,\n                    checked: false,\n                };\n                radioButtons = [publicRadioButton];\n            }\n        } else if (!!this.privateLabelsField) {\n            isPublic = false;\n            privateRadioButton = {\n                ...privateRadioButton,\n                disabled: true,\n                checked: true,\n            };\n            radioButtons = [privateRadioButton];\n        }\n\n        return {\n            public: isPublic,\n            disableAutocomplete: disableAutocomplete,\n            radioButtons: radioButtons,\n        };\n    }\n    /** END From navbar */\n\n    /** From result selector */\n    public buildSelectionAction(): Action | undefined {\n        if (!this.publicLabelsField && !this.privateLabelsField) {\n            return undefined;\n        }\n        const action = new Action({\n            icon: \"fas fa-tags\",\n            title: \"msg#labels.labels\",\n            action: () => {\n                this.editLabelModal();\n            },\n        });\n        if (action) {\n            action.updater = (action) => {\n                action.hidden = !this.selectionService.haveSelectedRecords;\n            };\n            action.hidden = true;\n        }\n        return action;\n    }\n\n    public editLabelModal(): Promise<ModalResult> {\n        const data = {\n            valuesToBeAdded: [],\n            valuesToBeRemoved: [],\n            properties: this._modalProperties(UpdateLabelsAction.edit),\n        };\n        return this.modalService.open(this.labelsComponents.editModal, {\n            model: data,\n        });\n    }\n    /** END result selector */\n\n\n    addLabels(\n        labels: string[],\n        ids: string[],\n        _public: boolean\n    ): Observable<void> {\n        if (!labels || labels.length === 0 || !ids || ids.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.add(labels, ids, _public);\n        return observable;\n    }\n\n    removeLabels(\n        labels: string[],\n        ids: string[],\n        _public: boolean\n    ): Observable<void> {\n        if (!labels || labels.length === 0 || !ids || ids.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.remove(labels, ids, _public);\n        return observable;\n    }\n\n    selectLabels(labels: string[], _public: boolean): Promise<boolean> {\n        const field =\n            this.appService.cclabels &&\n            (_public\n                ? this.appService.cclabels.publicLabelsField\n                : this.appService.cclabels.privateLabelsField);\n        if (!field) {\n            return Promise.resolve(false);\n        }\n        const items: ValueItem[] = [];\n        const selectedLabels: string[] = this.getSelectedLabels(field);\n        for (let label of labels) {\n            const display = label;\n            if (!_public) {\n                label = <string>this.addPrivatePrefix(label);\n            }\n            if (selectedLabels.indexOf(label) === -1) {\n                items.push({\n                    value: label,\n                    display: display,\n                });\n            }\n        }\n\n        this.searchService.addFieldSelect(field, items);\n        return this.searchService.search(undefined, {\n            type: AuditEventType.Label_Open,\n            detail: {\n                label: !!labels ? labels.toString() : null,\n                public: _public,\n            },\n        });\n    }\n\n    /**\n     * Retrieves the labels that are not in the current filters of breadcrumbs\n     *\n     * @param field The column index containing the labels.\n     * @returns The selected labels\n     */\n    private getSelectedLabels(field: string): string[] {\n        const labels: string[] = [];\n        if (field && this.searchService.breadcrumbs?.activeSelects) {\n            for (const select of this.searchService.breadcrumbs.activeSelects) {\n                if (select.expr) {\n                    const values = select.expr.getValues(field);\n                    values.forEach((value) => {\n                        if (labels.indexOf(value) === -1) {\n                            labels.push(value);\n                        }\n                    });\n                }\n            }\n        }\n        return labels;\n    }\n\n    renameLabels(\n        labels: string[],\n        newLabel: string,\n        _public: boolean\n    ): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.rename(\n            labels,\n            newLabel,\n            _public\n        );\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\"msg#renameLabel.errorFeedback\");\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#renameLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    deleteLabels(labels: string[], _public: boolean): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.delete(labels, _public);\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\"msg#deleteLabel.errorFeedback\");\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#deleteLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    bulkAddLabels(labels: string[], _public: boolean): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.bulkAdd(\n            labels,\n            this.searchService.query,\n            _public\n        );\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\n                    \"msg#bulkAddLabel.errorFeedback\"\n                );\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#bulkAddLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    bulkRemoveLabels(labels: string[], _public: boolean): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.bulkRemove(\n            labels,\n            this.searchService.query,\n            _public\n        );\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\n                    \"msg#bulkRemoveLabel.errorFeedback\"\n                );\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#bulkRemoveLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    get privateLabelsPrefix(): string {\n        if (!this.principalWebService.principal) {\n            return \"\";\n        }\n        if (!this._privateLabelsPrefix && this.appService.cclabels) {\n            if (\n                this.appService.isTree(\n                    this.appService.cclabels.privateLabelsField\n                )\n            ) {\n                this._privateLabelsPrefix = Utils.addUrl(\n                    \"/\",\n                    Utils.replace(\n                        this.principalWebService.principal.userId,\n                        \"|\",\n                        \"/\"\n                    ),\n                    \"/\"\n                );\n            } else {\n                this._privateLabelsPrefix =\n                    this.principalWebService.principal.userId + \"|\";\n            }\n        }\n        return this._privateLabelsPrefix || \"\";\n    }\n\n    sort(labels: string[], _public: boolean): string[] {\n        if (!labels) return labels;\n        return labels.sort((a, b) => {\n            if (!a) return -1;\n            if (!b) return 1;\n            if (!_public) {\n                a = <string>this.removePrivatePrefix(a);\n                b = <string>this.removePrivatePrefix(b);\n            }\n            a = this.intlService.formatMessage(a);\n            b = this.intlService.formatMessage(b);\n            return a.localeCompare(b);\n        });\n    }\n\n    split(labels: string): string[] {\n        if (!labels) {\n            return [];\n        }\n        return labels\n            .trim()\n            .split(/\\s*;\\s*/)\n            .filter((value) => {\n                return value !== \"\";\n            });\n    }\n\n    private _addPrivatePrefix(label: string): string {\n        if (\n            this.appService.cclabels &&\n            this.appService.isTree(this.appService.cclabels.privateLabelsField)\n        ) {\n            return Utils.addUrl(this.privateLabelsPrefix, label);\n        } else {\n            return this.privateLabelsPrefix + label;\n        }\n    }\n\n    addPrivatePrefix(labels: string | string[]): string | string[] {\n        if (typeof labels === \"string\") {\n            return this._addPrivatePrefix(labels);\n        } else {\n            for (let i = 0, ic = labels.length; i < ic; i++) {\n                labels[i] = this._addPrivatePrefix(labels[i]);\n            }\n            return labels;\n        }\n    }\n\n    private _removePrivatePrefix(label: string): string {\n        if (label.indexOf(this.privateLabelsPrefix) === 0) {\n            if (\n                this.appService.cclabels &&\n                this.appService.isTree(\n                    this.appService.cclabels.privateLabelsField\n                )\n            ) {\n                return label.slice(this.privateLabelsPrefix.length - 1);\n            } else {\n                return label.slice(this.privateLabelsPrefix.length);\n            }\n        }\n        return label;\n    }\n\n    removePrivatePrefix(labels: string | string[]): string | string[] {\n        if (typeof labels === \"string\") {\n            return this._removePrivatePrefix(labels);\n        } else {\n            for (let i = 0, ic = labels.length; i < ic; i++) {\n                labels[i] = this._removePrivatePrefix(labels[i]);\n            }\n            return labels;\n        }\n    }\n}\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\nimport {LabelsService} from \"./labels.service\";\n\n@Pipe({name: \"sqLabel\", pure: false})\nexport class LabelPipe extends AbstractIntlPipe {\n    constructor(\n        protected labelsService: LabelsService,\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(value: string, _public?: boolean): void {\n        super.updateValue(value, _public);\n        this.value = value;\n        if (!_public) {\n            this.value = <string>this.labelsService.removePrivatePrefix(this.value);\n        }\n        this.value = this.intlService.formatMessage(this.value);\n    }\n}","<div *ngIf=\"showLabels\" class=\"d-inline\">\n    <span *ngFor=\"let label of labels; let $index = index\" class=\"d-inline\">\n        <div class=\"badge badge-pill badge-info align-self-center mr-1 d-inline\" [ngClass]=\"{'sq-labels-public': public, 'sq-labels-private': !public}\"\n            title=\"{{(public ? 'msg#labels.selectPublicLabelTitle' : 'msg#labels.selectPrivateLabelTitle') | sqMessage}}\">\n            <span (click)=\"select(label)\">{{label | sqLabel:public}}</span>\n            <i class=\"sq-label-remove fas fa-times-circle clickable\" (click)=\"remove($index)\" *ngIf=\"canRemove()\"\n                title=\"{{(public ? 'msg#labels.removePublicLabelTitle' : 'msg#labels.removePrivateLabelTitle') | sqMessage}}\">\n            </i>\n        </div>\n    </span>\n</div>\n","import { Component, Input, OnChanges, HostBinding } from \"@angular/core\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { Record } from \"@sinequa/core/web-services\";\nimport { LabelsService } from \"./labels.service\";\nimport { AppService } from \"@sinequa/core/app-utils\";\n\n@Component({\n    selector: \"sq-labels\",\n    // We need the two spans to get whitespace between each label\n    // change size by adding h1-6 class to .sq-label div (default is h5)\n    templateUrl: \"./labels.component.html\",\n    styles: [\n        `\n            .sq-labels-public {\n                background-color: #4fc3f7;\n            }\n            .sq-labels-private {\n                background-color: #7283a7;\n            }\n            .sq-label-remove {\n                margin-left: 3px;\n            }\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class Labels implements OnChanges {\n    @Input() record: Record;\n    @Input() public: boolean;\n    @Input() enableDelete: boolean = false; /** Display the delete button in the label tag */\n\n    protected labelsField: string;\n    showLabels: boolean;\n    labels: string[];\n\n    @HostBinding(\"class\") hostClasses;\n\n    constructor(\n        private appService: AppService,\n        private labelsService: LabelsService\n    ) {}\n\n    ngOnChanges() {\n        const field = this.public\n            ? this.labelsService.publicLabelsField\n            : this.labelsService.privateLabelsField;\n        this.labelsField = this.appService.resolveColumnAlias(field);\n        this.showLabels = !!this.labelsField;\n        this.makeLabels();\n    }\n\n    private makeLabels() {\n        if (!this.showLabels) {\n            this.labels = [];\n            return;\n        }\n        const labels = this.record[this.labelsField];\n        if (Utils.isArray(labels)) {\n            this.labels = this.labelsService.sort(labels.slice(), this.public);\n        } else {\n            this.labels = [];\n        }\n    }\n\n    select(label: string) {\n        if (!this.public) {\n            label = <string>this.labelsService.removePrivatePrefix(label);\n        }\n        this.labelsService.selectLabels([label], this.public);\n    }\n\n    remove(index: number) {\n        if (this.canRemove()) {\n            let label = this.labels[index];\n            if (!this.public) {\n                label = <string>this.labelsService.removePrivatePrefix(label);\n            }\n            this.labelsService.removeLabels(\n                [label],\n                [this.record.id],\n                this.public\n            );\n        }\n    }\n\n    canRemove(): boolean {\n        return this.public\n            ? this.enableDelete &&\n                this.labelsService.allowPublicLabelsManagement &&\n                this.labelsService.userLabelsRights &&\n                this.labelsService.userLabelsRights.canManagePublicLabels\n            : this.enableDelete && true;\n    }\n}\n","<span *ngIf=\"caption\" class=\"sq-text\">{{caption | sqMessage}}</span>\n<sq-labels [record]=\"record\" [public]=\"public\"></sq-labels>\n","import {Component, Input} from \"@angular/core\";\nimport {Record} from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-result-labels\",\n    templateUrl: \"./result-labels.component.html\"\n})\nexport class ResultLabels {\n    @Input() record: Record;\n    @Input() caption: string;\n    @Input() public: boolean;\n}\n","import {\n    Directive,\n    ElementRef,\n    Input,\n    EventEmitter,\n    SimpleChanges,\n    Output,\n    HostListener,\n    OnInit,\n    OnChanges,\n} from \"@angular/core\";\nimport {\n    Autocomplete,\n    SuggestService,\n    AutocompleteState,\n    AutocompleteItem,\n} from \"@sinequa/components/autocomplete\";\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { UIService } from \"@sinequa/components/utils\";\nimport { LabelsWebService, Labels } from \"@sinequa/core/web-services\";\nimport { Keys } from \"@sinequa/core/base\";\nimport { LabelsService } from \"./labels.service\";\n\n@Directive({\n    selector: \"[sqAutocompleteLabels]\",\n})\nexport class LabelsAutocomplete extends Autocomplete implements OnInit, OnChanges {\n    /** Event synchronizing the list of selected labels in the parent component */\n    @Output() itemsUpdate = new EventEmitter<AutocompleteItem[]>();\n\n    /** Whether the labels are public or not */\n    @Input() public: boolean;\n\n    /** Enable adding new labels in labelsItems or not */\n    @Input() allowNewLabels: boolean = false;\n\n    /** Define the right of adding new labels in labelsItems or not */\n    @Input() allowManagePublicLabels: boolean = false;\n\n    /** Stores the selected labels items selected via Tab */\n    @Input() labelsItems: AutocompleteItem[] = [];\n\n    /** Stores the suggestions retrieved by th server in order to perform checks on key.enter events */\n    private _suggestions: string[] = [];\n\n    constructor(\n        elementRef: ElementRef,\n        suggestService: SuggestService,\n        appService: AppService,\n        uiService: UIService,\n        private labelsWebService: LabelsWebService,\n        private labelsService: LabelsService\n    ) {\n        super(elementRef, suggestService, appService, uiService);\n    }\n\n    /**\n     * The ngOnInit() method from the original directive is overriden\n     * On initialization, we listen to the autocomplete component for\n     * selection events\n     */\n    ngOnInit() {\n        this._dropdownSubscription = this.dropdown.clicked.subscribe((item) => {\n            this.select(item, true); // An item was selected from the autocomplete => take the value\n        });\n        this.start();\n    }\n\n    /**\n     * If the inputs changes state, react accordingly\n     * @param changes\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"labelsItems\"]) {\n            this.updatePlaceholder();\n        }\n\n        // Override start() by using init() instead, so that no double queries are generated and autocomplete dropdown is shown only on focus\n        if (changes[\"off\"] && !this.off) {\n            this.init();\n        }\n\n        // If labels category changes, we must remove the selected labels items and reinitialize the autocomplete\n        if (changes[\"public\"] && !changes[\"public\"].firstChange) {\n            const newInitLabels = [...changes[\"labelsItems\"].currentValue];\n            this.inputElement.blur();\n            /** Reset the input Value*/\n            this.setInputValue(\"\");\n            /** initialize the input needed specially for labels edit cases */\n            this.updatePlaceholder();\n            this.itemsUpdate.next(newInitLabels);\n        }\n    }\n\n    /**\n     * The getSuggests() method from the original directive is overriden to\n     * use the labelsService rather than suggest service.\n     */\n    protected getSuggests() {\n        const value = this.getInputValue();\n\n        if (value) {\n            // parse\n            const labels = value.split(\";\");\n\n            // find label at caret location\n            const position = this.getInputPosition();\n            let length = 0;\n            let val:\n                | { value: string, start: number, length: number }\n                | undefined;\n            for (const label of labels) {\n                if (position >= length && position <= length + label.length) {\n                    val = {\n                        value: label,\n                        start: length,\n                        length: label.length,\n                    };\n                    break;\n                }\n                length += label.length + 1;\n            }\n\n            // Get suggestions from web service\n            if (val) {\n                this._getLabelsSuggestions(val.value);\n            }\n        } else {\n            if (!!this.labelsService.labelsAutoSuggestWildcard) {\n                this._getLabelsSuggestions(\n                    this.labelsService.labelsAutoSuggestWildcard\n                );\n            } else {\n                this.start();\n            }\n        }\n    }\n\n    private _getLabelsSuggestions(val: string) {\n        this.labelsWebService.list(val, this.public).subscribe(\n            (labels: Labels) => {\n                if (\n                    this.getState() === AutocompleteState.ACTIVE ||\n                    this.getState() === AutocompleteState.OPENED\n                ) {\n                    /** Eliminate suggestions that are already selected */\n                    labels.labels = labels.labels.filter(\n                        (label) =>\n                            !this.labelsItems.find(\n                                (item) => item.display === label\n                            )\n                    );\n\n                    /** update the local list of suggestions */\n                    this._suggestions = labels.labels;\n\n                    /** limit the suggestions to be displayed to 10  */\n                    labels.labels = labels.labels.slice(0, 10);\n\n                    this.dropdown.update(\n                        true,\n                        labels.labels.map((label) => {\n                            return {\n                                display: label,\n                                category: \"\",\n                            };\n                        })\n                    );\n                }\n            },\n            () => {\n                this.dropdown.update(false);\n            },\n            () => {\n                if (\n                    this.dropdown.hasItems &&\n                    this.getState() === AutocompleteState.ACTIVE\n                ) {\n                    this.open(); // Switch from ACTIVE to OPENED (if not already)\n                } else if (\n                    !this.dropdown.hasItems &&\n                    this.getState() === AutocompleteState.OPENED\n                ) {\n                    // No data\n                    this.active(); // Switch from OPENED to ACTIVE (if not already)\n                }\n            }\n        );\n    }\n\n    /**\n     * The setAutocompleteItem() method from the original directive is overriden to\n     * Sets the content of the <input> based on the given\n     * Autocomplete Item.\n     * @returns false since labels items don't need to be searched\n     */\n    protected setAutocompleteItem(item: AutocompleteItem): boolean {\n        if (item) {\n            // Store the autocomplete items that will be used to create a selection\n            this.labelsItems.push(item);\n            this.updatePlaceholder();\n            this.itemsUpdate.next(this.labelsItems);\n            this.setInputValue(\"\");\n        }\n        return false;\n    }\n\n    /**\n     * The startOrActive() method from the original directive is overriden to\n     * immediately switch to ACTIVE if it is not the case\n     */\n    protected startOrActive(): void {\n        if (\n            this.getState() !== AutocompleteState.ACTIVE &&\n            this.getState() !== AutocompleteState.OPENED\n        ) {\n            // Avoid flickering\n            this.start();\n            this.active();\n        }\n    }\n\n    /**\n     * Listen to user's keyboard actions in the <input>, in order to navigate\n     * and select the autocomplete suggestions.\n     * Overrides the parent keydown method, adds the management of the backspace key\n     * to remove labels items, enhance the enter key to support adding new labels.\n     * @param event the keyboard\n     */\n    keydown(event: KeyboardEvent) {\n        const keydown = super.keydown(event);\n\n        if (keydown === undefined) {\n            //We can remove selections by typing <backspace> when the input is empty\n            if (event.keyCode === Keys.backspace) {\n                if (this.getInputValue() === \"\") {\n                    this.labelsItems.pop();\n                    this.updatePlaceholder();\n                    this.itemsUpdate.next(this.labelsItems);\n                }\n            }\n            /** Allow the selection one of new labels that not exists in the list */\n            if (event.keyCode === Keys.enter) {\n                this._manageSetAutocompleteItem();\n            }\n        }\n        return keydown;\n    }\n\n    /**\n     * Listens to focus events on the <input> host and overrides the parent focus events in order to launch the autocomplete\n     * If empty input :\n     * - display top relevent labels if the auto-suggest wildcard is configured\n     * - restart the autocomplete if no auto-suggest wildcard is found\n     * If not empty input :\n     * retrieve suggestions based on this input text\n     */\n    @HostListener(\"focus\") focus() {\n        this.start();\n        this.active();\n    }\n\n    /**\n     * Listens to blur events (out of focus) on the <input> host and overrides the parent blur events\n     */\n    @HostListener(\"blur\", [\"$event\"]) blur(event: FocusEvent) {\n        this._manageSetAutocompleteItem();\n        this.init();\n    }\n\n    /**\n     * Overrides the parent inputChanged method, so that it is possible to reinitialize the autocomplete\n     * @param event\n     */\n    @HostListener(\"input\", [\"$event\"]) inputChanged(event: Event) {\n        switch (this.getState()) {\n            case AutocompleteState.OPENED:\n                this.suggest(); // Just request more data, but no state change\n                break;\n            case AutocompleteState.START:\n            case AutocompleteState.ACTIVE:\n                this.active(); // get more data, and change state if not already ACTIVE\n                break;\n            case AutocompleteState.SELECTED:\n                this.start(); // The model changed because we selected a value ==> we restart in case the user keeps typing\n                this.active();\n                break;\n            case AutocompleteState.INIT:\n                break;\n        }\n    }\n\n    /**\n     * Updates the <input>'s placeholder to avoid displaying something\n     * when there are labelsItems displayed to the left.\n     */\n    updatePlaceholder() {\n        this._placeholder = this.labelsItems.length > 0 ? \"\" : this.placeholder;\n    }\n\n    private _manageSetAutocompleteItem(): void {\n        /** Always consider if there is text in the <input> and that it is not yet added in the labelsItems  */\n        if (!!this.getInputValue() && this.getInputValue() !== \"\") {\n            if (this.allowNewLabels) {\n                /** When it is an add Labels action ==> check the privilege to create new label */\n                if (\n                    !this.public ||\n                    (this.public && this.allowManagePublicLabels)\n                ) {\n                    this.setAutocompleteItem({\n                        display: this.getInputValue(),\n                        category: \"\",\n                    });\n                }\n            } else {\n                /** For all other actions on the labels, check if the typed text equals an existing label in the _suggestions  */\n                if (this._suggestions.indexOf(this.getInputValue()) > -1) {\n                    this.setAutocompleteItem({\n                        display: this.getInputValue(),\n                        category: \"\",\n                    });\n                }\n            }\n        }\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsModalModule} from \"@sinequa/components/modal\";\n\nimport {BsAutocompleteModule} from \"@sinequa/components/autocomplete\";\n\nimport {LabelPipe} from \"./label.pipe\";\nimport {Labels} from \"./labels.component\";\nimport {ResultLabels} from \"./result-labels.component\";\nimport {LabelsAutocomplete} from \"./labels-autocomplete.directive\";\n\n@NgModule({\n    imports: [\n        FormsModule, ReactiveFormsModule,\n        CommonModule,\n\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsModalModule,\n        BsAutocompleteModule,\n    ],\n    declarations: [\n        LabelPipe, Labels, ResultLabels, LabelsAutocomplete\n    ],\n    exports: [\n        LabelPipe, Labels, ResultLabels, LabelsAutocomplete\n    ],\n})\nexport class LabelsModule {\n}\n","<form name=\"labelsForm\" class=\"d-inline\">\n    <section class=\"sq-dropdown-form\">\n        <div class=\"form-control\">\n            <span\n                *ngFor=\"let item of labelsItems\"\n                class=\"badge badge-pill badge-info align-self-center\"\n                [ngClass]=\"{'label-public': public, 'label-private': !public}\">\n                {{ item.display }}\n                <span class=\"fas fa-times-circle clickable\" (click)=\"removeItem(item)\"></span>\n            </span>\n            <input type=\"text\"\n                class=\"input-autocomplete flex-grow-1\"\n                name=\"labelName\"\n                spellcheck=\"false\"\n                autocomplete=\"off\"\n                sqAutocompleteLabels\n                [public]=\"public\"\n                [placeholder]=\"'msg#labels.selectLabel' | sqMessage\"\n                [dropdown]=\"dropdown\"\n                [allowNewLabels]=\"allowNewLabels\"\n                [allowManagePublicLabels]=\"allowManagePublicLabels\"\n                (keydown)=\"keydown($event)\"\n                (keypress)=\"keypress($event)\"\n                (itemsUpdate)=\"onLabelsItemsChanged($event)\"\n                [disabled]=\"disableAutocomplete\"\n                [off]=\"disableAutocomplete\"\n                [class.disabled]=\"disableAutocomplete\"\n                [labelsItems]=\"labelsItems\">\n        </div>\n        <sq-autocomplete-list #dropdown>\n            <ng-template #itemTpl let-item>\n                <div class=\"autocomplete-item p-2\">{{item.display}}\n                </div>\n            </ng-template>\n        </sq-autocomplete-list>\n    </section>\n</form>\n\n\n","import {\n    Component,\n    ElementRef,\n    EventEmitter,\n    Output,\n    Input,\n    OnChanges,\n    SimpleChanges,\n} from \"@angular/core\";\nimport { Keys } from \"@sinequa/core/base\";\nimport { AutocompleteItem } from \"@sinequa/components/autocomplete\";\n\n/**\n * Component containing a form and autocomplete to search\n * through the list labels according to a specific type (public/private) and select one(s) of them\n *\n * The component can be used as custom component in the Action\n * menu's modals.\n */\n\n@Component({\n    selector: \"sq-labels-autocomplete\",\n    templateUrl: \"./labels-autocomplete.component.html\",\n    styles: [\n        `\n            .sq-dropdown-form {\n                min-width: 13rem;\n                display: inline;\n            }\n            .disabled {\n                cursor: not-allowed;\n            }\n            :host ::ng-deep .sq-autocomplete-list {\n                width: 50% !important;\n            }\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n            .label-public {\n                background-color: #4fc3f7;\n                margin: 2px;\n            }\n            .label-private {\n                background-color: #7283a7;\n                margin: 2px;\n            }\n\n            :host div {\n                width: 100%;\n                display: flex;\n                flex-wrap: wrap;\n                align-items: center;\n                height: unset !important;\n            }\n            :host input {\n                border: none;\n                flex-grow: 1;\n                flex-basis: 100px;\n                min-width: 100px;\n            }\n            :host input:focus {\n                outline: none;\n            }\n        `,\n    ],\n})\nexport class BsLabelsAutocompleteComponent implements OnChanges {\n    /** Event synchronizing the list of selected labels and label's type in the parent component */\n    @Output() labelsUpdate = new EventEmitter<string[]>();\n\n    @Input() public: boolean; /** Whether labels are public/private */\n    @Input() disableAutocomplete: boolean = false /** Whether the autocomplete input is disabled or not */;\n    @Input() allowNewLabels: boolean; /** Whether enable adding new labels or not */\n    @Input() allowManagePublicLabels: boolean; /** Define the right of adding new labels */\n    @Input() initLabels: string[] = []; /** Initial labels to be displayed in the labelsAutocomplete input*/\n\n    labelsItems: AutocompleteItem[] = []; /** List of assigned labels to selected record(s) */\n\n    constructor(private elementRef: ElementRef) {}\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.public) {\n            this.labelsItems = [];\n        }\n        if (changes.initLabels) {\n            this.labelsItems = this.initLabels.map((label) => {\n                return {\n                    display: label,\n                    category: \"\",\n                };\n            });\n        }\n    }\n\n    removeItem(item: AutocompleteItem) {\n        this.labelsItems.splice(this.labelsItems.indexOf(item), 1);\n        this.labelsItems = [\n            ...this.labelsItems,\n        ]; /** Need to programmatically update this.labelsItems object in order to fire ngOnChanges hook in sqAutocompleteLabels */\n        this.labelsUpdate.next(this.labelsItems.map((item) => item.display));\n    }\n\n    onLabelsItemsChanged(labelsItems: AutocompleteItem[]) {\n        this.labelsItems = labelsItems; /** Need to Programmatically update this.labelsItems to catch updates happening in the sqAutocompleteLabels  */\n        this.labelsUpdate.next(labelsItems.map((item) => item.display));\n    }\n\n    private getDropdownItem(): HTMLElement | null {\n        if (this.elementRef) {\n            let current: HTMLElement | null = this.elementRef\n                .nativeElement as HTMLElement;\n            while (current && !current.classList.contains(\"dropdown-item\")) {\n                current = current.parentElement;\n            }\n            return current;\n        }\n        return null;\n    }\n\n    keydown(event: KeyboardEvent) {\n        // Intercept tab and set focus to surrounding dropdown-item\n        if (event.keyCode === Keys.tab) {\n            const dropdownItem = this.getDropdownItem();\n            if (dropdownItem) {\n                dropdownItem.focus();\n                event.preventDefault();\n                return false;\n            }\n        }\n        return undefined;\n    }\n\n    keypress(event: KeyboardEvent) {\n        if (event.keyCode === Keys.enter) {\n            // Stop click event firing on surrounding anchor (Firefox)\n            event.preventDefault();\n            return false;\n        }\n        return undefined;\n    }\n}\n","<form name=\"renameLabel\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#renameLabel.title'\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert alert-danger\" role=\"alert\">\n                {{'msg#renameLabel.alertText' | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n            <b><label for=\"label\">{{'msg#renameLabel.oldLabels' | sqMessage}}</label></b>\n            <sq-labels-autocomplete\n                (labelsUpdate)=\"onLabelsChanged($event)\"\n                [public]=\"model.properties.public\"\n                [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                [allowNewLabels]=\"model.properties.allowNewLabels\"\n                [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n            </sq-labels-autocomplete>\n            <b><label for=\"label\">{{'msg#renameLabel.newLabel' | sqMessage}}</label></b>\n            <input\n                [sqValidation]=\"form\"\n                type=\"text\"\n                class=\"form-control\"\n                id=\"label\"\n                formControlName=\"label\"\n                autocomplete=\"off\"\n                spellcheck=\"off\"\n                placeholder=\"{{'msg#renameLabel.newLabel' | sqMessage}}\">\n        </div>\n    </sq-modal>\n</form>\n","import {\n    Component,\n    OnInit,\n    OnDestroy,\n    Inject,\n    ChangeDetectorRef,\n} from \"@angular/core\";\nimport {\n    FormBuilder,\n    FormGroup,\n    FormControl,\n    Validators,\n} from \"@angular/forms\";\nimport { Subscription } from \"rxjs\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { ModalProperties, LabelsService } from \"../../labels.service\";\n\n@Component({\n    selector: \"sq-rename-label\",\n    templateUrl: \"./rename-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsRenameLabel implements OnInit, OnDestroy {\n    public labelControl: FormControl;\n    public form: FormGroup;\n    public formChanges: Subscription;\n    public buttons: ModalButton[];\n    public isProcessing: boolean = false;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            oldValues: string[],\n            newValue: string,\n            properties: ModalProperties\n        },\n        private formBuilder: FormBuilder,\n        private labelsService: LabelsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        this.labelControl = new FormControl(\n            this.model.newValue,\n            Validators.required\n        );\n        this.form = this.formBuilder.group({\n            label: this.labelControl,\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges, () => {\n            this.model.newValue = this.labelControl.value;\n        });\n\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#renameLabel.btnRename\",\n                primary: true,\n                validation: this.form,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: () => {\n                    const observable = this.labelsService.renameLabels(\n                        this.model.oldValues,\n                        this.model.newValue,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                },\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n    }\n\n    onLabelsChanged(values: string[]) {\n        this.model.oldValues = values;\n    }\n}\n","<li *ngIf=\"!!menu && !menu.hidden\" class=\"nav-item dropdown\" \n    [sq-action-item]=\"{item: menu, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n    [collapseBreakpoint]=\"collapseBreakpoint\"\n></li>","import {\n    Component,\n    OnInit,\n    Input,\n    OnChanges,\n    SimpleChanges,\n    OnDestroy,\n} from \"@angular/core\";\nimport { Action } from \"@sinequa/components/action\";\nimport { LoginService } from \"@sinequa/core/login\";\nimport { LabelsService } from \"../../labels.service\";\nimport { Results } from \"@sinequa/core/web-services\";\nimport { Subscription } from \"rxjs\";\n\n@Component({\n    selector: \"sq-labels-menu\",\n    templateUrl: \"./labels-menu.component.html\",\n})\nexport class BsLabelsMenuComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() results: Results;\n    @Input() icon: string = \"fas fa-tags\";\n    @Input() autoAdjust: boolean = true;\n    @Input() autoAdjustBreakpoint: string = \"xl\";\n    @Input() collapseBreakpoint: string = \"sm\";\n    @Input() size: string;\n\n    menu: Action | undefined;\n\n    // Labels  actions\n    renameAction: Action;\n    deleteAction: Action;\n    bulkAddAction: Action;\n    bulkDeleteAction: Action;\n\n    private _loginServiceSubscription: Subscription;\n\n    constructor(\n        public loginService: LoginService,\n        public labelsService: LabelsService\n    ) {\n        this.renameAction = new Action({\n            text: \"msg#renameLabel.title\",\n            title: \"msg#renameLabel.title\",\n            action: () => {\n                this.labelsService.renameLabelModal();\n            },\n        });\n\n        this.deleteAction = new Action({\n            text: \"msg#deleteLabel.title\",\n            title: \"msg#deleteLabel.title\",\n            action: () => {\n                this.labelsService.deleteLabelModal();\n            },\n        });\n\n        this.bulkAddAction = new Action({\n            text: \"msg#bulkAddLabel.title\",\n            title: \"msg#bulkAddLabel.title\",\n            action: () => {\n                this.labelsService.bulkAddLabelModal();\n            },\n        });\n\n        this.bulkDeleteAction = new Action({\n            text: \"msg#bulkRemoveLabel.title\",\n            title: \"msg#bulkRemoveLabel.title\",\n            action: () => {\n                this.labelsService.bulkRemoveLabelModal();\n            },\n        });\n    }\n\n    ngOnInit() {\n        this._loginServiceSubscription = this.loginService.events.subscribe(\n            (event) => {\n                if (event.type === \"session-changed\") {\n                    this.updateMenu();\n                }\n            }\n        );\n    }\n\n    ngOnDestroy() {\n        if (this._loginServiceSubscription) {\n            this._loginServiceSubscription.unsubscribe();\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.results) {\n            this.updateMenu();\n        }\n    }\n\n    updateMenu() {\n        if (!this.loginService.complete) {\n            this.menu = undefined;\n            return;\n        }\n\n        if (\n            !this.labelsService.publicLabelsField &&\n            !this.labelsService.privateLabelsField\n        ) {\n            this.menu = undefined;\n            return;\n        }\n\n        const labelsActions: Action[] = [this.renameAction, this.deleteAction];\n\n        /** Allow Bulk actions only if there are some results */\n        if (!!this.results && !!this.results.records) {\n            labelsActions.push(this.bulkAddAction);\n            labelsActions.push(this.bulkDeleteAction);\n        }\n\n        this.menu = new Action({\n            icon: this.icon,\n            text: \"msg#labels.labels\",\n            children: labelsActions,\n        });\n    }\n}\n","<form name=\"deleteLabel\" novalidate>\n    <sq-modal [title]=\"title\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert\" [ngClass]=\"{'alert-danger': model.properties.action === 3, 'alert-warning': model.properties.action === 5}\" role=\"alert\">\n                {{alert | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n            <b><label for=\"label\">{{'msg#labels.labels' | sqMessage}}</label></b>\n            <sq-labels-autocomplete\n                (labelsUpdate)=\"onLabelsChanged($event)\"\n                [public]=\"model.properties.public\"\n                [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                [allowNewLabels]=\"model.properties.allowNewLabels\"\n                [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n            </sq-labels-autocomplete>\n        </div>\n    </sq-modal>\n</form>\n","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport {\n    UpdateLabelsAction,\n    ModalProperties,\n    LabelsService,\n} from \"../../labels.service\";\nimport { Utils } from \"@sinequa/core/base\";\n\n@Component({\n    selector: \"sq-delete-label\",\n    templateUrl: \"./delete-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsDeleteLabel implements OnInit {\n    public buttons: ModalButton[];\n    public title: string;\n    public alert: string;\n    public btnText: string;\n    public isProcessing: boolean = false;\n\n    private _action: () => void;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            values: string[],\n            properties: ModalProperties\n        },\n        private labelsService: LabelsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        switch (this.model.properties.action) {\n            case UpdateLabelsAction.delete:\n                this.title = \"msg#deleteLabel.title\";\n                this.btnText = \"msg#deleteLabel.btnDelete\";\n                this.alert = \"msg#deleteLabel.alertText\";\n                this._action = () => {\n                    const observable = this.labelsService.deleteLabels(\n                        this.model.values,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                };\n                break;\n            case UpdateLabelsAction.bulkRemove:\n                this.title = \"msg#bulkRemoveLabel.title\";\n                this.btnText = \"msg#bulkRemoveLabel.btnBulkRemove\";\n                this.alert = \"msg#bulkRemoveLabel.alertText\";\n                this._action = () => {\n                    const observable = this.labelsService.bulkRemoveLabels(\n                        this.model.values,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                };\n                break;\n            default:\n                this.title = \"\";\n                this.btnText = \"\";\n                this.alert = \"\";\n                break;\n        }\n\n        this.buttons = [\n            new ModalButton({\n                text: this.btnText,\n                primary: true,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: this._action,\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n    }\n\n    onLabelsChanged(values: string[]) {\n        this.model.values = values;\n    }\n}\n","<form name=\"addLabel\" novalidate>\n    <sq-modal [title]=\"'msg#bulkAddLabel.title'\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert alert-warning\" role=\"alert\">\n                {{'msg#bulkAddLabel.alertText' | sqMessage}}\n            </div>\n            <div *ngIf=\"model.properties.allowManagePublicLabels || !model.properties.public \" class=\"alert alert-info\" role=\"alert\">\n                {{'msg#bulkAddLabel.infoText' | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n            <b><label for=\"label\">{{'msg#labels.labels' | sqMessage}}</label></b>\n            <sq-labels-autocomplete\n                (labelsUpdate)=\"onLabelsChanged($event)\"\n                [public]=\"model.properties.public\"\n                [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                [allowNewLabels]=\"model.properties.allowNewLabels\"\n                [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n            </sq-labels-autocomplete>\n        </div>\n    </sq-modal>\n</form>\n","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport { ModalProperties, LabelsService } from \"../../labels.service\";\nimport { Utils } from \"@sinequa/core/base\";\n\n@Component({\n    selector: \"sq-add-label\",\n    templateUrl: \"./add-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsAddLabel implements OnInit {\n    public buttons: ModalButton[];\n    public isProcessing: boolean = false;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            values: string[],\n            properties: ModalProperties\n        },\n        private labelsService: LabelsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#bulkAddLabel.btnBulkAdd\",\n                primary: true,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: () => {\n                    const observable = this.labelsService.bulkAddLabels(\n                        this.model.values,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                },\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n    }\n\n    onLabelsChanged(values: string[]) {\n        this.model.values = values;\n    }\n}\n","<form name=\"editLabel\" novalidate>\n    <sq-modal [title]=\"'msg#editLabel.title'\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert alert-warning\" role=\"alert\">\n                {{'msg#editLabel.alertText' | sqMessage}}\n            </div>\n            <div *ngIf=\"model.properties.allowManagePublicLabels || !model.properties.public \" class=\"alert alert-info\" role=\"alert\">\n                {{'msg#editLabel.infoText' | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n\n            <section *ngIf=\"record\">\n                <b><label for=\"label\">{{'msg#labels.labels' | sqMessage}}</label></b>\n                <sq-labels-autocomplete\n                    (labelsUpdate)=\"onLabelsChanged($event)\"\n                    [public]=\"model.properties.public\"\n                    [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                    [allowNewLabels]=\"model.properties.allowNewLabels\"\n                    [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\"\n                    [initLabels]=\"initialLabels\">\n                </sq-labels-autocomplete>\n            </section>\n\n            <section *ngIf=\"!record\">\n                <b><label for=\"label\">{{'msg#editLabel.labelsToBeAdded' | sqMessage}}</label></b>\n                <sq-labels-autocomplete\n                    (labelsUpdate)=\"onLabelsToBeAddedChanged($event)\"\n                    [public]=\"model.properties.public\"\n                    [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                    [allowNewLabels]=\"model.properties.allowNewLabels\"\n                    [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n                </sq-labels-autocomplete>\n                <b><label for=\"label\">{{'msg#editLabel.labelsToBeRemoved' | sqMessage}}</label></b>\n                <sq-labels-autocomplete\n                    (labelsUpdate)=\"onLabelsToBeRemovedChanged($event)\"\n                    [public]=\"model.properties.public\"\n                    [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                    [allowNewLabels]=\"model.properties.allowNewLabels\"\n                    [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n                </sq-labels-autocomplete>\n            </section>\n\n        </div>\n    </sq-modal>\n</form>\n","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport { ModalProperties, LabelsService } from \"../../labels.service\";\nimport { SelectionService } from \"@sinequa/components/selection\";\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { Record } from \"@sinequa/core/web-services\";\nimport { SearchService } from \"@sinequa/components/search\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { NotificationsService } from \"@sinequa/core/notification\";\n\n@Component({\n    selector: \"sq-edit-label\",\n    templateUrl: \"./edit-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsEditLabel implements OnInit {\n    public selectedRecordsIds: string[];\n    public buttons: ModalButton[];\n    /** Initial labels list assigned to a record */\n    public initialLabels: string[] = [];\n    public record: Record | undefined;\n    public isProcessing: boolean = false;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            valuesToBeAdded: string[],\n            valuesToBeRemoved: string[],\n            properties: ModalProperties\n        },\n        private appService: AppService,\n        private selectionService: SelectionService,\n        private labelsService: LabelsService,\n        private searchService: SearchService,\n        private notificationService: NotificationsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        this.selectedRecordsIds = !!this.selectionService.getSelectedIds()\n            ? this.selectionService.getSelectedIds()\n            : [];\n        if (this.selectedRecordsIds.length === 1) {\n            this.record = this.searchService.getRecordFromId(\n                this.selectedRecordsIds[0]\n            );\n            this.initialLabels = this._getInitialRecordLabels();\n        }\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#editLabel.btnEdit\",\n                primary: true,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: () => {\n                    const observable = this.labelsService.addLabels(\n                        this.model.valuesToBeAdded,\n                        this.selectionService.getSelectedIds(),\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.notificationService.error(\n                                    \"msg#editLabel.errorFeedback\"\n                                );\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.labelsService\n                                    .removeLabels(\n                                        this.model.valuesToBeRemoved,\n                                        this.selectionService.getSelectedIds(),\n                                        this.model.properties.public\n                                    )\n                                    .subscribe(\n                                        () => {},\n                                        (error) => {\n                                            this.notificationService.error(\n                                                \"msg#editLabel.errorFeedback\"\n                                            );\n                                            this.modalRef.close(error);\n                                        },\n                                        () => {\n                                            this.isProcessing = false;\n                                            this.modalRef.close(ModalResult.OK);\n                                            this.notificationService.success(\n                                                \"msg#editLabel.successFeedback\"\n                                            );\n                                            this.searchService.search(); /** Update the display immediately in the components and facets*/\n                                        }\n                                    );\n                            }\n                        );\n                    }\n                },\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n        this.model.valuesToBeRemoved = [];\n        this.model.valuesToBeAdded = [];\n        if (this.selectedRecordsIds.length === 1) {\n            this.initialLabels = this._getInitialRecordLabels(); /** update initial labels */\n        }\n    }\n\n    onLabelsChanged(values: string[]) {\n        if (!!this.initialLabels) {\n            this.model.valuesToBeAdded = values.filter(\n                (value) => !this.initialLabels.find((label) => label === value)\n            );\n            this.model.valuesToBeRemoved = this.initialLabels.filter(\n                (label) => !values.find((value) => value === label)\n            );\n        } else {\n            this.model.valuesToBeAdded = values;\n            this.model.valuesToBeRemoved = [];\n        }\n    }\n\n    onLabelsToBeAddedChanged(values: string[]) {\n        this.model.valuesToBeAdded = values;\n    }\n\n    onLabelsToBeRemovedChanged(values: string[]) {\n        this.model.valuesToBeRemoved = values;\n    }\n\n    /**\n     * Return the list of labels already assigned to the selected record\n     */\n    private _getInitialRecordLabels(): string[] {\n        if (!!this.record) {\n            const field = this.model.properties.public\n                ? this.labelsService.publicLabelsField\n                : this.labelsService.privateLabelsField;\n            const labelsField = this.appService.resolveColumnAlias(field);\n            if (!this.model.properties.public) {\n                return !!this.record[labelsField]\n                    ? (this.labelsService.removePrivatePrefix(\n                          this.record[labelsField]\n                      ) as string[])\n                    : ([] as string[]);\n            }\n            return this.record[labelsField] || [];\n        } else {\n            return [];\n        }\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsAutocompleteModule} from \"@sinequa/components/autocomplete\";\nimport {LabelsModule} from \"../labels.module\";\n\nimport {BsRenameLabel} from \"./rename-label/rename-label\";\nimport {BsLabelsMenuComponent} from \"./labels-menu/labels-menu.component\";\n\nimport {LABELS_COMPONENTS, LabelsComponents} from \"../labels.service\";\nimport { BsDeleteLabel } from './delete-label/delete-label';\nimport { BsAddLabel } from './add-label/add-label';\nimport { BsLabelsAutocompleteComponent } from './labels-autocomplete/labels-autocomplete.component';\nimport { BsEditLabel } from './edit-label/edit-label';\n\nexport const defaultLabelComponents: LabelsComponents = {\n    labelsAutocompleteComponent: BsLabelsAutocompleteComponent,\n    renameModal: BsRenameLabel,\n    deleteModal: BsDeleteLabel,\n    addModal: BsAddLabel,\n    editModal: BsEditLabel\n};\n\n@NgModule({\n    imports: [\n        FormsModule, ReactiveFormsModule,\n        CommonModule,\n\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsSelectionModule,\n        BsModalModule,\n        BsAutocompleteModule,\n        BsActionModule,\n        LabelsModule\n    ],\n    declarations: [\n        BsLabelsAutocompleteComponent,\n        BsRenameLabel,\n        BsLabelsMenuComponent,\n        BsDeleteLabel,\n        BsAddLabel,\n        BsEditLabel\n    ],\n    exports: [\n        LabelsModule,\n        BsLabelsAutocompleteComponent,\n        BsRenameLabel,\n        BsLabelsMenuComponent,\n        BsDeleteLabel,\n        BsAddLabel,\n        BsEditLabel\n    ],\n    providers: [\n        {provide: LABELS_COMPONENTS, useValue: defaultLabelComponents},\n    ]\n})\nexport class BsLabelsModule {\n}\n","export default {\n    \"labels\": {\n        \"labels\": \"Labels\",\n        \"publicLabels\": \"Public Labels\",\n        \"privateLabels\": \"Private Labels\",\n        \"public\": \"Public\",\n        \"private\": \"Private\",\n        \"selectLabel\": \"Select label(s)\",\n        \"deleteLabelAreYouSure\": \"Are you sure you want to remove the label: {name}?\",\n        \"bulkAddLabelAreYouSure\": \"Are you sure you want to bulk add the label: {name} to the results of the current query?\",\n        \"bulkRemoveLabelAreYouSure\": \"Are you sure you want to bulk remove the label: {name} to the results of the current query?\",\n        \"addPublicLabelText\": \"+\",\n        \"removePublicLabelText\": \"\",\n        \"addPublicLabelTitle\": \"Add public label\",\n        \"selectPublicLabelTitle\": \"Select public label\",\n        \"removePublicLabelTitle\": \"Remove public label\",\n        \"addPrivateLabelText\": \"+\",\n        \"removePrivateLabelText\": \"\",\n        \"addPrivateLabelTitle\": \"Add private label\",\n        \"selectPrivateLabelTitle\": \"Select private label\",\n        \"removePrivateLabelTitle\": \"Remove private label\"\n    },\n\n    \"renameLabel\": {\n        \"title\": \"Rename Label(s) globally\",\n        \"btnRename\": \"Rename\",\n        \"newLabel\": \"New Label\",\n        \"oldLabels\": \"Old label(s)\",\n        \"alertText\": \"This action renames the label(s) in the index and is irreversible\",\n        \"successFeedback\": \"Label(s) renamed in the index\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"deleteLabel\": {\n        \"title\": \"Delete label(s) globally\",\n        \"btnDelete\": \"Delete\",\n        \"alertText\": \"This action deletes the selected label(s) from the index and is irreversible\",\n        \"successFeedback\": \"Label(s) deleted from the index\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"bulkRemoveLabel\": {\n        \"title\": \"Remove label(s) from the current results\",\n        \"btnBulkRemove\": \"Remove\",\n        \"alertText\": \"This action removes the selected label(s) from all results reported by the engine (not only from the first page)\",\n        \"successFeedback\": \"Label(s) removed from all results reported by the engine\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"bulkAddLabel\": {\n        \"title\": \"Add label(s) to the current results\",\n        \"btnBulkAdd\": \"Add\",\n        \"alertText\": \"This action assigns the selected label(s) to all results reported by the engine (not only to the first page)\",\n        \"infoText\": \"Press 'Enter' to add a new label that does not exist in the suggestions\",\n        \"successFeedback\": \"Label(s) assigned to all results reported by the engine\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"editLabel\": {\n        \"title\": \"Edit the label(s) of the selected result(s)\",\n        \"btnEdit\": \"Save\",\n        \"alertText\": \"This action edits the label(s) of the selected result(s)\",\n        \"infoText\": \"Press 'Enter' to add a new label that does not exist in the suggestions\",\n        \"labelsToBeRemoved\": \"Label(s) to be removed\",\n        \"labelsToBeAdded\": \"Label(s) to be added\",\n        \"successFeedback\": \"Label(s) of the selected result(s) edited\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    }\n\n};\n","export default {\n    \"labels\": {\n        \"labels\": \"Libells\",\n        \"publicLabels\": \"Libells publics\",\n        \"privateLabels\": \"Libells privs\",\n        \"public\": \"Public\",\n        \"private\": \"Priv\",\n        \"selectLabel\": \"Slectionner le(s) libell(s)\",\n        \"deleteLabelAreYouSure\": \"Etes-vous sr de vouloir effacer le libell: {name} ?\",\n        \"bulkAddLabelAreYouSure\": \"Etes-vous sr de vouloir ajouter en lot le libell: {name} aux rsultats de la requte courante ? \",\n        \"bulkRemoveLabelAreYouSure\": \"Etes-vous sr de vouloir enlever en lot le libell: {name} aux rsultats de la requte courante ?\",\n        \"addPublicLabelText\": \"+\",\n        \"removePublicLabelText\": \"\",\n        \"addPublicLabelTitle\": \"Ajouter un libell public\",\n        \"selectPublicLabelTitle\": \"Slectionner le libell public\",\n        \"removePublicLabelTitle\": \"Supprimer le libell public\",\n        \"addPrivateLabelText\": \"+\",\n        \"removePrivateLabelText\": \"\",\n        \"addPrivateLabelTitle\": \"Ajouter un libell priv\",\n        \"selectPrivateLabelTitle\": \"Slectionner le libell priv\",\n        \"removePrivateLabelTitle\": \"Supprimer le libell priv\"\n    },\n\n    \"renameLabel\": {\n        \"title\": \"Renommer le(s) libell(s) globalement\",\n        \"btnRename\": \"Renommer\",\n        \"newLabel\": \"Nouveau Libell\",\n        \"oldLabels\": \"Ancien(s) libell(s)\",\n        \"alertText\": \"Cette action renomme le(s) libell(s) slectionn(s) dans l'index et est irrversible\",\n        \"successFeedback\": \"Libell(s) renomm(s) dans l'index\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requte non aboutie\"\n    },\n\n    \"deleteLabel\": {\n        \"title\": \"Supprimer le(s) libell(s) globalement\",\n        \"btnDelete\": \"Supprimer\",\n        \"alertText\": \"Cette action supprime le(s) libell(s) slectionn(s) de l'index et est irrversible\",\n        \"successFeedback\": \"Libell(s) supprim(s) de l'index\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requte non aboutie\"\n    },\n\n    \"bulkRemoveLabel\": {\n        \"title\": \"Enlever le(s) libell des rsultats courants\",\n        \"btnBulkRemove\": \"Enlever\",\n        \"alertText\": \"Cette action enlve le(s) libell(s) slectionn(s) de tous les rsultats remonts par le moteur (pas seulement de la premire page)\",\n        \"successFeedback\": \"Libell(s) enlev(s) de tous les rsultats remonts par le moteur\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requte non aboutie\"\n    },\n\n    \"bulkAddLabel\": {\n        \"title\": \"Ajouter le(s) libell(s) aux rsultats courants\",\n        \"btnBulkAdd\": \"Ajouter\",\n        \"alertText\": \"Cette action ajoute le(s) libell(s) slectionn(s)  tous les rsultats remonts par le moteur (pas seulement  la premire page)\",\n        \"infoText\": \"Appuyez sur 'Entre' pour ajouter un nouveau libell qui n'existe pas dans les suggestions\",\n        \"successFeedback\": \"Libell(s) ajout(s)  tous les rsultats remonts par le moteur\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requte non aboutie\"\n    },\n\n    \"editLabel\": {\n        \"title\": \"Editer le(s) libell(s) de(s) rsultat(s) slectionn(s)\",\n        \"btnEdit\": \"Sauvegarder\",\n        \"alertText\": \"Cette action dite le(s) libell(s) de(s) rsultat(s) slectionn(s)\",\n        \"infoText\": \"Appuyez sur 'Entre' pour ajouter un nouveau libell qui n'existe pas dans les suggestions\",\n        \"labelsToBeRemoved\": \"Libell(s)  enlever\",\n        \"labelsToBeAdded\": \"Libell(s)  ajouter\",\n        \"successFeedback\": \"Libell(s) de(s) rsultat(s) slectionn(s) dit(s)\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requte non aboutie\"\n    }\n};\n","export default {\n    \"labels\": {\n        \"labels\": \"Etiketten\",\n        \"publicLabels\": \"ffentliche Etiketten\",\n        \"privateLabels\": \"Private Etiketten\",\n        \"public\": \"ffentliche\",\n        \"private\": \"Private\",\n        \"selectLabel\": \"Etikett(en) auswhlen\",\n        \"deleteLabelAreYouSure\": \"Mchten Sie dieses Etikett wirklich lschen: {name}?\",\n        \"bulkAddLabelAreYouSure\": \"Mchten Sie wirklich das Etikett {name} zu allen Ergebnissen der aktuellen Suche hinzufgen?\",\n        \"bulkRemoveLabelAreYouSure\": \"Mchten Sie wirklich das Etikett {name} von allen Ergebnissen der aktuellen Suche entfernen?\",\n        \"addPublicLabelText\": \"+\",\n        \"removePublicLabelText\": \"\",\n        \"addPublicLabelTitle\": \"ffentliches Etikett hinzufgen\",\n        \"selectPublicLabelTitle\": \"ffentliches Etikett auswhlen\",\n        \"removePublicLabelTitle\": \"ffentliches Etikett entfernen\",\n        \"addPrivateLabelText\": \"+\",\n        \"removePrivateLabelText\": \"\",\n        \"addPrivateLabelTitle\": \"Privates Etikett hinzufgen\",\n        \"selectPrivateLabelTitle\": \"Privates Etikett auswhlen\",\n        \"removePrivateLabelTitle\": \"Privates Etikett entfernen\"\n    },\n\n    \"renameLabel\": {\n        \"title\": \"Etikett(en) unbenennen\",\n        \"btnRename\": \"Umbennen\",\n        \"newLabel\": \"Neuen Etikett\",\n        \"oldLabels\": \"Altes Etikett(en)\",\n        \"alertText\": \"Diese Aktion benennt das (die) ausgewhlte(n) Etikett(en) im Index um und ist unwiderruflich\",\n        \"successFeedback\": \"Etikett(en), das (die) im Index umbenannt wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"deleteLabel\": {\n        \"title\": \"Etikett(en) global entfernen\",\n        \"btnDelete\": \"Lschen\",\n        \"alertText\": \"Diese Aktion lscht das (die) ausgewhlte(n) Etikett(en) aus dem Index und ist unwiderruflich\",\n        \"successFeedback\": \"Etikett(en), das (die) aus dem Index gelscht wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"bulkRemoveLabel\": {\n        \"title\": \"Etikett(en) von aktuellen Ergebnissen entfernen\",\n        \"btnBulkRemove\": \"Entfernen\",\n        \"alertText\": \"Diese Aktion lscht das (die) ausgewhlte(n) Etikett(en) aus allen gefundenen Ergebnisse (nicht nur die der ersten Seite)\",\n        \"successFeedback\": \"Etikett(en), das (die) aus allen gefundenen Ergebnissen gelscht wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"bulkAddLabel\": {\n        \"title\": \"Etikett(en) zu aktuellen Ergebnissen hinzufgen\",\n        \"btnBulkAdd\": \"Hinzufgen\",\n        \"alertText\": \"Diese Aktion fgt das (die) ausgewhlte(n) Etikett(en) zu allen gefundenen Ergebnissen (nicht nur denen der ersten Seite) hinzu\",\n        \"infoText\": \"klicken Sie auf 'Enter', um ein neues Etikett, das nicht in den Vorschlgen existiert, hinzuzufgen\",\n        \"successFeedback\": \"Etikett(en), das (die) allen gefundenen Ergebnissen hinzugefgt wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"editLabel\": {\n        \"title\": \"Bearbeiten des (der) Etikett(en) aus dem (den) ausgewhlten Ergebnis(sen)\",\n        \"btnEdit\": \"speichern\",\n        \"alertText\": \"Diese Aktion bearbeitet das (die) Etikett(en) des (der) ausgewhlten Ergebnisse(s)\",\n        \"infoText\": \"klicken Sie auf 'Enter', um ein neues Etikett, das nicht in den Vorschlgen existiert, hinzuzufgen\",\n        \"labelsToBeRemoved\": \"Zu lschende(s) Etikett(en)\",\n        \"labelsToBeAdded\": \"Hinzuzufgende(s) Etikett(en)\",\n        \"successFeedback\": \"Etikett(en), das (die) zu dem (den) ausgewhlten Ergebnis(sen) bearbeit(en)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    }\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enLabels from \"./en\";\nimport _frLabels from \"./fr\";\nimport _deLabels from \"./de\";\n\nconst enLabels = Utils.merge({}, _enLabels, enSearch, enModal);\nconst frLabels = Utils.merge({}, _frLabels, frSearch, frModal);\nconst deLabels = Utils.merge({}, _deLabels, deSearch, deModal);\n\nexport { enLabels, frLabels, deLabels };\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["InjectionToken","Utils","Action","of","Injectable","Inject","AbstractIntlPipe","Pipe","i0.elementStart","i0.listener","i0.elementEnd","i0.propertyInterpolate","i0.text","i0.template","i0.advance","i0.property","i0.textInterpolate","Component","Input","HostBinding","i0.element","EventEmitter","AutocompleteState","Keys","Autocomplete","Directive","Output","HostListener","FormsModule","ReactiveFormsModule","CommonModule","IntlModule","ValidationModule","UtilsModule","BsModalModule","BsAutocompleteModule","NgModule","i0.textInterpolate1","i0.classProp","FormControl","Validators","ModalButton","MODAL_MODEL","BsSelectionModule","BsActionModule","enSearch","enModal","frSearch","frModal","deSearch","deModal"],"mappings":"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"}