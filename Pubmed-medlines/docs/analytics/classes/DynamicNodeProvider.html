<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Analytics</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Analytics</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li>DynamicNodeProvider</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>network/providers/dynamic-node-provider.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>An extension of the RecordsProvider which manages dynamic node types.
Dynamic nodes are nodes that are transformed into record nodes via a
query. The records are fetched from the server dynamic to enrich the
original node.
For example, a simple metadata node with the value &quot;Bill Gates&quot; can be
enriched with the wikipedia page of Bill Gate, which can provide a lot
of structured information about Bill Gates (which can be used, for
example, to attach structural edges to the original Bill Gates node).
Note that the &quot;source node&quot; have to come from different providers, so it is
necessary to listen to these providers and update the data generated by this
provider accordingly.</p>

            </p>

            <p class="comment">
                <h3>Extends</h3>
            </p>
            <p class="comment">
                        <code><a href="../classes/RecordsProvider.html" target="_self" >RecordsProvider</a></code>
            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#name">name</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#name">name</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#activateAction">activateAction</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#active">active</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#context">context</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#dataset">dataset</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#EDGESEPARATOR">EDGESEPARATOR</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#name">name</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#resetAction">resetAction</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#getNodeActions">getNodeActions</a>
                            </li>
                            <li>
                                <a href="#onNodeClicked">onNodeClicked</a>
                            </li>
                            <li>
                                <a href="#getData">getData</a>
                            </li>
                            <li>
                                <a href="#getNodeActions">getNodeActions</a>
                            </li>
                            <li>
                                <a href="#getProviderActions">getProviderActions</a>
                            </li>
                            <li>
                                <a href="#onDatasetsMerged">onDatasetsMerged</a>
                            </li>
                            <li>
                                <a href="#onNodeClicked">onNodeClicked</a>
                            </li>
                            <li>
                                <a href="#getData">getData</a>
                            </li>
                            <li>
                                <a href="#getEdgeActions">getEdgeActions</a>
                            </li>
                            <li>
                                <a href="#getNodeActions">getNodeActions</a>
                            </li>
                            <li>
                                <a href="#getProvider">getProvider</a>
                            </li>
                            <li>
                                <a href="#getProviderActions">getProviderActions</a>
                            </li>
                            <li>
                                <a href="#onDatasetsMerged">onDatasetsMerged</a>
                            </li>
                            <li>
                                <a href="#onDestroy">onDestroy</a>
                            </li>
                            <li>
                                <a href="#onEdgeClicked">onEdgeClicked</a>
                            </li>
                            <li>
                                <a href="#onNodeClicked">onNodeClicked</a>
                            </li>
                            <li>
                                <a href="#onNodesInserted">onNodesInserted</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, nodeType: <a href="../interfaces/DynamicNodeType.html">DynamicNodeType</a>, edgeTypes: StructuralEdgeType[], permanent: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, sourceProviders: <a href="../interfaces/NetworkProvider.html">NetworkProvider[]</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">network/providers/dynamic-node-provider.ts:39</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>name</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>nodeType</td>
                                                  
                                                        <td>
                                                                        <code><a href="../interfaces/DynamicNodeType.html" target="_self" >DynamicNodeType</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>edgeTypes</td>
                                                  
                                                        <td>
                                                                    <code>StructuralEdgeType[]</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>permanent</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>sourceProviders</td>
                                                  
                                                        <td>
                                                                        <code><a href="../interfaces/NetworkProvider.html" target="_self" >NetworkProvider[]</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="name"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            name</b>
                            <a href="#name"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">network/providers/dynamic-node-provider.ts:42</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="name"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            name</b>
                            <a href="#name"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&quot;Documents&quot;</code>
                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/RecordsProvider.html" target="_self" >RecordsProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/RecordsProvider.html#source" target="_self" >RecordsProvider:77</a></code>
</div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="activateAction"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                                <span class="modifier">Readonly</span>
                            activateAction</b>
                            <a href="#activateAction"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Action</code>

                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:21</a></code>
</div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Action to turn the provider on or off </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="active"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            active</b>
                            <a href="#active"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>true</code>
                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:16</a></code>
</div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="context"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            context</b>
                            <a href="#context"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../interfaces/NetworkContext.html" target="_self" >NetworkContext</a></code>

                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:25</a></code>
</div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="dataset"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            dataset</b>
                            <a href="#dataset"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new NetworkDataset()</code>
                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:15</a></code>
</div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="EDGESEPARATOR"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                                <span class="modifier">Readonly</span>
                            EDGESEPARATOR</b>
                            <a href="#EDGESEPARATOR"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&quot;~~~EDGE~~~&quot;</code>
                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:18</a></code>
</div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="name"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            name</b>
                            <a href="#name"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:28</a></code>
</div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="resetAction"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                                <span class="modifier">Readonly</span>
                            resetAction</b>
                            <a href="#resetAction"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Action</code>

                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:23</a></code>
</div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Action to reset the provider </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNodeActions"></a>
                    <span class="name">
                        <b>
                            getNodeActions
                        </b>
                        <a href="#getNodeActions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getNodeActions(node: <a href="../interfaces/RecordNode.html">RecordNode</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="211"
                            class="link-to-prism">network/providers/dynamic-node-provider.ts:211</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Creates an action to process a clicked node, for dynamic node types
with a &quot;manual&quot; trigger.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                                <code><a href="../interfaces/RecordNode.html" target="_self" >RecordNode</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The clicked node</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Action[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onNodeClicked"></a>
                    <span class="name">
                        <b>
                            onNodeClicked
                        </b>
                        <a href="#onNodeClicked"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onNodeClicked(node?: <a href="../interfaces/RecordNode.html">RecordNode</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="199"
                            class="link-to-prism">network/providers/dynamic-node-provider.ts:199</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Process a clicked node, for dynamic node types with an &quot;onclick&quot; trigger</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                                <code><a href="../interfaces/RecordNode.html" target="_self" >RecordNode</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>The clicked node</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getData"></a>
                    <span class="name">
                        <b>
                            getData
                        </b>
                        <a href="#getData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getData(context: <a href="../interfaces/NetworkContext.html">NetworkContext</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/RecordsProvider.html" target="_self" >RecordsProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/RecordsProvider.html#source" target="_self" >RecordsProvider:265</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>context</td>
                                    <td>
                                                <code><a href="../interfaces/NetworkContext.html" target="_self" >NetworkContext</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNodeActions"></a>
                    <span class="name">
                        <b>
                            getNodeActions
                        </b>
                        <a href="#getNodeActions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getNodeActions(node: <a href="../interfaces/Node.html">Node</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/RecordsProvider.html" target="_self" >RecordsProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/RecordsProvider.html#source" target="_self" >RecordsProvider:340</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Creates actions for expanding and/or collapsing a record node that was clicked.
expanding and collapsing will act on the visibility of the structural edges
attached to this node.
Both actions might be displayed at the same time, if the node is in an intermediate
state.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                                <code><a href="../interfaces/Node.html" target="_self" >Node</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Action[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getProviderActions"></a>
                    <span class="name">
                        <b>
                            getProviderActions
                        </b>
                        <a href="#getProviderActions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getProviderActions()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/RecordsProvider.html" target="_self" >RecordsProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/RecordsProvider.html#source" target="_self" >RecordsProvider:328</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>Action[]</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onDatasetsMerged"></a>
                    <span class="name">
                        <b>
                            onDatasetsMerged
                        </b>
                        <a href="#onDatasetsMerged"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onDatasetsMerged(dataset: <a href="../classes/NetworkDataset.html">NetworkDataset</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/RecordsProvider.html" target="_self" >RecordsProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/RecordsProvider.html#source" target="_self" >RecordsProvider:278</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function adjusts the visibility of nodes for the visibility
type &quot;existingnode&quot;, so that nodes with only one neighbor (post-merge)
are collapsed.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dataset</td>
                                    <td>
                                                <code><a href="../classes/NetworkDataset.html" target="_self" >NetworkDataset</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The dataset resulting of the merge of all the datasets</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onNodeClicked"></a>
                    <span class="name">
                        <b>
                            onNodeClicked
                        </b>
                        <a href="#onNodeClicked"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onNodeClicked(node?: <a href="../interfaces/Node.html">Node</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/RecordsProvider.html" target="_self" >RecordsProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/RecordsProvider.html#source" target="_self" >RecordsProvider:305</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Adjust visibility of nodes and edges, for structural edges with
type.trigger = onclick. These nodes will only be shown once their
record node is clicked on.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                                <code><a href="../interfaces/Node.html" target="_self" >Node</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>A node that was clicked</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getData"></a>
                    <span class="name">
                        <b>
                            getData
                        </b>
                        <a href="#getData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getData(context: <a href="../interfaces/NetworkContext.html">NetworkContext</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:155</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>context</td>
                                    <td>
                                                <code><a href="../interfaces/NetworkContext.html" target="_self" >NetworkContext</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getEdgeActions"></a>
                    <span class="name">
                        <b>
                            getEdgeActions
                        </b>
                        <a href="#getEdgeActions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getEdgeActions(edge: <a href="../interfaces/Edge.html">Edge</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:211</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>By default the base provider includes an action to filter the search if a clicked
edge has a &quot;type.field&quot; property and a &quot;fieldValue&quot; (alternatively, an action
is created if the 2 adjacent nodes can be filtered, ie they both have a &quot;field&quot;
property)</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>edge</td>
                                    <td>
                                                <code><a href="../interfaces/Edge.html" target="_self" >Edge</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The clicked edge</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Action[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNodeActions"></a>
                    <span class="name">
                        <b>
                            getNodeActions
                        </b>
                        <a href="#getNodeActions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getNodeActions(node: <a href="../interfaces/Node.html">Node</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:188</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>By default the base provider includes an action to filter the search if a clicked
node has a &quot;field&quot; property</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                                <code><a href="../interfaces/Node.html" target="_self" >Node</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The clicked node</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Action[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getProvider"></a>
                    <span class="name">
                        <b>
                            getProvider
                        </b>
                        <a href="#getProvider"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getProvider()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:151</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/NetworkDataset.html" target="_self" >Subject&lt;NetworkDataset&gt;</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getProviderActions"></a>
                    <span class="name">
                        <b>
                            getProviderActions
                        </b>
                        <a href="#getProviderActions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getProviderActions()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:179</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>By default, the base provider includes an action to turn the provider
on or off, and an action to reset the data from this provider</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>    <code>Action[]</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onDatasetsMerged"></a>
                    <span class="name">
                        <b>
                            onDatasetsMerged
                        </b>
                        <a href="#onDatasetsMerged"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onDatasetsMerged(dataset: <a href="../classes/NetworkDataset.html">NetworkDataset</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:159</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dataset</td>
                                    <td>
                                                <code><a href="../classes/NetworkDataset.html" target="_self" >NetworkDataset</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onDestroy"></a>
                    <span class="name">
                        <b>
                            onDestroy
                        </b>
                        <a href="#onDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onDestroy()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:245</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onEdgeClicked"></a>
                    <span class="name">
                        <b>
                            onEdgeClicked
                        </b>
                        <a href="#onEdgeClicked"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onEdgeClicked(edge: <a href="../interfaces/Edge.html">Edge | undefined</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:171</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>edge</td>
                                    <td>
                                                <code><a href="../interfaces/Edge.html" target="_self" >Edge | undefined</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onNodeClicked"></a>
                    <span class="name">
                        <b>
                            onNodeClicked
                        </b>
                        <a href="#onNodeClicked"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onNodeClicked(node: <a href="../interfaces/Node.html">Node | undefined</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:167</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                                <code><a href="../interfaces/Node.html" target="_self" >Node | undefined</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onNodesInserted"></a>
                    <span class="name">
                        <b>
                            onNodesInserted
                        </b>
                        <a href="#onNodesInserted"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onNodesInserted(nodes: <a href="../interfaces/Node.html">Node[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../classes/BaseProvider.html" target="_self" >BaseProvider</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../classes/BaseProvider.html#source" target="_self" >BaseProvider:163</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>nodes</td>
                                    <td>
                                                <code><a href="../interfaces/Node.html" target="_self" >Node[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Query } from &#x27;@sinequa/core/app-utils&#x27;;
import { Record } from &#x27;@sinequa/core/web-services&#x27;;
import { NodeType, Node, NetworkProvider, NetworkDataset } from &#x27;../network-models&#x27;;
import { RecordsProvider, StructuralEdgeType, RecordNode } from &#x27;./records-provider&#x27;;
import { Utils } from &#x27;@sinequa/core/base&#x27;;
import { combineLatest } from &#x27;rxjs&#x27;;
import { Action } from &#x27;@sinequa/components/action&#x27;;

/**
 * Extension of the NodeType interface with additional properties specific
 * to dynamic nodes, in particular the getQuery() function that returns a
 * query given a node
 */
export interface DynamicNodeType extends NodeType {
    /** Returns a query object to execute to obtain a record for this node */
    getQuery: (node: Node) &#x3D;&gt; Query|undefined;
    /** Defines when the query should be executed. Warning: oninsert may generate multiple simultaneous queries */
    trigger: &quot;oninsert&quot; | &quot;onclick&quot; | &quot;manual&quot;;
}

/**
 * An extension of the RecordsProvider which manages dynamic node types.
 * Dynamic nodes are nodes that are transformed into record nodes via a
 * query. The records are fetched from the server dynamic to enrich the
 * original node.
 * For example, a simple metadata node with the value &quot;Bill Gates&quot; can be
 * enriched with the wikipedia page of Bill Gate, which can provide a lot
 * of structured information about Bill Gates (which can be used, for
 * example, to attach structural edges to the original Bill Gates node).
 * Note that the &quot;source node&quot; have to come from different providers, so it is
 * necessary to listen to these providers and update the data generated by this
 * provider accordingly.
 */
export class DynamicNodeProvider extends RecordsProvider {

    /** List of the source nodes that have been already processed via clicks or actions */
    protected processedNodes: string[] &#x3D; [];
    /** to avoid fetching the same data multiple times, we store the record objects fetched from the server in this cache */
    protected nodeCache &#x3D; new Map&lt;string, Record&gt;();

    constructor(
        public name: string,
        protected nodeType: DynamicNodeType,
        protected edgeTypes: StructuralEdgeType[],
        protected permanent: boolean,
        protected sourceProviders: NetworkProvider[]
    ){
        super(name, nodeType, edgeTypes, [], false);
        
        combineLatest(sourceProviders.map(p &#x3D;&gt; p.getProvider())).subscribe(dataset &#x3D;&gt; {
            if(this.active){
                // &quot;Merge&quot; the nodes from all datasets into a map
                const map &#x3D; new Map&lt;string, Node&gt;();
                dataset.forEach(dataset &#x3D;&gt; {
                    dataset.getNodes().forEach(node &#x3D;&gt; {
                        if(node.visible &amp;&amp; node.type &#x3D;&#x3D;&#x3D; this.nodeType) {
                            map.set(node.id, node);
                        }
                    });
                });
                // Update the dataset of dynamic edges
                this.updateDynamicDataset(Array.from(map.values()));
            }
        });
    }

    /**
     * Rebuild the dataset of this provider given a list of source nodes to process
     * @param sourceNodes A list of source nodes to process
     */
    protected updateDynamicDataset(sourceNodes: Node[]) {
        
        // We rebuild the dataset from scratch, in case some source nodes were removed
        this.dataset &#x3D; new NetworkDataset();

        // If oninsert, we want to process all the source nodes. If not, we want to process the nodes in the processedNodes list
        if(this.nodeType.trigger !&#x3D;&#x3D; &quot;oninsert&quot;) {
            this.processedNodes &#x3D; this.processedNodes.filter(id &#x3D;&gt; !!sourceNodes.find(node &#x3D;&gt; node.id &#x3D;&#x3D;&#x3D; id)); // We want to &quot;forget&quot; the nodes that are not in the source anymore
            sourceNodes &#x3D; sourceNodes.filter(node &#x3D;&gt; this.processedNodes.indexOf(node.id) !&#x3D;&#x3D; -1); // We want to process only the nodes currently in the processed list
        }
        
        // For each source, we get its query
        const queries &#x3D; sourceNodes.map(node &#x3D;&gt; (this.nodeCache.has(node.id) || (node as RecordNode).record)? undefined : this.nodeType.getQuery(node));
        const _queries &#x3D; queries.filter(q &#x3D;&gt; !!q) as Query[];
        // If there are queries, we process them asynchronously
        if(_queries.length &gt; 0) {
            this.context.searchService.getMultipleResults(_queries, undefined).subscribe(res &#x3D;&gt; {
                this.mutateNodes(sourceNodes as RecordNode[], res.results.map(r &#x3D;&gt; r.records.length &gt; 0? r.records[0] : undefined), queries);
            });
        }
        else {
            this.mutateNodes(sourceNodes as RecordNode[], [], queries);
        }
    }

    /**
     * Processes a given node: If the record for this node is available
     * in the node cache, we take this record and mutate the node. If not,
     * we get the query via the dynamic node type&#x27;s getQuery() function,
     * and mutate the node upon results.
     * @param node A source node to process
     */
    protected processNode(node: RecordNode) {
        if(!this.permanent) {
            this.dataset.clear(); // Remove data from previously clicked node
            this.processedNodes.splice(0); // Remove the processed nodes
        }

        this.processedNodes.push(node.id);
        if(this.nodeCache.has(node.id)) {
            this.mutateNode(node, this.nodeCache[node.id]);
            this.provider.next(this.dataset);
        }
        else {
            const query &#x3D; this.nodeType.getQuery(node);
            if(query) {
                this.context.searchService.getResults(query, undefined, {searchInactive: true}).subscribe(results &#x3D;&gt; {
                    if(results.records.length &gt; 0) {
                        this.mutateNode(node, results.records[0]);
                    }
                    this.provider.next(this.dataset);
                });
            }
        }       
    }

    /**
     * Mutates a list of nodes, given a corresponding list of records
     * and of queries. Manages to get the record objects either from
     * these inputs or from the cache.
     * @param nodes The list of node to mutate
     * @param records The list of records for each node
     * @param queries The list of queries for each node
     */
    protected mutateNodes(nodes: RecordNode[], records: (Record|undefined)[], queries: (Query|undefined)[]) {
        let j &#x3D; 0;
        for(let i &#x3D; 0; i&lt;nodes.length; i++){
            const node &#x3D; nodes[i];
            const query &#x3D; queries[i];
            let record: Record|undefined;
            if(query){
                record &#x3D; records[j++];
            }
            else if(node.record) {
                record &#x3D; node.record;
            }
            else if(this.nodeCache.has(node.id)){
                record &#x3D; this.nodeCache[node.id];
            }

            if(record) {
                this.mutateNode(node, record);
            }
        }
        this.provider.next(this.dataset);
    }

    /**
     * Mutate a given node with the given record:
     * - Attaches the record property
     * - Increases the node precedence
     * - Updates the node cache
     * - Refresh the node&#x27;s appearance (node options)
     * - Attaches the structural edges to this node
     * @param node The node to mutate
     * @param record The record used for mutation
     */
    protected mutateNode(node: RecordNode, record: Record) {
        node.record &#x3D; record;
        node.precedence &#x3D; 1; // Give more precedence to the new node (so it will prevail when merged with another node)
        this.nodeCache[node.id] &#x3D; record;
        this.refreshNodeOptions(node); // The node might change appearance, since it has mutated into a record node
        this.edgeTypes.forEach(type &#x3D;&gt; {
            this.addStructuralEdges(node, type);
        });
    }

    /**
     * (Re-)computes the node options of a node (after mutation)
     * @param node a node
     */
    protected refreshNodeOptions(node: Node) {
        let options;
        if(typeof this.nodeType.nodeOptions &#x3D;&#x3D;&#x3D; &quot;function&quot;) {
            options &#x3D; this.nodeType.nodeOptions(node, this.nodeType);
        }
        else {
            options &#x3D; this.nodeType.nodeOptions;
        }
        return Utils.extend(node, options);
    }
    
    // Network provider interface

    /**
     * Process a clicked node, for dynamic node types with an &quot;onclick&quot; trigger
     * @param node The clicked node
     */
    onNodeClicked(node?: RecordNode) {
        super.onNodeClicked(node);
        if(this.active &amp;&amp; this.nodeType.trigger &#x3D;&#x3D;&#x3D; &quot;onclick&quot; &amp;&amp; node &amp;&amp; node.type &#x3D;&#x3D;&#x3D; this.nodeType &amp;&amp; this.processedNodes.indexOf(node.id) &#x3D;&#x3D;&#x3D; -1) {
            this.processNode(node);
        }
    }

    /**
     * Creates an action to process a clicked node, for dynamic node types
     * with a &quot;manual&quot; trigger.
     * @param node The clicked node
     */
    getNodeActions(node: RecordNode): Action[] {
        const actions &#x3D; super.getNodeActions(node);
        if(this.active &amp;&amp; this.nodeType.trigger &#x3D;&#x3D;&#x3D; &quot;manual&quot; &amp;&amp; node &amp;&amp; node.type &#x3D;&#x3D;&#x3D; this.nodeType &amp;&amp; this.processedNodes.indexOf(node.id) &#x3D;&#x3D;&#x3D; -1) {
            actions.unshift(new Action({
                icon: &quot;fas fa-star-of-life&quot;,
                title: this.context.intlService.formatMessage(&quot;msg#network.actions.expandNode&quot;, {label: node.label}),
                action: () &#x3D;&gt; {
                    this.processNode(node);
                }
            }));
        }
        return actions;
    }
}
</code></pre>
    </div>
</div>



                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'DynamicNodeProvider.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
