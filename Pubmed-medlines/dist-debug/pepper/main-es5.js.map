{"version":3,"sources":["webpack:///components/feedback/index.ts","webpack:///components/search/bootstrap/tabs/tabs.ts","webpack:///components/search/bootstrap/tabs/tabs.html","webpack:///analytics/timeline/bootstrap/public-api.ts","webpack:///components/selection/public-api.ts","webpack:///components/status-bar/bootstrap/status-bar.module.ts","webpack:///components/facet/abstract-facet.ts","webpack:///analytics/heatmap/bootstrap/results-heatmap-view.ts","webpack:///analytics/heatmap/bootstrap/results-heatmap-view.html","webpack:///components/utils/pipes/memory-size-pipe.ts","webpack:///components/user-settings/public-api.ts","webpack:///analytics/heatmap/messages/index.ts","webpack:///core/web-services/principal.web.service.ts","webpack:///components/saved-queries/recent-documents.service.ts","webpack:///components/facet/bootstrap/facet-filters/facet-filters.ts","webpack:///components/facet/bootstrap/facet-filters/facet-filters.html","webpack:///core/load-component/load-component.directive.ts","webpack:///components/advanced/messages/index.ts","webpack:///components/results-view/bootstrap/public-api.ts","webpack:///analytics/finance/index.ts","webpack:///analytics/fusioncharts/index.ts","webpack:///analytics/finance/messages/index.ts","webpack:///components/baskets/messages/index.ts","webpack:///components/theme-toggle/theme-toggle.module.ts","webpack:///components/modal/messages/en.ts","webpack:///components/baskets/bootstrap/index.ts","webpack:///components/preview/messages/fr.ts","webpack:///core/web-services/public-api.ts","webpack:///components/preview/bootstrap/preview-entity-panel/preview-entity-panel.component.ts","webpack:///components/preview/bootstrap/preview-entity-panel/preview-entity-panel.component.html","webpack:///components/result/messages/index.ts","webpack:///components/saved-queries/bootstrap/index.ts","webpack:///components/autocomplete/bootstrap/autocomplete-list/autocomplete-list.ts","webpack:///components/autocomplete/bootstrap/autocomplete-list/autocomplete-list.html","webpack:///components/preview/bootstrap/preview-popup/preview-popup.ts","webpack:///components/preview/bootstrap/preview-popup/preview-popup.html","webpack:///components/modal/messages/fr.ts","webpack:///components/result/result-source/result-source.ts","webpack:///components/result/result-source/result-source.html","webpack:///components/saved-queries/public-api.ts","webpack:///core/base/iterator-adaptor.ts","webpack:///analytics/network/messages/fr.ts","webpack:///components/alerts/messages/de.ts","webpack:///locale-data/complete.js (ignored)","webpack:///analytics/network/providers/provider-factory.ts","webpack:///core/intl/import-moment.ts","webpack:///components/notification/bootstrap/notification/notification.ts","webpack:///components/notification/bootstrap/notification/notification.html","webpack:///components/utils/directives/autofocus.ts","webpack:///analytics/heatmap/public-api.ts","webpack:///components/collapse/public-api.ts","webpack:///components/utils/directives/focus-key-list-item.directive.ts","webpack:///components/advanced/bootstrap/advanced-form-input/advanced-form-input.ts","webpack:///components/advanced/bootstrap/advanced-form-input/advanced-form-input.html","webpack:///src/config.ts","webpack:///components/modal/bootstrap/help/help.ts","webpack:///components/modal/bootstrap/help/help.html","webpack:///components/modal/messages/index.ts","webpack:///components/search/breadcrumbs.ts","webpack:///analytics/network/providers/aggregation-provider.ts","webpack:///components/saved-queries/messages/fr.ts","webpack:///components/metadata/messages/index.ts","webpack:///components/facet/messages/de.ts","webpack:///core/base/error.ts","webpack:///core/web-services/http.service.ts","webpack:///components/baskets/baskets.service.ts","webpack:///components/status-bar/bootstrap/index.ts","webpack:///components/labels/public-api.ts","webpack:///components/notification/messages/fr.ts","webpack:///components/preview/bootstrap/facet-preview/facet-preview.ts","webpack:///components/preview/bootstrap/facet-preview/facet-preview.html","webpack:///analytics/ngx-charts/facet-chart/facet-chart.ts","webpack:///analytics/ngx-charts/facet-chart/facet-chart.html","webpack:///components/selection/bootstrap/selection.module.ts","webpack:///components/preview/bootstrap/preview-highlights/preview-highlights.ts","webpack:///components/preview/bootstrap/preview-highlights/preview-highlights.html","webpack:///core/login/authentication-oauth.service.ts","webpack:///components/baskets/public-api.ts","webpack:///components/facet/messages/en.ts","webpack:///analytics/fusioncharts/chart/chart.ts","webpack:///analytics/fusioncharts/chart/chart.html","webpack:///components/metadata/metadata-item/metadata-item.ts","webpack:///components/metadata/metadata-item/metadata-item.html","webpack:///components/preview/preview-document.ts","webpack:///components/labels/labels.component.ts","webpack:///components/labels/labels.component.html","webpack:///components/feedback/bootstrap/public-api.ts","webpack:///core/modal/confirm.component.ts","webpack:///core/web-services/queryintent.service.ts","webpack:///components/notification/index.ts","webpack:///core/web-services/preview.web.service.ts","webpack:///components/user-settings/bootstrap/public-api.ts","webpack:///analytics/ngx-charts/index.ts","webpack:///core/web-services/json-method-plugin.web.service.ts","webpack:///src/locales/de.ts","webpack:///components/saved-queries/saved-queries.service.ts","webpack:///components/saved-queries/bootstrap/manage-saved-queries/manage-saved-queries.ts","webpack:///components/saved-queries/bootstrap/manage-saved-queries/manage-saved-queries.html","webpack:///components/labels/messages/en.ts","webpack:///components/utils/messages/de.ts","webpack:///components/search/bootstrap/public-api.ts","webpack:///components/feedback/messages/en.ts","webpack:///core/web-services/rfm.web.service.ts","webpack:///core/default-locales-config.ts","webpack:///components/saved-queries/bootstrap/facet-saved-queries/facet-saved-queries.ts","webpack:///components/saved-queries/bootstrap/facet-saved-queries/facet-saved-queries.html","webpack:///components/preview/bootstrap/index.ts","webpack:///components/autocomplete/autocomplete-field-search.directive.ts","webpack:///components/result/result-icon/result-icon.ts","webpack:///components/result/result-icon/result-icon.html","webpack:///components/theme-toggle/index.ts","webpack:///components/labels/bootstrap/delete-label/delete-label.ts","webpack:///components/labels/bootstrap/delete-label/delete-label.html","webpack:///components/search/index.ts","webpack:///core/app-utils/query/expr-builder.ts","webpack:///components/status-bar/messages/de.ts","webpack:///core/login/index.ts","webpack:///components/selection/bootstrap/result-selector/result-selector.ts","webpack:///components/selection/bootstrap/result-selector/result-selector.html","webpack:///components/utils/pipes/value-pipe.ts","webpack:///components/labels/result-labels.component.ts","webpack:///components/labels/result-labels.component.html","webpack:///components/preview/bootstrap/result-link-preview/result-link-preview.ts","webpack:///components/preview/bootstrap/result-link-preview/result-link-preview.html","webpack:///components/feedback/bootstrap/feedback-menu/feedback-menu.ts","webpack:///components/feedback/bootstrap/feedback-menu/feedback-menu.html","webpack:///core/intl/messages/de.ts","webpack:///components/autocomplete/bootstrap/public-api.ts","webpack:///components/result/messages/fr.ts","webpack:///analytics/finance/money-cloud/money-cloud.component.ts","webpack:///analytics/finance/money-cloud/money-cloud.component.html","webpack:///core/validation/messages/de.ts","webpack:///components/selection/index.ts","webpack:///components/metadata/public-api.ts","webpack:///analytics/googlemaps/dark-style.ts","webpack:///components/result/result-missing-terms/result-missing-terms.ts","webpack:///components/result/result-missing-terms/result-missing-terms.html","webpack:///components/labels/label.pipe.ts","webpack:///components/facet/bootstrap/index.ts","webpack:///core/public-api.ts","webpack:///components/notification/messages/index.ts","webpack:///core/intl/abstract-intl.pipe.ts","webpack:///components/user-settings/bootstrap/user-settings.module.ts","webpack:///core/web-services/similar-documents.web.service.ts","webpack:///components/advanced/advanced.service.ts","webpack:///analytics/vis-timeline/result-timeline/result-timeline.ts","webpack:///analytics/vis-timeline/result-timeline/result-timeline.html","webpack:///components/autocomplete/bootstrap/autocomplete.module.ts","webpack:///components/feedback/feedback.service.ts","webpack:///components/action/bootstrap/action-buttons/action-buttons.ts","webpack:///components/action/bootstrap/action-buttons/action-buttons.html","webpack:///core/login/messages/de.ts","webpack:///components/autocomplete/suggest.service.ts","webpack:///core/modal/messages/de.ts","webpack:///components/results-view/bootstrap/results-view-selector/results-view-selector.ts","webpack:///components/results-view/bootstrap/results-view-selector/results-view-selector.html","webpack:///analytics/heatmap/bootstrap/public-api.ts","webpack:///components/collapse/messages/fr.ts","webpack:///components/saved-queries/messages/de.ts","webpack:///analytics/network/network-models.ts","webpack:///components/advanced/bootstrap/index.ts","webpack:///core/web-services/sponsored-links.web.service.ts","webpack:///components/modal/bootstrap/modal-footer.component.ts","webpack:///components/modal/bootstrap/modal-footer.component.html","webpack:///src/environments/environment.ts","webpack:///components/action/action.ts","webpack:///analytics/finance/messages/en.ts","webpack:///components/search/bootstrap/sort-selector/sort-selector.ts","webpack:///components/search/bootstrap/sort-selector/sort-selector.html","webpack:///components/search/bootstrap/breadcrumbs/breadcrumbs.ts","webpack:///components/search/bootstrap/breadcrumbs/breadcrumbs.html","webpack:///core/validation/index.ts","webpack:///components/results-view/results-view.service.ts","webpack:///core/notification/notifications.service.ts","webpack:///core/validation/validation-message.component.ts","webpack:///core/modal/prompt.component.ts","webpack:///core/login/component-with-login.component.ts","webpack:///components/modal/bootstrap/public-api.ts","webpack:///components/utils/directives/focus-key-list.directive.ts","webpack:///core/web-services/download.web.service.ts","webpack:///components/facet/bootstrap/facet-mysearch/facet-mysearch.ts","webpack:///components/facet/bootstrap/facet-mysearch/facet-mysearch.html","webpack:///components/alerts/messages/en.ts","webpack:///components/results-view/messages/en.ts","webpack:///components/search/messages/en.ts","webpack:///components/modal/bootstrap/prompt.component.ts","webpack:///core/base/public-api.ts","webpack:///components/notification/bootstrap/notification.module.ts","webpack:///components/user-settings/bootstrap/user-menu/user-menu.component.ts","webpack:///components/user-settings/bootstrap/user-menu/user-menu.component.html","webpack:///core/load-component/module.providers.ts","webpack:///components/utils/index.ts","webpack:///analytics/network/messages/de.ts","webpack:///components/notification/messages/de.ts","webpack:///components/search/bootstrap/page-size-selector/page-size-selector.ts","webpack:///components/search/bootstrap/page-size-selector/page-size-selector.html","webpack:///components/results-view/index.ts","webpack:///components/facet/bootstrap/facet-range/facet-range.ts","webpack:///components/facet/bootstrap/facet-range/facet-range.html","webpack:///components/preview/bootstrap/public-api.ts","webpack:///core/notification/notification.module.ts","webpack:///components/preview/bootstrap/preview-search-form/preview-search-form.component.ts","webpack:///components/preview/bootstrap/preview-search-form/preview-search-form.component.html","webpack:///core/modal/modal.module.ts","webpack:///components/advanced/bootstrap/advanced-form-autocomplete.directive.ts","webpack:///components/selection/bootstrap/public-api.ts","webpack:///analytics/network/providers/public-api.ts","webpack:///core/intl/index.ts","webpack:///components/notification/bootstrap/index.ts","webpack:///analytics/heatmap/bootstrap/heatmap.module.ts","webpack:///core/login/public-api.ts","webpack:///core/app-utils/app-utils.module.ts","webpack:///components/utils/messages/index.ts","webpack:///core/validation/validation.directive.ts","webpack:///core/login/messages/fr.ts","webpack:///components/results-view/messages/de.ts","webpack:///components/utils/pipes/number-pipe.ts","webpack:///analytics/heatmap/bootstrap/tooltip.component.ts","webpack:///components/selection/messages/fr.ts","webpack:///core/validation/messages/index.ts","webpack:///components/labels/bootstrap/public-api.ts","webpack:///components/baskets/bootstrap/baskets-menu/baskets-menu.component.ts","webpack:///components/baskets/bootstrap/baskets-menu/baskets-menu.component.html","webpack:///analytics/ngx-charts/ngx-charts.module.ts","webpack:///core/base/item-array-view.ts","webpack:///core/load-component/public-api.ts","webpack:///components/status-bar/bootstrap/fullscreen-activator/fullscreen-activator.ts","webpack:///components/status-bar/bootstrap/fullscreen-activator/fullscreen-activator.html","webpack:///components/result/result-title/result-title.ts","webpack:///components/result/result-title/result-title.html","webpack:///components/theme-toggle/messages/en.ts","webpack:///core/validation/validation.service.ts","webpack:///components/selection/bootstrap/results-selector/results-selector.ts","webpack:///components/selection/bootstrap/results-selector/results-selector.html","webpack:///components/action/bootstrap/public-api.ts","webpack:///components/result/messages/en.ts","webpack:///components/theme-toggle/theme-toggle.component.ts","webpack:///components/theme-toggle/theme-toggle.component.html","webpack:///core/web-services/suggest-field.web.service.ts","webpack:///analytics/heatmap/bootstrap/heatmap.component.ts","webpack:///analytics/heatmap/bootstrap/heatmap.component.html","webpack:///core/notification/module.providers.ts","webpack:///components/baskets/bootstrap/edit-basket/edit-basket.ts","webpack:///components/baskets/bootstrap/edit-basket/edit-basket.html","webpack:///components/facet/bootstrap/facet-tree/facet-tree.ts","webpack:///components/facet/bootstrap/facet-tree/facet-tree.html","webpack:///components/feedback/messages/de.ts","webpack:///components/theme-toggle/public-api.ts","webpack:///components/utils/voice-recognition/voice-recongnition.service.ts","webpack:///components/collapse/collapse.module.ts","webpack:///core/web-services/query-export.web.service.ts","webpack:///components/alerts/messages/fr.ts","webpack:///components/saved-queries/bootstrap/facet-recent-documents/facet-recent-documents.ts","webpack:///components/saved-queries/bootstrap/facet-recent-documents/facet-recent-documents.html","webpack:///components/utils/utils.module.ts","webpack:///core/login/login.service.ts","webpack:///components/search/messages/fr.ts","webpack:///components/action/bootstrap/dropdown.service.ts","webpack:///components/user-settings/user-preferences.ts","webpack:///analytics/timeline/bootstrap/facet-timeline.component.ts","webpack:///analytics/timeline/bootstrap/facet-timeline.component.html","webpack:///components/result/result-thumbnail/result-thumbnail.ts","webpack:///components/result/result-thumbnail/result-thumbnail.html","webpack:///core/messages/index.ts","webpack:///analytics/heatmap/messages/en.ts","webpack:///components/alerts/bootstrap/public-api.ts","webpack:///analytics/network/providers/async-records-provider.ts","webpack:///components/facet/bootstrap/facet.module.ts","webpack:///components/utils/directives/tooltip/tooltip.component.ts","webpack:///components/user-settings/messages/en.ts","webpack:///core/intl/intl.service.ts","webpack:///components/labels/bootstrap/index.ts","webpack:///analytics/finance/finance.module.ts","webpack:///analytics/network/providers/base-provider.ts","webpack:///components/utils/pipes/expr-pipe.ts","webpack:///core/web-services/app.web.service.ts","webpack:///components/facet/bootstrap/facet-list/facet-list.ts","webpack:///components/facet/bootstrap/facet-list/facet-list.html","webpack:///core/login/jwt.service.ts","webpack:///core/modal/modal-ref.ts","webpack:///components/preview/bootstrap/preview-entity-facet/preview-entity-facet.component.ts","webpack:///components/preview/bootstrap/preview-entity-facet/preview-entity-facet.component.html","webpack:///components/search/bootstrap/scroller/scroller.ts","webpack:///components/theme-toggle/messages/fr.ts","webpack:///core/login/messages/index.ts","webpack:///components/notification/bootstrap/notifications/notifications.ts","webpack:///components/notification/bootstrap/notifications/notifications.html","webpack:///analytics/timeline/bootstrap/index.ts","webpack:///src/locales/fr.ts","webpack:///components/selection/messages/index.ts","webpack:///components/facet/bootstrap/facet-bar/facet-bar.ts","webpack:///components/facet/bootstrap/facet-bar/facet-bar.html","webpack:///components/advanced/bootstrap/advanced-form-range/date-picker/date-picker.ts","webpack:///components/feedback/bootstrap/feedback.module.ts","webpack:///analytics/googlemaps/messages/en.ts","webpack:///components/labels/labels.service.ts","webpack:///components/status-bar/index.ts","webpack:///components/result/result-extracts/result-extracts.ts","webpack:///components/result/result-extracts/result-extracts.html","webpack:///core/intl/intl.module.ts","webpack:///components/feedback/messages/index.ts","webpack:///components/advanced/messages/fr.ts","webpack:///components/utils/pipes/relative-time-pipe.ts","webpack:///components/metadata/metadata-access-lists-item-single-access-list/metadata-access-lists-item-single-access-list.ts","webpack:///components/metadata/metadata-access-lists-item-single-access-list/metadata-access-lists-item-single-access-list.html","webpack:///core/app-utils/query/expr-parser.ts","webpack:///components/collapse/messages/de.ts","webpack:///components/search/bootstrap/index.ts","webpack:///components/user-settings/messages/fr.ts","webpack:///src/app/dashboard/dashboard.service.ts","webpack:///components/metadata/messages/de.ts","webpack:///components/labels/labels-autocomplete.directive.ts","webpack:///components/theme-toggle/messages/de.ts","webpack:///core/web-services/web-services.module.ts","webpack:///core/base/index.ts","webpack:///core/web-services/start-config.web.service.ts","webpack:///core/base/base.module.ts","webpack:///components/results-view/bootstrap/index.ts","webpack:///components/user-settings/bootstrap/index.ts","webpack:///components/baskets/bootstrap/baskets.module.ts","webpack:///components/selection/messages/de.ts","webpack:///components/advanced/bootstrap/advanced-form-range/date-range-picker/date-range-picker.ts","webpack:///core/app-utils/index.ts","webpack:///core/web-services/audit.web.service.ts","webpack:///components/search/bootstrap/search.module.ts","webpack:///analytics/network/node-info-card.component.ts","webpack:///analytics/network/node-info-card.component.html","webpack:///components/preview/bootstrap/preview-extracts-panel/preview-extracts-panel.component.ts","webpack:///components/preview/bootstrap/preview-extracts-panel/preview-extracts-panel.component.html","webpack:///core/app-utils/audit.interceptor.ts","webpack:///analytics/timeline/bootstrap/timeline.module.ts","webpack:///components/utils/directives/scroll-into-view.ts","webpack:///analytics/network/providers/selected-records-provider.ts","webpack:///components/selection/selection.service.ts","webpack:///components/alerts/messages/index.ts","webpack:///core/validation/validation-error.pipe.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///analytics/googlemaps/messages/fr.ts","webpack:///analytics/finance/messages/fr.ts","webpack:///components/advanced/bootstrap/advanced-form-select/select/select.ts","webpack:///components/advanced/bootstrap/advanced-form-select/select/select.html","webpack:///components/action/bootstrap/action-item/action-item.ts","webpack:///components/action/bootstrap/action-item/action-item.html","webpack:///components/search/search.service.ts","webpack:///components/preview/preview.module.ts","webpack:///components/utils/messages/en.ts","webpack:///components/advanced/bootstrap/advanced-form-validation.directive.ts","webpack:///components/search/bootstrap/loading-bar/loading-bar.ts","webpack:///components/labels/messages/de.ts","webpack:///components/action/bootstrap/action-item-content/action-item-content.ts","webpack:///components/action/bootstrap/action-item-content/action-item-content.html","webpack:///components/modal/bootstrap/modal-header.component.ts","webpack:///components/modal/bootstrap/modal-header.component.html","webpack:///components/labels/index.ts","webpack:///components/selection/messages/en.ts","webpack:///components/preview/messages/de.ts","webpack:///components/modal/bootstrap/index.ts","webpack:///core/web-services/module.providers.ts","webpack:///components/metadata/messages/fr.ts","webpack:///components/utils/directives/click-outside.ts","webpack:///components/selection/bootstrap/index.ts","webpack:///components/advanced/bootstrap/advanced-form-multi-input/advanced-form-multi-input.ts","webpack:///components/advanced/bootstrap/advanced-form-multi-input/advanced-form-multi-input.html","webpack:///components/utils/pipes/moment-pipe.ts","webpack:///analytics/finance/messages/de.ts","webpack:///components/alerts/bootstrap/index.ts","webpack:///components/result/result-module.ts","webpack:///components/theme-toggle/messages/index.ts","webpack:///src/app/dashboard/dashboard-item.component.ts","webpack:///src/app/dashboard/dashboard-item.component.html","webpack:///components/status-bar/bootstrap/network-activity/network-activity.ts","webpack:///components/status-bar/bootstrap/network-activity/network-activity.html","webpack:///components/search/bootstrap/pager/pager.ts","webpack:///components/search/bootstrap/pager/pager.html","webpack:///core/modal/module.providers.ts","webpack:///components/modal/bootstrap/login.component.ts","webpack:///components/modal/bootstrap/login.component.html","webpack:///core/login/token.service.ts","webpack:///components/results-view/messages/fr.ts","webpack:///components/advanced/bootstrap/public-api.ts","webpack:///components/action/index.ts","webpack:///components/modal/bootstrap/modal.module.ts","webpack:///components/user-settings/messages/de.ts","webpack:///core/intl/message.pipe.ts","webpack:///core/app-utils/format.service.ts","webpack:///analytics/googlemaps/messages/index.ts","webpack:///core/base/polyfills.ts","webpack:///components/preview/index.ts","webpack:///components/baskets/bootstrap/public-api.ts","webpack:///core/web-services/user-settings.web.service.ts","webpack:///components/baskets/bootstrap/facet-baskets/facet-baskets.component.ts","webpack:///components/baskets/bootstrap/facet-baskets/facet-baskets.component.html","webpack:///components/advanced/messages/en.ts","webpack:///components/collapse/collapse-link.component.ts","webpack:///components/collapse/collapse-link.component.html","webpack:///core/web-services/user-ratings.web.service.ts","webpack:///components/advanced/bootstrap/advanced.module.ts","webpack:///components/facet/bootstrap/facet-refine/facet-refine.ts","webpack:///components/facet/bootstrap/facet-refine/facet-refine.html","webpack:///src/app/search-form/autocomplete-extended.directive.ts","webpack:///src/app/app.module.ts","webpack:///analytics/network/network.component.ts","webpack:///analytics/network/network.component.html","webpack:///core/login/authentication-popup.service.ts","webpack:///components/utils/pipes/date-pipe.ts","webpack:///components/utils/messages/fr.ts","webpack:///components/selection/bootstrap/selection-arranger/selection-arranger.component.ts","webpack:///components/selection/bootstrap/selection-arranger/selection-arranger.component.html","webpack:///components/autocomplete/public-api.ts","webpack:///components/preview/public-api.ts","webpack:///components/preview/messages/en.ts","webpack:///core/login/login.component.ts","webpack:///analytics/googlemaps/public-api.ts","webpack:///components/feedback/messages/fr.ts","webpack:///components/notification/bootstrap/notifications-manager/notifications-manager.ts","webpack:///components/notification/bootstrap/notifications-manager/notifications-manager.html","webpack:///components/utils/directives/resize-event.directive.ts","webpack:///components/alerts/bootstrap/edit-alert/edit-alert.ts","webpack:///components/alerts/bootstrap/edit-alert/edit-alert.html","webpack:///core/web-services/labels.web.service.ts","webpack:///components/facet/bootstrap/facet-multi/facet-multi.component.ts","webpack:///components/facet/bootstrap/facet-multi/facet-multi.component.html","webpack:///core/load-component/load-component.service.ts","webpack:///components/result/messages/de.ts","webpack:///components/feedback/public-api.ts","webpack:///core/login/messages/en.ts","webpack:///components/advanced/index.ts","webpack:///components/labels/bootstrap/edit-label/edit-label.ts","webpack:///components/labels/bootstrap/edit-label/edit-label.html","webpack:///components/results-view/public-api.ts","webpack:///core/web-services/index.ts","webpack:///components/baskets/messages/fr.ts","webpack:///core/modal/messages/index.ts","webpack:///core/intl/messages/index.ts","webpack:///core/modal/messages/fr.ts","webpack:///components/result/sponsored-results/sponsored-results.ts","webpack:///components/result/sponsored-results/sponsored-results.html","webpack:///components/utils/pipes/time-pipe.ts","webpack:///core/web-services/dataset.web.service.ts","webpack:///components/search/first-page.service.ts","webpack:///components/facet/messages/index.ts","webpack:///components/metadata/messages/en.ts","webpack:///components/labels/labels.module.ts","webpack:///components/labels/bootstrap/labels-menu/labels-menu.component.ts","webpack:///components/labels/bootstrap/labels-menu/labels-menu.component.html","webpack:///components/metadata/metadata/metadata.ts","webpack:///components/metadata/metadata/metadata.html","webpack:///analytics/vis-timeline/vis-timeline-module.ts","webpack:///core/validation/public-api.ts","webpack:///core/intl/public-api.ts","webpack:///analytics/network/index.ts","webpack:///components/saved-queries/bootstrap/public-api.ts","webpack:///core/validation/validation.module.ts","webpack:///components/advanced/messages/de.ts","webpack:///components/baskets/bootstrap/result-baskets/result-baskets.ts","webpack:///components/baskets/bootstrap/result-baskets/result-baskets.html","webpack:///components/status-bar/public-api.ts","webpack:///components/result/index.ts","webpack:///core/intl/messages/en.ts","webpack:///components/result/results-counter/results-counter.ts","webpack:///components/result/results-counter/results-counter.html","webpack:///components/status-bar/messages/fr.ts","webpack:///components/labels/bootstrap/add-label/add-label.ts","webpack:///components/labels/bootstrap/add-label/add-label.html","webpack:///analytics/heatmap/bootstrap/facet-heatmap.component.ts","webpack:///analytics/heatmap/bootstrap/facet-heatmap.component.html","webpack:///components/results-view/messages/index.ts","webpack:///core/validation/module.providers.ts","webpack:///components/action/bootstrap/dropdown-menu/dropdown-menu.ts","webpack:///components/action/bootstrap/dropdown-menu/dropdown-menu.html","webpack:///components/result/public-api.ts","webpack:///analytics/heatmap/messages/de.ts","webpack:///components/saved-queries/bootstrap/edit-saved-query/edit-saved-query.ts","webpack:///components/saved-queries/bootstrap/edit-saved-query/edit-saved-query.html","webpack:///components/advanced/bootstrap/advanced-form-checkbox/advanced-form-checkbox.ts","webpack:///components/advanced/bootstrap/advanced-form-checkbox/advanced-form-checkbox.html","webpack:///core/intl/messages/fr.ts","webpack:///components/modal/bootstrap/override-user/override-user.ts","webpack:///components/modal/bootstrap/override-user/override-user.html","webpack:///analytics/vis-timeline/index.ts","webpack:///components/collapse/messages/index.ts","webpack:///analytics/network/providers/dynamic-node-provider.ts","webpack:///components/alerts/alerts.service.ts","webpack:///components/alerts/public-api.ts","webpack:///analytics/timeline/public-api.ts","webpack:///components/action/bootstrap/index.ts","webpack:///components/user-settings/bootstrap/edit-user-settings/edit-user-settings.ts","webpack:///components/user-settings/bootstrap/edit-user-settings/edit-user-settings.html","webpack:///core/base/keyboard.ts","webpack:///components/metadata/metadata.module.ts","webpack:///components/action/bootstrap/action-menu/action-menu.ts","webpack:///components/action/bootstrap/action-menu/action-menu.html","webpack:///components/utils/ui.service.ts","webpack:///core/web-services/http-client.ts","webpack:///components/autocomplete/index.ts","webpack:///components/labels/messages/fr.ts","webpack:///components/status-bar/messages/index.ts","webpack:///components/user-settings/messages/index.ts","webpack:///components/preview/bootstrap/preview.module.ts","webpack:///components/notification/bootstrap/public-api.ts","webpack:///components/baskets/index.ts","webpack:///components/saved-queries/bootstrap/saved-queries.module.ts","webpack:///analytics/network/providers/dynamic-edge-provider.ts","webpack:///components/saved-queries/bootstrap/export-query/export-query.ts","webpack:///components/saved-queries/bootstrap/export-query/export-query.html","webpack:///analytics/timeline/bootstrap/timeline.component.ts","webpack:///analytics/timeline/bootstrap/timeline.component.html","webpack:///core/app-utils/query/query.ts","webpack:///components/alerts/bootstrap/alert-message/alert-message.component.ts","webpack:///components/alerts/bootstrap/alert-message/alert-message.component.html","webpack:///components/saved-queries/bootstrap/query-exporter/query-exporter.ts","webpack:///components/saved-queries/bootstrap/query-exporter/query-exporter.html","webpack:///src/app/search-form/search-form.component.ts","webpack:///src/app/search-form/search-form.component.html","webpack:///components/metadata/index.ts","webpack:///components/preview/preview.service.ts","webpack:///core/base/pattern-matcher.ts","webpack:///components/baskets/bootstrap/select-basket/select-basket.ts","webpack:///components/baskets/bootstrap/select-basket/select-basket.html","webpack:///components/feedback/bootstrap/index.ts","webpack:///components/modal/bootstrap/editable/editable.ts","webpack:///components/modal/bootstrap/editable/editable.html","webpack:///core/app-utils/app-service-helpers.ts","webpack:///components/status-bar/bootstrap/public-api.ts","webpack:///components/saved-queries/recent-queries.service.ts","webpack:///components/facet/bootstrap/public-api.ts","webpack:///core/login/authentication.service.ts","webpack:///analytics/googlemaps/googlemaps.module.ts","webpack:///analytics/googlemaps/map.component.ts","webpack:///analytics/googlemaps/map.component.html","webpack:///analytics/ngx-charts/chart/chart.ts","webpack:///analytics/ngx-charts/chart/chart.html","webpack:///analytics/network/messages/index.ts","webpack:///components/modal/index.ts","webpack:///components/collapse/messages/en.ts","webpack:///components/facet/facet.service.ts","webpack:///components/alerts/bootstrap/alerts.module.ts","webpack:///core/notification/index.ts","webpack:///analytics/network/network.module.ts","webpack:///components/labels/bootstrap/labels.module.ts","webpack:///components/preview/preview-tooltip.component.ts","webpack:///components/preview/preview-tooltip.component.html","webpack:///components/utils/directives/sticky.ts","webpack:///core/validation/messages/en.ts","webpack:///core/login/module.providers.ts","webpack:///components/labels/messages/index.ts","webpack:///components/collapse/index.ts","webpack:///core/modal/messages/en.ts","webpack:///analytics/network/messages/en.ts","webpack:///components/results-view/bootstrap/results-view-module.ts","webpack:///components/utils/directives/media-if.ts","webpack:///components/modal/bootstrap/confirm.component.ts","webpack:///components/modal/bootstrap/confirm.component.html","webpack:///components/labels/bootstrap/labels-autocomplete/labels-autocomplete.component.ts","webpack:///components/labels/bootstrap/labels-autocomplete/labels-autocomplete.component.html","webpack:///components/modal/bootstrap/modal.component.ts","webpack:///components/modal/bootstrap/modal.component.html","webpack:///components/results-view/bootstrap/results-grid-view/results-grid-view.ts","webpack:///components/results-view/bootstrap/results-grid-view/results-grid-view.html","webpack:///analytics/ngx-charts/public-api.ts","webpack:///components/collapse/collapse-button.component.ts","webpack:///components/collapse/collapse-button.component.html","webpack:///core/load-component/load-component.module.ts","webpack:///components/user-settings/index.ts","webpack:///components/baskets/messages/de.ts","webpack:///components/modal/public-api.ts","webpack:///components/facet/messages/fr.ts","webpack:///components/action/public-api.ts","webpack:///components/advanced/bootstrap/advanced-form-select/advanced-form-select.ts","webpack:///components/advanced/bootstrap/advanced-form-select/advanced-form-select.html","webpack:///components/notification/messages/en.ts","webpack:///components/preview/bootstrap/preview-pages-panel/preview-pages-panel.component.ts","webpack:///components/preview/bootstrap/preview-pages-panel/preview-pages-panel.component.html","webpack:///core/login/login.interceptor.ts","webpack:///core/app-utils/module.providers.ts","webpack:///components/search/messages/de.ts","webpack:///components/labels/bootstrap/rename-label/rename-label.ts","webpack:///components/labels/bootstrap/rename-label/rename-label.html","webpack:///core/validation/messages/fr.ts","webpack:///src/locales/en.ts","webpack:///components/preview/bootstrap/similar-documents/similar-documents.ts","webpack:///components/preview/bootstrap/similar-documents/similar-documents.html","webpack:///core/app-utils/app.service.ts","webpack:///components/action/bootstrap/action.module.ts","webpack:///components/result/user-rating/user-rating.ts","webpack:///components/result/user-rating/user-rating.html","webpack:///analytics/finance/public-api.ts","webpack:///components/facet/bootstrap/facet-tag-cloud/facet-tag-cloud.ts","webpack:///components/facet/bootstrap/facet-tag-cloud/facet-tag-cloud.html","webpack:///components/collapse/collapse.component.ts","webpack:///components/autocomplete/bootstrap/field-search-items.component.ts","webpack:///components/preview/messages/index.ts","webpack:///components/facet/public-api.ts","webpack:///components/modal/messages/de.ts","webpack:///src/app/dashboard/dashboard-add-item.component.ts","webpack:///src/app/dashboard/dashboard-add-item.component.html","webpack:///components/preview/preview-document-iframe.component.ts","webpack:///core/modal/modal.service.ts","webpack:///core/intl/module.providers.ts","webpack:///components/search/messages/index.ts","webpack:///components/preview/bootstrap/preview-panel/preview-panel.ts","webpack:///components/preview/bootstrap/preview-panel/preview-panel.html","webpack:///components/saved-queries/messages/index.ts","webpack:///core/base/utils.ts","webpack:///components/preview/bootstrap/preview-links/preview-links.ts","webpack:///components/preview/bootstrap/preview-links/preview-links.html","webpack:///analytics/heatmap/messages/fr.ts","webpack:///components/notification/public-api.ts","webpack:///analytics/fusioncharts/public-api.ts","webpack:///components/alerts/bootstrap/manage-alerts/manage-alerts.ts","webpack:///components/alerts/bootstrap/manage-alerts/manage-alerts.html","webpack:///components/saved-queries/bootstrap/saved-queries-menu/saved-queries-menu.component.ts","webpack:///components/saved-queries/bootstrap/saved-queries-menu/saved-queries-menu.component.html","webpack:///analytics/heatmap/bootstrap/index.ts","webpack:///core/web-services/config/ccapp.ts","webpack:///src/app/search/search.component.ts","webpack:///src/app/search/search.component.html","webpack:///core/notification/public-api.ts","webpack:///components/autocomplete/bootstrap/index.ts","webpack:///analytics/finance/money-timeline/money-timeline.component.ts","webpack:///analytics/finance/money-timeline/money-timeline.component.html","webpack:///components/saved-queries/messages/en.ts","webpack:///analytics/network/edge-info-card.component.ts","webpack:///analytics/network/edge-info-card.component.html","webpack:///components/utils/directives/tooltip/tooltip.directive.ts","webpack:///core/modal/index.ts","webpack:///components/baskets/bootstrap/manage-baskets/manage-baskets.ts","webpack:///components/baskets/bootstrap/manage-baskets/manage-baskets.html","webpack:///components/preview/bootstrap/facet-preview-2/facet-preview.component.ts","webpack:///components/preview/bootstrap/facet-preview-2/facet-preview.component.html","webpack:///components/saved-queries/index.ts","webpack:///components/facet/index.ts","webpack:///analytics/timeline/index.ts","webpack:///components/search/bootstrap/load-more/load-more.ts","webpack:///components/search/bootstrap/load-more/load-more.html","webpack:///components/alerts/bootstrap/alerts-menu/alerts-menu.component.ts","webpack:///components/alerts/bootstrap/alerts-menu/alerts-menu.component.html","webpack:///components/search/public-api.ts","webpack:///analytics/heatmap/index.ts","webpack:///core/load-component/index.ts","webpack:///analytics/googlemaps/index.ts","webpack:///components/facet/bootstrap/facet-card/facet-card.ts","webpack:///components/facet/bootstrap/facet-card/facet-card.html","webpack:///components/baskets/messages/en.ts","webpack:///components/alerts/index.ts","webpack:///components/saved-queries/bootstrap/facet-recent-queries/facet-recent-queries.ts","webpack:///components/saved-queries/bootstrap/facet-recent-queries/facet-recent-queries.html","webpack:///analytics/timeline/bootstrap/timeline-legend.component.ts","webpack:///core/web-services/suggest-query.web.service.ts","webpack:///components/advanced/bootstrap/advanced-form-range/advanced-form-range.ts","webpack:///components/advanced/bootstrap/advanced-form-range/advanced-form-range.html","webpack:///core/notification/notifications.interceptor.ts","webpack:///components/preview/bootstrap/preview-page-form/preview-page-form.component.ts","webpack:///components/preview/bootstrap/preview-page-form/preview-page-form.component.html","webpack:///components/autocomplete/autocomplete.directive.ts","webpack:///components/advanced/bootstrap/advanced-form-multi-input/advanced-form-autocomplete-multi-input.directive.ts","webpack:///components/user-settings/bootstrap/user-settings-editor/user-settings-editor.ts","webpack:///components/user-settings/bootstrap/user-settings-editor/user-settings-editor.html","webpack:///core/modal/public-api.ts","webpack:///analytics/network/providers/records-provider.ts","webpack:///analytics/googlemaps/messages/de.ts","webpack:///core/web-services/query.web.service.ts","webpack:///analytics/fusioncharts/fusioncharts.module.ts","webpack:///components/status-bar/messages/en.ts","webpack:///components/action/bootstrap/dropdown.directive.ts","webpack:///core/web-services/recent-queries.web.service.ts","webpack:///components/advanced/public-api.ts","webpack:///components/utils/public-api.ts","webpack:///analytics/network/public-api.ts","webpack:///analytics/network/network-sample-configs.ts","webpack:///analytics/vis-timeline/public-api.ts","webpack:///src/main.ts","webpack:///components/metadata/metadata-access-lists-item/metadata-access-lists-item.ts","webpack:///components/metadata/metadata-access-lists-item/metadata-access-lists-item.html","webpack:///components/search/bootstrap/did-you-mean/did-you-mean.ts","webpack:///components/search/bootstrap/did-you-mean/did-you-mean.html","webpack:///core/login/login.module.ts","webpack:///$_lazy_route_resource lazy namespace object","webpack:///core/app-utils/public-api.ts","webpack:///analytics/network/providers/index.ts"],"names":["BsTabs","searchService","iconMap","events","results","tabs","currentTab","getCurrentTab","searchtabs","undefined","changes","update","tab","search","selectTab","next","selector","templateUrl","customtabs","BsStatusBarModule","imports","declarations","exports","AbstractFacet","actionsChanged","collapsed","expanded","settingsOpened","template","settingsTpl","read","headerTpl","subHeaderTpl","footerTpl","BsResultsHeatmapView","appService","facetService","selectionService","formBuilder","cdRef","prefs","resultsViewService","theme","height","width","maxX","maxY","settingsAction","action","showSettings","onOpenSettings","updater","icon","text","title","selected","item","selectView","selectResultsViewName","actions","push","MemorySizePipe","formatService","intlService","changeDetectorRef","key","value","formatMemorySize","name","pure","enHeatmap","merge","frHeatmap","deHeatmap","PrincipalWebService","startConfig","httpClient","_events","complete","params","get","makeUrl","makeParams","userId","post","pipe","autoAuthenticate","noAutoAuthentication","observable","subscribe","response","principal","error","console","log","_principal","type","providedIn","RECENT_DOCUMENTS_CHANGE_EVENTS","MAX_DOCUMENTS","RecentDocumentsService","userSettingsService","maxDocuments","_changes","event","recentdocuments","forEach","rd","isString","date","toDate","indexOf","record","addDocument","i","recentdocumentIndex","id","ic","length","recentdocument","q1","q2","getTime","original","addRecentDocument","url1","treepath","docformat","authors","Date","sort","comparator","splice","patchRecentDocuments","index","detail","auditEvents","patch","recentDocuments","userSettings","BsFacetFilters","enableCustomization","autoAdjust","autoAdjustBreakpoint","collapseBreakpoint","rightAligned","filters","hidden","facetStatus","add","remove","defaultFacets","facets","facet","position","view","allFacets","buildFilters","filteredFacets","map","children","component","componentInputs","aggregation","searchable","displayActions","disabled","hasData","styles","hasFiltered","addFacetMenu","facetName","outFacets","userFacets","hasFacetSelected","removeAllFacet","addAllFacet","find","userFacet","removeFacet","addFacet","add_action","new_facets","pos","findIndex","styleUrls","size","LoadComponentDirective","loadComponentService","viewContainerRef","eventEmitter","loadedComponent","currentComponent","options","bindComponent","unbindComponent","componentRef","destroy","emit","loadComponent","enAdvanced","frAdvanced","deAdvanced","enFinance","frFinance","deFinance","enBaskets","frBaskets","deBaskets","BsThemeToggleModule","providers","BsPreviewEntityPanelComponent","collapsible","startUnchecked","facetChecked","_entities","entities","previewData","Object","keys","highlightsPerCategory","filter","entity","data","categoryDisplayLabelPlural","categoryDisplayLabel","values","checked","previewDocument","style","enResult","frResult","deResult","BsAutocompleteList","clicked","_active","_cursor","active","items","_items","markForCheck","selectedValue","stopPropagation","preventDefault","itemTpl","BsPreviewPopup","model","previewService","uiService","screenSize","resizeSubscription","resizeEvent","updatePreviewData","unsubscribe","getPreviewData","query","previewDataError","currentId","records","getSearchPositionInPage","screenSizeIsGreaterOrEqual","searchPosition","ResultSource","displayTreepathMinLevel","displayUrl","source","displayTreepath","substr","split","slice","displayTreepathMaxLevel","path","array","display","join","url","addFieldSelect","IteratorAdaptor","base","adaptor","v","translate","e","result","done","Symbol","iterator","iterable","network","settings","physics","springLength","springConstant","damping","repulsion","gravity","defaults","refresh","fetchMoreAll","fetchMoreAllText","fetchMoreAgg","expandNode","expandNodeWith","toggle","inactive","reset","resetTitle","filterSearch","filterSearch2","enrichNode","expandMeta","collapseMeta","infocards","count","expand","collapse","close","focus","ProviderFactory","nodeOptions","field","color","createNodeType","createFontAwesomeNodeOptions","createDynamicFontAwesomeNodeOptions","getQuery","trigger","nodeType","_nodeType","originalNodeOptions","node","_no","shape","face","weight","code","logScale","font","imageUrl","background","image","vadjust","getImageUrl","_size","isNumber","isFunction","createImageNodeOptions","createFontAwesomeNodeType","createDynamicFontAwesomeNodeType","recordType","fieldTypes","edgeOptions","Error","nodeTypes","createEdgeOptions","parse","createCustomStructuralEdgeTypes","displays","fieldValue","valuesSplit","displaysSplit","relations","directed","createAggregationEdgeOptions","nodes","edge","dashes","toString","createAggregationEdgeType","aggregations","includeSameType","edges","j","smooth","isBoolean","highlight","hover","opacity","edgeTypes","hideRecordNode","structEdges","permanent","sourceProviders","edgeType","secondaryEdgeTypes","min","scale","pow","Math","round","log2","window","moment","notificationAnimations","timings","BsNotification","notificationsService","notification","autoClose","state","delay","then","closeNotification","animations","Autofocus","elementRef","element","nativeElement","offsetWidth","setFocus","FocusKeyListItemDirective","tabindex","role","BsAdvancedFormInput","label","getLabel","control","form","viewValue","_valueChangesSubscription","valueChanges","val","_updateControl","normalized","markAsDirty","setValue","emitEvent","onItemChange","suggestQuery","FEATURES","FACETS","showCount","allowExclude","allowOr","allowAnd","displayEmptyDistributionIntervals","METADATA","BsHelp","sanitizer","helpUrl","bypassSecurityTrustResourceUrl","Breadcrumbs","copy","advanced","fields","Set","expr","expr1","init","every","expr2","exprContext","resolveColumnAlias","has","expr3","selects","select","textExpr","isStructured","exprOrField","activeSelects","eqNC","getFields","parseExpr","escape","makeBreadcrumbsItemFromExpr","addFields","basket","ccquery","allowEmptySearch","isEmptySearchIgnoreSelects","expression","initItems","item1","activeItem","activeIndex","breadcrumbs","isAggregationEdgeType","et","AggregationProvider","skips","types","sourceNode","context","skip","addSelect","exprBuilder","makeExpr","getNodeValue","getCCAggregation","warn","getResults","searchInactive","updateDataset","addAggregationNodes","provider","dataset","rawData","operands","getNodeId","lastNode","createNode","addNodes","relation","addEdges","createEdge","aggregationItem","clear","fetchAggregations","connectedNodes","getConnectedNodes","separator","formatMessage","agg","createExpandAction","withtext","enMetadata","frMetadata","deMetadata","SqErrorCode","SqError","message","isUndefined","loginCancelled","processedCredentialsError","principalSwitched","autoLoginError","HttpService","api","addUrl","apiPath","makeHttpParams","app","BASKET_CHANGE_EVENTS","BASKET_COMPONENTS","BasketsService","modalService","basketComponents","selectedRecordsAction","buildBasketsAction","basketIndex","baskets","unshift","patchBaskets","prevIndex","arraySet","savedquery","ids","skipPatch","isArray","removeFromBasket","updateSearch","obs","makeQuery","setQuery","recordBaskets","basketFilter","b","includes","allowNew","open","selectBasketModal","addToBasket","editBasketModal","yesNo","updateBasket","createBasket","manageBasketsModal","updateBaskets","$event","addToBasketModal","getSelectedIds","removeFromBasketModal","haveSelectedRecords","BsFacetPreview","recordOpened","downloadUrl","makeDownloadUrl","documentCachedContentUrl","doc","startSmall","iframeClass","sandbox","similarDocuments","FacetNgxChart","colors","filteredColor","selectedColor","selectedValues","tickFormatter","formatNumber","clearFilters","clearFiltersSearch","getName","selectField","a","ngOnChanges","dataPoints","formatValue","$item","$selected","getColumnAlias","getColumn","column","toLowerCase","chartType","colorScheme","getItemColor","dataPoint","getItem","isFiltered","toSqlValue","localeChange","makeData","selectionChange","getAggregation","updateSelectedValues","createChartOptions","addFilterSearch","removeFilterSearch","itemFiltered","_dataPoint","BsSelectionModule","provide","useValue","BsPreviewHighlights","keepAllFilter","SimpleHighlightCategoryFilterState","keepNoneFilter","None","initialize","previewReady","moveToFirstSearchTerm","highlightDataPerCategory","highlightDataPerLocation","highlightsPerLocation","navigationState","SimpleHighlightNavigationState","nonEmptyCategoryIds","current","filterHighlights","filteredHighlightData","FilteredHighlightDataPerLocation","total","positionInCategories","category","selectHighlight","categoryId","startsWith","Number","isNaN","highlightData","getHighlightValueCount","categoryIsEmpty","firstCategory","choice","Value","filterValue","filter1","filter2","compare","displayValue","getHighlightText","All","categories","param","_filterValue","baseData","counter","locationIsIncluded","AuthenticationOauthService","sharedService","popupService","configService","userData","sqInitState","tokenInCookie","loginInPopup","noUserOverride","ret","defaultChart","FusionChart","cardComponent","chart","autohide","initialized","aggregationChange","typeChange","ready","dataSource","updateData","selectType","t","chartObj","_collapsed","isSelected","defaultColor","dataObj","MetadataItem","showTitle","showIcon","showCounts","clickable","tabular","collapseRows","_select","needsCollapse","valueItems","isEmpty","itemLabelMessageParams","isTree","isEntity","isCsv","paths","parts","entityItems","Array","ensureScalarValue","collapsable","subIndex","valueItem","treepathLast","accesslists","accessListIndices","classes","HighlightCategoryFilterChoice","nodeList","callbackfn","from","PreviewDocument","_window","contentWindow","frames","_document","document","body","appendChild","querySelectorAll","n","textContent","svgList","svg","tspanList","getElementsByTagName","jc","tspan","bgId","getAttribute","rect","getFirst","getDocElements","resizeSvgBackground","clearHighlightSelection","previousElement","getElementById","setHighlightSelection","scrollIntoView","block","classList","SELECTED_HIGHLIGHT_CLASS","elements","parentNode","removeChild","updateHighlightFilterState","some","contains","FILTERED_OUT_HIGHLIGHT_CLASS","elementIsFilteredOut","on","hasAttribute","BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE","ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE","elt","isFirst","isLast","isSvgElement","setHighlightSelectionSVG","setHighlightSelectionHTML","SELECTED_HIGHLIGHT_FIRST_FRAGMENT_CLASS","SELECTED_HIGHLIGHT_LAST_FRAGMENT_CLASS","group","rectPosition","getBBox","top","y","bottom","left","x","right","valueTransform","addSvgLine","x1","y1","x2","y2","transform","line","createElementNS","setAttribute","SVG_LINE_CLASS","String","tagName","textBoxPixel","getBoundingClientRect","textBoxSVG","scaleX","scaleY","deltaX","deltaY","firstCharRect","getExtentOfChar","tspanWidth","getComputedTextLength","list","eltList","elementClass","getElementCategory","filterState","categoryIds","Labels","labelsService","enableDelete","publicLabelsField","privateLabelsField","labelsField","showLabels","makeLabels","labels","removePrivatePrefix","selectLabels","canRemove","removeLabels","allowPublicLabelsManagement","userLabelsRights","canManagePublicLabels","hostClasses","Confirm","modalRef","button","click","QueryIntentWebService","endpoint","appName","PreviewWebService","browserUrl","$auditRecord","responseType","err","JsonMethodPluginService","method","isObject","messages","intl","locale","d3","format","time","SAVED_QUERIES_CHANGE_EVENTS","SAVEDQUERY_COMPONENTS","SavedQueriesService","queryExportService","downloadService","savedQueryComponents","_item","_event","exportModal","Selection","Result","savedqueryIndex","savedqueries","patchSavedQueries","savedQueries","addSearchParams","appWebService","queryRssEnabled","queryExport","download","requestExport","exportResult","webService","maxCount","exportedColumns","exportSelection","SavedQuery","exportSavedQuery","queryName","extend","savedQuery","editSavedQueryModal","updateSavedQuery","createSavedQuery","manageSavedQueriesModal","updateSavedQueries","exportType","hasExportConfig","Promise","resolve","Csv","exportSavedQueryModal","BsManageSavedQueries","savedQueriesService","reordering","nameValidators","required","modelControl","root","unique","buttons","removeAllButton","visible","addAuditEvent","primary","auditEvent","drop","arrayMove","previousIndex","currentIndex","dropped","RfmWebService","rfm","flags","queryHash","rfmQueryHash","DefaultLocalesConfig","defaultLocale","locales","BsFacetSavedQueries","searchRoute","maxQueries","page","manageSavedQueries","previousPage","maxPage","nextPage","notifyOpenSavedQuery","deleteSavedQuery","queryParams","toJsonForQueryString","audit","max","ceil","AutocompleteFieldSearch","suggestService","fieldSearchMode","excludedFields","fieldSearchItems","fieldSearchItemsContainer","_fieldSearchSubscription","itemRemoved","updatePlaceholder","submit","fieldSearchExpression","and","exprToItem","getInputValue","parseResult","parseQuery","res","findValue","getInputPosition","replaceValueInForm","includedFields","setInputValue","setCaret","inputElement","start","insertAutocompleteItem","itemsToExpr","concatAndExpr","processSuggests","getSuggestsObs","suggests","getState","ACTIVE","OPENED","dropdown","hasItems","allowEmptyValues","keydown","keyCode","backspace","pop","_placeholder","placeholder","ResultIcon","BsDeleteLabel","isProcessing","properties","btnText","alert","_action","deleteLabels","bulkRemoveLabels","anchor","nature","onLabelsChanged","ExprBuilder","formatField","operator","isDate","to","concatWithOperator","exprs","combineWithAnd","makeAndExpr","makeOrExpr","valuesAreExpressions","concatOrExpr","asValueItems","makeFieldExpr","$path","BsResultSelector","ValuePipe","formatFieldValue","replace","ResultLabels","caption","BsResultLinkPreview","usePopup","ctrlKey","openNewWindow","openModal","displaySimilarDocuments","metadata","newWindow","openRoute","BsFeedbackMenu","feedbackService","buildFeedbackAction","changeDetection","OnPush","missingTerms","resultsCount","userRatings","average","MoneyCloudComponent","el","moneyValueColumn","moneyAggregation","margin","showTooltip","parseEntity","counts","rawvalue","amount","currency","valuestr","parseFloat","set","turnoffTooltip","tooltipItem","removeSelect","updateSelectedItems","range","innerWidth","x_inner","innerHeight","r","c","viewInit","drawYAxis","drawXAxis","updateChart","xAxis$","gx","yAxis$","gy","overlay","onMousemove","detectChanges","updateScales","updateAxes","Map","datum","d","yExtent","rExtent","domain","bandwidth","selectedItems","getSelectedItems","xAxis","call","yAxisTicks","ticks","tick","isInteger","yAxis","tickSizeInner","tickValues","tickFormat","moneyFormatter","actualWidth","relativeX","tooltipOrientation","tooltipLeft","tooltipRight","tooltipTop","findSelect","darkStyle","ResultMissingTerms","termspresence","tp","presence","term","LabelPipe","_public","AbstractIntlPipe","lastValue","lastParams","equals","updateValue","BsUserSettingsModule","SimilarDocumentsWebService","sourceDocumentId","AdvancedService","validationService","validators","minValidator","_parser","maxValidator","email","pattern","integer","integerValidator","number","numberValidator","dateValidator","rangeValidator","_rangeType","asyncValidators","getValue","createControl","getRangeValue","getBooleanValue","getAdvancedExpr","getValueFromExpr","formatValueItems","formatAdvancedValue","_value","JSON","setAdvancedSelect","allowFalsy","makeBooleanExpr","_isValueItem","makeNumericalExpr","makeRangeExpr","toStandard","_isValueItemArray","formatValueItem","formatBaseAdvancedValue","castAdvancedValue","formatter","testInteger","toInt","isDouble","testFloat","toNumber","isTrue","updateOn","parser","parseValue","rangeType","condition","hasOwnProperty","defaultOptions","minHeight","maxHeight","axis","ResultTimeline","visTimelineService","min_year","max_year","min_dates","max_dates","initDone","updateTimeline","dates","all_ids","all_dates","data_date","cooc","substring","year","getFullYear","content","dateobj","setItems","BsAutocompleteModule","AuditFeedbackType","FeedbackService","auditService","thankUser","notify","success","headerGroup","createAction","openFeedbackModal","output","rowCount","prompt","trim","sendUserFeedback","BsActionButtons","_options","inMenu","href","opts","SuggestService","suggestQueryWebService","suggestFieldWebService","fieldCategory","_fields","eType","isScalar","primaryText","secondaryText","obj","findMatch","score","displayHtml","textLower","removeAccents","matches","html","concat","match","BsResultsViewSelector","useDropdownMenu","_subscription","resultsViewSelected","setCurrentViewAction","viewAction","resultsView","views","messageParams","includedViews","getIncludedViews","buildViewAction","selectResultsView","collapseButton","NetworkDataset","nodeIdx","edgeIdx","getNodes","getEdges","addNode","addEdge","removeNode","removeEdge","nodeId","keepDanglingNodes","getAdjacentEdges","neighbor","getNode","removeEdges","removeNodes","assign","hasNode","existingNode","precedence","temp","hasEdge","existingEdge","getEdge","getVisibleNodes","getVisibleEdges","SponsoredLinksWebService","webservice","currentLocale","BsModalFooter","injector","isProcessingState","currentValue","validation","controls","environment","autoSAMLProvider","production","IAction","Action","child","BsSortSelector","buildSortAction","sortAction","sortingChoices","getSortingChoices","queryOrderBy","orderBy","isAscendingSort","orderByClause","isDescendingSort","sortingChoice","setCurrentSort","hasRelevance","selectSort","lastElement","lastIndexOf","tabSearch","isActive","isTabSearch","tabName","s","q","BsBreadcrumbs","allowDeletion","displayFieldNames","home","selectBreadcrumbsItem","removeBreadcrumbsItem","RESULTS_VIEWS","DEFAULT_VIEW","ResultsViewService","defaultView","resultsViews","router","route","_resultsViewSelected","_resultsViews","_resultsView","handleNavigation","resultsStream","pendingView","queryStringParams","navigate","skipSearch","beforeSearch","waitForResults","makeURL","getView","searchParams","setResultsView","beforeEvent","promises","all","ok","reason","viewName","included","includedTabs","excludedTabs","NotificationsService","_notificationsStream","notifications","lastNotification","deleteNotification","ValidationMessageComponent","info","Prompt","inputControl","input","formChanges","invalid","dirty","submitted","valid","cancel","ComponentWithLogin","loginService","loginComplete","loginSubscription","onLoginComplete","login","FocusKeyListDirective","withWrap","itemSelect","keyManager","setActiveItem","components","onKeydown","activeItemIndex","DownloadWebService","header","headers","fileName","navigator","msSaveOrOpenBlob","link","createElement","blobUrl","URL","createObjectURL","revokeObjectURL","BsMySearch","useBadges","ignoreText","excludedFacets","clearAction","getField","BsPrompt","BsNotificationModule","BsUserMenuComponent","principalService","authenticationService","loginAction","logoutAction","logout","overrideAction","userOverride","userName","overrideUser","revertOverrideAction","adminAction","adminUrl","languageAction","iconAfter","use","resetUserSettings","confirm","confirmType","updateMenu","_loginSubscription","_principalSubscription","userActions","userOverrideActive","isAdministrator","isDelegatedAdmin","menu","LOAD_COMPONENT_MODULE_PROVIDERS","BsPageSizeSelector","showInRegularView","refreshVisualisation","availableSizes","pageSizes","defaultPageSize","updatePageSize","pageSizingAction","buildPageSizingAction","setCurrentSize","currentPageSize","selectedAction","pageSize","configPageSize","DefaultPageSize","showInCustomization","RoundTarget","RoundType","BsFacetRange","advancedService","manualRefresh","value1","roundNearest","m","weekDay","weekday","week","weekYear","onResize","clearFiltersAction","clearRange","applyFiltersAction","applyRange","multiple","roundType","up","down","nearest","adjustUp","adjustDown","abs","step","floor","_roundNumberUp","_roundNumberDown","upper","lower","target","_getNearestDate","month","getMonth","day","getDate","_getNearestTargetDate","getHours","getMinutes","getSeconds","getMilliseconds","roundAdjustment","getDay","adjust","_date","_roundNumber","_round","roundTarget","roundMultiple","dateStr","secondsSep","seconds","operatorResults","fromSysDateStr","fixDate","str","toDuration","toSize","stepDefs","stepDef","thisStep","minRange","getRoundTarget","oneDay","draggableRange","enforceStep","initMinMax","initStep","sliderActive","roundDown","roundUp","getRange","rangeActive","rangeSelected","startValue","highValue","startHighValue","addElementResizeListener","slider","removeElementResizeListener","changeContext","valFrom","valTo","setRange","NotificationModule","BsPreviewSearchFormComponent","searchText","searchControl","ModalModule","confirmModal","promptModal","ngModule","BsAdvancedFormAutocomplete","UpdateItem","_dropdownSubscription","SELECTED","setAutocompleteItem","suggest","START","INIT","blur","inputChanged","BsHeatmapModule","AppUtilsModule","enUtils","frUtils","deUtils","VALIDATION_MESSAGE_COMPONENT","ValidationDirective","validationMessageComponent","controlName","validClass","invalidClass","childSelector","errorMessages","formControlName","errors","getErrorText","firstError","getFirstError","errorInfo","getErrorInfo","setValidityClasses","validationMessage","instance","removeValidityClasses","NumberPipe","BsTooltipComponent","orientation","enValidation","frValidation","deValidation","BsBasketsMenuComponent","basketsService","_","createBasketModal","manageAction","basketsActions","hasBasket","scrollGroup","searchBasket","NgxChartsModule","ArrayBasedView","nameSelector","valueSelector","toNameValuePair","forIterable","callback","thisArg","idx","NameValueArrayViewHelper","p","nameKey","valueKey","BsFullscreenActivator","buildAction","isFullscreen","getFullscreenIcon","getFullscreenTitle","toggleFullscreen","docEl","documentElement","requestFullScreen","cancelFullScreen","requestFullscreen","cancelFullscreen","ResultTitle","titleLinkBehavior","titleClicked","titleField","getTitle","documentUrl","escapeHtml","displayTitle","isLink","hasLinkBehaviour","notifyOpenOriginalDocument","hasUrl","originalDocTarget","encapsulation","isEmptyInputValue","processInputValue","EMAIL_REGEXP","ValidatorType","errorMessagesMap","requiredTrue","minlength","maxlength","ValidationService","cmp","parseDate","actual","value2","date1","date2","num1","num2","nullValidator","regex","regexStr","charAt","RegExp","test","requiredPattern","actualValue","BsResultsSelector","selectionActions","reverse","BsThemeToggleComponent","showLabel","tooltips","localStorage","tooltip","setItem","toggleTheme","SuggestFieldWebService","BsHeatmapComponent","transition","itemsClickable","axisClickable","buckets","itemClicked","axisClicked","dataFiltered","wrap","self","textLength","fullText","append","xLabels","yLabels","buildChart","duration","tickSize","selectAll","each","attr","onAxisClicked","legend","quantiles","bucketWidth","NOTIFICATION_MODULE_PROVIDERS","BsEditBasket","nameControl","basketName","BsFacetTree","expandedLevel","forceMaxHeight","subscriptions","filtered","hiddenSelected","suggestDelay","searchActive","noResults","initNodes","level","$filtered","hasChildren","$opened","suggest$","text$","suggestionsToTreeAggregationNodes","myGroup","searchQuery","originalItems","refreshHiddenSelected","filterItemsOr","excludeItems","not","searchItems","clearSearch","levelCallback","subscription","VoiceRecognitionService","recognizing","ignore_onend","started","available","onResult","transcript","onStart","start_timestamp","timeStamp","onEnd","onError","recognition","lang","warning","webkitSpeechRecognition","continuous","interimResults","addEventListener","removeEventListener","stop","CollapseModule","QueryExportWebService","methodName","errorMessage","logErrorToConsole","preliminaryCheckResult","preliminaryCheck","postData","doExport","selection","observe","readBlobFileName","BsFacetRecentDocuments","recentDocumentsService","openOriginal","documentOpened","deleteRecentDocument","defaultScreenSizeRules","xxl","xl","lg","md","sm","xs","UtilsModule","MODAL_LOGIN","LoginService","loginModal","beforeUnloadEventListener","userOverrideFailed","hideNotifications","deactivateUserOverride","setComplete","appNeeded","hash","location","URLSearchParams","k","overrideDomain","pathname","makeObservables","observables","loadUserSettings","load","automatic","acceptCurrent","processedCredentials","usePopupForLogin","autoLoginActive","toPromise","reject","firstCaller","automaticProvider","getAutomaticProvider","automaticLoginPromise","authenticateWithProvider","credentials","loginModalPromise","processCredentialsPromise","authenticate","checkPrincipalPromise","switchPrincipal","is","gClassName","DISABLED","SHOW","DROPUP","DROPRIGHT","DROPLEFT","MENURIGHT","MENULEFT","POSITION_STATIC","gSelector","DROPDOWN","DATA_TOGGLE","FORM_CHILD","MENU","NAVBAR_NAV","VISIBLE_ITEMS","gAttachmentMap","TOP","TOPEND","BOTTOM","BOTTOMEND","RIGHT","RIGHTEND","LEFT","LEFTEND","BsDropdownService","rendererFactory","dataApiKeydownHandler","descendant","matchDescendant","which","space","esc","closest","parent","getParentFromElement","HTMLElement","Element","querySelector","dispatchEvent","Event","bubbles","offsetHeight","clearMenus","sourceEvent","formChildClick","renderer","createRenderer","unlisteners","listen","unlistener","parentElement","hrefAttr","getSelectorFromElement","UserPreferences","property","skipSync","sync","prototype","BsFacetTimelineComponent","timeseries","zoomable","minZoomDays","maxZoomDays","curveType","showLegend","legendStyles","legendOrientation","legendYOffset","eventClicked","formatDayRequest","events$","getRecordsAsEvents","currentRange","minDate","maxDate","parsedexpr","isLeaf","interval","timeseries$","mergedTimeseries$","updateTimeseries","mergedEvents$","updateEvents","config","subject","minAggregationDate","maxAggregationDate","getTimeseries","getEventAggregation","createTimeseries","ccaggregation","createAggregationEvents","defaultRecordStyle","aggregationName","fetchAggregation","nmonths","maxNMonths","jMin","bestAggregation","updateCombinedAggregation","closeTooltip","createDatapoints","mask","lineStyles","areaStyles","toUTCString","getDisplay","resolution","timeInterval","getD3TimeInterval","series","offset","shiftDate","onSelectionChange","onRangeChange","legendEvents","ResultThumbnail","linkBehavior","defaultThumbnail","thumbnailClicked","thumbnailColumn","thumbnailUrl","updateUrlForCors","enCore","frCore","deCore","AsyncRecordsProvider","BsFacetModule","TooltipComponent","formatters","getMessageFormat","getNumberFormat","Intl","NumberFormat","getDateTimeFormat","DateTimeFormat","getRelativeTimeFormat","RelativeTimeFormat","getPluralRules","PluralRules","DATE_TIME_FORMAT_OPTIONS","NUMBER_FORMAT_OPTIONS","RELATIVE_TIME_FORMAT_OPTIONS","LOCALES_CONFIG","INTL_CONFIG","DEFAULT_FORMATS","sqDateTime","hour","minute","second","sqDate","sqYear","sqMonthYear","sqWeek","minimumIntegerDigits","useGrouping","sqNoGrouping","sqZeroDecimalPlaces","maximumFractionDigits","sqOneDecimalPlace","sqTwoDecimalPlaces","sqThreeDecimalPlaces","sqFourDecimalPlaces","sqFiveDecimalPlaces","IntlService","intlConfig","localesConfig","messagePrefix","textPrefix","language","languages","getBrowserLanguages","getLocale","formats","initialLocale","getInitialLocale","loadLocale","names","approximate","locale1","getLanguage","store","newLocale","loadData","direction","intlLocale","observable2","_default","getDefaultMessages","getMessages","defaultMessages","allowNone","end","lang1","charCodeAt","lang2","iStart","len","defaultLang","nextLang","curLang","hasValues","formattedMessage","sysLangStr","sysLang","_values","valueName","eq","getMessage","processFormatMessage","isValid","props","whitelist","reduce","getNamedFormat","filteredOptions","filterProps","diff","now","absDiff","oneSecond","unit","oneMinute","roundAway","oneHour","makeRelativeTimeParams","numeric","sepPos","userLanguage","browserLanguage","systemLanguage","FinanceModule","BaseProvider","EDGESEPARATOR","activateAction","getData","resetAction","node1","node2","customProps","col","fromNode","toNode","getEdgeId","middle","scaleFactor","enabled","nodeFrom","nodeTo","label1","label2","exprFrom","exprTo","ExprPipe","toMessage","asHTML","encodeHTML","AppWebService","appVersionId","versionId","BsFacetList","showProgressBar","data$","items$","filtering","suggestions$","loadingMore","suggestions","suggestionToAggregationItem","filterItemsAnd","getAggregationCount","nonFilteredItems","refreshFiltered","isDistribution","sumOfCount","acc","getAggregationItemsFiltered","indx","filteredIndex","hasSuggestions","findAggregationItemIndex","updateSelected","resultsLength","JWTService","user","password","csrfToken","ModalRef","overlayRef","_checkClose","_beforeClosed","_afterClosed","submitListener","asObservable","checkCloseEvent","cancelled","removeSubmitListener","detachBackdrop","dispose","componentInstance","formElement","overlayElement","BsPreviewEntityFacetComponent","itemsChecked","sortFreq","nav","unselectAll","toggleHighlight","checkAction","foundHidden","foundNotHidden","sortAlphaAction","sortFreqAction","locations","navValue","selectEntity","indexes","getEntityIndexes","currentCategory","highlightValue","localeCompare","BsScroller","observer","IntersectionObserver","entry","isIntersecting","loadMore","disconnect","enLogin","frLogin","deLogin","BsNotifications","loadNotifications","thousands","enSelection","frSelection","deSelection","BsFacetBar","containerIndex","getFacets","DATE_PICKER_VALUE_ACCESSOR","useExisting","BsDatePicker","multi","SystemFormat","onChangeCallback","picker","isOpen","hide","show","setLocale","containerClass","showWeekNumbers","dateInputFormat","system","localeData","longDateFormat","zeroTimes","setHours","fn","BsFeedbackModule","LABELS_COMPONENTS","LabelsService","labelsWebService","principalWebService","notificationService","labelsComponents","_privateLabelsPrefix","labelsRights","labelsRightsSubscription","oldValues","newValue","_modalProperties","renameModal","deleteModal","addModal","allowManagePublicLabels","allowEditPublicLabels","allowPublicLabelsEdition","canEditPublicLabels","allowNewLabels","radioButtonsConf","_getModalRadioButtonsConf","publicRight","isPublic","disableAutocomplete","radioButtons","publicRadioButton","privateRadioButton","editLabelModal","valuesToBeAdded","valuesToBeRemoved","editModal","cclabels","selectedLabels","getSelectedLabels","addPrivatePrefix","getValues","newLabel","rename","bulkAdd","bulkRemove","privateLabelsPrefix","_addPrivatePrefix","_removePrivatePrefix","labelsAutoSuggestWildcard","allowPublicLabelsCreation","allowPublicLabelsModification","rights","getUserRights","defaultLabelsRights","ResultExtracts","dateFormat","longExtracts","showTextAlways","extractsClass","showLongExtracts","recordExtracts","maxLongExtracts","relevantExtracts","limitLinesDisplayed","setup","showLinesExpander","hideDate","IntlInitializer","IntlModule","localeConfig","useClass","useFactory","deps","enFeedback","frFeedback","deFeedback","RelativeTimePipe","formatRelativeTime","MetadataAccessListsItemSingleAccessList","authorized","collapseClick","accessList","Expr","_field","_display","_displayObj","op1","valueInit","ExprParser","unescape","unescapeList","near","opsInit","addOperand","op2","operand","contextField","prepend","fieldPartnamePrefix","getOperatorText","escapeValue","sb","added","shouldDisplayField","normalizeField","withFields","inner","addFieldToString","getOperatorString","getValueString","bracketed","first","_toString","ctxt","_addValue","valueId","valueIndex","addOperator","displayObj","addText","addFieldLabel","useDisplay","showNot","hideOuterNot","showField","addField","addDisplay","addValue","_toMessage","matchNode","child1","found","child2","field1","positive","resolveColumnName","column1","isPositive","defaultScope","regExp","evaluationRegExps","haveWildcards","escaping","ch","dataValue","equality","NaN","dataValue1","getWildcardRegExp","getDataValue","ret1","evaluate","fromJson","_evaluationRegExps","getIsStructuredField","mergedStructured","isStructuredField","allowEmptyValue","resolveField","location1","location2","disallowFulltext","eqNCN","trimStart","trimEnd","last","vl","sepLen","sep","vls","valuesAndLocationsFromText","vl1","getValueAndLocation","endsWith","field2","operator1","operator2","expr1StructuredCount","expr1UnstructuredCount","expr2StructuredCount","expr2UnstructuredCount","values1Length","values2Length","ExprParserOperator","tok","valuePos","valueLen","tokValue","tokValuePos","tokValueLen","or","lPar","rPar","eof","expressions","operators","op","prevOp","saveOp","keyword","sbCurrentValue","suffixCh","keywordLen","kh","nch","endChars","matchUntil","allowRanges","canBeEmpty","canBeTokValue","_getTokValue","defaultNearValue","escapes","pos1","allowScopedFields","isValidScopedSimpleName","isValidSimpleName","forcePartname","isPartname","$columnFieldsPattern","hasPatterns","isIncluded","$partnameFieldsPattern","nextValue","candidateFieldPos","fieldSpecified","getTokValue","ch1","matchKeyword","ensureNearValue","infix","getTerminators","matchSimpleValue","forceRange","findDisplay","displayStart","isValidFieldName","isAllowedField","contextDisplay","readToken","parsetbl","shift","peekField","peekDisplay","e1","e2","canBeMergeTarget","mergeExpr","isEscaped","values1","_i","_a","currentStart","defaultDashboardName","MAP_WIDGET","TIMELINE_WIDGET","NETWORK_WIDGET","CHART_WIDGET","HEATMAP_WIDGET","TAGCLOUD_WIDGET","MONEYTIMELINE_WIDGET","MONEYCLOUD_WIDGET","PREVIEW_WIDGET","DashboardService","urlSerializer","clipboard","dashboardChanged","debounceSave","debounce","patchDashboards","swap","draggable","ignoreContent","dragHandleClass","ignoreContentClass","resizable","itemChangeCallback","itemComponent","notifyItemChange","itemResizeCallback","fullscreenElement","gridster","curHeight","curWidth","scrollToNewItems","gridType","fixedRowHeight","minRows","minCols","openAction","updateOpenAction","updateAutoSaveAction","setLayout","layout","dashboard","autoSave","isDashboardSaved","dashboardShared","hasDashboard","getDashboard","db","setDashboardItems","updateSetDefaultAction","dashboards","defaultDashboard","addWidget","optionsChanged","option","rows","cols","newTitle","renameWidget","addWidgetOptions","dashboardActions","widget","selectedOption","toJson","urlTree","createUrlTree","origin","prepareExternalUrl","serialize","manualLayout","autoLayout","fixedLayout","newDashboard","deleteAction","saveAs","save","autoSaveAction","setDefaultAction","compactType","extractslocationsLabel","extractslocationsPluralLabel","geoLabel","geoPluralLabel","personLabel","personPluralLabel","companyLabel","companyPluralLabel","treepathLabel","treepathPluralLabel","matchlocationsLabel","matchlocationsPluralLabel","titleLabel","titlePluralLabel","authorsLabel","authorsPluralLabel","filenameLabel","filenamePluralLabel","modifiedLabel","modifiedPluralLabel","sizeLabel","sizePluralLabel","docformatLabel","docformatPluralLabel","documentlanguagesLabel","documentlanguagesPluralLabel","geo_label","geo_plural_label","person_label","person_plural_label","company_label","company_plural_label","treepath_label","treepath_plural_label","title_label","title_plural_label","authors_label","authors_plural_label","filename_label","filename_plural_label","modified_label","modified_plural_label","size_label","size_plural_label","docformat_label","docformat_plural_label","documentlanguages_label","documentlanguages_plural_label","accessLists","authorizedListTitleText","authorizedListHeader","deniedListTitleText","deniedListHeader","treeSeparator","treeNodeSeparator","listSeparator","empty_boolean","empty_number","LabelsAutocomplete","itemsUpdate","labelsItems","_suggestions","off","firstChange","newInitLabels","_getLabelsSuggestions","enter","_manageSetAutocompleteItem","StartConfigInitializer","startConfigWebService","WebServicesModule","START_CONFIG","StartConfigWebService","initStartConfig","appSpecifierIndex","appSpecifier","defaultStartConfig","getDefaultStartConfig","initialStartConfig","API_PATH","applicationPath","corsActive","create","_url","preLogin","versionDate","serverConfig","BaseModule","BsBasketsModule","DATE_RANGE_PICKER_VALUE_ACCESSOR","BsDateRangePicker","fromName","toName","fromToPicker","fromPicker","toPicker","rangeInputFormat","fromTo","setMinutes","setSeconds","setMilliseconds","closedRange","resetMinMaxDate","setMinMaxDate","AuditWebService","evt","sl","resultId","parameters","rank","resultsOrId","rfmParameters","treeFirstNode","collection","filename","fileext","databasealias","totalRowCount","rfmDetail","auditEnabled","BsSearchModule","searchOptions","BsNodeInfoCard","closed","nodeData","neighbors","stream","getPluralLabel","networkInstance","networkService","animation","selectNodes","Extract","BsPreviewExtractsPanelComponent","cdr","domSanitizer","extracts","loading","loadCompleteSubscription","extractAll","getHtmlPreview","createDocument","implementation","createHTMLDocument","write","startIndex","relevanceIndex","textIndex","sanitize","extract","bypassSecurityTrustHtml","scrollTo","cdkScrollViewport","scrollToIndex","scrollExtract","Document","AuditInterceptor","isArrayBuffer","isBlob","auditEvents1","auditRecord","mlAuditEvents","sessionid","getSessionId","isSessionStale","guid","sessionstart","lastSession","request","shouldIntercept","isJsonable","ensureAuditRecord","addSessionId","updateAuditRecord","handle","BsTimelineModule","ScrollIntoView","scrollIntoViewIfNeeded","SelectedRecordsProvider","selectionSubscription","SELECT","UNSELECT","SelectionEventType","defaultSelectionOptions","resetOnNewResults","resetOnNewQuery","storage","SELECTION_OPTIONS","SelectionService","selectionOptions","selectedRecords","haveRecords","newSelectedRecords","clearSelectedRecords","buildSelectRecordsAction","ssRecord","getRecordFromId","allRecordsSelected","selectCurrentRecords","newIndex","MOVE","newUnselectedRecords","toggleSelectedRecords","enAlerts","frAlerts","deAlerts","ValidationErrorPipe","getFirstErrorText","getFirstErrorInfo","AppComponent","alertsService","recentQueriesService","features","feature","buildSelectionAction","BsSelectComponent","opened","cancelBlur","clearSelected","stopImmediatePropagation","buttonElement","setOpen","toggleItemSelected","itemIndex","triggerOnChange","asArray","countSelected","selectCount","toggleOpen","BsActionItem","dropdownButton","dropdownListItem","inListItem","nodeName","isDropdownButton","isDropdownListItem","openElement","showDropdown","haveItem","isVisible","hasAction","screenSizeIsLess","haveIcon","haveSpace","showMenuClass","SEARCH_OPTIONS","SearchService","queryService","fetchingLoadMore","_queryStream","_resultsStream","routes","handleLogin","routerSubscription","currentNavigation","getCurrentNavigation","navigationTrigger","extras","restoredState","appSubscription","_query","clearQuery","newQuery","preventQueryNameChanges","defaultCCQuery","getCCQuery","resuseBreadcrumbs","treatQueryIntents","updateBreadcrumbs","attributes","queryid","queryId","_setResults","queryAnalysis","queryIntents","intent","analysis","actionProcessed","initial","skipLocationChange","recentQuery","selectItem","reuseBreadcrumbs","removeItem","isEmptySearch","homeRoute","queryIntentData","intentData","isFirstPage","queries","checkEmptySearch","makeQueryIntentData","getMultipleResults","analyzeQueryText","routingActive","currentPath","currentSearch","decodeURIComponent","navigationOptions","$refresh","navigation","history","isSearchRoute","checkSearchRoute","skipSearchRoutes","jquery","getQueryFromUrl","ensureQueryFromUrl","lastSelect","lastExpr","makeAuditEvent","itembox","itemcolumn","isitemexclude","scope","getHistoryState","pathName","isSkipSearchRoute","makeAuditEventFromCurrentQuery","afterSelectTabEvent","spellingCorrectionMode","makeRefineExpr","pageCount","kind","refineSelect","Original","makeNotExpr","arg","getTab","querylang","queryLanguage","questionLanguage","notifyDocument","queryhash","querytext","cancelReasons","deactivateRouting","refineExpr","PreviewModule","previewModal","BsAdvancedFormValidation","validationForm","BsLoadingBar","BsActionItemContent","inDropdownMenu","BsModalHeader","WEB_SERVICES_MODULE_PROVIDERS","ClickOutside","clickOutside","clickHandler","elementFromPoint","pageX","pageY","exclude","targetRoot","elts","BsAdvancedFormMultiInput","dropdownItem","_getDropdownItem","onItemsChanged","keypress","MomentPipe","fromNow","suffix","reference","toNow","calendar","precise","valueOf","unix","daysInMonth","toISOString","ResultModule","DashboardItemComponent","gridsterItemComponent","providerFactory","dashboardService","renamable","closable","fullScreenExpandable","maximizable","recordClicked","innerwidth","innerheight","networkProviders","networkOptions","closeAction","renameAction","fullScreenAction","toggleFullScreen","maximizeAction","toggleMaximizedView","recordId","queryStr","buttonsStyle","resizeTo","elem","screen","exitFullscreen","onfullscreenchange","clientHeight","clientWidth","renameWidgetModal","BsNetworkActivity","unbind","bind","setTimeout","BsPager","showNavigation","showFirstLast","showPages","endPages","pages","makeItems","currentPage","endWidth","split1","split2","mid","delta","Item","FIRST_PAGE","PREVIOUS_PAGE","ELLIPSIS","NEXT_PAGE","LAST_PAGE","gotoPage","isPage","isEllipsis","isNavigation","MODAL_MODULE_PROVIDERS","BsLogin","userNameControl","passwordControl","providerNameControl","providerName","displayName","yes","TokenService","suppressErrors","noNotify","BsModalModule","forRoot","MessagePipe","FormatService","bigNumberFormatter","isValueItem","kiloBytes","megaBytes","gigaBytes","teraBytes","petaBytes","messageKey","getValueAndDisplay","formatLanguage","formatMoney","toSysDateStr","formatText","formatDate","formatTime","joinValue","_v","transforms","toUpperCase","toUpperFirst","toLowerFirst","toStartCase","toKebabCase","toSnakeCase","toCamelCase","formattedValue","transformValue","parseMemorySize","enGooglemaps","frGooglemaps","deGooglemaps","centerIfNeeded","withinBounds","extent","makeArea","lhs","rhs","newLeft","newTop","offsetParent","area","offsetLeft","clientLeft","offsetTop","clientTop","relativeFromTo","scrollLeft","scrollTop","CustomEvent","cancelable","createEvent","initCustomEvent","protocol","hostname","port","fakeStorage","storageName","needed","dispatchStorageEvent","oldValue","storageEvent","global","DOMRect","different","u","xArg","yArg","wArg","hArg","defineProperties","newX","enumerable","newY","newWidth","newHeight","msMatchesSelector","webkitMatchesSelector","UserSettingsWebService","timezone","determine","reviver","currentState","json","_userSettings","BsFacetBasketsComponent","maxBaskets","manageBasket","notifyOpenBasket","deleteBasket","CollapseLink","stateChange","UserRatingsWebService","docid","ratingscolumn","ratingsColumn","averagecolumn","averageColumn","ratingsdistribution","ratingsDistribution","rating","ratingResponse","getRecordRating","updatedocweight","updateDocWeight","ratingnum","averagerating","actionType","documentIds","parseUserRating","parseAverageRating","columnEntries","ratingValues","BsAdvancedModule","BsRefine","doRefine","searchRefine","lastRefineText","inputErrorMessage","setError","autocompleteEnabled","AutocompleteExtended","sqAutocompleteExtended","dataSources","searchBaskets","searchRecentDocuments","searchRecentQueries","searchSavedQueries","caught","searchSavedQuery","setState","searchData","recentqueries","description","bsk","fetchPreLoginAppConfig","redirectTo","AppLocalesConfig","breakpoints","AppModule","apiKey","bootstrap","NetworkComponent","nodeClicked","edgeClicked","_actions","debounceSync","onNodeClicked","onEdgeClicked","refreshAction","updateActions","selectEdge","selectNode","updateOptions","providersSubscription","getProvider","datasets","mergeDatasets","prev","cur","onDatasetsMerged","updateDatasets","_networkInitialized","fitNetwork","onNodesInserted","_selectedNode","getNodeActions","_selectedEdge","getEdgeActions","providersActionList","getProviderActions","fit","eventData","onNetworkClick","setOptions","optionsPrefs","barnesHut","springLengthPref","springConstantPref","dampingPref","gravitationalConstant","repulsionPref","centralGravity","gravityPref","springLengthControl","springConstantControl","dampingControl","repulsionControl","gravityControl","nodeTpl","edgeTpl","AuthenticationPopupService","cordova","redirectUrl","DatePipe","BsSelectionArranger","change","isPointerOverContainer","moveSelectedRecord","getRecords","dropRecord","recordTpl","Login","BsNotificationsManager","notificationsStream","showNotifications","allNotificationsShowing","allNotificationsHidden","deleteAllNotifications","ResizeEventDirective","zone","raiseEvent","contentRect","ResizeObserver","resizeObserver","entries","run","unobserve","BsEditAlert","weekdays","Days","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","showDirtyMessage","originalOrder","frequencies","Frequency","Daily","Hourly","Immediate","frequency","days","canUpdateQuery","alertDaysControl","alertNameControl","alertFrequencyControl","alertTimesControl","times","alertActiveControl","updateQueryControl","updateQuery","alertName","alertFrequency","alertTimes","alertActive","createButtons","runQuery","setAlertToCurrentQuery","createYesNoButtons","searchAlert","LabelsWebService","prefix","localize","doccount","oldlabel","BsFacetMultiComponent","backAction","openedFacet","clearAllFiltersAction","facetsWithFiltered","$hasFiltered","aggItemCounter","$count","getFacetCount","$hasData","facetComponent","facetActions","LoadComponentService","componentFactoryResolver","applicationRef","factories","initialLoad","simpleChanges","makeSimpleChanges","inputs","previousValue","outputs","_bindComponent","factory","resolveComponentFactory","appElement","injector1","attachView","hostView","insertBefore","nextSibling","createComponent","BsEditLabel","initialLabels","selectedRecordsIds","_getInitialRecordLabels","addLabels","enModal","frModal","deModal","SponsoredResults","sponsoredResultsService","redoQuery","currentWS","getWebService","lastText","linksQuery","getLinks","sponsoredlinks","links","auditLinksDisplay","sponsoredLinks","updateSponsoredLinksIfNecessary","resultid","linkid","notifySponsoredLink","TimePipe","DatasetWebService","webServiceName","FIRST_PAGE_OPTIONS","FirstPageService","searchSubscription","displayOnHomePage","getFirstPage","setResults","path1","firstPage","isCurrentSearchResults","enFacet","frFacet","deFacet","LabelsModule","BsLabelsMenuComponent","renameLabelModal","deleteLabelModal","bulkAddAction","bulkAddLabelModal","bulkDeleteAction","bulkRemoveLabelModal","_loginServiceSubscription","labelsActions","Metadata","showTitles","showIcons","searchOnClick","VisTimelineModule","ValidationModule","BsResultBaskets","addToBasketAction","buildAddToBasketAction","removeFromBasketAction","buildRemoveFromBasketAction","removeFromAllBasketsAction","buildRemovalFromAllBasketsAction","basketsSubscription","updateRecordBaskets","refreshVisualization","basketsAction","currentBaskets","removeFromAllBaskets","isInBaskets","ResultsCounter","BsAddLabel","bulkAddLabels","BsFacetHeatmapComponent","allowResizeOption","highlightSelected","parseCrossDistributionItem","parseCooccurrenceItem","_name","fieldCooc","fieldsX","selectFieldX","fieldsY","selectFieldY","aggregationData","getHeatmapData","processAggregation","maxXControl","maxXPref","maxYControl","maxYPref","rescaleControl","colorControl","colorSchemePref","scaleAxes","fieldXPref","fieldYPref","scrollable","f","fieldX","fieldY","enResultsView","frResultsView","deResultsView","VALIDATION_MODULE_PROVIDERS","BsDropdownMenu","element1","li","getLi","ul","_li","host","BsEditSavedQuery","savedQueryName","BsAdvancedFormCheckbox","BsOverrideUser","DynamicNodeProvider","processedNodes","nodeCache","updateDynamicDataset","sourceNodes","_queries","mutateNodes","mutateNode","refreshNodeOptions","addStructuralEdges","processNode","Alert","ALERT_CHANGE_EVENTS","ALERT_COMPONENTS","WINDOW","AlertsService","alertComponents","alertIndex","alerts","patchAlerts","WeekDays","combine","respectTabSelection","queryUrl","editAlertModal","appQueryUrl","updateAlert","createAlert","noUpdate","prevName","prevAlert","deleteAlert","manageAlertsModal","updateAlerts","Window","JsonInfo","InputType","ValueType","BsEditUserSettings","visibleThreshold","onOkClicked","removeControl","calculatePatch","setNewValue","newObj","isRegExp","formValue","ensureType","readFormValue","readUserSetting","includedInPatch","entryInfo","inputType","valueType","Bool","cast","asDate","Int","asNumber","asString","castFn","empty","Entry","MultiEntry","Range","nbPaths","showUILanguageSelector","Keys","MetadataModule","BsActionMenu","SCREEN_SIZE_RULES","UIService","screenSizeRules","_resizeEvent","_priorityResizeEvent","resizeEventListener","frame","setScreenSize","textPositionProperties","screenSizes","elementResizeDetector","strategy","appComponentRef","listener","matchMedia","screenSizeIs","index1","index2","screenSizeIsGreater","screenSizeIsLessOrEqual","screenSizeIsEqual","ors","ands","_screenSizeTest","computedStyle","getComputedStyle","borderLeft","borderRight","borderTop","borderBottom","paddingLeft","paddingRight","paddingTop","paddingBottom","selectionStart","selectionEnd","selectionAction","SelectionAction","ensureVisible","none","collapseToStart","setSelectionRange","getContentRect","textPos","getTextPosition","getCaret","minX","caretX","debug","div","computed","currentStyle","whiteSpace","wordWrap","visibility","prop","mozInnerScreenX","scrollHeight","parseInt","overflowY","overflow","span","lineHeight","coordinates","backgroundColor","listenTo","removeListener","maxLength","copyToClipboardCdk","writeText","pending","beginCopy","remainingAttempts","attempt","SqHttpClient","httpHandler","responseCache","strRequest","stringify","isIterable","sha256","requestHash","getRequestHash","enUserSettings","frUserSettings","deUserSettings","BsPreviewModule","BsSavedQueriesModule","isDynamicEdgeType","DynamicEdgeProvider","addDynamicEdges","recordNodes","addRecordNodes","recordEdges","createDynamicEdges","rNode","BsExportQuery","supportedFormats","Xlsx","Json","outputFormats","sourceTypes","exportableColumns","queryExportConfig","getDefaultQueryExportConfig","columns","compose","isDownloading","_button","onFormChanged","newFormat","newMaxCount","newExportedColumns","webServices","sourceChosen","BsTimelineComponent","rangeInit","rangeChange","groupedEvents","tooltipX","drawGrips","gripHeight","gripWidth","intlSubscription","updateXAxis","xt","curve","y0","brushBehavior","brushing","onBrush","onBrushEnd","brush$","grips$","selectionChanged","updateSelection","checkDataChanges","updateBrush","gbrush","onMouseout","updateZoom","primarySeries","allPrimaryDates","xExtent","yMax","minDiff","groupEvents","zoomBehavior","xDomain","scaleExtent","onZoom","onZoomEnd","currentSelection","move","checkSelectionChange","nTicks","invert","brushSelection","updateGrips","newSelection","zooming","rescaleX","pixPerEvent","nbins","timeinterval","lastbin","bin","previousSeries","currentSeries","selection1","selection2","sizeOpened","tooltipTpl","advancedFacetPrefix","Query","pushSelect","indexOrFacet","ordinal","facetOrdinal","facetIndex","fromEnd","facetSelectIndex","findSelectIndex","clearObject","advancedSelect","withText","notAdvancedSelect","toAdvanced","o","mergeAndSort","sha512","BsAlertMessageComponent","BsQueryExporter","exportAction","hasSelectedRecords","SearchFormComponent","voiceService","firstPageService","autofocus","enableAdvancedForm","isFiltering","keepFilters","keepFiltersTitle","enableKeepFilters","keepAdvancedSearchFilters","keepTab","voiceRecognitionState","enableVoiceRecognition","hasScroll","queryStream","_updateFilteringStatus","searchContainer","scrollWidth","searchInput","queryTab","showAdvancedSearch","clearAdvancedForm","setSelect","setRangeSelect","getMode","autocompleteDirective","getFieldSearchExpression","resetAdvancedValues","hasAdvanced","initAdvanced","resetControl","resetRangeControl","setErrors","incorrect","mode","_instantiateAdvancedForm","toggleRecognition","timeout","_scrollRight","_scrollLeft","clearTimeout","scrollRight","addControl","createSelectControl","createRangeControl","createMultiInputControl","createInputControl","onParse","onMouseDown","PREVIEW_MODAL","PreviewService","previewWebService","getAuditPreviewDetail","getQueryStr","httpParams","containerid","pageNumberStr","pageNumber","$page","groupBy","collectionColumn","PatternType","Pattern","reg","_text","preparedPattern1","_type","Empty","getPatternType","wildcardToRegex","cleanPattern","_pattern","isMatch","regExEscape","lastIsStar","Patterns","_preparedPatterns","_isEmpty","l","isTypeValue","getTypeValueText","logdisplay","innerSetList","PatternMatcher","includedLogDisplay","excludedLogDisplay","includedPattern","excludedPattern","BsSelectBasket","BsEditable","valueChange","editableControl","editable","editing","focusAfterEdit","stopEditing","startEditing","hostKeydown","AppServiceHelpers","eTypeModifier","RECENT_QUERIES_CHANGE_EVENTS","MAX_QUERIES","RecentQueriesService","rq","addRecentQuery","recentqueryIndex","recentquery","patchRecentQueries","recentQueries","LEGACY_PROCESSED_CREDENTIALS_KIND","AuthenticationService","tokenService","jWTService","authService","_userOverrideActive","sinequaCredentials","_processedCredentialsStr","_processedCredentials","authenticationStorage","sessionStorage","loadCredentials","storageArea","doAuthentication","authentication","saveCredentials","setCsrfToken","refreshAuthentication","authenticationHeaders","authenticationHeader","exec","wwwAuthenticate","authenticateHeaders","getAuthenticateHeader","getToken","notifyLogout","deleteWebTokenCookie","observable1","autoOAuthProvider","originalUrl","getCsrfToken","initiateAutoAuthentication","_userOverride","newProcessedCredentialsStr","GoogleMapsModule","MapComponent","latitudeField","longitudeField","geoRecords","filterArea","minLat","bounds","getSouthWest","lat","maxLat","getNorthEast","minLng","lng","maxLng","closeWindow","mapStyles","fitBounds","east","north","south","west","openedWindow","infoWindow","onMapClick","onBoundsChange","NgxChart","itemClickEvent","wrapper","attached","tooltipTemplate","FACET_CHANGE_EVENTS","ALL_FACETS","DEFAULT_FACETS","FacetService","arr","it","trimAllWhitespace","_f","patchFacets","addFilter","replaceCurrent","same","exprToAggregationItem","$excluded","_expr","makeAggregationExpr","replaceSelect","stringExpr","filterExpr","findItemFilter","filterByValuesAreExpression","filterByValue","removeFilter","setColumn","suggestQueries","$column","findFilter","treeAggregationOptions","expandPaths","initTreeNodes","addOpen","getAggregationNode","exprText","rootLevel","traverse","_nodes","_node","$level","expandPath","getBreadcrumbsItems","flattenExpr","apply","searchTerm","path2node","searchPattern","parentPath","matchend","nextChild","normalizedArr","splitTreepath","toLocaleLowerCase","_j","_b","windowFactory","BsAlertsModule","NetworkModule","defaultLabelComponents","labelsAutocompleteComponent","BsLabelsModule","PreviewTooltip","entityActions","entityNavActions","selectedTextActions","scalingFactor","selectedText","entityType","isBottom","handleMouseDown","handleMouseUp","getSelection","getRangeAt","positionTooltipAbove","_inTime","handleMouseMove","className","entityDisplay","entityValue","highlights","entityCount","entityLabel","idsplt","findEntity","idIndex","entityIdx","isOverTooltip","localName","handleScroll","box","tooltipWidth","tooltipHeight","leftPin","bypassSecurityTrustStyle","valueIdx","predicate","currentIdx","getContentWindow","StickyComponent","ui","marginTop","postScrollUp","onScroll","forceScrollDown","scrollDelta","pageYOffset","scrollY","offsets","componentHeight","container","CSS","supports","LOGIN_MODULE_PROVIDERS","enLabels","frLabels","deLabels","BsResultsViewModule","MediaIf","viewContainer","hasView","matcher","alias","breakpoint","findByAlias","mediaQuery","mq","createView","destroyView","createEmbeddedView","sqMediaIf","BsConfirm","BsLabelsAutocompleteComponent","labelsUpdate","initLabels","getDropdownItem","onLabelsItemsChanged","BsModal","showHeader","showFooter","BsResultsGridView","initSorts","columnsData","clearSorts","observeQueryFields","columnData","sortIndex","maxSortIndex","ascending","previousSortIndex","sortIcon","sortIndicator","getSortIndicator","columnData1","_clearSort","sortable","isSortable","part","tokens","_setSort","ascendingFirst","collapseButtonAnimations","CollapseButton","toggleCollapsed","LoadComponentModule","BsAdvancedFormSelect","getItems","aggr","BsPreviewPagesPanelComponent","gotopage","_pendingPreviewDocument","_pendingPages","_pendingPage","sortedPages","getPageNumber","hasFirst","hasPrevious","hasNext","currentPageEl","behaviour","selectPage","HTTP_REQUEST_INITIALIZERS","LoginInterceptor","requestInitializers","requestInitializer","exception","errorCodeText","errorCode","status","statusText","getCredentials","hadCredentials","haveCredentials","addAuthentication","addUserOverride","processRequestInitializers","_request","clone","withCredentials","leave","handle401Error","notifyError","updateAuthentication","req","APP_UTILS_MODULE_PROVIDERS","BsRenameLabel","labelControl","renameLabels","BsSimilarDocuments","similarDocumentsService","documentList","documentFormat","AppService","defaultQueryName","queryNames","_defaultCCQuery","verifyServerApiVersionCompatibility","ccautocomplete","autocomplete","initDefaultQuery","makeMaps","apiVersion","setApp","upToDate","clearMaps","ccindex","indexType","searchIndexes","getIndex","indexIsNormal","columnMap","columnName","aliases","columnsInfo","getIndexForQuery","columnInfo","extraColumns","labelPlural","columnsByQuery","columnsByIndex","fieldsByQuery","setText","columnFieldsIncluded","columnFieldsExcluded","partnameFieldsIncluded","partnameFieldsExcluded","_makeColumnMapForQuery","_makeColumnMapForIndex","indexName","ccindex1","globalFields","queryFields","columns1","lists","columnAliases","firstIndex","getColumnDefaultAlias","getColumnName","isUrlAbsolute","_ccquery","previous","typeModifier","etm","toEngineTypeModifierSimple","toEngineType","toEngineTypeModifier","makeColumn","documentlanguages","globalrelevance","matchingpartnames","matchlocations","matchlocationsperpartname","extractsperpartname","extractslocations","documentweight","groupcount","BsActionModule","UserRating","userRatingService","changeDetector","handleResponse","userRatingIndex","averageRatingIndex","ensureRatingValues","getCCRating","ratingIndex","titles","selectedRatingIndex","deleteRating","setRating","fill","getAverageRating","showAverage","BsFacetTagCloud","limit","uniformRepartition","proportionalWeight","countThreshold","shuffleData","isolateFacetFilters","aggregationsData","tagCloudData","defaultWeight","tagCloudFacetPrefix","getTagCloudData","getAggregationsData","tmp","notFiltered","scaleItemWeight","shuffle","tagCloudItem","random","aux","collapseAnimations","Collapse","afterViewInit","BsFieldSearchItemsComponent","enPreview","frPreview","dePreview","DashboardAddItemComponent","updateWidth","updateHeight","PreviewDocumentIframe","defaultSandbox","onPreviewReady","pageChange","previewDocLoadHandler","onPreviewDocLoad","documentFrame","setSvgBackgroundPositionAndSize","sheetFrame","contentDocument","getElementsByName","addTooltip","insertComponent","resetContent","_sandbox","sanitizedUrlSrc","iframeURLChange","newURL","iframe","lastDispatched","dispatchChange","newHref","unloadHandler","attachUnload","DEFAULT_CONFIG","hasBackdrop","backdropClass","panelClass","closeOnBackdropClick","MODAL_MODEL","ModalButton","closer","MODAL_CONFIRM","MODAL_PROMPT","ModalService","modalConfig","fullscreen","createOverlay","overlayComponent","attachDialogContainer","hostElement","backdropClick","keydownEvents","disableSubmit","openRef","afterClosed","overlayConfig","getOverlayConfig","containerPortal","containerRef","attach","positionStrategy","centerHorizontally","centerVertically","scrollStrategy","scrollStrategies","primaryButton","INTL_MODULE_PROVIDERS","BsPreviewPanel","leftPaneAdditionalClasses","enSavedQueries","frSavedQueries","deSavedQueries","SqHttpParameterCodec","encodeURIComponent","FrameTask","Timer","performance","Utils","dst","objs","deep","ii","jj","src","cloneNode","baseExtend","destination","sources","isArrayLike","isPrimitive","isBlankObject","stackSource","stackDest","isTypedArray","copyRecurse","copyElement","isWindow","needsRecurse","constructor","lastIndex","getPrototypeOf","copyWithoutNullOrEmpty","_defaults","o1","o2","ms","getTimezoneOffset","rxSysDateTime","rxISO8601DateTime","pretty","reviveDates","isSysDateTime","isISO8601DateTime","ISO_8601","quote","lineage","stack","withHyphens","TYPED_ARRAY_REGEXP","ignoreCase","toLocaleUpperCase","words","regExEscapeRegEx","replacement","separators","removeEmpty","rxs","sub","btoa","hex","fromCharCode","atob","sha","getHash","_delete","isMap","override","deltas","func","wait","immediate","args","timestamp","later","arguments","callNow","leading","throttled","remaining","trailing","frameTasks","requestAnimationFrame","task","urlObj","_addUrl","encoder","escapeDiv","textNode","createTextNode","escapedHtml","innerHTML","genericNext","genericError","genericComplete","num","sign","factor","suffixes","matchSuffix","defaultUnit","token","calculateDuration","BsPreviewLinks","originalDocumentUrl","BsManageAlerts","alert1","BsSavedQueriesMenuComponent","saveAction","createSavedQueryModal","_savedQueriesSubscription","_searchSubscription","savedQueriesActions","hasSavedQuery","ExportSourceType","ExportOutputFormat","MINIMUM_COMPATIBLE_SERVER_API_VERSION","SearchComponent","titleService","multiFacetIcon","multiFacetTitle","showResults","toggleResultsTitle","_searchServiceSubscription","setTitle","setDefaultDashboard","createDashboardActions","addResizeListener","isClickAction","isOpened","lastClickedId","lastSelectedId","resize","focusElementIndex","MoneyTimelineComponent","moneyColumn","modified","money","BsEdgeInfoCard","TooltipDirective","overlayPositionBuilder","placement","detach","clearTimer","timeoutId","flexibleConnectedTo","withPositions","tooltipRef","originX","originY","overlayX","overlayY","offsetY","offsetX","mouseClick","BsManageBaskets","BsFacetPreviewComponent2","expandModal","highlightActions","recordClosed","previewLoaded","_height","scaleFactorThreshold","loaded","expandModalAction","toggleEntitiesAction","cat","toggleExtractsAction","minimizeAction","customActions","BsLoadMore","actionsSize","hasMore","loadMoreAction","BsAlertsMenuComponent","createAlertModal","_alertsServiceSubscription","alertsActions","hasAlert","BsFacetCard","actionsFirst","startCollapsed","hideActionsCollapsed","expandable","startExpanded","startSettingsOpened","facetExpanded","facetCollapsed","collapseAction","onCollapse","expandAction","_expanded","onExpand","_settingsOpened","actionChangedSubscription","allActions","isHidden","hasSettings","BsFacetRecentQueries","enableSave","notifyOpenRecentQuery","deleteRecentQuery","TimelineLegendComponent","yOffset","SuggestQueryWebService","kinds","BsAdvancedFormRange","forName","ensureValue","NotificationsInterceptor","processNotifications","$notifications","BsPreviewPageFormComponent","pageControl","AutocompleteState","Autocomplete","_state","debounceSuggest","getSuggests","OFF","startOrActive","selectPrevious","selectNext","touchstart","BsAdvancedFormAutocompleteMultiInput","BsUserSettingsEditor","isStructuralEdgeType","RecordsProvider","recorddata","addCustomEdge","addStructuralEdge","recordNode","isEdgeVisible","neighborsneighbors","hasExpandedEdge","hasCollapsedEdge","DidYouMeanKind","RFMDisplay","QueryWebService","endPoint","methods","propagateErrors","creditLabel","fcRoot","FusionChartsModule","noop","gConfig","flip","boundary","popperConfig","BsDropdownDirective","dropdownService","dropdownToggle","inNavbar","dropdownMenu","raiseClear","getPlacement","modifiers","getOffset","preventOverflow","boundariesElement","applyStyle","usePopper","TypeError","referenceElement","popper","getPopperConfig","_dropdownMenu","RecentQueriesList","RecentQueries","RecentQueriesWebService","recordsProviderDemo","createRecordNodeType","person","createPersonNodeType","struct","createStructuralEdgeTypes","createRecordsProvider","selectedRecordsProviderDemo","createSelectedRecordsProvider","asyncRecordsProviderDemo","createDynamicImageNodeOptions","createAsyncRecordsProvider","crossAggregationDemo","company","createCompanyNodeType","createAggregationProvider","crossAggregationExpandDemo","geo","createGeoNodeType","expandCompany","expandPersonCompany","expandPersonGeo","coocAggregationDemo","createCoocAggregationEdgeType","typedCoocAggregationDemo","createTypedCoocAggregationEdgeType","coocRecordDemo","job","createCoocStructuralEdgeTypes","typedCoocRecordDemo","createTypedCoocStructuralEdgeTypes","oOTBConfig","docNode","geo_person","company_person","geo_company","expandEdges","createAllExpansionEdgeTypes","wikiAsyncConfig","wikiDynEdgeConfig","people","recordProvider","dynamicEdgeType","createDynamicEdgeType","peopleProvider","createDynamicEdgeProvider","wikiDynConfig","makeNodeTypeDynamic","aggProvider","personProvider","createDynamicNodeProvider","wikiMultiDynConfig","bootstrapModule","preserveWhitespaces","MetadataAccessListsItem","BsDidYouMean","didYouMean","corrected","refine","dymItem","handleResults","Corrected","AuthConfig","storageType","LoginModule","webpackEmptyAsyncContext","module"],"mappings":"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;;;;;;;;ACCf;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACDA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;A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A;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AA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AAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA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AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA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","file":"main-es5.js","sourcesContent":["export * from \"./public-api\";","import {Component, Input, Output, OnChanges, SimpleChanges, EventEmitter} from \"@angular/core\";\nimport {Results, Tab} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-tabs\",\n    templateUrl: \"./tabs.html\"\n})\nexport class BsTabs implements OnChanges {\n\n    @Input() results: Results;\n\n    /**\n     * List of custom tabs (complementing the search query tabs)\n     * Actions can be performed on click via the events Output.\n     *\n     * When the results are updated (new search text, facet\n     * selection...), the custom tab selection is discarded.\n     * If the custom action updates the results, the tab selection\n     * will revert to previous state unless the query is updated.\n     */\n    @Input() customtabs: Tab[];\n\n    /**\n     * Associate icon to a tab name ({tab1 : 'icon class 1', tab2 : ...})\n     */\n    @Input() iconMap: {[key: string]: string} = {};\n\n    /**\n     * Emits an event when a tab is selected\n     */\n    @Output() events = new EventEmitter<Tab>();\n\n    currentTab: Tab | undefined;\n    searchtabs: Tab[] | undefined;\n\n    constructor(\n        private searchService: SearchService) {\n    }\n\n    update() {\n        if (this.results && this.results.tabs) {\n            this.currentTab = this.searchService.getCurrentTab();\n            this.searchtabs = this.results.tabs;\n        }\n        else {\n            this.currentTab = undefined;\n            this.searchtabs = undefined;\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!!changes[\"results\"]) {\n            this.update();\n        }\n    }\n\n    selectTab(tab: Tab, search = true) {\n        if (tab !== this.currentTab) {\n            if(search){\n                this.searchService.selectTab(tab); // the currentTab will be updated in update()\n            } else {\n                this.currentTab = tab;\n            }\n            this.events.next(tab);\n        }\n        return false;   // Stop following href\n    }\n}","<ul *ngIf=\"!!searchtabs || !!customtabs\" class=\"nav nav-tabs mb-1\">\n    <ng-container *ngIf=\"!!searchtabs\">\n        <li *ngFor=\"let tab of searchtabs\" class=\"nav-item\">\n            <a href=\"#\" class=\"nav-link\" [ngClass]=\"{'active' : tab == currentTab, 'disabled': tab.count == 0}\" (click)=\"selectTab(tab)\">\n                <i [ngClass]=\"iconMap[tab.name]\"></i>\n                {{(tab.display || tab.name) | sqMessage}} \n                <span class=\"count\">({{tab.count | sqNumber}})</span>\n            </a>\n        </li>\n    </ng-container>\n    <ng-container *ngIf=\"!!customtabs\">\n        <li *ngFor=\"let tab of customtabs\" class=\"nav-item\">\n            <a href=\"#\" class=\"nav-link\" [ngClass]=\"{'active' : tab == currentTab, 'disabled': tab.count == 0}\" (click)=\"selectTab(tab, false)\">\n                <i [ngClass]=\"iconMap[tab.name]\"></i>\n                {{(tab.display || tab.name) | sqMessage}}\n                <span class=\"count\" *ngIf=\"tab.count >= 0\">({{tab.count | sqNumber}})</span>\n            </a>\n        </li>\n    </ng-container>\n</ul>","export * from \"./timeline.module\";\nexport * from \"./facet-timeline.component\";\nexport * from \"./timeline.component\";\nexport * from \"./timeline-legend.component\";","export * from \"./selection.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsFullscreenActivator} from \"./fullscreen-activator/fullscreen-activator\";\nimport {BsNetworkActivity} from \"./network-activity/network-activity\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        BsActionModule,\n        UtilsModule,\n    ],\n    declarations: [\n        BsFullscreenActivator, BsNetworkActivity,\n    ],\n    exports: [\n        BsFullscreenActivator, BsNetworkActivity,\n    ]\n})\nexport class BsStatusBarModule {\n}\n","import {Component, Output, TemplateRef, EventEmitter, ViewChild} from \"@angular/core\";\nimport {Action} from \"@sinequa/components/action\";\n\n/**\n * This interface should be implemented by facet components, which expose\n * a list of actions and event listeners\n */\n@Component({\n    template: \"\"\n})\nexport abstract class AbstractFacet {\n\n    /**\n     * List of custom actions of this facet\n     */\n    public get actions(): Action[] { return []; }\n\n    /**\n     * Event emitter triggered when the list of action changes\n     */\n    @Output() public actionsChanged = new EventEmitter<Action[]>();\n\n    /**\n     * Template for the settings editor of this facet, if any\n     */\n    @ViewChild(\"settingsTpl\", {static: true, read: TemplateRef}) public settingsTpl?: TemplateRef<any>;\n\n    /**\n     * Template for header of this facet, if any\n     */\n    @ViewChild(\"headerTpl\", {static: true, read: TemplateRef}) public headerTpl?: TemplateRef<any>;\n\n    /**\n     * Template for a sub-header of this facet, if any. This appears below the header\n     */\n    @ViewChild(\"subHeaderTpl\", {static: true, read: TemplateRef}) public subHeaderTpl?: TemplateRef<any>;\n\n    /**\n     * Template for footer of this facet, if any\n     */\n    @ViewChild(\"footerTpl\", {static: true, read: TemplateRef}) public footerTpl?: TemplateRef<any>;\n\n    /**\n     * Method called when a facet is collapsed\n     */\n    public onCollapse(collapsed: boolean){}\n\n    /**\n     * Method called when a facet is resized via an action (not accounting for window resizing)\n     */\n    public onExpand(expanded: boolean){}\n\n    /**\n     * Method called when the settings of this facet are opened\n     */\n    public onOpenSettings(settingsOpened: boolean){}\n\n    /**\n     * Method enabling the facet component to be hidden (if, for example there is no data to display)\n     */\n    public isHidden(): boolean {\n        return false;\n    }\n\n}","import { Component, Input, ChangeDetectorRef } from \"@angular/core\";\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { HeatmapItem } from \"./heatmap.component\";\nimport { ResultsViewService } from \"@sinequa/components/results-view\";\nimport { Action } from \"@sinequa/components/action\";\nimport { SearchService } from \"@sinequa/components/search\";\nimport { BsFacetHeatmapComponent } from './facet-heatmap.component';\nimport { FacetService } from '@sinequa/components/facet';\nimport { SelectionService } from '@sinequa/components/selection';\nimport { FormBuilder } from '@angular/forms';\nimport { UserPreferences } from '@sinequa/components/user-settings';\n\n\n@Component({\n    selector: 'sq-results-heatmap-view',\n    templateUrl: './results-heatmap-view.html' \n})\nexport class BsResultsHeatmapView extends BsFacetHeatmapComponent {\n    @Input() selectView?: string;\n    @Input() theme: \"light\" | \"dark\" = \"light\";\n\n    settingsAction: Action;\n    showSettings: boolean;\n\n    constructor(\n        public appService: AppService,\n        public searchService: SearchService,\n        public facetService: FacetService,\n        public selectionService: SelectionService,\n        public formBuilder: FormBuilder,\n        public cdRef: ChangeDetectorRef,\n        public prefs: UserPreferences,\n        public resultsViewService : ResultsViewService\n    ) {\n        super(appService, searchService, facetService, selectionService, formBuilder, cdRef, prefs, undefined);\n    \n        this.height = 1200;\n        this.width = 1200;\n        this.maxX = 40;\n        this.maxY = 40;\n\n        this.settingsAction = new Action({\n            action: (action) => {\n                this.showSettings = !this.showSettings;\n                this.onOpenSettings(this.showSettings);\n                action.update();\n            },\n            updater: (action) => {\n                action.icon = this.showSettings ? \"far fa-save\" : \"fas fa-cog\";\n                action.text = this.showSettings ? \"msg#facetCard.saveSettings\" : \"msg#facetCard.openSettings\";\n                action.title = this.showSettings ? \"msg#facetCard.saveSettings\" : \"msg#facetCard.openSettings\";\n                action.selected = this.showSettings;\n            }\n        });\n        this.settingsAction.update();\n    \n    }\n\n    get _actions(): Action[] {\n        const actions = this.actions;\n        actions.push(this.settingsAction);\n        return actions;\n    }\n\n    onItemClicked(item: HeatmapItem){\n        super.onItemClicked(item);\n        if(this.selectView){\n            this.resultsViewService.selectResultsViewName(this.selectView);\n        }\n    }\n\n    onAxisClicked(item: {value: string, axis: 'x' | 'y'}){\n        super.onAxisClicked(item);\n        if(this.selectView){\n            this.resultsViewService.selectResultsViewName(this.selectView);\n        }\n    }\n}\n\n","\n<div class=\"btn-group\" [sq-action-buttons]=\"{items: _actions}\"></div>\n\n<ng-container *ngIf=\"!showSettings\">\n\n    <sq-heatmap *ngIf=\"data\"\n        [data]=\"data\"\n        [height]=\"heightPref\"\n        [width]=\"widthPref\"\n        [margin]=\"margin\"\n        [transition]=\"transition\"\n        [itemsClickable]=\"itemsClickable\"\n        [axisClickable]=\"axisClickable\"\n        [buckets]=\"buckets\"\n        [colorScheme]=\"colorSchemePref\"\n        [maxX]=\"maxXPref\"\n        [maxY]=\"maxYPref\"\n        [theme]=\"theme\"\n\n        (itemClicked)=\"onItemClicked($event)\"\n        (axisClicked)=\"onAxisClicked($event)\"\n    >\n    </sq-heatmap>\n\n    <div class=\"text-center py-5 px-3\" *ngIf=\"!data\">\n        <i>{{'msg#heatmap.nodata' | sqMessage}}</i>\n    </div>\n\n</ng-container>\n\n<div class=\"card-body\" *ngIf=\"showSettings\">\n    <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n            <label for=\"maxX\">{{'msg#heatmap.maxX' | sqMessage}} ({{maxXPref}})</label>\n            <input type=\"range\" class=\"form-control\" id=\"maxX\" min=\"10\" max=\"40\" formControlName=\"maxX\">\n\n            <label for=\"maxY\">{{'msg#heatmap.maxY' | sqMessage}} ({{maxYPref}})</label>\n            <input type=\"range\" class=\"form-control\" id=\"maxY\" min=\"10\" max=\"100\" formControlName=\"maxY\">\n            \n            <div class=\"custom-control custom-checkbox my-1\">\n                <input class=\"custom-control-input\" type=\"checkbox\" id=\"scaleAxes\" formControlName=\"scaleAxes\">\n                <label class=\"custom-control-label\" for=\"scaleAxes\">{{'msg#heatmap.maxY' | sqMessage}}</label>\n            </div>\n\n            <hr>\n\n            <label for=\"colors\">{{'msg#heatmap.colors' | sqMessage}}</label>\n            <select id=\"colors\" class=\"form-control\" formControlName=\"colors\">\n                <option [ngValue]=\"'schemeBlues'\">{{'msg#heatmap.blue' | sqMessage}}</option>\n                <option [ngValue]=\"'schemeReds'\">{{'msg#heatmap.red' | sqMessage}}</option>\n                <option [ngValue]=\"'schemeGreens'\">{{'msg#heatmap.green' | sqMessage}}</option>\n                <option [ngValue]=\"'schemeRdBu'\">{{'msg#heatmap.diverging' | sqMessage}}</option>\n                <option [ngValue]=\"'schemeSpectral'\">{{'msg#heatmap.diverging' | sqMessage}}</option>\n                <option [ngValue]=\"'schemeYlGnBu'\">{{'msg#heatmap.cool' | sqMessage}}</option>\n            </select>\n\n            <hr>\n\n            <button class=\"btn btn-light\" (click)=\"setDefaults()\">{{'msg#heatmap.defaults' | sqMessage}}</button>\n        </div>\n    </form>\n</div>","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\nimport {FormatService} from \"@sinequa/core/app-utils\";\n\n/**\n * A pipe to transform a number into a readable internationalized memory size label,\n * for example \"126432\" into \"126 kB\".\n *\n * @example\n * <span>Size:</span><span>{{ documentSize | sqMemorySize }}</span>\n */\n@Pipe({name: \"sqMemorySize\", pure: false})\nexport class MemorySizePipe extends AbstractIntlPipe {\n    constructor(\n        protected formatService: FormatService,\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: number): void {\n        super.updateValue(key);\n        this.value = this.formatService.formatMemorySize(key);\n    }\n}","export * from \"./bootstrap/index\";\nexport * from \"./messages/index\";\nexport * from \"./user-preferences\";","import {Utils} from \"@sinequa/core/base\";\nimport {enResultsView, frResultsView, deResultsView} from \"@sinequa/components/results-view\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport _enHeatmap from \"./en\";\nimport _frHeatmap from \"./fr\";\nimport _deHeatmap from \"./de\";\n\nconst enHeatmap = Utils.merge({}, _enHeatmap, enResultsView, enSearch);\nconst frHeatmap = Utils.merge({}, _frHeatmap, frResultsView, frSearch);\nconst deHeatmap = Utils.merge({}, _deHeatmap, deResultsView, deSearch);\n\nexport { enHeatmap, frHeatmap, deHeatmap };\n","import {Injectable, Inject, OnDestroy} from \"@angular/core\";\nimport {Subject, Observable} from \"rxjs\";\nimport {pluck} from \"rxjs/operators\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * Describes a Sinequa princpal\n */\nexport interface Principal {\n    id: string;\n    id2: string;\n    id3: string;\n    id4: string;\n    id5: string;\n    name: string;\n    email: string;\n    description: string;\n    longName: string;\n    userId: string;\n    fullName: string;\n    isAdministrator: boolean;\n    isDelegatedAdmin: boolean;\n    param1: string;\n    param2: string;\n    param3: string;\n    param4: string;\n    param5: string;\n    param6: string;\n    param7: string;\n    param8: string;\n    param9: string;\n    param10: string;\n}\n\nexport interface PrincipalUserInfo {\n    id: string;\n    userId: string;\n    name: string;\n    fullName: string;\n    longName: string;\n    email: string;\n    isUser: string;\n    isGroup: string;\n}\n\nexport interface PrincipalParams {\n    offset?: number;    // 0\n    limit?: number;     // 10\n    isUser?: boolean;   // true\n    isGroup?: boolean;  // true\n    search?: string;    // search by name, fullname or email\n\n}\n\nexport interface PrincipalUserIdsParams {\n    offset?: number;    // 0\n    limit?: number;     // 10\n    userIds: string[];\n}\n\n/**\n * A base event from which all events that can be issued by the {@link PrincipalWebService} are derived\n */\nexport interface PrincipalEvent {\n    type: \"changed\";\n}\n\n/**\n * This event is fired each time the [principal]{@link PrincipalWebService#principal} member is modified.\n * Typically this will be at login / logoff and also if the \"override user\" admin feature is used.\n */\nexport interface PrincipalChangedEvent extends PrincipalEvent {\n    type: \"changed\";\n}\n\n/**\n * A service for calling the principal web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class PrincipalWebService extends HttpService implements OnDestroy {\n    private _principal: Principal | undefined;\n    private _events = new Subject<PrincipalChangedEvent>();\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n    }\n\n    /**\n     * The observable events emitted by this service\n     */\n    get events(): Observable<PrincipalChangedEvent> {\n        return this._events;\n    }\n\n    /**\n     * Gets the current {@link Principal}\n     */\n    get principal(): Principal | undefined {\n        return this._principal;\n    }\n\n    /**\n     * Sets the current {@link Principal} and issues the \"changed\" event\n     */\n    set principal(value: Principal | undefined) {\n        this._principal = value;\n        this._events.next({type: \"changed\"});\n    }\n\n    /**\n     * Gets the list of user info (user or group)\n     *\n     * @param params query params to specify the search\n     * @returns list of user info\n     */\n    list(params?: PrincipalParams): Observable<(PrincipalUserInfo | undefined)[]> {\n        return this.httpClient.get<(PrincipalUserInfo | undefined)[]>(this.makeUrl(\"principal/list\"), {\n            params: this.makeParams({...params})\n        });\n    }\n\n    userId(userId: string): Observable<Partial<PrincipalUserInfo>> {\n        return this.httpClient.get<Partial<PrincipalUserInfo>>(this.makeUrl(`principal/userId/${userId}`));\n    }\n\n    userIds(params?: PrincipalUserIdsParams): Observable<Partial<PrincipalUserInfo[]>> {\n        return this.httpClient.post<Partial<PrincipalUserInfo>>(this.makeUrl(\"principal/userids\"), params).pipe(\n            pluck(\"principals\")\n        );\n    }\n\n    /**\n     * Gets the principal from the server based on the current login credentials\n     *\n     * @param autoAuthenticate Determines whether the {@link HttpInterceptor} should perform HTTP 401 handling\n     * for this request\n     */\n    get(autoAuthenticate = true): Observable<Principal> {\n        return this.httpClient.get<Principal>(this.makeUrl(\"principal\"), {\n            params: this.makeParams({\n                action: \"get\",\n                noAutoAuthentication: !autoAuthenticate\n            })\n        });\n    }\n\n    /**\n     * Gets the principal from the server based on the current login credentials and sets the\n     * principal member\n     */\n    load(): Observable<Principal> {\n        const observable = this.get();\n        Utils.subscribe(observable,\n            (response) => {\n                this.principal = response;\n                return response;\n            },\n            (error) => {\n                console.log(\"principalService.get failure - error: \", error);\n            });\n        return observable;\n    }\n}\n","import {Injectable, Optional, OnDestroy, Inject, InjectionToken} from \"@angular/core\";\nimport {Subject} from \"rxjs\";\nimport {UserSettingsWebService, AuditEvents, Record} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {Utils} from \"@sinequa/core/base\";\n\n\nexport interface RecentDocument {\n    /**\n     * Fields from Record that we want to store/display/index for recent documents\n     */\n    id: string;\n    title: string;\n    url1: string;\n    treepath: string[];\n    docformat: string;\n    authors: string[];\n\n    /**\n     * Date at which the document was last opened\n     */\n    date: Date;\n\n    /**\n     * Store whether the doc was opened in the preview or directly via url\n     */\n    original: boolean;\n}\n\n\n// from core/models/audit\nexport const enum RecentDocumentEventType {\n    Loaded = \"RecentDocument_Loaded\",\n    Patched = \"RecentDocument_Patched\",\n    Add = \"RecentDocument_Add\",\n    Update = \"RecentDocument_Update\",\n    Delete = \"RecentDocument_Delete\",\n    Search = \"Search_RecentDocument\"\n}\n\n// Types of events triggering a change event\nexport const RECENT_DOCUMENTS_CHANGE_EVENTS = [\n    RecentDocumentEventType.Add,\n    RecentDocumentEventType.Update,\n    RecentDocumentEventType.Delete,\n];\n\n\n// CRUD Events\nexport interface RecentDocumentChangeEvent {\n    type: RecentDocumentEventType;\n    recentdocument?: RecentDocument;\n}\n\nexport const MAX_DOCUMENTS = new InjectionToken(\"MAX_DOCUMENTS\");\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class RecentDocumentsService implements OnDestroy {\n\n    private readonly _events = new Subject<RecentDocumentChangeEvent>();\n    private readonly _changes = new Subject<RecentDocumentChangeEvent>();\n\n    constructor(\n        public userSettingsService: UserSettingsWebService,\n        public searchService: SearchService,\n        @Optional() @Inject(MAX_DOCUMENTS) private maxDocuments: number,\n    ){\n        if(!this.maxDocuments){\n            this.maxDocuments = 20;\n        }\n\n        // Listen to the user settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Revive dates\n            this.recentdocuments.forEach(rd => {\n                if (Utils.isString(rd.date)) {\n                    const date = Utils.toDate(rd.date);\n                    if (date) {\n                        rd.date = date;\n                    }\n                }\n            });\n            // ==> Menus need to be rebuilt\n            this.events.next({type: RecentDocumentEventType.Loaded});\n        });\n\n        // Listen to own events, to trigger change events\n        this._events.subscribe(event => {\n            if(RECENT_DOCUMENTS_CHANGE_EVENTS.indexOf(event.type) !== -1){\n                this.changes.next(event);\n            }\n        });\n\n        /**\n         * Subscribe to the search service to capture \"open-original-document\" event\n         * and add documents to this service\n         */\n        this.searchService.events.subscribe(event => {\n            if(event.type === \"open-original-document\" && event.record){\n                this.addDocument(event.record, true);\n            }\n        });\n    }\n\n\n    // GETTERS\n\n    /**\n     * Returns the list of this user's recent documents.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of recent documents if it does not already exist.\n     */\n    public get recentdocuments() : RecentDocument[]{\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"recentDocuments\"])\n            this.userSettingsService.userSettings[\"recentDocuments\"] = [];\n        return this.userSettingsService.userSettings[\"recentDocuments\"];\n    }\n\n    /**\n     * Triggers any event among RecentDocumentChangeEvent\n     * (use for fine-grained control of recent documents workflow)\n     */\n    public get events() : Subject<RecentDocumentChangeEvent> {\n        return this._events;\n    }\n\n    /**\n     * Triggers when events affect the list of recent documents\n     * (use to refresh recent documents menus)\n     * Cf. CHANGE_EVENTS list\n     */\n    public get changes() : Subject<RecentDocumentChangeEvent> {\n        return this._changes;\n    }\n\n    /**\n     * @returns true if there is at least one recent document\n     */\n    public get hasRecentDocument(): boolean {\n        return this.recentdocuments.length > 0;\n    }\n\n    /**\n     * @returns a recent document with the given name or null if it does not exist\n     * @param name\n     */\n    public recentdocument(text: string): RecentDocument | undefined {\n        const i = this.recentdocumentIndex(text);\n        return i>= 0? this.recentdocuments[i] : undefined;\n    }\n\n    private recentdocumentIndex(id: string): number {\n        for (let i = 0, ic = this.recentdocuments.length; i < ic; i++) {\n            const recentdocument = this.recentdocuments[i];\n            if (recentdocument && recentdocument.id === id) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    private comparator(q1: RecentDocument, q2: RecentDocument){\n        return q2.date.getTime() - q1.date.getTime();\n    }\n\n\n    // CRUD\n\n    /**\n     * Creates a new recent document unless it already exists, in which case the existing document is updated.\n     * Emits an recentdocument event.\n     * Update the data on the server.\n     * @param record Record to add to the service\n     * @param original Whether the original doc was opened or the preview\n     * @returns true if recentdocument was created\n     */\n    public addDocument(record: Record, original: boolean) {\n        if(record){\n            return this.addRecentDocument({\n                id: record.id,\n                title: record.title,\n                url1: record.url1,\n                treepath: record.treepath,\n                docformat: record.docformat,\n                authors: record.authors,\n\n                date: new Date(),\n                original: original\n            });\n        }\n        return false;\n    }\n\n    /**\n     * Creates a new recent document unless it already exists, in which case the existing document is updated.\n     * Emits an recentdocument event.\n     * Update the data on the server.\n     * @param recentdocument the recentdocument to create\n     * @returns true if recentdocument was created\n     */\n    public addRecentDocument(recentdocument: RecentDocument) : boolean {\n\n        if(!recentdocument.id){\n            return false;\n        }\n\n        const i = this.recentdocumentIndex(recentdocument.id); // If the document already exists\n        if(i >= 0){\n            this.recentdocuments[i].date = recentdocument.date; // Update the date of the existing document\n            this.events.next({type : RecentDocumentEventType.Update, recentdocument: this.recentdocuments[i]});\n        }\n        else {\n            this.recentdocuments.push(recentdocument);\n            this.events.next({type : RecentDocumentEventType.Add, recentdocument: recentdocument});\n        }\n\n        // Sort the list\n        this.recentdocuments.sort(this.comparator);\n\n        // Truncate the list\n        if(this.maxDocuments >=0 )\n            this.recentdocuments.splice(this.maxDocuments);\n\n        this.patchRecentDocuments(); // No need to emit an \"Add\" audit event, since it is redundant with the main search API\n        return true;\n    }\n\n    /**\n     * Deletes the given RecentDocument (based on its name)\n     * Emits an RecentDocument event.\n     * Update the data on the server.\n     * @param recentdocument\n     * @returns true if recent document was deleted\n     */\n    public deleteRecentDocument(recentdocument: RecentDocument) : boolean {\n\n        const index = this.recentdocumentIndex(recentdocument.id);\n\n        if(index === -1)\n            return false; // Nothing to delete\n\n        this.recentdocuments.splice(index, 1);\n        this.events.next({type : RecentDocumentEventType.Delete, recentdocument: recentdocument});\n        this.patchRecentDocuments([\n            {\n                type: RecentDocumentEventType.Delete,\n                detail: {\n                    recentdocument: recentdocument.id\n                }\n            }\n        ]);\n        return true;\n    }\n\n    /**\n     * Updates Recent Documents in User settings.\n     * @param auditEvents : Audit Events to be triggered\n     * @returns an Observable which can be used to trigger further events\n     */\n    private patchRecentDocuments(auditEvents?: AuditEvents) {\n        return this.userSettingsService.patch({recentDocuments: this.recentdocuments}, auditEvents)\n            .subscribe(\n                next => {\n                    this.events.next({type: RecentDocumentEventType.Patched});\n                },\n                error => {\n                    console.error(\"Could not patch Recent documents!\", error);\n                }\n            );\n    }\n\n\n    ngOnDestroy() {\n        this.events.complete();\n        this.changes.complete();\n    }\n}","import {Component, Input, OnChanges, OnInit} from \"@angular/core\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {FacetService} from \"../../facet.service\";\nimport {Action} from \"@sinequa/components/action\";\nimport {FacetConfig} from '../facet-multi/facet-multi.component';\nimport {BsFacetList} from '../facet-list/facet-list';\nimport {BsFacetTree} from '../facet-tree/facet-tree';\n\n@Component({\n    selector: \"sq-facet-filters\",\n    templateUrl: \"./facet-filters.html\",\n    styleUrls: [\"./facet-filters.css\"]\n})\nexport class BsFacetFilters implements OnInit, OnChanges {\n    @Input() results: Results;\n    @Input() facets: FacetConfig[];\n    @Input() enableCustomization = false;\n\n    @Input() autoAdjust: boolean = true;\n    @Input() autoAdjustBreakpoint: string = 'xl';\n    @Input() collapseBreakpoint: string = 'sm';\n    @Input() rightAligned: boolean = false;\n    @Input() size: string;\n\n    filters: Action[] = [];\n    hidden: boolean = false;\n\n    facetStatus = {\n        add: {\n            title: \"msg#facet.filters.add\",\n            icon: \"fas fa-plus\"\n        },\n        remove: {\n            title: \"msg#facet.filters.remove\",\n            icon: \"fas fa-minus\"\n        }\n    };\n\n    constructor(\n        private facetService: FacetService\n    ) {\n        this.hidden = false;\n        this.filters = [];\n    }\n\n    ngOnInit() {\n        if (!this.enableCustomization) return;\n\n        if (!this.facetService.defaultFacets) {\n            this.facetService.defaultFacets = [];\n            for (let facet of this.facets) this.facetService.defaultFacets.push({name: facet.name, position: 0, hidden: false, expanded: true, view: \"\"});\n        }\n\n        if (!this.facetService.allFacets) this.facetService.allFacets = this.facets;\n    }\n\n    ngOnChanges() {\n        if(!!this.results)\n            this.buildFilters();\n\n        if(!this.results)\n            this.hidden=true;\n    }\n\n    /**\n     * Build filters bar actions\n     */\n    private buildFilters() {\n\n        // For each facet\n        this.filters = this.filteredFacets.map((facet: FacetConfig) => {\n\n            const children = [\n                new Action({\n                    component: (facet.type === 'list') ? BsFacetList : BsFacetTree,\n                    componentInputs: {results: this.results, name: facet.name, aggregation: facet.aggregation, searchable: facet.searchable, displayActions: true}\n                })\n            ];\n\n            return new Action({\n                name: facet.name,\n                text: facet.title,\n                title: facet.title,\n                icon: facet.icon,\n                disabled: !this.hasData(facet),\n                styles: this.hasFiltered(facet.name) ? \"ml-2 font-weight-bold\" : \"ml-2\",\n                children: children\n            });\n        });\n\n        if (this.enableCustomization) this.addFacetMenu();\n    }\n\n    /**\n     * Use to outline facet when filters are sets\n     * @param facetName facet name\n     *\n     * @returns true if filters are sets otherwise false\n     */\n    private hasFiltered(facetName): boolean {\n        return this.facetService.hasFiltered(facetName);\n    }\n\n    /**\n     * Use to disable menu item when no items in a facet\n     * @param facet facet to check\n     *\n     * @returns true if facet contains at least one item otherwise false\n     */\n    private hasData(facet: FacetConfig): boolean {\n        return this.facetService.hasData(facet.aggregation, this.results);\n    }\n\n    private addFacetMenu() {\n        let outFacets: Action[] = [];\n\n        outFacets.push(new Action({\n            name: `add_remove_all`,\n            text: this.userFacets.length < this.facets.length ? \"msg#facet.filters.addAll\" : \"msg#facet.filters.removeAll\",\n            icon: this.hasFacetSelected ? \n                    (this.userFacets.length < this.facets.length ? \"far fa-minus-square mr-1\" : \"far fa-check-square mr-1\")\n                    : \"far fa-square mr-1\",\n            title: this.userFacets.length < this.facets.length ? \"msg#facet.filters.addAll\" : \"msg#facet.filters.removeAll\",\n            action: () => {\n                if (this.hasFacetSelected && this.userFacets.length === this.facets.length) this.facetService.removeAllFacet();\n                else this.facetService.addAllFacet();\n                this.buildFilters();\n            }\n        }));\n\n        for (let facet of this.facets) {\n            outFacets.push(new Action({\n                name: `add_remove_${facet.name}`,\n                text: facet.title,\n                icon: facet.icon,\n                selected: !!this.userFacets?.find(userFacet => userFacet.name === facet.name),\n                title: !!this.userFacets?.find(userFacet => userFacet.name === facet.name) ? \"msg#facet.filters.add\" : \"msg#facet.filters.remove\",\n                action: () => {\n                    if (this.userFacets?.find(userFacet => userFacet.name === facet.name)) this.facetService.removeFacet({name: facet.name, position: 0, hidden: false, expanded: true, view: \"\"})\n                    else this.facetService.addFacet({name: facet.name, position: 0, hidden: false, expanded: true, view: \"\"});\n                    this.buildFilters();\n                }\n            }));\n        }\n\n        let add_action = new Action({\n            name: \"facets_config\",\n            icon: \"fas fa-cog\",\n            title: \"msg#facet.filters.customizeFacets\",\n            children: outFacets\n        });\n        this.filters = [add_action, ...this.filters]; \n    }\n\n    get filteredFacets() {\n        if (!this.enableCustomization) return this.facets;\n        let new_facets: FacetConfig[] = [];\n\n        if (this.userFacets) {\n            for (let facet of this.facets) {\n                let pos = this.userFacets.findIndex((userFacet) => userFacet.name === facet.name);\n                if (pos >= 0) new_facets.push(facet);\n            }\n        }\n        return new_facets;\n    }\n\n    get userFacets() {\n        return this.facetService.facets;\n    }\n\n    get hasFacetSelected() {\n        if (this.userFacets.length === 0) return false;\n        for (let facet of this.facets) {\n            if (this.userFacets.find(userFacet => userFacet.name === facet.name)) return true;\n        }\n        return false;\n    }\n}\n","<div class=\"facet-filters-bar\" *ngIf=\"!hidden\">\n    <sq-action-menu\n        [items]=\"filters\"\n        [autoAdjust]=\"autoAdjust\"\n        [autoAdjustBreakpoint]=\"autoAdjustBreakpoint\"\n        [collapseBreakpoint]=\"collapseBreakpoint\"\n        [right]=\"rightAligned\"\n        [size]=\"size\">\n    </sq-action-menu>\n</div>\n","import {Directive, Input, Output, OnChanges, OnDestroy, ViewContainerRef, ComponentRef, EventEmitter, Type} from \"@angular/core\";\nimport {LoadComponentService, LoadComponentOptions, LoadedComponent} from \"./load-component.service\";\n\n/**\n * A directive that uses the {@link LoadComponentService} to dynamically load a component.\n * The loaded component's lifecycle is automatically managed with changes to the directive's\n * `options` reflected to the component by rebinding it using {@link LoadComponentService}\n */\n@Directive({\n    selector: \"[sqLoadComponent]\"\n})\nexport class LoadComponentDirective implements OnChanges, OnDestroy {\n    /**\n     * Options for the loading of a component\n     */\n    @Input(\"sqLoadComponent\") options: LoadComponentOptions;\n    /**\n     * Used to emit events when the component is created and destroyed\n     */\n    @Output(\"sqLoadComponent\") eventEmitter = new EventEmitter<{componentRef: ComponentRef<Type<any>> | undefined}>();\n    private loadedComponent: LoadedComponent;\n    private currentComponent: Type<any>;\n\n    constructor(\n        private loadComponentService: LoadComponentService,\n        private viewContainerRef: ViewContainerRef) {\n    }\n\n    /**\n     * Handles any changes to the input `options`. On the first call the component is loaded\n     * and bound. Subsequent changes to the `options` are handled by rebinding the component unless\n     * the component type to load changes in which case the current component is unloaded before\n     * loading the new component.\n     *\n     * The component is loaded using the `ViewContainerRef` associated with the directive\n     */\n    ngOnChanges() {\n        if (this.loadedComponent) {\n            if (this.currentComponent === this.options.component) {\n                this.loadComponentService.bindComponent(this.options, this.loadedComponent);\n                return;\n            }\n            this.loadComponentService.unbindComponent(this.loadedComponent);\n            this.loadedComponent.componentRef.destroy();\n            this.eventEmitter.emit({componentRef: undefined});\n        }\n        this.loadedComponent = this.loadComponentService.loadComponent(this.options, this.viewContainerRef);\n        this.currentComponent = this.options.component;\n        this.eventEmitter.emit({componentRef: !!this.loadedComponent ? this.loadedComponent.componentRef : undefined});\n    }\n\n    /**\n     * Unbinds the loaded component. It is not destroyed here as angular will automatically destroy\n     * the component at the same time as this directive is destroyed as they share the same `ViewContainerRef`\n     */\n    ngOnDestroy() {\n        if (this.loadedComponent) {\n            this.loadComponentService.unbindComponent(this.loadedComponent);\n            this.eventEmitter.emit({componentRef: undefined});\n        }\n    }\n}\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport _enAdvanced from \"./en\";\nimport _frAdvanced from \"./fr\";\nimport _deAdvanced from \"./de\";\n\nconst enAdvanced = Utils.merge({}, _enAdvanced, enSearch);\nconst frAdvanced = Utils.merge({}, _frAdvanced, frSearch);\nconst deAdvanced = Utils.merge({}, _deAdvanced, deSearch);\n\nexport {enAdvanced, frAdvanced, deAdvanced};\n\n","export * from \"./results-grid-view/results-grid-view\";\nexport * from \"./results-view-module\";\nexport * from \"./results-view-selector/results-view-selector\";\n","export * from \"./public-api\";","export * from \"./public-api\";","import {Utils} from \"@sinequa/core/base\";\nimport {enFacet, frFacet, deFacet} from \"@sinequa/components/facet\";\nimport _enFinance from \"./en\";\nimport _frFinance from \"./fr\";\nimport _deFinance from \"./de\";\n\nconst enFinance = Utils.merge({}, _enFinance, enFacet);\nconst frFinance = Utils.merge({}, _frFinance, frFacet);\nconst deFinance = Utils.merge({}, _deFinance, deFacet);\n\nexport { enFinance, frFinance, deFinance };\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enSelection, frSelection, deSelection} from \"@sinequa/components/selection\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enBaskets from \"./en\";\nimport _frBaskets from \"./fr\";\nimport _deBaskets from \"./de\";\n\nconst enBaskets = Utils.merge({}, _enBaskets, enSearch, enSelection, enModal);\nconst frBaskets = Utils.merge({}, _frBaskets, frSearch, frSelection, frModal);\nconst deBaskets = Utils.merge({}, _deBaskets, deSearch, deSelection, deModal);\n\nexport { enBaskets, frBaskets, deBaskets };","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {BsThemeToggleComponent} from \"./theme-toggle.component\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        UtilsModule,\n        IntlModule\n    ],\n    declarations: [\n        BsThemeToggleComponent\n    ],\n    exports: [\n        BsThemeToggleComponent\n    ],\n    providers: []\n})\nexport class BsThemeToggleModule {\n}\n","export default {\n    \"help\": {\n        \"title\": \"Online Help\"\n    },\n\n    \"overrideUser\": {\n        \"title\": \"Override User\",\n        \"userName\": \"User name\",\n        \"domain\": \"Domain\"\n    },\n\n    \"btnClose\": {\n        \"text\": \"Close\"\n    }\n};\n","export * from \"./public-api\";","export default {\n    \"preview\": {\n        \"noDocumentDataErrorPopupTitle\": \"Echec d'accès aux données de ce document\",\n        \"highlightsTitle\": \"Surlignage\",\n        \"noEntityToHighlight\": \"Aucune entité affichée dans ce document\",\n        \"termXLabel\": \"Terme recherché {index, number}\",\n        \"otherTerms\": \"Autres termes\",\n        \"previousDocument\": \"Précédent\",\n        \"nextDocument\": \"Suivant\",\n        \"originalDocument\": \"Document original\",\n        \"selectedHighlight\": \"Elément sélectionné\",\n        \"noSelectedHighlight\": \"Aucun élément sélectionné\",\n        \"firstHighlightButtonAltText\": \"Premier élément\",\n        \"previousHighlightButtonAltText\": \"Elément précédent\",\n        \"nextHighlightButtonAltText\": \"Elément suivant\",\n        \"relevanceSortHighlightButtonText\": \"Pertinence\",\n        \"textOrderSortHighlightButtonText\": \"Ordre du texte\",\n        \"lastHighlightButtonAltText\": \"Dernier élément\",\n        \"highlightFilters\": {\n            \"title\": \"Filtres\",\n            \"keepAll\": \"Tout inclure\",\n            \"keepNone\": \"Tout exclure\",\n            \"keepAllInCategory\": \"Toutes les entités\",\n            \"keepNoneInCategory\": \"Aucune entité\"\n        },\n        \"documentPropertiesTitle\": \"Détails\",\n        \"similarDocumentsTitle\": \"Documents similaires\",\n        \"showAll\": \"Montrer toutes les valeurs\",\n        \"sortAlphabetically\": \"Trier par ordre alphabetique\",\n        \"sortFrequency\": \"Trier par fréquence\",\n        \"loading\": \"Chargement...\",\n        \"noextract\": \"Pas d'extrait\",\n        \"search\": \"Recherche\",\n        \"gotopage\": \"Aller à la page\",\n        \"page\": \"Page {page}\",\n        \"current\": \"actuel\"\n    },\n    \"facet\": {\n        \"preview\": {\n            \"closeTitle\": \"Fermer\",\n            \"expandTitle\": \"Maximiser\",\n            \"minimize\": \"Réduire\",\n            \"maximize\": \"Agrandir\",\n            \"toggleExtracts\": \"Surlignage des extraits pertinents\",\n            \"toggleEntities\": \"Surlignage des entités\"\n        }\n    }\n};\n","export * from \"./config/ccapp\";\n\nexport * from \"./query/query\";\nexport * from \"./suggest/suggestion\";\n\nexport * from \"./app.web.service\";\nexport * from \"./audit.web.service\";\nexport * from \"./dataset.web.service\";\nexport * from \"./download.web.service\";\nexport * from \"./http-client\";\nexport * from \"./http.service\";\nexport * from \"./json-method-plugin.web.service\";\nexport * from \"./labels.web.service\";\nexport * from \"./preview.web.service\";\nexport * from \"./principal.web.service\";\nexport * from \"./query-export.web.service\";\nexport * from \"./query.web.service\";\nexport * from \"./recent-queries.web.service\";\nexport * from \"./rfm.web.service\";\nexport * from \"./similar-documents.web.service\";\nexport * from './sponsored-links.web.service';\nexport * from \"./start-config.web.service\";\nexport * from \"./suggest-field.web.service\";\nexport * from \"./suggest-query.web.service\";\nexport * from \"./user-ratings.web.service\";\nexport * from \"./user-settings.web.service\";\nexport * from \"./queryintent.service\";\nexport * from \"./web-services.module\";\n","import { Component, Input, OnChanges, Output, EventEmitter } from '@angular/core';\nimport { CategoryHighlightData, HighlightValue, PreviewData } from '@sinequa/core/web-services';\nimport { PreviewDocument } from '../../preview-document';\n\n@Component({\n  selector: 'sq-preview-entity-panel',\n  templateUrl: './preview-entity-panel.component.html',\n  styleUrls: ['./preview-entity-panel.component.scss']\n})\nexport class BsPreviewEntityPanelComponent implements OnChanges {\n\n  /**\n   * Preview data\n   */\n  @Input() previewData: PreviewData;\n\n  /**\n   * Preview document\n   */\n  @Input() previewDocument: PreviewDocument;\n\n  /**\n   * What is the style of the facets\n   */\n  @Input() style: string;\n\n  /**\n   * Whether the facets are collapsible\n   */\n  @Input() collapsible: boolean = true;\n\n  /**\n   * Allows to uncheck all items from specific facets\n   */\n  @Input() startUnchecked: {[entity: string]: boolean} = {};\n\n  /**\n   * The list of entities to display (if ignored, will be deducted from the preview data)\n   */\n  @Input() entities: string[];\n\n  /**\n   * Triggers an event when check all / check none is use in a facet\n   */\n  @Output() facetChecked = new EventEmitter<{entity: string, checked: boolean}>();\n\n  _entities: string[] = [];\n\n  constructor() { }\n\n  /**\n   * Extracts the list of entities from the preview data\n   */\n  ngOnChanges() {\n    if(this.entities && !!this.previewData){ // If the list of entities is provided as input\n      this._entities = this.entities;\n    }\n    else if(this.previewData){ // The list of entities is deduced from the preview data\n      this._entities = Object.keys(this.previewData.highlightsPerCategory).filter(value => value !== \"extractslocations\");\n    }\n    else {  // No entity to show\n      this._entities = [];\n    }\n  }\n\n  /**\n   * Return the data for a specific entity category\n   * @param entity\n   */\n  data(entity: string): CategoryHighlightData {\n    return this.previewData.highlightsPerCategory[entity];\n  }\n\n  /**\n   * Returns the display value of a specific entity\n   * @param entity\n   */\n  entityDisplay(entity: string): string {\n    return this.data(entity).categoryDisplayLabelPlural || this.data(entity).categoryDisplayLabel || entity;\n  }\n\n  /**\n   * Returns the icon of a specific entity\n   * @param entity\n   */\n  entityIcon(entity: string): string {\n    return \"sq-icon-\"+entity;\n  }\n\n  /**\n   * Returns the list of values of a specific entity\n   * @param entity\n   */\n  entityValues(entity: string): HighlightValue[] {\n    return this.data(entity).values;\n  }\n\n  /**\n   * Called by child facet when items are checked/unchecked\n   * @param entity\n   * @param checked\n   */\n  itemsChecked(entity: string, checked: boolean){\n    this.facetChecked.next({entity: entity, checked: checked});\n  }\n\n}\n","<ng-container *ngFor=\"let entity of _entities\">\n    <sq-facet-card *ngIf=\"entityValues(entity).length\" class=\"d-block my-3\" [title]=\"entityDisplay(entity)\" [icon]=\"entityIcon(entity)\" [collapsible]=\"collapsible\" [buttonsStyle]=\"style\">\n        <sq-preview-entity-facet #facet \n            [entity]=\"entity\" \n            [data]=\"entityValues(entity)\" \n            [previewData]=\"previewData\" \n            [previewDocument]=\"previewDocument\"\n            [startUnchecked]=\"startUnchecked[entity]\"\n            (itemsChecked)=\"itemsChecked(entity, $event)\">\n        </sq-preview-entity-facet>\n    </sq-facet-card>\n</ng-container>","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enCollapse, frCollapse, deCollapse} from \"@sinequa/components/collapse\";\nimport {enMetadata, frMetadata, deMetadata} from \"@sinequa/components/metadata\";\n\nimport _enResult from \"./en\";\nimport _frResult from \"./fr\";\nimport _deResult from \"./de\";\n\nconst enResult = Utils.merge({}, _enResult, enSearch, enMetadata, enCollapse);\nconst frResult = Utils.merge({}, _frResult, frSearch, frMetadata, frCollapse);\nconst deResult = Utils.merge({}, _deResult, deSearch, deMetadata, deCollapse);\n\nexport { enResult, frResult, deResult };\n","export * from \"./public-api\";","import {Output, ContentChild, TemplateRef, Component, EventEmitter, ChangeDetectorRef} from \"@angular/core\";\nimport {AutocompleteItem, AutocompleteComponent} from \"../../autocomplete.directive\";\n\n@Component({\n    selector: \"sq-autocomplete-list\",\n    templateUrl: \"./autocomplete-list.html\",\n    styleUrls: [\"./autocomplete-list.css\"]\n})\nexport class BsAutocompleteList implements AutocompleteComponent {\n\n    /**\n     * Template for the display of AutocompleteItem items, passed by transclusion\n     */\n    @ContentChild(\"itemTpl\", {static: false}) itemTpl: TemplateRef<any>;\n\n    /**\n     * Optional footer template, passed by transclusion\n     */\n    @ContentChild(\"footerTpl\", {static: false}) footerTpl: TemplateRef<any>;\n\n    /**\n     * Event emitter for clicks on an autocomplete item\n     */\n    @Output() clicked = new EventEmitter<AutocompleteItem>();\n\n    _active: boolean = false;\n    _items: AutocompleteItem[] | undefined;\n\n    _cursor: number = -1;\n\n\n    constructor(\n        private changeDetectorRef: ChangeDetectorRef){\n    }\n\n\n    /**\n     * Update the data and state of this component\n     * @param active whether the component should be displayed\n     * @param items The list of items to display\n     */\n    public update(active: boolean, items?: AutocompleteItem[]){\n        //console.log(\"autocomplete update \", active, items);\n        this._active = active;\n        this._items = items;\n        this._cursor = -1;\n\n        this.changeDetectorRef.markForCheck();\n    }\n\n    /**\n     * Whether there are any item to display\n     */\n    public get hasItems(): boolean {\n        return this._active && !!this._items && this._items.length > 0;\n    }\n\n    /**\n     * Returns the currently selected item, if any\n     */\n    public get selectedValue(): AutocompleteItem | undefined {\n        if(this._items && this._cursor >= 0 && this._cursor < this._items.length)\n            return this._items[this._cursor];\n        return undefined;\n    }\n\n    /**\n     * Select the next item in the list and returns it\n     */\n    public selectNext(): AutocompleteItem | undefined {\n        if (this._items && this._cursor < this._items.length-1) {\n            this._cursor++;\n        }\n        return this.selectedValue;\n    }\n\n    /**\n     * Select the previous item in the list and returns it\n     */\n    public selectPrevious(): AutocompleteItem | undefined {\n        if(this._cursor > 0)\n            this._cursor--;\n        return this.selectedValue;\n    }\n\n    /**\n     * Test whether an item is selected\n     * @param item\n     * @param i\n     */\n    _isSelected(item: AutocompleteItem, i: number): boolean {\n        return this._cursor === i;\n    }\n\n    /**\n     * Listen to click events and emits events\n     * @param item\n     * @param event\n     */\n    _itemClicked(item: AutocompleteItem, event){\n        this.clicked.next(item);\n        event.stopPropagation();\n        return false;\n    }\n\n    /**\n     * This prevents the focus to be removed from the <input>, which clauses the dropdown\n     */\n    _mouseDown(event){\n        event.preventDefault();\n    }\n\n}","<div class=\"sq-autocomplete-list card position-absolute\" *ngIf=\"hasItems\" (mousedown)=\"_mouseDown($event)\">\n    <div class=\"list-group list-group-flush\">\n        <a  href=\"#\" (click)=\"_itemClicked(item, $event)\"\n            *ngFor=\"let item of _items; let i = index\"\n            class=\"list-group-item list-group-item-action p-0 border-0\" \n            [ngClass]=\"{'list-group-item-primary': _isSelected(item, i)}\"\n            [sqScrollIntoView]=\"{active: _isSelected(item, i), first: i === 0}\">\n            <ng-container *ngIf=\"itemTpl\">\n                <ng-container *ngTemplateOutlet=\"itemTpl; context:{$implicit: item}\"></ng-container>\n            </ng-container>\n        </a>\n    </div>\n    <div class=\"card-footer\" *ngIf=\"footerTpl\">\n        <ng-container *ngTemplateOutlet=\"footerTpl; context:{$implicit: _items}\"></ng-container>\n    </div>\n</div>","import {Component, OnInit, OnDestroy, ChangeDetectorRef, Inject} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {Query} from \"@sinequa/core/app-utils\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {MODAL_MODEL} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {PreviewData} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {PreviewService} from \"../../preview.service\";\nimport {UIService} from \"@sinequa/components/utils\";\n\nexport interface PreviewPopupModel {\n    record: Record;\n    query: Query;\n    displaySimilarDocuments: boolean;\n    metadata: string[];\n}\n\n@Component({\n    selector: \"sq-preview-popup\",\n    templateUrl: \"./preview-popup.html\",\n    styleUrls: [\"./preview-popup.css\"]\n})\nexport class BsPreviewPopup implements OnInit, OnDestroy {\n    private screenSize: string;\n    private resizeSubscription: Subscription;\n    previewData: PreviewData;\n    private previewDataError: boolean;\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: PreviewPopupModel,\n        public searchService: SearchService,\n        public previewService: PreviewService,\n        protected uiService: UIService,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnInit() {\n        this.screenSize = this.uiService.screenSize;\n        this.resizeSubscription = Utils.subscribe(this.uiService.resizeEvent,\n            (event) => {\n                if (this.screenSize !== this.uiService.screenSize) {\n                    this.screenSize = this.uiService.screenSize;\n                    this.changeDetectorRef.markForCheck();\n                }\n            });\n        this.updatePreviewData(this.model.record.id);\n    }\n\n    public ngOnDestroy(): void {\n        this.resizeSubscription.unsubscribe();\n    }\n\n    get currentId(): string {\n        if (this.previewData && this.previewData.record) {\n            return this.previewData.record.id;\n        }\n        return \"\";\n    }\n\n    private updatePreviewData(id: string) {\n        this.previewService.getPreviewData(id, this.model.query).subscribe(\n            previewData => {\n                this.previewData = previewData;\n                this.previewDataError = false;\n                this.changeDetectorRef.markForCheck();\n            },\n            error => {\n                this.previewDataError = true;\n            }\n        );\n    }\n\n    public get recordTitle(): string {\n        if (this.previewData && this.previewData.record != null) {\n            return this.previewData.record.title;\n        }\n        return this.previewDataError ? \"msg#preview.noDocumentDataErrorPopupTitle\" : \"\";\n    }\n\n    public get showPreviousNextText(): boolean {\n        return this.uiService.screenSizeIsGreaterOrEqual(\"lg\");\n    }\n\n    public get showPreviousNext(): boolean {\n        return this.getSearchPositionInPage() >= 0 && !!this.searchService.results &&\n            !!this.searchService.results.records && this.searchService.results.records.length > 1;\n    }\n\n    public get previousEnabled(): boolean {\n        return this.getSearchPositionInPage() > 0;\n    }\n\n    public get nextEnabled(): boolean {\n        if (!this.searchService.results || !this.searchService.results.records) {\n            return false;\n        }\n        const searchPosition = this.getSearchPositionInPage();\n        return searchPosition >= 0 && searchPosition < (this.searchService.results.records.length - 1);\n    }\n\n    private getSearchPositionInPage(): number {\n        const id = this.currentId;\n        if (id && this.searchService.results && this.searchService.results.records) {\n            for (let i = 0, ic = this.searchService.results.records.length; i < ic; i++) {\n                const record = this.searchService.results.records[i];\n                if (record.id === id) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n\n    public previous() {\n        if (!this.searchService.results || !this.searchService.results.records) {\n            return;\n        }\n        const index = this.getSearchPositionInPage();\n        if (index <= 0) {\n            return;\n        }\n        const item = this.searchService.results.records[index - 1];\n        this.updatePreviewData(item.id);\n    }\n\n    public next() {\n        if (!this.searchService.results || !this.searchService.results.records) {\n            return;\n        }\n        const index = this.getSearchPositionInPage();\n        if (index === -1 || index >= (this.searchService.results.records.length - 1)) {\n            return;\n        }\n        const item = this.searchService.results.records[index + 1];\n        this.updatePreviewData(item.id);\n    }\n}","<div class=\"modal-content sq-preview-popup\">\n    <sq-modal \n        [title]=\"recordTitle\"\n        [showFooter]=\"false\">\n        <div header *ngIf=\"showPreviousNext\" class=\"previousNextDocumentButtons\">\n            <button class=\"btn btn btn-outline-primary {{!previousEnabled ? 'disabled' : ''}}\" (click)=\"previous()\">\n                <span class=\"fas fa-arrow-left\" aria-hidden=\"true\"></span><span *ngIf=\"showPreviousNextText\"> {{'msg#preview.previousDocument' | sqMessage}}</span>\n            </button>\n            <button class=\"btn btn btn-outline-primary {{!nextEnabled ? 'disabled' : ''}}\" (click)=\"next()\">\n                <span class=\"fas fa-arrow-right\" aria-hidden=\"true\"></span><span *ngIf=\"showPreviousNextText\"> {{'msg#preview.nextDocument' | sqMessage}}</span>\n            </button>\n        </div>\n        <sq-preview-panel [leftPaneAdditionalClasses]=\"'d-none d-lg-block'\" [query]=\"model.query\" [previewData]=\"previewData\" [displaySimilarDocuments]=\"model.displaySimilarDocuments\" [metadata]=\"model.metadata\">\n        </sq-preview-panel>\n    </sq-modal>\n</div>","export default {\n    \"help\": {\n        \"title\": \"Aide en ligne\"\n    },\n\n    \"overrideUser\": {\n        \"title\": \"Emprunt d'identité\",\n        \"userName\": \"Identifiant\",\n        \"domain\": \"Domaine\"\n    },\n\n    \"btnClose\": {\n        \"text\": \"Fermer\"\n    }\n};\n","import {Component, Input, OnInit} from \"@angular/core\";\nimport {ValueItem} from \"@sinequa/core/app-utils\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"@sinequa/components/search\";\n\n@Component({\n    selector: \"sq-result-source\",\n    templateUrl: \"./result-source.html\",\n    styleUrls: [\"./result-source.css\"]\n})\nexport class ResultSource implements OnInit {\n    @Input() record: Record;\n    @Input() displayTreepath: boolean;\n    @Input() displayTreepathMinLevel = 0;\n    @Input() displayTreepathMaxLevel: number;\n    @Input() displayUrl: boolean = true;\n\n    source: ValueItem[] = [];\n    url: string;\n\n    constructor(\n        public searchService: SearchService) {\n    }\n\n    public ngOnInit() {\n        if(this.displayTreepath && !!this.record.treepath){\n            const treepath = this.record.treepath[0];\n            if(!!treepath && treepath.length >= 2){\n                this.source = treepath.substr(1, treepath.length-2).split('/')\n                    .slice(this.displayTreepathMinLevel, this.displayTreepathMaxLevel)\n                    .map((path,i,array) => {\n                        return {\n                            display: path,\n                            value: '/'+array.slice(0,i+1).join('/')+'/*'\n                        };\n                    });\n            }\n        }\n        if(this.displayUrl){\n            this.url = this.record.url1;\n        }\n    }\n\n    select(item){\n        if(this.searchService.addFieldSelect(\"treepath\", item)) {\n            this.searchService.search();\n        }\n    }\n\n}","<span class=\"sq-result-source\">\n    <ng-container *ngFor=\"let s of source; let i=index\">\n        <span *ngIf=\"i > 0\"> &#8250; </span>\n        <span (click)=\"select(s)\" class=\"link\" title=\"Select this source\">{{s.display}}</span>\n    </ng-container>\n    <span *ngIf=\"source.length>0 && !!url\"> - </span>\n    <a *ngIf=\"url\" href=\"{{url}}\" target=\"_blank\">{{url}}</a>\n</span>","export * from \"./saved-queries.service\";\nexport * from \"./recent-queries.service\";\nexport * from \"./recent-documents.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export class IteratorAdaptor<T,B> implements IterableIterator<T> {\n    readonly return?: (value?: any) => IteratorResult<T>;\n    readonly throw?: (error?: any) => IteratorResult<T>;\n\n    constructor(private base: Iterator<B>, private adaptor: (b: B) => T) {\n        this.return = (base.return) ? (v) => this.translate(this.base.return!(v)) : undefined;\n        this.throw  = (base.throw)  ? (e) => this.translate(this.base.throw!(e))  : undefined;\n    }\n\n    static forIterable<B, T>(iterable: Iterable<B>, adaptor: (b: B) => T): IterableIterator<T> {\n        /*if (iterable === undefined) {\n            return undefined;\n        }*/\n\n        return new IteratorAdaptor<T,B>(\n            iterable[Symbol.iterator](),\n            adaptor\n        );\n    }\n\n    private translate(result: IteratorResult<B>): IteratorResult<T> {\n        if (result.done) {\n            return {\n                done: result.done,\n                value: (result.done && result.value === undefined) ? undefined : this.adaptor(result.value)\n            };\n        }\n        else {\n            return {\n                value: this.adaptor(result.value)\n            };\n        }\n    }\n\n    next(value?: any)  { return this.translate(this.base.next(value)); }\n\n    [Symbol.iterator](): IterableIterator<T> { return this; }\n}\n","export default {\n    network: {\n        settings: {\n            physics: \"Physique\",\n            springLength: \"Longueur des liens\",\n            springConstant: \"Raideur des liens\",\n            damping: \"Amortissement\",\n            repulsion: \"Répulsion\",\n            gravity: \"Gravité\",\n            defaults: \"Valeurs par défaut\",\n        },\n        actions: {\n            refresh: \"Rafraichir le graphe\",\n            providers: \"Sources de données\",\n            fetchMoreAll: \"Afficher plus de données pour toutes les aggrégations\",\n            fetchMoreAllText: \"Afficher plus de données\",\n            fetchMoreAgg: \"Afficher plus de données pour l'aggrégation {agg}\",\n            expandNode: \"Etendre le noeud {label}\",\n            expandNodeWith: \"Etendre le noeud avec {agg}\",\n            toggle: \"Activer/Désactiver la source\",\n            active: \"Activé\",\n            inactive: \"Désactivé\",\n            reset: \"Reconstruire\",\n            resetTitle: \"Effacer les données de cette source et la reconstruire\",\n            filterSearch: \"Filtrer la recherche avec {label}\",\n            filterSearch2: \"Filtrer la recherche avec {label1} et {label2}\",\n            enrichNode: \"Enrichir le noeud {label}\",\n            expandMeta: \"Afficher les métadonnées\",\n            collapseMeta: \"Cacher les métadonnées\",\n        },\n        infocards: {\n            count: \"Compteur\",\n            aggregation: \"Aggrégation\",\n            record: \"Entrée\",\n            expand: \"Etrendre\",\n            collapse: \"Réduire\",\n            close: \"Fermer\",\n            focus: \"Centrer la vue\"\n        }\n    }\n};\n","export default {\n    \"alerts\": {\n        \"alerts\": \"Alarme\",\n        \"createAlert\": \"Alarm erstellen\",\n        \"manageAlerts\": \"Alarme verwalten\",\n        \"alertAlreadyExists\": \"Ein Alarm mit diesem Namen existiert bereits. Möchten Sie ihn ersetzen?\"\n    },\n\n    \"editAlert\": {\n        \"title\": \"Alarm\",\n        \"name\": \"Name\",\n        \"frequency\": \"Häufigkeit\",\n        \"days\": \"Tage\",\n        \"monday\": \"Montag\",\n        \"tuesday\": \"Dienstag\",\n        \"wednesday\": \"Mittwoch\",\n        \"thursday\": \"Donnerstag\",\n        \"friday\": \"Freitag\",\n        \"saturday\": \"Samstag\",\n        \"sunday\": \"Sonntag\",\n        \"times\": \"Uhrzeitangaben\",\n        \"active\": \"Aktiv\",\n        \"updateQuery\": \"Aktualisiere Suchanfrage\",\n        \"runQuery\": \"Führe Suchanfrage aus\",\n        \"lossDataMessage\": \"Möchten Sie gehen, ohne Ihre Änderungen zu speichern?\"\n    },\n\n    \"manageAlerts\": {\n        \"title\": \"Alarme verwalten\",\n        \"edit\": \"Bearbeiten\",\n        \"reorder\": \"Neu sortieren\",\n        \"remove\": \"Entfernen\",\n        \"removeAll\": \"Alle entfernen\"\n    },\n\n};\n","/* (ignored) */","import { Injectable } from '@angular/core';\nimport { Query } from '@sinequa/core/app-utils';\nimport { Utils } from '@sinequa/core/base';\nimport { AggregationItem, Record } from '@sinequa/core/web-services';\nimport { SelectionService } from '@sinequa/components/selection';\nimport { NodeType, EdgeType, Node, Edge, NetworkProvider } from '../network-models';\nimport { StructuralEdgeType, StructuralTriggerType, StructuralDisplayType, RecordsProvider, RecordNode, CustomData } from './records-provider';\nimport { AggregationEdgeType, AggregationProvider, AggregationData, AggregationTriggerType } from './aggregation-provider';\nimport { SelectedRecordsProvider } from './selected-records-provider';\nimport { AsyncRecordsProvider } from './async-records-provider';\nimport { DynamicNodeProvider, DynamicNodeType } from './dynamic-node-provider';\nimport { DynamicEdgeProvider, DynamicEdgeType } from './dynamic-edge-provider';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProviderFactory {\n\n    constructor(\n        protected selectionService: SelectionService\n    ){}\n\n\n    // Node Types\n\n    /**\n     * Create a new NodeType, given a name and node options (static or dynamic)\n     * @param name identifier of this node type\n     * @param nodeOptions Vis.js display properties of this node (may be a static object or a function returning an object given the node)\n     * @param field an optional field name for this node type, which can be used to filter the content\n     */\n    createNodeType(name: string, nodeOptions: {[key: string]: any} | ((node: Node, type: NodeType) => {[key: string]: any}), field?: string): NodeType {\n        return { name, nodeOptions, field }\n    }\n\n    /**\n     * Create a new NodeType, using FontAwesome to render an icon with a given color and size\n     * @param name identifier of this node type\n     * @param icon Unicode code of the FontAwesome icon (eg. \\uf007)\n     * @param color Color of the icon (eg. #FF0000)\n     * @param size Size of the icon and text (if constant - use createDynamicFontAwesomeNodeType for a dynamic size)     * @param field an optional field name for this node type, which can be used to field the content\n     * @param field an optional field name for this node type, which can be used to filter the content\n     */\n    createFontAwesomeNodeType(name: string, icon: string, color: string, size: number, field?: string): NodeType {\n        return this.createNodeType(name, this.createFontAwesomeNodeOptions(icon, color, size), field);\n    }\n\n    /**\n     * Create a new NodeType, using FontAwesome to render an icon with a given color.\n     * The size of the icon and label is determined dynamically based on its number of neighbors (node.count).\n     * @param name identifier of this node type\n     * @param icon Unicode code of the FontAwesome icon (eg. \\uf007)\n     * @param color Color of the icon (eg. #FF0000)\n     * @param field an optional field name for this node type, which can be used to filter the content\n     */\n    createDynamicFontAwesomeNodeType(name: string, icon: string, color: string, field?: string): NodeType {\n        return this.createNodeType(name, this.createDynamicFontAwesomeNodeOptions(icon, color), field);\n    }\n\n    /**\n     * Create a DynamicNodeType, for nodes that can mutate into a RecordNode, via a Query.\n     * @param name identifier of this node type\n     * @param getQuery a function returning a Query, given a Node. The first record in the results will be used to mutate the node\n     * @param nodeOptions Vis.js display properties of this node (may be a static object or a function returning an object given the node)\n     * @param trigger (default: onclick) Determines when the node should be mutated (oninsert: when the node is created, onclick: when the node is cliked, manual: via a click on a button or link)\n     * @param field an optional field name for this node type, which can be used to filter the content\n     */\n    createDynamicNodeType(name: string, getQuery: (node: Node) => Query, nodeOptions: {[key: string]: any} | ((node: Node, type: NodeType) => {[key: string]: any}), trigger: StructuralTriggerType = \"onclick\", field?: string): DynamicNodeType {\n        const nodeType = this.createNodeType(name, nodeOptions, field) as DynamicNodeType;\n        nodeType.getQuery = getQuery;\n        nodeType.trigger = trigger;\n        return nodeType;\n    }\n\n    /**\n     * Transform a regular NodeType into a dynamic NodeType (enriched with a record, via a Query)\n     * @param nodeType A NodeType to transform into \n     * @param getQuery A function that takes in a Node and returns a Query\n     * @param nodeOptions Vis.js display properties of this node (may be a static object or a function returning an object given the node)\n     * @param trigger (default: onclick) Determines when the node should be mutated (oninsert: when the node is created, onclick: when the node is cliked, manual: via a click on a button or link)\n     */\n    makeNodeTypeDynamic(nodeType: NodeType, getQuery: (node: Node) => Query | undefined, nodeOptions?: {[key: string]: any} | ((node: Node, type: NodeType) => {[key: string]: any}), trigger: \"oninsert\" | \"onclick\" | \"manual\" = \"onclick\"): DynamicNodeType {\n        const _nodeType = nodeType as DynamicNodeType;\n        _nodeType.getQuery = getQuery;\n        _nodeType.trigger = trigger;\n        if(nodeOptions) {\n            const originalNodeOptions = nodeType.nodeOptions;\n            _nodeType.nodeOptions = (node: Node, type: NodeType) => {\n                let _no = originalNodeOptions; // Use the default node options\n                if((node as RecordNode).record) { // If the node has been mutated, take into account the provided nodeOptions\n                    _no = nodeOptions;\n                }\n                if(typeof _no === \"function\"){\n                    return _no(node, type);\n                }\n                else return _no;\n            };\n        }\n        return _nodeType;\n    }\n\n\n    // Node Options\n\n    /**\n     * Create FontAwesome-based node options for rendering a node in Vis.js.\n     * @param icon Unicode code of the FontAwesome icon (eg. \\uf007)\n     * @param color Color of the icon (eg. #FF0000)\n     * @param size Size of the icon and text (the actual sizes in pixel are determined with a normalization function)\n     */\n    createFontAwesomeNodeOptions(icon: string, color: string, size: number) {\n        return { \n            shape: \"icon\", \n            icon: {\n                face:\"'Font Awesome 5 Free'\",\n                weight: \"bold\",\n                code: icon,\n                color: color,\n                size: this.logScale(size, 5, 1.0, 1.7)\n            },\n            font: {\n                size: this.logScale(size, 5)\n            }\n        }\n    }\n\n    /**\n     * Create dynamic FontAwesome-based node options for rendering a node in Vis.js.\n     * The size of the node is determined for each node, based on its number of neighbors (node.count property)\n     * @param icon Unicode code of the FontAwesome icon (eg. \\uf007)\n     * @param color Color of the icon (eg. #FF0000)\n     */\n    createDynamicFontAwesomeNodeOptions(icon: string, color: string) {\n        return (node: Node, type: NodeType) => {\n            return this.createFontAwesomeNodeOptions(icon, color, node.count);\n        }\n    }\n    \n    /**\n     * Create node options to display a circular image with the given url, size and background as a node.\n     * @param imageUrl Path to the image (eg. 'assets/images/...png')\n     * @param size Size of the icon and text (the actual sizes in pixel are determined with a normalization function)\n     * @param background The background color of the image, displayed while the image is loading\n     */\n    createImageNodeOptions(imageUrl: string, size: number, background = 'white'): {[key: string]: any} {\n        return { \n            shape: \"circularImage\", \n            image: imageUrl,\n            size: this.logScale(size, 10, 1.0, 1.3),\n            color: {\n                background\n            },\n            font: {\n                size: this.logScale(size, 5),\n                vadjust: -this.logScale(size, 0)\n            }\n        };\n    }\n\n    /**\n     * Create dynamic node options to display nodes with circular images.\n     * @param getImageUrl A function that takes as input the node and returns the image URL\n     * @param size (optional) A number (or function returning a number) to size the node (default to the node.count property)\n     */\n    createDynamicImageNodeOptions(getImageUrl: (node: Node) => string, size?: number | ((node: Node) => number)): ((node: Node, type: NodeType) => {[key: string]: any}) {\n        return (node: Node, type: NodeType) => {\n            const image = getImageUrl(node);\n            const _size = Utils.isNumber(size)? size : Utils.isFunction(size)? size(node) : node.count;\n            return this.createImageNodeOptions(image, _size);\n        }\n    }\n\n\n    // Standard Node types\n\n    /**\n     * Create a standard node type for documents/records.\n     * @param icon (default: \\uf15c) Unicode code of the FontAwesome icon\n     * @param color (default: #15aabf) Color of the icon\n     * @param size (default: 50) Size of the node\n     * @param name (default: 'document') Name of the node type\n     */\n    createRecordNodeType(icon = \"\\uf15c\", color = \"#15aabf\", size = 50, name = 'document'): NodeType {\n        return this.createFontAwesomeNodeType(name, icon, color, size);\n    }\n\n    /**\n     * Create a standard dynamic node type for the geo entity.\n     * @param icon (default: \\uf57d) Unicode code of the FontAwesome icon\n     * @param color (default: #5cb85c) Color of the icon\n     * @param name (default: 'geo') Name of the node type\n     */\n    createGeoNodeType(icon = \"\\uf57d\", color = \"#5cb85c\", name = 'geo'): NodeType {\n        return this.createDynamicFontAwesomeNodeType(name, icon, color, name);\n    }\n    \n    /**\n     * Create a standard dynamic node type for the company entity.\n     * @param icon (default: \\uf1ad) Unicode code of the FontAwesome icon\n     * @param color (default: #f0ad4e) Color of the icon\n     * @param name (default: 'company') Name of the node type\n     */\n    createCompanyNodeType(icon = \"\\uf1ad\", color = \"#f0ad4e\", name = 'company'): NodeType {\n        return this.createDynamicFontAwesomeNodeType(name, icon, color, name);\n    }\n    \n    /**\n     * Create a standard dynamic node type for the person entity.\n     * @param icon (default: \\uf007) Unicode code of the FontAwesome icon\n     * @param color (default: #0275d8) Color of the icon\n     * @param name (default: 'person') Name of the node type\n     */\n    createPersonNodeType(icon = \"\\uf007\", color = \"#0275d8\", name = 'person'): NodeType {\n        return this.createDynamicFontAwesomeNodeType(name, icon, color, name);\n    }\n\n    \n    // Edge Types\n\n    /**\n     * Create a list of StructuralEdgeType objects given a NodeType for the record and a map of field names to NodeTypes.\n     * (For example, a RecordsProvider will create a central node for a record, and then several edges pointing to nodes \n     * for each field contained by that record, such as entities, CSV, or any other type of metadata attached to the record)\n     * @param recordType The NodeType of the record node\n     * @param fieldTypes A map of field names (eg. 'entity12') to NodeTypes, which will be used to create nodes for each entity12 value\n     * @param trigger (default: oninsert) Determines when this edge should be created (oninsert: when the record node is created, onclick: when the record node is cliked, manual: via a click on a button or link)\n     * @param display (default: existingnodes) Determines which edges should be visible (all: all the edges are visible; paginate: only a limited number are visible, but more can be shown, using an action; existingnodes: edges will only be created for nodes that already exist in the network; a function take the node as input can also be used to determine visibility dynamically)\n     * @param edgeOptions (default: standard edge options as returned by createEdgeOptions()) Edge options for displaying the edge with Vis.js\n     * @param count (default: 10): when display=paginate, this setting limits the number of edges displayed\n     */\n    createStructuralEdgeTypes(recordType: NodeType, fieldTypes: NodeType[], trigger: StructuralTriggerType = \"oninsert\", display: StructuralDisplayType = \"existingnodes\", edgeOptions?: any, count?: number): StructuralEdgeType[] {\n        return fieldTypes.map(type => {\n            if(!type.field){\n                throw new Error(\"Structural Edges require node types with a field\");\n            }\n            return {\n                nodeTypes: [recordType, type],\n                field: type.field,\n                trigger,\n                display,\n                edgeOptions: edgeOptions || this.createEdgeOptions(),\n                count\n            };\n        });\n    }\n\n    /**\n     * Creates a custom structural edge type with a provided parse function that generates\n     * node and edge data (instead of the built-in generic method).\n     * @param recordType The NodeType of the record node\n     * @param nodeTypes The NodeType(s) of the nodes generated by the parse function\n     * @param field The field of the record into which the node data is stored\n     * @param trigger (default: oninsert) Determines when this edge should be created (oninsert: when the record node is created, onclick: when the record node is cliked, manual: via a click on a button or link)\n     * @param display (default: existingnodes) Determines which edges should be visible (all: all the edges are visible; paginate: only a limited number are visible, but more can be shown, using an action; existingnodes: edges will only be created for nodes that already exist in the network; a function take the node as input can also be used to determine visibility dynamically)\n     * @param edgeOptions (default: standard edge options as returned by createEdgeOptions()) Edge options for displaying the edge with Vis.js\n     * @param count (default: 10): when display=paginate, this setting limits the number of edges displayed\n     * @param parse Custom function to parse the record[field] data and generate nodes and edges\n     */\n    createCustomStructuralEdgeTypes(recordType: NodeType, nodeTypes: NodeType[], field: string, trigger: StructuralTriggerType = \"oninsert\", display: StructuralDisplayType = \"existingnodes\", edgeOptions?: any, count?: number, parse?: (value: any, record: Record, type: StructuralEdgeType) => CustomData): StructuralEdgeType {\n        return {\n            nodeTypes: [recordType, ...nodeTypes],\n            field,\n            trigger,\n            display,\n            edgeOptions: edgeOptions || this.createEdgeOptions(),\n            count,\n            parse\n        };\n    }\n\n    /**\n     * Creates a custom structural edge type for cooccurrence entities (formatted in the form (Value 1)#(Value 2)).\n     * @param recordType The NodeType of the record node\n     * @param nodeTypes The NodeType(s) of the nodes of the cooccurrence (type of Value 1, type of Value 2)\n     * @param field The field of the record into which the data is stored (typically an entity)\n     * @param trigger (default: oninsert) Determines when this edge should be created (oninsert: when the record node is created, onclick: when the record node is cliked, manual: via a click on a button or link)\n     * @param display (default: existingnodes) Determines which edges should be visible (all: all the edges are visible; paginate: only a limited number are visible, but more can be shown, using an action; existingnodes: edges will only be created for nodes that already exist in the network; a function take the node as input can also be used to determine visibility dynamically)\n     * @param edgeOptions (default: standard edge options as returned by createEdgeOptions()) Edge options for displaying the edge with Vis.js \n     * @param count (default: 10): when display=paginate, this setting limits the number of edges displayed\n     */\n    createCoocStructuralEdgeTypes(recordType: NodeType, nodeTypes: NodeType[], field: string, trigger: StructuralTriggerType = \"oninsert\", display: StructuralDisplayType = \"existingnodes\", edgeOptions?: any, count?: number): StructuralEdgeType {\n        return this.createCustomStructuralEdgeTypes(recordType, nodeTypes, field, trigger, display, edgeOptions, count,\n            (value: any, record: Record, type: StructuralEdgeType) => {\n                const values = value.value.substr(1, value.value.length-2).split(\")#(\");\n                const displays = value.display.substr(1, value.display.length-2).split(\")#(\");\n                return { values, displays, fieldValue: value.value };\n            }\n        );\n    }\n\n    /**\n     * Creates a custom structural edge type for typed cooccurrence entities (formatted in the form \n     * (Value 1)#(Link)#(Value 2)).\n     * @param recordType The NodeType of the record node\n     * @param nodeTypes The NodeType(s) of the nodes of the cooccurrence (type of Value 1, type of Value 2)\n     * @param field The field of the record into which the data is stored (typically an entity)\n     * @param trigger (default: oninsert) Determines when this edge should be created (oninsert: when the record node is created, onclick: when the record node is cliked, manual: via a click on a button or link)\n     * @param display (default: existingnodes) Determines which edges should be visible (all: all the edges are visible; paginate: only a limited number are visible, but more can be shown, using an action; existingnodes: edges will only be created for nodes that already exist in the network; a function take the node as input can also be used to determine visibility dynamically)\n     * @param edgeOptions (default: standard edge options as returned by createEdgeOptions()) Edge options for displaying the edge with Vis.js \n     * @param count (default: 10): when display=paginate, this setting limits the number of edges displayed\n     */\n    createTypedCoocStructuralEdgeTypes(recordType: NodeType, nodeTypes: NodeType[], field: string, trigger: StructuralTriggerType = \"oninsert\", display: StructuralDisplayType = \"existingnodes\", edgeOptions?: any, count?: number): StructuralEdgeType {\n        return this.createCustomStructuralEdgeTypes(recordType, nodeTypes, field, trigger, display, edgeOptions, count,\n            (value: any, record: Record, type: StructuralEdgeType) => {\n                const valuesSplit = value.value.substr(1, value.value.length-2).split(\")#(\");\n                const displaysSplit = value.display.substr(1, value.display.length-2).split(\")#(\");\n                if(valuesSplit.length === 3 && displaysSplit.length === 3){\n                    const values = [valuesSplit[0], valuesSplit[2]];\n                    const displays = [displaysSplit[0], displaysSplit[2]];\n                    return { values, displays, relations: [displaysSplit[1]], directed: [true], fieldValue: value.value };\n                }\n                else {\n                    throw new Error(`Unexpected format for a typed cooccurrence ${value.value}, ${value.display}`);\n                }\n            }\n        );\n    }\n\n    /**\n     * Create an AggregationEdgeType given a pair of NodeType and an aggregation name.\n     * The aggregation (configured on the Sinequa server) must return pairs of items,\n     * using cross-distribution.\n     * @param nodeTypes A pair of NodeType for each \"side\" of the aggregation\n     * @param aggregation The name of an cross-aggregation configured on the server, returning a list of \"pairs\"\n     * @param edgeOptions (default: standard edge options as returned by createAggregationEdgeOptions()) Edge options for displaying the edge with Vis.js\n     * @param trigger A parameter to define when the aggregation is fetched and nodes are added\n     * @param count Number of aggregation items to fetch (default: 10)\n     * @param field An optional field name to filter the content with aggregation item\n     * @param parse Custom function for parsing each aggregation item into a AggregationData (containing normally two nodes and one edge)\n     */\n    createAggregationEdgeType(nodeTypes: NodeType[], aggregation: string, edgeOptions?: any, trigger: AggregationTriggerType = \"source\", count?: number, field?: string, parse?: (item: AggregationItem, type: AggregationEdgeType) => AggregationData): AggregationEdgeType {\n        return {\n            nodeTypes,\n            aggregation,\n            edgeOptions: edgeOptions || this.createAggregationEdgeOptions(true),\n            trigger,\n            count,\n            field,\n            parse\n        };\n    }\n\n    /**\n     * Create an AggregationEdgeType given a pair of NodeType and an aggregation name.\n     * The aggregation (configured on the Sinequa server) must return pairs of items,\n     * using a simple distribution of pre-existing pairs, such as co-occurrences.\n     * @param nodeTypes A pair of NodeType for each \"side\" of the aggregation\n     * @param aggregation The name of an aggregation configured on the server, returning a list of cooccurrence \"pairs\" \n     * @param edgeOptions (default: custom edge options similar to createAggregationEdgeOptions()) Edge options for displaying the edge with Vis.js\n     * @param count Number of aggregation items to fetch (default: 10)\n     * @param field An optional field name to filter the content with aggregation item\n     * @param parse Custom function for parsing each aggregation item into a AggregationData (containing normally two nodes and one edge)\n     */\n    createCoocAggregationEdgeType(nodeTypes: NodeType[], aggregation: string, edgeOptions?: any, count?: number, field?: string, parse?: (item: AggregationItem, type: AggregationEdgeType) => AggregationData): AggregationEdgeType {\n        \n        if(!edgeOptions) {\n            edgeOptions = (nodes: Node[], edge: Edge, type: EdgeType) => {\n                const count = edge.count;\n                const size = this.logScale(count, 1, 0.3);\n                const dashes = [15, 8];\n                return this.createEdgeOptions(dashes, size, false);\n            };\n        }\n\n        if(!parse) {\n            parse = (item: AggregationItem, type: AggregationEdgeType) => {\n                const value = item.value.toString()\n                const display = item.display || value;\n                const values = value.substr(1, value.length-2).split(\")#(\");\n                const displays = display.substr(1, display.length-2).split(\")#(\");\n                return { values, displays, fieldValue: value };\n            }\n        }\n\n        return this.createAggregationEdgeType(nodeTypes, aggregation, edgeOptions, \"source\", count, field, parse);\n    }\n\n\n    /**\n     * Create an AggregationEdgeType given a pair of NodeType and an aggregation name.\n     * The aggregation (configured on the Sinequa server) must return triples,\n     * using a simple distribution of pre-existing triples, obtained for example via co-occurrence entities.\n     * @param nodeTypes A pair of NodeType for each \"side\" of the aggregation\n     * @param aggregation The name of an aggregation configured on the server, returning a list of cooccurrence \"triples\" \n     * @param edgeOptions  (default: custom edge options similar to createAggregationEdgeOptions()) Edge options for displaying the edge with Vis.js\n     * @param count Number of aggregation items to fetch (default: 10)\n     * @param field An optional field name to filter the content with aggregation item\n     * @param parse Custom function for parsing each aggregation item into a AggregationData (containing normally two nodes and one edge, plus the relation between them)\n     */\n    createTypedCoocAggregationEdgeType(nodeTypes: NodeType[], aggregation: string, edgeOptions?: any, count?: number, field?: string, parse?: (item: AggregationItem, type: AggregationEdgeType) => AggregationData): AggregationEdgeType {\n        \n        if(!edgeOptions) {\n            edgeOptions = (nodes: Node[], edge: Edge, type: EdgeType) => {\n                const count = edge.count;\n                const size = this.logScale(count, 1, 0.3);\n                return this.createEdgeOptions(false, size, false);\n            };\n        }\n\n        if(!parse) {\n            parse = (item: AggregationItem, type: AggregationEdgeType) => {\n                const value = item.value.toString()\n                const display = item.display || value;\n                const valuesSplit = value.substr(1, value.length-2).split(\")#(\");\n                const displaysSplit = display.substr(1, display.length-2).split(\")#(\");\n                if(valuesSplit.length === 3 && displaysSplit.length === 3){\n                    const values = [valuesSplit[0], valuesSplit[2]];\n                    const displays = [displaysSplit[0], displaysSplit[2]];\n                    return { values, displays, relations: [displaysSplit[1]], directed: [true], fieldValue: value };\n                }\n                else {\n                    throw new Error(`Unexpected format for a typed cooccurrence ${value}, ${display}`);\n                }\n            }\n        }\n\n        return this.createAggregationEdgeType(nodeTypes, aggregation, edgeOptions, \"source\", count, field, parse);\n    }\n\n    /**\n     * Generates a list of AggregationEdgeTypes for expanding metadata nodes. The function\n     * generates all possible combinations of node types. For example, if there are 2 node type A and B,\n     * the methods will generate edge types for A->B and B->A. If \"includeSameType\" is true,\n     * it will also generate A->A and B->A. The number of possible edges is the square of the\n     * number of node types. For each node type an aggregation must be provided to retrieve\n     * values.\n     * @param nodeTypes The list of node types we which to expand\n     * @param aggregations The list of aggregation corresponding to the node types\n     * @param includeSameType If true, will include edges pointing from one node type to that same node type\n     * @param edgeOptions (default: custom edge options similar to createAggregationEdgeOptions()) Edge options for displaying the edge with Vis.js\n     * @param trigger (default: \"manual\") Determines when the edges are added. \"manual\" adds a button when the node is selected. \"onclick\" inserts the edges right when the node is clicked\n     * @param count Number of aggregation items to fetch (default: 10)\n     */\n    createAllExpansionEdgeTypes(nodeTypes: NodeType[], aggregations: string[], includeSameType?: boolean, edgeOptions?: any, trigger: AggregationTriggerType = \"manual\", count?: number): AggregationEdgeType[] {\n        if(nodeTypes.length !== aggregations.length) {\n            throw new Error(\"There must be one aggregation per node type\");\n        }\n\n        const edges: AggregationEdgeType[] = [];\n        for(let i=0; i<nodeTypes.length; i++) {\n            for(let j=0; j<nodeTypes.length; j++) {\n                if(i !== j || includeSameType) {\n                    edges.push(this.createAggregationEdgeType([nodeTypes[i], nodeTypes[j]], aggregations[j], edgeOptions, trigger, count));\n                }\n            }\n        }\n        return edges;\n    }\n\n\n    /**\n     * Create a DynamicEdgeType, to attach RecordNodes to an existing node, via a Query\n     * @param nodeTypes The node types for this edge (nodeType[0] should be the source node, onto which the edges will be added, nodeType[1] is the type for the RecordNode that will be attached)\n     * @param trigger (default: oninsert) Determines when this edge should be created (oninsert: when the source node is created, onclick: when the source node is cliked, manual: via a click on a button or link)\n     * @param getQuery A function returning a Query, given a Node. The first record in the results will be used to mutate the node\n     * @param edgeOptions (default: standard edge options as returned by createEdgeOptions()) Edge options for displaying the edge with Vis.js\n     */\n    createDynamicEdgeType(nodeTypes: NodeType[], trigger: StructuralTriggerType = \"oninsert\", getQuery: (node: Node, type: DynamicEdgeType) => Query, edgeOptions?: any): DynamicEdgeType {\n        return {\n            nodeTypes: nodeTypes,\n            trigger: trigger,\n            getQuery: getQuery,\n            edgeOptions: edgeOptions || this.createEdgeOptions(),\n        }\n    }\n\n\n\n    // Edge Options\n\n    /**\n     * Create standard Edge options for displaying the network with Vis.js.\n     * @param dashes (default: no dashes) standard or custom options for a dashed edge\n     * @param width (default: 2) with of the edge\n     * @param smooth (default: no) whether the edge is straight or bendy\n     */\n    createEdgeOptions(dashes?: boolean | number[], width = 2, smooth?: boolean): {[key: string]: any} {\n        return {\n            smooth: !!smooth,\n            dashes: !!dashes && Utils.isBoolean(dashes)? [12, 15]: dashes,\n            width: width,\n            color: {\n                color: \"#cccccc\", \n                highlight: \"#ff0000\", \n                hover: \"#ee0000\", \n                opacity: 0.5\n            }\n        };\n    }\n\n    /**\n     * Create standard dynamic Edge options based on createEdgeOptions, but scaling the edge width\n     * based on the number of items in the aggregation item (edge.count property).\n     * @param dashes (default: no dashes) standard or custom options for a dashed edge\n     * @param smooth (default: no) whether the edge is straight or bendy\n     */\n    createAggregationEdgeOptions(dashes: boolean | number[], smooth?: boolean): (nodes: Node[], edge: Edge, type: EdgeType) => {[key: string]: any} {\n        return (nodes: Node[], edge: Edge, type: EdgeType) => {\n            const count = edge.count;\n            const size = this.logScale(count, 1, 0.3);\n            return this.createEdgeOptions(dashes, size, smooth);\n        };\n    }\n\n\n\n    // Network providers\n\n    /**\n     * Create a RecordsProvider, given a NodeType for the records, a list of Structural edges and a static list of records.\n     * @param nodeType NodeType of the records\n     * @param edgeTypes List of StructuralEdgeType for each field of the records\n     * @param records Static list of records\n     * @param hideRecordNode (default: false) Hide the underlying record node\n     * @param name (default: \"Documents\") Name for this provider\n     */\n    createRecordsProvider(nodeType: NodeType, edgeTypes: StructuralEdgeType[], records: Record[], hideRecordNode = false, name = \"Documents\"): RecordsProvider {\n        return new RecordsProvider(name, nodeType, edgeTypes, records, hideRecordNode);\n    }\n\n    /**\n     * Create an asynchronous RecordsProvider, meaning that instead of providing the list of records directly,\n     * a Query must be provided to retrieve this list of records from the server.\n     * @param nodeType  NodeType of the records\n     * @param edgeTypes List of StructuralEdgeType for each field of the records\n     * @param query A Query object to retrieve the records asynchronously\n     * @param hideRecordNode (default: false) Hide the underlying record node\n     * @param name (default: \"Documents\") Name for this provider\n     */\n    createAsyncRecordsProvider(nodeType: NodeType, edgeTypes: StructuralEdgeType[], query: Query, hideRecordNode = false, name = \"Documents\"): AsyncRecordsProvider {\n        return new AsyncRecordsProvider(name, nodeType, edgeTypes, query, hideRecordNode);\n    }\n\n    /**\n     * Create a RecordsProvider which provides data when the list of selected records changes (as managed by the SelectionService).\n     * Note that the SelectionService must be configured to keep a list of records rather than just their IDs.\n     * @param nodeType NodeType of the records\n     * @param structEdges List of StructuralEdgeType for each field of the records\n     * @param hideRecordNode (default: false) Hide the underlying record node\n     * @param name (default: \"Selected documents\") Name for this provider\n     */\n    createSelectedRecordsProvider(nodeType: NodeType, structEdges: StructuralEdgeType[], hideRecordNode = false, name = \"Selected documents\"): SelectedRecordsProvider {\n        return new SelectedRecordsProvider(name, nodeType, structEdges, this.selectionService, hideRecordNode);\n    }\n\n    /**\n     * Create a DynamicNodeProvider which mutates a regular node into a RecordNode (incl. adding structural edges).\n     * @param nodeType The NodeType of nodes which should be mutated\n     * @param edgeTypes The structural edge types of the mutated node\n     * @param permanent Whether this provider should reset its dataset when mutating a new node (if true, a mutated node and its neighbors will never be removed, even if the source node disappears from the source dataset)\n     * @param sourceProvider Another provider to monitor for source nodes to mutate (required if nodeType.trigger is oninsert)\n     * @param name (default: \"Dynamic nodes\") Name for this provider\n     */\n    createDynamicNodeProvider(nodeType: DynamicNodeType, edgeTypes: StructuralEdgeType[], permanent = true, name = \"Dynamic nodes\", sourceProviders: NetworkProvider[]): DynamicNodeProvider {\n        return new DynamicNodeProvider(name, nodeType, edgeTypes, permanent, sourceProviders);\n    }\n\n    /**\n     * Create a DynamicEdgeProvider which attaches RecordNodes (and their neighbors) onto a regular node, using a given query.\n     * @param edgeType The DynamicEdgeType, which specifies which NodeType should be enriched with new nodes, and provides a Query to retrieve these nodes.\n     * @param secondaryEdgeTypes The structural edge types of the attached node\n     * @param permanent Whether this provider should reset its dataset when retrieving new node (if true, a attached node and its neighbors will never be removed, even if the source node disappears from the source dataset)\n     * @param sourceProvider Another provider to monitor for source nodes to mutate (required if nodeType.trigger is oninsert)\n     * @param name (default: \"Dynamic edges\") Name for this provider\n     */\n    createDynamicEdgeProvider(edgeType: DynamicEdgeType, secondaryEdgeTypes: StructuralEdgeType[], permanent: boolean, name = \"Dynamic edges\", sourceProviders: NetworkProvider[]): DynamicEdgeProvider {\n        return new DynamicEdgeProvider(name, edgeType, secondaryEdgeTypes, permanent, sourceProviders)\n    }\n\n    /**\n     * Create an AggregationProvider given an AggregationEdgeType\n     * @param edgeType An AggregationEdgeType\n     * @param name (default: \"Aggregations\") Name for this provider\n     * @param query Custom query context for fetching the aggregations (bypassing the use of searchService.query)\n     */\n    createAggregationProvider(edgeTypes: AggregationEdgeType[], name: string = \"Aggregations\", query?: Query): AggregationProvider {\n        return new AggregationProvider(name, edgeTypes, query);\n    }\n\n\n    // Misc\n\n    logScale(value: number, min: number, scale = 1.0, pow = 1.0): number {\n        return Math.round(min + Math.pow(Math.log2(value) * scale, pow));\n    }\n\n}","// moment locales need moment set globally\nimport moment from \"moment\";\n(window as any).moment = moment;\n","import {Component, Input, OnInit} from \"@angular/core\";\nimport {trigger, animate, transition, style, AnimationTriggerMetadata} from '@angular/animations';\nimport {NotificationsService, Notification, NotificationState, NotificationType} from \"@sinequa/core/notification\";\nimport {Utils} from \"@sinequa/core/base\";\n\nexport function notificationAnimations(timings: number | string): AnimationTriggerMetadata[] {\n    return [\n        trigger('autoClose', [\n            transition('1 => void', [\n                animate(timings, style({ opacity: 0 }))\n            ])\n        ])\n    ];\n}\n\n@Component({\n    selector: \"sq-notification\",\n    templateUrl: \"./notification.html\",\n    animations: notificationAnimations(\".15s ease-in-out\")\n})\nexport class BsNotification implements OnInit {\n    @Input() notification: Notification;\n    autoClose: boolean;\n    constructor(\n        private notificationsService: NotificationsService) {\n    }\n\n    ngOnInit() {\n        if (this.notification.autoClose && this.notification.state === NotificationState.Initial) {\n            this.autoClose = true;\n            Utils.delay(5000).then(value => {\n                if (this.notification.state === NotificationState.Initial) {\n                    this.close();\n                }\n            });\n        }\n    }\n\n    get alertClass(): string {\n        switch (this.notification.type) {\n            case NotificationType.Info: return \"info\";\n            case NotificationType.Success: return \"success\";\n            case NotificationType.Warning: return \"warning\";\n            case NotificationType.Error: return \"danger\";\n        }\n        return \"\";\n    }\n\n    get notificationClass(): string {\n        switch (this.notification.type) {\n            case NotificationType.Info: return \"fas fa-info-circle fa-lg\";\n            case NotificationType.Success: return \"fas fa-check-circle fa-lg\";\n            case NotificationType.Warning: return \"fas fa-exclamation-triangle fa-lg\";\n            case NotificationType.Error: return \"fas fa-exclamation-circle fa-lg\";\n        }\n        return \"\";\n    }\n\n    get showClose(): boolean {\n        return !this.notification.autoClose || this.notification.state !== NotificationState.Initial;\n    }\n\n    close() {\n        this.notificationsService.closeNotification(this.notification);\n    }\n}","<div [@autoClose]=\"autoClose\" class=\"alert alert-{{alertClass}} sq-notification\" role=\"alert\">\n    <button *ngIf=\"showClose\" type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"close()\">\n        <span aria-hidden=\"true\">&times;</span>\n        <span class=\"sr-only\">Close</span>\n    </button>\n    <div class=\"sq-notification-container\">\n        <div class=\"sq-notification-icon\">\n            <span class=\"{{notificationClass}}\"></span>\n        </div>\n        <div class=\"sq-notification-message\">\n            <ng-container *ngIf=\"!!notification.title\">\n                <span class=\"sq-notification-title\">{{notification.title | sqMessage}}</span>\n                <hr>\n            </ng-container>\n            <span class=\"sq-notification-text\">{{notification.text | sqMessage:{values: notification.params} }}</span>\n        </div>                \n    </div>        \n</div>","import {Directive, Input, ElementRef, OnChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\n\n@Directive({\n    selector: \"[sqAutofocus]\"\n})\nexport class Autofocus implements OnChanges {\n    @Input(\"sqAutofocus\") value: number;\n    element: HTMLElement;\n\n    constructor(elementRef: ElementRef) {\n        this.element = <HTMLElement>elementRef.nativeElement;\n    }\n\n    private setFocus() {\n        Utils.delay()\n            .then(() => {\n                if (this.element.offsetWidth !== 0) {\n                    this.element.focus();\n                }\n            });\n    }\n\n    ngOnChanges() {\n        this.setFocus();\n    }\n}","export * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export * from \"./collapse.module\";\nexport * from \"./collapse-button.component\";\nexport * from \"./collapse.component\";\nexport * from \"./collapse-link.component\";\nexport * from \"./messages/index\";","import { Directive, HostBinding, ElementRef } from \"@angular/core\";\nimport { FocusableOption } from \"@angular/cdk/a11y\";\n\n@Directive({\n    selector: \"[sqFocusKeyListItem]\"\n})\nexport class FocusKeyListItemDirective implements FocusableOption {\n    @HostBinding() tabindex = -1;\n    @HostBinding(\"attr.role\") role = \"list-item\";\n\n    constructor(protected element: ElementRef) {\n    }\n\n    focus() {\n        this.element.nativeElement.focus();\n    }\n}\n","import { Component, Input, OnChanges, OnDestroy } from \"@angular/core\";\nimport { FormGroup, AbstractControl } from \"@angular/forms\";\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { Utils } from '@sinequa/core/base';\nimport { Subscription } from 'rxjs';\nimport { AutocompleteItem } from '@sinequa/components/autocomplete';\n\n@Component({\n    selector: \"sq-advanced-form-input\",\n    templateUrl: \"./advanced-form-input.html\"\n})\nexport class BsAdvancedFormInput implements OnChanges, OnDestroy {\n    @Input() form: FormGroup;\n    @Input() field: string;\n    @Input() suggestQuery: string;\n    @Input() label: string;\n\n    control: AbstractControl | null;\n    viewValue: string | number | undefined | null;\n\n    private _valueChangesSubscription: Subscription;\n\n    constructor(public appService: AppService) {}\n\n    ngOnChanges() {\n        if(this.label === undefined) {\n            this.label = this.appService.getLabel(this.field);\n        }\n        this.control = this.form.get(this.field);\n        if (this.control) {\n            if (this.control.value) {\n                this.viewValue = this.control.value.display\n                    ? this.control.value.display\n                    : this.control.value.value.toString();\n            }\n\n            this._valueChangesSubscription = Utils.subscribe(\n                this.control.valueChanges,\n                (val) => {\n                  if (val) {\n                      this.viewValue = val.display ? val.display : val.value.toString();\n                  }\n                }\n            );\n        }\n        else {\n            throw new Error(\"No form control named \"+this.field);\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._valueChangesSubscription) {\n            this._valueChangesSubscription.unsubscribe();\n        }\n    }\n\n    onItemChange(item: AutocompleteItem) {\n        this.viewValue = item?.display;\n        this._updateControl(item);\n    }\n\n    private _updateControl(item: AutocompleteItem): void {\n        const value = item\n        ? {\n            value: item.normalized!,\n            display: item.display\n        } : undefined;\n        this.control?.markAsDirty();\n        this.control?.setValue(value, {emitEvent: false});\n    }\n}\n","<div class=\"form-group\">\n    <label for=\"{{field}}\">{{label | sqMessage}}</label>\n    <div class=\"d-flex flex-column\">\n        <input\n            sqAdvancedFormAutocomplete\n            [off]=\"!suggestQuery\"\n            [suggestQuery]=\"suggestQuery\"\n            [dropdown]=\"dropdown\"\n            sqAdvancedFormValidation\n            [validationForm]=\"form\"\n            [field]=\"field\"\n            type=\"text\"\n            class=\"form-control\"\n            [id]=\"field\"\n            autocomplete=\"off\"\n            spellcheck=\"off\"\n            [(ngModel)]=\"viewValue\"\n            (UpdateItem)=\"onItemChange($event)\">\n        <sq-autocomplete-list #dropdown>\n            <ng-template #itemTpl let-item>\n                <div class=\"py-2\">{{item.display}}</div>\n            </ng-template>\n        </sq-autocomplete-list>\n    </div>\n</div>\n","import { FacetConfig } from '@sinequa/components/facet';\r\n\r\n/**\r\n * This list is used by Vanilla Search to activate key features in the UI.\r\n * The order below determines the order of menus, buttons, facets, etc.\r\n */\r\nexport const FEATURES: string[] = [\r\n    //\"recent-documents\",             // Keep track of recently opened documents and suggest them in the autocomplete\r\n    \"recent-queries\",               // Keep track of recent queries and suggest them in the autocomplete\r\n    \"saved-queries\",                // Allow users to save queries to easily replay them ang suggest them in the autocomplete\r\n    \"baskets\",                      // Allow users to bookmark documents in \"baskets\" (aka \"collections\") and suggest them in the autocomplete\r\n    \"labels\",                       // Allow users to tag documents with labels\r\n    \"alerts\",                       // Allow users to subscribe to a regular alert for a particular query\r\n    \"suggests\",                     // Display general text suggestions in the autocomplete\r\n    //\"advanced-form\",                // Display an advanced search form\r\n    //\"keep-advanced-form-filters\",   // When the user makes a new search query, do not reset the content of the autocomplete form\r\n    \"keep-tab\",                     // When the user makes a new search query, stay on the same tab\r\n    //\"keep-filters\",                 // When the user makes a new search query, do not reset the filters that are active (eg. from facets)\r\n    \"toggle-keep-filters\",          // Display a button to toggle the \"keep-filter\" option\r\n    //\"voice-recognition\",            // Display a button to trigger voice recognition (supported only on Chrome-based browsers and uses Google servers for processing)\r\n];\r\n\r\nexport const FACETS: FacetConfig[] = [\r\n    {\r\n        name: \"geo\",\r\n        title: \"msg#facet.geo.title\",\r\n        type: \"list\",\r\n        aggregation: \"Geo\",\r\n        icon: \"fas fa-globe-americas\",\r\n        showCount: true,\r\n        searchable: true,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n    {\r\n        name: \"company\",\r\n        title: \"msg#facet.company.title\",\r\n        type: \"list\",\r\n        aggregation: \"Company\",\r\n        icon: \"fas fa-building\",\r\n        showCount: true,\r\n        searchable: true,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n    {\r\n        name: \"person\",\r\n        title: \"msg#facet.person.title\",\r\n        type: \"list\",\r\n        aggregation: \"Person\",\r\n        icon: \"fas fa-user\",\r\n        showCount: true,\r\n        searchable: true,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n    {\r\n        name: \"docformat\",\r\n        title: \"msg#facet.docformat.title\",\r\n        type: \"list\",\r\n        aggregation: \"DocFormat\",\r\n        icon: \"far fa-file-word\",\r\n        showCount: true,\r\n        searchable: true,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n    {\r\n        name: \"modified\",\r\n        title: \"msg#facet.modified.title\",\r\n        type: \"list\",\r\n        aggregation: \"Modified\",\r\n        icon: \"fas fa-calendar-day\",\r\n        showCount: true,\r\n        searchable: false,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n    {\r\n        name: \"size\",\r\n        title: \"msg#facet.size.title\",\r\n        type: \"list\",\r\n        aggregation: \"Size\",\r\n        icon: \"fas fa-sort-amount-up-alt\",\r\n        showCount: true,\r\n        searchable: false,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n    {\r\n        name: \"documentlanguages\",\r\n        title: \"msg#facet.documentlanguages.title\",\r\n        type: \"list\",\r\n        aggregation: \"DocumentLanguages\",\r\n        icon: \"far fa-comment\",\r\n        showCount: true,\r\n        searchable: true,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n    {\r\n        name: \"concepts\",\r\n        title: \"msg#facet.concepts.title\",\r\n        type: \"list\",\r\n        aggregation: \"Concepts\",\r\n        icon: \"fas fa-comment-dots\",\r\n        showCount: true,\r\n        searchable: false,\r\n        allowExclude: true,\r\n        allowOr: true,\r\n        allowAnd: false,\r\n        displayEmptyDistributionIntervals: false,\r\n    },\r\n];\r\n\r\nexport const METADATA: string[] = [\r\n    \"authors\", \"docformat\", \"modified\", \"size\", \"treepath\", \"filename\"\r\n];\r\n","import {Component, Inject, HostBinding, OnInit} from \"@angular/core\";\nimport {SafeResourceUrl, DomSanitizer} from \"@angular/platform-browser\";\nimport {START_CONFIG, StartConfig} from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-help\",\n    templateUrl: \"./help.html\"\n})\nexport class BsHelp  implements OnInit {\n    @HostBinding(\"class.modal-content\") true;\n    model: {};\n    url: SafeResourceUrl;\n\n    constructor(\n        @Inject(START_CONFIG) public startConfig: StartConfig,\n        public sanitizer: DomSanitizer) {\n    }\n\n    ngOnInit() {\n        const url = this.startConfig.helpUrl || \"assets/help/index.html\";\n        this.url = this.sanitizer.bypassSecurityTrustResourceUrl(url);\n    }\n}\n","<sq-modal [title]=\"'msg#help.title'\">\n    <div class=\"d-flex flex-column\">\n        <iframe [src]=\"url\"></iframe>\n    </div>\n</sq-modal>","import enModal from \"./en\";\nimport frModal from \"./fr\";\nimport deModal from \"./de\";\n\nexport { enModal, frModal, deModal };\n","import {Query, AppService, ExprParser, Expr, ExprValueInitializer} from \"@sinequa/core/app-utils\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SearchService} from \"./search.service\";\n\nexport interface BreadcrumbsItem {\n    expr: Expr | undefined;\n    display: Expr | string; // Either expr or a label (error string, basket name or <empty search>)\n    facet?: string; // associated facet, if any\n    active?: boolean; // true if the active item\n    hidden?: boolean; // true for \"empty search\" item when !ccquery.allowEmptySearch\n}\n\n/**\n * Description of the Breadcrumbs class - link to {@link SearchService}\n */\nexport class Breadcrumbs {\n    appService: AppService;\n    searchService: SearchService;\n    items: BreadcrumbsItem[]; // always starts with the text expression followed by any selects\n    advanced: Expr[];\n    query: Query; // the associated query. Will be different to the current query if any item other than the last is selected\n    fields: Set<string>;\n\n    static create(appService: AppService, searchService: SearchService, query: Query): Breadcrumbs {\n        const breadcrumbs = new Breadcrumbs(appService, searchService, query);\n        return breadcrumbs.init();\n    }\n\n    private constructor(appService: AppService, searchService: SearchService, query: Query) {\n        this.appService = appService;\n        this.searchService = searchService;\n        this.query = query.copy();\n        this.items = [];\n        this.advanced = [];\n        this.fields = new Set<string>();\n    }\n\n    get activeIndex(): number {\n        return this.items.findIndex(item => item.active);\n    }\n\n    get activeItem(): BreadcrumbsItem | undefined {\n        const index = this.activeIndex;\n        if (index !== -1) {\n            return this.items[index];\n        }\n        return undefined;\n    }\n\n    get text(): Expr | string {\n        return this.items[0].display;\n    }\n\n    get textExpr(): Expr | undefined {\n        return this.items[0].expr;\n    }\n\n    get selects(): BreadcrumbsItem[] {\n        return this.items.slice(1);\n    }\n\n    get activeSelects(): BreadcrumbsItem[] {\n        return this.items.slice(1, this.activeIndex + 1);\n    }\n\n    get activeItems():  BreadcrumbsItem[] {\n        return this.items.slice(0, this.activeIndex + 1);\n    }\n\n    get isEmpty(): boolean {\n        if (this.items.length === 0) {\n            return true;\n        }\n        if (this.items.length === 1 && this.items[0].hidden) {\n            return true;\n        }\n        return false;\n    }\n\n    find(expr: Expr | ExprValueInitializer): Expr | undefined {\n        let expr1 = expr as Expr;\n        const init = expr as ExprValueInitializer;\n        if (!(expr instanceof Expr)) {\n            expr1 = new Expr(init);\n        }\n        if (!expr1.every((expr2) => {\n            const field = expr2.exprContext.appService.resolveColumnAlias(expr2.field);\n            return !field || this.fields.has(field);\n        })) {\n            return undefined;\n        }\n        for (const expr3 of this.advanced) {\n            const expr2 = expr3.find(expr1);\n            if (expr2) {\n                return expr2;\n            }\n        }\n        for (const select of this.selects) {\n            if (select.expr) {\n                const expr2 = select.expr.find(expr1);\n                if (expr2) {\n                    return expr2;\n                }\n            }\n        }\n        if (this.textExpr) {\n            let expr2 = this.textExpr.find(expr1, (expr3) => expr3.isStructured);\n            if (expr2) {\n                return expr2;\n            }\n            expr2 = this.textExpr.find(expr1, (expr3) => !expr3.isStructured);\n            if (expr2) {\n                return expr2;\n            }\n        }\n        return undefined;\n    }\n\n    findSelect(facet: string, exprOrField?: Expr | string): Expr | undefined {\n        // Active selects only, most recent first\n        const activeSelects = this.activeSelects;\n        for (let i = activeSelects.length - 1; i >= 0; i--) {\n            const select = activeSelects[i];\n            if (select.expr && (!facet || Utils.eqNC(facet, select.facet || \"\"))) {\n                if (!exprOrField ) {\n                    return select.expr;\n                }\n                if (Utils.isString(exprOrField)) {\n                    if (Utils.eqNC(exprOrField, select.expr.field || \"\")) {\n                        return select.expr;\n                    }\n                }\n                else {\n                    const expr1 = select.expr.find(exprOrField);\n                    if (expr1) {\n                        return expr1;\n                    }\n                }\n            }\n        }\n        return undefined;\n    }\n\n    private addFields(expr: Expr | undefined) {\n        if (expr) {\n            const fields = expr.getFields();\n            fields.forEach((field) => {\n                this.fields.add(field);\n            });\n        }\n    }\n\n    private makeBreadcrumbsItemFromExpr(text: string): BreadcrumbsItem {\n        let expr = this.appService.parseExpr(text);\n        if (!(expr instanceof Expr)) {\n            expr = this.appService.parseExpr(ExprParser.escape(text));\n        }\n        if (expr instanceof Expr) {\n            return {expr, display: expr};\n        }\n        else {\n            return {expr: undefined, display: expr};\n        }\n    }\n\n    private initItems() {\n        // Text\n        if (this.query && this.query.text) {\n            const item = this.makeBreadcrumbsItemFromExpr(this.query.text);\n            this.items.push(item);\n            this.addFields(item.expr);\n        }\n        else {\n            this.items.push({\n                expr: undefined,\n                display: this.query && this.query.basket ? this.query.basket : \"msg#breadcrumbs.emptySearch\",\n                hidden: this.appService.ccquery && !this.appService.ccquery.allowEmptySearch &&\n                    this.searchService.isEmptySearchIgnoreSelects(this.query)\n            });\n        }\n        // Selects\n        if (this.query && this.query.select) {\n            for (const select of this.query.select) {\n                const item = this.makeBreadcrumbsItemFromExpr(select.expression);\n                item.facet = select.facet;\n                this.items.push(item);\n                this.addFields(item.expr);\n            }\n        }\n        // Set last item active\n        this.items[this.items.length - 1].active = true;\n    }\n\n    private init(): Breadcrumbs {\n        this.initItems();\n        return this;\n    }\n\n    selectItem(item: BreadcrumbsItem): Query | undefined {\n        const index = this.items.indexOf(item);\n        if (this.query && index !== -1) {\n            const query = this.query.copy();\n            if (query.select) {\n                query.select.splice(index);\n            }\n            this.items.forEach(item1 => item1.active = false);\n            item.active = true;\n            return query;\n        }\n        return undefined;\n    }\n\n    removeItem(item: BreadcrumbsItem): BreadcrumbsItem | undefined {\n        const index = this.items.indexOf(item);\n        if (this.query && index !== -1) {\n            let next: BreadcrumbsItem | undefined;\n            if (index === 0) { // Text\n                if (this.query.text || this.query.basket) {\n                    delete this.query.text;\n                    delete this.query.basket;\n                    item.expr = undefined;\n                    item.display = \"msg#breadcrumbs.emptySearch\";\n                    item.hidden = this.appService.ccquery && !this.appService.ccquery.allowEmptySearch &&\n                        this.searchService.isEmptySearchIgnoreSelects(this.query);\n                }\n                if (!item.hidden) {\n                    next = this.activeItem;\n                }\n                else if (this.items.length > 1) {\n                    next = this.items[this.items.length - 1];\n                }\n            }\n            else {\n                // Find next item to activate, if necessary\n                const activeIndex = this.activeIndex;\n                if (activeIndex >= index) {\n                    if (activeIndex > index) {\n                        next = this.items[activeIndex];\n                    }\n                    else {\n                        if (index === this.items.length - 1) {\n                            next = this.items[index - 1];\n                        }\n                        else {\n                            next = this.items[index + 1];\n                        }\n                        if (next.hidden) {\n                            next = undefined;\n                        }\n                    }\n                }\n                if (this.query.select) {\n                    this.query.select.splice(index - 1, 1);\n                }\n                this.items.splice(index, 1);\n            }\n            return next;\n        }\n        return undefined;\n    }\n\n    update(query: Query) {\n        if (!this.query) {\n            this.query = query.copy();\n        }\n        this.query.text = query.text;\n        this.query.basket = query.basket;\n        if (!this.query.text && !this.query.basket) {\n            const item = this.items[0];\n            item.expr = undefined;\n            item.display = \"msg#breadcrumbs.emptySearch\";\n            item.hidden = this.appService.ccquery && !this.appService.ccquery.allowEmptySearch &&\n                this.searchService.isEmptySearchIgnoreSelects(this.query);\n        }\n    }\n}\n","import { Aggregation, AggregationItem } from '@sinequa/core/web-services';\nimport { Node, Edge, EdgeType, NetworkDataset, NetworkContext } from '../network-models';\nimport { Action } from '@sinequa/components/action';\nimport { Query, Expr } from '@sinequa/core/app-utils';\nimport { Utils } from '@sinequa/core/base';\nimport { BaseProvider } from './base-provider';\n\n/**\n * Extension of the Edge interface, to store the aggregation and\n * aggregation items from which the edge is constructed\n */\nexport interface AggregationEdge extends Edge {\n    aggregationItem: AggregationItem;\n    aggregation: Aggregation;\n}\n\n/**\n * Convenience structure for managing custom metadata types (like\n * cooccurrence entities). AggregationData is returned by the custom\n * parse() function of an AggregationEdgeType.\n */\nexport interface AggregationData {\n    values: string[]; // eg. LARRY PAGE, GOOGLE\n    displays: string[]; // eg. Larry Page, Google\n    relations?: string[]; // eg. Works At\n    directed?: boolean[]; // eg. true\n    fieldValue?: string; // A value on which to filter the data\n}\n\n/** Mode \"source\" means node are fetched and added systematically on getData() / other modes allow expanding an existing node*/\nexport type AggregationTriggerType = \"source\" | \"onclick\" | \"manual\";\n// TODO: Add support for \"oninsert\" (which might required additional complexity)\n\n/**\n * Extension of the EdgeType interface, specifying which aggregation is used\n * to generate the Edges, and additional options.\n */\nexport interface AggregationEdgeType extends EdgeType {\n    /** Name of the aggregation in the Web Service configuration */\n    aggregation: string;\n    /** If parse is provided, it is used to get the new nodes and edges. If not, the value is automatically converted into nodes, using nodeTypes[1] */\n    parse?: (item: AggregationItem, type: AggregationEdgeType) => AggregationData | undefined; // A cooccurrence aggregation might return 3 nodes and 2 edges\n    /** A parameter to define when the aggregation is fetched and nodes are added */\n    trigger: AggregationTriggerType;\n    /** Default number of items to fetch */\n    count?: number;\n    // TODO: add visibility modes ? (eg. existingNodes)\n}\n\n/**\n * Tests whether an EdgeType is an AggregationEdgeType\n * @param et an edge type\n */\nexport function isAggregationEdgeType(et: EdgeType): et is AggregationEdgeType {\n    return !!(et as AggregationEdgeType).aggregation;\n}\n\n/**\n * The Aggregation Provider generates nodes and edges from aggregations\n * fetched from the server.\n */\nexport class AggregationProvider extends BaseProvider {\n\n    /** Stores how many aggregation items have been fetched from the server for a given aggregation */\n    readonly skips: {[aggregation: string]: number} = {};\n\n    constructor(\n        public name: string,\n        protected edgeTypes: AggregationEdgeType[],\n        protected query?: Query\n    ) {\n        super(name);\n    }\n\n\n    /**\n     * Fetches the list of aggregations and updates the dataset\n     * @param types list of aggregation edge types\n     * @param sourceNode if provided, will compute the aggregation with a select to compute the aggregation for documents referencing that node\n     */\n    protected fetchAggregations(types: AggregationEdgeType[], sourceNode?: Node) {\n        \n        const query = Utils.copy(this.query || this.context.searchService.query);\n        query.action = \"aggregate\";\n        query.aggregations = {};\n        types.forEach(type => query.aggregations[type.aggregation] = {\n            skip: this.skips[type.aggregation+(sourceNode?.id || \"\")], \n            count: type.count || 10\n        });\n\n        if(sourceNode && sourceNode.type.field) {\n            query.addSelect(this.context.exprBuilder.makeExpr(sourceNode.type.field, this.getNodeValue(sourceNode)));\n        }\n\n        Object.keys(query.aggregations).forEach(aggregation => {\n            if(!this.context.appService.getCCAggregation(aggregation)) {\n                // This may not be a mistake if the aggregation belong to a different web service configuration\n                console.warn(`Aggregation '${aggregation}' does not exist in the Query web service configuration`);\n            }\n        });\n\n        this.context.searchService.getResults(query, undefined, {searchInactive: true}).subscribe(\n            results => {\n                this.updateDataset(results.aggregations, types, sourceNode);\n            }\n        );\n        \n    }\n\n    /**\n     * Fills the dataset with nodes and edges corresponding to\n     * the given aggregations data, and emits this new dataset.\n     * @param aggregations the list of aggregations to process\n     * @param types the corresponding edge types for each aggregation\n     */\n    protected updateDataset(aggregations: Aggregation[], types: AggregationEdgeType[], sourceNode?: Node) {\n\n        aggregations.forEach(aggregation => {\n            if(aggregation && aggregation.items) {\n                const type = types.find(type => Utils.eqNC(type.aggregation, aggregation.name));\n                if(type) {\n                    this.skips[type.aggregation+(sourceNode?.id || \"\")] += aggregation.items.length;\n                    aggregation.items.forEach(item => this.addAggregationNodes(item, aggregation, type, sourceNode));\n                }\n            }\n        });\n\n        this.provider.next(this.dataset);\n    }\n\n    /**\n     * Create nodes and edges for the given aggregation item and adds them\n     * to the dataset. By default (if the edge does not have a parse() function\n     * and there is no sourceNode), the aggregation is assumed to be a cross-\n     * distribution, with items formatted as \"Bill Gates/Microsoft\".\n     * @param item the aggregation item to process\n     * @param aggregation the aggregation from which the item comes from\n     * @param type the type of the edge corresponding to that aggregation\n     * @param sourceNode if provided, will assume the distribution is 1-dimensional and attach each new node to that source node\n     */\n    addAggregationNodes(item: AggregationItem, aggregation: Aggregation, type: AggregationEdgeType, sourceNode?: Node) {\n\n        let rawData: AggregationData | undefined;\n\n        if(type.parse) {\n            rawData = type.parse(item, type);\n        }\n        else {\n            // Source distributions are at least two-dimensional\n            if(!sourceNode) {\n                if(!item.display){\n                    throw new Error(`Aggregation Item '${item.value}' has no display value`);\n                }\n                // Default parsing, assuming cross-distribution format (\"Apple/Steve Jobs\")\n                const displays = item.display.split(\"/\");\n                const expr = this.context.appService.parseExpr(item.value.toString()) as Expr;\n                const values = expr.operands.map(e => e.value!);\n                if(values.length < 2 || displays.length < 2 || type.nodeTypes.length < 2 || !values[0] || !values[1]) {\n                    throw new Error(`Incorrect aggregation item (${item.value}, ${item.display}) or edge type (${type.nodeTypes.length})`);\n                }\n                rawData = {values, displays};\n            }\n            // We need to exclude trivial aggregation items pointing to themselves\n            else if(sourceNode.id !== this.getNodeId(type.nodeTypes[1], item.value.toString())) {\n                rawData = {\n                    values: [this.getNodeValue(sourceNode), item.value.toString()],\n                    displays: [sourceNode.label, item.display || item.value.toString()]\n                };\n            }                        \n        }\n\n        if(rawData) {\n            const data = new NetworkDataset();\n            let lastNode: Node;\n            for(let i=0; i<rawData.values.length; i++){\n                const node = this.createNode(type.nodeTypes[i], rawData.values[i], rawData.displays[i], true, {}, item.count);\n                data.addNodes(node);\n                if(i > 0){\n                    const relation = rawData.relations? rawData.relations[i-1] : undefined;\n                    const directed = rawData.directed? rawData.directed[i-1] : false;\n                    data.addEdges(this.createEdge(type, lastNode!, node, rawData.fieldValue, true, {aggregation, aggregationItem: item}, item.count, directed, relation));\n                }\n                lastNode = node;\n            }\n            this.dataset.merge(data);\n        }\n    }\n\n\n    // NetworkProvider interface\n\n    /** \n     * Retrieves the aggregation data synchronously or asynchronously, and updates the dataset with it.\n     */\n    getData(context: NetworkContext) {\n        this.context = context;\n        this.dataset.clear();\n\n        // Initialize the counts\n        this.edgeTypes.forEach(type => this.skips[type.aggregation] = 0);\n\n        // Fetch the \"source\" aggregation edges\n        const types = this.edgeTypes.filter(type => type.trigger === \"source\");\n\n        if(this.active && types.length > 0) {\n            this.fetchAggregations(types);\n        }\n        else {            \n            this.provider.next(this.dataset); // avoid undefined dataset when edge trigger !== source\n        }\n    }\n\n    /**\n     * Called when a node in the network is clicked.\n     * If one edge has an \"onclick\" trigger we potentially expand that\n     * clicked node.\n     * @param node the clicked node\n     */\n    onNodeClicked(node?: Node) {\n        if(this.active && node) {\n            const types = this.edgeTypes.filter(type => type.trigger === \"onclick\" && type.nodeTypes[0] === node.type);\n            if(types.length > 0) {\n                types.forEach(type => {\n                    if(this.skips[type.aggregation+node.id] === undefined) {\n                        // We need to skip the already connected nodes\n                        const connectedNodes = this.dataset.getConnectedNodes(node.id)\n                            .filter(node => node.type === type.nodeTypes[1]);\n                        this.skips[type.aggregation+node.id] = connectedNodes.length;\n                    }\n                });\n                this.fetchAggregations(types, node);\n            }\n        }\n    }\n\n    /**\n     * Called to generate the list of actions specific to this provider.\n     * We display actions allowing to add additional data for \"source\" edges\n     * (either all the source edges at once, or each individually).\n     */\n    getProviderActions(): Action[] {\n        const actions = super.getProviderActions();\n        const types = this.edgeTypes.filter(type => type.trigger === \"source\");\n        if(types.length > 0) {\n            actions.push(new Action({\n                icon: \"fas fa-plus-circle fa-fw\",\n                title: \"msg#network.actions.fetchMoreAll\",\n                text: \"msg#network.actions.fetchMoreAllText\",\n                action: () => {\n                    this.fetchAggregations(types);\n                },\n                disabled: !this.active\n            }));\n            actions.push(new Action({\n                separator: true\n            }));\n            types.forEach(type => {\n                actions.push(new Action({\n                    icon: \"fas fa-plus-circle fa-fw\",\n                    title: this.context.intlService.formatMessage(\"msg#network.actions.fetchMoreAgg\", {agg: type.aggregation}),\n                    text: type.aggregation,\n                    action: () => {\n                        this.fetchAggregations([type]);\n                    },\n                    disabled: !this.active\n                }))\n            });\n        }\n        return actions;\n    }\n\n    /**\n     * Called to generate the list of actions displayed for a specific node\n     * when it is clicked on.\n     * We display \"expand\" actions for the edges with a \"manual\" trigger.\n     * @param node The clicked node\n     */\n    getNodeActions(node: Node): Action[] {\n        const actions = super.getNodeActions(node);\n        if(this.active) {\n            const types = this.edgeTypes.filter(type => type.trigger === \"manual\" && type.nodeTypes[0] === node.type);\n            if(types.length === 1){\n                actions.push(this.createExpandAction(types[0], node));\n            }\n            else if(types.length > 1) {\n                actions.push(new Action({\n                    icon: \"fas fa-plus-circle\",\n                    title: this.context.intlService.formatMessage(\"msg#network.actions.expandNode\", {label: node.label}),\n                    children: types.map(type => this.createExpandAction(type, node, true))\n                }));\n            }\n        }\n        return actions;\n    }\n    \n    /**\n     * Convenience method to generate an expand action for a given node\n     * and given edge type.\n     * @param type The edge type for expanding the node\n     * @param node The node we wish to expand\n     * @param withtext Whether or not the action should have text (or just an icon)\n     */\n    protected createExpandAction(type: AggregationEdgeType, node: Node, withtext?: boolean): Action {\n        const title = this.context.intlService.formatMessage(\"msg#network.actions.expandNodeWith\", {agg: type.aggregation});\n        return new Action({\n            icon: \"fas fa-plus-circle fa-fw\",\n            title: title,\n            text: withtext? title : undefined,\n            action: () => {\n                if(this.skips[type.aggregation+node.id] === undefined) {\n                    // We need to skip the already connected nodes\n                    const connectedNodes = this.dataset.getConnectedNodes(node.id)\n                        .filter(node => node.type === type.nodeTypes[1]);\n                    this.skips[type.aggregation+node.id] = connectedNodes.length;\n                }\n                this.fetchAggregations([type], node);\n            },\n        })\n    }\n\n}\n","export default {\n    \"savedQueries\": {\n        \"savedQueries\": \"Requêtes sauvegardées\",\n        \"saveCurrentQuery\": \"Enregistrer la requête courante\",\n        \"manageSavedQueries\": \"Gérer les requêtes sauvegardées\",\n        \"savedQueryAlreadyExists\": \"Une requête sauvegardée avec ce nom existe déjà. Voulez-vous la remplacer ?\",\n        \"noSavedQuery\": \"Vous n'avez pas encore enregistré de requête de recherche...\",\n        \"delete\": \"Supprimer cette requête enregistrée\"\n    },\n\n    \"recentQueries\": {\n        \"noRecentQuery\": \"Vous n'avez pas encore effectué de recherche...\",\n        \"delete\": \"Supprimer cette requête\",\n        \"save\": \"Enregistrer cette requête\"\n    },\n\n    \"recentDocuments\": {\n        \"recentDocuments\": \"Documents récents\",\n        \"noRecentDocument\": \"Vous n'avez pas encore ouvert de document...\",\n        \"delete\": \"Supprimer ce document récent\"\n    },\n\n    \"editSavedQuery\": {\n        \"title\": \"Requête sauvegardée\",\n        \"name\": \"Nom\"\n    },\n\n    \"exportQuery\": {\n        \"dialogTitle\": \"Export\",\n        \"dialogOutputFormat\": \"Format de sortie\",\n        \"dialogMaxCount\": \"Nb max de lignes\",\n        \"dialogSourceType\": \"Exporter depuis\",\n        \"dialogResult\": \"Résultat courant\",\n        \"dialogSelection\": \"Sélection courante\",\n        \"btnTitle\": \"Exporter les résultats\",\n        \"exportResult\": \"Exporter le résultat en {type}\",\n        \"exportSelection\": \"Exporter la sélection en {type}\",\n        \"btnDownload\": \"Télécharger\",\n        \"btnClose\": \"Fermer\",\n        \"successNotification\": \"Téléchargement terminé\",\n        \"exportedColumns\": \"Colonnes à exporter\",\n        \"exportedColumnsLabelTooltip\": \"Sélectionnez les colonnes que vous souhaitez exporter, une sélection vide signifie la sélection de tous le colonnes\",\n        \"dialogMaxCountTooltip\": \"Par défaut, le nombre de résultats est limité à {count}\"\n    },\n\n    \"manageSavedQueries\": {\n        \"title\": \"Gérer les requêtes sauvegardées\",\n        \"edit\": \"Editer\",\n        \"reorder\": \"Réorganiser\",\n        \"remove\": \"Effacer\",\n        \"removeAll\": \"Effacer tout\",\n        \"export\": \"Exporter\",\n        \"name\": \"Nom\",\n        \"rss\": \"Flux RSS\"\n    },\n\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enFacet, frFacet, deFacet} from \"@sinequa/components/facet\";\nimport {enCollapse, frCollapse, deCollapse} from \"@sinequa/components/collapse\";\n\nimport _enMetadata from \"./en\";\nimport _frMetadata from \"./fr\";\nimport _deMetadata from \"./de\";\n\nconst enMetadata = Utils.merge({}, _enMetadata, enFacet, enCollapse);\nconst frMetadata = Utils.merge({}, _frMetadata, frFacet, frCollapse);\nconst deMetadata = Utils.merge({}, _deMetadata, deFacet, deCollapse);\n\nexport { enMetadata, frMetadata, deMetadata };\n","export default {\n    \"facet\": {\n        \"show_text_view\": \"Text anzeigen\",\n        \"show_chart_view\": \"Chart anzeigen\",\n        \"itemExclude\": \"Exkludieren\",\n        \"applyFilters\": \"{selections, plural, one {Filter anwenden} other {Filter anwenden}}\",\n        \"clearFilters\": \"{selected, plural, one {Filter löschen} other {Filter löschen}}\",\n        \"loadMore\": \"Mehr laden\",\n        \"showMore\": \"Mehr anzeigen\",\n        \"showLess\": \"Weniger anzeigen\",\n        \"displayed\": \"Angezeigt\",\n        \"removeAll\": \"Alle entfernen\",\n        \"searchPlaceholder\": \"Suche...\",\n        \"itemSelect\": \"Diesen Wert auswählen\",\n        \"filterItems\" : \"Behalte Dokumente mit MINDESTENS EINEM der ausgewählten Werte\",\n        \"filterItemsAnd\": \"Behalte Dokumente mit ALLEN ausgewählten Werten\",\n        \"excludeItems\" : \"Exckludiere Dokumente mit den ausgewählten Werten\",\n        \"clearSelects\" : \"Entferne die aktuellen Filter\",\n        \"searchItems\" : \"Suche nach eniem Wert in dieser Liste\",\n        \"searchNoResult\": \"Keine Ergebnisse\",\n        \"openItem\": \"Öffnen\",\n        \"closeItem\": \"Schließen\",\n        \"authors\": {\n            \"title\": \"Autoren\"\n        },\n        \"concepts\": {\n            \"title\": \"Konzepte\"\n        },\n        \"company\": {\n            \"title\": \"Firmen\"\n        },\n        \"docformat\": {\n            \"title\": \"Formate\"\n        },\n        \"doctype\": {\n            \"title\": \"Dokumenttypen\"\n        },\n        \"documentlanguages\": {\n            \"title\": \"Sprachen\"\n        },\n        \"fileext\": {\n            \"title\": \"Dateierweiterungen\"\n        },\n        \"filename\": {\n            \"title\": \"Dateinamen\"\n        },\n        \"geo\": {\n            \"title\": \"Orte\"\n        },\n        \"matchingpartnames\": {\n            \"title\": \"Übereinstimmende Partnames\"\n        },\n        \"modified\": {\n            \"title\": \"Datumsangaben\"\n        },\n        \"person\": {\n            \"title\": \"Personen\"\n        },\n        \"refine\": {\n            \"title\": \"Suche verfeinern\",\n            \"input\": {\n                \"label\": \"Verfeinern\",\n                \"buttonTitle\": \"Verfeinern\",\n                \"placeholder\": \"Verfeinern nach...\"\n            }\n        },\n        \"size\": {\n            \"title\": \"Größen\"\n        },\n        \"tagcloud\": {\n            \"title\": \"Wortwolke\"\n        },\n        \"title\": {\n            \"title\": \"Titel\"\n        },\n        \"treepath\": {\n            \"title\": \"Quellen\"\n        },\n        \"recentQueries\": {\n            \"title\": \"Kürzliche Suchanfragen\"\n        },\n        \"recentQueriesPublic\": {\n            \"title\": \"Kürzliche öffentliche Suchanfragen\"\n        },\n        \"mySearch\": {\n            \"title\": \"Meine Suche\",\n            \"itemRemove\": \"Entfernen\"\n        },\n        \"search\": {\n            \"label\": \"Suche\",\n            \"buttonTitle\": \"Suche\",\n            \"placeholder\": \"Suche...\",\n            \"showSearchForm\": \"Suchmaske einblenden\",\n            \"hideSearchForm\": \"Suchmaske ausblenden\"\n        },\n        \"range\": {\n            \"year\": \"{date, date, sqYear}\",\n            \"monthYear\": \"{date, date, sqMonthYear}\",\n            \"weekYear\": \"W{week, number, sqWeek} {weekYear, number, sqYear}\",\n            \"apply\": \"Anwenden\",\n            \"clear\": \"Löschen\",\n            \"unavailable\": \"Kein Bereich verfügbar\"\n        },\n\n        \"filters\":{\n            \"add\":\"Filter hinzufügen\",\n            \"addAll\": \"Alle Facetten hinzufügen\",\n            \"remove\":\"Filter entfernen\",\n            \"removeAll\": \"Alle Facetten entfernen\",\n            \"clear\":\"Filter löschen\",\n            \"moreFilters\":\"\",\n            \"showFilters\":\"Filter einblenden\",\n            \"hideFilters\":\"Filter ausblenden\",\n\n            \"back\": \"Zurück zu den Filtern\",\n            \"selectedFilters\": \"Dieser Filter ist in der aktuellen Suchanfrage aktiv\",\n\n            \"customizeFacets\": \"Facetten zum Anzeigen oder Ausblenden auswählen\"\n        },\n\n        \"selectedValue\": \"Dieser Wert ist in der aktuellen Anfrage ausgewählt.\",\n        \"previous\": \"Zurück\",\n        \"next\": \"Weiter\",\n        \"filterItemCountTooltip\": \"{count} mögliche Werte für diesen Filter\",\n    },\n\n    \"facetCard\": {\n        \"expand\": \"Erweitern\",\n        \"collapse\": \"Reduzieren\",\n        \"enlarge\": \"Vergrößern\",\n        \"reduce\": \"Reduzieren\",\n        \"openSettings\": \"Einstellungen öffnen\",\n        \"saveSettings\": \"Einstellungen speichern\"\n    }\n};\n","import {Utils} from \"./utils\";\n\n/**\n * Describes the error codes that can be set in the {@link SqError} class.\n */\nexport enum SqErrorCode {\n    loginCancelled,\n    processedCredentialsError,\n    principalSwitched,\n    autoLoginError\n}\n\n/**\n * A subclass of the built-in {@link Error} class with added `code` and\n * `data` (optional) properties.\n */\nexport class SqError extends Error {\n    // See https://github.com/Microsoft/TypeScript/issues/7639\n    // and https://github.com/Microsoft/TypeScript/issues/1168#issuecomment-107833988\n    /**\n     * The error code associated with the error.\n     */\n    code: SqErrorCode;\n    /**\n     * Arbitrary data associated with the error.\n     */\n    data: any;\n\n    constructor(code: SqErrorCode, message?: string, data?: any) {\n        super(message || SqError.message(code));\n        this.code = code;\n        this.name = \"SqError\";\n        this.message = message || SqError.message(code);\n        if (data) {\n            this.data = data;\n        }\n    }\n\n    /**\n     * Return `true` if the passed `error` is a valid `SqErrorCode` instance.\n     * If the optional `code` parameter is defined then only return true\n     * if the code on `error` matches this value.\n     */\n    static is(error: any, code?: SqErrorCode): error is SqError {\n        if (error instanceof SqError || (error instanceof Error && error.name === \"SqError\")) {\n            return Utils.isUndefined(code) || (error as SqError).code === code;\n        }\n        return false;\n    }\n\n    /**\n     * Return the message corresponding to the passed error `code`.\n     */\n    static message(code: SqErrorCode) {\n        switch (code) {\n            case SqErrorCode.loginCancelled: return \"msg#error.loginCancelled\";\n            case SqErrorCode.processedCredentialsError: return \"msg#error.processedCredentialsError\";\n            case SqErrorCode.principalSwitched: return \"msg#error.principalSwitched\";\n            case SqErrorCode.autoLoginError: return \"msg#error.autoLoginError\";\n            default: return \"msg#error.unknownError\";\n        }\n    }\n}\n","import {HttpParams} from \"@angular/common/http\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\nimport {StartConfig} from \"./start-config.web.service\";\n\n/**\n * A base helper class for web services. It holds the {@link StartConfig} for the app\n */\nexport abstract class HttpService {\n    /**\n     * Constructor\n     *\n     * @param startConfig The start configuration\n     */\n    constructor(\n        protected startConfig: StartConfig) {\n    }\n\n    /**\n     * The name of the application\n     */\n    get appName(): string {\n        return this.startConfig.app!;\n    }\n\n    /**\n     * Makes an API url by appending the api name to the api path\n     * held on the {@link StartConfig}\n     *\n     * @param api An API name\n     */\n    makeUrl(api: string): string {\n        return Utils.addUrl(this.startConfig.apiPath!, api);\n    }\n\n    /**\n     * Makes an Angular {@link HttpParams} object from a basic Javascript object\n     *\n     * @param params A map of parameter values\n     */\n    makeParams(params: MapOf<string | boolean | number | Date | object | undefined>): HttpParams {\n        return Utils.makeHttpParams(params);\n    }\n}","import {Injectable, Inject, InjectionToken, Type, OnDestroy} from \"@angular/core\";\nimport {Observable, Subject} from \"rxjs\";\nimport {UserSettingsWebService, AuditEvent, AuditEvents} from \"@sinequa/core/web-services\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SelectionService} from \"@sinequa/components/selection\";\nimport {Action} from \"@sinequa/components/action\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {Query} from '@sinequa/core/app-utils';\n\n// Basket interface (from models/UserSettings)\nexport interface Basket {\n    name: string;\n    description?: string;\n    ids?: string[];\n}\n\n\n// Audit Events (from models/Audit)\nexport const enum BasketEventType {\n    Loaded = \"Basket_Loaded\",\n    Add = \"Basket_Add\",\n    Delete = \"Basket_Delete\",\n    DeleteAll = \"Basket_DeleteAll\",\n    Update = \"Basket_Update\",\n    Rename = \"Basket_Rename\",\n\n    AddDoc = \"Basket_AddDoc\",\n    RemoveDoc = \"Basket_RemoveDoc\",\n    Open = \"Basket_Open\",\n    ExportCSV = \"Basket_ExportCSV\",\n    Patched = \"Basked_Patched\"\n}\n\n\n// Types of events triggering a change event\nexport const BASKET_CHANGE_EVENTS = [\n    BasketEventType.Loaded,\n    BasketEventType.Add,\n    BasketEventType.Delete,\n    BasketEventType.DeleteAll,\n    BasketEventType.Update,\n    BasketEventType.Rename\n];\n\n\n// CRUD Events\nexport interface BasketChangeEvent {\n    type: BasketEventType;\n    basket?: Basket;\n}\n\n\n// Model expected by the SelectBasket Modal.\n// The filter allows to filter out baskets from the complete list\nexport interface SelectBasketModel {\n    basket: Basket | undefined;\n    basketFilter?: (basket: Basket) => boolean;\n    allowNew?: boolean;\n}\n\n// Model expected by the ManageBaskets Modal.\nexport interface ManageBasketsModel {\n    baskets: Basket[];\n    auditEvents?: AuditEvent[];\n}\n\n\n/**\n * The modal types are unknown to this service.\n * The module using this service must provide these components\n * in their forRoot() method\n *\n * Example below:\n *\n *  public static forRoot(): ModuleWithProviders<BasketsModule> {\n        return {\n            ngModule: BasketsModule,\n            providers: [\n                {\n                    provide: BASKET_COMPONENTS,\n                    useValue: {\n                        selectBasketModal: SelectBasket,\n                        editBasketModal: EditBasket,\n                        manageBasketsModal: ManageBaskets\n                    }\n                },\n                BasketsService\n            ]\n        };\n    }\n */\nexport interface BasketComponents {\n    selectBasketModal: Type<any>;\n    editBasketModal: Type<any>;\n    manageBasketsModal: Type<any>;\n}\nexport const BASKET_COMPONENTS = new InjectionToken<BasketComponents>('BASKET_COMPONENTS');\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class BasketsService implements OnDestroy {\n\n    private readonly _events = new Subject<BasketChangeEvent>();\n    private readonly _changes = new Subject<BasketChangeEvent>();\n\n    // An application may want to alter the action (icon, etc.)\n    public selectedRecordsAction: Action;\n\n    constructor(\n        public userSettingsService: UserSettingsWebService,\n        public searchService: SearchService,\n        public modalService: ModalService,\n        public selectionService: SelectionService,\n        @Inject(BASKET_COMPONENTS) public basketComponents: BasketComponents\n    ){\n        // Listen to the user settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Menus need to be rebuilt\n            this._events.next({type: BasketEventType.Loaded});\n        });\n        // Listen to own events, to trigger change events\n        this._events.subscribe(event => {\n            if(BASKET_CHANGE_EVENTS.indexOf(event.type) !== -1){\n                this.changes.next(event);\n            }\n        });\n        // Register a basket action onto the selection service, so that users can add/remove to/from baskets when documents are selected\n        this.selectedRecordsAction = this.buildBasketsAction();\n    }\n\n    // GETTERS\n\n    /**\n     * Returns the list of this user's baskets.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of baskets if it does not already exist.\n     */\n    public get baskets() : Basket[] {\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"baskets\"])\n            this.userSettingsService.userSettings[\"baskets\"] = [];\n        return this.userSettingsService.userSettings[\"baskets\"];\n    }\n\n    /**\n     * Triggers any event among BasketChangeEvent\n     * (use for fine-grained control of baskets workflow)\n     */\n    public get events() : Subject<BasketChangeEvent> {\n        return this._events;\n    }\n\n    /**\n     * Triggers when events affect the list of baskets\n     * (use to refresh basket menus)\n     * Cf. CHANGE_EVENTS list\n     */\n    public get changes() : Subject<BasketChangeEvent> {\n        return this._changes;\n    }\n\n    /**\n     * @returns true if there is at least one basket\n     */\n    public get hasBasket(): boolean {\n        return this.baskets.length > 0;\n    }\n\n    /**\n     * @returns a basket with the given name or null if it does not exist\n     * @param name\n     */\n    public basket(name: string): Basket | undefined {\n        const i = this.basketIndex(name);\n        return i>= 0? this.baskets[i] : undefined;\n    }\n\n    private basketIndex(name: string): number {\n        for (let i = 0, ic = this.baskets.length; i < ic; i++) {\n            const basket = this.baskets[i];\n            if (basket && basket.name === name) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n\n    // CRUD\n\n    /**\n     * Creates a new basket unless it already exists.\n     * Emits an Basket event.\n     * Update the data on the server.\n     * @param basket the basket to create\n     * @returns true if basket was created\n     */\n    public createBasket(basket: Basket) : boolean {\n\n        if(this.basketIndex(basket.name) >= 0)\n            return false; // This basket already exists\n\n        this.baskets.unshift(basket);\n        this._events.next({type : BasketEventType.Add, basket: basket});\n        this.patchBaskets([{\n            type: BasketEventType.Add,\n            detail: {\n                basket: basket.name\n            }\n        }]);\n        return true;\n    }\n\n    /**\n     * Update the basket at the given index, unless a basket with the same name\n     * already exists in the list of baskets.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param basket the basket to update\n     * @param index the index at which to update the basket\n     * @returns true if basket was updated\n     */\n    public updateBasket(basket: Basket, index : number) : boolean {\n\n        const prevIndex = this.basketIndex(basket.name);\n        if(prevIndex !== -1 && index !== prevIndex)\n            return false; // A basket with the same name exists at a different index\n\n        if(index >= 0 && index < this.baskets.length){\n\n            this.baskets.splice(index, 1, basket);\n            this._events.next({type : BasketEventType.Update, basket: basket});\n            this.patchBaskets([\n                {\n                    type: BasketEventType.Update,\n                    detail: {\n                        basket: basket.name\n                    }\n                }\n            ], true);\n            return true;\n\n        }\n        return false;   // This basket does not exist\n    }\n\n    /**\n     * Updates the full list of Baskets.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param baskets the new list of baskets\n     * @param auditEvents the list of audit events to log\n     */\n    public updateBaskets(baskets: Basket[], auditEvents?: AuditEvents) : boolean {\n        Utils.arraySet(this.baskets, baskets);\n        this._events.next({type : BasketEventType.Update});\n        this.patchBaskets(auditEvents, true);\n        return true;\n    }\n\n    /**\n     * Deletes the given Basket (based on its name)\n     * Emits an Basket event.\n     * Update the data on the server.\n     * @param basket\n     * @returns true if basket was deleted\n     */\n    public deleteBasket(basket: Basket) : boolean {\n\n        const index = this.basketIndex(basket.name);\n\n        if(index === -1)\n            return false; // Nothing to delete\n\n        this.baskets.splice(index, 1);\n        this._events.next({type : BasketEventType.Delete, basket: basket});\n        this.patchBaskets([\n            {\n                type: BasketEventType.Delete,\n                detail: {\n                    savedquery: basket.name\n                }\n            }\n        ], true);\n        return true;\n    }\n\n    /**\n     * Adds one or more documents to a basket.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param name basket to which to add the document(s)\n     * @param ids id(s) of the document(s) to add to the basket\n     * @param skipPatch if true, will not update the data on the server (use for bulk updates)\n     * @returns true if the document was added\n     */\n    public addToBasket(name: string, ids: string | string[], skipPatch?: boolean): boolean {\n        if (!ids) {\n            return false;\n        }\n        const basket = this.basket(name);\n        if (!basket) return false;\n        if (!basket.ids) basket.ids = [];\n        if (Utils.isArray(ids)) {\n            for (let i = 0, ic = ids.length; i < ic; i++) {\n                const id = ids[i];\n                if (basket.ids.indexOf(id) === -1) {\n                    basket.ids.push(id);\n                }\n            }\n        }\n        else {\n            if (basket.ids.indexOf(<string>ids) === -1) {\n                basket.ids.push(<string>ids);\n            }\n        }\n        if(!skipPatch){\n            this._events.next({type : BasketEventType.AddDoc});\n            this.patchBaskets({\n                type: BasketEventType.AddDoc,\n                detail: {\n                    basket: name,\n                    \"doc-id\": basket.ids[0]\n                }\n            });\n        }\n        return true;\n    }\n\n    /**\n     * Removes one or more documents from a basket.\n     * Emits a Basket event.\n     * Update the data on the server.\n     * @param name basket from which to remove the document(s)\n     * @param ids id(s) of the document(s) to remove from the basket\n     * @param skipPatch if true, will not update the data on the server (use for bulk updates)\n     * @returns true if the document was removed\n     */\n    public removeFromBasket(name: string, ids: string | string[], skipPatch?: boolean): boolean {\n        if (!ids) {\n            return false;\n        }\n        const basket = this.basket(name);\n        if (!basket) return false;\n        if (!basket.ids) basket.ids = [];\n        if (Utils.isArray(ids)) {\n            for (let i = 0, ic = ids.length; i < ic; i++) {\n                const id = ids[i];\n                const index = basket.ids.indexOf(id);\n                if (index !== -1) {\n                    basket.ids.splice(index, 1);\n                }\n            }\n        }\n        else {\n            const index = basket.ids.indexOf(<string>ids);\n            if (index !== -1) {\n                basket.ids.splice(index, 1);\n            }\n        }\n        if(!skipPatch){\n            this._events.next({type : BasketEventType.RemoveDoc});\n            this.patchBaskets({\n                type: BasketEventType.RemoveDoc,\n                detail: {\n                    basket: name,\n                    \"doc-id\": basket.ids[0]\n                }\n            }, true);\n        }\n        return true;\n    }\n\n    /**\n     * Removes a document from all the baskets\n     * @param id id of the document to remove\n     */\n    public removeFromAllBaskets(id: string) : boolean {\n        const auditEvents: AuditEvent[] = [];\n        for (const basket of this.baskets) {\n            if( this.removeFromBasket(basket.name, id, true) ){\n                auditEvents.push({\n                    type: BasketEventType.RemoveDoc,\n                    detail: {\n                        basket: basket.name,\n                        \"doc-id\": id\n                    }\n                });\n            }\n        }\n        if(auditEvents.length > 0) {\n            this._events.next({type : BasketEventType.RemoveDoc});\n            this.patchBaskets(auditEvents, true);\n            return true;\n        }\n        return false;\n    }\n\n\n    /**\n     * Updates Baskets in User settings.\n     * @param auditEvents : Audit Events to be triggered\n     * @returns an Observable which can be used to trigger further events\n     */\n    private patchBaskets(auditEvents?: AuditEvents, updateSearch?: boolean): Observable<void> {\n        const obs = this.userSettingsService.patch({baskets: this.baskets}, auditEvents);\n        obs.subscribe(\n            next => {\n                this._events.next({type: BasketEventType.Patched});\n                if(updateSearch && this.searchService.query.basket) {\n                    this.searchService.search(); // Update search results to reflect the new basket content\n                }\n            },\n            error => {\n                console.error(\"Could not patch Baskets!\", error);\n        });\n        return obs;\n    }\n\n\n\n\n    // EVENT HANDLERS (Menus)\n\n    /**\n     * Uses the SearchService to perform a search returning all\n     * the documents in this basket\n     * @param basket\n     * @param path\n     * @returns the search service promise\n     */\n    public searchBasket(basket : Basket, path?: string) : Promise<boolean> {\n        const query = this.searchService.makeQuery();\n        query.basket = basket.name;\n        this.searchService.setQuery(query);\n        this._events.next({type: BasketEventType.Open, basket: basket});\n        return this.searchService.search({ path: path }, {\n            type: BasketEventType.Open,\n            detail: {\n                basket: basket.name\n            }\n        });\n    }\n\n    /**\n     * Opens a dialog allowing a user to add one (or more) document(s)\n     * to a basket.\n     * @param ids id(s) of the documents to add to a basket\n     * @param recordBaskets names of the baskets the document already belongs to\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the document was added to a basket\n     */\n    public addToBasketModal(ids: string | string[], recordBaskets?: string[])\n            : Promise<boolean> {\n        const model : SelectBasketModel = {\n            basket: undefined,\n            basketFilter: recordBaskets? b => !recordBaskets.includes(b.name) : undefined,\n            allowNew: true\n        };\n        return this.modalService\n            .open(this.basketComponents.selectBasketModal, {model: model})\n            .then(result => {\n                if (result === ModalResult.OK && model.basket) {\n                    return this.addToBasket(model.basket.name, ids);\n                }\n                return false;\n            });\n    }\n\n    /**\n     * Opens a dialog allowing a user to remove one (or more) document(s)\n     * from a basket.\n     * @param ids id(s) of the documents to remove from a basket\n     * @param recordBaskets names of the baskets the document already belongs to\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the document was removed from a basket\n     */\n    public removeFromBasketModal(ids: string | string[], recordBaskets?: string[])\n            : Promise<boolean> {\n        const model : SelectBasketModel = {\n            basket: undefined,\n            basketFilter: recordBaskets? b => recordBaskets.includes(b.name) : undefined\n        };\n        return this.modalService\n            .open(this.basketComponents.selectBasketModal, {model: model})\n            .then(result => {\n                if (result === ModalResult.OK && model.basket) {\n                    return this.removeFromBasket(model.basket.name, ids);\n                }\n                return false;\n            });\n    }\n\n    /**\n     * Opens a dialog allowing a user to create new basket.\n     * @param model the initial basket object model\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the basket was created.\n     */\n    public createBasketModal(model: Basket = {name: \"\"}) : Promise<boolean> {\n\n        return this.modalService.open(this.basketComponents.editBasketModal, {model: model})\n            .then((result) => {\n\n                if (result === ModalResult.OK) {\n                    const index = this.basketIndex(model.name);\n                    if (index !== -1) {\n\n                        return this.modalService.yesNo(\"msg#baskets.basketAlreadyExists\")\n                            .then((result) => {\n                                if (result === ModalResult.Yes) {\n                                    return this.updateBasket(model, index);\n                                }\n                                return false;\n                            });\n\n                    }\n                    else {\n\n                        return this.createBasket(model);\n\n                    }\n                }\n\n                return false;\n            });\n    }\n\n    // Not relevant as of now\n    // public editBasketModal(basket: Basket)\n\n    /**\n     * Opens a dialog allowing a user to reorganize and edit the\n     * list of baskets.\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true is the list was updated.\n     */\n    public manageBasketsModal() : Promise<boolean> {\n\n        const model: ManageBasketsModel = { baskets: Utils.copy(this.baskets) };\n\n        return this.modalService.open(this.basketComponents.manageBasketsModal, {model: model})\n            .then((result) => {\n                if (result === ModalResult.OK) {\n                    return this.updateBaskets(model.baskets, model.auditEvents);\n                }\n                return false;\n            });\n\n    }\n\n\n    private buildBasketsAction() : Action {\n        return new Action({\n            icon: \"fas fa-shopping-basket\",\n            title: \"msg#baskets.baskets\",\n            hidden: true,\n            children: [\n                new Action({\n                    text: \"msg#baskets.addToBasket\",\n                    action: (item, $event) => {\n                        this.addToBasketModal(this.selectionService.getSelectedIds());\n                    }\n                }),\n                new Action({\n                    text: \"msg#baskets.removeFromBasket\",\n                    action: (item, $event) => {\n                        this.removeFromBasketModal(this.selectionService.getSelectedIds());\n                    }\n                })\n            ],\n            updater: (action) => {\n                action.hidden = !this.selectionService.haveSelectedRecords;\n            }\n        });\n    }\n\n    makeQuery(basket: Basket): Query {\n        const query = this.searchService.makeQuery();\n        query.basket = basket.name;\n        return query;\n    }\n\n    notifyOpenBasket(basket: Basket) {\n        this._events.next({type: BasketEventType.Open, basket});\n    }\n\n    ngOnDestroy() {\n        this.events.complete();\n        this.changes.complete();\n    }\n}\n","export * from \"./public-api\";","export * from \"./labels.module\";\nexport * from \"./labels.service\";\nexport * from \"./label.pipe\";\nexport * from \"./labels.component\";\nexport * from \"./result-labels.component\";\nexport * from \"./labels-autocomplete.directive\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";\n","export default {\n    \"notification\": {\n        \"title\": \"Notifications\",\n        \"showNotifications\": \"Afficher les notifications\",\n        \"hideNotifications\": \"Masquer les notifications\",\n        \"clearNotifications\": \"Effacer les notifications\",\n    }\n};\n","import {Component, Input, Output, EventEmitter, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {SafeResourceUrl} from \"@angular/platform-browser\";\nimport {Query} from '@sinequa/core/app-utils';\nimport {Record, PreviewData} from \"@sinequa/core/web-services\";\nimport {PreviewService} from \"../../preview.service\";\nimport {PreviewDocument} from \"../../preview-document\";\n\n@Component({\n    selector: \"sq-facet-preview\",\n    templateUrl: \"./facet-preview.html\",\n})\nexport class BsFacetPreview implements OnChanges {\n    @Input() record: Record;\n    @Input() sandbox: string | null;\n    @Input() query: Query;\n    @Input() height: string;\n    @Input() iframeClass: string;\n    @Input() similarDocuments: Record[];\n    @Output() recordOpened = new EventEmitter<{record: Record, query: Query, startSmall?: boolean, iframeClass?: string}>();\n    data: PreviewData;\n    document: PreviewDocument;\n    downloadUrl?: SafeResourceUrl;\n\n    constructor(\n        private previewService: PreviewService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"record\"] || changes[\"query\"]) {\n            this.previewService.getPreviewData(this.record.id, this.query).subscribe(\n                previewData => {\n                    this.data = previewData;\n                    this.downloadUrl = this.data ? this.previewService.makeDownloadUrl(this.data.documentCachedContentUrl) : undefined;\n                });\n        }\n    }\n\n    openSimilarDoc(doc: Record) {\n        this.recordOpened.next({\n            record: doc,\n            query: this.query,\n            startSmall: true,\n            iframeClass: this.iframeClass\n        });\n        return false;\n    }\n}","<div *ngIf=\"!similarDocuments\" class=\"d-flex flex-column {{iframeClass}}\" [ngStyle]=\"{height: height}\">\n    <sq-preview-document-iframe  [sandbox]=\"sandbox\" [downloadUrl]=\"downloadUrl\" (onPreviewReady)=\"document = $event\">\n        <sq-preview-tooltip #tooltip [previewDocument]=\"document\" [previewData]=\"data\"></sq-preview-tooltip>\n    </sq-preview-document-iframe>\n</div>\n<ul class=\"list-group\" *ngIf=\"!!similarDocuments\">\n    <li *ngFor=\"let doc of similarDocuments\" class=\"list-group-item d-flex justify-content-between align-items-center\" style=\"background-color: transparent;\">\n        <sq-result-title [record]=\"doc\" [titleLinkBehavior]=\"'open'\"></sq-result-title>\n        <div class=\"d-flex\">\n            <span class=\"badge badge-pill badge-secondary\" style=\"padding-top: 5px;\">{{100*doc.globalrelevance | number:'1.0-0'}}</span>\n            <a href=\"#\" (click)=\"openSimilarDoc(doc)\" class=\"open-record ml-2\" title=\"Open document in workspace\">\n                <i class=\"fas fa-arrow-circle-right\"></i>\n            </a>\n        </div>\n    </li>\n</ul>","import {Component, Input, OnInit, OnDestroy, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Results, Aggregation, AggregationItem} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {SelectionService} from '@sinequa/components/selection';\nimport {Subscription} from \"rxjs\";\nimport {ChartOptions, ChartDataPoint} from \"../chart/chart\";\nimport {FacetService, AbstractFacet} from \"@sinequa/components/facet\";\nimport {Action} from \"@sinequa/components/action\";\n\nexport interface FacetChartDataPoint extends ChartDataPoint {\n    $item: AggregationItem;\n}\n\n@Component({\n    selector: \"sq-facet-ngx-chart\",\n    templateUrl: \"./facet-chart.html\"\n})\nexport class FacetNgxChart extends AbstractFacet implements OnInit, OnChanges, OnDestroy {\n    @Input() results: Results;\n    @Input() aggregation: string;\n    @Input() aggregations: string[];\n    @Input() chartType: string;\n    @Input() colorScheme: string;\n    @Input() colors: string[] = [\"#7aa3e5\"];    // Single color (default is bar chart)\n    @Input() filteredColor: string = \"#C3E6CB\";\n    @Input() selectedColor: string = \"#7acce5\";\n\n    // Aggregation from the Results object\n    data: Aggregation | undefined;\n\n    // sq-charts inputs\n    dataPoints: FacetChartDataPoint[];\n    options: ChartOptions;\n\n    private readonly selectedValues = new Set<string>();\n\n    // Actions (displayed in facet menu)\n    // All actions are built in the constructor\n    private readonly clearFilters: Action;\n    private readonly selectField: Action;\n\n    // Subscriptions\n    private localeChange: Subscription;\n    private selectionChange: Subscription;\n\n    constructor(\n        private facetService: FacetService,\n        private intlService: IntlService,\n        private selectionService: SelectionService,\n        private appService: AppService\n    ){\n        super();\n\n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                this.facetService.clearFiltersSearch(this.getName(), true);\n            }\n        });\n\n        this.selectField = new Action({\n            title: \"Select field\",\n            updater: (action) => {\n                if(this.aggregations){\n                    action.name = this.aggregation;\n                    action.text = this.aggregation;\n                    action.children = this.aggregations\n                        .filter(v => v!==this.aggregation)\n                        .map(a => {\n                            return new Action({\n                                name: a,\n                                text: a,\n                                action : (item, event) => {\n                                    this.aggregation = a;\n                                    this.ngOnChanges(<SimpleChanges> <any> {results: true});\n                                }\n                            });\n                        });\n                }\n            }\n        });\n\n    }\n\n    /**\n     * Name of the facet, used to create and retrieve selections\n     * through the facet service.\n     */\n    getName() : string {\n        return this.aggregation;\n    }\n\n    /**\n     * Returns all the actions that are relevant in the current context\n     */\n    get actions(): Action[] {\n        const actions: Action[] = [];\n        if(this.hasFiltered()) {\n            actions.push(this.clearFilters);\n        }\n        if(!!this.selectField.name) {\n            actions.push(this.selectField);\n        }\n        return actions;\n    }\n\n    /**\n     * Returns true if there is an active selection (or exclusion) from this facet\n     */\n    hasFiltered(): boolean {\n        return this.facetService.hasFiltered(this.getName());\n    }\n\n    /**\n     * Generates the sq-chart input data, including formatting\n     */\n    private makeData() {\n        this.dataPoints = [];\n        if(this.data && this.data.items){\n            for (const item of this.data.items) {\n                this.dataPoints.push({\n                    name: this.facetService.formatValue(item),\n                    value: item.count,\n                    $item: item\n                });\n            }\n        }\n    }\n\n    /**\n     * Update selected values (the value in the aggregation that belong to a selected document)\n     */\n    private updateSelectedValues(){\n        this.selectedValues.clear();\n        this.results.records\n            .filter(record => record.$selected)\n            .forEach(record => {\n                if(this.data){\n                    const val = record[this.appService.getColumnAlias(this.appService.getColumn(this.data.column))];\n                    if(val){\n                        if(Utils.isString(val)){    // Sourcestr\n                            this.selectedValues.add(val.toLowerCase());\n                        }\n                        if(Utils.isArray(val)){\n                            val.forEach(v => {\n                                if(Utils.isString(v))\n                                    this.selectedValues.add(v.toLowerCase()); // Sourcecsv\n                                else\n                                    this.selectedValues.add(v.value.toLowerCase()); // Entity\n                            });\n                        }\n                    }\n                }\n            });\n    }\n\n    /**\n     * Create the chart options\n     */\n    private createChartOptions(){\n        this.options = {\n            type: this.chartType,\n            tickFormatter: this.tickFormatter,\n            colorScheme: this.colorScheme\n        };\n\n        if (this.colors && this.colors.length > 0) {\n            this.options.getItemColor = (value: string): string => {\n                const index = this.dataPoints.findIndex(dataPoint => dataPoint.name === value);\n                if (index === -1) {\n                    return \"black\";\n                }\n                const item = this.getItem(this.dataPoints[index]);\n                if (item) {\n                    if (this.isFiltered(item)) {\n                        return this.filteredColor;\n                    }\n                    if(this.selectedValues.has(Utils.toSqlValue(item.value).toLowerCase())){\n                        return this.selectedColor;\n                    }\n                }\n                return this.colors[index % this.colors.length]; // Rolling colors scheme\n            };\n        }\n    }\n\n    tickFormatter = (value: any): string => {\n        if (Utils.isNumber(value)) {\n            // No fractional counts\n            if (value % 1 !== 0) {\n                return \"\";\n            }\n            return this.intlService.formatNumber(value);\n        }\n        return value;\n    }\n\n    /**\n     * Subscribe to language changes, in order to reformat the data points.\n     * Subscribe to selection changes, in order to highlight selected documents.\n     */\n    ngOnInit() {\n        this.localeChange = Utils.subscribe(this.intlService.events,\n            (value) => {\n                this.makeData();\n            });\n        this.selectionChange = this.selectionService.events.subscribe(event => {\n            this.ngOnChanges(<SimpleChanges> <any> {results: true});\n        });\n    }\n\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.selectField.update();\n\n        if (!!changes[\"results\"]) {\n            // may be null if no data\n            this.data = this.facetService.getAggregation(this.aggregation, this.results, {facetName: this.getName()});\n\n            this.updateSelectedValues();\n\n            this.createChartOptions();\n\n            this.makeData();\n        }\n    }\n\n    ngOnDestroy() {\n        this.localeChange.unsubscribe();\n        this.selectionChange.unsubscribe();\n    }\n\n    click(dataPoint: ChartDataPoint) {\n        if (this.data) {\n            const item = this.getItem(dataPoint);\n            if (!!item) {\n                if(!this.isFiltered(item))\n                    this.facetService.addFilterSearch(this.getName(), this.data, item);\n                else\n                    this.facetService.removeFilterSearch(this.getName(), this.data, item);\n            }\n        }\n    }\n\n    /**\n     * Returns true if the given AggregationItem is filtered\n     * @param item\n     */\n    isFiltered(item: AggregationItem) : boolean {\n        return !!this.data && this.facetService.itemFiltered(this.getName(), this.data, item);\n    }\n\n    getItem(dataPoint: ChartDataPoint): AggregationItem | undefined {\n        const _dataPoint = this.dataPoints.find(_dataPoint => _dataPoint.name === dataPoint.name && _dataPoint.value === dataPoint.value);\n        if (!!_dataPoint && !!_dataPoint.$item) {\n            return _dataPoint.$item;\n        }\n        return undefined;\n    }\n\n    /* AbstractFacet abstract methods */\n    isHidden(): boolean {\n        // Always display if multivalued\n        return !this.aggregations && (!this.data || !this.dataPoints);\n    }\n\n}","<div *ngIf=\"!isHidden()\" class=\"card-body\">\n    <sq-ngx-chart [options]=\"options\" [data]=\"dataPoints\" (item-click)=\"click($event)\" #chart></sq-ngx-chart>\n</div>","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { DragDropModule } from '@angular/cdk/drag-drop';\n\nimport { IntlModule } from \"@sinequa/core/intl\";\n\nimport { BsActionModule } from \"@sinequa/components/action\";\n\nimport { BsResultsSelector } from \"./results-selector/results-selector\";\nimport { BsResultSelector } from \"./result-selector/result-selector\";\nimport { BsSelectionArranger } from \"./selection-arranger/selection-arranger.component\";\nimport { SELECTION_OPTIONS, defaultSelectionOptions } from \"../selection.service\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        DragDropModule,\n\n        IntlModule,\n\n        BsActionModule,\n    ],\n    declarations: [\n        BsResultsSelector, BsResultSelector, BsSelectionArranger\n    ],\n    exports: [\n        BsResultsSelector, BsResultSelector, BsSelectionArranger\n    ],\n    providers: [\n        {provide: SELECTION_OPTIONS, useValue: defaultSelectionOptions}\n    ]\n})\nexport class BsSelectionModule {\n}\n","import { Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport { HighlightDataPerCategory, CategoryHighlightData, HighlightDataPerLocation, PreviewData } from \"@sinequa/core/web-services\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { PreviewDocument, HighlightCategoryFilterState, HighlightCategoryFilterChoice } from \"../../preview-document\";\n\n\nexport interface HighlightNavigationState {\n    current: number;\n    filters: { [key: string] : HighlightCategoryFilterState };\n}\n\n\n@Component({\n    selector: \"sq-preview-highlights\",\n    templateUrl: \"./preview-highlights.html\",\n    styleUrls: [\"./preview-highlights.scss\"]\n})\nexport class BsPreviewHighlights implements OnChanges {\n\n    @Input() previewDocument: PreviewDocument;\n    @Input() previewData: PreviewData;\n\n    // Highlight data retrieved by the server\n    public highlightDataPerCategory?: HighlightDataPerCategory;\n    private highlightDataPerLocation?: HighlightDataPerLocation;\n\n    // Selected entity & filters (the .filters[category] are the NgModel of the select elements)\n    public navigationState: HighlightNavigationState;\n\n    // highlight data resulting from filtering\n    private filteredHighlightData?: HighlightDataPerLocation;\n\n\n    ngOnChanges(changes: SimpleChanges) {\n        if(changes[\"previewData\"]){\n            this.initialize();\n        }\n        if (changes[\"previewDocument\"]) {\n            if (this.previewReady) {\n                this.moveToFirstSearchTerm();\n            }\n        }\n    }\n\n    private initialize(): void {\n        this.highlightDataPerCategory = !this.previewData ? undefined : this.previewData.highlightsPerCategory;\n        this.highlightDataPerLocation = !this.previewData ? undefined : this.previewData.highlightsPerLocation;\n        this.navigationState = new SimpleHighlightNavigationState(this.nonEmptyCategoryIds);\n        this.reset();\n    }\n\n    /**\n     * Called on init and when non-value filters are clicked\n     * Resets the navigationState entity selection.\n     * Applies the filters to the preview document.\n     * Updates the filtered data.\n     */\n    public reset(): void {\n        this.navigationState.current = -1;  // Resets the navigationState entity selection.\n        if(this.previewReady)               // Applies the filters to the preview document.\n            this.previewDocument.filterHighlights(this.navigationState.filters);\n        // Updates the filtered data.\n        this.filteredHighlightData = this.highlightDataPerLocation ?\n            new FilteredHighlightDataPerLocation(this.highlightDataPerLocation, this.navigationState.filters) : undefined;\n    }\n\n    /**\n     * Selects the first match location (highlight classes and scrolls to it)\n     */\n    private moveToFirstSearchTerm(): void {\n        if (this.filteredHighlightData) {\n            for (let i = 0, ic = this.total; i < ic; i++) {\n                const highlight = this.filteredHighlightData[i];\n                if (highlight.positionInCategories) {\n                    let category = \"term1\";\n                    let position = highlight.positionInCategories[category];\n                    if (!Utils.isNumber(position)) {\n                        category = \"matchlocations\";\n                        position = highlight.positionInCategories[category];\n                    }\n                    if (Utils.isNumber(position)) {\n                        this.navigationState.current = i;\n                        this.previewDocument.selectHighlight(category, position);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Index of currently selected entity (from 1)\n     */\n    get current(): number {\n        return this.navigationState.current + 1;\n    }\n\n    /**\n     * No categories to highlight\n     */\n    get noData(): boolean {\n        return this.nonEmptyCategoryIds.length === 0;\n    }\n\n    /**\n     * Total number of highlights\n     */\n    get total(): number {\n        return this.filteredHighlightData ? this.filteredHighlightData.size() : 0;\n    }\n\n    /**\n     * @returns true when the document is ready to be interacted with\n     */\n    get previewReady(): boolean {\n        return !!this.previewDocument;\n    }\n\n    /**\n     * Returns the currently selected entity/match/extract based on the PreviewData\n     * or potentially by fetching it directly from the HTML document.\n     */\n    get currentValue(): string {\n        if (this.navigationState.current < 0 || !this.filteredHighlightData) {\n            return \"\";\n        }\n        const result: string = this.filteredHighlightData[this.navigationState.current].displayValue;\n        if (result) {\n            return result;\n        }\n        const values: string[] = this.filteredHighlightData[this.navigationState.current].values;\n        if (values && values.length > 0 && values[0] && values[0].length > 0) {\n            return values[0];\n        }\n        if (Object.keys(this.filteredHighlightData[this.navigationState.current].positionInCategories).length === 1\n                && this.filteredHighlightData[this.navigationState.current].positionInCategories[\"extractslocations\"]) {\n            return this.previewDocument.getHighlightText(\n                \"extractslocations\",\n                this.filteredHighlightData[this.navigationState.current].positionInCategories[\"extractslocations\"]);\n        }\n        return \"\";\n    }\n\n    /**\n     * Get categories of the currently selected entity/match/extract\n     * based on the filtered Highlight data per location\n     */\n    get currentCategories(): string[] {\n        const result: string[] = [];\n        if (this.navigationState.current < 0 || !this.filteredHighlightData || this.navigationState.current >= this.filteredHighlightData.size()) {\n            return result;\n        }\n        for (const categoryId in this.filteredHighlightData[this.navigationState.current].positionInCategories) {\n            result.push(categoryId);\n        }\n        return result;\n    }\n\n    public categoryIconClass(categoryId: string): string {\n        if (categoryId.startsWith(\"term\")) {\n            return \"far fa-flag\";\n        }\n        return \"sq-icon-\" + categoryId;\n    }\n\n    public getCategoryHighlightData(categoryId: string): CategoryHighlightData | undefined {\n        return this.highlightDataPerCategory ? this.highlightDataPerCategory[categoryId] : undefined;\n    }\n\n    public categoryDisplayLabel(categoryId: string): string {\n        return this.highlightDataPerCategory ? this.highlightDataPerCategory[categoryId].categoryDisplayLabel : \"\";\n    }\n\n    public categoryLabelPipeParams(categoryId: string): any {\n        if (!categoryId.startsWith(\"term\")) {\n            return {};\n        }\n        const index = Number(categoryId.slice(\"term\".length));\n        if (isNaN(index)) {\n            return {};\n        }\n        return {values: {index: index}};\n    }\n\n\n    /**\n     * Returns the list of entity categories that contain values\n     */\n    get nonEmptyCategoryIds(): string[] {\n        const result: string[] = [];\n        for (const categoryId in this.highlightDataPerCategory) {\n            if (!this.categoryIsEmpty(categoryId, this.highlightDataPerCategory)) {\n                result.push(categoryId);\n            }\n        }\n        return result;\n    }\n\n    private categoryIsEmpty(categoryId: string, highlightData : HighlightDataPerCategory): boolean {\n        return highlightData[categoryId] == null\n            || highlightData[categoryId].values == null\n            || highlightData[categoryId].values.length <= 0;\n    }\n\n    /**\n     * @returns true if there is more than one option per category\n     * @param categoryId the category id\n     */\n    public categoryHasMultipleValues(categoryId: string): boolean {\n        return this.getHighlightValueCount(categoryId) > 1;\n    }\n\n    /**\n     * @returns the number of options per category\n     * @param categoryId the category id\n     */\n    public getHighlightValueCount(categoryId: string): number {\n        if (!this.highlightDataPerCategory || this.categoryIsEmpty(categoryId, this.highlightDataPerCategory)) {\n            return 0;\n        }\n        const values = this.highlightDataPerCategory[categoryId].values;\n        if (values == null) {\n            return 0;\n        }\n        return values.length;\n    }\n\n\n    // Navigation buttons handlers\n\n    first() {\n        if (this.navigationState.current > 0) {\n            this.navigationState.current = 0;\n            this.selectHighlight();\n        }\n    }\n\n    previous() {\n        if (this.navigationState.current > 0) {\n            this.navigationState.current--;\n            this.selectHighlight();\n        }\n    }\n\n    next() {\n        if (this.navigationState.current < this.total - 1) {\n            this.navigationState.current++;\n            this.selectHighlight();\n        }\n    }\n\n    last() {\n        if (this.navigationState.current !== this.total - 1) {\n            this.navigationState.current = this.total - 1;\n            this.selectHighlight();\n        }\n    }\n\n    private selectHighlight(): void {\n        if (this.filteredHighlightData) {\n            const positionInCategories: { [categoryId: string]: number } = this.filteredHighlightData[this.navigationState.current].positionInCategories;\n            const firstCategory: string = Object.keys(positionInCategories)[0];\n            this.previewDocument.selectHighlight(firstCategory, positionInCategories[firstCategory]);\n        }\n    }\n\n    public selectAll(): void {\n        for (const categoryId in this.navigationState.filters) {\n            this.navigationState.filters[categoryId] = this.keepAllFilter;\n        }\n        this.reset();\n    }\n\n    public selectNone(): void {\n        for (const categoryId in this.navigationState.filters) {\n            this.navigationState.filters[categoryId] = this.keepNoneFilter;\n        }\n        this.reset();\n    }\n\n    get allSelected(): boolean {\n        for (const categoryId in this.navigationState.filters) {\n            const filter: HighlightCategoryFilterState = this.navigationState.filters[categoryId];\n            if (filter && filter.choice !== HighlightCategoryFilterChoice.All) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    get noneSelected(): boolean {\n        for (const categoryId in this.navigationState.filters) {\n            const filter: HighlightCategoryFilterState = this.navigationState.filters[categoryId];\n            if (!filter || filter.choice !== HighlightCategoryFilterChoice.None) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n\n    // Entity filters\n\n    // Trivial filters\n    public keepAllFilter: HighlightCategoryFilterState = new SimpleHighlightCategoryFilterState();\n    public keepNoneFilter: HighlightCategoryFilterState = new SimpleHighlightCategoryFilterState(HighlightCategoryFilterChoice.None);\n\n    // Filter created for each option\n    public newFilter(value: string) {\n        return new SimpleHighlightCategoryFilterState(value);\n    }\n\n    // A filter was clicked\n    selectFilter(categoryId: string, value: HighlightCategoryFilterState){\n        //console.log(categoryId, value);\n\n        // If a specific entity/extract is selected we want to select it, rather than filter other entities\n        if(value.choice === HighlightCategoryFilterChoice.Value){\n\n            // First, let's cancel value filters EXCEPT the one that was just selected\n            for(const key in this.navigationState.filters){\n                if(key !== categoryId && this.navigationState.filters[key] !== this.keepAllFilter && this.navigationState.filters[key] !== this.keepNoneFilter){\n                    this.navigationState.filters[key] = this.keepAllFilter;\n                }\n            }\n\n            // Search the entity ID\n            let highlight;\n            for(const key in this.highlightDataPerLocation){\n                highlight = this.highlightDataPerLocation[key];\n                if(highlight.positionInCategories[categoryId] && highlight.values.includes(value.filterValue)){\n                    break;\n                }\n            }\n\n            if(highlight){\n                this.previewDocument.selectHighlight(categoryId, highlight.positionInCategories[categoryId]);\n            }\n\n        }\n        else {\n\n            // Cancel value filters\n            for(const key in this.navigationState.filters){\n                if(this.navigationState.filters[key] !== this.keepAllFilter && this.navigationState.filters[key] !== this.keepNoneFilter){\n                    this.navigationState.filters[key] = this.keepAllFilter;\n                }\n            }\n\n            // Reset just applies the (non-value) filters as they are and removes selection\n            this.reset();\n\n        }\n    }\n\n    /**\n     * Comparator allowing to sort the filters in the select\n     */\n    public compareFilters(filter1: HighlightCategoryFilterState, filter2: HighlightCategoryFilterState): boolean {\n        return SimpleHighlightCategoryFilterState.compare(filter1, filter2);\n    }\n\n\n}\n\n\n\n\n// Implementation of data structures\n\nclass SimpleHighlightNavigationState {\n\n    current: number;\n    filters: { [key: string] : HighlightCategoryFilterState};\n\n    constructor(categories: string[]) {\n        this.current = -1;  // No selection\n        this.filters = {};\n        for (const category of categories) {\n            this.filters[category] = new SimpleHighlightCategoryFilterState(); // All entities visible by default\n        }\n    }\n}\n\n\nclass SimpleHighlightCategoryFilterState implements HighlightCategoryFilterState {\n    readonly choice: HighlightCategoryFilterChoice = HighlightCategoryFilterChoice.All;\n    private _filterValue: string = \"\";\n\n    constructor(param?: string | HighlightCategoryFilterChoice) {\n        if (param == null) {\n            return;\n        }\n        if (typeof param === \"string\") {\n            this.choice = HighlightCategoryFilterChoice.Value;\n            this._filterValue = param;\n        } else {\n            this.choice = param;\n        }\n    }\n\n    get filterValue(): string {\n        if (this.choice === HighlightCategoryFilterChoice.Value) {\n            return this._filterValue;\n        }\n        return \"\";\n    }\n\n    public static compare(filter1: HighlightCategoryFilterState, filter2: HighlightCategoryFilterState) {\n        if(filter1 && filter2) {\n            if(filter1.choice !== filter2.choice) {\n                return false;\n            }\n            return filter1.choice !== HighlightCategoryFilterChoice.Value\n                || filter1.filterValue === filter2.filterValue;\n        }\n        return filter1 === filter2;\n    }\n}\n\n\nclass FilteredHighlightDataPerLocation implements HighlightDataPerLocation {\n\n    [index: number]: {\n        start: number,\n        length: number,\n        values: string[],\n        displayValue: string,\n        positionInCategories: { [category: string]: number }\n    };\n\n    public constructor(baseData: HighlightDataPerLocation, filters: { [key: string] : HighlightCategoryFilterState }) {\n        let counter: number = 0;\n        for (const i in baseData) {\n            const categories = !baseData[i].positionInCategories ? undefined : Object.keys(baseData[i].positionInCategories);\n            if (categories && this.locationIsIncluded(baseData[i].values, categories, filters)) {\n                this[counter] = baseData[i];\n                counter++;\n            }\n        }\n    }\n\n    size(): number {\n        return Object.keys(this).length;\n    }\n\n    public locationIsIncluded(values: string[], categories: string[], filters: { [key: string] : HighlightCategoryFilterState }): boolean {\n        if (!categories) {\n            return false;\n        }\n        for (const category of categories) {\n            if (filters[category] &&\n                (filters[category].choice === HighlightCategoryFilterChoice.All\n                || filters[category].choice === HighlightCategoryFilterChoice.Value && values != null && values.includes(filters[category].filterValue))) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","<div class=\"card sq-facet\">\n    <div class=\"card-header\">{{'msg#preview.highlightsTitle' | sqMessage}}</div>\n    <ng-container *ngIf=\"noData; else normalCase\">\n        <div class=\"card-body noEntityToHighlightMessage\">\n            {{\"msg#preview.noEntityToHighlight\" | sqMessage}}\n        </div>\n    </ng-container>\n    <ng-template #normalCase>\n        <div class=\"card-body\">\n            <div class=\"currentSelection\">\n                <div class=\"selectedHighlightTitle\">{{\"msg#preview.selectedHighlight\" | sqMessage}}:</div>\n                <div class=\"currentSelectionPanel\">\n                    <div *ngIf=\"currentValue || currentCategories; else noSelection\" class=\"selectedHighlight\">\n                        <div class=\"currentCategories\">\n                            <span *ngFor=\"let categoryId of currentCategories\">\n                                <span class=\"fas fa-bullseye {{ categoryIconClass(categoryId) }} {{ categoryId }}\"></span>\n                                <span class=\"currentCategoryLabel\">{{categoryDisplayLabel(categoryId) | sqMessage: categoryLabelPipeParams(categoryId)}}</span>\n                            </span>\n                        </div>\n                        <div class=\"selectedHighlightValue\" [innerHTML]=\"currentValue\"></div>\n                    </div>\n                    <ng-template #noSelection>\n                        <div class=\"noSelectionMessage\">\n                            {{\"msg#preview.noSelectedHighlight\" | sqMessage}}\n                        </div>\n                        <div>&nbsp;</div>\n                    </ng-template>\n                </div>\n            </div>\n            <div class=\"navigation-buttons\">\n                <button class=\"btn btn-secondary\" [disabled]=\"!previewReady\" (click)=\"first()\" title=\"{{'msg#preview.firstHighlightButtonAltText' | sqMessage}}\">\n                    <span class=\"fas fa-fast-backward\"></span>\n                </button>\n                <button class=\"btn btn-secondary\" [disabled]=\"!previewReady\" (click)=\"previous()\" title=\"{{'msg#preview.previousHighlightButtonAltText' | sqMessage}}\">\n                    <span class=\"fas fa-step-backward\"></span>\n                </button>\n                <div class=\"counter-container\">\n                    <span class=\"counter\">{{current | sqNumber}} / {{total | sqNumber}}</span>\n                    <span class=\"counter ghost\">{{total | sqNumber}} / {{total | sqNumber}}</span>\n                </div>\n                <button class=\"btn btn-secondary\" [disabled]=\"!previewReady\" (click)=\"next()\" title=\"{{'msg#preview.nextHighlightButtonAltText' | sqMessage}}\">\n                    <span class=\"fas fa-step-forward\"></span>\n                </button>\n                <button class=\"btn btn-secondary\" [disabled]=\"!previewReady\" (click)=\"last()\" title=\"{{'msg#preview.lastHighlightButtonAltText' | sqMessage}}\">\n                    <span class=\"fas fa-fast-forward\"></span>\n                </button>\n            </div>\n        </div>\n        <div class=\"card-body filterPanel\">\n            <div class=\"filterPanelTitle\">\n                <span class=\"fas fa-filter\"></span>{{ \"msg#preview.highlightFilters.title\" | sqMessage }}\n            </div>\n            <div class=\"batchSelectButtonsContainer\" *ngIf=\"nonEmptyCategoryIds.length > 1\">\n                <div class=\"batchSelectButtonsPaddingPlaceholder\"></div>\n                <div class=\"batchSelectButtonsPaddingPlaceholder\"></div>\n                <div class=\"batchSelectButtons\">\n                    <div class=\"batchSelectButton\">\n                        <button class=\"btn\" [disabled]=\"!previewReady || this.allSelected\" (click)=\"selectAll()\"\n                                title=\"{{'msg#preview.highlightFilters.keepAll' | sqMessage}}\">\n                            <span class=\"far fa-check-square\"></span>\n                            {{\"msg#preview.highlightFilters.keepAll\" | sqMessage}}\n                        </button>\n                    </div>\n                    <div class=\"batchSelectButton\">\n                        <button class=\"btn\" [disabled]=\"!previewReady || this.noneSelected\" (click)=\"selectNone()\"\n                                title=\"{{'msg#preview.highlightFilters.keepNone' | sqMessage}}\">\n                            <span class=\"fas fa-times\"></span>\n                            {{\"msg#preview.highlightFilters.keepNone\" | sqMessage}}\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"filters\">\n                <div *ngFor=\"let categoryId of nonEmptyCategoryIds\" class=\"sq-highlight\">\n                    <div class=\"categoryIcon\">\n                        <span class=\"fas fa-bullseye {{ categoryIconClass(categoryId) }} {{ categoryId }}\"></span>\n                    </div>\n                    <div class=\"categoryLabel\">\n                        {{getCategoryHighlightData(categoryId)?.categoryDisplayLabelPlural | sqMessage: categoryLabelPipeParams(categoryId)}}:\n                    </div>\n                    <div class=\"categoryFilter\">\n                        <ng-container *ngIf=\"categoryHasMultipleValues(categoryId); else singleValue\">\n                            <select class=\"custom-select\" [(ngModel)]=\"navigationState.filters[categoryId]\" [compareWith]=\"compareFilters\" (ngModelChange)=\"selectFilter(categoryId, $event)\">\n                                <option [ngValue]=\"keepAllFilter\">{{getCategoryHighlightData(categoryId)?.categoryFilterAllLabel | sqMessage}} ({{getHighlightValueCount(categoryId) | sqNumber}})</option>\n                                <option [ngValue]=\"keepNoneFilter\">{{getCategoryHighlightData(categoryId)?.categoryFilterNoneLabel | sqMessage}}</option>\n                                <option class=\"selectSeparator\" disabled>&nbsp;</option>\n                                <option *ngFor=\"let entityValue of this.getCategoryHighlightData(categoryId)?.values\" [ngValue]=\"newFilter(entityValue.value)\">{{entityValue.displayValue}}</option>\n                            </select>\n                        </ng-container>\n                        <ng-template #singleValue>\n                            <select class=\"custom-select\" [(ngModel)]=\"navigationState.filters[categoryId]\" [compareWith]=\"compareFilters\" (ngModelChange)=\"selectFilter(categoryId, $event)\">\n                                <option [ngValue]=\"keepAllFilter\">\n                                    {{getCategoryHighlightData(categoryId)?.categoryFilterAllLabel | sqMessage}}\n                                    <ng-container *ngIf=\"getCategoryHighlightData(categoryId)?.values[0].displayValue as displayValue\">\n                                        ({{displayValue}})\n                                    </ng-container>\n                                </option>\n                                <option [ngValue]=\"keepNoneFilter\">{{getCategoryHighlightData(categoryId)?.categoryFilterNoneLabel | sqMessage}}</option>\n                            </select>\n                        </ng-template>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-template>\n</div>","import {Injectable, Inject} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {flatMap} from \"rxjs/operators\";\nimport {OauthService, SharedService, PopupService, ConfigService} from \"ng2-ui-auth\";\nimport {START_CONFIG, StartConfig} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * Override ng2-ui-auth's state handling to retrieve a state from the Sinequa server\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AuthenticationOauthService extends OauthService {\n    constructor(\n        @Inject(START_CONFIG) protected startConfig: StartConfig,\n        protected httpClient: HttpClient,\n        protected sharedService: SharedService,\n        protected popupService: PopupService,\n        protected configService: ConfigService) {\n        super(httpClient, sharedService, configService, popupService);\n    }\n\n    authenticate<T extends object | string>(name: string, userData: any): Observable<T> {\n        const options = this.configService.options.providers[name];\n        if (options.sqInitState) {\n            return this.httpClient.get<{state: string}>(Utils.addUrl(this.startConfig.apiPath!, \"oauth\"), {\n                params: Utils.makeHttpParams({\n                    action: \"initstate\",\n                    provider: options.name,\n                    tokenInCookie: true,\n                    loginInPopup: true,\n                    noUserOverride: true,\n                    noAutoAuthentication: true\n                })\n            }).pipe<T>(flatMap<{state: string}, Observable<T>>((ret) => {\n                options.state = ret.state;\n                return super.authenticate(name, userData);\n            }));\n        }\n        return super.authenticate(name, userData);\n    }\n}\n","export * from \"./baskets.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export default {\n    \"facet\": {\n        \"showFacetTextView\": \"Show text\",\n        \"showFacetChartView\": \"Show chart\",\n        \"itemExclude\": \"Exclude\",\n        \"applyFilters\": \"{selections, plural, one {Apply filter} other {Apply filters}}\",\n        \"clearFilters\": \"{selected, plural, one {Clear filter} other {Clear filters}}\",\n        \"loadMore\": \"Load more\",\n        \"showMore\": \"Show more\",\n        \"showLess\": \"Show less\",\n        \"displayed\": \"Displayed\",\n        \"removeAll\": \"Remove all\",\n        \"searchPlaceholder\": \"Search...\",\n        \"itemSelect\": \"Select this value\",\n        \"itemUnselect\": \"Unselect this value\",\n        \"filterItem\": \"Keep documents with {terme}\",\n        \"filterItems\" : \"Keep documents with ANY of the selected items\",\n        \"filterItemsAnd\": \"Keep documents with ALL the selected items\",\n        \"excludeItems\" : \"Exclude document with selected items\",\n        \"clearSelects\" : \"Clear the current filters\",\n        \"searchItems\" : \"Search for a value in this list\",\n        \"searchNoResult\": \"No results\",\n        \"openItem\": \"Open\",\n        \"closeItem\": \"Close\",\n        \"authors\": {\n            \"title\": \"Authors\"\n        },\n        \"concepts\": {\n            \"title\": \"Concepts\"\n        },\n        \"company\": {\n            \"title\": \"Companies\"\n        },\n        \"docformat\": {\n            \"title\": \"Formats\"\n        },\n        \"doctype\": {\n            \"title\": \"Document Types\"\n        },\n        \"documentlanguages\": {\n            \"title\": \"Languages\"\n        },\n        \"fileext\": {\n            \"title\": \"File Extensions\"\n        },\n        \"filename\": {\n            \"title\": \"Filenames\"\n        },\n        \"geo\": {\n            \"title\": \"Places\"\n        },\n        \"matchingpartnames\": {\n            \"title\": \"Matching Partnames\"\n        },\n        \"modified\": {\n            \"title\": \"Dates\"\n        },\n        \"person\": {\n            \"title\": \"People\"\n        },\n        \"refine\": {\n            \"title\": \"Refine Search\",\n            \"input\": {\n                \"label\": \"Refine\",\n                \"buttonTitle\": \"Refine\",\n                \"placeholder\": \"Refine by...\"\n            }\n        },\n        \"size\": {\n            \"title\": \"Sizes\"\n        },\n        \"tagcloud\": {\n            \"title\": \"Tag Cloud\"\n        },\n        \"title\": {\n            \"title\": \"Titles\"\n        },\n        \"treepath\": {\n            \"title\": \"Sources\"\n        },\n        \"recentQueries\": {\n            \"title\": \"Recent queries\"\n        },\n        \"recentQueriesPublic\": {\n            \"title\": \"Public recent queries\"\n        },\n        \"mySearch\": {\n            \"title\": \"My Search\",\n            \"itemRemove\": \"Remove\"\n        },\n        \"search\": {\n            \"label\": \"Search\",\n            \"buttonTitle\": \"Search\",\n            \"placeholder\": \"Search...\",\n            \"showSearchForm\": \"Show search form\",\n            \"hideSearchForm\": \"Hide search form\"\n        },\n        \"range\": {\n            \"year\": \"{date, date, sqYear}\",\n            \"monthYear\": \"{date, date, sqMonthYear}\",\n            \"weekYear\": \"W{week, number, sqWeek} {weekYear, number, sqYear}\",\n            \"apply\": \"Apply\",\n            \"clear\": \"Clear\",\n            \"unavailable\": \"No available range\"\n        },\n\n        \"filters\":{\n            \"add\":\"Add facet\",\n            \"addAll\": \"Add all facets\",\n            \"remove\":\"Remove facet\",\n            \"removeAll\": \"Remove all facets\",\n            \"clear\":\"Clear filter\",\n            \"moreFilters\":\"\",\n            \"showFilters\":\"Show filters\",\n            \"hideFilters\":\"Hide filters\",\n\n            \"back\": \"Back to filters\",\n            \"selectedFilters\": \"This filter is active in the current query\",\n\n            \"customizeFacets\": \"Select facets to display or hide\"\n        },\n\n        \"selectedValue\": \"This value is selected in the current query\",\n        \"previous\": \"Previous\",\n        \"next\": \"Next\",\n        \"filterItemCountTooltip\": \"{count} possible values for this filter\",\n    },\n\n    \"facetCard\": {\n        \"expand\": \"Expand\",\n        \"collapse\": \"Collapse\",\n        \"enlarge\": \"Enlarge\",\n        \"reduce\": \"Reduce\",\n        \"openSettings\": \"Open settings\",\n        \"saveSettings\": \"Save settings\"\n    }\n};\n","import { Component, Input, OnChanges, SimpleChanges, OnDestroy, Output, EventEmitter, Optional, DoCheck } from \"@angular/core\";\nimport { IntlService } from \"@sinequa/core/intl\";\nimport { Results, Aggregation, AggregationItem } from '@sinequa/core/web-services';\nimport { UIService } from \"@sinequa/components/utils\";\nimport { FacetService, AbstractFacet, BsFacetCard } from \"@sinequa/components/facet\";\nimport { Action } from '@sinequa/components/action';\nimport { Utils } from '@sinequa/core/base';\nimport { Subscription } from 'rxjs';\nimport { SelectionService } from '@sinequa/components/selection';\nimport { AppService } from '@sinequa/core/app-utils';\n\n\nexport const defaultChart = {\n    \"theme\": \"fusion\",\n    \"labelDisplay\": \"rotate\",\n    \"slantLabel\": \"1\"\n}\n\n@Component({\n    selector: \"sq-fusion-chart\",\n    templateUrl: \"./chart.html\",\n    styleUrls: [\"./chart.scss\"]\n})\nexport class FusionChart extends AbstractFacet implements OnChanges, OnDestroy, DoCheck {\n    @Input() results: Results;\n    @Input() aggregation: string;\n    @Input() aggregations?: string[];\n    \n    @Input() width: string = '100%';\n    @Input() height: string = '350';\n    @Input() type: string = 'Column2D';\n    @Input() types?: {type: string, display: string}[];\n    @Input() chart: any = defaultChart;\n    @Input() autohide = true;\n\n    /** Leave the default color undefined to use the color scheme of FusionCharts */\n    @Input() defaultColor?: string;\n    /** Filtered items appear in a different color. Set to undefined use FusionCharts's color scheme */\n    @Input() filteredColor: string = \"#C3E6CB\";\n    /** Items that belong in a selected document appear in a different color. Set to undefined use FusionCharts's color scheme */\n    @Input() selectedColor: string = \"#8186d4\";\n\n    @Output() initialized = new EventEmitter<any>();\n    @Output() aggregationChange = new EventEmitter<string>();\n    @Output() typeChange = new EventEmitter<string>();\n    \n    // A flag to wait for the parent component to actually display this child, since creating\n    // the fusionchart component without displaying causes strange bugs...\n    ready = false;\n\n    chartObj: any;\n\n    data?: Aggregation;\n    dataSource: any = {};\n    \n    private readonly selectedValues = new Set<string>();\n\n    // Actions (displayed in facet menu)\n    // All actions are built in the constructor\n    private readonly clearFilters: Action;\n    private readonly selectField: Action;\n    private readonly selectType: Action;\n\n    // Subscriptions\n    private localeChange: Subscription;\n    private selectionChange: Subscription;\n    \n    constructor(\n        public intlService: IntlService,\n        public uiService: UIService,\n        public facetService: FacetService,\n        public selectionService: SelectionService,\n        public appService: AppService,\n        @Optional() public cardComponent: BsFacetCard\n    ) {\n        super();\n        \n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                this.facetService.clearFiltersSearch(this.getName(), true);\n            }\n        });\n\n        this.selectField = new Action({\n            title: \"Select field\",\n            updater: (action) => {\n                if(this.aggregations){\n                    action.text = this.aggregation;\n                    action.children = this.aggregations\n                        .filter(v => v!==this.aggregation)\n                        .map(agg => {\n                            return new Action({\n                                text: agg,\n                                action : (item, event) => {\n                                    this.aggregation = agg;\n                                    this.aggregationChange.next(agg);\n                                    this.selectField.update();\n                                    this.updateData();\n                                }\n                            });\n                        });\n                }\n            }\n        });\n\n        this.selectType = new Action({\n            title: \"Select field\",\n            updater: (action) => {\n                if(this.types){\n                    action.text = this.types.find(t => t.type === this.type)?.display!;\n                    action.children = this.types\n                        .filter(t => t.type !== this.type)\n                        .map(t => {\n                            return new Action({\n                                text: t.display,\n                                action : (item, event) => {\n                                    this.type = t.type;\n                                    this.chartObj.chartType(this.type);\n                                    this.typeChange.next(t.type);\n                                    this.selectType.update();\n                                }\n                            });\n                        });\n                }\n            }\n        });\n\n        this.localeChange = this.intlService.events.subscribe(event => {\n            this.updateData();\n        });\n        this.selectionChange = this.selectionService.events.subscribe(event => {\n            this.updateData();\n        });\n    }\n\n    ngOnDestroy() {\n        this.localeChange.unsubscribe();\n        this.selectionChange.unsubscribe();\n    }\n\n    \n    /**\n     * Name of the facet, used to create and retrieve selections\n     * through the facet service.\n     */\n    getName() : string {\n        return this.aggregation;\n    }\n\n    /**\n     * Returns all the actions that are relevant in the current context\n     */\n    get actions(): Action[] {\n        const actions: Action[] = [];\n        if(this.hasFiltered()) {\n            actions.push(this.clearFilters);\n        }\n        if(this.aggregations && this.aggregations.length > 0) {\n            actions.push(this.selectField);\n        }\n        if(this.types) {\n            actions.push(this.selectType);\n        }\n        return actions;\n    }\n\n    /**\n     * Returns true if there is an active selection (or exclusion) from this facet\n     */\n    hasFiltered(): boolean {\n        return this.facetService.hasFiltered(this.getName());\n    }\n    \n\n    ngOnChanges(changes: SimpleChanges) {\n        this.selectField.update();\n        this.selectType.update();\n\n        if(changes['results']) {\n            this.updateData();\n        }\n        if(changes['chart'] || !this.dataSource.chart) {\n            this.dataSource.chart = this.chart;\n        }\n    }\n\n    ngDoCheck(){\n        // We check that the parent component (if any) as been expanded at least once so that the fusioncharts\n        // gets created when it is visible (otherwise, there can be visual bugs...)\n        this.ready = !this.cardComponent?._collapsed;\n    }\n\n    updateData() {\n        // Get aggregation from the facet service\n        this.data = this.facetService.getAggregation(this.aggregation, this.results);\n\n        // Update the set of selected values (for chart coloring)\n        this.updateSelectedValues();\n\n        // Create the dataSource.data object, including the custom coloring\n        this.dataSource.data = this.data?.items?.map(item => {\n            const isSelected = this.selectedValues.has(Utils.toSqlValue(item.value).toLowerCase()) && this.selectedColor;\n            const isFiltered = this.isFiltered(item) && this.filteredColor;\n            return {\n                label: this.facetService.formatValue(item),\n                value: \"\"+item.count,\n                color: isFiltered? this.filteredColor : isSelected? this.selectedColor : this.defaultColor\n            };\n        });\n    }\n\n    isHidden(): boolean {\n        return this.autohide && !this.dataSource.data?.length;\n    }\n    \n    /**\n     * Event triggered on initialization of the fusion chart\n     * @param $event \n     */\n    onInitialized($event) {\n        this.chartObj = $event.chart; // saving chart instance\n        this.initialized.next(this.chartObj);\n    }\n\n    /**\n     * Event triggered when the user clicks on the plot, on a data element.\n     * We create a filter for the clicked element.\n     * @param $event \n     */\n    dataplotClick($event) {\n        if (this.data) {\n            const item = this.getItem($event.dataObj.index);\n            if (item) {\n                if(!this.isFiltered(item))\n                    this.facetService.addFilterSearch(this.getName(), this.data, item);\n                else\n                    this.facetService.removeFilterSearch(this.getName(), this.data, item);\n            }\n        }\n    }\n    \n    /**\n     * Returns true if the given AggregationItem is filtered\n     * @param item\n     */\n    isFiltered(item: AggregationItem) : boolean {\n        return !!this.data && this.facetService.itemFiltered(this.getName(), this.data, item);\n    }\n    \n    /**\n     * Get the aggregation item based on its index\n     * @param index \n     */\n    getItem(index: number): AggregationItem | undefined {\n        return this.data && this.data.items? this.data.items[index] : undefined;\n    }\n\n    \n    /**\n     * Update selected values (the value in the aggregation that belong to a selected document)\n     */\n    private updateSelectedValues(){\n        this.selectedValues.clear();\n        this.results.records\n            .filter(record => record.$selected)\n            .forEach(record => {\n                if(this.data){\n                    const val = record[this.appService.getColumnAlias(this.appService.getColumn(this.data.column))];\n                    if(val){\n                        if(Utils.isString(val)){    // Sourcestr\n                            this.selectedValues.add(val.toLowerCase());\n                        }\n                        if(Utils.isArray(val)){\n                            val.forEach(v => {\n                                if(Utils.isString(v))\n                                    this.selectedValues.add(v.toLowerCase()); // Sourcecsv\n                                else\n                                    this.selectedValues.add(v.value.toLowerCase()); // Entity\n                            });\n                        }\n                    }\n                }\n            });\n    }\n}","<fusioncharts *ngIf=\"ready\"\n    width=\"{{width}}\"\n    height=\"{{height}}\"\n    type=\"{{type}}\"\n    [dataSource]=\"dataSource\"\n    (initialized)=\"onInitialized($event)\"\n    (dataplotClick)=\"dataplotClick($event)\"\n    >\n</fusioncharts>","import {Component, Input, Output, HostBinding, OnChanges, SimpleChanges, EventEmitter} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AppService, FormatService, ValueItem} from \"@sinequa/core/app-utils\";\nimport {Record, EntityItem, DocumentAccessLists, CCColumn} from \"@sinequa/core/web-services\";\nimport {FacetService} from \"@sinequa/components/facet\";\n\nexport interface TreeValueItem extends ValueItem {\n    parts: ValueItem[];\n}\n\n@Component({\n    selector: \"sq-metadata-item\",\n    templateUrl: \"./metadata-item.html\",\n    styleUrls: ['./metadata-item.scss']\n})\nexport class MetadataItem implements OnChanges {\n    @Input() record: Record;\n    @Input() item: string;\n    @Input() showTitle = true;\n    @Input() showIcon: boolean = false;\n    @Input() showCounts: boolean = true;\n    @Input() clickable: boolean = true;\n    @Input() tabular: boolean = true;\n    @Input() collapseRows: boolean = true;\n    @Output(\"select\") _select = new EventEmitter<{item: string, valueItem: ValueItem}>();\n    @HostBinding('hidden') get hidden(): boolean { return this.isEmpty; }\n    valueItems: (ValueItem | TreeValueItem)[];\n    column: CCColumn | undefined;\n    isTree: boolean;\n    isEntity: boolean;\n    isCsv: boolean;\n    itemLabelMessageParams: any;\n    collapsed: boolean;\n    needsCollapse: boolean = false;\n\n    constructor(\n        public appService: AppService,\n        public formatService: FormatService) {\n        this.valueItems = [];\n    }\n\n    ensureScalarValue(value: any): any {\n        if (Utils.isEmpty(value) && this.column) {\n            if (AppService.isBoolean(this.column)) {\n                value = 'msg#metadata.item.empty_boolean';\n            }\n            else if (AppService.isNumber(this.column)) {\n                value = 'msg#metadata.item.empty_number';\n            }\n        }\n        return value;\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.column) {\n            this.column = this.appService.getColumn(this.item);\n            this.itemLabelMessageParams = {values: {label: this.label}};\n        }\n        this.valueItems = [];\n        this.isTree = !!this.column && AppService.isTree(this.column);\n        this.isEntity = !!this.column && AppService.isEntity(this.column);\n        this.isCsv = !!this.column && AppService.isCsv(this.column);\n        const values = this.record[this.appService.getColumnAlias(this.column, this.item)];\n        if (this.isTree) {\n            const paths: string[] = values;\n            if (paths) {\n                for (const path of paths) {\n                    const parts = path.split(\"/\");\n                    if (parts.length > 0 && parts[0] === \"\") {\n                        parts.splice(0, 1);\n                    }\n                    if (parts.length > 0 && parts[parts.length - 1] === \"\") {\n                        parts.splice(parts.length - 1, 1);\n                    }\n                    const item: TreeValueItem = {value: path, parts: parts.map(value => ({value: value}))};\n                    this.valueItems.push(item);\n                }\n            }\n        }\n        else if (this.isEntity) {\n            const entityItems: EntityItem[] = values;\n            if (entityItems) {\n                this.valueItems.push(...entityItems);\n            }\n        }\n        else if (this.isCsv) {\n            if (values && values instanceof Array) {\n                this.valueItems.push(...values.map<ValueItem>(value => ({value: value})));\n            }\n            else if (!Utils.isEmpty(values)) {\n                this.valueItems.push({value: values});\n            }\n        }\n        else {\n            const value = this.ensureScalarValue(values);\n            if (!Utils.isEmpty(value)) {\n                this.valueItems.push({value: value});\n            }\n        }\n        \n        const collapsable = (this.isEntity || this.isCsv) && !this.isTree; // Tree columns are multivalues, and therefore isCsv=true\n        if (changes.collapseRows || this.collapsed === undefined) {\n            this.collapsed = collapsable && this.collapseRows;\n        }\n        this.needsCollapse = collapsable && this.collapseRows && this.tabular && this.valueItems.length > 1; // We display the collapse button as soon as the number of values is >1 which does not take into account the actualy width of each value...\n    }\n\n    public get isEmpty(): boolean {\n        if (!this.item) {\n            return true;\n        }\n        if (this.item === \"accesslists\") {\n            if (!this.record.accesslists || !this.record.accesslists.accessListIndices\n                || this.record.accesslists.accessListIndices.length === 0) {\n                return true;\n            }\n        }\n        else {\n            if (this.valueItems.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public get itemClasses(): string {\n        let classes = \"sq-text\";\n        if (this.clickable) {\n            classes += \" sq-clickable\";\n        }\n        if (this.tabular) {\n            classes += \" sq-tabular\";\n        }\n        return classes;\n    }\n\n    public get label(): string {\n        return this.appService.getLabel(this.item);\n    }\n\n    public get isAccessLists(): boolean {\n        return this.item === \"accesslists\";\n    }\n\n    public get accessListsData(): DocumentAccessLists {\n        return this.record.accesslists;\n    }\n\n    public get docFormatIconClass(): string {\n        if (this.item == null || this.item !== \"docformat\" && this.item !== \"fileext\") {\n            return \"\";\n        }\n        const value: string = this.record[this.item];\n        if (!value) {\n            return \"far fa-file\";\n        }\n        return \"far fa-file sq-icon-file-\" + value;\n    }\n\n    select(index: number, subIndex = 0) {\n        if (this.isTree) {\n            const valueItem = <TreeValueItem>this.valueItems[index];\n            const parts = valueItem.parts.map((item) => item.value).slice(0, subIndex + 1);\n            if (parts.length > 0) {\n                parts.unshift(\"\");\n                parts.push(\"\");\n            }\n            const path = parts.join(\"/\");\n            this._select.emit({item: this.item, valueItem: {value: path + \"*\", display: FacetService.treepathLast(path)}});\n        }\n        else {\n            this._select.emit({item: this.item, valueItem: this.valueItems[index]});\n        }\n        return false; // prevent default\n    }\n\n    toggleCollapse() {\n        this.collapsed = !this.collapsed;\n        return false;\n    }\n}\n","<div *ngIf=\"!isEmpty\" class=\"sq-metadata-item {{itemClasses}}\">\n    <!-- Icon -->\n    <span *ngIf=\"showIcon && !!item\" class=\"sq-metadata-item-icon sq-icon-{{item}} {{docFormatIconClass}} fa-fw pr-2\"\n        [title]=\"label | sqMessage\">\n    </span>\n\n    <!-- Label (title)-->\n    <span *ngIf=\"showTitle && !!item\" class=\"sq-metadata-item-label pr-2\">{{'msg#metadata.item.label' | sqMessage:itemLabelMessageParams}}</span>\n    \n    <span class=\"sq-metadata-item-values\" [ngClass]=\"{collapsed: !!collapsed}\" #values>\n        <!-- Collapse button -->\n        <a *ngIf=\"collapseRows && needsCollapse\" href=\"#\" (click)=\"toggleCollapse()\" class=\"collapse-button mr-1\">\n            <i class=\"fas fa-fw fa-chevron-{{collapsed? 'right' : 'down'}}\"></i>\n        </a>\n        \n        <!-- Access list metadata -->\n        <sq-metadata-access-lists-item *ngIf=\"isAccessLists; else default\" [accessLists]=\"accessListsData\">\n        </sq-metadata-access-lists-item>\n\n        <!-- Other types of metadata -->\n        <ng-template #default>\n            <ng-container *ngIf=\"isTree; else isNotTree\">\n                <!-- Tree (displayed as breadcrumbs)-->\n                <ng-container *ngFor=\"let valueItem of valueItems; let $index = index\">\n                    <ol class=\"breadcrumb\" *ngIf=\"!!valueItem.parts && valueItem.parts.length > 0\">\n                        <li *ngFor=\"let part of valueItem.parts; let $subIndex = index\">\n                            <a    *ngIf=\"clickable\"  class=\"badge badge-pill\" [ngClass]=\"'sq-metadata-item-' + item\" href=\"#\" (click)=\"select($index, $subIndex)\">{{part | sqValue:column}}</a>\n                            <span *ngIf=\"!clickable\" [ngClass]=\"'sq-metadata-item-' + item\">{{part | sqValue:column}}</span>\n                            <span *ngIf=\"$subIndex < valueItem.parts.length - 1\" class=\"sq-metadata-item-tree-node-separator\">{{'msg#metadata.item.treeNodeSeparator' | sqMessage}}</span>\n                        </li>\n                    </ol>\n                    <span *ngIf=\"$index < valueItems.length - 1\" class=\"sq-metadata-item-tree-separator\">{{'msg#metadata.item.treeSeparator' | sqMessage}}</span>\n                </ng-container>\n            </ng-container>\n\n            <!-- Not a Tree-->\n            <ng-template #isNotTree>\n                <ng-container *ngIf=\"clickable; else notTreeNonClickable\">\n                    <!-- Clickable -->\n                    <a  *ngFor=\"let valueItem of valueItems; let $index = index\"\n                        class=\"badge badge-pill {{'sq-metadata-item-' + item}} mr-1\"\n                        href=\"#\"\n                        (click)=\"select($index)\"\n                        [attr.title]=\"showTitle? null : (label | sqMessage)\">{{valueItem | sqValue:column}}\n                        <span *ngIf=\"showCounts && valueItem.count\"\n                            class=\"counter badge badge-light ml-1\"\n                            [title]=\"valueItem.count + ' occurrences in document'\">{{valueItem.count}}</span>\n                    </a>\n                </ng-container>\n                <ng-template #notTreeNonClickable>\n                    <!-- Not clickable-->\n                    <ng-container *ngFor=\"let valueItem of valueItems; let $index = index\">\n                        <span class=\"{{'sq-metadata-item-' + item}}\"\n                            [attr.title]=\"showTitle? null : (label | sqMessage)\">{{valueItem | sqValue:column}}\n                            <span *ngIf=\"showCounts && valueItem.count\"\n                                class=\"small\"\n                                [title]=\"valueItem.count + ' occurrences in document'\">({{valueItem.count}})</span>\n                        </span>\n                        <span *ngIf=\"$index < valueItems.length - 1\" class=\"sq-metadata-item-list-separator\">{{'msg#metadata.item.listSeparator' | sqMessage}}</span>\n                    </ng-container>\n                </ng-template>\n            </ng-template>\n        </ng-template>\n    </span>\n    <ng-content></ng-content>\n</div>","import { ElementRef } from \"@angular/core\";\n\nimport { Utils } from \"@sinequa/core/base\";\n\nexport enum HighlightCategoryFilterChoice {\n    All, None, Value\n}\n\nexport interface HighlightCategoryFilterState {\n    choice: HighlightCategoryFilterChoice;\n    filterValue: string;\n}\n\nexport type HighlightFilters = { [key: string]: HighlightCategoryFilterState } | string[];\n\n// forEach on a NodeList is polyfilled for IE but not at all necessarily when the list comes from a document\n// in another frame. This function is used to perform the forEach taking this into account.\nfunction forEach<T extends Node>(nodeList: NodeListOf<T>, callbackfn: (value: T, key: number, parent: NodeListOf<T> | T[]) => void): void {\n    if (!nodeList.forEach) {\n        Array.from(nodeList).forEach(callbackfn);\n    }\n    else {\n        nodeList.forEach(callbackfn);\n    }\n}\n\n/**\n * This class offers an API to manipulate the HTML of a preview document.\n * - Insert elements dynamically in the DOM of the preview (eg. tooltips)\n * - Retrieve the text of entities or extracts\n * - Select the elements of entities or extracts (by altering their CSS classes)\n * - Highlight (or not) specific entities or categories in the HTML (by altering their CSS classes)\n */\nexport class PreviewDocument {\n\n    private static readonly SELECTED_HIGHLIGHT_CLASS: string = \"sq-current\";\n    private static readonly SELECTED_HIGHLIGHT_FIRST_FRAGMENT_CLASS: string = \"sq-first\";\n    private static readonly SELECTED_HIGHLIGHT_LAST_FRAGMENT_CLASS: string = \"sq-last\";\n    private static readonly FILTERED_OUT_HIGHLIGHT_CLASS: string = \"sq-inactive\";\n    private static readonly SVG_LINE_CLASS: string = \"sq-svg\";\n\n    private static readonly BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE = \"data-entity-basic\";\n    private static readonly ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE = \"data-entity-display\";\n\n    private readonly _window: Window;\n    private readonly _document: Document;\n    \n    private previousElement: HTMLElement | null;\n    \n    constructor(element: ElementRef | Document){\n        if (element instanceof ElementRef) {\n            this._window = element?.nativeElement?.contentWindow;\n            if (this._window?.frames && this._window.frames[\"frSheet\"]) {\n                this._window = this._window.frames[\"frSheet\"];  // aspose xls preview\n            }\n        } else {\n            this._document = element;\n        }\n    }\n\n\n    // PUBLIC METHODS\n\n    /**\n     * Return the Window of the iframe containing the element\n     */\n    public getContentWindow(): Window {\n        return this._window;\n    }\n\n    /**\n     * Returns the root Document element of the HTML Preview\n     */\n    public get document(): Document {\n        return this._document || this._window.document;\n    }\n\n    /**\n     * Insert a given DOM Element in the body of the document preview\n     * @param component\n     */\n    public insertComponent(component){\n        this.document.body.appendChild(component);\n    }\n\n    /**\n     * Returns the text of a given entity\n     * @param categoryId Category of the entity\n     * @param index Index of the entity in that category\n     */\n    public getHighlightText(categoryId: string, index: number) : string {\n        if (index < 0) {\n            return \"\";\n        }\n        const nodes = this.document.querySelectorAll(\"#\"+categoryId + \"_\" + index);\n        if (!nodes || nodes.length === 0) {\n            return \"\";\n        }\n        let text = \"\";\n        forEach(nodes, n => text += (n['innerHTML'] || n.textContent));\n        return text;\n    }\n\n    /**\n     * Update the location of the entities' SVG background (for some converters)\n     */\n    public setSvgBackgroundPositionAndSize(): void {\n        const svgList: NodeListOf<Element> = this.document.querySelectorAll(\"svg\");\n        if (svgList != null) {\n            for (let i = 0, ic = svgList.length; i < ic; i++) {\n                const svg = svgList.item(i);\n                const tspanList: HTMLCollectionOf<SVGTSpanElement> = svg.getElementsByTagName(\"tspan\");\n                if (tspanList != null) {\n                    for (let j = 0, jc = tspanList.length; j < jc; j++) {\n                        const tspan = tspanList.item(j);\n                        if (tspan) {\n                            const bgId = tspan.getAttribute(\"data-entity-background\");\n                            if (bgId) {\n                                const rect = this.getFirst(this.getDocElements(bgId));\n                                if (rect) {\n                                    this.resizeSvgBackground(rect, tspan);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Select a specific entity by applying specific highlight classes\n     * to the DOM elements and scrolling the view to center around them.\n     * @param categoryId Category of the entity\n     * @param index Index of the entity in that category\n     */\n    public selectHighlight(categoryId: string, index: number) : void {\n        \n        this.clearHighlightSelection();\n        // current element becomes previous element\n        this.previousElement = this.document.getElementById(categoryId + '_' + index);\n        \n        if (this.previousElement) {\n            // highlight new selected element\n            this.setHighlightSelection(this.previousElement,true, true);\n            this.previousElement.scrollIntoView({block: 'center'});\n        }\n    }\n\n    /**\n     * Removes all entity selection classes from the document HTML elements\n     */\n    public clearHighlightSelection(): void {\n        // Clear HTML elements borders\n        if (this.previousElement) {\n            this.previousElement.classList.remove(PreviewDocument.SELECTED_HIGHLIGHT_CLASS);\n        }\n        // Clear SVG elements borders\n        const elements: NodeListOf<Element> = this.document.querySelectorAll(\"line.sq-svg\");\n        for (let i = 0; i < elements.length; i++) {\n            const parentNode = elements[i].parentNode;\n            if (parentNode) {\n                parentNode.removeChild(elements[i]);\n            }\n        }\n    }\n\n    /**\n     * Turns highlights on or off based on the provided filter object. Additionally clears the selected entity\n     * @param filters object where each key provides a filter for each category of entity/highlight\n     */\n    public filterHighlights(filters: HighlightFilters){\n\n        this.updateHighlightFilterState(filters);\n        this.clearHighlightSelection();\n    }\n\n    /**\n     * Loop through every highlighted element in the document and turn highlights on or off based on the filters object.\n     * If the filters object is an array then only the specified categories are highlighted.\n     * @param filters object where each key provides a filter for each category of entity/highlight\n     */\n    public updateHighlightFilterState(filters: HighlightFilters): void {\n        const elements = this.document.querySelectorAll(\"[data-entity-display], .extractslocations, .matchlocations\");\n        if (Utils.isArray(filters)) {\n            forEach<Element>(elements, element => {\n                const highlight = filters.some(category => element.classList.contains(category));\n                if (highlight) {\n                    element.classList.remove(PreviewDocument.FILTERED_OUT_HIGHLIGHT_CLASS);\n                }\n                else {\n                    element.classList.add(PreviewDocument.FILTERED_OUT_HIGHLIGHT_CLASS);\n                }\n            });\n        }\n        else {\n            forEach(elements, element => {\n                if (PreviewDocument.elementIsFilteredOut(element, filters)) {\n                    element.classList.add(PreviewDocument.FILTERED_OUT_HIGHLIGHT_CLASS);\n                }\n                else {\n                    element.classList.remove(PreviewDocument.FILTERED_OUT_HIGHLIGHT_CLASS);\n                }\n            });\n        }\n    }\n\n    /**\n     * Turns on/off the highlights of one category of entities or a specific value if provided\n     * @param category e.g. person\n     * @param on true for highlighting / false for turning off\n     * @param value e.g. \"BILL GATES\"\n     */\n    public toggleHighlight(category: string, on: boolean, value?: string) {\n        const elements = this.document.querySelectorAll(\".\"+category);\n        forEach(elements, element => {\n            if(!value\n                || (element.hasAttribute(PreviewDocument.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE) && value === element.getAttribute(PreviewDocument.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE))\n                || (element.hasAttribute(PreviewDocument.ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE) && value === element.getAttribute(PreviewDocument.ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE))) {\n\n                if(on){\n                    element.classList.remove(PreviewDocument.FILTERED_OUT_HIGHLIGHT_CLASS);\n                }\n                else{\n                    element.classList.add(PreviewDocument.FILTERED_OUT_HIGHLIGHT_CLASS);\n                }\n            }\n        });\n    }\n\n    // PRIVATE METHODS\n\n    private setHighlightSelection(elt: Element, isFirst: boolean, isLast: boolean): void {\n        if (this.isSvgElement(elt)) {\n            this.setHighlightSelectionSVG(elt, isFirst, isLast);\n        }\n        else {\n            this.setHighlightSelectionHTML(elt, isFirst, isLast);\n        }\n    }\n\n    private setHighlightSelectionHTML(elt: Element, isFirst: boolean, isLast: boolean): void {\n        elt.classList.add(PreviewDocument.SELECTED_HIGHLIGHT_CLASS);\n        if (isFirst) {\n            elt.classList.add(PreviewDocument.SELECTED_HIGHLIGHT_FIRST_FRAGMENT_CLASS);\n        }\n        if (isLast) {\n            elt.classList.add(PreviewDocument.SELECTED_HIGHLIGHT_LAST_FRAGMENT_CLASS);\n        }\n    }\n\n    private setHighlightSelectionSVG(elt: Element, isFirst: boolean, isLast: boolean): void {\n        const bgId = elt.getAttribute(\"data-entity-background\");\n        if (!bgId) return;\n        const rect: SVGRectElement = <SVGRectElement>this.getFirst(this.getDocElements(bgId));\n        const group = rect.parentNode;\n        const rectPosition = rect.getBBox();\n\n        if (group) {\n            const top = rectPosition.y;\n            const bottom = rectPosition.y + rectPosition.height;\n            const left = rectPosition.x;\n            const right = rectPosition.x + rectPosition.width;\n            const valueTransform = rect.getAttribute(\"transform\");\n            this.addSvgLine(group, left, top   , right, top   , valueTransform);\n            this.addSvgLine(group, left, bottom, right, bottom, valueTransform);\n            if (isFirst) this.addSvgLine(group, left , top, left , bottom, valueTransform);\n            if (isLast)  this.addSvgLine(group, right, top, right, bottom, valueTransform);\n        }\n    }\n\n    private addSvgLine(group: Node, x1: number, y1: number, x2: number, y2: number, transform: string | null): void {\n        const line: Element = this.document.createElementNS(\"http://www.w3.org/2000/svg\",\"line\");\n        line.setAttribute(\"class\", PreviewDocument.SVG_LINE_CLASS);\n        line.setAttribute(\"x1\", String(x1));\n        line.setAttribute(\"y1\", String(y1));\n        line.setAttribute(\"x2\", String(x2));\n        line.setAttribute(\"y2\", String(y2));\n        if (transform) line.setAttribute(\"transform\", transform);\n        group.appendChild(line);\n    }\n\n\n    private resizeSvgBackground(rect: Element, tspan: SVGTSpanElement): void {\n        let elt: Element = tspan;\n        while (elt.tagName !== \"text\") {\n            elt = elt.parentNode as Element;\n            if (elt == null) break;\n        }\n        const text: SVGTextElement = elt as SVGTextElement;\n        const textBoxPixel: ClientRect = text.getBoundingClientRect();\n        const textBoxSVG: SVGRect = text.getBBox();\n        if (textBoxPixel.height === 0 || textBoxPixel.width === 0) return;\n        const scaleX = textBoxSVG.width / textBoxPixel.width;\n        const scaleY = textBoxSVG.height / textBoxPixel.height;\n        const deltaX = 2 * scaleX;\n        const deltaY = 2 * scaleY;\n\n        const firstCharRect = tspan.getExtentOfChar(0);\n        const tspanWidth = tspan.getComputedTextLength();\n\n        rect.setAttribute(\"x\", String(firstCharRect.x - deltaX));\n        rect.setAttribute(\"y\", String(firstCharRect.y - deltaY));\n        rect.setAttribute(\"width\", String(tspanWidth + 2 * deltaX));\n        rect.setAttribute(\"height\", String(textBoxSVG.height + 2 * deltaY));\n        const valueTransform = text.getAttribute(\"transform\");\n        if (valueTransform) rect.setAttribute(\"transform\", valueTransform);\n    }\n\n    private getDocElements(id: string): Array<Element> {\n        const list = Array<Element>();\n        // Get HTML elements directly by id\n        const eltList: NodeListOf<Element> = this.document.querySelectorAll(\"#\" + id);\n        for (let i = 0; i < eltList.length; i++) {\n            list.push(eltList[i]);\n        }\n        // Get SVG tspan iterating on them (jquery querySelectorAll didn't return SVG inner elements)\n        const svgList: NodeListOf<Element> = this.document.querySelectorAll(\"svg\");\n        if (svgList != null) {\n            for (let i = 0, ic = svgList.length; i < ic; i++) {\n                const svg = svgList.item(i);\n                const tspanList: HTMLCollectionOf<SVGTSpanElement> = svg.getElementsByTagName(\"tspan\");\n                if (tspanList != null) {\n                    for (let j = 0, jc = tspanList.length; j < jc; j++) {\n                        const tspan = tspanList.item(j);\n                        if (tspan) {\n                            if (tspan.id === id) list.push(tspan);\n                        }\n                    }\n                }\n            }\n        }\n        return list;\n    }\n\n    private getFirst(nodes: Array<Element>): Element | null {\n        return (nodes != null && nodes.length > 0) ? nodes[0] : null;\n    }\n\n    private isSvgElement(elt: Element): boolean {\n        if (elt == null) return false;\n        return \"viewportElement\" in <any>elt;\n    }\n\n\n\n    // PRIVATE STATIC (from highlight helper)\n\n\n    private static elementIsFilteredOut(element: Element, filters: {[key: string]: HighlightCategoryFilterState}): boolean {\n        const elementClass: string = this.getElementCategory(element, Object.keys(filters));\n        if (elementClass == null) {\n            return false;\n        }\n        const filterState = filters[elementClass];\n        if (filterState == null) {\n            return false;\n        }\n        if (filterState.choice === HighlightCategoryFilterChoice.None) {\n            return true;\n        }\n        if (filterState.choice === HighlightCategoryFilterChoice.All) {\n            return false;\n        }\n        if (element.hasAttribute(PreviewDocument.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE)) {\n            return filterState.filterValue !== element.getAttribute(PreviewDocument.BASIC_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE);\n        }\n        return filterState.filterValue !== element.getAttribute(PreviewDocument.ADVANCED_ENTITY_DISPLAY_ELEMENT_ATTRIBUTE);\n    }\n\n    private static getElementCategory(element: Element, categoryIds: string[]): string {\n        for (const categoryId of categoryIds) {\n            if (element.classList.contains(categoryId)) {\n                return categoryId;\n            }\n        }\n        return \"\";\n    }\n}\n","import { Component, Input, OnChanges, HostBinding } from \"@angular/core\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { Record } from \"@sinequa/core/web-services\";\nimport { LabelsService } from \"./labels.service\";\nimport { AppService } from \"@sinequa/core/app-utils\";\n\n@Component({\n    selector: \"sq-labels\",\n    // We need the two spans to get whitespace between each label\n    // change size by adding h1-6 class to .sq-label div (default is h5)\n    templateUrl: \"./labels.component.html\",\n    styles: [\n        `\n            .sq-labels-public {\n                background-color: #4fc3f7;\n            }\n            .sq-labels-private {\n                background-color: #7283a7;\n            }\n            .sq-label-remove {\n                margin-left: 3px;\n            }\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class Labels implements OnChanges {\n    @Input() record: Record;\n    @Input() public: boolean;\n    @Input() enableDelete: boolean = false; /** Display the delete button in the label tag */\n\n    protected labelsField: string;\n    showLabels: boolean;\n    labels: string[];\n\n    @HostBinding(\"class\") hostClasses;\n\n    constructor(\n        private appService: AppService,\n        private labelsService: LabelsService\n    ) {}\n\n    ngOnChanges() {\n        const field = this.public\n            ? this.labelsService.publicLabelsField\n            : this.labelsService.privateLabelsField;\n        this.labelsField = this.appService.resolveColumnAlias(field);\n        this.showLabels = !!this.labelsField;\n        this.makeLabels();\n    }\n\n    private makeLabels() {\n        if (!this.showLabels) {\n            this.labels = [];\n            return;\n        }\n        const labels = this.record[this.labelsField];\n        if (Utils.isArray(labels)) {\n            this.labels = this.labelsService.sort(labels.slice(), this.public);\n        } else {\n            this.labels = [];\n        }\n    }\n\n    select(label: string) {\n        if (!this.public) {\n            label = <string>this.labelsService.removePrivatePrefix(label);\n        }\n        this.labelsService.selectLabels([label], this.public);\n    }\n\n    remove(index: number) {\n        if (this.canRemove()) {\n            let label = this.labels[index];\n            if (!this.public) {\n                label = <string>this.labelsService.removePrivatePrefix(label);\n            }\n            this.labelsService.removeLabels(\n                [label],\n                [this.record.id],\n                this.public\n            );\n        }\n    }\n\n    canRemove(): boolean {\n        return this.public\n            ? this.enableDelete &&\n                this.labelsService.allowPublicLabelsManagement &&\n                this.labelsService.userLabelsRights &&\n                this.labelsService.userLabelsRights.canManagePublicLabels\n            : this.enableDelete && true;\n    }\n}\n","<div *ngIf=\"showLabels\" class=\"d-inline\">\n    <span *ngFor=\"let label of labels; let $index = index\" class=\"d-inline\">\n        <div class=\"badge badge-pill badge-info align-self-center mr-1 d-inline\" [ngClass]=\"{'sq-labels-public': public, 'sq-labels-private': !public}\"\n            title=\"{{(public ? 'msg#labels.selectPublicLabelTitle' : 'msg#labels.selectPrivateLabelTitle') | sqMessage}}\">\n            <span (click)=\"select(label)\">{{label | sqLabel:public}}</span>\n            <i class=\"sq-label-remove fas fa-times-circle clickable\" (click)=\"remove($index)\" *ngIf=\"canRemove()\"\n                title=\"{{(public ? 'msg#labels.removePublicLabelTitle' : 'msg#labels.removePrivateLabelTitle') | sqMessage}}\">\n            </i>\n        </div>\n    </span>\n</div>\n","export * from \"./feedback-menu/feedback-menu\";\nexport * from \"./feedback.module\";","import {Component, Inject} from \"@angular/core\";\nimport {MODAL_MODEL, ConfirmOptions, ModalButton} from \"./modal.service\";\nimport {ModalRef} from \"./modal-ref\";\n\n@Component({\n    selector: \"sq-core-confirm\",\n    template: `\n        <div style=\"border: solid;padding: 16px;background-color: white;\" cdkTrapFocus [cdkTrapFocusAutoCapture]=\"true\">\n            <h3 style=\"margin-top: 0;\">{{title | sqMessage}}</h3>\n            <div>{{model.message | sqMessage:model.messageParams}}</div>\n            <hr>\n            <ng-container *ngFor=\"let button of model.buttons\">\n                <button *ngIf=\"button.visible\" type=\"{{button.primary ? 'submit' : 'button'}}\"\n                    (click)=\"buttonClick(button)\">{{button.getText() | sqMessage}}</button>\n            </ng-container>\n        </div>\n    `\n})\nexport class Confirm {\n    constructor(\n        @Inject(MODAL_MODEL) public model: ConfirmOptions,\n        protected modalRef: ModalRef) {\n    }\n\n    get title(): string {\n        return this.model.title ? this.model.title : \"msg#modal.confirm.title\";\n    }\n\n    buttonClick(button: ModalButton) {\n        button.click(this.modalRef);\n    }\n}\n","import {Injectable, Inject} from \"@angular/core\";\r\nimport {Observable} from \"rxjs\";\r\nimport {SqHttpClient} from \"./http-client\";\r\nimport {HttpService} from \"./http.service\";\r\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\r\nimport {IQuery} from \"./query/query\";\r\n\r\nexport interface QueryIntentResponse {\r\n    query: string;\r\n    intents: QueryIntentMatch[];\r\n}\r\n\r\nexport interface QueryIntentMatch {\r\n    /** name of the intent */\r\n    name: string;\r\n    /** global entities that match */\r\n    globalEntities?: QueryIntentEntity2[];\r\n    /** rule that match if exact match rule */\r\n    matchRule: string | null;\r\n    /** ml score or 1 if rule */\r\n    score: number;\r\n    /** ml confidence score or 1 if rule */\r\n    confidence: number;\r\n}\r\n\r\nexport interface QueryIntentEntity2 {\r\n    /** global entity name, eg. \"person\" */\r\n    name: string;\r\n    /** global entity type (entities are detected by classical NLP, slots are detected by ML) */\r\n    type: \"entity\" | \"slot\";\r\n    /** global entity resource */\r\n    resource: string;\r\n    /** text that match the global entity, eg. \"Bill gates\" */\r\n    value: string;\r\n    /** offset in the query */\r\n    offset: number;\r\n    /** length in the query */\r\n    length: number;\r\n    /** basic form if type=entity, eg. \"BILL GATES\"*/\r\n    basic: string | null;\r\n    /** normalization form if type=entity, eg. \"William H Gates\"*/\r\n    normalization: string | null;\r\n    /** score for the extraction if type=slot */\r\n    score?: number;\r\n}\r\n\r\n/**\r\n * A service for calling the queryintent web service\r\n */\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class QueryIntentWebService extends HttpService {\r\n    private readonly endpoint = \"queryintent\";\r\n\r\n    constructor(\r\n        @Inject(START_CONFIG) startConfig: StartConfig,\r\n        private httpClient: SqHttpClient) {\r\n        super(startConfig);\r\n    }\r\n\r\n    getQueryIntent(query: IQuery): Observable<QueryIntentResponse> {\r\n        const data = {\r\n            query,\r\n            app: this.appName\r\n        };\r\n        return this.httpClient.post<QueryIntentResponse>(\r\n            this.makeUrl(this.endpoint), data);\r\n    }\r\n}\r\n","export * from \"./public-api\";","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable, throwError} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {IQuery} from \"./query/query\";\nimport {Record} from \"./query.web.service\";\nimport {AuditEvents} from \"./audit.web.service\";\nimport {catchError, distinctUntilChanged, shareReplay} from \"rxjs/operators\";\n\n/**\n * Describes highlight data for a set of categories\n */\nexport interface HighlightDataPerCategory {\n    [key: string] : CategoryHighlightData;\n}\n\n/**\n * Describes highlight data for a category\n */\nexport interface CategoryHighlightData {\n    categoryDisplayLabel: string;\n    categoryDisplayLabelPlural: string;\n    categoryFilterAllLabel: string;\n    categoryFilterNoneLabel: string;\n    values: HighlightValue[];\n}\n\n/**\n * Describes a highlight value\n */\nexport interface HighlightValue {\n    value: string;\n    displayValue: string;\n    locations: Location[];\n}\n\n/**\n * Describes a single highlight location\n */\nexport interface Location {\n    start: number;\n    enclosingLength: number;\n}\n\n/**\n * Describes highlight data for a set of locations\n */\nexport interface HighlightDataPerLocation {\n    [index: number]: {\n        start: number,\n        length: number,\n        values: string[],\n        displayValue: string,\n        positionInCategories: { [category: string]: number }\n    };\n\n    size(): number;\n}\n\n/**\n * Describes the data returned by [PreviewWebService.get]{@link PreviewWebService#get}\n */\nexport interface PreviewData {\n    record: Record;\n    resultId: string;\n    cacheId: string;\n    highlightsPerCategory: HighlightDataPerCategory;\n    highlightsPerLocation: HighlightDataPerLocation;\n    documentCachedContentUrl: string;\n}\n\n/**\n * A service for calling the preview web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class PreviewWebService extends HttpService {\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Gets {@link PreviewData} for a document in the context of a {@link IQuery}\n     *\n     * @param id The document id\n     * @param query The query context\n     * @param auditEvents Audit events to store on the server\n     */\n    public get(id: string, query: IQuery, auditEvents?: AuditEvents): Observable<PreviewData> {\n        return this.httpClient.post<PreviewData>(this.makeUrl(\"preview\"), {\n            app: this.appName,\n            action: \"get\",\n            id,\n            query,\n            browserUrl: this.startConfig.browserUrl,\n            $auditRecord: auditEvents\n        }).pipe(shareReplay(1));\n    }\n    \n    /**\n     * Gets document's preview HTML content\n     * \n     * @param url The document preview URL\n     * @returns \n     */\n    public getHtmlPreview(url: string): Observable<any> {\n        return this.httpClient.get(url, {responseType: \"text\"}).pipe(\n            catchError(err => throwError(err)),\n            distinctUntilChanged(),\n            shareReplay(1)\n        );                \n    }\n}\n","export * from \"./edit-user-settings/edit-user-settings\";\nexport * from \"./user-settings-editor/user-settings-editor\";\nexport * from \"./user-settings.module\";\nexport * from \"./user-menu/user-menu.component\";","export * from \"./public-api\";","import {Inject, Injectable} from '@angular/core';\nimport {Observable, throwError} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * A generic service for invoking JsonMethod plugins\n */\n@Injectable({\n  providedIn: \"root\"\n})\nexport class JsonMethodPluginService extends HttpService{\n  constructor(\n    public httpClient: SqHttpClient,\n    @Inject(START_CONFIG) startConfig: StartConfig\n    ) {\n      super(startConfig);\n  }\n\n  /**\n   * Call a JsonMethod plugin using an HTTP POST\n   *\n   * @param method The name of the JsonMethod plugin\n   * @param query Parameters to pass to the plugin\n   * @param options HTTP options for the request\n   * @returns An observable of the plugin's return value\n   */\n  post(method: string, query: any, options?: {[key: string]: any}) : Observable<any> {\n    if (!Utils.isObject(query)) {\n      return throwError({error: \"invalid query object\"});\n    }\n    const observable = this.httpClient.post(this.makeUrl(method), query, options);\n\n    Utils.subscribe(observable,\n      (response) => {\n        console.log(\"JsonMethodPluginService.post success - data: \", response);\n      },\n      (error) => {\n        console.log(\"JsonMethodPluginService.post failure - error: \", error);\n      },\n      () => {\n        console.log(\"JsonMethodPluginService.post complete\");\n      });\n\n    return observable;\n  }\n\n  /**\n   * Call a JsonMethod plugin using an HTTP POST\n   *\n   * @param method The name of the JsonMethod plugin\n   * @param query Parameters to pass to the plugin\n   * @param options HTTP options for the request\n   * @returns An observable of the plugin's return value\n   */\n  call(method: string, query: any, options?: {[key: string]: any}): Observable<any> {\n    return this.post(method, query, options);\n  }\n\n  /**\n   * Call a JsonMethod plugin using an HTTP GET\n   *\n   * @param method The name of the JsonMethod plugin\n   * @param query Parameters to pass to the plugin\n   * @param options HTTP options for the request\n   * @returns An observable of the plugin's return value\n   */\n  get(method: string, query: any, options?: {[key: string]: any}): Observable<any> {\n    const observable = this.httpClient.get(this.makeUrl(method), {\n      params: this.makeParams(query),\n      ...options\n    });\n\n    Utils.subscribe(observable,\n      (response) => {\n        console.log(\"JsonMethodPluginService.get success - data: \", response);\n      },\n      (error) => {\n        console.log(\"JsonMethodPluginService.get failure - error: \", error);\n      },\n      () => {\n        console.log(\"JsonMethodPluginService.get complete\");\n      });\n\n    return observable;\n  }\n\n  makeUrl(api: string): string {\n    return super.makeUrl('plugin/' + api);\n  }\n}","import {LocaleData} from \"@sinequa/core/intl\";\nimport \"moment/locale/de\";\nimport d3Format from \"d3-format/locale/de-DE.json\";\nimport d3Time from \"d3-time-format/locale/de-DE.json\";\nimport {deCore} from \"@sinequa/core\";\nimport appMessages from \"./messages/de.json\";\nimport \"intl/locale-data/jsonp/de-DE\"; // Safari\nimport \"@formatjs/intl-relativetimeformat/dist/locale-data/de\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {deUtils} from \"@sinequa/components/utils\";\nimport {deAdvanced} from \"@sinequa/components/advanced\";\nimport {deAlerts} from \"@sinequa/components/alerts\";\nimport {deBaskets} from \"@sinequa/components/baskets\";\nimport {deFacet} from \"@sinequa/components/facet\";\nimport {deFeedback} from \"@sinequa/components/feedback\";\nimport {deHeatmap} from \"@sinequa/analytics/heatmap\";\nimport {deLabels} from \"@sinequa/components/labels\";\nimport {deMetadata} from \"@sinequa/components/metadata\";\nimport {deNotification} from \"@sinequa/components/notification\";\nimport {dePreview} from \"@sinequa/components/preview\";\nimport {deResult} from \"@sinequa/components/result\";\nimport {deResultsView} from \"@sinequa/components/results-view\";\nimport {deSavedQueries} from \"@sinequa/components/saved-queries\";\nimport {deSelection} from \"@sinequa/components/selection\";\nimport {deSearch} from \"@sinequa/components/search\";\nimport {deStatusBar} from \"@sinequa/components/status-bar\";\nimport {deUserSettings} from \"@sinequa/components/user-settings\";\nimport {deNetwork} from \"@sinequa/analytics/network\";\nimport {deGooglemaps} from \"@sinequa/analytics/googlemaps\";\nimport {deTheme} from \"@sinequa/components/theme-toggle\";\nimport {deFinance} from \"@sinequa/analytics/finance\";\n\nconst messages = Utils.merge({}, deCore, deUtils, deAdvanced, deAlerts, deBaskets, deFacet, deFeedback, deHeatmap, deLabels, deMetadata,\n    deNotification, dePreview, deResult, deResultsView, deSavedQueries, deSelection, deSearch, deStatusBar, deUserSettings, deNetwork, deGooglemaps, deFinance, appMessages,\n    deTheme);\n\nexport default <LocaleData>{\n    intl: {\n        locale: \"de-DE\"\n    },\n    moment: {\n        locale: \"de\"\n    },\n    d3: {\n        locale: \"de-DE\",\n        format: d3Format,\n        time: d3Time\n    },\n    messages: messages\n};","import {Injectable, InjectionToken, Inject, Type, OnDestroy} from \"@angular/core\";\nimport { HttpResponse } from '@angular/common/http';\nimport {Subject, Observable, throwError} from \"rxjs\";\nimport {UserSettingsWebService, QueryExportWebService, ExportSourceType, ExportOutputFormat,\n    DownloadWebService, AuditEvents, AuditEvent} from \"@sinequa/core/web-services\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {AppService, Query} from \"@sinequa/core/app-utils\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SelectionService} from \"@sinequa/components/selection\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {Action} from '@sinequa/components/action';\n\n\nexport interface SavedQuery {\n    name: string;\n    description?: string;\n    query: Query;\n}\n\n// from core/models/audit\nexport const enum SavedQueryEventType {\n    Loaded = \"SavedQuery_Loaded\",\n    Patched = \"SavedQuery_Patched\",\n\n    Add = \"SavedQuery_Add\",\n    Delete = \"SavedQuery_Delete\",\n    DeleteAll = \"SavedQuery_DeleteAll\",\n    Rename = \"SavedQuery_Rename\",\n    Update = \"SavedQuery_Update\",\n\n    Search = \"Search_SavedQuery\"\n}\n\n// Types of events triggering a change event\nexport const SAVED_QUERIES_CHANGE_EVENTS = [\n    SavedQueryEventType.Add,\n    SavedQueryEventType.Delete,\n    SavedQueryEventType.DeleteAll,\n    SavedQueryEventType.Rename,\n    SavedQueryEventType.Update\n];\n\n\n// CRUD Events\nexport interface SavedQueryChangeEvent {\n    type: SavedQueryEventType;\n    savedquery?: SavedQuery;\n}\n\n\n// Model expected by the ManageSavedQueries Modal.\nexport interface ManageSavedQueriesModel {\n    savedQueries: SavedQuery[];\n    auditEvents?: AuditEvent[];\n}\n\n// Data model of the Export dialog.\nexport interface ExportQueryModel {\n    format: ExportOutputFormat;\n    export: ExportSourceType;\n    webService: string;\n    maxCount?: number;\n    queryName?: string;\n    exportedColumns?: string[];\n}\n\n/**\n * The modal types are unknown to this service.\n * The module using this service must provide these components\n * in their forRoot() method\n *\n * Example below:\n *\n *     public static forRoot(): ModuleWithProviders<SavedQueriesModule> {\n        return {\n            ngModule: SavedQueriesModule,\n            providers: [\n                {\n                    provide: SAVEDQUERY_COMPONENTS,\n                    useValue: {\n                        editSavedQueryModal: EditSavedQuery,\n                        manageSavedQueriesModal: ManageSavedQueries,\n                        exportSavedQueryModal: ExportQuery\n                    }\n                },\n                SavedQueriesService,\n                SelectionService\n            ]\n        };\n    }\n *\n */\nexport interface SavedQueryComponents {\n    editSavedQueryModal: Type<any>;\n    manageSavedQueriesModal: Type<any>;\n    exportSavedQueryModal: Type<any>;\n}\nexport const SAVEDQUERY_COMPONENTS = new InjectionToken<SavedQueryComponents>('SAVEDQUERY_COMPONENTS');\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SavedQueriesService implements OnDestroy {\n\n    private readonly _events = new Subject<SavedQueryChangeEvent>();\n    private readonly _changes = new Subject<SavedQueryChangeEvent>();\n\n    // An application may want to alter the action (icon, etc.)\n    public selectedRecordsAction: Action;\n\n    constructor(\n        public userSettingsService: UserSettingsWebService,\n        public searchService: SearchService,\n        public modalService: ModalService,\n        public appService: AppService,\n        public queryExportService: QueryExportWebService,\n        public downloadService: DownloadWebService,\n        public selectionService: SelectionService,\n        @Inject(SAVEDQUERY_COMPONENTS) public savedQueryComponents: SavedQueryComponents\n    ){\n        // Listen to the user settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Menus need to be rebuilt\n            this._events.next({type: SavedQueryEventType.Loaded});\n        });\n        // Listen to own events, to trigger change events\n        this._events.subscribe(event => {\n            if(SAVED_QUERIES_CHANGE_EVENTS.indexOf(event.type) !== -1){\n                this.changes.next(event);\n            }\n        });\n        // Initialize selection action\n        this.selectedRecordsAction = new Action({\n            icon: 'fas fa-download',\n            title: 'msg#exportQuery.btnTitle',\n            action: (_item: Action, _event: Event) => {\n                this.exportModal(this.selectionService.haveSelectedRecords\n                    ? ExportSourceType.Selection\n                    : ExportSourceType.Result);\n            },\n        });\n    }\n\n\n    // GETTERS\n\n    /**\n     * Returns the list of this user's saved queries.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of saved queries if it does not already exist.\n     */\n    public get savedqueries() : SavedQuery[]{\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"savedQueries\"])\n            this.userSettingsService.userSettings[\"savedQueries\"] = [];\n        return this.userSettingsService.userSettings[\"savedQueries\"];\n    }\n\n    /**\n     * Triggers any event among SavedQueryChangeEvent\n     * (use for fine-grained control of saved queries workflow)\n     */\n    public get events() : Subject<SavedQueryChangeEvent> {\n        return this._events;\n    }\n\n    /**\n     * Triggers when events affect the list of saved queries\n     * (use to refresh saved queries menus)\n     * Cf. CHANGE_EVENTS list\n     */\n    public get changes() : Subject<SavedQueryChangeEvent> {\n        return this._changes;\n    }\n\n    /**\n     * @returns true if there is at least one saved query\n     */\n    public get hasSavedQuery(): boolean {\n        return this.savedqueries.length > 0;\n    }\n\n    /**\n     * @returns a saved query with the given name or null if it does not exist\n     * @param name\n     */\n    public savedquery(name: string): SavedQuery | undefined {\n        const i = this.savedqueryIndex(name);\n        return i>= 0? this.savedqueries[i] : undefined;\n    }\n\n    private savedqueryIndex(name: string): number {\n        for (let i = 0, ic = this.savedqueries.length; i < ic; i++) {\n            const savedquery = this.savedqueries[i];\n            if (savedquery && savedquery.name === name) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n\n\n    // CRUD\n\n    /**\n     * Creates a new saved query unless it already exists.\n     * Emits an savedquery event.\n     * Update the data on the server.\n     * @param savedquery the savedquery to create\n     * @returns true if savedquery was created\n     */\n    public createSavedQuery(savedquery: SavedQuery) : boolean {\n\n        if(this.savedqueryIndex(savedquery.name) >= 0)\n            return false; // This savedquery already exists\n\n        this.savedqueries.unshift(savedquery);\n        this._events.next({type : SavedQueryEventType.Add, savedquery});\n        this.patchSavedQueries([{\n            type: SavedQueryEventType.Add,\n            detail: {\n                savedquery: savedquery.name\n            }\n        }]);\n        return true;\n    }\n\n    /**\n     * Update the saved query at the given index, unless a saved query with the same name\n     * already exists in the list of saved queries.\n     * Emits an Saved Query event.\n     * Update the data on the server.\n     * @param savedquery the saved query to update\n     * @param index the index at which to update the saved query\n     * @returns true if saved query was updated\n     */\n    public updateSavedQuery(savedquery: SavedQuery, index : number) : boolean {\n\n        const prevIndex = this.savedqueryIndex(savedquery.name);\n        if(prevIndex !== -1 && index !== prevIndex)\n            return false; // A saved query with the same name exists at a different index\n\n        if(index >= 0 && index < this.savedqueries.length){\n\n            this.savedqueries.splice(index, 1, savedquery);\n            this._events.next({type : SavedQueryEventType.Update, savedquery});\n            this.patchSavedQueries([\n                {\n                    type: SavedQueryEventType.Update,\n                    detail: {\n                        savedquery: savedquery.name\n                    }\n                }\n            ]);\n            return true;\n\n        }\n        return false;   // This saved query does not exist\n    }\n\n    /**\n     * Updates the full list of saved queries.\n     * Emits an SavedQuery event.\n     * Update the data on the server.\n     * @param savedqueries the new list of saved queries\n     * @param auditEvents the list of audit events to log\n     */\n    public updateSavedQueries(savedqueries : SavedQuery[], auditEvents?: AuditEvents) : boolean {\n        Utils.arraySet(this.savedqueries, savedqueries);\n        this._events.next({type : SavedQueryEventType.Update});\n        this.patchSavedQueries(auditEvents);\n        return true;\n    }\n\n    /**\n     * Deletes the given SavedQuery (based on its name)\n     * Emits an SavedQuery event.\n     * Update the data on the server.\n     * @param savedquery\n     * @returns true if saved query was deleted\n     */\n    public deleteSavedQuery(savedquery: SavedQuery) : boolean {\n\n        const index = this.savedqueryIndex(savedquery.name);\n\n        if(index === -1)\n            return false; // Nothing to delete\n\n        this.savedqueries.splice(index, 1);\n        this._events.next({type : SavedQueryEventType.Delete, savedquery});\n        this.patchSavedQueries([\n            {\n                type: SavedQueryEventType.Delete,\n                detail: {\n                    savedquery: savedquery.name\n                }\n            }\n        ]);\n        return true;\n    }\n\n    /**\n     * Sets this saved query to the current search context, using the search service\n     */\n    public setSavedQueryToCurrentQuery(savedquery: SavedQuery){\n        savedquery.query = Query.copy(this.searchService.query);\n    }\n\n    /**\n     * Updates Saved Queries in User settings.\n     * @param auditEvents : Audit Events to be triggered\n     * @returns an Observable which can be used to trigger further events\n     */\n    private patchSavedQueries(auditEvents?: AuditEvents) {\n        return this.userSettingsService.patch({savedQueries: this.savedqueries}, auditEvents)\n            .subscribe(\n                next => {\n                    this._events.next({type: SavedQueryEventType.Patched});\n                },\n                error => {\n                    console.error(\"Could not patch Saved queries!\", error);\n                }\n            );\n    }\n\n\n    public rssHref(item: SavedQuery) {\n        return Utils.addSearchParams(this.appService.appWebService.makeUrl(\"query.rss\"),\n            {\n                app: this.appService.appName,\n                name: item.name\n            });\n    }\n\n\n    public hasRssEnabled(): boolean {\n        return !!this.appService.app && !!this.appService.app.queryRssEnabled;\n    }\n\n\n    /**\n     * Checks if there is a configuration for the export web service.\n     *\n     * @returns true if there is a configuration for the export web service.\n     */\n    public hasExportConfig(): boolean {\n        return !!this.appService.app && !!this.appService.app.queryExport;\n    }\n\n\n    public download(model : ExportQueryModel): Observable<HttpResponse<Blob>> {\n        return this.downloadService.download(this.requestExport(model));\n    }\n\n    private requestExport(model: ExportQueryModel): Observable<HttpResponse<Blob>> {\n        switch (model.export) {\n            case ExportSourceType.Result:\n                return this.queryExportService.exportResult(\n                    model.webService,\n                    this.searchService.query,\n                    this.searchService.results,\n                    model.format,\n                    model.maxCount,\n                    model.exportedColumns,\n                );\n            case ExportSourceType.Selection:\n                return this.queryExportService.exportSelection(\n                    model.webService,\n                    this.searchService.query,\n                    this.searchService.results,\n                    this.selectionService.getSelectedIds(),\n                    model.format,\n                    model.maxCount,\n                    model.exportedColumns,\n                );\n            case ExportSourceType.SavedQuery:\n                return this.queryExportService.exportSavedQuery(\n                    model.webService,\n                    model.queryName || \"\",\n                    model.format,\n                    model.maxCount,\n                    model.exportedColumns,\n                );\n            default:\n                console.log(\n                    'QueryExporter.export unexpected export type: ',\n                    ExportSourceType[model.export]);\n                return throwError('QueryExporter.export unexpected export type: ');\n        }\n    }\n\n\n\n\n    // EVENT HANDLERS (Menus)\n\n    /**\n     * Uses the SearchService to perform a search returning all\n     * the documents matching this saved query.\n     * @param saved query\n     * @returns the search service promise\n     */\n    searchSavedQuery(savedquery: SavedQuery, path?: string): Promise<boolean> {\n        this.searchService.setQuery(Utils.extend(this.searchService.makeQuery(), Utils.copy(savedquery.query)));\n        this._events.next({type: SavedQueryEventType.Search, savedquery});\n        return this.searchService.search({ path: path }, {\n            type: SavedQueryEventType.Search,\n            detail: {\n                \"saved-query\": savedquery.name\n            }\n        });\n    }\n\n    /**\n     * Opens a dialog allowing a user to save the current query.\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the query was saved.\n     */\n    createSavedQueryModal(query: Query = this.searchService.query) : Promise<boolean> {\n        const savedQuery: SavedQuery = {\n            name: query.text || \"\",\n            query: Query.copy(query)\n        };\n        return this.modalService.open(this.savedQueryComponents.editSavedQueryModal, {model: savedQuery})\n            .then((result) => {\n                if (result === ModalResult.OK) {\n\n                    const index = this.savedqueryIndex(savedQuery.name);\n                    if (index !== -1) {\n\n                        return this.modalService.yesNo(\"msg#savedQueries.savedQueryAlreadyExists\")\n                            .then((result) => {\n                                if (result === ModalResult.Yes) {\n                                    return this.updateSavedQuery(savedQuery, index);\n                                }\n                                return false;\n                            });\n\n                    } else {\n                        return this.createSavedQuery(savedQuery);\n                    }\n                }\n                return false;\n            });\n    }\n\n    /**\n     * Opens a dialog allowing a user to reorganize and edit the\n     * list of saved queries.\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true is the list was updated.\n     */\n    public manageSavedQueriesModal() : Promise<boolean> {\n\n        const model: ManageSavedQueriesModel = { savedQueries: Utils.copy(this.savedqueries) };\n\n        return this.modalService.open(this.savedQueryComponents.manageSavedQueriesModal, {model})\n            .then((result) => {\n                if (result === ModalResult.OK) {\n                    return this.updateSavedQueries(model.savedQueries, model.auditEvents);\n                }\n                return false;\n            });\n\n    }\n\n    /**\n     * Exports a query via a modal dialog.\n     *\n     * @param exportType type of export to perform (selection, saved query, results)\n     * @param savedQuery The saved query\n     */\n    public exportModal(exportType: ExportSourceType, savedQuery?: SavedQuery)\n            : Promise<ModalResult> {\n\n        if (!this.hasExportConfig() || !this.appService.app) {\n            return Promise.resolve(ModalResult.Cancel);\n        }\n\n        const model: ExportQueryModel = {\n            format: ExportOutputFormat.Csv,\n            export: exportType,\n            webService: this.appService.app.queryExport\n        };\n\n        if (savedQuery && exportType === ExportSourceType.SavedQuery) {\n            model.queryName = savedQuery.name;\n        }\n\n        return this.modalService.open(this.savedQueryComponents.exportSavedQueryModal, {model});\n    }\n\n    notifyOpenSavedQuery(savedquery: SavedQuery) {\n        this._events.next({type: SavedQueryEventType.Search, savedquery});\n    }\n\n    ngOnDestroy() {\n        this.events.complete();\n        this.changes.complete();\n    }\n}\n","import {Component, Inject, OnInit} from \"@angular/core\";\nimport {Validators, AbstractControl} from \"@angular/forms\";\nimport {ValidatorFn} from \"@angular/forms\";\nimport {CdkDragDrop} from \"@angular/cdk/drag-drop\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {ExportSourceType, AuditEvent} from \"@sinequa/core/web-services\";\nimport {SavedQueriesService, SavedQuery, SavedQueryEventType, ManageSavedQueriesModel} from \"../../saved-queries.service\";\n\n@Component({\n    selector: \"sq-manage-saved-queries\",\n    templateUrl: \"./manage-saved-queries.html\",\n    styleUrls: [\"./manage-saved-queries.scss\"]\n})\nexport class BsManageSavedQueries implements OnInit {\n    reordering: boolean;\n    buttons: ModalButton[];\n    removeAllButton: ModalButton;\n    nameValidators: ValidatorFn[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: ManageSavedQueriesModel,\n        public savedQueriesService: SavedQueriesService) {\n        this.reordering = false;\n\n        this.nameValidators = [\n            Validators.required,\n            (control: AbstractControl) => {\n                const modelControl = control.root.get(\"model\");\n                if (modelControl) {\n                    for (const item of this.model.savedQueries) {\n                        if (modelControl.value === item) {\n                            continue;\n                        }\n                        if (control.value === item.name) {\n                            return {\n                                unique: true\n                            };\n                        }\n                    }\n                }\n                return null;\n            }\n        ];\n    }\n\n    ngOnInit() {\n        this.buttons = [\n            this.removeAllButton = new ModalButton({\n                text: \"msg#manageSavedQueries.removeAll\",\n                result: ModalResult.Custom,\n                action: (button) => {\n                    this.model.savedQueries.splice(0);\n                    button.visible = false;\n                    this.addAuditEvent({\n                        type: SavedQueryEventType.DeleteAll\n                    });\n                },\n                visible: this.model.savedQueries.length > 0\n            }),\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    addAuditEvent(auditEvent: AuditEvent) {\n        if (!this.model.auditEvents) {\n            this.model.auditEvents = [];\n        }\n        this.model.auditEvents.push(auditEvent);\n    }\n\n    reorder() {\n        this.reordering = !this.reordering;\n    }\n\n    setName(savedQuery: SavedQuery, name: string) {\n        if (!Utils.eqNC(savedQuery.name, name)) {\n            this.addAuditEvent({\n                type: SavedQueryEventType.Rename,\n                detail: {\n                    query: name,\n                    \"old-name\": savedQuery.name\n                }\n            });\n            savedQuery.name = name;\n        }\n    }\n\n    remove(savedQuery: SavedQuery, index: number) {\n        this.model.savedQueries.splice(index, 1);\n        this.removeAllButton.visible = this.model.savedQueries.length > 0;\n        this.addAuditEvent({\n            type: SavedQueryEventType.Delete,\n            detail: {\n                query: savedQuery.name\n            }\n        });\n        return false;\n    }\n\n    export(savedQuery: SavedQuery) {\n        this.savedQueriesService.exportModal(ExportSourceType.SavedQuery, savedQuery);\n        return false;\n    }\n\n    dropped(drop: CdkDragDrop<SavedQuery[]>) {\n        Utils.arrayMove(this.model.savedQueries, drop.previousIndex, drop.currentIndex);\n    }\n}\n","<form name=\"manageSavedQueries\" novalidate>\n    <sq-modal [title]=\"'msg#manageSavedQueries.title'\" [buttons]=\"buttons\">\n        <div *ngIf=\"model.savedQueries.length\" class=\"form-group clearfix\">\n            <button type=\"button\" class=\"btn btn-secondary float-right\" (click)=\"reorder()\">{{(reordering ? \"msg#manageSavedQueries.edit\" : \"msg#manageSavedQueries.reorder\") | sqMessage}}</button>\n        </div>\n        <div class=\"form-group\">\n            <div class=\"list-group\" cdkDropList [cdkDropListData]=\"model.savedQueries\" [cdkDropListDisabled]=\"!reordering\" (cdkDropListDropped)=\"dropped($event)\">\n                <div *ngFor=\"let savedQuery of model.savedQueries; let $index = index\" cdkDrag \n                    [ngClass]=\"['list-group-item list-group-item-action d-flex w-auto-unimportant', reordering ? 'cursor-move': '']\">\n                    <div *ngIf=\"reordering\" class=\"sq-saved-query-text\">{{savedQuery.name}}</div>\n                    <sq-editable *ngIf=\"!reordering\" [value]=\"savedQuery.name\" (valueChange)=\"setName(savedQuery, $event)\" name=\"msg#manageSavedQueries.name\" [model]=\"savedQuery\" [validators]=\"nameValidators\"></sq-editable>\n                    <div class=\"ml-auto\">\n                        <a *ngIf=\"!reordering && savedQueriesService.hasExportConfig()\" class=\"ml-2\" href=\"#\" (click)=\"export(savedQuery)\" title=\"{{'msg#manageSavedQueries.export' | sqMessage}}\">\n                            <span class=\"fas fa-download sq-export\"></span>\n                        </a>\n                        <a *ngIf=\"!reordering && savedQueriesService.hasRssEnabled()\" class=\"ml-2\" href=\"{{savedQueriesService.rssHref(savedQuery)}}\" target=\"_blank\" title=\"{{'msg#manageSavedQueries.rss' | sqMessage}}\">\n                            <span class=\"fas fa-rss sq-rss\"></span>\n                        </a>\n                        <a *ngIf=\"!reordering\" href=\"#\" (click)=\"remove(savedQuery, $index)\" class=\"ml-2\" title=\"{{'msg#manageSavedQueries.remove' | sqMessage}}\">\n                            <span class=\"fas fa-times sq-remove\"></span>\n                        </a>\n                        <span *ngIf=\"reordering\" class=\"ml-2 fas fa-bars sq-move\"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </sq-modal>\n</form>\n","export default {\n    \"labels\": {\n        \"labels\": \"Labels\",\n        \"publicLabels\": \"Public Labels\",\n        \"privateLabels\": \"Private Labels\",\n        \"public\": \"Public\",\n        \"private\": \"Private\",\n        \"selectLabel\": \"Select label(s)\",\n        \"deleteLabelAreYouSure\": \"Are you sure you want to remove the label: {name}?\",\n        \"bulkAddLabelAreYouSure\": \"Are you sure you want to bulk add the label: {name} to the results of the current query?\",\n        \"bulkRemoveLabelAreYouSure\": \"Are you sure you want to bulk remove the label: {name} to the results of the current query?\",\n        \"addPublicLabelText\": \"+\",\n        \"removePublicLabelText\": \"×\",\n        \"addPublicLabelTitle\": \"Add public label\",\n        \"selectPublicLabelTitle\": \"Select public label\",\n        \"removePublicLabelTitle\": \"Remove public label\",\n        \"addPrivateLabelText\": \"+\",\n        \"removePrivateLabelText\": \"×\",\n        \"addPrivateLabelTitle\": \"Add private label\",\n        \"selectPrivateLabelTitle\": \"Select private label\",\n        \"removePrivateLabelTitle\": \"Remove private label\"\n    },\n\n    \"renameLabel\": {\n        \"title\": \"Rename Label(s) globally\",\n        \"btnRename\": \"Rename\",\n        \"newLabel\": \"New Label\",\n        \"oldLabels\": \"Old label(s)\",\n        \"alertText\": \"This action renames the label(s) in the index and is irreversible\",\n        \"successFeedback\": \"Label(s) renamed in the index\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"deleteLabel\": {\n        \"title\": \"Delete label(s) globally\",\n        \"btnDelete\": \"Delete\",\n        \"alertText\": \"This action deletes the selected label(s) from the index and is irreversible\",\n        \"successFeedback\": \"Label(s) deleted from the index\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"bulkRemoveLabel\": {\n        \"title\": \"Remove label(s) from the current results\",\n        \"btnBulkRemove\": \"Remove\",\n        \"alertText\": \"This action removes the selected label(s) from all results reported by the engine (not only from the first page)\",\n        \"successFeedback\": \"Label(s) removed from all results reported by the engine\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"bulkAddLabel\": {\n        \"title\": \"Add label(s) to the current results\",\n        \"btnBulkAdd\": \"Add\",\n        \"alertText\": \"This action assigns the selected label(s) to all results reported by the engine (not only to the first page)\",\n        \"infoText\": \"Press 'Enter' to add a new label that does not exist in the suggestions\",\n        \"successFeedback\": \"Label(s) assigned to all results reported by the engine\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    },\n\n    \"editLabel\": {\n        \"title\": \"Edit the label(s) of the selected result(s)\",\n        \"btnEdit\": \"Save\",\n        \"alertText\": \"This action edits the label(s) of the selected result(s)\",\n        \"infoText\": \"Press 'Enter' to add a new label that does not exist in the suggestions\",\n        \"labelsToBeRemoved\": \"Label(s) to be removed\",\n        \"labelsToBeAdded\": \"Label(s) to be added\",\n        \"successFeedback\": \"Label(s) of the selected result(s) edited\",\n        \"errorFeedback\": \"An error occurred. Request failed\"\n    }\n\n};\n","export default {\r\n    \"clipboard\": {\r\n        \"success\": \"{data} in die Zwischenablage kopiert\",\r\n        \"error\": \"Zwischenablagefehler\"\r\n    }\r\n};\r\n","export * from \"./breadcrumbs/breadcrumbs\";\nexport * from \"./did-you-mean/did-you-mean\";\nexport * from \"./page-size-selector/page-size-selector\";\nexport * from \"./pager/pager\";\nexport * from \"./search.module\";\nexport * from \"./sort-selector/sort-selector\";\nexport * from \"./tabs/tabs\";\nexport * from \"./loading-bar/loading-bar\";\nexport * from \"./scroller/scroller\";\nexport * from \"./load-more/load-more\";\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\" : \"Send feedback to the Sinequa admin\",\n        \"content\" : {\n            \"text\" : \"Content\",\n            \"title\" : \"Propose to add new content or improve the current content\"\n        },\n        \"ui\" : {\n            \"text\" : \"User Interface\",\n            \"title\" : \"Propose improvements to the User Interface\"\n        },\n        \"lang\" : {\n            \"text\" : \"Language\",\n            \"title\" : \"Propose language processing improvements, like new words, synonyms to add to the dictionaries (this affects directly the relevance of the search engine)\"\n        },\n        \"other\" : {\n            \"text\" : \"Other\",\n            \"title\" : \"Submit feature requests, and other improvement ideas\"\n        },\n        \"thankyou\": \"Thank you for your feedback!\",\n        \"quality\" : {\n            \"label\" : \"Quality of the document:\"\n        },\n        \"relevance\" : {\n            \"label\" : \"Relevance of the document:\"\n        },\n        \"labels\" : {\n            \"public\" : {\n                \"label\" : \"Tags:\"\n            },\n            \"private\" : {\n                \"label\" : \"Private tags:\"\n            }\n        }\n    }\n};\n","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable, EMPTY} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\nimport {Results, RFMData} from \"./query.web.service\";\n\n/**\n * A service for calling the search.rfm web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class RfmWebService extends HttpService {\n    private static readonly endpoint = \"search.rfm\";\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Get RFM data for a set of results\n     *\n     * @param rfm The name of the RFM\n     * @param results The results for which to retrieve RFM data\n     */\n    getRfmData(rfm: string, results: Results): Observable<MapOf<RFMData>> {\n        const ids: string[] = [];\n        for (const record of results.records) {\n            if (!!record.flags && record.flags.indexOf(\"r\") !== -1) {\n                ids.push(record.id);\n            }\n        }\n        if (ids.length === 0) {\n            return EMPTY;\n        }\n        const data = {\n            rfm,\n            queryHash: results.rfmQueryHash,\n            ids\n        };\n        const observable = this.httpClient.post<MapOf<RFMData>>(this.makeUrl(RfmWebService.endpoint), data);\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"rfmService.getRfmData failure - error: \", error);\n            });\n        return observable;\n    }\n}\n","import {Locale, LocalesConfig} from \"@sinequa/core/intl\";\nimport {enCore} from \"./messages\";\n\nexport class DefaultLocalesConfig implements LocalesConfig {\n    defaultLocale: Locale;\n    locales?: Locale[];\n\n    constructor() {\n        this.defaultLocale = {\n            name: \"en\",\n            display: \"English\",\n            data: {\n                intl: {\n                    locale: \"en-US\"\n                },\n                messages: enCore,\n            }\n        };\n        this.locales = [this.defaultLocale];\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { SavedQueriesService, SavedQuery, SavedQueryEventType } from '../../saved-queries.service';\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\n\n@Component({\n  selector: 'sq-facet-saved-queries',\n  templateUrl: './facet-saved-queries.html',\n  styles: [`\n.saved-query-item .query-delete{\n    opacity: 0;\n}\n\n.saved-query-item:hover .query-delete{\n    opacity: 1;\n    transition: opacity 0.2s ease-in-out;\n}\n  `]\n})\nexport class BsFacetSavedQueries extends AbstractFacet  {\n    @Input() searchRoute: string = \"/search\";\n    @Input() maxQueries: number = 5;\n    @Input() enableDelete: boolean = true;\n\n    page: number = 0;\n\n    manageSavedQueries: Action;\n    previousPage: Action;\n    nextPage: Action;\n\n    constructor(\n        public savedQueriesService: SavedQueriesService) {\n        super();\n\n        this.manageSavedQueries = new Action({\n            icon: \"fas fa-cog\",\n            title: \"msg#savedQueries.manageSavedQueries\",\n            action: () => {\n                this.savedQueriesService.manageSavedQueriesModal();\n            }\n        });\n\n        this.previousPage = new Action({\n            icon: \"fas fa-chevron-left\",\n            title: \"msg#facet.previous\",\n            action: () => {\n                this.page--;\n            },\n            updater: (action: Action) => {\n                action.disabled = this.page <= 0;\n                action.hidden = this.maxPage === 0;\n            }\n        });\n\n        this.nextPage = new Action({\n            icon: \"fas fa-chevron-right\",\n            title: \"msg#facet.next\",\n            action: () => {\n                this.page++;\n            },\n            updater: (action: Action) => {\n                action.disabled = this.page >= this.maxPage;\n                action.hidden = this.maxPage === 0;\n            }\n        });\n    }\n\n    get maxPage(): number {\n        return Math.max(0, Math.ceil(this.savedQueriesService.savedqueries.length / this.maxQueries) - 1);\n    }\n\n    get startIndex(): number {\n        return this.page * this.maxQueries;\n    }\n\n    get endIndex(): number {\n        return (this.page+1) * this.maxQueries;\n    }\n\n    get actions(): Action[] {\n        this.previousPage.update();\n        this.nextPage.update();\n        return [this.previousPage, this.nextPage, this.manageSavedQueries];\n    }\n\n    openSavedQuery(query: SavedQuery){\n        this.savedQueriesService.notifyOpenSavedQuery(query)\n        return true;\n    }\n\n    deleteQuery(query: SavedQuery, event: Event){\n        event.stopPropagation();\n        this.savedQueriesService.deleteSavedQuery(query);\n        this.page = Math.min(this.page, this.maxPage);\n        return false;\n    }\n\n    getQueryParams(savedQuery: SavedQuery) {\n        const query = this.savedQueriesService.searchService.makeQuery(savedQuery.query);\n        const queryParams = query.toJsonForQueryString();\n        return {query: queryParams};\n    }\n\n    getRouterState(savedQuery: SavedQuery) {\n        return {\n            audit: {\n                type: SavedQueryEventType.Search,\n                detail: {\n                    \"saved-query\": savedQuery.name\n                }\n            }\n        }\n    }\n}\n","<div class=\"list-group list-group-flush\">\n    <a *ngFor=\"let query of savedQueriesService.savedqueries | slice:startIndex:endIndex\"\n        class=\"saved-query-item list-group-item list-group-item-action d-flex align-items-center\"\n        [routerLink]=\"[searchRoute]\" [queryParams]=\"getQueryParams(query)\" [state]=\"getRouterState(query)\"\n        (click)=\"openSavedQuery(query)\">\n        <span class=\"query-name mr-auto text-truncate\" [title]=\"query.name\">{{ query.name }}</span>\n        <span *ngIf=\"query.query.text\" class=\"query-text text-muted small font-italic text-right text-truncate ml-2\">\"{{ query.query.text }}\"</span>\n        <i *ngIf=\"enableDelete\" class=\"query-delete ml-2 fas fa-times\" [title]=\"'msg#savedQueries.delete' | sqMessage\" (click)=\"deleteQuery(query, $event)\"></i>\n    </a>\n    <div *ngIf=\"savedQueriesService.savedqueries.length == 0\" class=\"list-group-item text-center text-muted font-italic small py-5\">\n        {{ 'msg#savedQueries.noSavedQuery' | sqMessage }}\n    </div>\n</div>","export * from \"./public-api\";","import { Directive, Input, Output, EventEmitter, SimpleChanges, ElementRef, OnChanges, OnDestroy } from \"@angular/core\";\nimport { Observable, Subscription, of } from \"rxjs\";\nimport { Utils, Keys} from \"@sinequa/core/base\";\nimport { AppService, Expr, ExprBuilder, ExprParser, ExprValueInfo} from \"@sinequa/core/app-utils\";\nimport { Autocomplete, AutocompleteItem, AutocompleteState } from './autocomplete.directive';\nimport { SuggestService } from './suggest.service';\nimport { UIService } from '@sinequa/components/utils';\n\n/**\n * Interface required to be implement by the component displaying\n * the fielded search items (basically the content of fieldSearchItems)\n */\nexport interface FieldSearchItemsContainer {\n\n    /** Update the list of items displayed by the container */\n    update(items: AutocompleteItem[]): void;\n\n    /** Event triggered when the user removes an item from the container */\n    itemRemoved: EventEmitter<AutocompleteItem>;\n}\n\nexport interface ParseResult {\n    result?: Expr;\n    error?: string;\n}\n\n@Directive({\n    selector: \"[sqAutocompleteFieldSearch]\"\n})\nexport class AutocompleteFieldSearch extends Autocomplete implements OnChanges, OnDestroy {\n\n\n    // FIELDED SEARCH\n\n    /** \n     * \"text\" mode: fielded search is entirely managed as text in the <input> component \n     * \"selects\" mode: fielded search stores the selected autocomplete items to create selections, while keeping a clean <input> content (better UI/UX but does not support operators like OR, NOT, and parentheses)\n     */\n    @Input() fieldSearchMode: \"off\" | \"text\" | \"selects\" = \"text\";\n\n    /** Fields excluded from fielded search (searched as regular strings if selected) */\n    @Input() excludedFields: string[] = [\"concepts\"];\n\n    /* Fields included in fielded search (have precedence over excluded fields) */\n    @Input() includedFields?: string[];\n\n   /** Container displaying the fieldSearchItems (only needed if mode === \"selects\") */\n    @Input() fieldSearchItemsContainer?: FieldSearchItemsContainer;\n\n    /** Current selection expression needed to update the list of field search items if mode === \"selects\" */\n    @Input() fieldSearchExpression?: string;\n \n    /** Stores the selected fielded search items selected via Tab */\n    public readonly fieldSearchItems: AutocompleteItem[] = [];\n\n\n    // Event emitters\n\n    @Output() parse = new EventEmitter<ParseResult>();\n\n    constructor(elementRef: ElementRef<any>, \n        suggestService: SuggestService,\n        appService: AppService,\n        uiService: UIService,\n        protected exprBuilder: ExprBuilder){\n        super(elementRef, suggestService, appService, uiService);\n    }\n\n\n    /**\n     * If the off input changes state, react accordingly\n     * @param changes\n     */\n    ngOnChanges(changes: SimpleChanges){\n        super.ngOnChanges(changes);\n\n        // Subscribe to the field search items's container\n        if(changes[\"fieldSearchItemsContainer\"] && this.fieldSearchItemsContainer) {\n            if(this._fieldSearchSubscription){\n                this._fieldSearchSubscription.unsubscribe();\n            }\n            this._fieldSearchSubscription = this.fieldSearchItemsContainer.itemRemoved.subscribe(item => {\n                this.fieldSearchItems.splice(this.fieldSearchItems.indexOf(item), 1);\n                this.updatePlaceholder();\n                this.submit.next();\n            });\n        }\n\n        // Transform the field search expresion (Expr string) into a list of autocomplete items displayed in the field search container\n        if(changes[\"fieldSearchExpression\"] && this.fieldSearchMode === \"selects\") {\n            if(this.fieldSearchExpression) {\n                const expr = this.appService.parseExpr(this.fieldSearchExpression);\n                if(expr instanceof Expr && this.fieldSearchItems.length !== expr.getFields().length) {\n                    this.fieldSearchItems.splice(0);\n                    if(expr.and) {\n                        expr.operands.forEach(e => \n                            this.fieldSearchItems.push(this.exprToItem(e))\n                        );\n                    }\n                    else {\n                        this.fieldSearchItems.push(this.exprToItem(expr));\n                    }\n                }\n            }\n            else {\n                this.fieldSearchItems.splice(0);\n            }\n        }\n\n        // If fieldSearchMode changes from selects to something else, we must remove the field search items\n        if(changes[\"fieldSearchMode\"] && this.fieldSearchMode !== \"selects\" && this.fieldSearchItems.length > 0) {\n            this.fieldSearchItems.splice(0);\n        }\n\n        this.updatePlaceholder();\n        this.fieldSearchItemsContainer?.update(this.fieldSearchItems);\n    }\n\n\n    private _fieldSearchSubscription: Subscription;\n    /**\n     * Unsubscribe when destroying the component\n     */\n    ngOnDestroy(){\n        super.ngOnDestroy();\n        if(this._fieldSearchSubscription){\n            this._fieldSearchSubscription.unsubscribe();\n        }\n    }\n\n    /**\n     * Insert the given autocomplete item into the current search input\n     * at the right location\n     * @param item \n     */\n    protected insertAutocompleteItem(item: AutocompleteItem): boolean {\n        const value = this.getInputValue(); // Current text in the input\n        if(value) { // There should always be text\n            const parseResult = this.parseQuery(); // Parse the current text\n            if(parseResult.result) { // (if no result, a parsing error occurred)\n                const res = parseResult.result.findValue(this.getInputPosition()); // Get the expression at the caret location\n                // Autocomplete \"compa\" => \"company:\"\n                if(res && item.category === \"$field$\") {\n                    this.replaceValueInForm(res, item.display + \": \");\n                    return false;\n                }\n                // Autocomplete \"company:Goo\" => \"company:`GOOGLE`\"\n                if(res && res.field === item.category) {\n                    this.replaceValueInForm(res, ExprParser.escape(item.normalized || item.display));\n                    return true;\n                }\n                // Autocomplete \"Goo\" => \"company:`GOOGLE`\"\n                if(res && !res.field && item.category && \n                    (this.includedFields && this.includedFields?.includes(item.category) || \n                    (!this.includedFields && !this.excludedFields?.includes(item.category)))) { // Filter out fields if not in fieldSearch mode\n                    this.replaceValueInForm(res, this.exprBuilder.makeExpr(item.category, item.normalized || item.display));\n                    return true;\n                }\n                // Autocomplete \"Search eng\" => \"Search engine\"\n                if(res && !res.field) {\n                    this.replaceValueInForm(res, item.display);\n                    return true;\n                }\n                // Remaining edge case ?\n                console.error(item, parseResult.result);\n            }\n        }\n\n        console.error(\"Shouldn't be here: an autocomplete item is selected, but there is no text or a parse error!\");\n        // Default to just overriding the current value (a complex query with multiple items might become reduced to this single item!)\n        if(item.category === \"$field$\") {\n            this.setInputValue(item.display + \":\");\n            return false;\n        }\n        this.setInputValue(this.exprBuilder.makeExpr(item.category, item.normalized || item.display)); // person: `Bill Gates`\n        return true;\n    }\n\n    /**\n     * Replaces the piece of expression (res) with a new value\n     * in the input form\n     * @param res The piece of expression parsed from the input content\n     * @param value The new value\n     */\n    protected replaceValueInForm(res: ExprValueInfo, value: string) {\n        this.uiService.setCaret(this.inputElement, res.start, res.start+res.length, value);\n    }\n\n    /**\n     * Sets the content of the <input> based on the given\n     * Autocomplete Item (various implementations are possible,\n     * depending on the item content and nature).\n     * This would be the right method to override to implement\n     * fielded search autocomplete.\n     * @returns true if this autocomplete item should be searched\n     */\n    protected setAutocompleteItem(item: AutocompleteItem): boolean {\n        if(item) {\n            if(this.fieldSearchMode === \"text\") {\n                return this.insertAutocompleteItem(item);\n            }\n\n            else if(this.fieldSearchMode === \"selects\" && item.category && \n                (this.includedFields && this.includedFields?.includes(item.category) || \n                (!this.includedFields && !this.excludedFields?.includes(item.category)))) { // Filter out fields if not in fieldSearch mode\n                // In the case of of a field name, we display the field for autocomplete, but we don't want to search for it\n                if(item.category === \"$field$\") {\n                    this.setInputValue(item.display + \":\");\n                    return false;\n                }\n                // Store the autocomplete item that will be used to create a selection\n                this.setInputValue(\"\");\n                this.fieldSearchItems.push(item);\n                this.updatePlaceholder();\n                this.fieldSearchItemsContainer?.update(this.fieldSearchItems);\n                return true;\n            }\n\n            else {\n                this.setInputValue(item.display);\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns an expression (Expr) for the fielded search items\n     */\n    public getFieldSearchExpression(): string | undefined {\n        return this.itemsToExpr(this.fieldSearchItems);\n    }\n\n    /**\n     * Transforms a list of AutocompleteItems into an expression\n     * @param items list of AutocompleteItems\n     */\n    protected itemsToExpr(items: AutocompleteItem[]): string | undefined {\n        if(items.length > 0) {\n            return this.exprBuilder.concatAndExpr(items.map(item => \n                this.exprBuilder.makeExpr(item.category, item.normalized || item.display, item.display)));\n        }\n        return undefined;\n    }\n\n    /**\n     * Transforms an expression into a list of AutocompleteItems\n     * @param expr an expression\n     */\n    protected exprToItem(expr: Expr): AutocompleteItem {\n        return {\n            category: expr.field!,\n            display: expr.display!,\n            normalized: expr.value!,\n        }\n    }\n\n    /**\n     * Takes the text from the <input> element and parse it to\n     * determine what type of suggestion to request from the server.\n     * The suggestions are then fetched by getSuggestsObs() and processed\n     * by processSuggests().\n     */\n    protected getSuggests() {\n        let value = this.getInputValue();\n        if(value) { // If there is text, make a call to the suggest API\n            const parseResult = this.parseQuery(); // If using fieldSearch, the result can be used to detect an active field\n            let fields: string[] | undefined;\n            if(parseResult.result && this.fieldSearchMode !== \"off\"){\n                const position = this.getInputPosition(); // Position of the caret, if needed\n                const res = parseResult.result.findValue(position);\n                // Field Search suggest\n                if(!!res && !!res.field){\n                    fields = Utils.startsWith(res.field, \"@\") ? [\"text\"] : [res.field];\n                    value = res.value;\n                }\n                if(!!res && this.fieldSearchMode === \"text\") {\n                    value = res.value;\n                }\n            }\n\n            if(parseResult.error && this.fieldSearchMode !== \"off\") {\n                this.processSuggests(of([])); // Empty autocomplete if parsing errors\n                return;\n            }\n\n            this.processSuggests(\n                this.getSuggestsObs(value, fields)\n            );\n\n        }\n        else {  // If empty input, restart autocomplete\n            this.parse.next({}); // remove error messages if any\n            this.start();\n        }\n    }\n\n    /**\n     * Process suggestions obtained (from whatever mean):\n     * - If data available, filter out fields\n     * - update the dropdown content\n     * - Switch between OPEN and ACTIVE states\n     * - Use changeDetectorRef to update display\n     * @param obs an observable of AutocompleteItem suggestions\n     */\n    protected processSuggests(obs: Observable<AutocompleteItem[]>){\n        obs.subscribe(\n            suggests => {\n                if(this.getState() === AutocompleteState.ACTIVE || this.getState() === AutocompleteState.OPENED){\n                    this.dropdown.update(true, suggests\n                        .filter(item => item.category !== \"$field$\" || (this.fieldSearchMode !== \"off\" && \n                            (this.includedFields && this.includedFields?.includes(item.display) || \n                            (!this.includedFields && !this.excludedFields?.includes(item.display)))))  // Filter out fields if not in fieldSearch mode\n                        .map(item => {\n                            if(!item.label){\n                                if(item.category === \"$field$\") {\n                                    item.label = \"Field\";\n                                }\n                                else {\n                                    item.label = this.appService.getLabel(item.category);\n                                }\n                            }\n                            return item;\n                        }));\n                }\n            },\n            err => {\n                this.dropdown.update(false);\n            },\n            () => {\n                if(this.dropdown.hasItems && this.getState() === AutocompleteState.ACTIVE){\n                    this.open();    // Switch from ACTIVE to OPENED (if not already)\n                }\n                else if(!this.dropdown.hasItems && this.getState() === AutocompleteState.OPENED){   // No data\n                    this.active();  // Switch from OPENED to ACTIVE (if not already)\n                }\n            });\n    }\n\n    /**\n     * Parse the query for syntax errors (also allows to detect field search if needed).\n     * Fires a parse event.\n     */\n    protected parseQuery() : ParseResult {\n        const value = this.getInputValue();\n        const result = this.appService.parseExpr(value, {allowEmptyValues: true});\n        const event = result instanceof Expr? { result: result } : { error: result };\n        this.parse.next(event);\n        return event;\n    }\n\n\n    /**\n     * Listen to user's keyboard actions in the <input>, in order to navigate\n     * and select the autocomplete suggestions.\n     * Overrides the parent keydown method, adds the management of the backspace key\n     * to remove field search items.\n     * @param event the keyboard\n     */\n    keydown(event: KeyboardEvent) {\n\n        const keydown = super.keydown(event);\n\n        if(keydown === undefined) {\n            // In fielded search mode, we can remove selections by typing <backspace> when the input is empty\n            if(event.keyCode === Keys.backspace) {\n                if(this.fieldSearchMode === \"selects\" && this.getInputValue() === '') {\n                    this.fieldSearchItems.pop();\n                    this.updatePlaceholder();\n                    this.fieldSearchItemsContainer?.update(this.fieldSearchItems);\n                }\n            }    \n        }\n        \n        return keydown;\n    }\n\n    /**\n     * Updates the <input>'s placeholder to avoid displaying something\n     * when there are fieldSearchItems displayed to the left.\n     */\n    updatePlaceholder() {\n        this._placeholder = this.fieldSearchItems.length > 0 ? '' : this.placeholder;\n    }\n}","import {Component, Input} from \"@angular/core\";\nimport {Record} from \"@sinequa/core/web-services\";\n\n/**\n * This component requires a global CSS file to map file extensions (doc, ppt, xls, etc.)\n * to Font Awesome icons via a class `sq-icon-file-{{fileext}}`\n */\n\n@Component({\n    selector: \"sq-result-icon\",\n    templateUrl: \"./result-icon.html\"\n})\nexport class ResultIcon {\n    /**\n     * Record which file extension is displayed as an icon\n     */\n    @Input() record: Record;\n\n    /**\n     * Integer controlling the icon's size\n     */\n    @Input() size: number = 1; \n}","<span class=\"far fa-file sq-icon-file-{{record.fileext}} fa-{{size}}x fa-fw\" title=\"{{record.fileext}}\"></span>","export * from \"./public-api\";","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport {\n    UpdateLabelsAction,\n    ModalProperties,\n    LabelsService,\n} from \"../../labels.service\";\nimport { Utils } from \"@sinequa/core/base\";\n\n@Component({\n    selector: \"sq-delete-label\",\n    templateUrl: \"./delete-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsDeleteLabel implements OnInit {\n    public buttons: ModalButton[];\n    public title: string;\n    public alert: string;\n    public btnText: string;\n    public isProcessing: boolean = false;\n\n    private _action: () => void;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            values: string[],\n            properties: ModalProperties\n        },\n        private labelsService: LabelsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        switch (this.model.properties.action) {\n            case UpdateLabelsAction.delete:\n                this.title = \"msg#deleteLabel.title\";\n                this.btnText = \"msg#deleteLabel.btnDelete\";\n                this.alert = \"msg#deleteLabel.alertText\";\n                this._action = () => {\n                    const observable = this.labelsService.deleteLabels(\n                        this.model.values,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                };\n                break;\n            case UpdateLabelsAction.bulkRemove:\n                this.title = \"msg#bulkRemoveLabel.title\";\n                this.btnText = \"msg#bulkRemoveLabel.btnBulkRemove\";\n                this.alert = \"msg#bulkRemoveLabel.alertText\";\n                this._action = () => {\n                    const observable = this.labelsService.bulkRemoveLabels(\n                        this.model.values,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                };\n                break;\n            default:\n                this.title = \"\";\n                this.btnText = \"\";\n                this.alert = \"\";\n                break;\n        }\n\n        this.buttons = [\n            new ModalButton({\n                text: this.btnText,\n                primary: true,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: this._action,\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n    }\n\n    onLabelsChanged(values: string[]) {\n        this.model.values = values;\n    }\n}\n","<form name=\"deleteLabel\" novalidate>\n    <sq-modal [title]=\"title\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert\" [ngClass]=\"{'alert-danger': model.properties.action === 3, 'alert-warning': model.properties.action === 5}\" role=\"alert\">\n                {{alert | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n            <b><label for=\"label\">{{'msg#labels.labels' | sqMessage}}</label></b>\n            <sq-labels-autocomplete\n                (labelsUpdate)=\"onLabelsChanged($event)\"\n                [public]=\"model.properties.public\"\n                [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                [allowNewLabels]=\"model.properties.allowNewLabels\"\n                [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n            </sq-labels-autocomplete>\n        </div>\n    </sq-modal>\n</form>\n","export * from \"./public-api\";","import { Injectable } from '@angular/core';\nimport { Utils } from '@sinequa/core/base';\nimport { Aggregation, AggregationItem, TreeAggregationNode } from '@sinequa/core/web-services';\nimport { ValueItem } from '../format.service';\nimport { ExprParser } from './expr-parser';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ExprBuilder {\n\n    /**\n     * Make a standard selection expression\n     * (resulting in a SQL clause like \"company contains 'BOEING'\")\n     * @param field Name of the field to select (eg. \"company\")\n     * @param value Value of the field to select (eg. \"BOEING\")\n     * @param display Optional string to display that value (eg. \"Boeing\")\n     */\n    makeExpr(field: string, value: string, display?: string): string {\n        field = this.formatField(field, display);\n        return `${field}: ${ExprParser.escape(value)}`; // company`Boeing`: BOEING\n    }\n\n    /**\n     * Make a boolean expression\n     * @param field Name of the field to select (eg. \"toto\")\n     * @param value Value of the field to select (eg. \"true\")\n     * @param display Optional string to display that value (eg. \"True\")\n     */\n    makeBooleanExpr(field: string, value: boolean, display?: string): string {\n        field = this.formatField(field, display);\n        return `${field}: ${ExprParser.escape(Utils.toSqlValue(value))}`; // toto`True`: true\n    }\n\n\n    /**\n     * Make a numerical expression using a comparison operator (>, <, <=, >=, etc.)\n     * @param field Name of the field to select (eg. \"modified\")\n     * @param operator Comparison operator used for that selection (eg. \">\")\n     * @param value Value of the field to select (eg. \"2020-12-15\")\n     * @param display Optional string to display that value (eg. \"After Dec 15 2020\")\n     */\n    makeNumericalExpr(\n        field: string,\n        operator: '>' | '>=' | '<' | '<=' | '=' | '<>',\n        value: number | Date | string,\n        display?: string): string {\n\n        field = this.formatField(field, display);\n\n        if(Utils.isString(value)) {\n            value = ExprParser.escape(value);\n        }\n        if(Utils.isDate(value) || Utils.isNumber(value)) {\n            value = Utils.toSqlValue(value);\n        }\n\n        return `${field}:${operator} ${value}`; // modified`After Dec 15 2020`:> 2020-12-15\n    }\n\n\n    /**\n     * Make a list expression\n     * @param field Name of the field to select (eg. \"docformat\")\n     * @param values Values of the field to select (eg. ['htm','pdf'])\n     * @param display Optional string to display that value (eg. \"htm, pdf\")\n     */\n    makeListExpr(field: string, values: string[], display?: string): string {\n        field = this.formatField(field, display);\n        return `${field}: [${values.map(v => ExprParser.escape(v)).join(',')}]`; // docformat`htm, pdf`:[`htm`,`pdf`]\n    }\n\n\n    /**\n     * Make a range expression\n     * @param field Name of the field to select (eg. \"modified\")\n     * @param from Begining of the range (eg. 2020-12-15)\n     * @param to End of the range (eg. 2020-12-20)\n     * @param display Optional string to display that value (eg. \"[Dec 15 2020, Dec 20 2020]\")\n     */\n    makeRangeExpr(\n        field: string,\n        from: number | Date | string,\n        to: number | Date | string,\n        display?: string): string {\n\n        field = this.formatField(field, display);\n        return `${field}: [${Utils.toSqlValue(from)}..${Utils.toSqlValue(to)}]`; // modified`[Dec 15 2020, Dec 20 2020]`: [2020-12-15..2020-12-20]\n    }\n\n\n    /**\n     * Make a RegExp expression\n     * @param field Name of the field to select (eg. \"company\")\n     * @param value Value of the regular expression to match (eg. \"BOE.*\")\n     * @param display Optional string to display that value (eg. \"Boe...\")\n     */\n    makeRegexpExpr(field: string, value: string, display?: string): string {\n        field = this.formatField(field, display);\n        return `${field}:~ ${ExprParser.escape(value)}`; // company`Boe...`:~ BOE.*\n    }\n\n\n    /**\n     * Make a refine expression\n     * @param text The text to add to the query\n     */\n    makeRefineExpr(text: string): string {\n        return `refine: ${ExprParser.escape(text)}`;\n    }\n\n\n    /**\n     * Return an expression that selects multiple values for a field\n     * (All values are ANDed)\n     * @param field Name of the field to select (eg. \"company\")\n     * @param values Values of the field to select (eg. ['IBM','APPLE'])\n     * @param display Optional string to display that value (eg. \"IBM and Apple\")\n     */\n    makeAndExpr(field: string, values: (string | ValueItem)[], display?: string): string {\n        field = this.formatField(field, display);\n        return `${field}: (${this.concatWithOperator(values, 'AND')})`; // company: (IBM AND APPLE AND GOOGLE)\n    }\n\n\n    /**\n     * Return an expression that selects multiple values for a field\n     * (All values are ORed)\n     * This function should be equivalent to using makeListExpr\n     * @param field Name of the field to select (eg. \"company\")\n     * @param values Values of the field to select (eg. ['IBM','APPLE'])\n     * @param display Optional string to display that value (eg. \"IBM and Apple\")\n     */\n    makeOrExpr(field: string, values: (string | ValueItem)[], display?: string): string {\n        field = this.formatField(field, display);\n        return `${field}: (${this.concatWithOperator(values, 'OR')})`; // company: (IBM OR APPLE OR GOOGLE)\n    }\n\n    /**\n     * Combine a list of values with AND or OR operators\n     * @param values the list of values\n     * @param operator the operator\n     */\n    private concatWithOperator(values: (string | ValueItem)[], operator: 'AND' | 'OR') {\n        return values.map(v => {\n            if (Utils.isString(v)){\n                return ExprParser.escape(v);\n            }\n            if (v.display) {\n                return `${ExprParser.escape(v.display)}:${ExprParser.escape(Utils.toSqlValue(v.value))}`;\n            }\n            return ExprParser.escape(Utils.toSqlValue(v.value));\n        }).join(' '+operator+' ');\n    }\n\n    /**\n     * Returns the negative expression of the given expression\n     * eg. NOT(person:Bill GATES)\n     * @param expr\n     */\n    makeNotExpr(expr: string): string {\n        return `NOT (${expr})`;\n    }\n\n    /**\n     * Returns an expression that is the union of given expressions\n     * eg. person:Bill GATES OR company:MICROSOFT\n     * @param exprs\n     */\n    concatOrExpr(exprs: string[]): string {\n        if (exprs.length <= 1) {\n            return exprs[0] || '';\n        }\n        return `(${exprs.join(') OR (')})`;\n    }\n\n\n    /**\n     * Returns an expression that is the intersection of given expressions\n     * eg. person:Bill GATES AND company:MICROSOFT\n     * @param exprs\n     */\n    concatAndExpr(exprs: string[]): string {\n        if (exprs.length <= 1) {\n            return exprs[0] || '';\n        }\n        return `(${exprs.join(') AND (')})`;\n    }\n\n\n    /**\n     * Returns an expression to select the given item\n     * @param field Name of the field to select (eg. \"company\")\n     * @param items A single or list of ValueItem object(s) (eg. content of a record)\n     */\n    makeFieldExpr(field: string, items: ValueItem | ValueItem[], combineWithAnd?: boolean): string {\n        if(!Utils.isArray(items)) {\n            items = [items];\n        }\n        if(items.length === 0) {\n            return \"\"; // Return a falsy string instead of \"()\" or \"``\" which would be truthy\n        }\n        return combineWithAnd? this.makeAndExpr(field, items) : this.makeOrExpr(field, items);\n    }\n\n    /**\n     * Create an expression for the given aggregation item\n     * @param aggregation The aggregation containing this object\n     * @param items The AggregationItem(s) to select\n     * @param combineWithAnd If there are multiple values, combine them with AND (instead of OR)\n     */\n    makeAggregationExpr(aggregation: Aggregation, items: AggregationItem | AggregationItem[], combineWithAnd?: boolean): string {\n        if(!Utils.isArray(items)) {\n            items = [items];\n        }\n        if(aggregation.valuesAreExpressions) {\n            const exprs = items.map(i => i.value.toString()); // .toString() is to avoid typing issues. With valuesAreExpressions = true, item.value is expected to be a string\n            return combineWithAnd? this.concatAndExpr(exprs) : this.concatOrExpr(exprs);\n        }\n        else {\n            const _items = this.asValueItems(items, aggregation.isTree);\n            return this.makeFieldExpr(aggregation.column, _items, combineWithAnd);\n        }\n    }\n\n\n    /**\n     * Combines the field with the optional display value(s)\n     * @param field\n     * @param display\n     */\n    private formatField(field: string, display?: string): string {\n        if(display) {\n            field = `${field}${ExprParser.escape(display)}`;\n        }\n        return field;\n    }\n\n\n    /**\n     * Return the AggregationItem list as a ValueItem list\n     * @param items\n     * @param isTree\n     */\n    private asValueItems(items: AggregationItem[], isTree?: boolean): ValueItem[] {\n        if(isTree) {\n            return items.map(i => {\n                return {\n                    value: (i as TreeAggregationNode).$path + \"*\",\n                    display: i.display || i.value as string\n                };\n            });\n        }\n        return items; // This works because ValueItem and AggregationItem share the value and display properties\n    }\n}\n","export default {\n    \"statusBar\": {\n        \"fullscreenTitleEnter\": \"Vollbildmodus\",\n        \"fullscreenTitleExit\": \"Volbildmodus verlassen\",\n        \"networkActivity\": \"Netzwerk-Aktivität\"\n    }\n};\n","export * from \"./public-api\";\n","import {Component, Input} from \"@angular/core\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {SelectionService} from \"../../selection.service\";\n\n@Component({\n    selector: \"sq-result-selector\",\n    templateUrl: \"./result-selector.html\"\n})\nexport class BsResultSelector {\n    @Input() record: Record;\n\n    constructor(\n        public selectionService: SelectionService) {\n    }\n\n}","<label class=\"sq-select-results-item custom-control custom-control-inline custom-checkbox\"\n    title=\"{{(record.$selected ? 'msg#resultSelector.unselectDocument' : 'msg#resultSelector.selectDocument') | sqMessage}}\"\n    [attr.aria-label]=\"(record.$selected ? 'msg#resultSelector.unselectDocument' : 'msg#resultSelector.selectDocument') | sqMessage\">\n    <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"record.$selected\" (change)=\"selectionService.toggleSelectedRecords(record, 'result')\">\n    <span class=\"custom-control-label\">&#8203;</span>\n</label>","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\nimport {FormatService, ValueItem} from \"@sinequa/core/app-utils\";\nimport {CCColumn} from \"@sinequa/core/web-services\";\nimport {Utils, FieldValue} from \"@sinequa/core/base\";\n\n@Pipe({name: \"sqValue\", pure: false})\nexport class ValuePipe extends AbstractIntlPipe {\n    constructor(\n        protected formatService: FormatService,\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: ValueItem | FieldValue, params: CCColumn): void {\n        super.updateValue(key, params);\n        this.value = this.formatService.formatFieldValue(key, params);\n        this.value = Utils.replace(this.value, /;/g, \"$&\\u200B\");\n    }\n}","import {Component, Input} from \"@angular/core\";\nimport {Record} from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-result-labels\",\n    templateUrl: \"./result-labels.component.html\"\n})\nexport class ResultLabels {\n    @Input() record: Record;\n    @Input() caption: string;\n    @Input() public: boolean;\n}\n","<span *ngIf=\"caption\" class=\"sq-text\">{{caption | sqMessage}}</span>\n<sq-labels [record]=\"record\" [public]=\"public\"></sq-labels>\n","import {Component, Input} from \"@angular/core\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {Query} from \"@sinequa/core/app-utils\";\nimport {ModalService} from \"@sinequa/core/modal\";\nimport {PreviewService} from \"../../preview.service\";\n\n@Component({\n    selector: \"sq-result-link-preview\",\n    templateUrl: \"./result-link-preview.html\"\n})\nexport class BsResultLinkPreview {\n    @Input() query: Query;\n    @Input() record: Record;\n    @Input() icon: string = \"fas fa-search\";\n    @Input() text: string = \"\";\n    @Input() title: string = \"\";\n    @Input() usePopup: boolean;\n    @Input() newWindow: boolean;\n    @Input() displaySimilarDocuments: boolean;\n    @Input() metadata: string[];\n\n    constructor(\n        public modalService: ModalService,\n        public previewService: PreviewService) {\n    }\n\n    click(event: MouseEvent) {\n        if (this.usePopup) {\n            if (event.ctrlKey) {\n                this.previewService.openNewWindow(this.record, this.query);\n            }\n            else {\n                this.previewService.openModal(this.record, this.query, {displaySimilarDocuments: this.displaySimilarDocuments, metadata: this.metadata});\n            }\n        }\n        else {\n            if(this.newWindow){\n                this.previewService.openNewWindow(this.record, this.query);\n            }\n            else {\n                this.previewService.openRoute(this.record, this.query);\n            }\n        }\n        return false;\n    }\n}","<a href=\"#\" (click)=\"click($event)\" title=\"{{title | sqMessage}}\">\n    <ng-container *ngIf=\"!!icon\">\n        <span class=\"{{icon}}\"></span>\n    </ng-container>\n    <ng-container *ngIf=\"!!text\">{{text | sqMessage}}</ng-container>\n</a>","import {Component, OnInit, Input, ChangeDetectionStrategy} from \"@angular/core\";\nimport {Action, ActionButtonsOptions} from \"@sinequa/components/action\";\nimport {FeedbackService} from \"../../feedback.service\";\n\n@Component({\n    selector: \"sq-feedback-menu\",\n    templateUrl: \"./feedback-menu.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsFeedbackMenu implements OnInit {\n\n    @Input() size: string;\n    @Input() style: string;\n    @Input() rightAligned: boolean;\n\n    items: Action[];\n    options: ActionButtonsOptions;\n\n    constructor(\n        public feedbackService: FeedbackService) {\n    }\n\n    ngOnInit() {\n        this.items = this.feedbackService.buildFeedbackAction();\n        this.options = {\n            items: this.items, \n            autoAdjust: true, \n            rightAligned: this.rightAligned, \n            size: this.size, \n            style: this.style\n        };\n    }\n\n\n}","<div [sq-action-buttons]=\"options\"></div>","export default {\n    \"system\": {\n        \"date\": \"{time, selectordinal, =0 {{date, date}} other {{date, date}, {date, time, medium}}}\",\n        \"number\": \"{value, number}\",\n        \"boolean\": \"{value, select, true {wahr} other {falsch}}\",\n        \"percent\": \"{value, number, percent}\",\n        \"fieldSeparator\": \": \",\n        \"memorySize\": {\n            \"bytes\": \"{value, number, sqZeroDecimalPlaces} B\",\n            \"kb\": \"{value, number, sqZeroDecimalPlaces} KB\",\n            \"mb\": \"{value, number, sqOneDecimalPlace} MB\",\n            \"gb\": \"{value, number, sqTwoDecimalPlaces} GB\",\n            \"tb\": \"{value, number, sqThreeDecimalPlaces} TB\",\n            \"pb\": \"{value, number, sqFourDecimalPlaces} PB\"\n        }\n    },\n\n    \"error\": {\n        \"serverError\": \"Serverfehler\",\n        \"loginCancelled\": \"Anmeldung abgebrochen (login cancelled)\",\n        \"processedCredentialsError\": \"Verarbeitete Anmeldeinformationen konnten nicht ermittelt werden (unable to get processed credentials)\",\n        \"autoLoginError\": \"Anmeldung fehlgeschlagen (login failed)\",\n        \"principalSwitched\": \"Der angemeldete Benutzer hat sich geändert (the logged in user has changed)\",\n        \"userOverrideFailure\": \"Benutzerwechsel fehlgeschlagen (unable to override user)\",\n        \"responseLoadFailure\": \"Antwort konnte nicht geladen werden (failed to load response)\",\n        \"unknownError\": \"Unbekannter Fehler\"\n    },\n\n    \"language\": {\n        \"ar\": \"Arabisch\",\n        \"da\": \"Dänisch\",\n        \"de\": \"Deutsch\",\n        \"el\": \"Griechisch\",\n        \"en\": \"Englisch\",\n        \"es\": \"Spanisch\",\n        \"fi\": \"Finnisch\",\n        \"fr\": \"Französisch\",\n        \"it\": \"Italienisch\",\n        \"ja\": \"Japanisch\",\n        \"ko\": \"Koreanisch\",\n        \"nl\": \"Niederländisch\",\n        \"no\": \"Norwegisch\",\n        \"pl\": \"Polnisch\",\n        \"pt\": \"Portugiesisch\",\n        \"ro\": \"Rumänisch\",\n        \"ru\": \"Russisch\",\n        \"sv\": \"Schwedisch\",\n        \"th\": \"Thailändisch\",\n        \"zh\": \"Traditionelles Chinesisch\",\n        \"zs\": \"Vereinfachtes Chinesisch\",\n        \"zz\": \"Unbekannt\"\n    },\n};\n","export * from \"./autocomplete-list/autocomplete-list\";\nexport * from \"./field-search-items.component\";\nexport * from \"./autocomplete.module\";","export default {\n    results: {\n        missingTerms: \"Termes manquants :\",\n        resultsCount: \"{count, plural, =0 {aucune réponse} one {# réponse} other {# réponses}}\",\n    },\n    userRatings: {\n        average: \"Moyenne : {average}\"\n    },\n};\n","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnChanges, SimpleChanges, ViewChild } from \"@angular/core\";\r\nimport { Action } from \"@sinequa/components/action\";\r\nimport { AbstractFacet } from \"@sinequa/components/facet\";\r\nimport { SearchService } from \"@sinequa/components/search\";\r\nimport { SelectionService } from \"@sinequa/components/selection\";\r\nimport { ExprBuilder, FormatService, ValueItem } from \"@sinequa/core/app-utils\";\r\nimport { AggregationItem, Results } from \"@sinequa/core/web-services\";\r\n\r\nimport * as d3 from 'd3';\r\n\r\n\r\nexport interface MoneyCloudDatum {\r\n    value: number;\r\n    currency: string;\r\n    count: number;\r\n    category: string;\r\n    i: number;\r\n    rawvalue: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'sq-money-cloud',\r\n    templateUrl: './money-cloud.component.html',\r\n    styleUrls: ['./money-cloud.component.scss']\r\n})\r\nexport class MoneyCloudComponent extends AbstractFacet implements OnChanges,AfterViewInit {\r\n    @Input() name = \"money-cloud\"\r\n\r\n    @Input() results: Results;\r\n    /** The \"money-value\" column stores an entity in the form \"(KEYWORD)#(<CURRENCY> <NUMERAL>)\", for example \"(DEAL)#(USD 69420)\" */\r\n    @Input() moneyValueColumn = \"value_amount\";\r\n    /** The \"Money-Value\" aggregation must be computed over the money-value column */\r\n    @Input() moneyAggregation = \"ValueAmounts\";\r\n\r\n    @Input() width = 600;\r\n    @Input() height = 200;\r\n    @Input() margin = {top: 15, bottom: 30, left: 40, right: 15};\r\n\r\n    @Input() showTooltip = true;\r\n    @Input() theme: \"light\" | \"dark\" = \"light\";\r\n\r\n    data: MoneyCloudDatum[];\r\n    categories: string[];\r\n\r\n    selectedItems: Set<string>;\r\n\r\n    // Scales\r\n    x: d3.ScaleBand<string>; // Read/Write\r\n    x_inner: d3.ScaleLinear<number, number>; // Read/Write\r\n    y: d3.ScaleLogarithmic<number, number>; // Read-only / domain updated\r\n    r: d3.ScaleLogarithmic<number,number>; // Radius (function of counts)\r\n    c: d3.ScaleOrdinal<string, string>; // Color\r\n\r\n    // Elements\r\n    @ViewChild(\"overlay\") overlay: ElementRef;\r\n    @ViewChild(\"xAxis\") gx: ElementRef;\r\n    @ViewChild(\"yAxis\") gy: ElementRef;\r\n\r\n    // Selections\r\n    xAxis$: d3.Selection<SVGGElement, string, null, undefined>;\r\n    yAxis$: d3.Selection<SVGGElement, number, null, undefined>;\r\n    \r\n    // Tooltips\r\n    tooltipItem: MoneyCloudDatum | undefined;\r\n    tooltipOrientation: \"left\" | \"right\";\r\n    tooltipTop: number;\r\n    tooltipRight: number;\r\n    tooltipLeft: number;\r\n\r\n    viewInit: boolean;\r\n    \r\n    clearFilters: Action;\r\n\r\n    constructor(\r\n        private el: ElementRef,\r\n        protected cdRef: ChangeDetectorRef,\r\n        public searchService: SearchService,\r\n        public exprBuilder: ExprBuilder,\r\n        public selectionService: SelectionService,\r\n        public formatService: FormatService\r\n    ){\r\n        super();\r\n\r\n        // Clear the current filters\r\n        this.clearFilters = new Action({\r\n            icon: \"far fa-minus-square\",\r\n            title: \"msg#facet.clearSelects\",\r\n            action: () => {\r\n                this.searchService.query.removeSelect(this.name, true);\r\n                this.searchService.search();\r\n            }\r\n        });\r\n\r\n        this.selectionService.events.subscribe(e => this.updateSelectedItems());\r\n    }\r\n\r\n    get actions(): Action[] {\r\n        const actions: Action[] = [];\r\n        if(this.searchService.query.findSelect(this.name)){\r\n            actions.push(this.clearFilters);\r\n        }\r\n        return actions;\r\n    }\r\n\r\n    get innerWidth(): number {\r\n        return this.width - this.margin.left - this.margin.right;\r\n    }\r\n\r\n    get innerHeight(): number {\r\n        return this.height - this.margin.top - this.margin.bottom;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n\r\n        if(!this.x) {\r\n            \r\n            // Scales\r\n            this.x = d3.scaleBand<string>()\r\n                .range([0, this.innerWidth]);\r\n                \r\n            this.x_inner = d3.scaleLinear<number, number>();\r\n\r\n            this.y = d3.scaleLog()\r\n                .range([this.innerHeight, 0]);\r\n\r\n            this.r = d3.scaleLog()\r\n                .range([4, 10]);\r\n\r\n            this.c = d3.scaleOrdinal<string>()\r\n                .range(d3.schemeCategory10);\r\n                \r\n        }\r\n        \r\n        // Resize handling\r\n\r\n        if(changes[\"height\"]) {\r\n            this.y.range([this.innerHeight, 0]);\r\n            if(this.viewInit) {\r\n                this.drawYAxis();\r\n            }\r\n        }\r\n\r\n        if(changes[\"width\"]) {\r\n            this.x.range([0, this.innerWidth]);\r\n            if(this.viewInit) {\r\n                this.drawXAxis();\r\n            }\r\n        }\r\n\r\n        if(this.viewInit && changes[\"results\"] && this.results){\r\n            this.updateChart();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        \r\n        // Get native elements\r\n        this.xAxis$ = d3.select(this.gx.nativeElement);\r\n        this.yAxis$ = d3.select(this.gy.nativeElement);\r\n\r\n        d3.select(this.overlay.nativeElement)        \r\n            .on(\"mousemove\", () => this.onMousemove());\r\n        \r\n        this.viewInit = true;\r\n\r\n        this.updateChart();\r\n        \r\n        // This is necessary to prevent \"Expression has changed after check\" errors\r\n        // caused by calling updateChart inside ngAfterViewInit().\r\n        // Unfortunately this is necessary because we need the DOM to be rendered in order fill the DOM\r\n        // (for example gAxis needs to exist so we can draw the axis)\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    updateChart() {\r\n\r\n        this.turnoffTooltip();\r\n\r\n        if(this.results) {\r\n            \r\n            this.updateData();\r\n\r\n            // Update scales\r\n            this.updateScales();\r\n\r\n            // Update Axes\r\n            this.updateAxes();\r\n\r\n        }\r\n    }\r\n\r\n    updateData() {\r\n\r\n        this.updateSelectedItems();\r\n        \r\n        const counts = new Map<string, number>();\r\n\r\n        this.data = [];\r\n        // Extract number of occurrences from the aggregation\r\n        this.results.aggregations\r\n            ?.find(a => a.name === this.moneyAggregation)\r\n            ?.items\r\n            ?.forEach(item => {\r\n                const datum = this.parseEntity(item, counts);\r\n                if(datum) {\r\n                    this.data.push(datum);\r\n                }\r\n            });\r\n\r\n        this.data.forEach(d => d.i = (d.i-0.5) / counts.get(d.category)!); // Normalize i between 0 and 1\r\n\r\n    }\r\n\r\n    /**\r\n     * Parse the entity stored in the \"money-value\" column and returns a datum (incl. numerical value and currency)\r\n     */\r\n    @Input()\r\n    parseEntity = (item: AggregationItem, counts: Map<string, number>): MoneyCloudDatum | undefined => {\r\n        const rawvalue = item.value as string;\r\n        const [category, amount] = item.display!.substr(1, item.display!.length-2).split(\")#(\");\r\n        const [currency, valuestr] = amount.split(\" \");\r\n        const value = parseFloat(valuestr);\r\n        // Check the data is valid\r\n        if(isNaN(value) || value <= 0) {\r\n            return undefined;\r\n        }        \r\n        counts.set(category, (counts.get(category) || 0) + 1);\r\n        return {\r\n            value,\r\n            count: item.count,\r\n            category,\r\n            currency,\r\n            rawvalue,\r\n            i: counts.get(category)!\r\n        };\r\n    }\r\n\r\n    updateScales() {\r\n\r\n        if(this.data.length) {\r\n            const yExtent = d3.extent<MoneyCloudDatum, number>(this.data, d => d.value);\r\n            const rExtent = d3.extent<MoneyCloudDatum, number>(this.data, d => d.count);\r\n\r\n            if(!yExtent[0] || !yExtent[1] || !rExtent[0] || !rExtent[1]) {\r\n                return;\r\n            }\r\n\r\n            this.x.domain(this.data.map(d => d.category));\r\n            this.x_inner\r\n                .domain([0, 1])\r\n                .range([0, this.x.bandwidth()]);\r\n            this.y.domain(yExtent);\r\n            this.r.domain(rExtent);\r\n            this.c.domain(this.data.map(d => d.currency));\r\n\r\n            this.categories = this.x.domain();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public updateSelectedItems() {\r\n        this.selectedItems = new Set<string>();\r\n        this.selectionService.getSelectedItems().forEach(r => {\r\n            r[this.moneyValueColumn]?.forEach((item: ValueItem) => {\r\n                this.selectedItems.add(item.value as string);\r\n            });\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Update the x and y axes\r\n     */\r\n    protected updateAxes(){\r\n        this.drawXAxis();\r\n        this.drawYAxis();\r\n    }\r\n\r\n    /**\r\n     * Draws the X axis\r\n     */\r\n     protected drawXAxis() {\r\n        const xAxis = d3.axisBottom(this.x);\r\n        this.xAxis$.call(xAxis);\r\n        //this.xAxis$.selectAll(\".domain\").remove(); // Remove the axis line\r\n    }\r\n\r\n    /**\r\n     * Draws the Y axis\r\n     */\r\n    protected drawYAxis() {\r\n        const yAxisTicks = this.y.ticks(5)\r\n            .filter(tick => Number.isInteger(tick)); // Keep only integer ticks https://stackoverflow.com/questions/13576906/d3-tick-marks-on-integers-only/56821215\r\n\r\n        const yAxis = d3.axisLeft<number>(this.y)\r\n            .tickSizeInner(-this.innerWidth)\r\n            .tickValues(yAxisTicks)\r\n            .tickFormat(this.formatService.moneyFormatter); //https://github.com/d3/d3-format\r\n        this.yAxis$.call(yAxis);\r\n        //this.yAxis$.selectAll(\".domain\").remove(); // Remove the axis line\r\n    }\r\n\r\n    \r\n    /**\r\n     * Redraw the simple tooltip (vertical line)\r\n     */\r\n    onMousemove() {\r\n        this.tooltipItem = undefined;\r\n    }\r\n\r\n    filterDatum(datum: MoneyCloudDatum) {\r\n        const expr = this.exprBuilder.makeExpr(this.moneyValueColumn, datum.rawvalue)\r\n        this.searchService.query.addSelect(expr, this.name);\r\n        this.searchService.search();\r\n    }\r\n\r\n    onMouseEnterDatum(datum: MoneyCloudDatum) {\r\n\r\n        this.tooltipItem = datum;\r\n\r\n        const x = this.x(datum.category)! + this.x_inner(datum.i)!;\r\n        const y = this.y(datum.value);\r\n        const r = this.r(datum.count);\r\n\r\n        // Since we use viewBox to auto-adjust the SVG to the container size, we have to\r\n        // convert from the SVG coordinate system to the HTML coordinate system\r\n        const actualWidth = (this.el.nativeElement as HTMLElement).offsetWidth;\r\n        const scale = actualWidth / this.width;\r\n        const relativeX = x! / this.width;\r\n\r\n        // Tooltip to the right\r\n        if(relativeX < 0.5) {\r\n            this.tooltipOrientation = \"right\";\r\n            this.tooltipLeft = scale * (this.margin.left + x! + r);\r\n        }\r\n        // Tooltip to the left\r\n        else {\r\n            this.tooltipOrientation = \"left\";\r\n            this.tooltipRight = actualWidth - scale * (this.margin.left + x! - r);\r\n        }\r\n        this.tooltipTop = scale * (this.margin.top + y); // Align tooltip arrow\r\n    }\r\n    \r\n    /**\r\n     * Turns off the tooltip\r\n     */\r\n    turnoffTooltip = () => {\r\n        if(this.tooltipItem) {\r\n            this.tooltipItem = undefined;\r\n        }\r\n    }\r\n}","<svg [attr.viewBox]=\"'0 0 '+width+' '+height\">\r\n\r\n    <g [attr.transform]=\"'translate('+margin.left+','+ margin.top +')'\">\r\n\r\n        <g #overlay>\r\n            <rect *ngFor=\"let category of categories\"\r\n                class=\"category\"\r\n                [attr.x]=\"x(category)\"\r\n                [attr.width]=\"x.bandwidth()\"\r\n                [attr.height]=\"innerHeight\">\r\n                <title>{{category}}</title>\r\n            </rect>\r\n        </g>\r\n\r\n        <!-- X Axis (built in the controler) -->\r\n        <g #xAxis class=\"x axis\" [attr.transform]=\"'translate(0,'+ innerHeight +')'\"></g>\r\n\r\n        <!-- Y Axis (built in the controler) -->\r\n        <g #yAxis class=\"y axis\"></g>\r\n\r\n        <circle *ngFor=\"let datum of data\"\r\n            class=\"datum\"\r\n            [attr.cx]=\"x(datum.category)! + x_inner(datum.i)!\"\r\n            [attr.cy]=\"y(datum.value)\"\r\n            [attr.r]=\"r(datum.count)\"\r\n            [attr.fill]=\"selectedItems.has(datum.rawvalue)? 'red' : c(datum.currency)\"\r\n            (mouseenter)=\"onMouseEnterDatum(datum)\">\r\n        </circle>\r\n\r\n    </g>\r\n\r\n</svg>\r\n\r\n<!-- Tooltip -->\r\n<sq-tooltip *ngIf=\"tooltipItem\" class=\"text-center\"\r\n    [orientation]=\"tooltipOrientation\" [left]=\"tooltipLeft\" [right]=\"tooltipRight\" [top]=\"tooltipTop\" [theme]=\"theme\">\r\n    <div>\r\n        \"{{tooltipItem.category}} {{tooltipItem.currency}} {{formatService.moneyFormatter(tooltipItem.value)}}\"\r\n        <small>({{tooltipItem.count}} mentions)</small>\r\n        <button (click)=\"filterDatum(tooltipItem)\" class=\"btn btn-sm btn-link\" [sqTooltip]=\"'msg#money.filter' | sqMessage\">\r\n            <i class=\"fas fa-filter\"></i>\r\n        </button>\r\n    </div>\r\n</sq-tooltip>","export default {\n    \"validation\": {\n        \"min\": \"Der Mindestwert ist {min}\",\n        \"max\": \"Der Wert kann nicht größer sein als {max}\",\n        \"required\": \"Dies ist ein Mussfeld\",\n        \"requiredTrue\": \"Dieses Feld muss ausgefüllt werden\",\n        \"email\": \"Eine gültige E-Mail-Adresse ist einzutragen\",\n        \"minLength\": \"Die Mindestlänge des Wertes beträgt {requiredLength, plural, one {# Zeichen} other {# Zeichen}}\",\n        \"maxLength\": \"Der Wert darf nicht mehr als {requiredLength, plural, one {# Zeichen} other {# Zeichen}} haben\",\n        \"pattern\": \"Der Wert ist ungültig\",\n        \"unique\": \"Dieses Feld muss eindeutig sein\",\n        \"integer\": \"Der Wert muss eine ganze Zahl sein\",\n        \"number\": \"Der Wert muss eine Nummer sein\",\n        \"date\": \"\",\n        \"range\": \"Der erste Wert muss kleiner oder gleich dem zweiten Wert sein\"\n    }\n};\n","export * from \"./public-api\";","export * from \"./metadata/metadata\";\nexport * from \"./metadata-access-lists-item/metadata-access-lists-item\";\nexport * from \"./metadata-access-lists-item-single-access-list/metadata-access-lists-item-single-access-list\";\nexport * from \"./metadata-item/metadata-item\";\nexport * from \"./metadata.module\";\nexport * from \"./messages/index\";","export const darkStyle = [\n    {\n      \"elementType\": \"geometry\",\n      \"stylers\": [\n        {\n          \"color\": \"#1d2c4d\"\n        }\n      ]\n    },\n    {\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#8ec3b9\"\n        }\n      ]\n    },\n    {\n      \"elementType\": \"labels.text.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#1a3646\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"administrative.country\",\n      \"elementType\": \"geometry.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#4b6878\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"administrative.land_parcel\",\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#64779e\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"administrative.province\",\n      \"elementType\": \"geometry.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#4b6878\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"landscape.man_made\",\n      \"elementType\": \"geometry.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#334e87\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"landscape.natural\",\n      \"elementType\": \"geometry\",\n      \"stylers\": [\n        {\n          \"color\": \"#023e58\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"poi\",\n      \"elementType\": \"geometry\",\n      \"stylers\": [\n        {\n          \"color\": \"#283d6a\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"poi\",\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#6f9ba5\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"poi\",\n      \"elementType\": \"labels.text.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#1d2c4d\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"poi.park\",\n      \"elementType\": \"geometry.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#023e58\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"poi.park\",\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#3C7680\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"road\",\n      \"elementType\": \"geometry\",\n      \"stylers\": [\n        {\n          \"color\": \"#304a7d\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"road\",\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#98a5be\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"road\",\n      \"elementType\": \"labels.text.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#1d2c4d\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"road.highway\",\n      \"elementType\": \"geometry\",\n      \"stylers\": [\n        {\n          \"color\": \"#2c6675\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"road.highway\",\n      \"elementType\": \"geometry.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#255763\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"road.highway\",\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#b0d5ce\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"road.highway\",\n      \"elementType\": \"labels.text.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#023e58\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"transit\",\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#98a5be\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"transit\",\n      \"elementType\": \"labels.text.stroke\",\n      \"stylers\": [\n        {\n          \"color\": \"#1d2c4d\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"transit.line\",\n      \"elementType\": \"geometry.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#283d6a\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"transit.station\",\n      \"elementType\": \"geometry\",\n      \"stylers\": [\n        {\n          \"color\": \"#3a4762\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"water\",\n      \"elementType\": \"geometry\",\n      \"stylers\": [\n        {\n          \"color\": \"#222222\"\n        }\n      ]\n    },\n    {\n      \"featureType\": \"water\",\n      \"elementType\": \"labels.text.fill\",\n      \"stylers\": [\n        {\n          \"color\": \"#4e6d70\"\n        }\n      ]\n    }\n  ];","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Record} from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-result-missing-terms\",\n    templateUrl: \"./result-missing-terms.html\",\n    styleUrls: [\"./result-missing-terms.css\"]\n})\nexport class ResultMissingTerms implements OnChanges {\n    @Input() record: Record;\n    missingTerms: string[];\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"record\"]) {\n            this.missingTerms = [];\n            if (this.record.termspresence) {\n                for (const tp of this.record.termspresence) {\n                    if (Utils.eqNC(tp.presence, \"missing\")) {\n                        this.missingTerms.push(tp.term);\n                    }\n                }\n            }\n        }\n    }\n}","<ng-container *ngIf=\"missingTerms.length > 0\">\n    <span class=\"sq-missing-terms-label sq-text\">{{'msg#results.missingTerms' | sqMessage}}</span>\n    <span class=\"sq-missing-terms sq-text\">\n        <span *ngFor=\"let term of missingTerms\" class=\"sq-missing-term\"> {{term}}</span>\n    </span>\n</ng-container>\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\nimport {LabelsService} from \"./labels.service\";\n\n@Pipe({name: \"sqLabel\", pure: false})\nexport class LabelPipe extends AbstractIntlPipe {\n    constructor(\n        protected labelsService: LabelsService,\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(value: string, _public?: boolean): void {\n        super.updateValue(value, _public);\n        this.value = value;\n        if (!_public) {\n            this.value = <string>this.labelsService.removePrivatePrefix(this.value);\n        }\n        this.value = this.intlService.formatMessage(this.value);\n    }\n}","export * from \"./public-api\";","export * from \"./messages/index\";\nexport * from \"./default-locales-config\";","import enNotification from \"./en\";\nimport frNotification from \"./fr\";\nimport deNotification from \"./de\";\n\nexport { enNotification, frNotification, deNotification };\n","import {Pipe, PipeTransform, OnDestroy, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {IntlService} from \"./intl.service\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * An abstract base class for pipes that should refresh automatically\n * when the current locale on {@link IntlService} changes. Pipes should\n * be declared as `pure: false` - the current value is cached to avoid\n * unnecessary processing\n */\n@Pipe({name: \"sqAbstractIntlPipe\", pure: false})\nexport abstract class AbstractIntlPipe implements PipeTransform, OnDestroy {\n    protected value: any = \"\";\n    protected lastValue: any;\n    protected lastParams: any;\n    protected localeChange: Subscription;\n\n    constructor(\n        protected intlService: IntlService,\n        protected changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    protected updateValue(value: any, params?: any): void {\n        this.lastValue = value;\n        this.lastParams = params;\n        this.changeDetectorRef.markForCheck();\n    }\n\n    transform(value: any, params?: any): any {\n        // if we ask another time for the same key, return the last value\n        if (Utils.equals(value, this.lastValue) && Utils.equals(params, this.lastParams)) {\n            return this.value;\n        }\n\n        // set the value\n        this.updateValue(value, params);\n\n        // subscribe to localeChange event\n        if (!this.localeChange) {\n            this.localeChange = this.intlService.events.subscribe(\n                (event) => {\n                    if (!Utils.isEmpty(this.lastValue)) {\n                        this.lastValue = null;\n                        this.updateValue(value, params);\n                    }\n                });\n        }\n\n        return this.value;\n    }\n\n    ngOnDestroy(): void {\n        if (this.localeChange) {\n            this.localeChange.unsubscribe();\n        }\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {BsModalModule} from \"@sinequa/components/modal\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsEditUserSettings} from \"./edit-user-settings/edit-user-settings\";\nimport {BsUserSettingsEditor} from './user-settings-editor/user-settings-editor';\nimport {BsUserMenuComponent} from './user-menu/user-menu.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n\n        IntlModule,\n        ValidationModule,\n\n        BsModalModule,\n        BsActionModule,\n        UtilsModule,\n    ],\n    declarations: [\n        BsEditUserSettings, BsUserSettingsEditor, BsUserMenuComponent\n    ],\n    exports: [\n        BsEditUserSettings, BsUserSettingsEditor, BsUserMenuComponent\n    ],\n})\nexport class BsUserSettingsModule {\n}\n","import { Injectable, Inject } from \"@angular/core\";\nimport { Observable } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { SqHttpClient } from \"./http-client\";\nimport { HttpService } from \"./http.service\";\nimport { START_CONFIG, StartConfig } from \"./start-config.web.service\";\nimport { Record } from \"./query.web.service\";\n\n/**\n * A service for calling the similardocuments web service\n */\n@Injectable({\n  providedIn: \"root\"\n})\nexport class SimilarDocumentsWebService extends HttpService {\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Gets an array of documents (records) similar to the passed document\n     *\n     * @param sourceDocumentId The id of the document for which to retrieve similar documents\n     * @param queryName The name of the query\n     */\n    public get(sourceDocumentId: string, queryName: string): Observable<Record[]> {\n      return this.httpClient.post<{data: Record[]}>(this.makeUrl(\"similardocuments\"),\n        {\n          app: this.appName,\n          sourceDocumentId,\n          query: {\n            name: queryName\n          }\n        }).pipe(map((response) => response.data));\n    }\n}\n","/* Dépendences fonctionnelles internes d'Angular */\nimport { Injectable } from \"@angular/core\";\nimport {\n    FormControl,\n    ValidatorFn,\n    AsyncValidatorFn,\n    Validators,\n    AbstractControl,\n} from \"@angular/forms\";\n\n/* Services */\nimport { Utils } from \"@sinequa/core/base\";\nimport { SearchService } from \"@sinequa/components/search\";\nimport {\n    AppService,\n    Expr,\n    ExprOperator,\n    FormatService,\n    Query,\n    advancedFacetPrefix,\n    ExprBuilder,\n    ValueItem,\n} from \"@sinequa/core/app-utils\";\nimport { ValidationService } from \"@sinequa/core/validation\";\nimport { CCColumn } from \"@sinequa/core/web-services\";\n\n/**\n * Defines the possible basic types of an advanced value\n */\nexport type BaseAdvancedValue = string | number | Date | boolean | undefined;\n\n/**\n * Defines an advanced value type as either a single basic advanced value or an array of basic advanced values\n */\nexport type AdvancedValue = BaseAdvancedValue | BaseAdvancedValue[];\n\nexport interface AdvancedFormValidators {\n    min: (min: string | number | Date, field: string) => ValidatorFn;\n    max: (max: string | number | Date, field: string) => ValidatorFn;\n    required: ValidatorFn;\n    email: ValidatorFn;\n    pattern: (pattern: string | RegExp) => ValidatorFn;\n    integer: (field: string) => ValidatorFn;\n    number: (field: string) => ValidatorFn;\n    date: (field: string) => ValidatorFn;\n    range: (field: string) => ValidatorFn;\n}\n\n@Injectable({\n    providedIn: \"root\",\n})\nexport class AdvancedService {\n    /**\n     * Default form validators packaged within SBA to standardize advanced-search validation\n     */\n    public readonly validators: AdvancedFormValidators = {\n        min: (min, field) =>\n            this.validationService.minValidator(min, this._parser(field)),\n        max: (max, field) =>\n            this.validationService.maxValidator(max, this._parser(field)),\n        required: Validators.required,\n        email: Validators.email,\n        pattern: (pattern: string | RegExp) => Validators.pattern(pattern),\n        integer: (field) =>\n            this.validationService.integerValidator(this._parser(field)),\n        number: (field) =>\n            this.validationService.numberValidator(this._parser(field)),\n        date: (field) =>\n            this.validationService.dateValidator(this._parser(field)),\n        range: (field) =>\n            this.validationService.rangeValidator(\n                this._rangeType(field),\n                this._parser(field)\n            ),\n    };\n\n    constructor(\n        public appService: AppService,\n        public searchService: SearchService,\n        public validationService: ValidationService,\n        public formatService: FormatService,\n        public exprBuilder: ExprBuilder\n    ) {}\n\n    /**\n     * Return a standard FormControl compatible with a select component\n     * @param field\n     * @param validators optional validators to be added to the returned FormControl\n     * @param asyncValidators optional asyncValidators to be added to the returned FormControl\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public createSelectControl(\n        field: string,\n        validators?: ValidatorFn[],\n        asyncValidators?: AsyncValidatorFn[],\n        query = this.searchService.query\n    ): FormControl {\n        const value = this.getValue(field, query);\n        return this.createControl(value, validators, asyncValidators);\n    }\n\n    /**\n     * Return a standard FormControl compatible with a range-input component\n     * @param field\n     * @param validators optional validators to be added to the returned FormControl\n     * @param asyncValidators optional asyncValidators to be added to the returned FormControl\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public createRangeControl(\n        field: string,\n        validators?: ValidatorFn[],\n        asyncValidators?: AsyncValidatorFn[],\n        query = this.searchService.query\n    ): FormControl {\n        const value = this.getRangeValue(field, query);\n        return this.createControl(value, validators, asyncValidators);\n    }\n\n    /**\n     * Return a standard FormControl compatible with a text input component\n     * @param field\n     * @param validators optional validators to be added to the returned FormControl\n     * @param asyncValidators optional asyncValidators to be added to the returned FormControl\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public createInputControl(\n        field: string,\n        validators?: ValidatorFn[],\n        asyncValidators?: AsyncValidatorFn[],\n        query = this.searchService.query\n    ): FormControl {\n        const value = this.getValue(field, query);\n        return this.createControl(value, validators, asyncValidators);\n    }\n\n    /**\n     * Return a standard FormControl compatible with a multi-value text input component\n     * @param field\n     * @param validators optional validators to be added to the returned FormControl\n     * @param asyncValidators optional asyncValidators to be added to the returned FormControl\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public createMultiInputControl(\n        field: string,\n        validators?: ValidatorFn[],\n        asyncValidators?: AsyncValidatorFn[],\n        query = this.searchService.query\n    ): FormControl {\n        const value = this.getValue(field, query);\n        return this.createControl(value, validators, asyncValidators);\n    }\n\n    /**\n     * Return a standard FormControl compatible with a checkbox component\n     * @param field\n     * @param validators optional validators to be added to the returned FormControl\n     * @param asyncValidators optional asyncValidators to be added to the returned FormControl\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public createCheckboxControl(\n        field: string,\n        validators?: ValidatorFn[],\n        asyncValidators?: AsyncValidatorFn[],\n        query = this.searchService.query\n    ): FormControl {\n        const value = this.getBooleanValue(field, query);\n        return this.createControl(value, validators, asyncValidators);\n    }\n\n    /**\n     * Reset the supplied AbstractControl (and its validation) and sets its value to undefined\n     * @param control\n     */\n    public resetControl(control: AbstractControl) {\n        control.reset();\n        control.setValue(undefined);\n    }\n\n    /**\n     * Reset the supplied AbstractControl (and its validation) and sets its value to [undefined, undefined]\n     * @param control\n     */\n    public resetRangeControl(control: AbstractControl) {\n        control.reset();\n        control.setValue([undefined, undefined]);\n    }\n\n    /**\n     * Retrieve the value (ValueItem | ValueItem[] | undefined) to be set to the FormControl from the Query\n     * @param field\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public getValue(\n        field: string,\n        query = this.searchService.query\n    ): ValueItem | ValueItem[] | undefined {\n        const expr = this.getAdvancedExpr(field, query);\n        if (expr) {\n            const value = this.getValueFromExpr(expr);\n            return this.formatValueItems(field, value);\n        }\n        return undefined;\n    }\n\n    /**\n     * Retrieve the boolean value to be set to the FormControl from the Query\n     * @param field\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public getBooleanValue(\n        field: string,\n        query = this.searchService.query\n    ): boolean | undefined {\n        const expr = this.getAdvancedExpr(field, query);\n        if (expr) {\n            const value = this.getValueFromExpr(expr) as ValueItem;\n            return this.formatAdvancedValue(field, value.value as boolean) as boolean;\n        }\n        return undefined;\n    }\n\n    /**\n     * Retrieve the range value to be set to the FormControl from the Query\n     * @param field\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    public getRangeValue(\n        field: string,\n        query = this.searchService.query\n    ): AdvancedValue {\n        const expr = this.getAdvancedExpr(field, query);\n        if (expr) {\n            const value = this.getValueFromExpr(expr);\n            if (Utils.isArray(value)) {\n                return value.map((e) =>\n                    this.formatAdvancedValue(\n                        field,\n                        e.value as string | Date | number\n                    )\n                ) as AdvancedValue;\n            } else {\n                const _value = this.formatAdvancedValue(\n                    field,\n                    value.value as string | Date | number\n                ) as BaseAdvancedValue;\n                if (expr.operator === ExprOperator.gte) {\n                    return [_value, undefined];\n                } else if (expr.operator === ExprOperator.lte) {\n                    return [undefined, _value];\n                }\n            }\n        }\n        return [undefined, undefined];\n    }\n\n    /**\n     * Return the select expression of an advanced filter\n     * @param field\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     */\n    protected getAdvancedExpr(\n        field: string,\n        query = this.searchService.query\n    ): Expr | undefined {\n        let expr: Expr | string;\n        const expression = query.findSelect(advancedFacetPrefix + field)\n            ?.expression;\n        if (expression) {\n            expr = this.appService.parseExpr(expression);\n            if (expr instanceof Expr) {\n                return expr;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Extract values from an expression\n     * @param expr\n     */\n    protected getValueFromExpr(expr: Expr): ValueItem | ValueItem[] {\n        let value: ValueItem | ValueItem[] | undefined;\n        if (Utils.isString(expr.value) && expr.value.indexOf(\"[\") > -1) {\n            value = JSON.parse(expr.value.replace(/`/g, '\"')).map((e) => ({\n                value: e.value!,\n                display: !!e.display ? e.display : e.value,\n            }));\n        } else if (expr.operands?.length > 0) {\n            value = expr.operands.map((e) => ({\n                value: e.value!,\n                display: !!e.display ? e.display : e.value,\n            }));\n        }\n        if (!value) {\n            if (expr.values && expr.values.length > 1) {\n                value = expr.values.map((e) => ({ value: e, display: e }));\n            } else {\n                value = {\n                    value: expr.value!,\n                    display: !!expr.display ? expr.display : expr.value,\n                };\n            }\n        }\n        return value;\n    }\n\n    /**\n     * Sets a select on a query (defaults to searchService.query) for a given\n     * field and value(s)\n     * @param field\n     * @param value\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     * @param combineWithAnd\n     */\n    public setSelect(\n        field: string,\n        value: ValueItem | ValueItem[] | undefined,\n        query?: Query,\n        combineWithAnd?: boolean\n    ) {\n        let expr;\n        if (value !== undefined) {\n            const _value = this.asValueItems(value, field);\n            if (combineWithAnd) {\n                expr = this.exprBuilder.makeAndExpr(field, _value);\n            } else {\n                expr = this.exprBuilder.makeOrExpr(field, _value);\n            }\n        }\n        // When expr is not defined, this simply removes the selection\n        this.setAdvancedSelect(field, expr, query);\n    }\n\n    /**\n     * Sets a select on a query (defaults to searchService.query) for a given\n     * field and a boolean value\n     * @param field\n     * @param value\n     * @param discardFalsy by default it is 'false', so a false value is used to be undefined\n     * @param query\n     */\n    public setBooleanSelect(\n        field: string,\n        value: boolean | undefined,\n        allowFalsy: boolean = false,\n        query?: Query\n    ) {\n        let expr;\n        if (value === true || (value === false && allowFalsy)) {\n            expr = this.exprBuilder.makeBooleanExpr(field, value);\n        }\n        // When expr is not defined, this simply removes the selection\n        this.setAdvancedSelect(field, expr, query);\n    }\n\n    /**\n     * Sets a select on a query (defaults to searchService.query) for a given\n     * field, operator and value\n     * @param field\n     * @param value\n     * @param operator\n     * @param query\n     */\n    public setNumericalSelect(\n        field: string,\n        value: string | Date | number | ValueItem | undefined,\n        operator: \">\" | \">=\" | \"<\" | \"<=\" | \"=\" | \"<>\",\n        query?: Query\n    ) {\n        let expr;\n        if (value !== undefined) {\n            if (this._isValueItem(value)) {\n                value = value.value as string | Date | number;\n            }\n            value = this.parse(value, field);\n            expr = this.exprBuilder.makeNumericalExpr(field, operator, value);\n        }\n        // When expr is not defined, this simply removes the selection\n        this.setAdvancedSelect(field, expr, query);\n    }\n\n    /**\n     * Sets a select on a query (defaults to searchService.query) for a given\n     * field and range of values\n     * @param field\n     * @param range\n     * @param query\n     */\n    public setRangeSelect(\n        field: string,\n        range: (string | Date | number)[] | undefined,\n        query?: Query\n    ) {\n        let expr: string | undefined;\n        if (range && range.length === 2) {\n            const from = this.parse(range[0] || undefined, field);\n            const to = this.parse(range[1] || undefined, field);\n            if (from && to) {\n                expr = this.exprBuilder.makeRangeExpr(field, from, to);\n            } else if (from) {\n                expr = this.exprBuilder.makeNumericalExpr(field, \">=\", from);\n            } else if (to) {\n                expr = this.exprBuilder.makeNumericalExpr(field, \"<=\", to);\n            }\n        }\n        // When expr is not defined, this simply removes the selection\n        this.setAdvancedSelect(field, expr, query);\n    }\n\n    /**\n     * Sets a select for a given field and expression on the query (defaults to searchService.query)\n     * @param query Query where to fetch advanced values, if omitted, use searchService.query\n     * @param field\n     * @param expr\n     */\n    protected setAdvancedSelect(\n        field: string,\n        expr: string | undefined,\n        query = this.searchService.query\n    ) {\n        query.removeSelect(advancedFacetPrefix + field);\n        if (expr) {\n            query.addSelect(expr, advancedFacetPrefix + field);\n        }\n    }\n\n    /**\n     * Remove a specific advanced value by its field name.\n     * By default, Trigger search() action\n     * @param field\n     * @param query Query from which will remove the specific advanced value, if omitted, use searchService.query\n     * @param search\n     */\n    public removeAdvancedValue(\n        field: string,\n        search: boolean = true,\n        query: Query = this.searchService.query\n    ): void {\n        if (field) {\n            query.removeSelect(advancedFacetPrefix + field);\n            this.searchService.setQuery(query, false);\n            if (search) {\n                this.searchService.search();\n            }\n        }\n    }\n\n    /**\n     * Remove all related advanced-search select(s) from a given query and update searchService.query accordingly\n     * By default, Trigger search() action\n     * @param query Query from which will remove all advanced values, if omitted, use searchService.query\n     * @param search\n     */\n    public resetAdvancedValues(\n        search: boolean = true,\n        query: Query = this.searchService.query\n    ): void {\n        this.searchService.setQuery(query.toStandard(), false);\n        if (search) {\n            this.searchService.search();\n        }\n    }\n\n    /**\n     * Transforms a value to a parsed ValueItem[]\n     * @param value\n     * @param field\n     */\n    protected asValueItems(\n        value: ValueItem | ValueItem[],\n        field: string\n    ): ValueItem[] {\n        if (this._isValueItemArray(value)) {\n            return value.map((val) => ({\n                value: this.parse(val.value, field) as\n                    | string\n                    | Date\n                    | number\n                    | boolean,\n                display: val.display,\n            }));\n        }\n        return [\n            {\n                value: this.parse(value.value, field) as\n                    | string\n                    | Date\n                    | number\n                    | boolean,\n                display: value.display,\n            },\n        ];\n    }\n\n    public formatValueItems(\n        field: string,\n        value: ValueItem | ValueItem[]\n    ): ValueItem | ValueItem[] {\n        if (this._isValueItemArray(value)) {\n            return value.map((val) => this.formatValueItem(field, val));\n        }\n        return this.formatValueItem(field, value);\n    }\n\n    /**\n     * Format the display property of the ValueItem according its related column definition\n     * @param field\n     * @param value\n     */\n    protected formatValueItem(field: string, value: ValueItem): ValueItem {\n        const column = this.appService.getColumn(field);\n        if (column) {\n            value.display = (this.formatBaseAdvancedValue(\n                value.display!,\n                column\n            ) as string | Date | number | boolean).toString();\n        }\n        return value;\n    }\n\n    /**\n     * Format a given advanced value according to its column definition\n     * @param field\n     * @param value\n     */\n    public formatAdvancedValue(\n        field: string,\n        value: AdvancedValue\n    ): AdvancedValue {\n        if (value) {\n            const column = this.appService.getColumn(field);\n            if (column) {\n                if (Utils.isArray(value)) {\n                    return value.map((v) =>\n                        v ? this.formatBaseAdvancedValue(v, column) : v\n                    );\n                }\n                return this.formatBaseAdvancedValue(value, column);\n            }\n        }\n        return value;\n    }\n\n    protected formatBaseAdvancedValue(\n        value: BaseAdvancedValue,\n        column: CCColumn\n    ): BaseAdvancedValue {\n        if (value) {\n            value = this.castAdvancedValue(value, column);\n            return column.formatter ? this.formatService.formatValue(value!, column) : value;\n        }\n        return value;\n    }\n\n    /**\n     * Cast a given value as per its column definition\n     * @param value\n     * @param column\n     */\n    public castAdvancedValue(\n        value: BaseAdvancedValue,\n        column: CCColumn | undefined\n    ): BaseAdvancedValue {\n        if (column) {\n            if (Utils.isString(value)) {\n                if (AppService.isDate(column)) {\n                    value = Utils.toDate(value);\n                } else if (AppService.isInteger(column)) {\n                    if (Utils.testInteger(value)) {\n                        value = Utils.toInt(value);\n                    }\n                } else if (AppService.isDouble(column)) {\n                    if (Utils.testFloat(value)) {\n                        value = Utils.toNumber(value);\n                    }\n                } else if (AppService.isBoolean(column)) {\n                    value = Utils.isTrue(value);\n                }\n            }\n        }\n        return value;\n    }\n\n    /**\n     * Create a generic FormControl\n     * @param value value of the FormControl\n     * @param validators optional validators to be added to the returned FormControl\n     * @param asyncValidators optional asyncValidators to be added to the returned FormControl\n     */\n    protected createControl(\n        value: AdvancedValue | ValueItem | ValueItem[],\n        validators?: ValidatorFn[],\n        asyncValidators?: AsyncValidatorFn[]\n    ): FormControl {\n        return new FormControl(\n            {\n                value,\n                disabled: false,\n            },\n            {\n                validators: !!validators ? validators : [],\n                asyncValidators: !!asyncValidators ? asyncValidators : [],\n                updateOn: \"change\",\n            }\n        );\n    }\n\n    /**\n     * Parse a value according to its column definition\n     * @param value\n     * @param field\n     */\n    protected parse<T>(value: T, field: string): T | string {\n        const parser = this._parser(field);\n        if (parser && Utils.isString(value)) {\n            return this.formatService.parseValue(value, parser);\n        }\n        return value;\n    }\n\n    /**\n     * Return the parser if existing in the given field\n     * @param field\n     */\n    protected _parser(field: string): string | undefined {\n        const column = this.appService.getColumn(field);\n        return column ? column.parser : undefined;\n    }\n\n    protected _rangeType(field: string): string | number | Date {\n        const column = this.appService.getColumn(field);\n        let rangeType;\n        if (\n            column &&\n            (AppService.isInteger(column) || AppService.isDouble(column))\n        ) {\n            rangeType = 0;\n        } else if (column && AppService.isDate(column)) {\n            rangeType = new Date();\n        } else {\n            rangeType = \"\";\n        }\n        return rangeType;\n    }\n\n    /**\n     * Return `true` if the passed value is an `ValueItem[]`\n     */\n    protected _isValueItemArray(value: any): value is ValueItem[] {\n        if (Utils.isArray(value)) {\n            const condition = (element) => this._isValueItem(element);\n            return value.every(condition);\n        }\n        return false;\n    }\n\n    /**\n     * Return `true` if the passed value is an `ValueItem`\n     */\n    protected _isValueItem(value: any): value is ValueItem {\n        if (\n            Utils.isObject(value) &&\n            !Utils.isArray(value) &&\n            !Utils.isDate(value)\n        ) {\n            if (value.hasOwnProperty(\"value\")) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Record, EntityItem} from \"@sinequa/core/web-services\";\nimport {TimelineOptions, DataItem, VisTimelineService} from \"ngx-vis\";\n\nimport moment from \"moment\";\n\nexport const defaultOptions : TimelineOptions = {\n    minHeight : '150px',\n    maxHeight : '350px',\n    margin: {\n        axis: 5,\n        item: 5\n    }\n};\n\n@Component({\n    selector: \"sq-result-timeline\",\n    templateUrl: \"./result-timeline.html\"\n})\nexport class ResultTimeline implements OnChanges {\n    @Input() name = \"vis-timeline\";\n    @Input() record: Record;\n    @Input() dates: EntityItem[];\n    @Input() events: EntityItem[];\n    @Input() min_year: number = 0;\n    @Input() max_year: number = 10000;\n    @Input() min_dates: number = 1;\n    @Input() max_dates: number = 100;\n    @Input() options: TimelineOptions = defaultOptions;\n\n    initDone = false;\n    items : DataItem[] = [];\n\n    constructor(public visTimelineService: VisTimelineService){\n    }\n\n    ngOnChanges(changes:SimpleChanges) {\n        if(!!changes['record'] || !!changes['dates'] || !!changes['events']){\n            this.updateTimeline();\n        }\n    }\n\n    updateTimeline(){\n\n        this.items.splice(0);\n\n        const dates = this.dates || [];\n        const events = this.events || [];\n\n        const all_ids: string[] = [];\n        const all_dates: string[] = [];\n\n        events.forEach(event => {\n            const data_date = event.display;\n            const cooc = data_date.substring(1,data_date.length-1).split(\")#(\");\n            const date = new Date(cooc[1]);\n            //console.log(\"cooc1:\",data_date[i+2]);\n            //const pos = event.locations.split(\",\")[0];\n            //console.log(cooc);\n            const year = date.getFullYear();\n            //console.log(year);\n            //console.log(regdate.test(date) );\n            //console.log( year < 2050 && year > 1950);\n            const id = this.record.id + \"#\" + data_date;\n            if(year < this.max_year && year > this.min_year && all_ids.indexOf(id)===-1){\n                this.items.push({id: id, content: cooc[0], start: date});\n                all_dates.push(cooc[1]);\n                all_ids.push(id);\n            }\n        });\n\n        dates.forEach(dateobj => {\n            const date: Date = moment(dateobj.display).toDate();\n            //console.log(\"date:\",data_date[i+1]);\n            //const pos = dateobj.locations.split(\",\")[0];\n            const year = date.getFullYear();\n            const id = this.record.id + \"#\" + dateobj.display;\n            if(year < this.max_year && year > this.min_year && all_dates.indexOf(dateobj.display)===-1 && all_ids.indexOf(id)===-1){\n                this.items.push({id: id, content: moment(date).format('ll'), start: date});\n                all_ids.push(id);\n            }\n        });\n\n        if(this.items.length >= this.min_dates){\n\n            if(this.items.length> this.max_dates )\n                this.items.splice(0, this.max_dates);\n\n            //console.log(data);\n\n            //try{\n            //    this.timeline.removeCustomTime(\"date-modified\");\n            //}catch{\n                // No date-modified\n            //}\n\n            //if(Utils.isString(this.record.modified) && this.record.modified.length>=10){\n            //    this.timeline.addCustomTime(this.record.modified.substring(0,10), \"date-modified\");\n            //}\n\n            /*this.timeline.on('select', properties => {\n                //console.log('selected items: ' + properties.items);\n                //console.log('event: ', properties.event);\n                //console.log(properties);\n                if(properties.items.length>0){\n                    //var id = properties.items[0].split(\"#\");\n                    console.log(this.items.get(properties.items[0]));\n                    //var date = items._data[properties.items[0]].start;\n                    //var url = \"search?action=select&resultid=\"+RESULTID+\"&item=%22Tag%3B\"+settings.date_column+\"%3B\"+date+\"%3B\"+date+\"%22\"\n                    //popup_extract(id[0], parseInt(id[1]), properties.event.target,url);\n                }\n            });*/\n\n        }else{\n            console.log(\"no timeline for this doc...\");\n        }\n        if(this.initDone) {\n            this.visTimelineService.setItems(this.name, this.items);\n        }\n    }\n\n    timelineInitialized() {\n        this.initDone = true;\n    }\n}\n","<div *ngIf=\"items && items.length\" \n    [visTimeline]=\"name\" \n    [visTimelineItems]=\"items\"\n    [visTimelineOptions]=\"options\"\n    (initialized)=\"timelineInitialized()\">\n</div>","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {Autocomplete} from \"../autocomplete.directive\";\nimport {AutocompleteFieldSearch} from \"../autocomplete-field-search.directive\";\nimport {BsAutocompleteList} from \"./autocomplete-list/autocomplete-list\";\nimport {BsFieldSearchItemsComponent} from './field-search-items.component';\nimport {UtilsModule} from '@sinequa/components/utils';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        UtilsModule\n    ],\n    declarations: [\n        BsAutocompleteList, BsFieldSearchItemsComponent, Autocomplete, AutocompleteFieldSearch\n    ],\n    exports: [\n        BsAutocompleteList, BsFieldSearchItemsComponent, Autocomplete, AutocompleteFieldSearch\n    ]\n})\nexport class BsAutocompleteModule {\n}","import {Injectable} from \"@angular/core\";\nimport {AuditWebService, AuditEvent} from \"@sinequa/core/web-services\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Action} from \"@sinequa/components/action\";\n\nexport const AuditFeedbackType = \"UserFeedback\";\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class FeedbackService {\n\n    constructor(\n        public auditService: AuditWebService,\n        public modalService: ModalService,\n        public appService: AppService,\n        public notificationsService: NotificationsService\n        ) {\n    }\n\n    public sendUserFeedback(type: string, message: string, thankUser: boolean){\n        const event : AuditEvent = {\n            type: AuditFeedbackType,\n            detail: {\n                app: this.appService.appName,\n                message: type,\n                detail: message\n            }\n        };\n        Utils.subscribe(this.auditService.notify([event]),\n            (result) => {\n                if(thankUser)\n                    this.notificationsService.success(\"msg#feedback.thankyou\");\n        });\n    }\n\n    public buildFeedbackAction() : Action[] {\n        return [new Action({\n            text: \"msg#feedback.text\",\n            title: \"msg#feedback.title\",\n            icon: \"fas fa-comment\",\n            headerGroup: true,\n            children: [\n                this.createAction(\"content\", \"msg#feedback.content.text\", \"msg#feedback.content.title\", \"far fa-file-alt fa-fw\"),\n                this.createAction(\"ui\", \"msg#feedback.ui.text\", \"msg#feedback.ui.title\", \"fas fa-desktop fa-fw\"),\n                this.createAction(\"lang\", \"msg#feedback.lang.text\", \"msg#feedback.lang.title\", \"far fa-comments fa-fw\"),\n                this.createAction(\"other\", \"msg#feedback.other.text\", \"msg#feedback.other.title\", \"far fa-lightbulb fa-fw\"),\n            ]\n        })];\n    }\n\n    public createAction(type:string, text:string, title:string, icon:string) : Action {\n        return new Action({\n            text: text,\n            title: title,\n            icon: icon,\n            action: () => this.openFeedbackModal(type, title)\n        });\n    }\n\n    public openFeedbackModal(type: string, title: string){\n        const model = {title: 'msg#feedback.title', message: title, output: '', buttons: [], rowCount: 5};\n        this.modalService.prompt(model)\n            .then((result) => {\n                if (result === ModalResult.OK && model.output.trim() !== \"\") {\n                    this.sendUserFeedback(type, model.output, true);\n                }\n            });\n    }\n}","import {Component, Input} from \"@angular/core\";\nimport {ActionItemOptions} from \"..\";\nimport {Action} from \"../../action\";\n\nexport interface ActionButtonsOptions {\n    items: Action[] | Action;\n    size?: string;\n    style?: string;\n    autoAdjust?: boolean;\n    autoAdjustBreakpoint?: string;\n    rightAligned?: boolean;\n}\n\n@Component({\n    selector: \"[sq-action-buttons]\",\n    templateUrl: \"./action-buttons.html\"\n})\nexport class BsActionButtons {\n    private _options: ActionButtonsOptions;\n    \n    @Input(\"sq-action-buttons\")\n    set options (opts: ActionButtonsOptions) {\n        this._options = opts;\n    }\n    get options(): ActionButtonsOptions {\n        return this._options;\n    }\n\n    get sizeClass(): string {\n        return this._options.size ? `btn-${this._options.size}` : \"\";\n    }\n\n    get styleClass(): string {\n        return this._options.style ? `btn-${this._options.style}` : \"btn-light\";\n    }\n    \n    get itemsVisible(): Action[] {\n        // hidden items are not displayed\n        return (Array.isArray(this._options.items)) ? this._options.items.filter(item => !item.hidden) : this._options.items.hidden ? [] : [this._options.items];\n    }\n    \n    getActionItemOptions(item: Action): ActionItemOptions {\n        return ({...this._options, item, inMenu: false});\n    }\n\n    itemClick(item: Action, event: UIEvent) {\n        if (!item.disabled && item.action) {\n            item.action(item, event);\n        }\n        if (item.href === \"#\" || (!!item.href && item.disabled)) {\n            event.preventDefault();\n        }\n    }\n}","<ng-container *ngFor=\"let item of itemsVisible\">\n    <a *ngIf=\"item.href\" class=\"btn-text\" [attr.href]=\"!item.disabled ? item.href : null\" (click)=\"itemClick(item, $event)\" [sq-action-item]=\"getActionItemOptions(item)\"></a>\n    <ng-container *ngIf=\"!item.href\">\n        <div *ngIf=\"item.hasChildren\" class=\"btn-group dropdown\" [sq-action-item]=\"getActionItemOptions(item)\"></div>\n        <button *ngIf=\"!item.hasChildren\" type=\"button\" class=\"btn {{styleClass}} {{sizeClass}} {{item.selected ? 'active' : ''}} {{item.disabled ? 'disabled' : ''}}\" [sq-action-item]=\"getActionItemOptions(item)\" (click)=\"itemClick(item, $event)\" sqTooltip=\"{{item.title | sqMessage:item.messageParams}}\" [attr.aria-label]=\"item.title | sqMessage:item.messageParams\"></button>\n    </ng-container>\n</ng-container>","export default {\n    \"modal\": {\n        \"login\": {\n            \"title\": \"Anmeldung\",\n            \"userName\": \"Benutzername\",\n            \"password\": \"Passwort\",\n            \"singleSignOn\": \"Einmalanmeldung (Single sign-on)\",\n            \"signInWith\": \"Anmelden mit...\"\n        }\n    }\n};\n","import {Injectable} from \"@angular/core\";\nimport {Observable, of} from \"rxjs\";\nimport {map, flatMap} from \"rxjs/operators\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SuggestQueryWebService, SuggestFieldWebService, Suggestion, EngineType} from \"@sinequa/core/web-services\";\nimport {AppService, Query} from \"@sinequa/core/app-utils\";\nimport {AutocompleteItem} from './autocomplete.directive';\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class SuggestService {\n\n    fieldCategory: string;\n\n    constructor(\n        private suggestQueryWebService: SuggestQueryWebService,\n        private suggestFieldWebService: SuggestFieldWebService,\n        private appService: AppService) {\n        this.fieldCategory = \"$field$\";\n    }\n\n    private addFields(text: string, suggests: Suggestion[]) {\n        if (text.includes(\" \")) {\n            return;\n        }\n        for (const field of this.appService.fields) {\n            if (Utils.startsWith(field, text)) {\n                suggests.unshift({\n                    category: this.fieldCategory,\n                    display: field\n                });\n            }\n        }\n    }\n\n    get(suggestQuery: string, text: string, fields?: string | string[], query?: Query): Observable<Suggestion[]> {\n        if (!this.appService.ccquery) {\n            return of([]);\n        }\n        const observable = this.suggestQueryWebService.get(suggestQuery, text, this.appService.ccquery.name, fields);\n        return observable.pipe(\n            flatMap(suggests => {\n                if (!fields) {\n                    if (!suggests) {\n                        suggests = [];\n                    }\n                    this.addFields(text, suggests);\n                }\n                else {\n                    if (!suggests || suggests.length === 0) {\n                        const _fields = Utils.isArray(fields) ? fields : [fields];\n                        fields = [];\n                        for (const field of _fields) {\n                            const column = this.appService.getColumn(field);\n                            if (!!column && (column.eType === EngineType.csv || AppService.isScalar(column))) {\n                                fields.push(field);\n                            }\n                        }\n                        if (fields.length > 0) {\n                            return this.suggestFieldWebService.get(text, fields, query).pipe(\n                                map((suggests) => {\n                                    suggests.forEach(value => value.display = Utils.toSqlValue(value.display)); // because dates get automatically converted by the interceptor\n                                    return suggests;\n                                }));\n                        }\n                    }\n                }\n                return of(suggests);\n            }));\n    }\n\n\n    /**\n     * Search for the input text in a list of objects and return autocomplete items asynchronously\n     * @param query The text to search for\n     * @param data The list of objects\n     * @param primaryText A function that returns the primary text input given the object\n     * @param secondaryText An (optional) function that returns a list of secondary text inputs given the object\n     */\n    public async searchData<T>(\n        category: string,\n        query: string,\n        data: T[],\n        primaryText: (obj:T) => string,\n        secondaryText?: (obj:T) => string[],\n        label?: string) : Promise<AutocompleteItem[]> {\n\n        return data\n            .map(obj => SuggestService.findMatch(primaryText(obj), query,\n                !!secondaryText ? secondaryText(obj) : [], obj)) // Look for matches in all saved queries\n            .filter(item => !!item) // Keep only the matches\n            .sort((a,b) => b!.score - a!.score) // Sort by decreasing score\n            .map(item => {\n                item = item!;\n                return {    // Make an autocomplete item\n                    display: item.display,\n                    displayHtml: item.displayHtml,\n                    category,\n                    label: label || category,\n                    data: item.data,\n                    score: item.score\n                };\n            } );\n    }\n\n    /**\n     * Searches for the query string inside a given text. Returns a match object containing:\n     * - a score proportional to the number and quality of matches\n     * - the text formatted as HTML with the query found in the text\n     * @param text The text to search\n     * @param query The string to search for\n     * @param secondaryText Secondary fields to search input, with less importance than the primary field\n     * @param data A data object to be included in the match object (for convenience mostly)\n     */\n    public static findMatch(text: string, query: string, secondaryText?: string[], data?: any): {display: string, displayHtml: string, score: number, data?:any} | undefined {\n\n        if(!text || !query){\n            return undefined;\n        }\n\n        // pass text and query in lower case and no accent to make search case insensitive\n        const textLower = Utils.removeAccents(text.toLowerCase());\n        query = Utils.removeAccents(query.toLowerCase());\n        let i = 0;\n        const matches: number[] = [];\n        let score = 0;\n\n        // Compute score of the match\n        i = textLower.indexOf(query);\n        while(i !== -1){    // While there's a match\n            matches.push(i);\n            if(i === 0){    // Start of the text\n                score += 4;\n            }\n            else if(textLower[i-1] === \" \"){ // Start of a word\n                score += 2;\n            }\n            else {\n                score += 1; // Middle of a word\n            }\n            i = textLower.indexOf(query, i+query.length);\n        }\n\n        // Format HTML display\n        let html = text;\n        for(let j=matches.length-1; j>=0; j--) { // decreasing order so the indices remain valid\n            i = matches[j];\n            html = html.slice(0, i).concat(\"<strong>\", html.slice(i, i+query.length), \"</strong>\", html.slice(i+query.length));\n        }\n\n        // Secondary text\n        if(secondaryText) {\n            secondaryText\n                .map(t => this.findMatch(t, query)) // Search each secondary text for matches\n                .filter(item => !!item) // Keep only the matches\n                .sort((a,b) => b!.score - a!.score) // Sort by decreasing score\n                .forEach(match => {\n                    match = match!;\n                    score += match.score / 2;  // Secondary matches added to the score, but count half\n                    html += \" <small>\" + match.displayHtml + \"</small>\"; // Concatenate secondary match html to the main html\n                });\n        }\n\n        if(score > 0){\n            return {\n                display: text,\n                displayHtml: html,\n                score: score,\n                data: data\n            };\n        }\n        return undefined;\n    }\n}","export default {\n    \"modal\": {\n        \"buttons\": {\n            \"ok\": \"OK\",\n            \"cancel\": \"Abbrechen\",\n            \"yes\": \"Ja\",\n            \"no\": \"Nein\",\n            \"abort\": \"Abbrechen\",\n            \"retry\": \"Wiederholen\",\n            \"ignore\": \"Ignorieren\"\n        },\n\n        \"confirm\": {\n            \"title\": \"Bestätigen\"\n        },\n        \"prompt\": {\n            \"title\": \"Geben Sie einen Wert ein\"\n        }\n    }\n};\n","import {Component, Input, OnChanges, SimpleChanges, OnDestroy} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Query} from \"@sinequa/core/app-utils\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {ResultsViewService, ResultsView} from \"../../results-view.service\";\nimport {Action} from \"@sinequa/components/action\";\nimport {Subscription} from 'rxjs';\n\n\n@Component({\n    selector: \"sq-results-view-selector\",\n    templateUrl: \"./results-view-selector.html\"\n})\nexport class BsResultsViewSelector implements OnChanges, OnDestroy {\n    @Input() query: Query;  // Needed to get tab, and possibly include/exclude results views\n    @Input() results: Results;  // Needed to detect Changes\n    // UI inputs\n    @Input() rightAligned: boolean;\n    @Input() useDropdownMenu: boolean = true;\n    @Input() size: string;\n\n    private viewAction: Action | Action[] | undefined;\n    items: Action[];\n\n    constructor(\n        public resultsViewService : ResultsViewService\n    ) {\n        this._subscription = this.resultsViewService.resultsViewSelected.subscribe(\n            (view : ResultsView) => {\n                this.setCurrentViewAction();\n        });\n    }\n\n    private _subscription: Subscription;\n    ngOnDestroy(){\n        if(this._subscription){\n            this._subscription.unsubscribe();\n        }\n    }\n\n    private setCurrentViewAction() {\n        if (!!this.viewAction && !!this.resultsViewService.resultsView) {\n            if (!Utils.isArray(this.viewAction)) {\n                const view = this.resultsViewService.views.find(view => Utils.eqNC(this.resultsViewService.resultsView.name, view.name));\n                if (view) {\n                    this.viewAction.text = view.display || view.name;\n                    this.viewAction.icon = view.icon || 'fas fa-list';\n                }\n                else {\n                    this.viewAction.text = \"msg#results.unselectableViewDisplay\";\n                    this.viewAction.icon = \"far fa-square fa-fw\";\n                }\n                this.viewAction.messageParams = {values: {text: this.viewAction.text}}; // for title\n            }\n            else {\n                this.viewAction.forEach(action => {\n                    action.selected = Utils.eqNC(action.data.name, this.resultsViewService.resultsView.name);\n                });\n            }\n        }\n    }\n\n    private buildViewAction() {\n        if (this.resultsViewService.views.length <= 1) {\n            this.viewAction = undefined;\n            this.items = [];\n            return;\n        }\n        const includedViews = this.resultsViewService.getIncludedViews(this.query.tab);\n        if (includedViews.length <= 1) {\n            this.viewAction = undefined;\n            this.items = [];\n            return;\n        }\n        if (this.useDropdownMenu) {\n            this.viewAction = new Action({\n                title: \"msg#results.viewTitle\",\n                children: includedViews.map(view => new Action({\n                    text: view.display,\n                    icon: view.icon,\n                    data: view,\n                    action: (item: Action, event: Event) => {\n                        this.selectView(item.data);\n                    }\n                }))\n            });\n            this.items = [this.viewAction];\n        }\n        else {\n            this.viewAction = [];\n            for (const view of includedViews) {\n                this.viewAction.push(new Action({\n                    icon: view.icon,\n                    title: view.display,\n                    data: view,\n                    action: (item: Action, event: Event) => {\n                        this.selectView(item.data);\n                    }\n                }));\n            }\n            this.items = this.viewAction;\n        }\n        this.setCurrentViewAction();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.buildViewAction();\n    }\n\n    selectView(view: ResultsView) {\n        this.resultsViewService.selectResultsView(view);\n    }\n}","<div [sq-action-buttons]=\"{items: items, autoAdjust: true, rightAligned: rightAligned, size: size}\"></div>","export * from \"./heatmap.module\";\nexport * from \"./facet-heatmap.component\";\nexport * from \"./heatmap.component\";\nexport * from \"./tooltip.component\";\nexport * from \"./results-heatmap-view\";\n","export default {\n    collapseButton: {\n        collapse: \"Replier\",\n        expand: \"Déplier\"\n    }\n};\n","export default {\n    \"savedQueries\": {\n        \"savedQueries\": \"Gespeicherte Suchanfragen\",\n        \"saveCurrentQuery\": \"Aktuelle Suchanfrage speichern\",\n        \"manageSavedQueries\": \"Aktuelle Suchanfragen verwalten\",\n        \"savedQueryAlreadyExists\": \"Es existiert bereits eine Suchanfrage mit diesem Namen. Möchten Sie sie ersetzen?\",\n        \"noSavedQuery\": \"Sie haben noch keine Suchanfrage gespeichert...\",\n        \"delete\": \"Löschen Sie diese gespeicherte Suche\"\n    },\n\n    \"recentQueries\": {\n        \"noRecentQuery\": \"Sie haben noch keine Suche durchgeführt...\",\n        \"delete\": \"Löschen Sie diese letzte Suche\",\n        \"save\": \"Speichern Sie diese letzte Suche\"\n    },\n\n    \"recentDocuments\": {\n        \"recentDocuments\": \"Kürzlich angesehenes Dokument\",\n        \"noRecentDocument\": \"Sie haben kein Dokument angezeigt\",\n        \"delete\": \"Löschen Sie dieses kürzlich angezeigte Dokument\"\n    },\n\n    \"editSavedQuery\": {\n        \"title\": \"Gespeicherte Suchanfrage\",\n        \"name\": \"Name\"\n    },\n\n    \"exportQuery\": {\n        \"dialogTitle\": \"Export\",\n        \"dialogOutputFormat\": \"Ausgabeformat\",\n        \"dialogMaxCount\": \"Maximale Anzahl der Zeilen\",\n        \"dialogSourceType\": \"Exportiere ...\",\n        \"dialogResult\": \"aktuelle Ergebnisliste\",\n        \"dialogSelection\": \"aktuelle Auswahl\",\n        \"btnTitle\": \"Export\",\n        \"exportResult\": \"Exportiere die Ergebnisliste als {type}\",\n        \"exportSelection\": \"Exportiere die Auswahl als {type}\",\n        \"btnDownload\": \"Herunterladen\",\n        \"btnClose\": \"Schließen\",\n        \"successNotification\": \"Herunterladen beendet\",\n        \"exportedColumns\": \"Zu exportierende Spalten\",\n        \"exportedColumnsLabelTooltip\": \"Wählen Sie die Spalten aus, die Sie exportieren möchten. Eine leere Auswahl bedeutet, dass alle Spalten exportiert werden\",\n        \"dialogMaxCountTooltip\": \"Standardmäßig ist die Anzahl der Ergebnisse auf {count} begrenzt\"\n    },\n\n    \"manageSavedQueries\": {\n        \"title\": \"Gespeicherte Suchanfragen verwalten\",\n        \"edit\": \"Bearbeiten\",\n        \"reorder\": \"Neu sortieren\",\n        \"remove\": \"Entfernen\",\n        \"removeAll\": \"Alle entfernen\",\n        \"export\": \"Exportieren\",\n        \"name\": \"Name\",\n        \"rss\": \"RSS-Feed\"\n    },\n\n};\n","/* eslint-disable @typescript-eslint/no-unused-expressions */\nimport { Subject } from 'rxjs';\nimport { Action } from '@sinequa/components/action';\nimport { Utils } from '@sinequa/core/base';\nimport { DataSet } from \"vis-data/peer/esm/vis-data\";\nimport { SearchService } from '@sinequa/components/search';\nimport { VisNetworkService } from 'ngx-vis';\nimport { AppService, ExprBuilder } from '@sinequa/core/app-utils';\nimport { IntlService } from '@sinequa/core/intl';\n\n// TYPES (configuration)\n\nexport interface NodeType {\n    name: string;\n    /** Vis Node options (merged in the Node objects). See https://visjs.github.io/vis-network/docs/network/nodes.html */\n    nodeOptions: {[key: string]: any} | ((node: Node, type: NodeType) => {[key: string]: any} );\n    /** If a field is provided, it can be used to filter the node value (and access the label, formatter, etc.) */\n    field?: string;\n}\n\nexport interface EdgeType {\n    /** Node types attached to this edge type. Should typically be 2 items, but cooccurrence aggregation might return more */\n    nodeTypes: NodeType[];\n    /** Vis Edge options (merged in the Edge objects). See https://visjs.github.io/vis-network/docs/network/edges.html */\n    edgeOptions: {[key: string]: any} | ((nodes: Node[], edge: Edge, type: EdgeType) => {[key: string]: any} );\n    /** If a field is provided, it can be used to filter the node value (and access the label, formatter, etc.) */\n    field?: string;\n}\n\n\n// DATA\n\n// Nodes (based on Vis Node interface)\n\nexport interface Node {\n    id: string;\n    label: string;\n\n    // Custom properties\n    type: NodeType;\n    provider: NetworkProvider;\n    visible: boolean;\n    /** count is a mutable property used to scale the node size in function of the size of adjacent edges*/\n    count: number;\n    /** the precedence of a node determines which node object is kept when merging two dataset (the highest precedence node is kept) */\n    precedence?: number;\n    // Context\n    context: NetworkContext;\n}\n\n// Edge (based on Vis Edge interface)\n\nexport interface Edge {\n    id: string;\n    from: string;\n    to: string;\n\n    // Custom properties\n    type: EdgeType;\n    provider: NetworkProvider;\n    visible: boolean;    \n    /** count is a property representing the strength of an edge, which scales the count of adjacent nodes*/\n    count: number;\n    /** A field value may be provided to filter search based on the edge field type */\n    fieldValue?: string;\n    // Context\n    context: NetworkContext;\n}\n\n\nexport interface NetworkProvider {\n    /** Whether or not the provider is active (if inactive, it will not provide empty datasets of nodes and edges) */\n    active: boolean;\n\n    /** Readable name of this provider */\n    name: string;\n\n    /** Dataset of this provider */\n    dataset: NetworkDataset;\n\n    /** Context (wrapper for general data about the network and services) */\n    context: NetworkContext;\n\n    /** Returns the Subject of this provider */\n    getProvider(): Subject<NetworkDataset>;\n\n    /** Asynchronously provide data via it's provider Subject */\n    getData(context: NetworkContext); // skip/count handled internally\n\n    /** Called after the datasets provided by all providers have been merged into a single dataset */\n    onDatasetsMerged(dataset: NetworkDataset);\n\n    /** Called after the dataset is filtered and passed to Vis for rendering */\n    onNodesInserted(nodes: Node[]);\n\n    /** Called when ANY node is clicked in the rendered view of the network */\n    onNodeClicked(node: Node | undefined);\n\n    /** Called when ANY edge is clicked in the rendered view of the network */\n    onEdgeClicked(edge: Edge | undefined);\n\n    /** Retrieve the list of action for this provider. */\n    getProviderActions(): Action[];\n\n    /** Retrieve the list of action for a given node, and this provider. */\n    getNodeActions(node: Node): Action[];\n    \n    /** Retrieve the list of action for a given edge, and this provider. */\n    getEdgeActions(edge: Edge): Action[];\n\n    /** Called when the providers are discarded. Can be use to cancel subscriptions */\n    onDestroy();\n}\n\nexport interface NetworkContext {\n    /** Name of this network, for use in selections */\n    name: string;\n    /** Vis.js data structures */\n    nodes: DataSet<Node>;\n    edges: DataSet<Edge>;\n    /** Useful services */\n    searchService: SearchService;\n    networkService: VisNetworkService;\n    appService: AppService;\n    intlService: IntlService;\n    exprBuilder: ExprBuilder;\n    /** Interactions */\n    select(node?: Node, edge?: Edge): void;\n}\n\n\nexport class NetworkDataset {\n\n    // Node index\n    private readonly nodeIdx: Map<string, Node> = new Map<string, Node>();\n\n    // Edge index\n    private readonly edgeIdx: Map<string, Edge> = new Map<string, Edge>();\n\n\n    /** Returns whether this node exists */\n    public hasNode(id: string): boolean {\n        return this.nodeIdx.has(id);\n    }\n    \n    /** Returns whether this edge exists */\n    public hasEdge(id: string): boolean {\n        return this.edgeIdx.has(id);\n    }\n\n    /** Returns the node with given id */\n    public getNode(id: string): Node | undefined {\n        return this.nodeIdx.get(id);\n    }\n\n    /** Returns the edge with given id */\n    public getEdge(id: string): Edge | undefined {\n        return this.edgeIdx.get(id);\n    }\n\n    /** Get the list of nodes */\n    public getNodes(): Node[] {\n        return Array.from(this.nodeIdx.values());\n    }\n\n    /** Get the list of edges */\n    public getEdges(): Edge[] {\n        return Array.from(this.edgeIdx.values());\n    }    \n\n    /** Get the list of visible nodes */\n    public getVisibleNodes(): Node[] {\n        return this.getNodes().filter(n => n.visible);\n    }\n\n    /** Get the list of visible edges */\n    public getVisibleEdges(): Edge[] {\n        return this.getEdges().filter(e => e.visible);\n    }\n\n    /** Get the list of node ids */\n    public getNodeIds(): string[] {\n        return Array.from(this.nodeIdx.keys());\n    }\n\n    /** Get the list of edge ids */\n    public getEdgeIds(): string[] {\n        return Array.from(this.edgeIdx.keys());\n    }\n    \n    /** Clears this dataset */\n    public clear() {\n        this.nodeIdx.clear();\n        this.edgeIdx.clear();\n    }\n\n    /** Add one or multiple nodes */\n    public addNodes(nodes: Node | Node[]) {\n        Array.isArray(nodes)? nodes.forEach(node => this.addNode(node)) : this.addNode(nodes);\n    }\n\n    /** Add one or multiple edges. */\n    public addEdges(edges: Edge | Edge[]) {\n        Array.isArray(edges)? edges.forEach(edge => this.addEdge(edge)) : this.addEdge(edges);\n    }\n\n    /** Remove one or multiple nodes. /!\\ Connected edges MUST be removed as well (use cleanRemoveNode() to do so) */\n    private removeNodes(ids: string | string[]) {\n        Array.isArray(ids)? ids.forEach(id => this.removeNode(id)) : this.removeNode(ids);\n    }\n\n    /** Remove one or multiple edges. */\n    public removeEdges(ids: string | string[]) {\n        Array.isArray(ids)? ids.forEach(id => this.removeEdge(id)) : this.removeEdge(ids);\n    }\n\n    /** Remove a node and its adjacent edges. keepDanglingNodes = false (default) removes the remaining nodes with no neighbor */\n    public cleanRemoveNode(nodeId: string, keepDanglingNodes?: boolean) {\n        this.getAdjacentEdges(nodeId).forEach(edge => {\n            const neighbor = this.getNode(edge.from === nodeId ? edge.to : edge.from) as Node;\n            this.removeEdges(edge.id);\n            neighbor.count -= edge.count;\n            if(!keepDanglingNodes && this.getAdjacentEdges(neighbor.id).length === 0) {\n                this.removeNodes(neighbor.id);\n            }\n        });\n    }\n\n    /** Get the edges adjacent to a node (O(n) method) */\n    public getAdjacentEdges(nodeId: string): Edge[] {\n        return this.getEdges().filter(e => e.from === nodeId || e.to === nodeId);\n    }\n\n    /** Get the nodes connected to a node via a single node (0(n) method) */\n    public getConnectedNodes(nodeId: string): Node[] {\n        return this.getAdjacentEdges(nodeId)\n                    .map(e => this.getNode(e.from === nodeId ? e.to : e.from) as Node);\n    }\n\n    /**\n     * Merge this dataset with another one. \n     * \n     * When duplicates nodes or edges are found:\n     * - The existing item is kept and updated\n     * - Their 'count' properties are added\n     * - Their 'visible' properties are ORed\n     * - Their nodeOptions and edgeOptions are updated\n     * \n     * @param dataset \n     */\n    public merge(dataset: NetworkDataset): NetworkDataset {\n\n        dataset.getNodes().forEach(node => {\n            node = Object.assign({}, node); // Avoid modifying the original datasets\n            if(!this.hasNode(node.id)) {\n                this.addNode(node);\n            }\n            else {\n                // Merge the new node with the existing one (which takes precedence by default)\n                let existingNode = this.getNode(node.id) as Node;\n                if((node.precedence || 0) > (existingNode.precedence || 0)) {\n                    // Set the new node in the node index\n                    this.nodeIdx.set(node.id, node);\n                    // swap existingNode and node for the merging of count, visible and node options\n                    const temp = node;\n                    node = existingNode;\n                    existingNode = temp;\n                }\n                existingNode.count += node.count;\n                existingNode.visible = existingNode.visible || node.visible;\n                let options: {[key: string]: any};\n                if(typeof existingNode.type.nodeOptions === \"function\") {\n                    options = existingNode.type.nodeOptions(existingNode, existingNode.type);\n                }\n                else {\n                    options = existingNode.type.nodeOptions;\n                }\n                Utils.extend(existingNode, options);\n            }\n        });\n\n        dataset.getEdges().forEach(edge => {\n            edge = Object.assign({}, edge); // Avoid modifying the original datasets\n            if(!this.hasEdge(edge.id)) {\n                this.addEdge(edge);\n            }\n            else {\n                // Merge the new edge with the existing one (which takes precedence)\n                // eg. statistical and semantic edges\n                const existingEdge = this.getEdge(edge.id) as Edge;\n                existingEdge.count += edge.count;\n                existingEdge.visible = existingEdge.visible || edge.visible;\n                // Merge edge labels (taking duplicates into account)\n                if(!!existingEdge[\"label\"] && !!edge[\"label\"]){\n                    edge[\"labels\"].forEach(label => {\n                        if(existingEdge[\"labels\"].indexOf(label) === -1) {\n                            existingEdge[\"label\"] += \", \"+label;\n                            existingEdge[\"labels\"].push(label);\n                        }\n                    });\n                }\n                let options: {[key: string]: any};\n                if(typeof existingEdge.type.edgeOptions === \"function\") {\n                    const nodes = [existingEdge.from, existingEdge.to].map(id => this.nodeIdx[id]);\n                    options = existingEdge.type.edgeOptions(nodes, existingEdge, existingEdge.type);\n                }\n                else {\n                    options = existingEdge.type.edgeOptions;\n                }\n                Utils.extend(existingEdge, options);\n            }\n        });\n\n        return this;\n    }\n\n    /** Transfer nodes and edges to the Vis nodes and edges DataSets */\n    updateDatasets(nodes: DataSet<Node>, edges: DataSet<Edge>) {\n        nodes.remove(nodes.get().filter(n => !this.getNode(n.id)?.visible));\n        edges.remove(edges.get().filter(e => !this.getEdge(e.id)?.visible));\n        nodes.update(this.getVisibleNodes());\n        edges.update(this.getVisibleEdges());\n    }\n\n    \n    private addNode(node: Node) {\n        if(this.hasNode(node.id)) {\n            throw new Error(`Node '${node.id}' already in dataset`);\n        }\n        this.nodeIdx.set(node.id, node);\n    }\n    \n    private addEdge(edge: Edge) {\n        if(this.hasEdge(edge.id)) {\n            throw new Error(`Edge '${edge.id}' already in dataset`);\n        }\n        if(!this.hasNode(edge.from) || !this.hasNode(edge.to)) {\n            throw new Error(`Edge '${edge.id}' cannot be added as one of the nodes is missing from the dataset`)\n        }\n        this.edgeIdx.set(edge.id, edge);\n    }\n\n    private removeNode(id: string) {\n        this.nodeIdx.delete(id);\n    }\n\n    private removeEdge(id: string) {\n        this.edgeIdx.delete(id);\n    }\n}\n","export * from \"./public-api\";","import { Injectable, Inject } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\n\nimport { SqHttpClient } from \"./http-client\";\nimport { HttpService } from './http.service';\nimport { IntlService } from \"@sinequa/core/intl\";\nimport {Utils} from \"@sinequa/core/base\";\n\nimport { START_CONFIG, StartConfig } from \"./start-config.web.service\";\nimport { IQuery } from './query/query';\n\n/**\n * Describes a single sponsored link\n */\nexport interface LinkResult {\n    id: string;\n    title: string;\n    url: string;\n    icon: string;\n    thumbnail: string;\n    tooltip: string;\n    summary: string;\n    rank: number;\n    relevance: number;\n}\n\n/**\n * Describes a set of sponsored links\n */\nexport interface LinksResults {\n    sql: string[];\n    links: LinkResult[];\n}\n\n/**\n * A service for calling the query.links web service.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class SponsoredLinksWebService extends HttpService {\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient,\n        private intlService: IntlService) {\n        super(startConfig);\n    }\n\n    /**\n     * Queries the server for sponsored links.\n     *\n     * @param query The query information.\n     * @param webService The web service configuration.\n     */\n    getLinks(query: IQuery, webService: string): Observable<LinksResults> {\n        if (!query) {\n            return throwError({ error: \"no query\" });\n        }\n\n        const url = this.makeUrl(\"query.links\");\n        const observable = this.httpClient.post<LinksResults>(url, {\n            app: this.appName,\n            webservice: webService,\n            query,\n            locale: this.intlService.currentLocale.name\n        });\n\n        Utils.subscribe(observable,\n            (response) => {\n                console.log(\"SponsoredLinksService.getLinks success - data: \", response);\n                return response;\n            },\n            (error) => {\n                console.log(\"SponsoredLinksService.getLinks failure - error: \", error);\n            });\n        return observable;\n    }\n}\n","import {Component, Input, HostBinding, Injector, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {ModalButton, ModalRef, ModalResult} from \"@sinequa/core/modal\";\n\n@Component({\n    selector: \"sq-modal-footer\",\n    templateUrl: \"./modal-footer.component.html\",\n    styleUrls: [\"./modal-footer.component.scss\"]\n})\nexport class BsModalFooter implements OnChanges{\n    @Input() buttons: ModalButton[] = [];\n    @Input() isProcessingState: boolean;\n    @HostBinding(\"class.sq-modal-footer\") true;\n\n    constructor(\n        protected modalRef: ModalRef,\n        protected injector: Injector) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.isProcessingState) {\n            this.isProcessingState = changes.isProcessingState.currentValue;\n        }\n    }\n\n    buttonClick(button: ModalButton) {\n        if (button.validation && button.validation.controls) {\n            // Mark all controls as dirty so validation errors are shown on all controls after a submit\n            for (const name of Object.keys(button.validation.controls)) {\n                button.validation.controls[name].markAsDirty();\n            }\n        }\n        button.click(this.modalRef);\n        return false;\n    }\n\n    public close(): void {\n        this.modalRef.close(ModalResult.Cancel);\n    }\n}\n","<div class=\"modal-footer\">\n    <ng-container *ngIf=\"!isProcessingState\">\n        <section *ngFor=\"let button of buttons\">\n            <button *ngIf=\"button.visible && !button.anchor\" type=\"{{button.primary ? 'submit' : 'button'}}\" class=\"btn {{button.primary ? 'btn-primary' : button.result < 0 ? '' : 'btn-secondary'}}\" (click)=\"buttonClick(button)\">{{button.getText() | sqMessage}}</button>\n            <a *ngIf=\"button.visible && button.anchor\"\n                href=\"#\"\n                class=\"btn {{button.primary ? 'btn-primary' : button.result < 0 ? 'sq-anchor-btn' : 'btn-secondary'}}\"\n                (click)=\"buttonClick(button)\">{{button.getText() | sqMessage}}</a>\n        </section>\n    </ng-container>\n    <ng-container *ngIf=\"isProcessingState\">\n        <span class=\"loader\"></span>\n        <button type=\"button\" class=\"btn\" (click)=\"close()\">{{ 'msg#btnClose.text' | sqMessage }}</button>\n    </ng-container>\n</div>\n<ng-content></ng-content>\n\n\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  url: \"https://localhost:4200\",\n  autoSAMLProvider: \"identity-dev\",\n  production: false\n};\n\n  /*\n   * For easier debugging in development mode, you can import the following file\n   * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n   *\n   * This import should be commented out in production mode because it will have a negative impact\n   * on performance if an error is thrown.\n   */\n  // import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import {Type} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {MessageParams} from \"@sinequa/core/intl\";\n\nexport abstract class IAction {\n    name?: string;\n    text?: string;\n    href?: string;\n    icon?: string;\n    styles?: string | string[] | Set<string> | {[klass: string]: any};\n    iconAfter?: string;\n    separator?: boolean;\n    scrollable?: boolean; // The children are scrollable\n    scrollGroup?: boolean; // A separate item whose children are scrollable \"in place\"\n    component?: Type<any>;\n    componentInputs?: any;\n    data?: any;\n    title?: string; // display as a tooltip\n    selected?: boolean;\n    disabled?: boolean;\n    hidden?: boolean;\n    flattenable?: boolean; // A dropdown with only one child is flattened to show only the child at the top level\n    messageParams?: MessageParams; // i18n - passed to sqMessage in (eg) action-item-content\n    headerGroup?: boolean; // display 'title' property as dropdown header before children\n\n    action?: (item: Action, event: UIEvent) => void;\n    toggle?: (item: Action, open: boolean) => void;\n    updater?: (item: Action) => void;\n    init?: (item: Action) => void;\n    destroy?: (item: Action) => void;\n\n    children?: Action[];\n}\n\nexport class Action extends IAction {\n\n    constructor(options: IAction) {\n        super();\n        Utils.extend(this, options);\n    }\n\n    get hasChildren(): boolean {\n        return !!this.children && (this.children.length > 0);\n    }\n\n    get showSelected(): boolean {\n        return typeof this.selected !== 'undefined';\n    }\n\n    update(): void {\n        if (this.updater) {\n            this.updater(this);\n        }\n        if (this.children) {\n            for (const child of this.children) {\n                child.update();\n            }\n        }\n    }\n}","export default {\n    \"money\": {\n        \"inspect\": \"Inspect this document\",\n        \"filter\": \"Filter search results with this particular amount of money\",\n        \"timeline\": \"Money Timeline\",\n        \"cloud\": \"Money Cloud\"\n    },\n};\n","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {AuditEvent, AuditEventType, CCSortingChoice, Results} from \"@sinequa/core/web-services\";\nimport {Action} from \"@sinequa/components/action\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-sort-selector\",\n    templateUrl: \"./sort-selector.html\"\n})\nexport class BsSortSelector implements OnChanges {\n    @Input() results: Results;  // Needed to detect Changes\n    @Input() rightAligned: boolean;\n    @Input() style: string;\n    @Input() size: string;\n    sortAction: Action | undefined;\n\n    constructor(\n        public appService: AppService,\n        public searchService: SearchService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"results\"]) {\n            this.buildSortAction();\n        }\n    }\n\n    private setCurrentSort(name: string) {\n        if (this.sortAction) {\n            const sortingChoices = this.getSortingChoices();\n            const current = sortingChoices && sortingChoices.find((value) => {\n                return Utils.eqNC(value.name, name);\n            });\n            if (current) {\n                const queryOrderBy = this.searchService.query.orderBy;\n                this.sortAction.text = !!queryOrderBy ? \"msg#sortSelector.sortOther\" : current.display || current.name;\n                this.sortAction.icon = !!queryOrderBy ? 'fas fa-sort'\n                    : this.isAscendingSort(current.orderByClause) ? 'fas fa-sort-amount-up'\n                    : this.isDescendingSort(current.orderByClause) ? 'fas fa-sort-amount-down' : 'fas fa-sort';\n            }\n            else {\n                this.sortAction.text = \"msg#sortSelector.sortOther\";\n                this.sortAction.icon = \"fas fa-sort\";\n            }\n            this.sortAction.messageParams = {values: {text: this.sortAction.text}}; // for title\n        }\n    }\n\n    private selectSort(sortingChoice: CCSortingChoice) {\n        this.setCurrentSort(sortingChoice.name);\n        this.searchService.query.sort = sortingChoice.name;\n        const audit: AuditEvent = {\n            type: AuditEventType.Search_Sort,\n            detail: {\n                sort: sortingChoice.name,\n                orderByClause: sortingChoice.orderByClause,\n            }\n        };\n        this.searchService.search(undefined, audit);\n    }\n\n    private buildSortAction() {\n        const sortingChoices = this.getSortingChoices();\n        if (!sortingChoices || sortingChoices.length === 0) {\n            this.sortAction = undefined;\n            return;\n        }\n        this.sortAction = new Action({\n            title: \"msg#sortSelector.sortByTitle\",\n            children: sortingChoices\n                .filter(sortingChoice => this.searchService.hasRelevance || !Utils.includes(sortingChoice.orderByClause, \"globalrelevance\"))\n                .map(sortingChoice => new Action({\n                    icon: this.isAscendingSort(sortingChoice.orderByClause) ? 'fas fa-sort-amount-up'\n                            : this.isDescendingSort(sortingChoice.orderByClause) ? 'fas fa-sort-amount-down' : '',\n                    text: sortingChoice.display || sortingChoice.name,\n                    data: sortingChoice,\n                    action: (item: Action, event: Event) => {\n                        this.selectSort(item.data);\n                    }\n                }))\n        });\n        if (!!this.searchService.results) {\n            this.setCurrentSort(this.searchService.results.sort);\n        }\n    }\n\n    private isAscendingSort(orderByClause: string): boolean {\n        if (!orderByClause) {\n            return false;\n        }\n\n        const lastElement: string = orderByClause.substring(orderByClause.lastIndexOf(' ') + 1);\n        return Utils.eqNC('asc', lastElement);\n    }\n\n    private isDescendingSort(orderByClause: string): boolean {\n        if (!orderByClause) {\n            return false;\n        }\n\n        const lastElement: string = orderByClause.substring(orderByClause.lastIndexOf(' ') + 1);\n        return Utils.eqNC('desc', lastElement);\n    }\n\n    private isTabSearch(): boolean {\n        const query = this.appService.ccquery;\n        if (!query)\n            return false;\n        const tabSearch = query.tabSearch;\n        return !(!tabSearch || !tabSearch.column || !tabSearch.isActive ||\n            !tabSearch.tabs || tabSearch.tabs.length === 0);\n    }\n\n    private getSortingChoices(): CCSortingChoice[] | null | undefined {\n        if (this.isTabSearch()) {\n            const tabName = this.searchService.results && this.searchService.results.tab;\n            if (tabName && this.appService.ccquery) {\n                for (const t of this.appService.ccquery.tabSearch.tabs) {\n                    if (t.name === tabName) {\n                        const s = t.sortingChoices;\n                        if (s && s.length > 0)\n                            return s;\n                        else\n                            break;\n                    }\n                }\n            }\n        }\n        const q = this.appService.ccquery;\n        return q && q.sortingChoices;\n    }\n}","<div class=\"btn-toolbar\" role=\"toolbar\" aria-label=\"Toolbar\">\n    <div class=\"btn-group\" [hidden]=\"!searchService.haveRecords || !sortAction\" [sq-action-buttons]=\"{items: [sortAction], style: style, autoAdjust: true, rightAligned: rightAligned, size: size}\"></div>\n</div>","import {Component, Input} from \"@angular/core\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\nimport {BreadcrumbsItem} from \"../../breadcrumbs\";\n\n@Component({\n    selector: \"sq-breadcrumbs\",\n    templateUrl: \"./breadcrumbs.html\",\n    styleUrls: [\"./breadcrumbs.css\"]\n})\nexport class BsBreadcrumbs {\n    @Input() results: Results;\n    @Input() allowDeletion: boolean = true;\n    @Input() displayFieldNames: boolean = true;\n\n    constructor(\n        public searchService: SearchService) {\n    }\n\n    getField(item: BreadcrumbsItem): string {\n        if (item.expr) {\n            if (item.expr.field) {\n                return item.expr.field;\n            }\n            else {\n                if (!item.expr.isStructured) {\n                    return \"text\";\n                }\n                else {\n                    const fields = item.expr.getFields();\n                    return fields.join(\"-\");\n                }\n            }\n        }\n        return \"unknown\";\n    }\n\n    home() {\n        this.searchService.home();\n        return false;\n    }\n\n    selectItem(item: BreadcrumbsItem) {\n        this.searchService.selectBreadcrumbsItem(item);\n        return false;\n    }\n\n    removeItem(item: BreadcrumbsItem) {\n        this.searchService.removeBreadcrumbsItem(item);\n    }\n}","<ol class=\"breadcrumb\">\n    <li class=\"breadcrumb-item\">\n        <a href=\"#\" (click)=\"home()\" title=\"Home\"><span class=\"fas fa-home\"></span></a>\n    </li>\n    <ng-container *ngFor=\"let item of searchService.breadcrumbs?.items\">\n        <li *ngIf=\"!item.hidden\" class=\"breadcrumb-item {{item.active ? 'active' : ''}} sq-breadcrumb-item  sq-breadcrumb-item-{{getField(item)}}\"><!--\n            --><a *ngIf=\"!item.active\" href=\"#\" (click)=\"selectItem(item)\" [innerHTML]=\"item.display | sqExpr:{withFields: displayFieldNames, asHTML: true}\"></a><!--\n            --><span *ngIf=\"item.active\" [innerHTML]=\"item.display | sqExpr:{withFields: displayFieldNames, asHTML: true}\"></span>\n            <span *ngIf=\"allowDeletion\" class=\"fas fa-times\" role=\"button\" (click)=\"removeItem(item)\" title=\"{{'msg#breadcrumbs.itemRemove' | sqMessage}}\"></span>\n        </li>\n    </ng-container>\n</ol>","export * from \"./public-api\";","import { Injectable, Inject, InjectionToken } from \"@angular/core\";\nimport { Router, ActivatedRoute, NavigationEnd } from \"@angular/router\";\nimport { Subject, Observable } from \"rxjs\";\nimport { Utils } from '@sinequa/core/base';\nimport { SearchService } from '@sinequa/components/search';\nimport { Query } from '@sinequa/core/app-utils';\n\n/**\n * Configuration of a Results View\n */\nexport interface ResultsView {\n    /** Name of the results view */\n    name: string;\n    /** Type of the results view (not used internally, but may be useful if multiple views share a common component) */\n    type: string;\n    /** How the results view should be displayed (default to the name) */\n    display?: string;\n    /** Icon class for the results view */\n    icon?: string;\n    /** List of tab for which this tab can be displayed (defaults to all if undefined) */\n    includedTabs?: string[];\n    /** List of tab for which this tab is excluded (defaults to none if undefined) */\n    excludedTabs?: string[];\n    /**\n     * Method called when selecting this results view. It can be used to modify the search query\n     * when a view has specific data to display. If the method returns true, then selecting this view\n     * triggers a search and the view selection becomes effective upon results. If the method results false,\n     * (or if the method is undefined), then selecting this view does not trigger a new search\n     * and the view selection is immediate.\n     */\n    beforeSearch?: (query: Query, previousView: ResultsView) => boolean;\n}\n\nexport interface ResultsViewEvent {\n    type: \"before-select\" | \"after-select\" | \"select-cancelled\";\n}\n\nexport interface ResultsViewBeforeSelectEvent extends ResultsViewEvent {\n    type: \"before-select\";\n    view: ResultsView;\n    promises: Promise<boolean>[];\n}\n\nexport interface ResultsViewAfterSelectEvent extends ResultsViewEvent {\n    type: \"after-select\";\n    view: ResultsView;\n}\n\nexport interface ResultsViewSelectCancelledEvent extends ResultsViewEvent {\n    type: \"select-cancelled\";\n    view: ResultsView;\n}\n\nexport type ResultsViewEvents =\n    ResultsViewBeforeSelectEvent |\n    ResultsViewAfterSelectEvent |\n    ResultsViewSelectCancelledEvent;\n\nexport const RESULTS_VIEWS = new InjectionToken<ResultsView[]>(\"RESULTS_VIEWS\");\nexport const DEFAULT_VIEW = new InjectionToken<ResultsView>(\"DEFAULT_VIEW\");\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ResultsViewService {\n\n    protected _resultsView : ResultsView;\n    protected readonly _resultsViews : ResultsView[];\n\n    protected _resultsViewSelected = new Subject<ResultsView>();\n    protected _events = new Subject<ResultsViewEvents>();\n\n    protected pendingView: ResultsView | undefined;\n\n    /**\n     * Constructor: Expects the configuration for a list of views and\n     * one default view. These views can be set when importing the module in the AppModule\n     * with the ResultsViewModule.forRoot() method.\n     */\n    constructor(\n        @Inject(DEFAULT_VIEW) public defaultView: ResultsView,\n        @Inject(RESULTS_VIEWS) resultsViews: ResultsView[],\n        protected router: Router,\n        protected route: ActivatedRoute,\n        protected searchService: SearchService\n    ) {\n        this._resultsViews = resultsViews;\n        this._resultsView = this.defaultView;\n\n        /**\n         * Listener triggered whenever the URL changes\n         */\n        this.router.events.subscribe(event => {\n            if (event instanceof NavigationEnd) {\n                this.handleNavigation();\n            }\n        });\n\n        /**\n         * Listener triggered whenever new results come in.\n         * Some views must be displayed after a search, hence the\n         * pendingView flag.\n         */\n        this.searchService.resultsStream.subscribe(results => {\n            if(this.pendingView) {\n                this.searchService.queryStringParams.view = this.pendingView.name;\n                this.searchService.navigate({skipSearch: true});\n                this.pendingView = undefined;\n            }\n        });\n\n        // Automatically switch results views, if we go to a tab that has specific list of views\n        this.searchService.events.subscribe(event => {\n            // Event called just before the query for the new tab is searched\n            if(event.type === \"before-select-tab\" && event.query.tab) {\n                const views = this.getIncludedViews(event.query.tab);\n                // If there are views for this tab and they don't include the current one...\n                if(views.length > 0 && !views.includes(this.resultsView)) {\n                    // Set the view as pending\n                    this.pendingView = views[0];\n                    // Modify the query if needed\n                    if(this.pendingView.beforeSearch) {\n                        this.pendingView.beforeSearch(event.query, this.resultsView);\n                    }\n                }\n            }\n        })\n    }\n\n\n    // GETTERS\n\n    public get resultsViewSelected(): Observable<ResultsView> {\n        return this._resultsViewSelected;\n    }\n\n    public get events(): Observable<ResultsViewEvents> {\n        return this._events;\n    }\n\n    public get resultsView(): ResultsView {\n        return this._resultsView;\n    }\n\n    public get views(): ResultsView[] {\n        return this._resultsViews;\n    }\n\n    // EVENT HANDLERS\n\n    /**\n     * Navigate to a new URL including the given results view's name\n     * @param view \n     */\n    protected navigate(view: ResultsView) {\n        let waitForResults = !!view.beforeSearch;\n        if(view.beforeSearch) {\n            waitForResults = view.beforeSearch(this.searchService.query, this.resultsView);\n        }\n        if(!waitForResults) {\n            // We switch view immediately via the search service (which centralizes the navigation)\n            this.searchService.queryStringParams.view = view.name;\n            this.searchService.navigate({skipSearch: true});\n        }\n        else {\n            // We set the view as \"pending\", that is waiting for new results to come in\n            this.pendingView = view;\n            this.searchService.search();\n        }\n    }\n\n    /**\n     * Responds to a change in the URL: Sets the results view if the URL\n     * specifies a different results view name.\n     */\n    protected handleNavigation() {\n        const url = Utils.makeURL(this.router.url);\n        const view = this.getView(url.searchParams.get(\"view\"));\n        if(view && view !== this.resultsView) {\n            this.searchService.queryStringParams.view = view.name; // Needed when refreshing the page\n            this.setResultsView(view);\n        }\n    }\n\n    /**\n     * Sets the results view and emits an event\n     * @param view \n     */\n    protected setResultsView(view: ResultsView) {\n        this._resultsView = view;\n        this._events.next({type: \"after-select\", view});\n        this._resultsViewSelected.next(view);\n    }\n\n\n    // PUBLIC API\n\n    /**\n     * Selects the given results view. This method is asynchronous:\n     * - The selected results view might modify the query before being displayed\n     * - The view selection works with a navigation via the router (adding the view name to the URL)\n     * @param view \n     */\n    public selectResultsView(view: ResultsView) {\n        if (view) {\n            // Raise before event...\n            const beforeEvent: ResultsViewBeforeSelectEvent = {\n                type: \"before-select\",\n                view,\n                promises: []\n            }\n            this._events.next(beforeEvent);\n            if (beforeEvent.promises.length === 0) {\n                this.navigate(view);\n            }\n            else {\n                Promise.all(beforeEvent.promises)\n                    .then((results) => {\n                        const ok = results.every(result => result);\n                        if (ok) {\n                            this.navigate(view);\n                        }\n                        else {\n                            console.log(\"selectResultsView cancelled\");\n                            this._events.next({type: \"select-cancelled\", view});\n                        }\n                    })\n                    .catch((reason) => {\n                        console.log(\"selectResultsView error:\", reason);\n                        this._events.next({type: \"select-cancelled\", view});\n                    });\n            }\n        }\n        else {\n            console.error(\"Undefined Results View\");\n        }\n    }\n\n    /**\n     * Selects the results view with the given name. This method is asynchronous:\n     * - The selected results view might modify the query before being displayed\n     * - The view selection works with a navigation via the router (adding the view name to the URL)\n     * @param viewName \n     */\n    public selectResultsViewName(viewName: string){\n        const view = this.getView(viewName);\n        if (view) {\n            this.selectResultsView(view);\n        }\n    }\n\n    /**\n     * Returns the results view with the given name\n     * @param viewName \n     */\n    public getView(viewName): ResultsView | undefined {\n        return this.views.find(v => v.name === viewName);\n    }\n\n    /**\n     * Returns the list of results views compatible with a given tab\n     * @param tab \n     */\n    public getIncludedViews(tab?: string): ResultsView[] {\n        const views: ResultsView[] = [];\n        for (const view of this.views) {\n            const included = !!view.includedTabs\n                ? view.includedTabs.includes(tab || \"\")\n                : !view.excludedTabs || !view.excludedTabs.includes(tab || \"\");\n\n            if (included) {\n                views.push(view);\n            }\n        }\n        return views;\n    }\n\n}","import {Injectable, OnDestroy} from \"@angular/core\";\nimport {Subject, Observable} from \"rxjs\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\n\n/**\n * Notification types.\n */\nexport const enum NotificationType {\n    Success,\n    Info,\n    Warning,\n    Error,\n    Last = Error\n}\n\n/**\n * Notification visibility states.\n */\nexport const enum NotificationState {\n    Initial,\n    Showing,\n    Hidden\n}\n\n/**\n * Describes a notification object.\n */\nexport interface Notification {\n    /**\n     * The notification title.\n     */\n    title?: string;\n    /**\n     * The notification text.\n     */\n    text?: string;\n    /**\n     * Message parameters for the notification `text`.\n     */\n    params?: MapOf<any>;\n    /**\n     * Determines whether the notification should close automatically after a period.\n     * The duration is determined by a particular UI implementation.\n     */\n    autoClose?: boolean;\n    /**\n     * The notification type.\n     */\n    type?: NotificationType;\n    /**\n     * The nofification state.\n     */\n    state?: NotificationState;\n}\n\n/**\n * Describes a base notification event.\n */\nexport interface NotificationEvent {\n    /**\n     * The possible notification event types.\n     */\n    type: \"updated\" | \"data-updated\";\n}\n\n/**\n * Describes a notification \"updated\" event. This event is emitted\n * when one or more notifications are added, shown, hidden or deleted.\n */\nexport interface UpdatedEvent extends NotificationEvent {\n    type: \"updated\";\n}\n\n/**\n * Describes a data updated event. This event is emitted by the\n * [NotificationsService.set]{NotificationsService#set} method\n * is called.\n */\nexport interface DataUpdatedEvent extends NotificationEvent {\n    type: \"data-updated\";\n}\n\n/**\n * This service provides methods for managing notifications. No user interface\n * is imposed. It also manages a key-value data store. Events are emitted\n * when the notifications and data store are updated.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class NotificationsService implements OnDestroy {\n    protected data: MapOf<any>;\n    /**\n     * The current notifications.\n     */\n    notifications: Notification[];\n    protected _events = new Subject<UpdatedEvent | DataUpdatedEvent>();\n    protected _notificationsStream = new Subject<Notification>();\n\n    constructor() {\n        this.data = {};\n        this.notifications = [];\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n    }\n\n    /**\n     * Get the obervable stream of notification events.\n     */\n    get events(): Observable<UpdatedEvent | DataUpdatedEvent> {\n        return this._events;\n    }\n\n    /**\n     * Get the observable stream of notifications. This will\n     * emit each time a notification is added. It will also emit\n     * `null` when notifications are deleted.\n     */\n    get notificationsStream(): Observable<Notification> {\n        return this._notificationsStream;\n    }\n\n    /**\n     * Set a value in the data store. The `data-updated` event\n     * is emitted.\n     *\n     * @param key The value's key.\n     * @param value The value.\n     */\n    set(key: string, value: any) {\n        this.data[key] = value;\n        this._events.next({type: \"data-updated\"});\n    }\n\n    /**\n     * Get a value from the data store.\n     *\n     * @param key The value's key.\n     */\n    get(key: string): any {\n        return this.data[key];\n    }\n\n    /**\n     * Increment a counter in the data store identified by the passed `key`.\n     * The intial value is 0.\n     *\n     * @param key The key for the counter.\n     */\n    enter(key: string) {\n        let value = this.data[key];\n        if (!value) {\n            value = 0;\n        }\n        value++;\n        this.set(key, value);\n    }\n\n    /**\n     * Decrement a counter in the data store identified by the passed `key`.\n     * Calls to `leave` should match calls to `enter`. If the counter becomes negative\n     * an \"underflow\" warning is emitted to the console and the counter set to 0.\n     *\n     * @param key The key for the counter.\n     */\n    leave(key: string) {\n        let value = this.data[key];\n        value--;\n        if (value < 0) {\n            console.warn(\"NotificationsService.leave underflow for:\", key);\n        }\n        if (!value || value < 0) {\n            value = 0;\n        }\n        this.set(key, value);\n    }\n\n    /**\n     * `true` if there are current notifications.\n     */\n    get haveNotifications(): boolean {\n        return this.notifications.length > 0;\n    }\n\n    /**\n     * `true` if the all current notifications are in the `Showing` state.\n     */\n    get allNotificationsShowing(): boolean {\n        for (const notification of this.notifications) {\n            if (notification.state !== NotificationState.Showing) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * `true` if all current notifications are in the `Hidden` state.\n     */\n    get allNotificationsHidden(): boolean {\n        for (const notification of this.notifications) {\n            if (notification.state !== NotificationState.Hidden) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Gets the last added notification.\n     */\n    get lastNotification(): Notification | undefined {\n        if (this.notifications.length > 0) {\n            return this.notifications[this.notifications.length - 1];\n        }\n        return undefined;\n    }\n\n    /**\n     * Add a notification. The `updated` event is emitted and the added notification\n     * is emitted on the notifications stream.\n     *\n     * @param type The notification type.\n     * @param text The notification message text.\n     * @param params Parameters for the message text.\n     * @param title The notification title.\n     * @param autoClose A flag determining whether the notification should auto-close.\n     */\n    notify(type: NotificationType, text: string, params?: MapOf<any>, title?: string, autoClose?: boolean): Notification {\n        const notification: Notification = {\n            type,\n            text,\n            params,\n            title,\n            autoClose\n        };\n        // Replace the last notification if it is the same as the new one\n        const lastNotification = this.lastNotification;\n        if (lastNotification) {\n            notification.state = lastNotification.state;\n            if (Utils.equals(notification, lastNotification)) {\n                this.notifications.splice(this.notifications.length - 1, 1);\n            }\n        }\n        notification.state = NotificationState.Initial;\n        this.notifications.push(notification);\n        this._events.next({type: \"updated\"});\n        this._notificationsStream.next(notification);\n        return notification;\n    }\n\n    /**\n     * Add a `Success` type notification. The notification will auto-close.\n     *\n     * @param text The notification message text.\n     * @param params Parameters for the message text.\n     * @param title The notification title.\n     */\n    success(text: string, params?: MapOf<any>, title?: string): Notification {\n        return this.notify(NotificationType.Success, text, params, title, true);\n    }\n\n    /**\n     * Add an `Info` type notification. The notification will auto-close.\n     *\n     * @param text The notification message text.\n     * @param params Parameters for the message text.\n     * @param title The notification title.\n     */\n    info(text: string, params?: MapOf<any>, title?: string): Notification {\n        return this.notify(NotificationType.Info, text, params, title, true);\n    }\n\n    /**\n     * Add a `Warning` type notification. The nofification will not auto-close.\n     *\n     * @param text The notification message text.\n     * @param params Parameters for the message text.\n     * @param title The notification title.\n     */\n    warning(text: string, params?: MapOf<any>, title?: string): Notification {\n        return this.notify(NotificationType.Warning, text, params, title, false);\n    }\n\n    /**\n     * Add an `Error` type notification. The nofification will not auto-close.\n     *\n     * @param text The notification message text.\n     * @param params Parameters for the message text.\n     * @param title The notification title.\n     */\n    error(text: string, params?: MapOf<any>, title?: string): Notification {\n        return this.notify(NotificationType.Error, text, params, title, false);\n    }\n\n    /**\n     * Set the state of all notifications to `Showing`. The `updated` event is\n     * emitted.\n     */\n    showNotifications() {\n        for (const notification of this.notifications) {\n            notification.state = NotificationState.Showing;\n        }\n        this._events.next({type: \"updated\"});\n    }\n\n    /**\n     * Set the state of all notifications to `Hidden`. The `updated` event is\n     * emitted.\n     */\n    hideNotifications() {\n        for (const notification of this.notifications) {\n            notification.state = NotificationState.Hidden;\n        }\n        this._events.next({type: \"updated\"});\n    }\n\n    /**\n     * Delete all notifications. The `updated` event is\n     * emitted. `null` is emitted on the notifications stream.\n     */\n    deleteAllNotifications() {\n        this.notifications.splice(0);\n        this._events.next({type: \"updated\"});\n        this._notificationsStream.next(undefined);\n    }\n\n    /**\n     * Delete the passed `notification`. The `updated` event is\n     * emitted. `null` is emitted on the notifications stream if no notifications\n     * remain.\n     *\n     * @param notification The notification to delete.\n     */\n    deleteNotification(notification: Notification) {\n        for (let i = 0, ic = this.notifications.length; i < ic; i++) {\n            if (this.notifications[i] === notification) {\n                this.notifications.splice(i, 1);\n                this._events.next({type: \"updated\"});\n                if (this.notifications.length === 0) {\n                    this._notificationsStream.next(undefined);\n                }\n                break;\n            }\n        }\n    }\n\n    /**\n     * Close the passed `notification`. If the notification is in the\n     * `Initial` state then its state is set to `Hidden` otherwise the\n     * notification is deleted. The `updated` event is emitted.\n     *\n     * @param notification The notification to close.\n     */\n    closeNotification(notification: Notification) {\n        if (notification.state === NotificationState.Initial) {\n            notification.state = NotificationState.Hidden;\n            this._events.next({type: \"updated\"});\n        }\n        else {\n            this.deleteNotification(notification);\n        }\n    }\n}\n","import {Component, Input} from \"@angular/core\";\n\n/**\n * A default component to be used by the {@link ValidationDirective} directive to display\n * a validation error message using {@link MessagePipe}.\n */\n@Component({\n    selector: \"sq-validation-message\",\n    template: `\n        <div class=\"sq-validation-message\">{{text | sqMessage:{values: info} }}</div>\n    `\n})\nexport class ValidationMessageComponent {\n    /**\n     * The error message text passed to the `sqMessage` pipe.\n     */\n    @Input() text: string;\n    /**\n     * The entry for the validator in a `ValidationErrors` object. This is passed\n     * as the values to the `sqMessage` pipe.\n     */\n    @Input() info: any;\n}\n","import { Component, Inject, OnDestroy, OnInit } from \"@angular/core\";\nimport { FormControl, FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { MODAL_MODEL, PromptOptions, ModalResult} from \"./modal.service\";\nimport { ModalRef } from \"./modal-ref\";\nimport { Utils } from '@sinequa/core/base';\n\n@Component({\n    selector: \"sq-core-prompt\",\n    template: `\n        <form novalidate [formGroup]=\"form\" style=\"border: solid;padding: 16px;background-color: white;\" cdkTrapFocus [cdkTrapFocusAutoCapture]=\"true\">\n            <h3 style=\"margin-top: 0;\">{{title | sqMessage}}</h3>\n            <div>{{model.message | sqMessage:model.messageParams}}</div>\n            <input type=\"text\" formControlName=\"input\" *ngIf=\"!model.rowCount\">\n            <textarea type=\"text\" formControlName=\"input\" spellcheck=\"on\" rows=\"{{model.rowCount}}\" autofocus *ngIf=\"!!model.rowCount\">\n            </textarea>\n            <ng-container *ngIf=\"showError(inputControl)\">\n                <br>\n                <span style=\"color: red;\">{{form.get(\"input\")?.errors | sqValidationError}}</span>\n            </ng-container>\n            <hr>\n            <button type=\"submit\" (click)=\"ok()\">{{'msg#modal.buttons.ok' | sqMessage}}</button>\n            <button type=\"button\" (click)=\"cancel()\">{{'msg#modal.buttons.cancel' | sqMessage}}</button>\n        </form>\n    `\n})\nexport class Prompt implements OnInit, OnDestroy {\n    inputControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: PromptOptions,\n        protected modalRef: ModalRef,\n        protected formBuilder: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.inputControl = new FormControl(this.model.output, this.model.validators || Validators.required);\n        this.form = this.formBuilder.group({\n            input: this.inputControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.model.output = this.inputControl.value;\n            });\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n\n    showError(control: FormControl): boolean {\n        return control.invalid && (control.dirty || this.modalRef.submitted);\n    }\n\n    ok() {\n        if (!this.form.valid) {\n            return;\n        }\n        this.modalRef.close(ModalResult.OK);\n    }\n\n    cancel() {\n        this.modalRef.close(ModalResult.Cancel);\n    }\n\n    get title(): string {\n        return this.model.title ? this.model.title : \"msg#modal.prompt.title\";\n    }\n\n}\n","import {Component, OnInit, OnDestroy, AfterViewInit, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {LoginService} from \"./login.service\";\n\n/**\n * A utility base class to assist main components in the handling of the login state of the\n * the application. It initiates the login process and sets `loginComplete` accordingly\n * whenever the login state changes\n */\n@Component({\n    template: ''\n})\nexport class ComponentWithLogin implements OnInit, OnDestroy, AfterViewInit {\n    protected loginSubscription: Subscription;\n    /**\n     * `true` if the application is currently logged in successfully\n     */\n    loginComplete: boolean;\n\n    constructor(\n        protected loginService: LoginService,\n        protected changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    /**\n     * A method called whenever the `session-changed` event is received. This can be\n     * overridden by the subclassing component.\n     */\n    onLoginComplete() {\n    }\n\n    /**\n     * Subscribes to the [LoginService.events]{@link LoginService#events} and sets\n     * the `loginComplete` member whenever the `session-changed` event is received\n     */\n    ngOnInit() {\n        this.loginComplete = this.loginService.complete;\n        this.loginSubscription = this.loginService.events.subscribe(event => {\n            if (event.type === \"session-changed\") {\n                this.loginComplete = this.loginService.complete;\n                this.onLoginComplete();\n                this.changeDetectorRef.markForCheck();\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        this.loginSubscription.unsubscribe();\n    }\n\n    /**\n     * Initiates the login process by calling [LoginService.login]{@link LoginService#login}\n     */\n    ngAfterViewInit() {\n        this.loginService.login();\n    }\n}\n","export * from \"./modal.module\";\nexport * from \"./confirm.component\";\nexport * from \"./prompt.component\";\nexport * from \"./editable/editable\";\nexport * from \"./help/help\";\nexport * from \"./login.component\";\nexport * from \"./modal-footer.component\";\nexport * from \"./modal-header.component\";\nexport * from \"./modal.component\";\nexport * from \"./override-user/override-user\";","import { Directive, Input, Output, HostBinding, EventEmitter, OnChanges, AfterContentInit,\n    ContentChildren, QueryList, HostListener } from \"@angular/core\";\nimport { FocusKeyManager } from \"@angular/cdk/a11y\";\nimport { FocusKeyListItemDirective } from \"./focus-key-list-item.directive\";\nimport { Utils } from \"@sinequa/core/base\";\n\n@Directive({\n    selector: \"[sqFocusKeyList]\"\n})\nexport class FocusKeyListDirective implements OnChanges, AfterContentInit {\n    @Input() activeItem = -1;\n    @Input() withWrap = true;\n    @Output() itemSelect = new EventEmitter<number>();\n    @HostBinding(\"attr.role\") role = \"list\";\n    @ContentChildren(FocusKeyListItemDirective) components: QueryList<FocusKeyListItemDirective>;\n    protected keyManager: FocusKeyManager<FocusKeyListItemDirective>;\n\n    ngOnChanges() {\n        if (this.keyManager) {\n            this.keyManager.setActiveItem(this.activeItem);\n        }\n    }\n\n    ngAfterContentInit() {\n        this.keyManager = new FocusKeyManager<FocusKeyListItemDirective>(this.components);\n        if (this.withWrap) {\n            this.keyManager.withWrap();\n        }\n        if (this.activeItem >= 0 && this.components.length > 0) {\n            Utils.delay().then(() => {\n                this.keyManager.setActiveItem(this.activeItem);\n            });\n        }\n    }\n\n    @HostListener(\"keydown\", [\"$event\"])\n    onKeydown(event) {\n        this.keyManager.onKeydown(event);\n        this.itemSelect.emit(this.keyManager.activeItemIndex !== null ? this.keyManager.activeItemIndex : undefined);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { Utils } from \"@sinequa/core/base\";\n\n/**\n * A service to manage navigator downloads\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class DownloadWebService {\n\n    /**\n     * Subscribes to the given observable to trigger a download action on the navigator\n     * when the observed object is ready.\n     *\n     * @param observable The observable to subscribe.\n     * @returns The observable for chaining.\n     */\n    public download(observable: Observable<HttpResponse<Blob>>): Observable<HttpResponse<Blob>> {\n        Utils.subscribe(\n            observable,\n            (response: HttpResponse<Blob>) => {\n                const header = response.headers.get('content-disposition');\n                const fileName = header ? header.split('filename=')[1].replace('\"', '').replace('\"', '') : \"\";\n\n                if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n                    // For IE\n                    window.navigator.msSaveOrOpenBlob(response.body, fileName);\n                } else {\n                    const link = document.createElement('a');\n                    document.body.appendChild(link);\n                    const blobUrl = window.URL.createObjectURL(response.body);\n                    link.href = blobUrl;\n                    link.download = fileName;\n                    link.click();\n                    link.remove();\n                    window.URL.revokeObjectURL(blobUrl);\n                }\n\n                return response;\n            }\n        );\n        return observable;\n    }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from \"@angular/core\";\nimport { Results } from \"@sinequa/core/web-services\";\nimport { SearchService, BreadcrumbsItem } from \"@sinequa/components/search\";\nimport { AbstractFacet } from \"../../abstract-facet\";\nimport { Action } from \"@sinequa/components/action\";\n\n@Component({\n    selector: \"sq-facet-mysearch\",\n    templateUrl: \"./facet-mysearch.html\",\n    styleUrls: [\"./facet-mysearch.scss\"],\n})\nexport class BsMySearch extends AbstractFacet implements OnChanges {\n    @Input() results: Results;\n    /** Display icon to delete items */\n    @Input() allowDeletion: boolean = true;\n    /** Display each item's field */\n    @Input() displayFieldNames: boolean = false;\n    /** Make the div collapsible */\n    @Input() collapsible: boolean = false;\n    /** Add a badge likely style to items */\n    @Input() useBadges: boolean = false;\n    /** Wether we Ignore text and fielded search */\n    @Input() ignoreText: boolean = true;\n    /** Items of those facets will be excluded  */\n    @Input() excludedFacets: (string | undefined)[] = [\"search-form\"];\n\n\n    collapsed = false;\n    clearAction: Action;\n    items: BreadcrumbsItem[] = [];\n    fields: string[] = [];\n\n    constructor(public searchService: SearchService) {\n        super();\n\n        this.clearAction = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.filters.clear\",\n            action: () => this.clear(),\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!!changes[\"results\"]) {\n            /** Initialize items based on input values */\n            this.items = this.ignoreText\n                ? this.searchService.breadcrumbs?.items.filter(\n                        (item: BreadcrumbsItem) =>\n                            item.expr && !(item.expr && !item.expr.field && !item.expr.isStructured) && !this.excludedFacets.includes(item.facet)\n                    ) || []\n                : this.searchService.breadcrumbs?.items || [];\n\n            /** Retrieve the field name of each item */\n            this.fields = [];\n            for (const item of this.items) {\n                this.fields.push(this.getField(item))\n            }\n\n        }\n    }\n\n    protected getField(item: BreadcrumbsItem): string {\n        if (item.expr) {\n            if (item.expr.field) {\n                return item.expr.field;\n            } else {\n                if (!item.expr.isStructured) {\n                    return \"text\";\n                } else {\n                    const fields = item.expr.getFields();\n                    return fields.join(\"-\");\n                }\n            }\n        }\n        return \"unknown\";\n    }\n\n    removeItem(item: BreadcrumbsItem) {\n        this.searchService.removeBreadcrumbsItem(item);\n    }\n\n    get isEmpty() {\n        return this.items.length === 0;\n    }\n\n    get actions(): Action[] {\n        const actions: Action[] = [];\n        if (!this.isEmpty && this.allowDeletion) {\n            actions.push(this.clearAction);\n        }\n        return actions;\n    }\n\n    protected clear() {\n        for (const item of this.items) {\n            this.searchService.removeBreadcrumbsItem(item);\n        }\n    }\n}\n","<div class=\"my-search d-flex flex-row align-items-center flex-wrap\" [ngClass]=\"collapsed ? 'collapsed-view' : 'expanded-view'\">\n    <ng-container *ngFor=\"let item of items; index as i\">\n        <div *ngIf=\"!item.hidden\"\n            class=\"px-1 ml-1 mb-1 sq-metadata-item sq-metadata-color-{{fields[i]}}\"\n            [ngClass]=\"{'sq-metadata-border': useBadges}\">\n            <span\n                [innerHTML]=\"item.display | sqExpr:{withFields: displayFieldNames, asHTML: true}\"\n                title=\"{{fields[i]}}\">\n            </span>\n            <span\n                *ngIf=\"allowDeletion\"\n                class=\"far fa-times-circle pl-1\"\n                role=\"button\"\n                (click)=\"removeItem(item)\"\n                title=\"{{'msg#facet.mySearch.itemRemove' | sqMessage}}\">\n            </span>\n        </div>\n    </ng-container>\n</div>\n<div *ngIf=\"collapsible && !isEmpty\">\n    <hr>\n    <i class=\"fas fa-chevron-circle-{{collapsed ? 'down' : 'up'}}\" (click)=\"collapsed = !collapsed;\"></i>\n</div>\n","export default {\n    \"alerts\": {\n        \"alerts\": \"Alerts\",\n        \"createAlert\": \"Create Alert\",\n        \"manageAlerts\": \"Manage Alerts\",\n        \"alertAlreadyExists\": \"An alert with that name already exists. Would you like to replace it?\"\n    },\n\n    \"editAlert\": {\n        \"title\": \"Alert\",\n        \"name\": \"Name\",\n        \"frequency\": \"Frequency\",\n        \"days\": \"Days\",\n        \"monday\": \"Monday\",\n        \"tuesday\": \"Tuesday\",\n        \"wednesday\": \"Wednesday\",\n        \"thursday\": \"Thursday\",\n        \"friday\": \"Friday\",\n        \"saturday\": \"Saturday\",\n        \"sunday\": \"Sunday\",\n        \"times\": \"Times\",\n        \"active\": \"Active\",\n        \"updateQuery\": \"Update Query\",\n        \"runQuery\": \"Run Query\",\n        \"lossDataMessage\": \"Do you want to leave without saving your modifications?\"\n    },\n\n    \"manageAlerts\": {\n        \"title\": \"Manage Alerts\",\n        \"edit\": \"Edit\",\n        \"reorder\": \"Reorder\",\n        \"remove\": \"Remove\",\n        \"removeAll\": \"Remove all\"\n    },\n\n};\n","export default {\n    \"results\": {\n        \"viewTitle\": \"View: {text}\",\n        \"unselectableViewDisplay\": \"<Other>\",\n        \"resultsListView\": {\n            \"display\": \"List\",\n            \"selectDocument\": \"Select document\",\n            \"unselectDocument\": \"Unselect document\",\n            \"previewPopup\": \"Document Navigator\",\n            \"previewInCurrentPage\": \"Document Navigator (in current page)\",\n            \"previewInNewTab\": \"Document Navigator (in new tab)\",\n            \"showMetadata\": \"Details\",\n            \"showLabels\": \"Labels\"\n        },\n        \"resultsGridView\": {\n            \"display\": \"Grid\",\n            \"selectDocument\": \"Select document\",\n            \"unselectDocument\": \"Unselect document\",\n            \"selectDocuments\": \"Select documents\",\n            \"unselectDocuments\": \"Unselect documents\"\n        },\n        \"viewPageSize\": \"Number of results per page\",\n        \"viewUpdateApply\": \"Apply\",\n        \"warningNoViewForTab\": \"The '{tab}' tab has no associated result views.\",\n        \"warningCannotDisplayTabOnView\": \"The '{tab}' tab cannot be displayed using '{view}' view because it is not included in the view configuration.\",\n\n        \"resultsAllTab\": \"All\",\n        \"resultsTextTab\": \"Text\",\n        \"results_all_tab\": \"All\",\n        \"results_text_tab\": \"Text\",\n    }\n};\n","export default {\n    \"search\": {\n        \"emptySearchNotification\": \"Please enter some search terms to perform a search\",\n        \"alreadyFiltered\": \"Already selected\"\n    },\n\n    \"breadcrumbs\": {\n        \"emptySearch\": \"<empty search>\",\n        \"itemRemove\": \"Remove\"\n    },\n\n    \"didYouMean\": {\n        \"dymonlyBeforeCorrected\": \"Did you mean: \",\n        \"dymonlyAfterCorrected\": \"?\",\n        \"correctBeforeCorrected\": \"Showing results for: \",\n        \"correctBeforeOriginal\": \". Search instead for: \",\n        \"correctAfterOriginal\": \"\",\n        \"smartBeforeOriginal\": \"Showing results for: \",\n        \"smartBeforeCorrected\": \" and \",\n        \"smartAfterCorrected\": \"\"\n    },\n\n    \"pageSizeSelector\": {\n        \"pageSizeChoice\": \"{size, number} per page\",\n        \"defaultPageSize\": \"Default ({size, number})\",\n        \"defaultPageSizeChoice\": \"{size, number} per page (default)\"\n    },\n\n    \"pager\": {\n        \"pageNumberTitle\": \"Page {page, number}\",\n        \"firstPage\": \"First page\",\n        \"nextPage\": \"Next page\",\n        \"previousPage\": \"Previous page\",\n        \"lastPage\": \"Last page\"\n    },\n\n    \"sortSelector\": {\n        \"sortByTitle\": \"Sort by: {text}\",\n        \"sortOther\": \"<Other>\"\n    },\n\n    \"sort\": {\n        \"relevance\": \"Relevance\",\n        \"date\": \"Date\",\n        \"filename\": \"File name\",\n        \"title\": \"Title\"\n    },\n\n    \"queryIntent\": {\n        \"externalServiceTimeoutError\": \"This result page is incomplete due to an internal timeout. Please retry later.\"\n    }\n};\n","import { Component, Inject, OnDestroy, OnInit } from \"@angular/core\";\nimport { FormControl, FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { MODAL_MODEL, PromptOptions, ModalResult, ModalRef, ModalButton} from \"@sinequa/core/modal\";\nimport { Utils } from '@sinequa/core/base';\n\n@Component({\n    selector: \"sq-prompt\",\n    template: `\n        <form name=\"prompt\" novalidate [formGroup]=\"form\">\n            <sq-modal [title]=\"title\" [buttons]=\"buttons\">\n                <div class=\"form-group sq-form-group\">\n                    <label for=\"input\">{{model.message | sqMessage:model.messageParams}}</label>\n                    <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"input\" formControlName=\"input\" spellcheck=\"off\" sqAutofocus *ngIf=\"!model.rowCount\">\n                    <textarea [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"input\" formControlName=\"input\" spellcheck=\"on\" rows=\"{{model.rowCount}}\" sqAutofocus *ngIf=\"!!model.rowCount\">\n                    </textarea>\n                </div>\n            </sq-modal>\n        </form>\n    `\n})\nexport class BsPrompt implements OnInit, OnDestroy {\n    inputControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n    buttons: ModalButton[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: PromptOptions,\n        protected modalRef: ModalRef,\n        protected formBuilder: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.inputControl = new FormControl(this.model.output, this.model.validators || Validators.required);\n        this.form = this.formBuilder.group({\n            input: this.inputControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.model.output = this.inputControl.value;\n            });\n            \n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.form\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n\n    get title(): string {\n        return this.model.title ? this.model.title : \"msg#modal.prompt.title\";\n    }\n\n}\n","export * from \"./array-view\";\nexport * from \"./error\";\nexport * from \"./field-value\";\nexport * from \"./item-array-view\";\nexport * from \"./iterator-adaptor\";\nexport * from \"./json\";\nexport * from \"./keyboard\";\nexport * from \"./map-of\";\nexport * from \"./ref\";\nexport * from \"./pattern-matcher\";\nexport * from \"./utils\";\nexport * from \"./base.module\";\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {BsNotification} from \"./notification/notification\";\nimport {BsNotifications} from \"./notifications/notifications\";\nimport {BsNotificationsManager} from \"./notifications-manager/notifications-manager\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {BsActionModule} from \"@sinequa/components/action\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        BsActionModule,\n    ],\n    declarations: [\n        BsNotification, BsNotifications, BsNotificationsManager\n    ],\n    exports: [\n        BsNotifications, BsNotificationsManager\n    ]\n})\nexport class BsNotificationModule {\n}\n","import { Component, OnInit, ChangeDetectorRef, Input, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Action } from '@sinequa/components/action';\nimport { PrincipalWebService, UserSettingsWebService } from '@sinequa/core/web-services';\nimport { AuthenticationService, LoginService, UserOverride } from '@sinequa/core/login';\nimport { IntlService, Locale } from '@sinequa/core/intl';\nimport { Utils } from '@sinequa/core/base';\nimport { BsOverrideUser } from '@sinequa/components/modal';\nimport { ModalService, ModalResult, ConfirmType, ModalButton } from '@sinequa/core/modal';\nimport { AppService } from '@sinequa/core/app-utils';\nimport {NotificationsService, NotificationType} from '@sinequa/core/notification';\n\n@Component({\n  selector: 'sq-user-menu',\n  templateUrl: './user-menu.component.html'\n})\nexport class BsUserMenuComponent implements OnInit, OnDestroy {\n\n  @Input() icon: string = \"fas fa-user\";\n  @Input() autoAdjust: boolean = true;\n  @Input() autoAdjustBreakpoint: string = 'xl';\n  @Input() collapseBreakpoint: string = 'sm';\n  @Input() size: string;\n\n  menu: Action;\n\n  // User actions\n  loginAction: Action;\n  logoutAction: Action;\n  overrideAction: Action;\n  revertOverrideAction: Action;\n  adminAction: Action;\n  languageAction: Action;\n  resetUserSettings: Action;\n\n  constructor(\n    public principalService: PrincipalWebService,\n    public authenticationService: AuthenticationService,\n    public intlService: IntlService,\n    public loginService: LoginService,\n    public modalService: ModalService,\n    public appService: AppService,\n    public userSettingsService: UserSettingsWebService,\n    public notificationsService: NotificationsService,\n    public changeDetectorRef: ChangeDetectorRef) {\n\n\n    // Actions objects are initialized in the constructor\n\n    // User Menu\n\n    // Login\n    this.loginAction = new Action({\n      text: \"msg#userMenu.login\",\n      title: \"msg#userMenu.login\",\n      action: () => {\n        this.loginService.login();\n      }\n    });\n\n    // Logout\n    this.logoutAction = new Action({\n      text: \"msg#userMenu.logout\",\n      title: \"msg#userMenu.logout\",\n      action: () => {\n        this.loginService.logout();\n        this.changeDetectorRef.markForCheck();\n      }\n    });\n\n    // Override a user's identity\n    this.overrideAction = new Action({\n      text: \"msg#userMenu.overrideUser\",\n      title: \"msg#userMenu.overrideUser\",\n      action: () => {\n        let userOverride = this.authenticationService.userOverride ?\n          Utils.copy<UserOverride>(this.authenticationService.userOverride) : undefined;\n        if (!userOverride) {\n          userOverride = {\n            userName: \"\",\n            domain: \"\"\n          };\n        }\n        this.modalService.open(BsOverrideUser, {model: userOverride})\n          .then((result) => {\n            if (result === ModalResult.OK) {\n              this.loginService.overrideUser(userOverride);\n              this.changeDetectorRef.markForCheck();\n            }\n          });\n      }\n    });\n\n    // Cancel user override\n    this.revertOverrideAction = new Action({\n      text: \"msg#userMenu.revertUserOverride\",\n      title: \"msg#userMenu.revertUserOverride\",\n      action: () => {\n        this.loginService.overrideUser(undefined);\n        this.changeDetectorRef.markForCheck();\n      }\n    });\n\n    // Link to the admin\n    this.adminAction = new Action({\n      text: \"msg#userMenu.administration\",\n      title: \"msg#userMenu.administration\",\n      href: this.appService.adminUrl\n    });\n\n    // Language menu\n    this.languageAction = new Action({\n      text: \"msg#userMenu.language\",\n      title: \"msg#userMenu.language\",\n      children: this.intlService.locales.map(locale =>\n        new Action({\n          text: locale.display,   // \"French\"\n          title: locale.display,   // \"French\"\n          data: locale,   // French locale\n          selected: locale === this.intlService.currentLocale, // Whether French is the current locale\n          iconAfter: \"sq-image sq-flag-\" + locale.name,\n          action: (item: Action, $event: UIEvent) => {    // On click, switch to this language\n            this.intlService.use((item.data as Locale).name).subscribe(\n              (value) => this.languageAction.children!.forEach(a => a.update()));\n          },\n          updater: (action) => {  // Update the status of buttons\n            action.selected = action.data === this.intlService.currentLocale;\n          }\n        })\n      )\n    });\n\n    this.resetUserSettings = new Action({\n      text: \"msg#userMenu.resetUserSettings.menu\",\n      title: \"msg#userMenu.resetUserSettings.menu\",\n      action: () => {\n        this.modalService.confirm({\n          title: \"msg#userMenu.resetUserSettings.modalTitle\",\n          message: \"msg#userMenu.resetUserSettings.modalMessage\", \n          buttons: [\n            new ModalButton({result: ModalResult.OK, text: \"msg#userMenu.resetUserSettings.modalConfirmButton\"}),\n            new ModalButton({result: ModalResult.Cancel, primary: true})\n          ],\n          confirmType: ConfirmType.Warning\n        }).then(res => {\n          if(res === ModalResult.OK) {\n            this.userSettingsService.reset().subscribe({\n              next: () => this.notificationsService.notify(NotificationType.Success, \"msg#userMenu.resetUserSettings.successMessage\"),\n              error: () => this.notificationsService.notify(NotificationType.Error, \"msg#userMenu.resetUserSettings.errorMessage\")\n            });\n          }\n        });\n      }\n    });\n\n  }\n\n  ngOnInit() {\n    this.updateMenu();\n    this._loginSubscription = this.loginService.events.subscribe(event => {\n      if(event.type === \"session-changed\"){\n        this.updateMenu();\n      }\n    });\n    this._principalSubscription = this.principalService.events.subscribe(event => {\n      this.updateMenu();\n    });\n  }\n\n  private _loginSubscription: Subscription;\n  private _principalSubscription: Subscription;\n  ngOnDestroy(){\n    if(this._loginSubscription){\n      this._loginSubscription.unsubscribe();\n    }\n    if(this._principalSubscription){\n      this._principalSubscription.unsubscribe();\n    }\n  }\n\n  updateMenu() {\n    const userActions: Action[] = [];\n\n    if (!this.principalService.principal && !this.authenticationService.userOverrideActive) {\n      userActions.push(this.loginAction);\n    }\n    if (this.principalService.principal) {\n      userActions.push(this.logoutAction);\n    }\n    if (this.authenticationService.userOverrideActive) {\n      userActions.push(this.revertOverrideAction);\n    }\n    if (this.principalService.principal && this.principalService.principal.isAdministrator) {\n      userActions.push(this.overrideAction);\n    }\n    if (this.principalService.principal && (this.principalService.principal.isAdministrator || this.principalService.principal.isDelegatedAdmin)) {\n      userActions.push(this.adminAction);\n    }\n    if(this.loginService.complete) {\n      userActions.push(this.resetUserSettings);\n    }\n    userActions.push(new Action({separator: true}));\n    if (this.intlService.locales.length > 1) {\n      userActions.push(this.languageAction);\n    }\n\n    this.menu = new Action({\n        icon: this.icon,\n        text: this.loginService.complete && this.principalService.principal ? this.principalService.principal.name || \"msg#userMenu.user\" : \"msg#userMenu.user\",\n        children: userActions\n    });\n  }\n\n\n}\n","<li *ngIf=\"!!menu && !menu.hidden\" class=\"nav-item dropdown\" \n    [sq-action-item]=\"{item: menu, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n    [collapseBreakpoint]=\"collapseBreakpoint\"\n></li>","const LOAD_COMPONENT_MODULE_PROVIDERS = [];\n\nexport {LOAD_COMPONENT_MODULE_PROVIDERS};\n","export * from \"./public-api\";","export default {\n    network: {\n        settings: {\n            physics: \"Physics\",\n            springLength: \"Spring Length\",\n            springConstant: \"Spring Constant\",\n            damping: \"Damping\",\n            repulsion: \"Repulsion\",\n            gravity: \"Gravity\",\n            defaults: \"Defaults\"\n        },\n        actions: {\n            refresh: \"Refresh network\",\n            providers: \"Data sources\",\n            fetchMoreAll: \"Fetch more data for all aggregations\",\n            fetchMoreAllText: \"Fetch more data\",\n            fetchMoreAgg: \"Fetch more data for aggregation {agg}\",\n            expandNode: \"Expand node {label}\",\n            expandNodeWith: \"Expand node with {agg}\",\n            toggle: \"Toggle this provider on/off\",\n            active: \"Active\",\n            inactive: \"Deactivated\",\n            reset: \"Reset\",\n            resetTitle: \"Clear the data of this provider and start again\",\n            filterSearch: \"Filter search with {label}\",\n            filterSearch2: \"Filter search with {label1} and {label2}\",\n            enrichNode: \"Enrich node {label}\",\n            expandMeta: \"Expand metadata\",\n            collapseMeta: \"Collapse metadata\",\n        },\n        infocards: {\n            count: \"Count\",\n            aggregation: \"Aggregation\",\n            record: \"Record\",\n            expand: \"Expand\",\n            collapse: \"Collapse\",\n            close: \"Close\",\n            focus: \"Focus node\"\n        }\n    }\n};\n","export default {\n    \"notification\": {\n        \"title\": \"Benachrichtigungen\",\n        \"showNotifications\": \"Zeige Benachrichtigungen\",\n        \"hideNotifications\": \"Benachrichtigungen verstecken\",\n        \"clearNotifications\": \"Benachrichtigungen löschen\",\n    }\n};\n","import {Component, OnChanges, SimpleChanges, Input} from '@angular/core';\nimport {Results} from \"@sinequa/core/web-services\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {Action} from \"@sinequa/components/action\";\nimport {SearchService} from \"../../search.service\";\n//import {ResultsView} from '@sinequa/components/results-view';\n\n// TODO restore functionality of storing page size in user settings ?\n\n/**\n * Component for choosing the page size of the results view\n *\n */\n@Component({\n    selector: 'sq-page-size-selector',\n    templateUrl: './page-size-selector.html'\n})\nexport class BsPageSizeSelector implements OnChanges {\n    @Input() results: Results;\n    //@Input() resultsView: ResultsView;\n    @Input() showInRegularView: boolean = true;\n    @Input() showInCustomization: boolean;\n    @Input() pageSizes: number[];\n    @Input() rightAligned: boolean;\n\n    public pageSizingAction: Action;\n\n    private availableSizes: number[];\n    private currentPageSize: number;\n\n    constructor(\n        private appService: AppService,\n        private searchService: SearchService\n    ) { }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.refreshVisualisation();\n    }\n\n    /*\n    private get globalPageSize(): number {\n        const globalQueryParams = this.userSettingsService.getUserSettings().queryParams;\n        return globalQueryParams ? globalQueryParams.pageSize : undefined;\n    }\n    */\n\n    private get configPageSize(): number {\n        return this.appService.ccquery ? this.appService.ccquery.pageSize : 0;\n    }\n\n    private get defaultPageSize(): number {\n        //let res = this.globalPageSize;\n        //if (!res) {\n        let res = this.configPageSize;\n        if (!res) {\n            res = SearchService.DefaultPageSize;\n        }\n        //}\n\n        return res;\n    }\n\n    private buildPageSizingAction(): Action {\n        this.availableSizes = this.pageSizes ? this.pageSizes.slice(0) : [];\n        this.availableSizes.sort((a, b) => a - b);\n        const children: Action[] = [];\n\n        children.push(new Action({\n            text: 'msg#pageSizeSelector.defaultPageSize',\n            messageParams: { values: { size: this.defaultPageSize } },\n            data: undefined, // To make sure that setCurrentSize() always chooses the default choice text.\n            action: (item: Action, event: Event) => {\n                this.updatePageSize(item.data);\n            }\n        }));\n\n        for (const size of this.availableSizes) {\n            children.push(new Action({\n                text: size.toString(),\n                data: size,\n                action: (item: Action, event: Event) => {\n                    this.updatePageSize(item.data);\n                }\n            }));\n        }\n\n        return new Action({\n            icon: 'fas fa-arrows-alt-v',\n            text: 'msg#pageSizeSelector.pageSizeChoice',\n            children: children\n        });\n    }\n\n    private refreshVisualisation(): void {\n        this.pageSizingAction = this.buildPageSizingAction();\n        if (this.results) {\n            //const queryParams = this.userSettingsService.getViewQueryParams(this.resultsView.name);\n            //this.currentPageSize = queryParams.pageSize;\n            this.setCurrentSize(this.currentPageSize);\n        }\n    }\n\n    private setCurrentSize(size: number): void {\n        if (!size) {\n            this.pageSizingAction.text = 'msg#pageSizeSelector.defaultPageSizeChoice';\n            this.pageSizingAction.messageParams = { values: { size: this.defaultPageSize } };\n        }\n        else {\n            const selectedAction = this.pageSizingAction.children?.find(action => action.data === size);\n            this.pageSizingAction.text = 'msg#pageSizeSelector.pageSizeChoice';\n            this.pageSizingAction.messageParams = { values: { size: selectedAction?.data } };\n        }\n    }\n\n    private updatePageSize(size: number): void {\n        if (this.currentPageSize !== size) {\n            //this.userSettingsService.saveResultsViewPageSize(this.resultsView.name, size);\n            this.currentPageSize = size;\n\n            this.searchService.query.pageSize = size;\n            this.searchService.search();\n        }\n\n        this.setCurrentSize(size);\n    }\n}\n","<div class=\"btn-toolbar\" *ngIf=\"!!results\">\n    <div class=\"btn-group\"\n        [sq-action-buttons]=\"{\n            items: [pageSizingAction],\n            autoAdjust: true,\n            rightAligned: rightAligned\n        }\"></div>\n</div>\n","export * from \"./public-api\";","import {Component, Input, OnChanges, SimpleChanges, AfterViewInit, OnDestroy, ViewChild, ElementRef, EventEmitter} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AppService, FormatService, Expr, ExprOperator, ExprBuilder} from \"@sinequa/core/app-utils\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {CCColumn, Results, Aggregation} from \"@sinequa/core/web-services\";\nimport {Options, LabelType, ChangeContext} from \"ng5-slider\";\nimport moment from \"moment\";\nimport {FacetService} from \"../../facet.service\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {UIService} from \"@sinequa/components/utils\";\nimport {AbstractFacet} from \"../../abstract-facet\";\nimport {AdvancedService} from \"@sinequa/components/advanced\";\nimport { Action } from '@sinequa/components/action';\n\nexport enum RoundTarget {\n    number,\n    year,\n    month,\n    week, // ISO\n    day\n}\n\nexport enum RoundType {\n    up,\n    down,\n    nearest\n}\n\nexport interface StepDef {\n    step: string;\n    format: string;\n    minRange: string;\n    active: boolean;\n}\n\n@Component({\n    selector: \"sq-facet-range\",\n    templateUrl: \"./facet-range.html\"\n})\nexport class BsFacetRange extends AbstractFacet implements OnChanges, AfterViewInit, OnDestroy {\n    @Input() name: string; // If ommited, the aggregation name is used\n    @Input() results: Results;\n    @Input() aggregation: string;\n    @Input() min : string;\n    @Input() max : string;\n    @Input() stepDefs: StepDef[];\n    @ViewChild(\"slider\", {static: false}) slider: ElementRef;\n\n    // Aggregation from the Results object\n    data: Aggregation | undefined;\n\n    options: Options;\n    value: number;\n    highValue: number;\n    startValue: number;\n    startHighValue: number;\n    sliderActive: boolean;\n    rangeActive: boolean;\n    rangeSelected: boolean;\n    manualRefresh = new EventEmitter<void>();\n    initDone: boolean;\n    protected column: CCColumn | undefined;\n    protected roundTarget: RoundTarget;\n    protected roundMultiple: number;\n    protected localeChange: Subscription;\n    protected format: string;\n\n    clearFiltersAction: Action;\n    applyFiltersAction: Action;\n    constructor(\n        private facetService: FacetService,\n        protected appService: AppService,\n        protected searchService: SearchService,\n        protected formatService: FormatService,\n        protected intlService: IntlService,\n        protected uiService: UIService,\n        protected advancedService: AdvancedService,\n        protected exprBuilder: ExprBuilder) {\n\n        super();\n\n        this.clearFiltersAction = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.range.clear\",\n            action: () => this.clearRange()\n        });\n\n        this.applyFiltersAction = new Action({\n            icon: \"fas fa-filter\",\n            title: \"msg#facet.range.apply\",\n            action: () => this.applyRange()\n        });\n    }\n\n    protected translate = (value: number, label: LabelType): string => {\n        const value1 = this.roundNearest(value); // to accommodate fractional steps generated for years/months\n\n        if (this.format) {\n            if (this.column && AppService.isDate(this.column)) {\n                const date = new Date(value1);\n                const m = moment(date);\n                return this.intlService.formatMessage(this.format, {date: date, time: Utils.getTime(date), weekDay: m.weekday(), week: m.week(), weekYear: m.weekYear()});\n            }\n            else {\n                return this.intlService.formatMessage(this.format, {value: value1});\n            }\n        }\n        return this.formatService.formatFieldValue(this.column && AppService.isDate(this.column) ? new Date(value1) : value1, this.column);\n    }\n\n    protected roundAdjustment(value: number, multiple: number, roundType: RoundType): number {\n        switch (roundType) {\n            case RoundType.up:\n                return multiple - value % multiple;\n            default:\n            case RoundType.down:\n                return -(value % multiple);\n            case RoundType.nearest: {\n                const adjustUp = multiple - value % multiple;\n                const adjustDown = -(value % multiple);\n                return Math.abs(adjustUp) <= Math.abs(adjustDown) ? adjustUp : adjustDown;\n            }\n        }\n    }\n\n    protected _roundNumberUp(value: number, step: number): number {\n        return (value >= 0 ? Math.ceil(value / step) : Math.floor(value / step)) * step;\n    }\n\n    protected _roundNumberDown(value: number, step: number): number {\n        return (value >= 0 ? Math.floor(value / step) : Math.ceil(value / step)) * step;\n    }\n\n    protected _roundNumber(value: number, step: number, roundType: RoundType): number {\n        switch (roundType) {\n            case RoundType.up:\n                return this._roundNumberUp(value, step);\n            default:\n            case RoundType.down:\n                return this._roundNumberDown(value, step);\n            case RoundType.nearest: {\n                const up = this._roundNumberUp(value, step);\n                const down = this._roundNumberDown(value, step);\n                return Math.abs(up - value) <= Math.abs(down - value) ? up : down;\n            }\n        }\n    }\n\n    protected _getNearestDate(date: Date, upper: Date, lower: Date): Date {\n        return Math.abs(upper.getTime() - date.getTime()) <= Math.abs(lower.getTime() - date.getTime()) ? upper : lower;\n    }\n\n    protected _getNearestTargetDate(date: Date, target: RoundTarget): Date {\n        switch (target) {\n            case RoundTarget.year: {\n                return this._getNearestDate(date, new Date(date.getFullYear() + 1, 0), new Date(date.getFullYear(), 0));\n            }\n            case RoundTarget.month: {\n                return this._getNearestDate(date, new Date(date.getFullYear(), date.getMonth() + 1), new Date(date.getFullYear(), date.getMonth()));\n            }\n            default:\n            case RoundTarget.week:\n            case RoundTarget.day: {\n                return this._getNearestDate(date, new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1), new Date(date.getFullYear(), date.getMonth(), date.getDate()));\n            }\n        }\n    }\n\n    protected _round(value: number, step: number, target: RoundTarget, multiple: number,  roundType = RoundType.down): number {\n        if (this.column && AppService.isDate(this.column)) {\n            let date = new Date(value);\n            if (roundType === RoundType.nearest) {\n                // round to the nearest target year, month or day to adjust for the linear step size and leap years\n                date = this._getNearestTargetDate(date, target);\n            }\n            switch (target) {\n                case RoundTarget.year: {\n                    const year = date.getFullYear();\n                    if (year % multiple !== 0 || date.getMonth() !== 0 || date.getDate() !== 1 ||\n                        date.getHours() !== 0 || date.getMinutes() !== 0 || date.getSeconds() !== 0 || date.getMilliseconds() !== 0) {\n                        date = new Date(year + this.roundAdjustment(year, multiple, roundType), 0);\n                    }\n                    break;\n                }\n                case RoundTarget.month: {\n                    const month = date.getMonth();\n                    if (month % multiple !== 0 || date.getDate() !== 1 ||\n                        date.getHours() !== 0 || date.getMinutes() !== 0 || date.getSeconds() !== 0 || date.getMilliseconds() !== 0) {\n                        date = new Date(date.getFullYear(), month + this.roundAdjustment(month, multiple, roundType));\n                    }\n                    break;\n                }\n                case RoundTarget.week: {\n                    const day = date.getDay();\n                    // First, round to Monday\n                    if (day !== 1/*Monday*/ ||\n                        date.getHours() !== 0 || date.getMinutes() !== 0 || date.getSeconds() !== 0 || date.getMilliseconds() !== 0) {\n                        let adjust: number;\n                        const up = 7 - (day - 1);\n                        const down = -(day - 1);\n                        switch (roundType) {\n                            case RoundType.up:\n                                adjust = up;\n                                break;\n                            default:\n                            case RoundType.down:\n                                adjust = down;\n                                break;\n                            case RoundType.nearest:\n                                adjust = Math.abs(up) >= Math.abs(down) ? up : down;\n                                break;\n                        }\n                        date = new Date(date.getFullYear(), date.getMonth(), date.getDate() + adjust);\n                    }\n                    // Then, round to week number\n                    const m = moment(date);\n                    const week = m.week();\n                    if (week % multiple !== 0) {\n                        date = new Date(date.getFullYear(), date.getMonth(), date.getDate() + (this.roundAdjustment(week, multiple, roundType) * 7));\n                    }\n                    break;\n                }\n                case RoundTarget.day: {\n                    const _date = date.getDate();\n                    if (date.getHours() !== 0 || date.getMinutes() !== 0 || date.getSeconds() !== 0 || date.getMilliseconds() !== 0) {\n                        date = new Date(date.getFullYear(), date.getMonth(), _date + this.roundAdjustment(_date, multiple, roundType));\n                    }\n                    break;\n                }\n            }\n            return date.getTime();\n        }\n        else {\n            return this._roundNumber(value, step, roundType);\n        }\n    }\n\n    protected round(value: number, roundType = RoundType.down): number {\n        return this._round(value, this.options.step || 1, this.roundTarget, this.roundMultiple, roundType);\n    }\n\n    protected roundDown(value: number): number {\n        return this.round(value, RoundType.down);\n    }\n\n    protected roundUp(value: number): number {\n        return this.round(value, RoundType.up);\n    }\n\n    protected roundNearest(value: number): number {\n        return this.round(value, RoundType.nearest);\n    }\n\n    //TODO - remove fix engine hack\n    private fixDate(dateStr: string): string {\n        if (dateStr) {\n            const secondsSep = dateStr.lastIndexOf(\":\");\n            if (secondsSep > 0) {\n                let seconds = Utils.toInt(dateStr.substr(secondsSep + 1));\n                if (seconds < 0) {\n                    seconds = 0;\n                }\n                else if (seconds > 59) {\n                    seconds = 59;\n                }\n                dateStr = dateStr.substr(0, secondsSep + 1) + seconds;\n            }\n        }\n        return dateStr;\n    }\n\n    protected initMinMax() {\n        let min = 0;\n        let max = 0;\n        if (!Utils.isEmpty(this.min) && (!Utils.isEmpty(this.max))) {\n            min = this.parseValue(!!new Date(this.min).getDate()? new Date(this.min) : this.min);\n            max = this.parseValue(!!new Date(this.max).getDate()? new Date(this.max) : this.max);\n        }\n        else {\n            if (this.data?.items) {\n                const item = this.data.items[0];\n                if (item && item.operatorResults) {\n                    if (this.column && AppService.isDate(this.column)) {\n                        //TODO - remove fix engine hack\n                        if (Utils.isString(item.operatorResults.min)) {\n                            const date = Utils.fromSysDateStr(this.fixDate(item.operatorResults.min));\n                            if (Utils.isDate(date)) {\n                                item.operatorResults.min = date;\n                            }\n                        }\n                        if (Utils.isString(item.operatorResults.max)) {\n                            const date = Utils.fromSysDateStr(this.fixDate(item.operatorResults.max));\n                            if (Utils.isDate(date)) {\n                                item.operatorResults.max = date;\n                            }\n                        }\n                        min = Utils.isDate(item.operatorResults.min) ? item.operatorResults.min.getTime() : 0;\n                        max = Utils.isDate(item.operatorResults.max) ? item.operatorResults.max.getTime() : 0;\n                    }\n                    else {\n                        min = Utils.isNumber(item.operatorResults.min) ? item.operatorResults.min : 0;\n                        max = Utils.isNumber(item.operatorResults.max) ? item.operatorResults.max : 0;\n                    }\n                }\n            }\n        }\n        this.options.floor = min;\n        this.options.ceil = max;\n    }\n\n    protected parseValue(value: string | Date): number {\n        if (Utils.isDate(value)) {\n            return value.getTime();\n        }\n        if (!Utils.isString(value)) {\n            return 0;\n        }\n        let _value: number | undefined;\n        if (this.column && this.column.parser) {\n            const str = this.formatService.parseValue(value, this.column.parser);\n            _value = Utils.toNumber(str);\n        }\n        if (Utils.isUndefined(_value)) {\n            _value = this.column && AppService.isDate(this.column) ?\n                Utils.toDuration(value) :\n                Utils.toSize(value);\n        }\n        return _value;\n    }\n\n    protected initStep() {\n        // Select the first step definition where the range >= stepDef.minRange\n        let format: string | undefined;\n        let step: number | undefined;\n        if (this.stepDefs) {\n            for (const stepDef of this.stepDefs) {\n                if (stepDef.step) {\n                    const thisStep = this.parseValue(stepDef.step);\n                    if (thisStep && stepDef.active) {\n                        if (!stepDef.minRange) {\n                            step = thisStep;\n                            format = stepDef.format;\n                            break;\n                        }\n                        else {\n                            // Round min/max for thisStep\n                            const {roundTarget, roundMultiple} = this.getRoundTarget(thisStep);\n                            const min = this._round(this.options.floor || 0, thisStep, roundTarget, roundMultiple, RoundType.down);\n                            const max = this._round(this.options.ceil || 0, thisStep, roundTarget, roundMultiple, RoundType.up);\n                            const range = max - min;\n                            const minRange = this.parseValue(stepDef.minRange);\n                            if (range >= minRange) {\n                                step = thisStep;\n                                format = stepDef.format;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (!step) {\n            // Default step, default formatting\n            step = this.column && AppService.isDate(this.column) ? Utils.oneDay : 1;\n        }\n        // Adjust step for year/month rounding (we assume daylight savings will balance out over the year)\n        const {roundTarget, roundMultiple} = this.getRoundTarget(step);\n        switch (roundTarget) {\n            case RoundTarget.year:\n                step = roundMultiple * 365.25 * Utils.oneDay;\n                break;\n            case RoundTarget.month:\n                step = roundMultiple * 365.25 * Utils.oneDay / 12;\n                break;\n        }\n        this.roundTarget = roundTarget;\n        this.roundMultiple = roundMultiple;\n        // Set default format based on roundTarget\n        if (!format) {\n            switch (this.roundTarget) {\n                case RoundTarget.year:\n                    format = \"msg#facet.range.year\";\n                    break;\n                case RoundTarget.month:\n                    format = \"msg#facet.range.monthYear\";\n                    break;\n                case RoundTarget.week:\n                    format = \"msg#facet.range.weekYear\";\n                    break;\n                default:\n                    format = \"\";\n                    break;\n            }\n        }\n        this.options.step = step;\n        this.format = format;\n    }\n\n    protected getRoundTarget(step: number): { roundTarget: RoundTarget, roundMultiple: number } {\n        const ret = {\n            roundTarget: RoundTarget.number,\n            roundMultiple: 1\n        };\n        if (this.column && AppService.isDate(this.column)) {\n            if (step % (365 * Utils.oneDay) === 0) {\n                ret.roundTarget = RoundTarget.year;\n                ret.roundMultiple = step / (365 * Utils.oneDay);\n            }\n            else if (step % (30 * Utils.oneDay) === 0) {\n                ret.roundTarget = RoundTarget.month;\n                ret.roundMultiple = step / (30 * Utils.oneDay);\n            }\n            else if (step % (7 * Utils.oneDay) === 0) {\n                ret.roundTarget = RoundTarget.week;\n                ret.roundMultiple = step / (7 * Utils.oneDay);\n            }\n            else if (step % Utils.oneDay === 0) {\n                ret.roundTarget = RoundTarget.day;\n                ret.roundMultiple = step / Utils.oneDay;\n            }\n        }\n        return ret;\n    }\n\n    protected init() {\n        this.options = {\n            draggableRange: true,\n            enforceStep: false,\n            translate: this.translate\n        };\n        this.initMinMax();\n        this.initStep();\n        let ceil = this.options.ceil || 0;\n        let floor = this.options.floor || 0;\n        this.sliderActive = ceil > floor;\n        if (ceil > floor) {\n            floor = this.options.floor = this.roundDown(floor);\n            ceil = this.options.ceil = this.roundUp(ceil);\n        }\n        const [from, to] = this.getRange();\n        this.rangeActive = !Utils.isUndefined(from) || !Utils.isUndefined(to);\n        this.rangeSelected = false;\n        this.value = this.startValue = Math.max(from || floor, floor);\n        this.highValue = this.startHighValue = Math.min(to || ceil, ceil);\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.initDone) {\n            this.initDone = true;\n            this.localeChange = Utils.subscribe(this.intlService.events,\n                (value) => {\n                    this.manualRefresh.emit();\n                });\n        }\n        if (!!changes[\"results\"]) {\n            this.data = this.facetService.getAggregation(this.aggregation, this.results);\n            this.column = this.data && this.appService.getColumn(this.data.column);\n            this.init();\n        }\n    }\n\n    protected onResize = () => {\n        this.manualRefresh.emit();\n    }\n\n    ngAfterViewInit() {\n        this.uiService.addElementResizeListener(this.slider.nativeElement, this.onResize);\n    }\n\n    ngOnDestroy() {\n        if(this.localeChange) {\n            this.localeChange.unsubscribe();\n        }\n        if(this.uiService && this.slider) {\n            this.uiService.removeElementResizeListener(this.slider.nativeElement, this.onResize);\n        }\n    }\n\n    onUserChangeEnd(changeContext: ChangeContext) {\n        this.rangeSelected = this.value !== this.startValue || this.highValue !== this.startHighValue;\n    }\n\n    getRange(): number[] | undefined[] {\n        if (this.column) {\n            let expr: Expr | string;\n            let value;\n            const expression = this.searchService.query?.findSelect(this.column.name)?.expression;\n            if (expression) {\n                expr = this.appService.parseExpr(expression);\n                if (expr instanceof Expr) {\n                    if (expr.values && expr.values.length > 1) {\n                        value = expr.values;\n                    } else {\n                        value = expr.value;\n                    }\n                    if (!Utils.isArray(value)) {\n                        if (expr.operator === ExprOperator.gte) {\n                            value = [value, undefined];\n                        } else if (expr.operator === ExprOperator.lte) {\n                            value = [undefined, value];\n                        }\n                    }\n                    value =  value.map(\n                        (val) => val ? this.advancedService.castAdvancedValue(val, this.column) : val\n                    );\n                    if (AppService.isDate(this.column)) {\n                        value =  value.map(\n                            (val) => val ? new Date(val).getTime() : val\n                        );\n                    }\n                    return value;\n                }\n            }\n        }\n        return [undefined, undefined]\n    }\n\n    setRange(from: number | undefined, to: number | undefined) {\n        let valFrom;\n        let valTo;\n        let expression: string | undefined;\n        if (this.column) {\n            valFrom = AppService.isDate(this.column) && Utils.isNumber(from) ? new Date(from) : from;\n            valTo = AppService.isDate(this.column) && Utils.isNumber(to) ? new Date(to) : to;\n            if (!!valFrom && !!valTo) {\n                expression = this.exprBuilder.makeRangeExpr(this.column.name, valFrom, valTo);\n            } else if (!!valFrom) {\n                expression = this.exprBuilder.makeNumericalExpr(this.column.name, '>=', valFrom);\n            } else if (!!valTo) {\n                expression = this.exprBuilder.makeNumericalExpr(this.column.name, '<=', valTo);\n            }\n            this.searchService.query?.removeSelect(this.column.name);\n            if (expression) {\n                this.searchService.query?.addSelect(\n                    expression,\n                    this.column.name\n                );\n            }\n        }\n    }\n\n    applyRange() {\n        this.setRange(this.roundNearest(this.value), this.roundNearest(this.highValue));\n        this.searchService.search();\n    }\n\n    clearRange() {\n        this.setRange(undefined, undefined);\n        this.searchService.search();\n    }\n\n    get actions(): Action[] {\n        const actions: Action[] = [];\n        if(this.rangeSelected){\n            actions.push(this.applyFiltersAction);\n        }\n        if(this.rangeActive){\n          actions.push(this.clearFiltersAction);\n        }\n        return actions;\n    }\n}\n","<ng-container *ngIf=\"data\">\n    <div #slider class=\"card-body\">\n        <ng5-slider\n            *ngIf=\"sliderActive\"\n            [(value)]=\"value\"\n            [(highValue)]=\"highValue\"\n            [options]=\"options\"\n            [manualRefresh]=\"manualRefresh\"\n            (userChangeEnd)=\"onUserChangeEnd($event)\">\n        </ng5-slider>\n        <span *ngIf=\"!sliderActive\">{{'msg#facet.range.unavailable' | sqMessage}}</span>\n    </div>\n</ng-container>\n","export * from \"./facet-preview/facet-preview\";\nexport * from \"./facet-preview-2/facet-preview.component\";\nexport * from \"./preview-highlights/preview-highlights\";\nexport * from \"./preview-links/preview-links\";\nexport * from \"./preview.module\";\nexport * from \"./preview-panel/preview-panel\";\nexport * from \"./preview-popup/preview-popup\";\nexport * from \"./result-link-preview/result-link-preview\";\nexport * from \"./similar-documents/similar-documents\";\nexport * from './preview-entity-facet/preview-entity-facet.component';\nexport * from './preview-entity-panel/preview-entity-panel.component';\nexport * from './preview-extracts-panel/preview-extracts-panel.component';\nexport * from './preview-search-form/preview-search-form.component';\nexport * from './preview-page-form/preview-page-form.component';\nexport * from './preview-pages-panel/preview-pages-panel.component';\n","import {NgModule} from \"@angular/core\";\n\nimport {NOTIFICATION_MODULE_PROVIDERS} from \"./module.providers\";\n\n/**\n * This module provides a service for managing notifications. It is used by the\n * Sinequa runtime and can also be used for application-specific purposes.\n *\n * The {@link NotificationsInterceptor} in this module should be registered using `HTTP_INTERCEPTORS` in your app module.\n */\n@NgModule({\n    imports: [\n    ],\n    declarations: [\n    ],\n    exports: [\n    ],\n    providers: [\n        ...NOTIFICATION_MODULE_PROVIDERS\n    ]\n})\nexport class NotificationModule {\n}\n","import { Component, EventEmitter, Input, Output, OnChanges } from '@angular/core';\nimport { FormBuilder, FormGroup, FormControl } from '@angular/forms';\nimport { Query } from '@sinequa/core/app-utils';\n\n@Component({\n  selector: 'sq-preview-search-form',\n  templateUrl: './preview-search-form.component.html',\n  styleUrls: ['./preview-search-form.component.scss']\n})\nexport class BsPreviewSearchFormComponent implements OnChanges {\n  @Input() query: Query;\n  @Output() searchText = new EventEmitter<string>();\n\n  // Search form\n  readonly form: FormGroup;\n  readonly searchControl: FormControl;\n\n  constructor(\n    private formBuilder: FormBuilder) {\n\n    this.searchControl = new FormControl('');\n    this.form = this.formBuilder.group({\n      search: this.searchControl\n    });\n  }\n\n  /**\n   * Updates the text of the search form when the query changes\n   */\n  ngOnChanges() {\n    this.searchControl.setValue((!this.query || !this.query.text) ? \"\" : this.query.text);\n  }\n\n  /**\n   * Emits an event for the parent component to search this next text\n   */\n  search() {\n    this.searchText.next(this.searchControl.value || \"\");\n  }\n}\n","<form novalidate [formGroup]=\"form\">\n    <div class=\"input-group mb-3\">\n        <div class=\"input-group-prepend\">\n            <label for=\"search-input\" class=\"input-group-text\">{{ 'msg#preview.search' | sqMessage }}</label>\n        </div>\n\n        <input id=\"search-input\" type=\"text\" placeholder=\"{{ 'msg#searchForm.searchFor' | sqMessage }}\" formControlName=\"search\" class=\"form-control\" sqAutofocus>\n\n        <div class=\"input-group-append\">\n            <button class=\"btn btn-primary\" type=\"submit\" (click)=\"search()\" \n                title=\"{{ 'msg#searchForm.search' | sqMessage }}\">\n                <i class=\"fas fa-fw fa-search\"></i>\n            </button>\n        </div>\n    </div>\n</form>","import {NgModule, ModuleWithProviders, Type} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {A11yModule} from \"@angular/cdk/a11y\";\nimport {OverlayModule} from \"@angular/cdk/overlay\";\n\n// Sinequa modules\nimport {BaseModule} from \"@sinequa/core/base\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {MODAL_CONFIRM} from \"./modal.service\";\nimport {MODAL_PROMPT} from \"./modal.service\";\n\nimport {MODAL_MODULE_PROVIDERS} from \"./module.providers\";\n\nimport {Confirm} from \"./confirm.component\";\nimport {Prompt} from './prompt.component';\n\n/**\n * This module contains an implementation of a [modal dialog service]{@link ModalService} which can be extended\n * to support UI frameworks such as Bootstrap and Material Design. It uses the `Overlay` and `Portal` funcionality\n * provided by the [Angular CDK]{@link https://material.angular.io/cdk/categories} library.\n */\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n\n        // CDK\n        OverlayModule, // Needed for the modal service\n        A11yModule,\n\n        // Sinequa modules\n        BaseModule,\n        IntlModule,\n        ValidationModule,\n    ],\n    declarations: [\n        Confirm,    // Default confirm\n        Prompt\n    ],\n    exports: [\n    ],\n    providers: [\n        ...MODAL_MODULE_PROVIDERS\n    ]\n})\nexport class ModalModule {\n    static forRoot(confirmModal: Type<any> = Confirm, promptModal: Type<any> = Prompt): ModuleWithProviders<ModalModule> {\n        return {\n            ngModule: ModalModule,\n            providers: [\n                {provide: MODAL_CONFIRM, useValue: confirmModal},\n                {provide: MODAL_PROMPT, useValue: promptModal},\n            ]\n        };\n    }\n}\n","import { Directive, Input, ElementRef, HostListener, Output, EventEmitter, OnInit } from \"@angular/core\";\nimport { Autocomplete, SuggestService, AutocompleteItem, AutocompleteState } from \"@sinequa/components/autocomplete\";\nimport { UIService } from \"@sinequa/components/utils\";\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { Observable } from 'rxjs';\n\n@Directive({\n    selector: \"[sqAdvancedFormAutocomplete]\",\n})\nexport class BsAdvancedFormAutocomplete extends Autocomplete implements OnInit {\n    @Output() UpdateItem = new EventEmitter<AutocompleteItem | undefined>();\n    @Input() field : string;\n\n    constructor(\n        elementRef: ElementRef,\n        suggestService: SuggestService,\n        appService: AppService,\n        uiService: UIService\n    ) {\n        super(elementRef, suggestService, appService, uiService);\n    }\n\n    /**\n     * The ngOnInit() method from the original directive is overriden\n     * On initialization, we listen to the autocomplete component for\n     * selection events\n     */\n    ngOnInit() {\n        this._dropdownSubscription = this.dropdown.clicked.subscribe((item) => {\n            this.select(item, false); // An item was selected from the autocomplete => take the value\n        });\n        this.start();\n    }\n\n    protected getSuggests() {\n        const value = this.getInputValue();\n        if (value) {\n            // If there is text, make a call to the suggest API\n            this.processSuggests(\n                this.getSuggestsObs(value, [this.field])\n            );\n        } else {\n            // If empty input, restart autocomplete\n            this.start();\n        }\n    }\n\n    protected processSuggests(obs: Observable<AutocompleteItem[]>){\n        obs.subscribe(\n            suggests => {\n                if(this.getState() === AutocompleteState.ACTIVE || this.getState() === AutocompleteState.OPENED){\n                    this.dropdown.update(true, suggests\n                        .filter(item => item.category !== \"$field$\")  // Filter out fields\n                        .map(item => {\n                            if(!item.label){\n                                item.label = this.appService.getLabel(item.category);\n                            }\n                            if (!item.normalized) {\n                                item.normalized = item.display;\n                            }\n                            return item;\n                        }));\n                }\n            },\n            err => {\n                this.dropdown.update(false);\n            },\n            () => {\n                if(this.dropdown.hasItems && this.getState() === AutocompleteState.ACTIVE){\n                    this.open();    // Switch from ACTIVE to OPENED (if not already)\n                }\n                else if(!this.dropdown.hasItems && this.getState() === AutocompleteState.OPENED){   // No data\n                    this.active();  // Switch from OPENED to ACTIVE (if not already)\n                }\n            });\n    }\n\n    protected setAutocompleteItem(item: AutocompleteItem): boolean {\n        if(item) {\n            this.setInputValue(item.display);\n            this.UpdateItem.next({\n                ...item,\n                normalized: item.normalized ? item.normalized : item.display\n            });\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Listen to blur events on the <input> host and overrides the autocomplete blur events\n     */\n    @HostListener(\"blur\", [\"$event\"]) blur(event: FocusEvent) {\n        /** If there is text in the <input/> and not selected from the dropdown ==> set the item manually */\n        if (this.getState() !== AutocompleteState.SELECTED) {\n            if (!!this.getInputValue() && this.getInputValue() !== \"\") {\n                const item = {\n                    display: this.getInputValue(),\n                    normalized: this.getInputValue(),\n                    category: \"\",\n                }\n                this.setAutocompleteItem(item);\n            } else {\n                this.UpdateItem.next(undefined);\n            }\n        }\n        this.init();\n    }\n\n    /**\n     * Overrides the parent inputChanged method, so that it is possible to reinitialize the autocomplete\n     * @param event\n     */\n    @HostListener(\"input\", [\"$event\"]) inputChanged(event: Event) {\n        switch (this.getState()) {\n            case AutocompleteState.OPENED:\n                this.suggest(); // Just request more data, but no state change\n                break;\n            case AutocompleteState.START:\n            case AutocompleteState.ACTIVE:\n                this.active(); // get more data, and change state if not already ACTIVE\n                break;\n            case AutocompleteState.SELECTED:\n                this.start(); // The model changed because we selected a value ==> we restart in case the user keeps typing\n                this.active();\n                break;\n            case AutocompleteState.INIT:\n                break;\n        }\n    }\n}\n","export * from \"./result-selector/result-selector\";\nexport * from \"./results-selector/results-selector\";\nexport * from \"./selection.module\";\nexport * from \"./selection-arranger/selection-arranger.component\";","export * from \"./aggregation-provider\";\nexport * from \"./async-records-provider\";\nexport * from \"./base-provider\";\nexport * from \"./dynamic-edge-provider\";\nexport * from \"./dynamic-node-provider\";\nexport * from \"./provider-factory\";\nexport * from \"./records-provider\";\nexport * from \"./selected-records-provider\";\n","export * from \"./public-api\";\n","export * from \"./public-api\";","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\nimport {BsActionModule} from \"@sinequa/components/action\";\n\nimport {BsTooltipComponent} from \"./tooltip.component\";\nimport {BsHeatmapComponent} from \"./heatmap.component\";\nimport {BsFacetHeatmapComponent} from \"./facet-heatmap.component\";\nimport {BsResultsHeatmapView} from \"./results-heatmap-view\";\n\n@NgModule({\n    imports: [\n        FormsModule, ReactiveFormsModule,\n        CommonModule,\n        IntlModule,\n\n        BsSelectionModule,\n        BsActionModule\n    ],\n    declarations: [\n        BsResultsHeatmapView,\n        BsTooltipComponent,\n        BsHeatmapComponent,\n        BsFacetHeatmapComponent\n    ],\n    exports: [\n        BsResultsHeatmapView,\n        BsTooltipComponent,\n        BsHeatmapComponent,\n        BsFacetHeatmapComponent\n    ]\n})\nexport class BsHeatmapModule {\n}","export * from \"./authentication.service\";\nexport * from \"./token.service\";\nexport * from \"./component-with-login.component\";\nexport * from \"./jwt.service\";\nexport * from \"./login.module\";\nexport * from \"./login.service\";\nexport * from \"./login.component\";\nexport * from \"./login.interceptor\";\nexport * from \"./authentication-oauth.service\";\nexport * from \"./authentication-popup.service\";\nexport * from \"./messages/index\";\n","import {NgModule} from \"@angular/core\";\nimport {BaseModule} from \"@sinequa/core/base\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {WebServicesModule} from \"@sinequa/core/web-services\";\n\nimport {APP_UTILS_MODULE_PROVIDERS} from \"./module.providers\";\n\n/**\n * This module contains a utility {@link AppService} for managing the configuration of a Sinequa SBA and a {@link FormatService}\n * for handling the formatting and parsing of Sinequa field values. It also contains an implementation of a {@link Query} class\n * as well as classes for manipulating Sinequa fielded search expressions.\n *\n * The {@link AuditInterceptor} in this module should be registered using `HTTP_INTERCEPTORS` in your app module.\n */\n@NgModule({\n    imports: [\n        BaseModule,\n        IntlModule,\n        WebServicesModule\n    ],\n    declarations: [\n    ],\n    exports: [\n    ],\n    providers: [\n        ...APP_UTILS_MODULE_PROVIDERS\n    ]\n})\nexport class AppUtilsModule {\n}\n","import {Utils} from \"@sinequa/core/base\";\r\nimport _enUtils from \"./en\";\r\nimport _frUtils from \"./fr\";\r\nimport _deUtils from \"./de\";\r\n\r\nconst enUtils = Utils.merge({}, _enUtils);\r\nconst frUtils = Utils.merge({}, _frUtils);\r\nconst deUtils = Utils.merge({}, _deUtils);\r\n\r\nexport { enUtils, frUtils, deUtils };\r\n","import {Directive, Input, OnInit, DoCheck, InjectionToken, Type, Inject, ViewContainerRef} from \"@angular/core\";\nimport {FormGroup, AbstractControl} from \"@angular/forms\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\nimport {LoadComponentService, LoadedComponent} from \"@sinequa/core/load-component\";\nimport {ValidationService} from \"./validation.service\";\n\n/**\n * Describes the options that can be passed to {@link ValidationDirective}.\n */\nexport interface ValidationOptions {\n    /**\n     * The `FormGroup` container.\n     */\n    form: FormGroup;\n    /**\n     * Identifies the control to validate. Defaults to the value of the `formControlName`\n     * attribute on the element to which the `ValidationDirective` is attached.\n     */\n    controlName?: string;\n    /**\n     * The class name to set on the element if validation passes. Defaults to `is-valid`.\n     */\n    validClass?: string;\n    /**\n     * The class name to set on the element if validation fails. Defaults to `is-invalid`.\n     */\n    invalidClass?: string;\n    /**\n     * The selector to identify children of the element to which to also apply the validity\n     * classes. Defaults to `.form-control`. Set to `null` to not select any children.\n     */\n    childSelector?: string;\n    /**\n     * Custom error messages to use for the validators. By default the messages defined in\n     * {@link ValidationService} are used.\n     */\n    errorMessages?: MapOf<string>;\n}\n\n/**\n * An injection token that can be provided to override the component loaded by {@link ValidationDirective}\n * to display validation error messages. The default component is {@link ValidationMessageComponent}.\n */\nexport const VALIDATION_MESSAGE_COMPONENT = new InjectionToken<Type<any>>(\"VALIDATION_MESSAGE_COMPONENT\");\n\n/**\n * A directive to automatically add validity classes to the element to which it is attached. In addition,\n * when the associated `FormControl` is invalid a component is dynamically loaded after the element to display\n * the validation message.\n * The component to load can be specified by providing the {@link VALIDATION_MESSAGE_COMPONENT} injection token.\n * By default, the {@link ValidationMessageComponent} component is used.\n */\n@Directive({\n    selector: \"[sqValidation]\"\n})\nexport class ValidationDirective implements OnInit, DoCheck {\n    @Input(\"sqValidation\") options: FormGroup | ValidationOptions;\n    private element: HTMLElement;\n    private form: FormGroup;\n    private control: AbstractControl;\n    private validClass?: string;\n    private invalidClass?: string;\n    private childSelector?: string;\n    private errorMessages?: MapOf<string>;\n    private validationMessage: LoadedComponent;\n    private active: boolean;\n    private valid: boolean;\n    private dirty: boolean;\n    private error?: string;\n    private errorInfo?: string;\n\n    constructor(\n        @Inject(VALIDATION_MESSAGE_COMPONENT) private validationMessageComponent: Type<any>,\n        private viewContainerRef: ViewContainerRef,\n        private loadComponentService: LoadComponentService,\n        private validationService: ValidationService) {\n        this.element = viewContainerRef.element.nativeElement;\n    }\n\n    ngOnInit() {\n        if (!this.options) {\n            console.log(\"Validation.ngOnInit - no options\");\n            return;\n        }\n        let controlName;\n        if (this.options instanceof FormGroup) {\n            this.form = this.options;\n        }\n        else {\n            this.form = this.options.form;\n            controlName = this.options.controlName;\n            this.validClass = this.options.validClass;\n            this.invalidClass = this.options.invalidClass;\n            this.childSelector = this.options.childSelector;\n            this.errorMessages = this.options.errorMessages;\n        }\n        if (!this.form) {\n            console.log(\"Validation.ngOnInit - no form model\");\n            return;\n        }\n        if (!this.form.controls) {\n            console.log(\"Validation.ngOnInit - no form controls\");\n            return;\n        }\n        if (controlName) {\n            this.control = this.form.controls[controlName];\n        }\n        else {\n            const formControlName = this.element.getAttribute(\"formControlName\");\n            if (formControlName) {\n                this.control = this.form.controls[formControlName];\n            }\n        }\n        if (!this.control) {\n            console.log(\"Validation.ngOnInit - no control\");\n            return;\n        }\n        if (!this.validClass) {\n            this.validClass = \"is-valid\";\n        }\n        if (!this.invalidClass) {\n            this.invalidClass = \"is-invalid\";\n        }\n        if (Utils.isUndefined(this.childSelector)) {\n            this.childSelector = \".form-control\";\n        }\n        this.valid = this.control.valid;\n        this.dirty = this.control.dirty;\n        this.active = true;\n        this.error = undefined;\n    }\n\n    private getFirstError(): string | undefined {\n        if (this.control.errors) {\n            return Object.keys(this.control.errors)[0];\n        }\n        return undefined;\n    }\n\n    private getErrorText(error?: string): string {\n        if (error && this.errorMessages && !!this.errorMessages[error]) {\n            return this.errorMessages[error];\n        }\n        return this.validationService.getErrorText(error);\n    }\n\n    private getErrorInfo(error?: string): any {\n        if (error && this.control.errors) {\n            return this.control.errors[error];\n        }\n        return undefined;\n    }\n\n    private setValidityClasses() {\n        const add = this.control.valid ? this.validClass : this.invalidClass;\n        const remove = this.control.valid ? this.invalidClass : this.validClass;\n        if (remove) {\n            this.element.classList.remove(remove);\n        }\n        if (add) {\n            this.element.classList.add(add);\n        }\n        if (this.childSelector) {\n            const children = Array.from(this.element.querySelectorAll(this.childSelector));\n            children.forEach(element => {\n                if (remove) {\n                    element.classList.remove(remove);\n                }\n                if (add) {\n                    element.classList.add(add);\n                }\n            });\n        }\n    }\n\n    private removeValidityClasses() {\n        if (this.validClass) {\n            this.element.classList.remove(this.validClass);\n        }\n        if (this.invalidClass) {\n            this.element.classList.remove(this.invalidClass);\n        }\n        if (this.childSelector) {\n            const children = Array.from(this.element.querySelectorAll(this.childSelector));\n            children.forEach(element => {\n                if (this.validClass) {\n                    element.classList.remove(this.validClass);\n                }\n                if (this.invalidClass) {\n                    element.classList.remove(this.invalidClass);\n                }\n            });\n        }\n    }\n\n    /**\n     * Update the validity classes on the element depending on the validity state of the\n     * associated `FormControl`. If the control is invalid then the validation message component\n     * is loaded to display an error message.\n     */\n    ngDoCheck() {\n        if (!this.active) {\n            return;\n        }\n        if (this.valid === this.control.valid && this.dirty === this.control.dirty) {\n            const firstError = this.getFirstError();\n            const errorInfo = this.getErrorInfo(firstError);\n            if (firstError === this.error && errorInfo === this.errorInfo) {\n                return;\n            }\n            this.error = firstError;\n            this.errorInfo = errorInfo;\n        }\n        this.valid = this.control.valid;\n        this.dirty = this.control.dirty;\n        if (this.control.dirty) {\n            this.setValidityClasses();\n            if (this.control.valid) {\n                if (this.validationMessage) {\n                    this.validationMessage.componentRef.instance.text = \"\";\n                }\n            }\n            else {\n                if (!this.validationMessage) {\n                    this.validationMessage =\n                        this.loadComponentService.loadComponent({component: this.validationMessageComponent}, this.viewContainerRef);\n                }\n                const error = this.getFirstError();\n                this.validationMessage.componentRef.instance.text = this.getErrorText(error);\n                this.validationMessage.componentRef.instance.info = this.getErrorInfo(error);\n            }\n        }\n        else {\n            this.removeValidityClasses();\n            if (this.validationMessage) {\n                this.validationMessage.componentRef.instance.text = \"\";\n            }\n        }\n    }\n}\n","export default {\n    \"modal\": {\n        \"login\": {\n            \"title\": \"Connexion\",\n            \"userName\": \"Identifiant\",\n            \"password\": \"Mot de passe\",\n            \"singleSignOn\": \"Authentification unique\",\n            \"signInWith\": \"S'identifier avec ...\"\n        }\n    },\n};\n","export default {\n    \"results\": {\n        \"viewTitle\": \"Anzeige: {text}\",\n        \"unselectableViewDisplay\": \"<Andere>\",\n        \"resultsListView\": {\n            \"display\": \"Liste\",\n            \"selectDocument\": \"Dokument auswählen\",\n            \"unselectDocument\": \"Dokumentauswahl aufheben\",\n            \"previewPopup\": \"[Dokument-Navigator]\",\n            \"previewInCurrentPage\": \"[Dokument-Navigator (auf der aktuellen Seite)]\",\n            \"previewInNewTab\": \"[Dokument-Navigator (in einem neuen Reiter)]\",\n            \"showMetadata\": \"[Metadaten]\",\n            \"showLabels\": \"[Etiketten]\"\n        },\n        \"resultsGridView\": {\n            \"display\": \"Tabelle\",\n            \"selectDocument\": \"Dokument auswählen\",\n            \"unselectDocument\": \"Dokumentauswahl aufheben\",\n            \"selectDocuments\": \"Dokumente auswählen\",\n            \"unselectDocuments\": \"Dokumentauswahl aufheben\"\n        },\n        \"viewPageSize\": \"Anzahl der Ergebnisse pro Seite\",\n        \"viewUpdateApply\": \"Anwenden\",\n        \"warningNoViewForTab\": \"Der Reiter '{tab}' hat keine zugewiesenen Ergebnisansichten.\",\n        \"warningCannotDisplayTabOnView\": \"Der Reiter '{tab}' kann nicht mit der Ansicht '{view}' angezeigt werden, da diese nicht in der Ansichtskonfiguration enthalten ist.\",\n\n        \"resultsAllTab\": \"Alle\",\n        \"resultsTextTab\": \"Text\",\n        \"results_all_tab\": \"Alle\",\n        \"results_text_tab\": \"Text\",\n    }\n};\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\n\n@Pipe({name: \"sqNumber\", pure: false})\nexport class NumberPipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: number | string, params: Intl.NumberFormatOptions): void {\n        super.updateValue(key, params);\n        this.value = typeof key === \"number\" ? this.intlService.formatNumber(key, params) : key;\n    }\n}","import {Component, Input} from '@angular/core';\n\n@Component({\n    selector: \"sq-tooltip\",\n    template: `\n<div [ngStyle]=\"style\" [ngClass]=\"orientation\" class=\"sq-tooltip position-absolute card\">\n    <div class=\"card-body bg-{{theme}} p-2\">\n        <ng-content></ng-content>\n    </div>\n</div>\n`,\n    styles: [`\n.sq-tooltip {\n    z-index: 10;\n}\n\n.sq-tooltip::after {\n    content: \" \";\n    position: absolute;\n    top: 12px;\n    border-width: 8px;\n    border-style: solid;\n}\n\n.sq-tooltip.right::after {\n    left: -17px;\n    border-color: transparent rgb(0,0,0,0.125) transparent transparent;\n}\n\n.sq-tooltip.left::after {\n    right: -17px;\n    border-color: transparent transparent transparent rgb(0,0,0,0.125);\n}\n    `]\n})\nexport class BsTooltipComponent {\n    @Input() orientation: \"left\" | \"right\" = \"right\";\n    @Input() left = 0;\n    @Input() right = 0;\n    @Input() top = 0;\n    @Input() theme: \"light\" | \"dark\" = \"light\";\n\n    get style() {\n        if(this.orientation === \"right\") {\n            return {\n                'left.px': this.left + 7,\n                'top.px': this.top - 21, // Align tooltip arrow\n            }\n        }\n        else {\n            return {\n                'right.px': this.right + 7,\n                'top.px': this.top - 21, // Align tooltip arrow\n            }\n        }\n    }\n}","export default {\n    \"resultSelector\": {\n        \"selectDocument\": \"Sélectionner le document\",\n        \"unselectDocument\": \"Désélectionner le document\"\n    },\n    \"resultsSelector\": {\n        \"selectDocuments\": \"{count, selectordinal, =0 {} other {(#)}}\",\n        \"selectDocumentsTitle\": \"Sélectionner les documents\",\n        \"unselectDocumentsTitle\": \"Désélectionner les documents\",\n    },\n    \"selection\": {\n        \"selectedDocuments\": \"{count, plural, =0 {} one {# document sélectionné} other {# documents sélectionnés}}\"\n    }\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enIntl, frIntl, deIntl} from \"@sinequa/core/intl\";\nimport _enValidation from \"./en\";\nimport _frValidation from \"./fr\";\nimport _deValidation from \"./de\";\n\nconst enValidation = Utils.merge({}, _enValidation, enIntl);\nconst frValidation = Utils.merge({}, _frValidation, frIntl);\nconst deValidation = Utils.merge({}, _deValidation, deIntl);\n\nexport { enValidation, frValidation, deValidation };\n","export * from \"./labels-autocomplete/labels-autocomplete.component\";\nexport * from \"./labels.module\";\nexport * from \"./rename-label/rename-label\";\nexport * from \"./labels-menu/labels-menu.component\";\nexport * from \"./delete-label/delete-label\";\nexport * from \"./add-label/add-label\";\nexport * from \"./edit-label/edit-label\";\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Action } from '@sinequa/components/action';\nimport { LoginService } from '@sinequa/core/login';\nimport { BasketsService } from '../../baskets.service';\n\n@Component({\n  selector: 'sq-baskets-menu',\n  templateUrl: './baskets-menu.component.html'\n})\nexport class BsBasketsMenuComponent implements OnInit {\n  @Input() searchRoute: string = \"/search\";\n  @Input() icon: string = \"fas fa-shopping-basket\";\n  @Input() autoAdjust: boolean = true;\n  @Input() autoAdjustBreakpoint: string = 'xl';\n  @Input() collapseBreakpoint: string = 'sm';\n  @Input() size: string;\n\n  menu: Action | undefined;\n\n  // Basket actions\n  createAction: Action;\n  manageAction: Action;\n\n  constructor(\n    public loginService: LoginService,\n    public basketsService: BasketsService) {\n\n    this.createAction = new Action({\n      text: \"msg#baskets.createBasket\",\n      title: \"msg#baskets.createBasket\",\n      action: _ => { this.basketsService.createBasketModal(); }\n    });\n\n    this.manageAction = new Action({\n      text: \"msg#baskets.manageBaskets\",\n      title: \"msg#baskets.manageBaskets\",\n      action: _ => { this.basketsService.manageBasketsModal(); }\n    });\n  }\n\n  ngOnInit() {\n    this.updateMenu();\n    this.basketsService.changes.subscribe({\n      next: () => { this.updateMenu(); }\n    });\n    this.loginService.events.subscribe(event => {\n      if(event.type === \"session-changed\"){\n        this.updateMenu();\n      }\n    });\n  }\n\n  updateMenu() {\n\n    if (!this.loginService.complete) {\n        this.menu = undefined;\n        return;\n    }\n\n    const basketsActions: Action[] = [];\n\n    if (this.basketsService.hasBasket) {\n        const scrollGroup = new Action({\n            scrollGroup: true,\n            children: this.basketsService.baskets.map(basket => new Action({\n                text: basket.name,\n                title: basket.name,\n                data: basket,\n                action: () => this.basketsService.searchBasket(basket, this.searchRoute)\n            }))\n        });\n        basketsActions.push(scrollGroup);\n    }\n\n    basketsActions.push(this.createAction);\n\n    if (this.basketsService.hasBasket) {\n      basketsActions.push(this.manageAction);\n    }\n\n    this.menu = new Action({\n      icon: this.icon,\n      text: \"msg#baskets.baskets\",\n      title: \"msg#baskets.baskets\",\n      children: basketsActions\n    });\n  }\n}\n","<li *ngIf=\"!!menu && !menu.hidden\" class=\"nav-item dropdown\" \n    [sq-action-item]=\"{item: menu, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n    [collapseBreakpoint]=\"collapseBreakpoint\"\n></li>","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport {\n    AreaChartModule,\n    BarChartModule,\n    PieChartModule,\n    TreeMapModule,\n    NumberCardModule,\n    GaugeModule } from \"@swimlane/ngx-charts\";\n\nimport { IntlModule } from '@sinequa/core/intl';\nimport { UtilsModule } from \"@sinequa/components/utils\";\nimport { BsSelectionModule } from \"@sinequa/components/selection\";\n\nimport { NgxChart } from \"./chart/chart\";\nimport { FacetNgxChart } from \"./facet-chart/facet-chart\";\n\n@NgModule({\n\n    imports: [\n        CommonModule,\n        IntlModule,\n        UtilsModule,\n        BsSelectionModule,\n        \n        // ngx-charts modules\n        AreaChartModule,\n        BarChartModule,\n        PieChartModule,\n        TreeMapModule,\n        NumberCardModule,\n        GaugeModule\n    ],\n    declarations: [\n        NgxChart, FacetNgxChart\n    ],\n    exports: [\n        NgxChart, FacetNgxChart\n    ],\n})\nexport class NgxChartsModule {}","import { ArrayView } from \"./array-view\";\nimport { IteratorAdaptor } from \"./iterator-adaptor\";\n\n/**\n * A generic interface describing a name and associated value\n */\nexport interface NameValuePair<U, V> {\n    name: U;\n    value: V;\n}\n\n/**\n * An {@link ArrayView} of {@link NameValuePair}\n */\nexport interface NameValueArrayView<U, V> extends ArrayView<NameValuePair<U, V>> {\n    getName(index: number): U;\n    getValue(index: number): V;\n    items(): IterableIterator<NameValuePair<U, V>>;\n    names(): IterableIterator<U>;\n    values(): IterableIterator<V>;\n}\n\nclass ArrayBasedView<T, U, V> implements NameValueArrayView<U, V> {\n    constructor(\n        private base: T[],\n        private nameSelector: (t: T) => U,\n        private valueSelector: (t: T) => V\n    ) { }\n\n    get length(): number {\n        return this.base.length;\n    }\n\n    get(index: number): NameValuePair<U, V> {\n        return this.toNameValuePair(this.base[index]);\n    }\n\n    getName(index: number): U {\n        return this.nameSelector(this.base[index]);\n    }\n\n    getValue(index: number): V {\n        return this.valueSelector(this.base[index]);\n    }\n\n    private toNameValuePair(obj: T): NameValuePair<U, V> {\n        return { name: this.nameSelector(obj), value: this.valueSelector(obj) };\n    }\n\n    /*\n        Iterators\n    */\n\n    [Symbol.iterator](): IterableIterator<NameValuePair<U, V>> {\n        return this.items();\n    }\n\n    items(): IterableIterator<NameValuePair<U, V>> {\n        return IteratorAdaptor.forIterable(\n            this.base,\n            (obj) => this.toNameValuePair(obj)\n        );\n    }\n\n    names(): IterableIterator<U> {\n        return IteratorAdaptor.forIterable(this.base, this.nameSelector);\n    }\n\n    values(): IterableIterator<V> {\n        return IteratorAdaptor.forIterable(this.base, this.valueSelector);\n    }\n\n    forEach(callback: (item: NameValuePair<U, V>, index?: number, items?: NameValueArrayView<U, V>) => void, thisArg?: any) {\n        for (let idx = 0; idx < this.length; idx++) {\n            const r = this.get(idx);\n            if (thisArg)\n                callback.call(thisArg, r, idx, this);\n            else\n                callback(r, idx, this);\n        }\n        return this;\n    }\n}\n\n/**\n * A helper class for creating {@link NameValueArrayView} instances\n */\n// @dynamic\nexport class NameValueArrayViewHelper {\n    /**\n     * Creates a {@link NameValueArrayView} from an array of {@link NameValuePair} items\n     *\n     * @param items An array of `NameValuePair` items\n     */\n    static fromArray<U, V>(items: NameValuePair<U, V>[]): NameValueArrayView<U, V> {\n        return new ArrayBasedView(items || [], p => p.name, p => p.value);\n    }\n\n    static fromObjects<T>(items: T[], nameKey: keyof T, valueKey: keyof T): NameValueArrayView<T[keyof T], T[keyof T]> {\n        return new ArrayBasedView(items || [], p => p[nameKey], p => p[valueKey]);\n    }\n\n    static from<T, U, V>(items: T[], nameSelector: (t: T) => U, valueSelector: (t: T) => V): NameValueArrayView<U, V> {\n        return new ArrayBasedView(items || [], nameSelector, valueSelector);\n    }\n}\n","export * from \"./load-component.module\";\nexport * from \"./load-component.service\";\nexport * from \"./load-component.directive\";\n","import {Component} from \"@angular/core\";\nimport {Action} from \"@sinequa/components/action\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Subscription} from \"rxjs\";\nimport {UIService} from \"@sinequa/components/utils\";\n\n@Component({\n    selector: \"sq-fullscreen-activator\",\n    templateUrl: \"./fullscreen-activator.html\"\n})\nexport class BsFullscreenActivator {\n    action: Action;\n    resizeSubscription: Subscription | undefined;\n\n    constructor(\n        private uiService: UIService) {\n        this.buildAction();\n    }\n\n    getFullscreenIcon(): string {\n        return !this.isFullscreen() ? \"fas fa-expand\" : \"fas fa-compress\";\n    }\n\n    getFullscreenTitle(): string {\n        return !this.isFullscreen() ? \"msg#statusbar.fullscreenTitleEnter\" : \"msg#statusbar.fullscreenTitleExit\";\n    }\n\n    buildAction() {\n        this.action = new Action({\n            icon: this.getFullscreenIcon(),\n            title: this.getFullscreenTitle(),\n            action: (item, $event) => {\n                this.toggleFullscreen();\n                item.icon = this.getFullscreenIcon();\n                item.title = this.getFullscreenTitle();\n            },\n            init: (item) => {\n\n                this.resizeSubscription = Utils.subscribe(this.uiService.resizeEvent,\n                    (event) => {\n                        this.action.icon = this.getFullscreenIcon();\n                        this.action.title = this.getFullscreenTitle();\n                    });\n\n            },\n            destroy: (item) => {\n\n                if (this.resizeSubscription) {\n                    this.resizeSubscription.unsubscribe();\n                    this.resizeSubscription = undefined;\n                }\n\n            }\n        });\n    }\n\n    requestFullscreen() {\n        const doc = window.document;\n        const docEl = doc.documentElement;\n        const requestFullScreen = docEl[\"requestFullscreen\"] || docEl[\"mozRequestFullScreen\"] || docEl[\"webkitRequestFullScreen\"] || docEl[\"msRequestFullscreen\"];\n        if (requestFullScreen) {\n            requestFullScreen.call(docEl);\n        }\n    }\n\n    cancelFullscreen() {\n        const doc = window.document;\n        const cancelFullScreen = doc[\"exitFullscreen\"] || doc[\"mozCancelFullScreen\"] || doc[\"webkitExitFullscreen\"] || doc[\"msExitFullscreen\"];\n        if (cancelFullScreen) {\n            cancelFullScreen.call(doc);\n        }\n    }\n\n    isFullscreen() {\n        const doc = window.document;\n        return doc[\"fullscreenElement\"] || doc[\"mozFullScreenElement\"] || doc[\"webkitFullscreenElement\"] || doc[\"msFullscreenElement\"];\n    }\n\n    toggleFullscreen() {\n        if (!this.isFullscreen()) {\n            this.requestFullscreen();\n        }\n        else {\n            this.cancelFullscreen();\n        }\n    }\n}","<div class=\"btn-toolbar\">\n    <div class=\"btn-group\" [sq-action-buttons]=\"{items: [action]}\"></div>\n</div>","import {ViewEncapsulation, Component, Input, OnChanges, SimpleChanges, Output, EventEmitter} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {SearchService} from \"@sinequa/components/search\";\n\n\n@Component({\n    selector: \"sq-result-title\",\n    templateUrl: \"./result-title.html\",\n    styles: [`\nsq-result-title {\n    font-size: 1.25rem;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n.match-highlight {\n    font-weight: bold;\n    font-style: italic;\n}\n    `],\n    encapsulation: ViewEncapsulation.None   // Currently necessary for the match-highlight\n})\nexport class ResultTitle implements OnChanges {\n    /** The record which title we want to display */\n    @Input() record: Record;\n    /**\n     * \"open\" mode: Display a link which opens the original document (url1) if available, or emits a titleClicked event to perform an action otherwise\n     * \"action\" mode: Display a link which emits a titleClicked event to perform an action\n     * \"open-if-url\" mode: Display a link which opens the original document (url1) if available, or displays a SPAN with the title otherwise\n     * \"display\" mode: Only display a SPAN element (no link)\n     */\n    @Input() titleLinkBehavior: \"open\" | \"action\" | \"open-if-url\" | \"display\" = \"open\";\n    /** Optional field name containing the title. Otherwise displayTitle or title are used */\n    @Input() field: string = \"\";\n    /** Optional custom target used in the link */\n    @Input() originalDocTarget: string | undefined;\n    /** Event emitter to perform actions at the parent level */\n    @Output() titleClicked = new EventEmitter<boolean>();   // TODO: Custom options to get title & URL (replace pluginservice)\n\n    public title: string;\n    private titleField: string;\n    private documentUrl: string;\n\n    constructor(\n        public searchService: SearchService,\n        private appService: AppService) {\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"record\"]) {\n            this.titleField = this.appService.resolveColumnAlias(this.field);\n            this.title = this.getTitle();\n            this.documentUrl = this.record.url1;\n        }\n    }\n\n    get hasLinkBehaviour(): boolean {\n        return this.titleLinkBehavior === \"open\" || (this.titleLinkBehavior === \"open-if-url\" && this.hasUrl);\n    }\n\n    /**\n     * A span is shown in \"display\" mode or \"open-if-url\" mode when no url is present\n     * A link is shown in all other cases (even in \"open\" mode with no url, which is equivalent to \"action\" mode)\n     */\n    get hasSpanBehaviour(): boolean {\n        return this.titleLinkBehavior === \"display\" || (this.titleLinkBehavior === \"open-if-url\" && !this.hasUrl);\n    }\n\n    public get href(): string {\n        return (this.hasLinkBehaviour && this.documentUrl) || \"#\";\n    }\n\n    public get target(): string {\n        return (this.hasLinkBehaviour && this.documentUrl) ? this.originalDocTarget || '_blank' : \"_self\";\n    }\n    \n    public get hasUrl(): boolean {\n        return !!this.documentUrl;\n    }\n\n    private getTitle(): string {\n        let title;\n        if (this.titleField) {\n            title = Utils.escapeHtml(this.record[this.titleField]);\n        }\n        if (!title) {\n            title = this.record.displayTitle || Utils.escapeHtml(this.record.title);\n        }\n        return title;\n    }\n\n    public click() : boolean {\n        const isLink = this.hasLinkBehaviour && !!this.documentUrl; // true if this is a regular link (performs the default action)\n        if(isLink)\n            this.searchService.notifyOpenOriginalDocument(this.record);\n        this.titleClicked.emit(isLink); // Can be use to trigger actions\n        return isLink;\n    }\n}","<!-- Display a regular SPAN if the component is supposed to have a link behavior but has no URL -->\n<span *ngIf=\"hasSpanBehaviour\" class=\"sq-result-title\" title=\"{{this.record.title}}\" [innerHTML]=\"title\"></span>\n<!-- Display a link if a URL exists or the component is used to trigger an action -->\n<a *ngIf=\"!hasSpanBehaviour\" class=\"sq-result-title\" title=\"{{this.record.title}}\" href=\"{{href}}\" target=\"{{target}}\" [innerHTML]=\"title\" (click)=\"click()\"></a>\n","export default {\n    \"theme\": {\n        \"darkMode\": \"Dark mode\",\n        \"darkModeTitle\": \"Toggle dark mode\",\n        \"lightMode\": \"Light mode\",\n        \"lightModeTitle\": \"Toggle light mode\"\n    }\n}","import {Injectable} from \"@angular/core\";\nimport {Validators, ValidatorFn, AbstractControl, ValidationErrors} from \"@angular/forms\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {FormatService} from \"@sinequa/core/app-utils\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * @ignore\n */\nfunction isEmptyInputValue(value: any): boolean {\n    // we don't check for string here so it also works with arrays\n    return value === null || value === undefined || value.length === 0;\n}\n\nconst processInputValue = (value: any) => { // add support for object values of the advanced search\n  if (Utils.isArray(value)) {\n    return value.map(\n      (val) => {\n        if (Utils.isObject(val) && val.hasOwnProperty(\"value\")) {\n          return val.value;\n        }\n        return val;\n      }\n    )\n  } else {\n    if (Utils.isObject(value) && value.hasOwnProperty(\"value\")) {\n      return [value.value];\n    }\n    return [value];\n  }\n}\n\n// Email regular expression, taken from built-in Angular validators.\n/**\n * @ignore\n */\nconst EMAIL_REGEXP = /^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;\n\n/**\n * Enumerates the supported validator types.\n */\nexport enum ValidatorType {\n    Min = \"Min\",\n    Max = \"Max\",\n    Required = \"Required\",\n    Email = \"Email\",\n    Pattern = \"Pattern\",\n    Integer = \"Integer\",\n    Number = \"Number\",\n    Date = \"Date\",\n    Range = \"Range\",\n}\n\n/**\n * Describes a `Validator` object.\n */\nexport interface Validator {\n    /**\n     * The validator's type.\n     */\n    type: ValidatorType;\n    /**\n     * The validator's name.\n     */\n    name: string;\n    /**\n     * The validator's error message to be displayed when a value is invalid.\n     */\n    errorMessage: string;\n    /**\n     * `true` if the validator is to be applied.\n     */\n    active: boolean;\n}\n\n/**\n * Defines the default error messages for each validator.\n */\nconst errorMessagesMap = {\n    // Built-in Angular validators\n    min: \"msg#validation.min\",\n    max: \"msg#validation.max\",\n    required: \"msg#validation.required\",\n    requiredTrue: \"msg#validation.requiredTrue\",\n    email: \"msg#validation.email\",\n    minlength: \"msg#validation.minLength\",\n    maxlength: \"msg#validation.maxLength\",\n    pattern: \"msg#validation.pattern\",\n\n    // Custom\n    unique: \"msg#validation.unique\",\n    integer: \"msg#validation.integer\",\n    number: \"msg#validation.number\",\n    date: \"msg#validation.date\",\n    range: \"msg#validation.range\"\n};\n\n\n/**\n * This service provides a set of locale-sensitive validators with support for arrays.\n * The validator error messages are {@link IntlService} `msg#` messages of the form:\n * `msg#validation.<validator name>`.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class ValidationService {\n    constructor(\n        protected formatService: FormatService,\n        protected intlService: IntlService) {\n    }\n\n    /**\n     * A pattern validator based on Angular's `Validators.pattern` with support for value arrays.\n     *\n     * @param pattern The pattern.\n     * @returns The validation function.\n     */\n    static patternValidator(pattern: string | RegExp): ValidatorFn {\n        // #region This code region is based on Validators.pattern()\n        if (!pattern) {\n            return Validators.nullValidator;\n        }\n\n        let regex: RegExp;\n        let regexStr: string;\n        if (typeof pattern === 'string') {\n            regexStr = '';\n\n            if (pattern.charAt(0) !== '^') {\n                regexStr += '^';\n            }\n\n            regexStr += pattern;\n\n            if (pattern.charAt(pattern.length - 1) !== '$') {\n                regexStr += '$';\n            }\n\n            regex = new RegExp(regexStr);\n        } else {\n            regexStr = pattern.toString();\n            regex = pattern;\n        }\n        // #endregion\n\n        return (control: AbstractControl): ValidationErrors | null => {\n            if (isEmptyInputValue(control.value)) {\n                return null;  // don't validate empty values to allow optional controls\n            }\n\n            let values: any[] = [];\n            values = processInputValue(control.value);\n\n            for (const value of values) {\n                if (!regex.test(value)) {\n                    return {pattern: {requiredPattern: pattern.toString(), actualValue: value}};\n                }\n            }\n\n            return null;\n        };\n    }\n\n    /**\n     * A pattern validator based on Angular's `Validators.email` with support for value arrays.\n     *\n     * @param control The control to validate.\n     * @returns The result.\n     */\n    static emailValidation(control: AbstractControl): ValidationErrors | null {\n        if (isEmptyInputValue(control.value)) {\n            return null;  // don't validate empty values to allow optional controls\n        }\n\n        let values: any[] = [];\n        values = processInputValue(control.value);\n\n        for (const value of values) {\n            if (!EMAIL_REGEXP.test(value)) {\n                return {email: true};\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the name of the first validator in a map of validation errors.\n     * @param errors The validation errors\n     * @returns The name of the first validator, if any - `undefined` otherwise.\n     */\n    getFirstError(errors: ValidationErrors): string | undefined {\n        if (errors) {\n            return Object.keys(errors)[0];\n        }\n        return undefined;\n    }\n\n    /**\n     * Get the error message associated with the passed validator.\n     * @param name The name of a validator.\n     * @returns The error message.\n     */\n    getErrorText(name?: string): string {\n        const text = name ? errorMessagesMap[name] : undefined;\n        if (!text) {\n            return \"Unknown validator: \" + name;\n        }\n        return text;\n    }\n\n    /**\n     * Get the error message associated with first validator in a map of validation errors.\n     * @param errors The validation errors.\n     * @returns The error message.\n     */\n    getFirstErrorText(errors: ValidationErrors): string | undefined {\n        if (errors) {\n            const error = this.getFirstError(errors);\n            if (error) {\n                return this.getErrorText(error);\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get the data held for the first error in a map of validation errors\n     * @param errors The validation errors.\n     */\n    getFirstErrorInfo(errors: ValidationErrors): any {\n        if (errors) {\n            const error = this.getFirstError(errors);\n            if (error) {\n                return errors[error];\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get a validator function that validates that values are greater than or equal\n     * to the passed `min` value. The function supports single values and arrays of\n     * values and will optionally parse the values using the {@link FormatService} if\n     * a parser is passed. Dates will be parsed according to the current locale.\n     *\n     * @param min The minimum value to test against. The type determines\n     * how the test will be made.\n     * @param parser An optional parser name.\n     */\n    minValidator(min: string | number | Date, parser?: string): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null => {\n            if (isEmptyInputValue(control.value) || isEmptyInputValue(min)) {\n                return null;  // don't validate empty values to allow optional controls\n            }\n\n            let values: any[] = [];\n            values = processInputValue(control.value);\n\n            for (const value of values) {\n                if (!isEmptyInputValue(value)) {\n                    let value1 = value;\n                    if (parser) {\n                        value1 = this.formatService.parseValue(value1, parser);\n                    }\n                    let cmp = 0;\n                    if (Utils.isNumber(min)) {\n                        if (Utils.testFloat(value1)) {\n                            value1 = Utils.toNumber(value1);\n                            cmp = value1 - min;\n                        }\n                    }\n                    else if (Utils.isString(min)) {\n                        cmp = Utils.compare(value1, min);\n                    }\n                    else if (Utils.isDate(min)) {\n                        if (Utils.isString(value1)) {\n                            value1 = this.intlService.parseDate(value1);\n                            if (value1) {\n                                cmp = value1.getTime() - min.getTime();\n                            }\n                        }\n                        else if (Utils.isDate(value1)) { // ngx-bootstrap returns date values (new Date(NaN) if invalid)\n                            cmp = value1.getTime() - min.getTime();\n                        }\n                    }\n                    if (cmp < 0) {\n                        return {min: {min, actual: value}};\n                    }\n                }\n            }\n            return null;\n        };\n    }\n\n    /**\n     * Get a validator function that validates that values are less than or equal\n     * to the passed `max` value. The function supports single values and arrays of\n     * values and will optionally parse the values using the {@link FormatService} if\n     * a parser is passed. Dates will be parsed according to the current locale.\n     *\n     * @param max The maximum value to test against. The type determines\n     * how the test will be made.\n     * @param parser An optional parser name.\n     */\n    maxValidator(max: string | number | Date, parser?: string): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null => {\n            if (isEmptyInputValue(control.value) || isEmptyInputValue(max)) {\n                return null;  // don't validate empty values to allow optional controls\n            }\n            let values: any[] = [];\n            values = processInputValue(control.value);\n\n            for (const value of values) {\n                if (!isEmptyInputValue(value)) {\n                    let value1 = value;\n                    if (parser) {\n                        value1 = this.formatService.parseValue(value1, parser);\n                    }\n                    let cmp = 0;\n                    if (Utils.isNumber(max)) {\n                        if (Utils.testFloat(value1)) {\n                            value1 = Utils.toNumber(value1);\n                            cmp = value1 - max;\n                        }\n                    }\n                    else if (Utils.isString(max)) {\n                        cmp = Utils.compare(value1, max);\n                    }\n                    else if (Utils.isDate(max)) {\n                        if (Utils.isString(value1)) {\n                            value1 = this.intlService.parseDate(value1);\n                            if (value1) {\n                                cmp = value1.getTime() - max.getTime();\n                            }\n                        }\n                        else if (Utils.isDate(value1)) { // ngx-bootstrap returns date values (new Date(NaN) if invalid)\n                            cmp = value1.getTime() - max.getTime();\n                        }\n                    }\n                    if (cmp > 0) {\n                        return {max: {max, actual: value}};\n                    }\n                }\n            }\n            return null;\n        };\n    }\n\n    /**\n     * Get a validator function that validates that values are integers. The function\n     * supports single values and arrays of values and will optionally parse the values\n     * using the {@link FormatService} if a parser is passed.\n     *\n     * @param parser An optional parser name.\n     */\n    integerValidator(parser?: string): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null => {\n            if (isEmptyInputValue(control.value)) {\n                return null;  // don't validate empty values to allow optional controls\n            }\n            let values: any[] = [];\n            values = processInputValue(control.value);\n\n            for (const value of values) {\n                if (!isEmptyInputValue(value)) {\n                    let value1 = value;\n                    if (parser) {\n                        value1 = this.formatService.parseValue(value1, parser);\n                    }\n                    if (!Utils.testInteger(value1)) {\n                        return {integer: {value}};\n                    }\n                }\n            }\n            return null;\n        };\n    }\n\n    /**\n     * Get a validator function that validates that values are numeric. The function\n     * supports single values and arrays of values and will optionally parse the values\n     * using the {@link FormatService} if a parser is passed.\n     *\n     * @param parser An optional parser name.\n     */\n    numberValidator(parser?: string): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null => {\n            if (isEmptyInputValue(control.value)) {\n                return null;  // don't validate empty values to allow optional controls\n            }\n            let values: any[] = [];\n            values = processInputValue(control.value);\n\n            for (const value of values) {\n                if (!isEmptyInputValue(value)) {\n                    let value1 = value;\n                    if (parser) {\n                        value1 = this.formatService.parseValue(value1, parser);\n                    }\n                    if (!Utils.testFloat(value1)) {\n                        return {number: {value}};\n                    }\n                }\n            }\n            return null;\n        };\n    }\n\n    /**\n     * Get a validator function that validates that values are dates. The function\n     * supports single values and arrays of values and will optionally parse the values\n     * using the {@link FormatService} if a parser is passed. Dates will be parsed according\n     * to the current locale.\n     *\n     * @param parser An optional parser name.\n     */\n    dateValidator(parser?: string): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null => {\n            if (isEmptyInputValue(control.value)) {\n                return null;  // don't validate empty values to allow optional controls\n            }\n            let values: any[] = [];\n            values = processInputValue(control.value);\n\n            for (const value of values) {\n                if (!isEmptyInputValue(value)) {\n                    if (Utils.isString(value)) {\n                        let value1 = value;\n                        if (parser) {\n                            value1 = this.formatService.parseValue(value1, parser);\n                        }\n                        if (!this.intlService.parseDate(value1)) {\n                            return {date: {value}};\n                        }\n                    }\n                    else if (Utils.isDate(value)) { // ngx-bootstrap returns date values (new Date(NaN) if invalid)\n                        if (isNaN(value.getTime())) {\n                            return {date: {value}};\n                        }\n                    }\n                }\n            }\n            return null;\n        };\n    }\n\n    /**\n     * Get a validator function that validates that, for pair of values, the second value is\n     * greater than the first. If one or both values are empty then the validation passes.\n     * The validator function supports single values and arrays of values and will optionally\n     * parse the values using the {@link FormatService} if a parser is passed. Dates will be\n     * parsed according to the current locale.\n     *\n     * @param type A value whose type indicates how the range test will be made.\n     * @param parser An optional parser name.\n     */\n    rangeValidator(type: string | number | Date, parser?: string): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null => {\n            if (isEmptyInputValue(control.value) || !Utils.isArray(control.value) || control.value.length !== 2) {\n                return null;  // don't validate empty values to allow optional controls\n            }\n            let value1 = control.value[0];\n            let value2 = control.value[1];\n            if (isEmptyInputValue(value1) || isEmptyInputValue(value2)) {\n                return null;\n            }\n            if (parser) {\n                value1 = this.formatService.parseValue(value1, parser);\n                value2 = this.formatService.parseValue(value2, parser);\n            }\n            let cmp = 0;\n            if (Utils.isString(type)) {\n                cmp = Utils.compare(value2, value1);\n            }\n            else if (Utils.isDate(type)) {\n                let date1: Date | undefined;\n                let date2: Date | undefined;\n                if (Utils.isString(value1)) {\n                    date1 = this.intlService.parseDate(value1);\n                }\n                else if (Utils.isDate(value1)) { // ngx-bootstrap returns date values (new Date(NaN) if invalid)\n                    date1 = value1;\n                }\n                if (Utils.isString(value2)) {\n                    date2 = this.intlService.parseDate(value2);\n                }\n                else if (Utils.isDate(value2)) { // ngx-bootstrap returns date values (new Date(NaN) if invalid)\n                    date2 = value2;\n                }\n                if (date1 && date2) {\n                    cmp = date2.getTime() - date1.getTime();\n                }\n            }\n            else if (Utils.isNumber(type)) {\n                if (Utils.testFloat(value1) && Utils.testFloat(value2)) {\n                    const num1 = Utils.toNumber(value1);\n                    const num2 = Utils.toNumber(value2);\n                    if (num1 !== null && num2 !== null) {\n                        cmp = num2 - num1;\n                    }\n                }\n            }\n            return cmp < 0 ? {range: {value1, value2}} : null;\n        };\n    }\n}\n","import {Component, Input} from \"@angular/core\";\nimport {SelectionService} from \"../../selection.service\";\nimport {Action} from '@sinequa/components/action';\n\n@Component({\n    selector: \"sq-results-selector\",\n    templateUrl: \"./results-selector.html\"\n})\nexport class BsResultsSelector {\n    @Input() size: string;\n    @Input() style: string;\n    @Input() rightAligned: boolean;\n\n    constructor(\n        public selectionService: SelectionService) {\n    }\n\n    public get actions(): Action[] {\n        return this.rightAligned? this.selectionService.selectionActions.slice().reverse() : this.selectionService.selectionActions;\n    }\n}\n","<div class=\"btn-group\" [sq-action-buttons]=\"{items: actions, size: size, style: style, rightAligned: rightAligned}\"></div>","export * from \"./action-buttons/action-buttons\";\nexport * from \"./action-item/action-item\";\nexport * from \"./action-item-content/action-item-content\";\nexport * from \"./action-menu/action-menu\";\nexport * from \"./dropdown-menu/dropdown-menu\";\nexport * from \"./dropdown.directive\";\nexport * from \"./dropdown.service\";\nexport * from \"./action.module\";","export default {\n    results: {\n        missingTerms: \"Missing terms:\",\n        resultsCount: \"{count, plural, =0 {no results} one {# result} other {# results}}\",\n    },\n    userRatings: {\n        average: \"Average: {average}\"\n    },\n};\n","import {Component, Input, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'sq-theme-toggle',\r\n  templateUrl: './theme-toggle.component.html',\r\n  styleUrls: ['./theme-toggle.component.scss']\r\n})\r\nexport class BsThemeToggleComponent implements OnInit {\r\n  @Input() showLabel = true;\r\n\r\n  labels = ['msg#theme.lightMode', 'msg#theme.darkMode'];\r\n  tooltips = ['msg#theme.darkModeTitle', 'msg#theme.lightModeTitle']\r\n  label: string = '';\r\n  tooltip: string;\r\n\r\n  theme: string = \"normal\"\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {\r\n    this.theme = localStorage.getItem('sinequa-theme') || 'normal'\r\n    this.label = this.theme === 'normal' ? this.labels[0] : this.labels[1];\r\n    this.tooltip = this.theme === 'normal' ? this.tooltips[0] : this.tooltips[1];\r\n  }\r\n\r\n  /**\r\n  * Whether the UI is in dark or light mode\r\n  */\r\n  isDark(): boolean {\r\n    return this.theme === \"dark\";\r\n  }\r\n\r\n  toggleTheme() {\r\n    let index = 0;\r\n    if (this.theme === 'normal') {\r\n      this.theme = 'dark';\r\n      index = 1;\r\n    } else {\r\n      this.theme = 'normal';\r\n    }\r\n    this.label = this.labels[index];\r\n    this.tooltip = this.tooltips[index];\r\n\r\n    localStorage.setItem('sinequa-theme', this.theme);\r\n    document.body.classList.toggle(\"dark\");\r\n    return false;\r\n  }\r\n}","<div class=\"d-flex align-items-center\">\r\n  <div *ngIf=\"showLabel\">{{ label | sqMessage }}</div>\r\n  <div class=\"oval\" [ngClass]=\"{ovalSelected: theme == 'dark'}\" (click)=\"toggleTheme()\" sqTooltip=\"{{ tooltip | sqMessage }}\">\r\n    <div class=\"buttonToggle\" [ngClass]=\"{buttonSelected: theme == 'dark'}\"></div>\r\n  </div>\r\n</div>","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable, of} from \"rxjs\";\nimport {map} from \"rxjs/operators\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Suggestion} from \"./suggest/suggestion\";\nimport {IQuery} from \"./query/query\";\n\n/**\n * A service for calling the suggestfield web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class SuggestFieldWebService extends HttpService {\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Gets suggestions for the passed text for a set of fields and in the context of the passed query\n     *\n     * @param text The text to match\n     * @param fields The fields for which to return suggestions\n     * @param query The query context\n     */\n    get(text: string, fields: string | string[], query?: IQuery): Observable<Suggestion[]> {\n        if (!fields) {\n            return of([]);\n        }\n        else {\n            if (!Utils.isArray(fields)) {\n                fields = [fields];\n            }\n            const observable = this.httpClient.post<{suggests: Suggestion[]}>(this.makeUrl(\"suggestfield\"), {\n                app: this.appName,\n                text: text,\n                fields: fields,\n                query: query\n            }).pipe(map((value) => {\n                value.suggests.forEach(value => value.display = Utils.toSqlValue(value.display)); // because dates get automatically converted by the interceptor\n                return value.suggests;\n            }));\n            return observable;\n        }\n    }\n}","import { Component, ElementRef, Output, EventEmitter, Input, ViewChild, OnChanges, AfterViewInit } from '@angular/core';\n\nimport * as d3 from 'd3';\n\nexport interface HeatmapItem {\n    x: string;\n    y: string;\n    count: number;\n    value: string;\n    display: string;\n    selected?: boolean;\n}\n\n@Component({\n    selector: \"sq-heatmap\",\n    templateUrl: \"./heatmap.component.html\",\n    styleUrls: ['./heatmap.component.scss']\n})\nexport class BsHeatmapComponent implements OnChanges, AfterViewInit {\n    /**\n     * Raw data to display (will be filtered in function of maxX and maxY parameters)\n     */\n    @Input() data: HeatmapItem[];\n\n    // Graphical parameters\n    @Input() height = 600;\n    @Input() width = 600;\n    @Input() margin = {top: 100, bottom: 20, left: 100, right: 40};\n    @Input() transition = 1000; // Transition time in ms (0 to avoid transitions)\n\n    // Interaction parameters\n    @Input() itemsClickable = true;\n    @Input() axisClickable = true;\n\n    // Axis/Scales parameters\n    @Input() buckets = 9; // Color buckets\n    @Input() colorScheme = \"schemeBlues\"; // Color scheme from D3\n    @Input() maxX = 20; // Max items on X\n    @Input() maxY = 20; // Max items on Y\n    @Input() theme: \"light\" | \"dark\" = \"light\";\n    \n    // Events from user interactions\n    @Output() itemClicked = new EventEmitter<HeatmapItem>();\n    @Output() axisClicked = new EventEmitter<{value: string, axis: 'x' | 'y'}>();\n\n    // D3 Scales\n    x: d3.ScaleBand<string>;\n    y: d3.ScaleBand<string>;\n    color: d3.ScaleQuantile<string>;\n\n    // Axes\n    @ViewChild(\"xAxis\") gx: ElementRef;\n    @ViewChild(\"yAxis\") gy: ElementRef;\n    xAxis: d3.Selection<SVGGElement, string, null, undefined>;\n    yAxis: d3.Selection<SVGGElement, string, null, undefined>;\n    \n    // Data actually displayed\n    dataFiltered: HeatmapItem[] = [];\n\n    // Tooltip    \n    tooltipItem?: HeatmapItem;\n    tooltipOrientation: \"left\" | \"right\";\n    tooltipTop: number;\n    tooltipRight: number;\n    tooltipLeft: number;\n\n    // Misc\n    viewInit: boolean;\n    originalCount: number;\n\n    constructor(\n        private el: ElementRef\n    ){}\n\n    /**\n     * ngOnChanges is used to respond to changes in the data (or chart parameter)\n     */\n    ngOnChanges() {\n\n        this.data = this.data || [];\n\n        // Pre-process data\n        const xLabels = Array.from(new Set(this.data.map(value => value.x))).slice(0, this.maxX);\n        const yLabels = Array.from(new Set(this.data.map(value => value.y))).slice(0, this.maxY);\n        this.dataFiltered = this.data.filter(value => xLabels.includes(value.x) && yLabels.includes(value.y));\n\n        // Create scales\n        this.x = d3.scaleBand<string>()\n            .domain(xLabels)\n            .range([0, this.width-this.margin.left-this.margin.right]);\n\n        this.y = d3.scaleBand<string>()\n            .domain(yLabels)\n            .range([0, this.height-this.margin.top-this.margin.bottom]);\n\n        this.color = d3.scaleQuantile<string>()\n            .domain(this.dataFiltered.map(item => item.count))\n            .range(d3[this.colorScheme][this.buckets]);\n\n        // Note: ngOnChanges is always called once, before ngAfterViewInit\n        if(this.viewInit) {\n            this.buildChart(!!this.transition);\n        }\n    }\n\n    // Note: In onAfterViewInit we can access gx and gy, obtained with @ViewChild.\n    // At this point we can call buildChart()\n    ngAfterViewInit(){\n        this.xAxis = d3.select(this.gx.nativeElement);\n        this.yAxis = d3.select(this.gy.nativeElement);\n        this.viewInit = true;\n\n        this.buildChart();\n    }\n    \n    /**\n     * buildChart() actually only builds the axes of the chart, since the\n     * rest is build automatically with Angular syntax in the template.\n     * We build axis programmatically (with D3 selects) to benefit from the\n     * D3 abstractions and transitions.\n     * @param update \n     */\n    buildChart(update?: boolean){\n                    \n        if(update){\n            const t = d3.transition().duration(this.transition) as d3.Transition<any, any, any, any>;\n    \n            this.xAxis.transition(t)\n                .call(d3.axisTop<string>(this.x).tickSize(0))\n                .on(\"end\", () => this.xAxis.selectAll<SVGTextElement, string>('text').each(this.wrap));\n\n            this.yAxis.transition(t)\n                .call(d3.axisLeft<string>(this.y).tickSize(0))\n                .on(\"end\", () => this.yAxis.selectAll<SVGTextElement, string>('text').each(this.wrap));\n            \n        }\n        else {\n            this.xAxis.call(d3.axisTop<string>(this.x).tickSize(0));\n            this.yAxis.call(d3.axisLeft<string>(this.y).tickSize(0));\n        }\n\n        this.xAxis.selectAll(\".domain\").remove(); // Remove the axis line\n        this.xAxis.selectAll<SVGTextElement, string>(\"text\")  // Tilt the text\n            .attr(\"transform\", \"rotate(-35)\")\n            .style(\"text-anchor\", \"start\")\n            .each(this.wrap)\n            .on(\"click\", d => this.onAxisClicked(d, 'x'));\n\n        this.yAxis.selectAll(\".domain\").remove(); // Remove the axis line\n        this.yAxis.selectAll<SVGTextElement, string>(\"text\")\n            .each(this.wrap)\n            .on(\"click\", d => this.onAxisClicked(d, 'y'));\n    }\n\n    /**\n     * Called when the user hovers the mouse over a heatmap tile\n     * @param item \n     * @param event \n     */\n    onMouseOver(item: HeatmapItem, event: MouseEvent){\n        this.tooltipItem = item;\n\n        const x = this.x(item.x) as number;\n        const y = this.y(item.y) as number;\n\n        // Since we use viewBox to auto-adjust the SVG to the container size, we have to\n        // convert from the SVG coordinate system to the HTML coordinate system\n        const actualWidth = (this.el.nativeElement as HTMLElement).offsetWidth;\n        const scale = actualWidth / this.width;\n        const relativeX = x / this.width;\n\n        // Tooltip to the right\n        if(relativeX < 0.5) {\n            this.tooltipOrientation = \"right\";\n            this.tooltipLeft = scale * (this.margin.left + x + this.x.bandwidth() - 3);\n        }\n        // Tooltip to the left\n        else {\n            this.tooltipOrientation = \"left\";\n            this.tooltipRight = actualWidth - scale * (this.margin.left + x + 3);\n        }\n        this.tooltipTop = scale * (this.margin.top + y + 0.5*this.y.bandwidth()); // Align tooltip arrow\n    }\n\n    /**\n     * Called when the user clicks on a heatmap tile\n     * @param item \n     */\n    onItemClicked(item: HeatmapItem){\n        if(this.itemsClickable){\n            this.itemClicked.next(item);\n        }\n    }\n\n    /**\n     * Called when the user clicks on an axis item\n     * @param value \n     * @param axis \n     */\n    onAxisClicked(value: string, axis: 'x' | 'y'){\n        if(this.axisClickable){\n            this.axisClicked.next({axis: axis, value: value});\n        }\n    }\n\n    /**\n     * Builds the list of legend items\n     */\n    getLegend() {\n        const legend: {x: number, width: number, color: string, start: number}[] = [];\n        const quantiles = this.color.quantiles();\n        const bucketWidth = (this.width - this.margin.left - this.margin.right) / this.buckets;\n        for(let i=0; i < this.buckets; i++){\n            const color = this.color(i===0? 0 : quantiles[i-1]);\n            if(i === 0 || color !== legend[legend.length-1].color){\n                legend.push({\n                    x: legend.length * bucketWidth,\n                    width: bucketWidth,\n                    color: color,\n                    start: i===0? 0 : quantiles[i-1]\n                });\n            }\n        }\n        return legend;\n    }\n\n    /**\n     * Truncates the axis strings to fit inside 90px width\n     */\n    wrap = (d: string, i: number, nodes: SVGTextElement[] | ArrayLike<SVGTextElement>) => {\n        const self = d3.select(nodes[i]);\n        let textLength = nodes[i].getComputedTextLength();\n        let text = self.text();\n        const fullText = self.text();\n        while (textLength > 90 && text.length > 0) {\n          text = text.slice(0, -1)\n          self.text(text + '...');\n          textLength = nodes[i].getComputedTextLength();\n        }\n        self.append('svg:title').text(fullText);\n    };\n}\n","<svg [attr.viewBox]=\"'0 0 '+width+' '+height\">\n\n    <!-- Legend -->\n    <g *ngIf=\"data.length\" [attr.transform]=\"'translate('+this.margin.left+', 10)'\" class=\"legend\">\n        <g *ngFor=\"let item of getLegend()\">\n            <rect [attr.x]=\"item.x\" [attr.width]=\"item.width\" height=\"15\" [attr.fill]=\"item.color\"></rect>\n            <line [attr.x1]=\"item.x\" [attr.x2]=\"item.x\" [attr.y2]=\"27\" stroke=\"lightgrey\"></line>\n            <text [attr.x]=\"item.x + 3\" y=\"27\">{{ item.start | number : '1.0-0'}}</text>\n        </g>\n    </g>\n\n    <g [attr.transform]=\"'translate('+this.margin.left+','+ margin.top +')'\">\n        <!-- X Axis (built in the controler) -->\n        <g #xAxis [ngClass]=\"{clickable: axisClickable}\" class=\"axis\"></g>\n\n        <!-- Y Axis (built in the controler) -->\n        <g #yAxis [ngClass]=\"{clickable: axisClickable}\" class=\"axis\"></g>\n\n        <!-- Heatmap tiles -->\n        <rect *ngFor=\"let item of dataFiltered\" class=\"tile\" \n            [ngClass]=\"{clickable: itemsClickable, selected: item.selected}\"\n            [attr.x]=\"x(item.x)\" \n            [attr.y]=\"y(item.y)\"\n            [attr.width]=\"x.bandwidth()\" \n            [attr.height]=\"y.bandwidth()\"\n            [attr.fill]=\"color(item.count)\"            \n            (mouseover)=\"onMouseOver(item, $event)\"\n            (mouseout)=\"tooltipItem = undefined\"\n            (click)=\"onItemClicked(item)\">\n        </rect>\n        \n    </g>\n    \n    <text class=\"bottom-legend\" [attr.transform]=\"'translate('+(width-margin.right)+', '+(height-5)+')'\">\n        {{'msg#heatmap.showing' | sqMessage:{values: {shown: dataFiltered.length, total: data.length} } }}\n    </text>\n\n</svg>\n\n<!-- Tooltip -->\n<sq-tooltip *ngIf=\"tooltipItem\" class=\"text-center\"\n    [orientation]=\"tooltipOrientation\" [left]=\"tooltipLeft\" [right]=\"tooltipRight\" [top]=\"tooltipTop\" [theme]=\"theme\">\n    <strong>{{tooltipItem.display || tooltipItem.value}}</strong>\n    <div>{{'msg#heatmap.tooltip' | sqMessage:{values: {count: tooltipItem.count} } }}</div>\n</sq-tooltip>\n","const NOTIFICATION_MODULE_PROVIDERS = [];\n\nexport {NOTIFICATION_MODULE_PROVIDERS};\n","import {Component, OnInit, OnDestroy, Inject} from \"@angular/core\";\nimport {FormBuilder, FormGroup, FormControl, Validators} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Basket} from \"../../baskets.service\";\n\n@Component({\n    selector: \"sq-edit-basket\",\n    templateUrl: \"./edit-basket.html\"\n})\nexport class BsEditBasket implements OnInit, OnDestroy {\n    nameControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n    buttons: ModalButton[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: Basket,\n        private formBuilder: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.nameControl = new FormControl(this.model.name, Validators.required);\n        this.form = this.formBuilder.group({\n            basketName: this.nameControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.model.name = this.nameControl.value;\n            }\n        );\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.form\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n}\n","<form name=\"editBasket\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#editBasket.title'\" [buttons]=\"buttons\">\n        <div class=\"form-group sq-form-group\">\n            <label for=\"basketName\">{{'msg#editBasket.name' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"basketName\" formControlName=\"basketName\" spellcheck=\"off\" sqAutofocus>\n        </div>\n    </sq-modal>\n</form>","import {Component, Input, OnChanges, SimpleChanges, ChangeDetectorRef, ChangeDetectionStrategy} from \"@angular/core\";\nimport {Results, TreeAggregation, AggregationItem, TreeAggregationNode} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {FacetService} from \"../../facet.service\";\nimport {Action} from \"@sinequa/components/action\";\nimport {AbstractFacet} from \"../../abstract-facet\";\nimport { FormControl, FormGroup } from \"@angular/forms\";\nimport { Observable, of, Subscription } from \"rxjs\";\nimport { catchError, debounceTime, distinctUntilChanged, map, switchMap } from \"rxjs/operators\";\n\n@Component({\n    selector: \"sq-facet-tree\",\n    templateUrl: \"./facet-tree.html\",\n    styleUrls: [\"./facet-tree.scss\"],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsFacetTree extends AbstractFacet implements OnChanges {\n    @Input() name: string; // If ommited, the aggregation name is used\n    @Input() results: Results;\n    @Input() aggregation: string;\n    @Input() showCount: boolean = true; // Show the number of occurrences\n    @Input() allowExclude: boolean = true; // Allow to exclude selected items\n    @Input() allowOr: boolean = true; // Allow to search various items in OR mode\n    @Input() searchable: boolean = true; // Allow to search for items in the facet\n    @Input() expandedLevel: number = 2;\n    @Input() forceMaxHeight: boolean = true; // Allow to display a scrollbar automatically on long list items\n    @Input() displayActions = false;\n\n    // Aggregation from the Results object\n    data: TreeAggregation | undefined;\n    originalItems: AggregationItem[] | undefined;\n    \n    private readonly subscriptions: Subscription[] = [];\n\n    // Sets to keep track of selected/excluded/filtered items\n    private readonly filtered = new Set<AggregationItem>();\n    \n    readonly selected = new Map<string,TreeAggregationNode>();\n\n    hiddenSelected: TreeAggregationNode[] = [];\n    // TODO keep track of excluded terms and display them with specific color private\n    // readonly filtered = new Set<AggregationItem>();\n\n    // Search\n    myGroup: FormGroup;\n    searchQuery: FormControl; // ngModel for textarea\n    suggestDelay = 200;\n    searchActive = false;\n    noResults = false;\n    \n    // Actions (displayed in facet menu)\n    // All actions are built in the constructor\n    private readonly filterItemsOr: Action;\n    private readonly excludeItems: Action;\n    private readonly clearFilters: Action;\n    public readonly searchItems: Action;\n\n\n    constructor(\n        private facetService: FacetService,\n        private changeDetectorRef: ChangeDetectorRef){\n            super();\n\n            this.myGroup = new FormGroup({\n                searchQuery: new FormControl()\n            });\n    \n            this.searchQuery = this.myGroup.get(\"searchQuery\") as FormControl;\n            this.subscriptions[\"suggest\"] = this.suggest$(this.searchQuery.valueChanges)\n                .subscribe(values => {\n                    if(this.data) {\n                        let items = this.searchQuery.value? values : this.originalItems;\n                        this.data = {\n                            column: this.data.column,\n                            name: this.data.name,\n                            isTree: true,\n                            items\n                        }\n                        // Refresh hiddenSelected list when the list of items is updated\n                        this.refreshHiddenSelected();\n                        this.searchActive = false;\n                        this.changeDetectorRef.markForCheck();\n                    }\n                });\n    \n            // Keep documents with ANY of the selected items\n            this.filterItemsOr = new Action({\n                icon: \"fas fa-filter\",\n                title: \"msg#facet.filterItems\",\n                action: () => {\n                    if (this.data) {\n                        this.facetService.addFilterSearch(this.getName(), this.data, this.getSelectedItems());\n                    }\n                }\n            });\n\n            // Exclude document with selected items\n            this.excludeItems = new Action({\n                icon: \"fas fa-times\",\n                title: \"msg#facet.excludeItems\",\n                action: () => {\n                    if (this.data) {\n                        this.facetService.addFilterSearch(this.getName(), this.data, this.getSelectedItems(), {not: true});\n                    }\n                }\n            });\n\n            // Clear the current filters\n            this.clearFilters = new Action({\n                icon: \"far fa-minus-square\",\n                title: \"msg#facet.clearSelects\",\n                action: () => {\n                    this.facetService.clearFiltersSearch(this.getName(), true);\n                }\n            });\n\n            // Search for a value in this list\n            this.searchItems = new Action({\n                icon: \"fas fa-search\",\n                title: \"msg#facet.searchItems\",\n                action: (item, event) => {\n                    item.selected = !item.selected;\n                    if(!item.selected){\n                        this.clearSearch();\n                    }\n                    event.stopPropagation();\n                    this.changeDetectorRef.markForCheck();\n                }\n            });\n    }\n\n    /**\n     * Name of the facet, used to create and retrieve selections\n     * through the facet service.\n     */\n    getName() : string {\n        return this.name || this.aggregation;\n    }\n\n    /**\n     * OnChanges listener awaits new results from the search service\n     * This completely resets the display\n     * @param changes\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.showCount === undefined) this.showCount = true;\n        if (this.searchable === undefined) this.searchable = true;\n        if (this.allowExclude === undefined) this.allowExclude = true;\n        if (this.allowOr === undefined) this.allowOr = true;\n\n        if (!!changes[\"results\"]) {     // New data from the search service\n            this.filtered.clear();\n            this.selected.clear();\n            this.hiddenSelected.length = 0;\n            this.data = this.facetService.getAggregation(this.aggregation, this.results, {\n                facetName: this.getName(),\n                levelCallback: this.initNodes\n            });\n            this.originalItems = this.data?.items;\n            this.searchItems.selected = false;\n            this.clearSearch();\n        }\n    }\n\n    // For each new node, set up properties necessary for display\n    // This callback could also be used to filter or sorts nodes, etc.\n    @Input()\n    initNodes = (nodes: TreeAggregationNode[], level: number, node: TreeAggregationNode) => {\n        if(node.$filtered){\n            this.filtered.add(node);\n        }\n        if(node.hasChildren && !node.$opened && node.items && node.items.length >= 0 && level <= this.expandedLevel){\n            node.$opened = true;\n        }\n    }\n\n    /**\n     * Returns all the actions that are relevant in the current context\n     */\n    get actions(): Action[] {\n\n        const actions: Action[] = [];\n\n        if(this.selected.size > 0) {\n            if(this.allowOr){\n                actions.push(this.filterItemsOr);\n            }\n            if(this.allowExclude){\n                actions.push(this.excludeItems);\n            }\n        }\n\n        if(this.hasFiltered()) {\n            actions.push(this.clearFilters);\n        }\n        \n        if(this.searchable){\n            actions.push(this.searchItems);\n        }\n\n        return actions;\n    }\n\n\n    // Filtered items\n\n    /**\n     * Returns true if the given AggregationItem is filtered\n     * @param item\n     */\n    isFiltered(item: AggregationItem) : boolean {\n        return this.filtered.has(item);\n    }\n\n    /**\n     * Returns true if there is an active selection (or exclusion) from this facet\n     */\n    hasFiltered(): boolean {\n        return this.facetService.hasFiltered(this.getName());\n    }\n\n    /**\n     * Called when clicking on a facet item text\n     * @param item\n     * @param event\n     */\n    filterItem(item: AggregationItem, event) : boolean {\n        if (this.data) {\n            if(!this.isFiltered(item)) {\n                this.facetService.addFilterSearch(this.getName(), this.data, item);\n            }\n            else {\n                this.facetService.removeFilterSearch(this.getName(), this.data, item);\n            }\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        return false;   // Stop the propagation of the event (link inside link)\n    }\n\n\n    // Selected items\n\n    /**\n     * Returns true if the given AggregationItem is selected\n     * @param item\n     */\n    isSelected(item: TreeAggregationNode) : boolean {\n        return this.selected.has(item.$path!);\n    }\n\n    /**\n     * Returns all the selected items\n     */\n    getSelectedItems(): TreeAggregationNode[] {\n        return Array.from(this.selected.values());\n    }\n\n    /**\n     * Called when selecting/unselecting an item in the facet\n     * @param item\n     */\n    selectItem(item: TreeAggregationNode) : boolean {\n        if(!this.isFiltered(item)){\n            if(this.selected.has(item.$path!)) {\n                this.selected.delete(item.$path!);\n            }\n            else {\n                this.selected.set(item.$path!, item);\n            }\n            this.refreshHiddenSelected();\n        }\n        return false;\n    }\n\n    refreshHiddenSelected() {\n        this.hiddenSelected = this.getSelectedItems()\n            .filter(item => !this.find(this.data?.items as TreeAggregationNode[], item));\n    }\n\n    find(items: TreeAggregationNode[] | undefined, item: TreeAggregationNode) {\n        if(items) {\n            for(let i of items) {\n                if(i.$path === item.$path || (i.$opened && this.find(i.items, item))) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Expand/Collapse a Tree node (the data may need to downloaded from the server)\n     * @param item\n     */\n    open(item: TreeAggregationNode, event: Event){\n        if (item.hasChildren) {\n            item.$opened = !item.$opened;\n            if (!item.items || item.items.length === 0) {\n                item['$opening'] = true;\n                if (this.data) {\n                    Utils.subscribe(this.facetService.open(this.getName(), this.data, item, this.initNodes),\n                        (results) => {\n                            item['$opening']= false;\n                            this.refreshHiddenSelected();\n                            this.changeDetectorRef.markForCheck();\n                        });\n                }\n            }\n            this.refreshHiddenSelected();\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        return false; // Prevent default action\n    }\n\n    /* AbstractFacet abstract methods */\n    isHidden(): boolean {\n        return !this.data;\n    }\n\n\n    // Search    \n\n    clearSearch() {\n        this.searchQuery.setValue(\"\"); // Remove suggestions if some remain\n        this.noResults = false;\n    }\n    \n    /**\n     * Called on NgModel change (searchQuery)\n     * Uses the suggestfield API to retrieve suggestions from the server\n     * The suggestions \"override\" the data from the distribution (until search results are cleared)\n     */\n    suggest$ = (text$: Observable<string>) => text$.pipe(\n        debounceTime(this.suggestDelay),\n        distinctUntilChanged(),\n        switchMap(term => {\n            if (term.trim() === \"\") {\n                this.noResults = false;\n                return of([]);\n            }\n            this.changeDetectorRef.markForCheck();\n            this.searchActive = true;\n            return this.facetService.suggest(term, this.data?.column || '').pipe(\n                catchError(err => {\n                    console.log(err);\n                    this.noResults = false;\n                    return of([]);\n                }),\n                map(suggests => {\n                    const items = this.facetService.suggestionsToTreeAggregationNodes(suggests, term, this.data);\n                    this.noResults = items.length === 0 && term.trim() !== \"\";\n                    return items;\n                })\n            )\n        })\n    )\n\n    ngOnDestroy() {\n        this.subscriptions.forEach(subscription => subscription.unsubscribe());\n    }\n\n}","<div *ngIf=\"!isHidden()\" class=\"list-group list-group-flush\" [ngClass]=\"{'scrollable': forceMaxHeight }\">\n    <div *ngIf=\"displayActions && actions\" class=\"d-flex pb-2 pr-2\">\n        <div class=\"btn-group ml-auto\"\n            [sq-action-buttons]=\"{items: actions, size: 'sm'}\">\n        </div>\n    </div>\n    \n    <div *ngIf=\"searchItems.selected\" class=\"position-relative\" [formGroup]=\"myGroup\">\n        <div class=\"p-1\">\n            <input class=\"form-control\" sqAutofocus\n                formControlName=\"searchQuery\"\n                [placeholder]=\"'msg#facet.searchPlaceholder' | sqMessage\">\n        </div>\n        <sq-loading-bar [active]=\"searchActive\"></sq-loading-bar>\n    </div>\n    \n    <!-- hidden selected items -->\n    <div *ngFor=\"let item of hiddenSelected\"\n        class=\"d-flex flex-row align-items-center list-group-item list-group-item-primary border-0 px-3 py-1 facet-row cursor-pointer\"\n        [title]=\"'msg#facet.itemUnselect' | sqMessage\"\n        (click)=\"selectItem(item)\">\n\n        <a href=\"#\" (click)=\"filterItem(item, $event)\"\n            [title]=\"'msg#facet.filterItem' | sqMessage:{'terme':(item.$path | slice:1:-1)}\"\n            class=\"text-truncate mr-auto\">{{item.$path | slice:1:-1}}</a>\n        \n        <span *ngIf=\"showCount && item.count\" class=\"ml-2 text-muted small\">{{item.count | sqNumber}}</span>\n    </div>\n\n    <span *ngIf=\"noResults\" class=\"d-block text-center text-muted small py-1\"><i>{{'msg#facet.searchNoResult' | sqMessage}}</i></span>\n\n    <ng-container *ngTemplateOutlet=\"itemsTpl; context:data\"></ng-container>\n\n</div>\n\n<ng-template #itemsTpl let-items=\"items\">\n    <ng-container *ngFor=\"let item of items\">\n\n        <a  class=\"d-flex flex-row align-items-center list-group-item border-0 pl-1 pr-3 py-1\"\n            [ngClass]=\"{'list-group-item-primary':isSelected(item),'list-group-item-success':isFiltered(item),'list-group-item-action':!isFiltered(item), 'filtered':isFiltered(item) }\" \n            [title]=\"(isFiltered(item)? 'msg#facet.selectedValue' : 'msg#facet.itemSelect') | sqMessage\" \n            (click)=\"selectItem(item)\" href=\"#\">\n    \n            <span class=\"mr-auto text-truncate\" [ngStyle]=\"{'margin-left.rem' : item['$level'] - 1}\">\n\n                <a *ngIf=\"item['hasChildren']\" class=\"item-opener\" href=\"#\" (click)=\"open(item, $event)\" [title]=\"(item['$opened'] ? 'msg#facet.closeItem' : 'msg#facet.openItem') | sqMessage\">\n                    <span *ngIf=\"item['$opening']\" class=\"fas fa-sync fa-fw fa-spin\"></span>\n                    <span *ngIf=\"!item['$opening'] && item['$opened']\" class=\"fas fa-caret-down fa-fw\"></span>\n                    <span *ngIf=\"!item['$opening'] && !item['$opened']\" class=\"fas fa-caret-right fa-fw\"></span>\n                </a>\n                <span *ngIf=\"!item['hasChildren']\" class=\"fas fa-fw\"></span>\n    \n                <a  href=\"#\" (click)=\"filterItem(item, $event)\" \n                    role=\"button\" [title]=\"item | sqValue:item.$column\"\n                    class=\"text-truncate\"> {{item | sqValue:item.$column}}</a>\n\n            </span>\n            \n            <i class=\"ml-2 far fa-check-square\" *ngIf=\"isFiltered(item)\"></i>\n\n            <span *ngIf=\"showCount && item.count\" class=\"ml-2 text-muted small\">{{item.count | sqNumber}}</span>\n    \n        </a>\n\n        <ng-container *ngIf=\"item['$opened']\">\n\n            <ng-container *ngTemplateOutlet=\"itemsTpl; context:item\"></ng-container>\n\n        </ng-container>\n\n    </ng-container>\n\n</ng-template>\n","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\": \"Sende Rückmeldung an den Sinequa-Admin\",\n        \"content\": {\n          \"text\": \"Inhalt\",\n          \"title\": \"Vorschlag zum Hinzufügen neuer Inhalte oder zur Verbesserung vorhandener Inhalte\"\n        },\n        \"ui\": {\n          \"text\": \"Benutzeroberfläche\",\n          \"title\": \"Schlage Verbesserungen für die Benutzeroberfläche vor\"\n        },\n        \"lang\": {\n          \"text\": \"Sprache\",\n          \"title\": \"Schlage Verbesserungen für die Sprachverarbeitung vor wie neue Worte oder Synonyme, die zu den Wörterbüchern hinzugefügt werden sollen (dies hat direkte Auswirkungen auf die Relevanzberechnung der Suchmaschine)\"\n        },\n        \"other\": {\n          \"text\": \"Andere\",\n          \"title\": \"Reichen Sie einen Vorschlag für eine zusätzliche Funktion oder andere Verbesserungvorschläge ein\"\n        },\n        \"thankyou\": \"Vielen Dank für Ihre Rückmeldung!\",\n        \"quality\": {\n          \"label\": \"Qualität des Dokuments:\"\n        },\n        \"relevance\": {\n          \"label\": \"Relevanz des Dokuments:\"\n        },\n        \"labels\" : {\n            \"public\": {\n              \"label\": \"Etiketten:\"\n            },\n            \"private\": {\n              \"label\": \"Private Etiketten:\"\n            }\n        }\n    }\n};\n","export * from \"./theme-toggle.component\";\nexport * from \"./messages\";\nexport * from \"./theme-toggle.module\";","import {Injectable, OnDestroy} from \"@angular/core\";\r\nimport {IntlService} from \"@sinequa/core/intl\";\r\nimport {NotificationsService} from \"@sinequa/core/notification\";\r\nimport {Subject} from \"rxjs\";\r\n\r\n// eslint-disable-next-line no-var\r\ndeclare var webkitSpeechRecognition: any;\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class VoiceRecognitionService implements OnDestroy {\r\n  recognition;\r\n  recognizing = false;\r\n  ignore_onend = false;\r\n  start_timestamp;\r\n\r\n  text = new Subject<string>();\r\n  started = new Subject<boolean>();\r\n  available = false;\r\n\r\n  constructor(\r\n    private intlService: IntlService,\r\n    private notify: NotificationsService\r\n  ) {}\r\n\r\n  init() {\r\n    this.intlService.events.subscribe(() => {\r\n      this.recognition.lang = this.intlService.currentLocale.data?.intl.locale;\r\n    }\r\n    );\r\n\r\n    try {\r\n      this.recognition = new webkitSpeechRecognition();\r\n      this.recognition.continuous = false;\r\n      this.recognition.interimResults = true;\r\n      this.recognition.lang = this.intlService.currentLocale.data?.intl.locale;\r\n\r\n      this.recognition.addEventListener(\"error\", this.onError);\r\n      this.recognition.addEventListener(\"result\", this.onResult);\r\n      this.recognition.addEventListener(\"start\", this.onStart);\r\n      this.recognition.addEventListener(\"end\", this.onEnd);\r\n      this.available = true;\r\n    } catch (error) {\r\n      this.available = false;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.recognition.removeEventListener(\"error\", this.onError);\r\n    this.recognition.removeEventListener(\"result\", this.onResult);\r\n    this.recognition.removeEventListener(\"start\", this.onStart);\r\n    this.recognition.removeEventListener(\"end\", this.onEnd);\r\n  }\r\n\r\n  start() {\r\n    if (this.recognizing) {\r\n      this.stop();\r\n      return;\r\n    }\r\n\r\n    this.text.next(\"\");\r\n    this.started.next(true);\r\n    this.recognition.start();\r\n  }\r\n\r\n  stop() {\r\n    this.recognition.stop();\r\n    this.started.next(false);\r\n  }\r\n\r\n  toggleRecognition() {\r\n    if (this.recognizing) {\r\n      this.stop();\r\n    } else {\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  private onResult = e => {\r\n    const transcript = Array.from(e.results)\r\n      .map((result: any) => result[0])\r\n      .map(result => result.transcript)\r\n      .join(\"\");\r\n\r\n    this.text.next(transcript);\r\n  };\r\n\r\n  private onStart = event => {\r\n    this.recognizing = true;\r\n    this.start_timestamp = event.timeStamp;\r\n  };\r\n\r\n  private onEnd = () => {\r\n    if (this.ignore_onend) {\r\n      return;\r\n    }\r\n    this.recognizing = false;\r\n    this.started.next(false);\r\n  };\r\n\r\n  private onError = event => {\r\n    let message: string = event.error;\r\n    switch (event.error) {\r\n      case \"no-speech\": {\r\n        message = \"No speech was detected.\";\r\n        break;\r\n      }\r\n      case \"audio-capture\": {\r\n        message = \"Audio capture failed.\";\r\n        break;\r\n      }\r\n      case \"not-allowed\": {\r\n        if (event.timeStamp - this.start_timestamp < 100) {\r\n          message = \"info_blocked\";\r\n        } else {\r\n          message = \"The user agent is not allowing any speech input to occur for reasons of security, privacy or user preference.\";\r\n        }\r\n        break;\r\n      }\r\n      case \"aborted\": {\r\n        message = \"Speech input was aborted somehow, maybe by some user-agent-specific behavior such as UI that lets the user cancel speech input.\"\r\n        break;\r\n      };\r\n      case \"network\": {\r\n        message = \"Some network communication that was required to complete the recognition failed.\";\r\n        break;\r\n      }\r\n      case \"service-not-allowed\": {\r\n        message = \"The user agent is not allowing the web application requested speech service, but would allow some speech service, to be used either because the user agent doesn’t support the selected one or because of reasons of security, privacy or user preference.\";\r\n        break;\r\n      }\r\n      case \"bad-grammar\": {\r\n        message = \"There was an error in the speech recognition grammar or semantic tags, or the grammar format or semantic tag format is unsupported.\";\r\n        break;\r\n      }\r\n      case \"language-not-supported\": {\r\n        message = `The language [${this.recognition.lang}] was not supported.`;\r\n        this.recognition.lang = \"en-US\";\r\n        break;\r\n      }\r\n    }\r\n    this.notify.warning(message);\r\n    this.ignore_onend = true;\r\n    this.started.next(false);\r\n  };\r\n}\r\n\r\nexport module VoiceRecognitionService {}","import {NgModule} from \"@angular/core\";\nimport {Collapse} from \"./collapse.component\";\nimport {CollapseButton} from \"./collapse-button.component\";\nimport {CollapseLink} from \"./collapse-link.component\";\nimport {CommonModule} from \"@angular/common\";\nimport {IntlModule} from \"@sinequa/core/intl\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule\n    ],\n    declarations: [\n        Collapse, CollapseButton, CollapseLink\n    ],\n    exports: [\n        Collapse, CollapseButton, CollapseLink\n    ],\n})\nexport class CollapseModule {\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { HttpResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { SqHttpClient } from \"./http-client\";\nimport { HttpService } from './http.service';\nimport {Utils} from \"@sinequa/core/base\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport { ExportOutputFormat, ExportSourceType } from './config/ccapp';\nimport { IQuery } from './query/query';\nimport { Results } from \"./query.web.service\";\nimport { AuditEventType } from './audit.web.service';\n\n/**\n * A service to export the result of a query.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class QueryExportWebService extends HttpService {\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    private logErrorToConsole(methodName: string, errorMessage: string): void {\n        console.log(`queryExportService.${methodName} ${errorMessage}.`);\n    }\n\n    private preliminaryCheck(\n        methodName: string,\n        webService: string,\n        format: ExportOutputFormat): Observable<HttpResponse<Blob>> | undefined {\n\n        if (!this.appName) {\n            const errorMessage = 'No app';\n            this.logErrorToConsole(methodName, errorMessage);\n            return throwError({ error: errorMessage});\n        }\n\n        if (!webService) {\n            const errorMessage = 'No web service';\n            this.logErrorToConsole(methodName, errorMessage);\n            return throwError({ error: errorMessage});\n        }\n\n        if (!format || format as ExportOutputFormat === ExportOutputFormat.None) {\n            const errorMessage = 'No output format';\n            this.logErrorToConsole(methodName, errorMessage);\n            return throwError({ error: errorMessage});\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Exports the current result.\n     *\n     * @param webService The configuration for the export web service.\n     * @param query The query to export.\n     * @param format The export format.\n     * @param maxCount (Optional) The maximum number of exported rows.\n     * @param exportedColumns (Optional) The columns to export, empty means all columns.\n     */\n    public exportResult(\n        webService: string,\n        query: IQuery,\n        results: Results | undefined,\n        format: ExportOutputFormat,\n        maxCount?: number,\n        exportedColumns?: string[]\n    ): Observable<HttpResponse<Blob>> {\n\n        const methodName = 'exportResult';\n        const preliminaryCheckResult = this.preliminaryCheck(methodName, webService, format);\n        if (preliminaryCheckResult) {\n            return preliminaryCheckResult;\n        }\n\n        if (!query) {\n            const errorMessage = 'No query';\n            this.logErrorToConsole(methodName, errorMessage);\n            return throwError({ error: errorMessage});\n        }\n\n        const postData = {\n            app: this.appName,\n            webService,\n            query,\n            type: ExportSourceType[ExportSourceType.Result],\n            format: ExportOutputFormat[format],\n            maxCount: maxCount ? maxCount.toString() : undefined,\n            exportedColumns: exportedColumns,\n            $auditRecord: {\n                type: AuditEventType.Search_ExportCSV,\n                detail: {\n                    \"result-id\": !!results ? results.id : undefined\n                }\n            }\n        };\n\n        return this.doExport(postData);\n    }\n\n    /**\n     * Exports the current selected records.\n     *\n     * @param webService The configuration for the export web service.\n     * @param query\n     * @param selection\n     * @param format The export format.\n     * @param maxCount (Optional) The maximum number of exported rows.\n     * @param exportedColumns (Optional) The columns to export, empty means all columns.\n     */\n    public exportSelection(\n        webService: string,\n        query: IQuery,\n        results: Results | undefined,\n        selection: string[],\n        format: ExportOutputFormat,\n        maxCount?: number,\n        exportedColumns?: string[]\n    ): Observable<HttpResponse<Blob>> {\n\n        const methodName = 'exportSelection';\n        const preliminaryCheckResult = this.preliminaryCheck(methodName, webService, format);\n        if (preliminaryCheckResult) {\n            return preliminaryCheckResult;\n        }\n\n        if (!query) {\n            const errorMessage = 'No query';\n            this.logErrorToConsole(methodName, errorMessage);\n            return throwError({ error: errorMessage});\n        }\n\n        if (!selection || selection.length === 0) {\n            const errorMessage = 'No selection';\n            this.logErrorToConsole(methodName, errorMessage);\n            return throwError({ error: errorMessage});\n        }\n\n        const postData = {\n            app: this.appName,\n            webService,\n            query,\n            selection,\n            type: ExportSourceType[ExportSourceType.Selection],\n            format: ExportOutputFormat[format],\n            maxCount: maxCount ? maxCount.toString() : undefined,\n            exportedColumns: exportedColumns,\n            $auditRecord: {\n                type: AuditEventType.Search_Selection_ExportCSV,\n                detail: {\n                    \"result-id\": !!results ? results.id : undefined\n                }\n            }\n        };\n\n        return this.doExport(postData);\n    }\n\n    /**\n     * Exports the result of a saved query.\n     *\n     * @param webService The configuration for the export web service.\n     * @param queryName The query name.\n     * @param format The export format.\n     * @param maxCount (Optional) The maximum number of exported rows.\n     * @param exportedColumns (Optional) The columns to export, empty means all columns.\n     */\n    public exportSavedQuery(\n        webService: string,\n        queryName: string,\n        format: ExportOutputFormat,\n        maxCount?: number,\n        exportedColumns?: string[]\n    ): Observable<HttpResponse<Blob>> {\n\n        const methodName = 'exportSavedQuery';\n        const preliminaryCheckResult = this.preliminaryCheck(methodName, webService, format);\n        if (preliminaryCheckResult) {\n            return preliminaryCheckResult;\n        }\n\n        if (!queryName) {\n            const errorMessage = 'No saved query';\n            this.logErrorToConsole(methodName, errorMessage);\n            return throwError({ error: errorMessage});\n        }\n\n        const postData = {\n            app: this.appName,\n            webService,\n            type: ExportSourceType[ExportSourceType.SavedQuery],\n            format: ExportOutputFormat[format],\n            name: queryName,\n            maxCount: maxCount ? maxCount.toString() : undefined,\n            exportedColumns: exportedColumns,\n            $auditRecord: {\n                type: AuditEventType.Search_SavedQuery_ExportCSV,\n                detail: {\n                    query: queryName\n                }\n            }\n        };\n\n        return this.doExport(postData);\n    }\n\n    private doExport(body: {}): Observable<HttpResponse<Blob>> {\n        const observable = this.httpClient.post(\n            this.makeUrl('query.export'),\n            body,\n            {\n                observe: 'response',\n                responseType: 'blob'\n            }\n        );\n\n        Utils.subscribe(\n            observable,\n            (response: HttpResponse<Blob>) => {\n                console.log('queryExportService.export success: ', this.readBlobFileName(response));\n                return response;\n            },\n            (error) => {\n                console.log('queryExportService.export failure - error: ', error);\n            });\n\n        return observable;\n    }\n\n    private readBlobFileName(response: HttpResponse<Blob>): string {\n        const header = response.headers.get('content-disposition');\n        return header ? header.split('filename=')[1].replace('\"', '').replace('\"', '') : \"\";\n    }\n}\n","export default {\n    \"alerts\": {\n        \"alerts\": \"Alertes\",\n        \"createAlert\": \"Créer une alerte\",\n        \"manageAlerts\": \"Gérer les alertes\",\n        \"alertAlreadyExists\": \"Une alerte avec ce nom existe déjà. Voulez-vous la remplacer ?\"\n    },\n\n    \"editAlert\": {\n        \"title\": \"Alerte\",\n        \"name\": \"Nom\",\n        \"frequency\": \"Fréquence\",\n        \"days\": \"Jours\",\n        \"monday\": \"lundi\",\n        \"tuesday\": \"mardi\",\n        \"wednesday\": \"mercredi\",\n        \"thursday\": \"jeudi\",\n        \"friday\": \"vendredi\",\n        \"saturday\": \"samedi\",\n        \"sunday\": \"dimanche\",\n        \"times\": \"Horaires\",\n        \"active\": \"Active\",\n        \"updateQuery\": \"Mettre à jour la requête\",\n        \"runQuery\": \"Exécuter la requête\",\n        \"lossDataMessage\": \"Voulez-vous quitter sans sauvegarder vos modifications ?\"\n    },\n\n    \"manageAlerts\": {\n        \"title\": \"Gérer les alertes\",\n        \"edit\": \"Editer\",\n        \"reorder\": \"Réorganiser\",\n        \"remove\": \"Effacer\",\n        \"removeAll\": \"Effacer tout\"\n    },\n\n};\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { RecentDocumentsService, RecentDocument } from '../../recent-documents.service';\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\nimport { SearchService } from '@sinequa/components/search';\n\n@Component({\n  selector: 'sq-facet-recent-documents',\n  templateUrl: './facet-recent-documents.html',\n  styles: [`\n.recent-document-item .document-delete{\n    opacity: 0;\n}\n\n.recent-document-item:hover .document-delete{\n    opacity: 1;\n    transition: opacity 0.2s ease-in-out;\n}\n  `]\n})\nexport class BsFacetRecentDocuments extends AbstractFacet  {\n    @Input() searchRoute: string = \"/preview\";\n    @Input() maxDocuments: number = 5;\n    @Input() enableDelete: boolean = true;\n    @Input() openOriginal: boolean = false;\n    @Output() documentOpened = new EventEmitter<RecentDocument>();\n\n    page: number = 0;\n\n    previousPage: Action;\n    nextPage: Action;\n\n    constructor(\n        public recentDocumentsService: RecentDocumentsService,\n        public searchService: SearchService) {\n        super();\n\n        this.previousPage = new Action({\n            icon: \"fas fa-chevron-left\",\n            title: \"msg#facet.previous\",\n            action: () => {\n                this.page--;\n            },\n            updater: (action: Action) => {\n                action.disabled = this.page <= 0;\n                action.hidden = this.maxPage === 0;\n            }\n        });\n        this.nextPage = new Action({\n            icon: \"fas fa-chevron-right\",\n            title: \"msg#facet.next\",\n            action: () => {\n                this.page++;\n            },\n            updater: (action: Action) => {\n                action.disabled = this.page >= this.maxPage;\n                action.hidden = this.maxPage === 0;\n            }\n        });\n    }\n\n    get maxPage(): number {\n        return Math.max(0, Math.ceil(this.recentDocumentsService.recentdocuments.length / this.maxDocuments) - 1);\n    }\n\n    get startIndex(): number {\n        return this.page * this.maxDocuments;\n    }\n\n    get endIndex(): number {\n        return (this.page+1) * this.maxDocuments;\n    }\n\n    get actions(): Action[] {\n        this.previousPage.update();\n        this.nextPage.update();\n        return [this.previousPage, this.nextPage];\n    }\n\n    openRecentDocument(document: RecentDocument) {\n        if(this.openOriginal && !!document.url1){\n            this.searchService.notifyOpenOriginalDocument(<any> document);\n        }\n        this.documentOpened.emit(document); // Can be use to trigger actions, like the preview\n        return true;\n    }\n\n    deleteDocument(document: RecentDocument, event: Event){\n        this.recentDocumentsService.deleteRecentDocument(document);\n        this.page = Math.min(this.page, this.maxPage);\n        return false;\n    }\n\n    getQueryParams(document: RecentDocument) {\n        return {\n            id: document.id,\n            query: this.searchService.makeQuery().toJsonForQueryString()\n        };\n    }\n}\n","<div class=\"list-group list-group-flush\">\n    <ng-container *ngFor=\"let document of recentDocumentsService.recentdocuments | slice:startIndex:endIndex\">\n        <a *ngIf=\"openOriginal && document.url1; else internalLink\"\n            class=\"recent-document-item list-group-item list-group-item-action d-flex align-items-center\"\n            [attr.href]=\"document.url1\" target=\"_blank\" rel=\"noopener\"\n            (click)=\"openRecentDocument(document)\">\n            <span class=\"document-text mr-auto text-truncate\" title=\"{{ document.title }}\">{{ document.title }}</span>\n            <span *ngIf=\"document.date\" class=\"document-date ml-2 text-muted small text-right\">{{ document.date | sqDate }}</span>\n            <i *ngIf=\"enableDelete\" class=\"document-delete ml-2 fas fa-times\" [title]=\"'msg#recentDocuments.delete' | sqMessage\" (click)=\"deleteDocument(document, $event)\"></i>\n        </a>\n        <ng-template #internalLink>\n        <a class=\"recent-document-item list-group-item list-group-item-action d-flex align-items-center\"\n            [routerLink]=\"searchRoute\" [queryParams]=\"getQueryParams(document)\"\n            (click)=\"openRecentDocument(document)\">\n            <span class=\"document-text mr-auto text-truncate\" title=\"{{ document.title }}\">{{ document.title }}</span>\n            <span *ngIf=\"document.date\" class=\"document-date ml-2 text-muted small text-right\">{{ document.date | sqDate }}</span>\n            <i *ngIf=\"enableDelete\" class=\"document-delete ml-2 fas fa-times\" [title]=\"'msg#recentDocuments.delete' | sqMessage\" (click)=\"deleteDocument(document, $event)\"></i>\n        </a>\n        </ng-template>\n    </ng-container>\n    <div *ngIf=\"recentDocumentsService.recentdocuments.length == 0\" class=\"list-group-item text-center text-muted font-italic small py-5\">\n        {{ 'msg#recentDocuments.noRecentDocument' | sqMessage }}\n    </div>\n</div>","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {A11yModule} from \"@angular/cdk/a11y\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\n// Formatting pipes\nimport {DatePipe} from \"./pipes/date-pipe\";\nimport {ExprPipe} from \"./pipes/expr-pipe\";\nimport {MemorySizePipe} from \"./pipes/memory-size-pipe\";\nimport {MomentPipe} from \"./pipes/moment-pipe\";\nimport {NumberPipe} from \"./pipes/number-pipe\";\nimport {RelativeTimePipe} from \"./pipes/relative-time-pipe\";\nimport {TimePipe} from \"./pipes/time-pipe\";\nimport {ValuePipe} from \"./pipes/value-pipe\";\n\n// UI Directives\nimport {Autofocus} from \"./directives/autofocus\";\nimport {ClickOutside} from \"./directives/click-outside\";\nimport {MediaIf} from \"./directives/media-if\";\nimport {ScrollIntoView} from \"./directives/scroll-into-view\";\nimport {FocusKeyListDirective} from \"./directives/focus-key-list.directive\";\nimport {FocusKeyListItemDirective} from \"./directives/focus-key-list-item.directive\";\nimport {ResizeEventDirective} from \"./directives/resize-event.directive\";\nimport {StickyComponent} from \"./directives/sticky\";\nimport {TooltipComponent} from \"./directives/tooltip/tooltip.component\";\nimport {TooltipDirective} from \"./directives/tooltip/tooltip.directive\";\n\n// UI Service\nimport {SCREEN_SIZE_RULES} from \"./ui.service\";\n\nexport const defaultScreenSizeRules = {\n    xxl: \"(min-width: 1920px)\",\n    xl: \"(min-width: 1200px) and (max-width: 1919.98px)\",\n    lg: \"(min-width: 992px) and (max-width: 1199.98px)\",\n    md: \"(min-width: 768px) and (max-width: 991.98px)\",\n    sm: \"(min-width: 576px) and (max-width: 767.98px)\",\n    xs: \"(max-width: 575.98px)\",\n};\n\n@NgModule({\n    imports: [\n        CommonModule,\n        A11yModule,\n        IntlModule\n    ],\n    declarations: [\n        DatePipe, ExprPipe, MemorySizePipe, MomentPipe, NumberPipe, RelativeTimePipe, TimePipe, ValuePipe,\n        Autofocus, ClickOutside, MediaIf, ScrollIntoView, FocusKeyListDirective, FocusKeyListItemDirective, \n        ResizeEventDirective, StickyComponent, TooltipComponent, TooltipDirective\n    ],\n    exports: [\n        DatePipe, ExprPipe, MemorySizePipe, MomentPipe, NumberPipe, RelativeTimePipe, TimePipe, ValuePipe,\n        Autofocus, ClickOutside, MediaIf, ScrollIntoView, FocusKeyListDirective, FocusKeyListItemDirective,\n        ResizeEventDirective, StickyComponent, TooltipComponent, TooltipDirective\n    ],\n    providers: [\n        {\n            provide: SCREEN_SIZE_RULES,\n            useValue: defaultScreenSizeRules\n        }\n    ]\n})\nexport class UtilsModule {\n}\n","import {Injectable, Inject, OnDestroy, Type, InjectionToken, Optional} from \"@angular/core\";\nimport {HttpErrorResponse} from \"@angular/common/http\";\nimport {Router} from \"@angular/router\";\nimport {BehaviorSubject, Observable, forkJoin, of, throwError} from \"rxjs\";\nimport {flatMap} from \"rxjs/operators\";\nimport {Utils, SqError, SqErrorCode} from \"@sinequa/core/base\";\nimport {START_CONFIG, StartConfig, CCApp, PrincipalWebService, Principal,\n    UserSettingsWebService, UserSettings} from \"@sinequa/core/web-services\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {AuthenticationService, ProcessedCredentials, Credentials, UserOverride} from \"./authentication.service\";\n\n/**\n * Describes the different session events that are emitted by the {@link LoginService}\n * * `session-start`: emitted after successful login\n * * `session-end`: emitted after logout and also when the {@link LoginService} is destroyed\n * * `session-changed`: emitted whenever the login state changes - login, logout and user override\n */\nexport interface SessionEvent {\n    type: \"session-start\" | \"session-end\" | \"session-changed\";\n}\n\n\n/**\n * An `InjectionToken` to set the component to use for the login modal dialog which is displayed\n * by the {@link LoginService} when performing a manual login. This makes the service independent\n * of any particular UI framework. If manual login is to be used a component must be configured by\n * providing this token.\n */\nexport const MODAL_LOGIN = new InjectionToken<Type<any>>('MODAL_LOGIN');\n\n/**\n * Describes the data retrieved during the login process.\n */\nexport interface LoginData {\n    /**\n     * The application configuration.\n     */\n    app: CCApp;\n    /**\n     * The principal corresponding to the logged in user.\n     */\n    principal: Principal;\n    /**\n     * The user settings for the logged in user.\n     */\n    userSettings: UserSettings;\n}\n\n/**\n * A high-level service to manage user login\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class LoginService implements OnDestroy {\n    /**\n     * `true` if a user is currently logged in\n     */\n    complete: boolean;\n    // getCredentials handling (concurrent calls)\n    protected loginModalPromise: Promise<ModalResult> | undefined;\n    protected processCredentialsPromise: Promise<ProcessedCredentials | undefined> | undefined;\n    protected checkPrincipalPromise: Promise<Principal> | undefined;\n    protected automaticLoginPromise: Promise<any> | undefined;\n    protected _events = new BehaviorSubject<SessionEvent>({type: \"session-changed\"});\n\n    constructor(\n        @Inject(START_CONFIG) protected startConfig: StartConfig,\n        @Inject(MODAL_LOGIN) protected loginModal: Type<any>,\n        @Optional() protected router: Router,\n        protected appService: AppService,\n        protected principalService: PrincipalWebService,\n        protected userSettingsService: UserSettingsWebService,\n        protected modalService: ModalService,\n        protected notificationsService: NotificationsService,\n        protected authenticationService: AuthenticationService) {\n        // NB unload doesn't fire reliably so we listen for beforeunload\n        window.addEventListener(\"beforeunload\", this.beforeUnloadEventListener);\n    }\n\n    protected beforeUnloadEventListener = (e: Event) => {\n        this._events.next({type: \"session-end\"});\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n        window.removeEventListener(\"beforeunload\", this.beforeUnloadEventListener);\n    }\n\n    /**\n     * Get an `Observable` stream of {@link SessionEvent} events emitted by the service\n     */\n    get events(): Observable<SessionEvent> {\n        return this._events;\n    }\n\n    /**\n     * Get the currently logged in {@link Principal}, if any. Note that a principal can exist\n     * without the login being complete. For example, in the situation where access is denied to\n     * the selected app.\n     */\n    get principal(): Principal | undefined {\n        return this.principalService.principal;\n    }\n\n    private setComplete() {\n        const complete = this.complete;\n        this.complete = !!this.appService.app && !!this.principalService.principal && !!this.userSettingsService.userSettings;\n        if (this.complete) {\n            if (!this.authenticationService.userOverrideFailed) {\n                this.notificationsService.hideNotifications();\n            }\n            this.authenticationService.userOverrideFailed = false;\n        }\n        if (!!complete !== !!this.complete) {\n            this._events.next({type: \"session-changed\"});\n        }\n    }\n\n    /**\n     * Perform a logout of the currently logged in user. [AppService.app]{@link AppService#app},\n     * [PrincipalWebService.principal]{@link PrincipalWebService#prinicpal} and\n     * [UserSettingsWebService.userSettings]{@link UserSettingsWebService#userSettings} are reset.\n     * The `session-end` event is emitted\n     */\n    logout() {\n        this._events.next({type: \"session-end\"});\n        this.appService.clear();\n        this.principalService.principal = undefined;\n        this.userSettingsService.userSettings = undefined;\n        this.authenticationService.deactivateUserOverride();\n        this.authenticationService.logout();\n        this.setComplete();\n    }\n\n    /**\n     * Override the current user to the user specified in `userOverride`. Only an administrator\n     * is permitted to do this. They can revert to the normal login by calling this method with\n     * `undefined`\n     *\n     * @param userOverride The user override\n     */\n    overrideUser(userOverride: UserOverride | undefined) {\n        this.authenticationService.userOverride = userOverride;\n        this.appService.clear();\n        this.principalService.principal = undefined;\n        this.userSettingsService.userSettings = undefined;\n        this.setComplete();\n        Utils.delay().then(() => this.login());\n    }\n\n    private switchPrincipal(principal: Principal) {\n        if (!principal.isAdministrator) {\n            this.authenticationService.deactivateUserOverride();\n        }\n        this.principalService.principal = principal;\n        this.userSettingsService.userSettings = undefined;\n        Utils.delay().then(() => this.login());\n    }\n\n    /**\n     * Initiate the user login process. The method attempts to retrieve\n     * the [application configuration]{@link CCApp}, the\n     * [logged in user]{@link Principal} and the [user settings]{@link UserSettings}.\n     * If a user is not currently authenticated then authentication is performed using\n     * the {@link AuthenticationService} - OAuth/SAML if configured on the Sinequa Server\n     * or manual using a login modal dialog provided using the {@link MODAL_LOGIN} injection\n     * token.\n     */\n    login(): Observable<LoginData> {\n        const appName = this.appService.appName;\n        if (!appName) {\n            return throwError({error: \"App not specified\"});\n        }\n        let appNeeded: boolean;\n        if (this.router) {\n            const hash = window.location.hash.replace(\"#\", \"\");\n            const href = hash.split(\"?\")[0];\n            const params = new URLSearchParams(hash.split(\"?\")[1]);\n            const queryParams = {}\n            params.forEach((v, k) => queryParams[k] = v);\n\n            // Pick up any user override from the query string\n            const overrideUser = queryParams[\"overrideUser\"];\n            const overrideDomain = queryParams[\"overrideDomain\"];\n            if (overrideUser) {\n                this.authenticationService.userOverride = {\n                    userName: overrideUser,\n                    domain: overrideDomain\n                };\n                delete queryParams[\"overrideUser\"];\n                delete queryParams[\"overrideDomain\"];\n                const url = Utils.makeURL(href);\n                this.router.navigate([url.pathname], {queryParams});\n            }\n        }\n\n        interface ObservableLoginData {\n            app: Observable<CCApp> | undefined;\n            principal: Observable<Principal> | undefined;\n            userSettings: Observable<UserSettings> | undefined;\n        }\n\n        const makeObservables = (): ObservableLoginData => {\n            const observables: ObservableLoginData = {\n                app: undefined,\n                principal: undefined,\n                userSettings: undefined\n            };\n            if (!this.appService.app || (appName && this.appService.app.name !== appName)) {\n                appNeeded = true;\n                observables.app = this.appService.init();\n            }\n            else {\n                observables.app = of(this.appService.app);\n            }\n            let loadUserSettings = false;\n            if (!this.principalService.principal) {\n                loadUserSettings = true;\n                observables.principal = this.principalService.load();\n            }\n            else {\n                observables.principal = of(this.principalService.principal);\n            }\n            if (!this.userSettingsService.userSettings || loadUserSettings) {\n                observables.userSettings = this.userSettingsService.load();\n            }\n            else {\n                observables.userSettings = of(this.userSettingsService.userSettings);\n            }\n            return observables;\n        };\n\n        const observable = this.authenticationService.autoAuthenticate()\n            .pipe(flatMap((success) => {\n                const observables = makeObservables();\n                return forkJoin<ObservableLoginData, keyof ObservableLoginData>(observables);\n            }));\n        Utils.subscribe(observable,\n            (result) => {\n                console.log(\"loginService.login ok: \", result);\n                this.setComplete();\n                if (appNeeded) {\n                    this._events.next({type: \"session-start\"});\n                }\n            },\n            (error) => {\n                console.log(\"loginService.login failed: \", error);\n                // proceed to logout to clean process\n                this.logout();\n                return throwError(error);\n            });\n        return observable;\n    }\n\n    private getAutomaticProvider(): string | undefined {\n        if (this.startConfig.providers) {\n            return Object.keys(this.startConfig.providers).find((value) => {\n                const provider = this.startConfig.providers && this.startConfig.providers[value];\n                return !!provider && (provider as any).automatic;\n            });\n        }\n        return undefined;\n    }\n\n    /**\n     * Called by the {@link HttpInterceptor} on reception of an `HTTP 401` response.\n     * This will either initiate an auto login process (OAuth/SAML) if configured on\n     * the Sinequa server or display the login modal dialog to request user credentials\n     *\n     * @param response An `HTTP 401` response\n     * @param acceptCurrent If `true` and the `AuthenticationService` currently has\n     * processed credentials then use them instead of starting a new login\n     * @returns A promise that is resolved when credentials have been obtained. Note that\n     * when auto-authentication is configured the promise will be rejected and the browser\n     * redirected to the OAuth/SAML redirect url\n     */\n    getCredentials(response: HttpErrorResponse, acceptCurrent: boolean): Promise<void> {\n        if (acceptCurrent && this.authenticationService.processedCredentials) {\n            return Promise.resolve(); // initiate retry\n        }\n        if (!this.startConfig.usePopupForLogin && this.authenticationService.autoLoginActive) {\n            return this.authenticationService.autoAuthenticate().toPromise()\n                .then(result => {\n                    if (result/*auto-authentication initiated*/) {\n                        return Promise.reject(\"performing auto login\");\n                    }\n                    else {\n                        return undefined;\n                    }\n                });\n        }\n        let firstCaller = false;\n        const automaticProvider = this.getAutomaticProvider();\n        if (automaticProvider) {\n            if (!this.automaticLoginPromise) {\n                this.automaticLoginPromise = this.authenticationService.authenticateWithProvider(automaticProvider).toPromise();\n                firstCaller = true;\n            }\n            return this.automaticLoginPromise\n                .then((result) => {\n                    // NB response should be the return value from JOAuth/JSaml json methods\n                    // It can be undefined eg if the popup fails to open\n                    this.automaticLoginPromise = undefined;\n                    return result ? Promise.resolve() : Promise.reject(\"popup failed?\");\n                })\n                .catch((reason) => {\n                    this.automaticLoginPromise = undefined;\n                    const error = new SqError(SqErrorCode.autoLoginError);\n                    if (firstCaller) {\n                        this.notificationsService.error(error.message);\n                    }\n                    throw error;\n                });\n        }\n        const credentials: Credentials = {};\n        if (this.authenticationService.processedCredentials) {\n            credentials.userName = this.authenticationService.processedCredentials.userName;\n        }\n        if (!this.loginModalPromise) {\n            this.loginModalPromise = this.modalService.open(this.loginModal, {model: credentials});\n            firstCaller = true;\n        }\n        return this.loginModalPromise\n            .then((result) => {\n                this.loginModalPromise = undefined;\n                // result === ModalResult.Yes is a special return from Login when using AuthenticationService.authenticateWithProvider\n                if (result === ModalResult.OK || result === ModalResult.Yes) {\n                    if (!this.processCredentialsPromise) {\n                        this.processCredentialsPromise = result === ModalResult.Yes ?\n                            Promise.resolve<ProcessedCredentials | undefined>(undefined) :\n                            this.authenticationService.authenticate(credentials, response);\n                    }\n                    return this.processCredentialsPromise\n                        .then((value) => {\n                            this.processCredentialsPromise = undefined;\n                            if (result !== ModalResult.Yes) {\n                                this.authenticationService.processedCredentials = value;\n                            }\n                            if (!this.checkPrincipalPromise) {\n                                this.checkPrincipalPromise = this.principalService.get(false).toPromise();\n                            }\n                            return this.checkPrincipalPromise\n                                .then((principal) => {\n                                    this.checkPrincipalPromise = undefined;\n                                    if (!this.principalService.principal || this.principalService.principal.id === principal.id) {\n                                        // no current principal OR prinicpal unchanged - initiate retry\n                                        return Promise.resolve();\n                                    }\n                                    const error = new SqError(SqErrorCode.principalSwitched);\n                                    if (firstCaller) {\n                                        this.switchPrincipal(principal);\n                                        this.notificationsService.info(error.message);\n                                    }\n                                    throw error;\n                                })\n                                .catch((reason) => {\n                                    this.checkPrincipalPromise = undefined;\n                                    throw reason;\n                                });\n                        })\n                        .catch((reason) => {\n                            this.processCredentialsPromise = undefined;\n                            if (SqError.is(reason, SqErrorCode.principalSwitched)) {\n                                throw reason;\n                            }\n                            throw new SqError(SqErrorCode.processedCredentialsError);\n                        });\n                }\n                else {\n                    this.authenticationService.processedCredentials = undefined; // clean slate\n                    const error = new SqError(SqErrorCode.loginCancelled);\n                    if (firstCaller) {\n                        this.notificationsService.info(error.message);\n                    }\n                    throw error;\n                }\n            })\n            .catch((reason) => {\n                if (!SqError.is(reason, SqErrorCode.principalSwitched)) {\n                    this.authenticationService.processedCredentials = undefined; // clean slate\n                }\n                this.loginModalPromise = undefined;\n                throw reason;\n            });\n    }\n}\n","export default {\n    \"search\": {\n        \"emptySearchNotification\": \"Veuillez saisir des termes de recherche pour effectuer une recherche\",\n        \"alreadySelected\": \"Déjà sélectionné\"\n    },\n\n    \"breadcrumbs\": {\n        \"emptySearch\": \"<recherche vide>\",\n        \"itemRemove\": \"Supprimer\"\n    },\n\n    \"didYouMean\": {\n        \"dymonlyBeforeCorrected\": \"Essayez avec cette orthographe : \",\n        \"dymonlyAfterCorrected\": \"\",\n        \"correctBeforeCorrected\": \"Résultats pour : \",\n        \"correctBeforeOriginal\": \". Essayez avec l'orthographe : \",\n        \"correctAfterOriginal\": \"\",\n        \"smartBeforeOriginal\": \"Résultats pour : \",\n        \"smartBeforeCorrected\": \" et \",\n        \"smartAfterCorrected\": \"\"\n    },\n\n    \"pageSizeSelector\": {\n        \"pageSizeChoice\": \"{size, number} par page\",\n        \"defaultPageSize\": \"Défaut ({size, number})\",\n        \"defaultPageSizeChoice\": \"{size, number} par page (défaut)\"\n    },\n\n    \"pager\": {\n        \"pageNumberTitle\": \"Page {page, number}\",\n        \"firstPage\": \"Première page\",\n        \"nextPage\": \"Page suivante\",\n        \"previousPage\": \"Page précédente\",\n        \"lastPage\": \"Dernière page\"\n    },\n\n    \"sortSelector\": {\n        \"sortByTitle\": \"Trier par: {text}\",\n        \"sortOther\": \"<Autre>\"\n    },\n\n    \"sort\": {\n        \"relevance\": \"Pertinence\",\n        \"date\": \"Date\",\n        \"filename\": \"Nom de fichier\",\n        \"title\": \"Titre\"\n    },\n\n    \"queryIntent\": {\n        \"externalServiceTimeoutError\": \"Cette page de résultat est incomplète due à un délai d'attente interne dépassé. S'il vous plaît, réessayez plus tard.\"\n    }\n};\n","import {Injectable, OnDestroy, RendererFactory2, Renderer2} from \"@angular/core\";\nimport {Subject, Observable} from \"rxjs\";\nimport {Keys} from \"@sinequa/core/base\";\n\n// Based on  Bootstrap (v4.4.1): dropdown.js\n\nexport interface DropdownEvent {\n    type: \"clear\" | \"toggle\";\n}\n\nexport interface DropdownClearEvent extends DropdownEvent {\n    type: \"clear\";\n    sourceEvent: KeyboardEvent | MouseEvent | undefined;\n}\n\nexport interface DropdownToggleEvent extends DropdownEvent {\n    type: \"toggle\";\n    element: Element;\n}\n\nexport type DropdownEvents = DropdownClearEvent | DropdownToggleEvent;\n\nexport const gClassName = {\n    DISABLED        : 'disabled',\n    SHOW            : 'show',\n    DROPUP          : 'dropup',\n    DROPRIGHT       : 'dropright',\n    DROPLEFT        : 'dropleft',\n    MENURIGHT       : 'dropdown-menu-right',\n    MENULEFT        : 'dropdown-menu-left',\n    POSITION_STATIC : 'position-static'\n};\n\nexport const gSelector = {\n    DROPDOWN      : '.dropdown',\n    DATA_TOGGLE   : '[data-toggle=\"dropdown\"]',\n    FORM_CHILD    : '.dropdown form',\n    MENU          : '.dropdown-menu',\n    NAVBAR_NAV    : '.navbar-nav',\n    VISIBLE_ITEMS : '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n};\n\nexport const gAttachmentMap = {\n    TOP       : 'top-start',\n    TOPEND    : 'top-end',\n    BOTTOM    : 'bottom-start',\n    BOTTOMEND : 'bottom-end',\n    RIGHT     : 'right-start',\n    RIGHTEND  : 'right-end',\n    LEFT      : 'left-start',\n    LEFTEND   : 'left-end'\n};\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class BsDropdownService implements OnDestroy {\n    protected _events: Subject<DropdownEvents>;\n    protected unlisteners: (() => void)[];\n    protected renderer: Renderer2;\n\n    constructor(\n        rendererFactory: RendererFactory2\n    ) {\n        this._events = new Subject<DropdownEvents>();\n        this.renderer = rendererFactory.createRenderer(null, null);\n        this.unlisteners = [];\n        this.unlisteners.push(this.renderer.listen(document, \"keydown\", this.dataApiKeydownHandler));\n        this.unlisteners.push(this.renderer.listen(document, \"click\", this.clearMenus));\n        this.unlisteners.push(this.renderer.listen(document, \"keyup\", this.clearMenus));\n        this.unlisteners.push(this.renderer.listen(document, \"click\", this.toggle));\n        this.unlisteners.push(this.renderer.listen(document, \"click\", this.formChildClick));\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n        this.unlisteners.forEach((unlistener) => unlistener());\n    }\n\n    get events(): Observable<DropdownEvents> {\n        return this._events;\n    }\n\n    private matchDescendant(base: Element, event: Event, selector: string): HTMLElement | null {\n        let element: HTMLElement | null = event.target as HTMLElement;\n        while (element && element !== base) {\n            if (element.matches(selector)) {\n                return element;\n            }\n            element = element.parentElement;\n        }\n        return null;\n    }\n\n    private getSelectorFromElement(element: HTMLElement) {\n        let selector = element.getAttribute('data-target');\n\n        if (!selector || selector === '#') {\n            const hrefAttr = element.getAttribute('href');\n            selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : '';\n        }\n\n        try {\n            return document.querySelector(selector) ? selector : null;\n        }\n        catch (err) {\n            return null;\n        }\n    }\n\n    getParentFromElement(element: HTMLElement): Node | null {\n        let parent: HTMLElement | null = null;\n        const selector = this.getSelectorFromElement(element);\n\n        if (selector) {\n            parent = document.querySelector(selector);\n        }\n        if (!parent) {\n            // Account for scroll menus and sub menus\n            parent = element.parentElement;\n            while (parent &&\n                (parent.classList.contains(\"sq-scroll-menu\") ||\n                parent.classList.contains(\"sq-scroll-menu-item\") ||\n                parent.classList.contains(\"dropdown-submenu\"))) {\n                parent = parent.parentElement;\n            }\n        }\n        return parent;\n    }\n\n    private dataApiKeydownHandler = (event: KeyboardEvent): boolean | void => {\n        const descendant = this.matchDescendant(document.documentElement, event, `${gSelector.DATA_TOGGLE},${gSelector.MENU}`);\n        if (!descendant) {\n            return;\n        }\n        // If not input/textarea:\n        //  - And not a key in REGEXP_KEYDOWN => not a dropdown command\n        // If input/textarea:\n        //  - If space key => not a dropdown command\n        //  - If key is other than escape\n        //    - If key is not up or down => not a dropdown command\n        //    - If trigger inside the menu => not a dropdown command\n        if (/input|textarea/i.test((event.target as Element).tagName) ?\n            event.which === Keys.space || event.which !== Keys.esc &&\n            (event.which !== Keys.down && event.which !== Keys.up || (event.target as Element).closest(gSelector.MENU)) :\n            !(event.which === Keys.up || event.which === Keys.down || event.which === Keys.esc)) {\n            return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (/*TODO descendant.disabled || */descendant.classList.contains(gClassName.DISABLED)) {\n            return;\n        }\n\n        const parent = this.getParentFromElement(descendant);\n        const isActive = parent instanceof HTMLElement && parent.classList.contains(gClassName.SHOW);\n\n        if (!isActive && event.which === Keys.esc) {\n            return;\n        }\n\n        if (!isActive || isActive && (event.which === Keys.esc || event.which === Keys.space)) {\n            if (event.which === Keys.esc) {\n                const toggle = parent instanceof Element && parent.querySelector(gSelector.DATA_TOGGLE);\n                if (toggle instanceof HTMLElement) {\n                    // toggle.dispatchEvent(new Event(\"focus\", {bubbles: true}));\n                    // NB $(toggle).trigger('focus') will set the focus on toggle\n                    toggle.focus();\n                }\n            }\n\n            descendant.dispatchEvent(new Event(\"click\", {bubbles: true}));\n            return;\n        }\n\n        let items: HTMLElement[] = [];\n        if (parent instanceof Element) {\n            items = items.slice.call(parent.querySelectorAll(gSelector.VISIBLE_ITEMS))\n                .filter((item: Element) => item instanceof HTMLElement && (item.offsetWidth > 0 || item.offsetHeight > 0));\n        }\n\n        if (items.length === 0) {\n            return;\n        }\n\n        let index = items.indexOf(event.target as HTMLElement);\n\n        if (event.which === Keys.up && index > 0) { // Up\n            index--;\n        }\n\n        if (event.which === Keys.down && index < items.length - 1) { // Down\n            index++;\n        }\n\n        if (index < 0) {\n            index = 0;\n        }\n\n        items[index].focus();\n    }\n\n    private clearMenus = (event: KeyboardEvent | MouseEvent): boolean | void => {\n        if (event && (event.which === 3 /*RIGHT_MOUSE_BUTTON_WHICH*/ ||\n            event.type === 'keyup' && event.which !== Keys.tab)) {\n            return;\n        }\n        this._events.next({type: \"clear\", sourceEvent: event});\n    }\n\n    private toggle = (event: UIEvent): boolean | void => {\n        const descendant = this.matchDescendant(document.documentElement, event, gSelector.DATA_TOGGLE);\n        if (!descendant) {\n            return;\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        this._events.next({type: \"toggle\", element: descendant});\n    }\n\n    private formChildClick = (event: UIEvent): boolean | void => {\n        if (!this.matchDescendant(document.documentElement, event, gSelector.FORM_CHILD)) {\n            return;\n        }\n        event.stopPropagation();\n    }\n\n    raiseClear() {\n        this._events.next({type: \"clear\", sourceEvent: undefined});\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { UserSettingsWebService } from '@sinequa/core/web-services';\n\n/**\n * The role of this service is to bundle together the simple preferences of\n * the user and synchronise them with the user settings.\n *\n * Usage:\n * this.userPreferences.get(\"foo\")\n * this.userPreferences.set(\"foo\", \"bar\")\n * this.userPreferences.sync()\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class UserPreferences {\n\n    constructor(\n        private userSettingsService: UserSettingsWebService\n    ) {\n    }\n\n    private get prefs(): any {\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"prefs\"])\n            this.userSettingsService.userSettings[\"prefs\"] = {};\n        return this.userSettingsService.userSettings[\"prefs\"];\n    }\n\n    /**\n     * Returns the value of a property\n     * @param property the name of this property\n     */\n    public get(property: string) {\n        return this.prefs[property.toLowerCase()];\n    }\n\n    /**\n     * Sets the value of a property\n     * @param property the name of this property\n     * @param value the value\n     * @param skipSync whether we should skyp syncing (to update multiple properties for example)\n     */\n    public set(property: string, value: any, skipSync?: boolean) {\n        this.prefs[property.toLowerCase()] = value;\n        if(!skipSync){\n            this.sync();\n        }\n    }\n\n    /**\n     * Deletes a given property from the preferences\n     * @param property the name of this property\n     * @param skipSync whether we should skyp syncing (to update multiple properties for example)\n     */\n    public delete(property: string, skipSync?: boolean) {\n        if(Object.prototype.hasOwnProperty.call(this.prefs, property.toLowerCase())) {\n            this.prefs[property.toLowerCase()] = null;\n            if(!skipSync){\n                this.sync();\n            }\n        }\n    }\n\n    /**\n     * Synchronizes the user preferences with the server\n     */\n    public sync(){\n        this.userSettingsService.patch({prefs: this.prefs});\n    }\n\n}","import { Component, Input, OnChanges, ChangeDetectorRef, SimpleChanges, Output, EventEmitter } from '@angular/core';\nimport { Observable, of, combineLatest, ReplaySubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Results, AggregationItem, Aggregation, CCAggregation, Record, AuditWebService, AuditEventType } from '@sinequa/core/web-services';\nimport { AppService, Expr, ExprBuilder } from '@sinequa/core/app-utils';\nimport { Utils } from '@sinequa/core/base';\nimport { AbstractFacet, FacetService } from '@sinequa/components/facet';\nimport { SearchService } from '@sinequa/components/search';\nimport { SelectionService } from '@sinequa/components/selection';\nimport { Action } from '@sinequa/components/action';\nimport { TimelineSeries, TimelineDate, TimelineEvent } from './timeline.component';\nimport moment from 'moment';\nimport * as d3 from 'd3';\nimport { TimelineEventType } from './timeline-legend.component';\n\nexport interface TimelineAggregation {\n    name?: string;\n    aggregation: string;\n    primary: boolean;\n    areaStyles?: {[key: string]: any};\n    lineStyles?: {[key: string]: any};\n}\n\nexport interface TimelineCombinedAggregations {\n    aggregations: TimelineAggregation[];\n    maxNMonths: number[]; // Maximum number of months for which to use this aggregation\n    default: TimelineAggregation; // Aggregation to use by default \n    current?: TimelineAggregation; // (this field is overriden by the component when switching aggregation)\n}\n\nexport interface TimelineRecords {\n    field: string;\n    size?: number | ((record: Record, selected: boolean) => number);\n    styles?: {[key: string]: any} | ((record: Record, selected: boolean) => {[key: string]: any});\n    display?: (record: Record) => string;\n}\n\nexport interface TimelineEventAggregation {\n    aggregation: string;\n    getDate: ((item: AggregationItem) => Date);\n    getDisplay: ((item: AggregationItem) => string);\n    size?: number | ((item: AggregationItem) => number);\n    styles?: {[key: string]: any} | ((item: AggregationItem) => {[key: string]: any});\n}\n\nexport type TimelineData = TimelineSeries | TimelineAggregation | TimelineCombinedAggregations;\n\nexport type TimelineEventData = TimelineEvent[] | TimelineRecords | TimelineEventAggregation;\n\n@Component({\n    selector: 'sq-facet-timeline',\n    templateUrl: './facet-timeline.component.html',\n    styleUrls: ['./facet-timeline.component.scss']\n})\nexport class BsFacetTimelineComponent extends AbstractFacet implements OnChanges {\n    @Input() name = 'Timeline';\n    @Input() results: Results;\n    \n    // By default, we show the standard Timeline aggregation and the list of current records\n    @Input() timeseries: TimelineData[] = [{aggregation: 'Timeline', primary: true}];\n    @Input() events: TimelineEventData[] = [{field: 'modified'}];\n\n    // Initial scale (prior to any zoom)\n    @Input() minDate?: Date;\n    @Input() maxDate?: Date;\n    // Date range to filter aggregations (ignored when combined aggregations are recomputed based on zoomed range)\n    @Input() minAggregationDate?: Date;\n    @Input() maxAggregationDate?: Date;\n    \n    @Input() zoomable = true;\n    @Input() minZoomDays = 1; // Max 1 day scale\n    @Input() maxZoomDays = 365 * 100; // Max 100 years scale\n\n    @Input() width = 600;\n    @Input() height = 200;\n    @Input() margin = {top: 15, bottom: 20, left: 40, right: 15};\n\n    @Input() curveType = \"curveMonotoneX\";\n\n    @Input() showTooltip = true;\n    @Input() theme: \"light\" | \"dark\" = \"light\";\n\n    @Input() showLegend = false;\n    @Input() legendStyles?: {[key:string]: any} = {'justify-content' : 'center'};\n    @Input() legendEvents?: TimelineEventType[];\n    @Input() legendOrientation?: \"row\"|\"column\" = \"row\";\n    @Input() legendYOffset?: number = 3;\n\n    @Output() eventClicked = new EventEmitter<TimelineEvent>();\n\n    // List of observables (one per timeseries / event type)\n    timeseries$: ReplaySubject<TimelineSeries>[];\n    events$: ReplaySubject<TimelineEvent[]>[];\n\n    // Combination (combineLastest) of the timeline observables\n    mergedTimeseries$: Observable<TimelineSeries[]>;\n    mergedEvents$: Observable<TimelineEvent[]>;\n\n    // Current timeline selection\n    selection?: [Date, Date];\n\n    // Current range (undefined if no zoom / auto-scaling)\n    currentRange?: [Date, Date];\n\n    // Formating method for search queries\n    formatDayRequest = d3.timeFormat(\"%Y-%m-%d\");\n\n    // Actions\n    clearFilters: Action;\n\n    constructor(\n        public facetService: FacetService,\n        public searchService: SearchService,\n        public appService: AppService,\n        public selectionService: SelectionService,\n        public exprBuilder: ExprBuilder,\n        public cdRef: ChangeDetectorRef,\n        public audit: AuditWebService\n    ){\n        super();\n\n        // Update the events when the selection of records changes\n        this.selectionService.events.subscribe(event => {\n            const i = this.events.findIndex(e => (e as TimelineRecords).field);\n            if(i !== -1) {\n                this.events$[i].next(this.getRecordsAsEvents(this.events[i] as TimelineRecords));\n            }\n        });\n        \n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                this.selection = undefined;\n                this.searchService.query.removeSelect(this.name);\n                this.searchService.search();\n            }\n        });\n\n    }\n\n    getMinDate(): Date | undefined {\n        return this.currentRange? this.currentRange[0] : this.minDate;\n    }\n\n    getMaxDate(): Date | undefined {\n        return this.currentRange? this.currentRange[1] : this.maxDate;\n    }\n\n    get actions(): Action[] {\n        const actions: Action[] = [];\n        if(this.facetService.hasFiltered(this.name)){\n            actions.push(this.clearFilters);\n        }\n        return actions;\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n\n        // Skip simple changes (width, height, etc.) that don't require modifying the timeline data\n        if(!changes.timeseries && !changes.events && !changes.results) {\n            return;\n        }\n\n        // Retrieve the current active selection for this timeline (if any)\n        const select = this.searchService.query.findSelect(this.name);\n\n        // Update the selection if it is not already set (which is the case on a page refresh)\n        if(select && !this.selection) {\n            let parsedexpr = this.appService.parseExpr(select.expression) as Expr;\n            if(!Utils.isString(parsedexpr)){\n                while(!parsedexpr.isLeaf){ // The select might over multiple fields (modified between [...] AND created between [...])\n                    parsedexpr = parsedexpr.operands[0];\n                }\n                if(parsedexpr.values){\n                    this.selection = [new Date(parsedexpr.values[0]), new Date(parsedexpr.values[1])];\n                    // Guess a current range based on the selection\n                    if(!this.currentRange) {\n                        const interval = this.selection[1].getTime() - this.selection[0].getTime();\n                        this.currentRange = [ // Selected Interval +10% on each side\n                            new Date(this.selection[0].getTime()-interval*0.1),\n                            new Date(this.selection[1].getTime()+interval*0.1)\n                        ];\n                    }\n                }\n            }\n        }\n        // If no active selection we remove the selection from the timeline, along with the current zoomed range\n        else if(!select) {\n            this.selection = undefined; // If no select, it was possibly removed by the user, we need to update our selection\n            this.currentRange = undefined; // current range is set by zoom events, we want to reset it only if there are no select (ie. no user interaction)\n        }\n\n        // Initialize timeseries\n        if(!this.timeseries$ || changes[\"timeseries\"]) {\n            // Create one observable per timeline\n            this.timeseries$ = this.timeseries.map(_ => new ReplaySubject<TimelineSeries>(1));\n            this.mergedTimeseries$ = combineLatest(this.timeseries$);\n        }\n\n        this.updateTimeseries();\n\n        // Initialize events\n        if(!this.events$ || changes[\"events\"]) {\n            this.events$ = this.events.map(_ => new ReplaySubject<TimelineEvent[]>(1));\n            this.mergedEvents$ = combineLatest(this.events$).pipe(\n                map(events => ([] as TimelineEvent[]).concat(...events))\n            );\n        }\n\n        this.updateEvents();\n        \n    }\n\n    /**\n     * For each timeseries configuration given as an input,\n     * update the data via the list of observables (timelines$)\n     */\n    updateTimeseries() {\n        this.timeseries.forEach((config, i) => {\n\n            const subject = this.timeseries$[i];\n\n            if((config as TimelineSeries).dates !== undefined) {\n                subject.next(config as TimelineSeries);\n            }\n\n            else {\n                let agg = config as TimelineAggregation;\n                if(agg.aggregation === undefined){\n                    \n                    config = config as TimelineCombinedAggregations;\n                    // We want to set the default scale if it hasn't been set before\n                    // or if no zoom/selection has been made (so current scale may not be adapted to the new results)\n                    if(!this.currentRange || !config.current){\n                        config.current = config.default;\n                    }\n\n                    agg = config.current;\n                }\n                \n                const range: [Date, Date] | undefined = !!this.minAggregationDate && !!this.maxAggregationDate ?\n                    [this.minAggregationDate, this.maxAggregationDate] : undefined;\n\n                this.getTimeseries(agg, range).subscribe({\n                    next: d => subject.next(d),\n                    error: err => subject.error(err)\n                });\n            }\n\n        });\n    }\n\n    /**\n     * For each event configuration given as an input, \n     * update the data via the list of observables (events$)\n     */\n    updateEvents() {\n        this.events.forEach((config, i) => {\n            const subject = this.events$[i];\n\n            if((config as TimelineRecords).field) {\n                subject.next(this.getRecordsAsEvents(config as TimelineRecords));\n            }\n            else if((config as TimelineEventAggregation).aggregation){\n                this.getEventAggregation(config as TimelineEventAggregation).subscribe({\n                    next: t => subject.next(t),\n                    error: err => subject.error(err)\n                });\n            }\n            else if(Array.isArray(config)){\n                subject.next(config as TimelineEvent[]);\n            }\n        });\n    }\n\n    /**\n     * Get a timeseries aggregation via the getAggregation method.\n     * @param config \n     * @param subject \n     * @param range \n     */\n    getTimeseries(config: TimelineAggregation, range?: [Date, Date]): Observable<TimelineSeries> {\n        return this.getAggregation(config.aggregation, range).pipe(\n            map(d => BsFacetTimelineComponent.createTimeseries(config, d.aggregation, d.ccaggregation, range))\n        );\n    }\n\n    /**\n     * Get an aggregation of events via the getAggregation method\n     * @param config \n     * @param subject \n     */\n    getEventAggregation(config: TimelineEventAggregation): Observable<TimelineEvent[]> {\n        return this.getAggregation(config.aggregation).pipe(\n            map(d => BsFacetTimelineComponent.createAggregationEvents(config, d.aggregation, d.ccaggregation))\n        );\n    }\n\n    /**\n     * Returns the list of records from the results as a list of TimelineEvent when they have a\n     * modified date. The size and styles of the events are determined from the given configuration (TimelineRecords)\n     * @param config \n     */\n    getRecordsAsEvents(config: TimelineRecords): TimelineEvent[] {\n        if(this.results) {\n            return this.results.records\n                .filter(r => !!Utils.toDate(r[config.field]))\n                .map<TimelineEvent>(r => {\n                    return {\n                        id: r.id,\n                        date: Utils.toDate(r[config.field])!,\n                        size: !config.size? 6 : typeof config.size === 'function'? config.size(r, r.$selected) : config.size,\n                        styles: !config.styles? BsFacetTimelineComponent.defaultRecordStyle(r.$selected) :\n                                typeof config.styles === 'function'? config.styles(r, r.$selected) : \n                                config.styles,\n                        display: config.display? config.display(r) : r.title,\n                        // Custom property for click action\n                        record: r\n                    }\n                });\n        }\n        return [];\n    }\n\n\n    /**\n     * returns an aggregation and its configuration either directly from the facet service of\n     * by fetching it from the server.\n     * @param aggregationName \n     * @param range \n     */\n    getAggregation(aggregationName: string, range?: [Date, Date]): Observable<{aggregation: Aggregation, ccaggregation: CCAggregation}> {\n        \n        const ccaggregation = this.appService.getCCAggregation(aggregationName);\n        const aggregation = this.facetService.getAggregation(aggregationName, this.results);\n        \n        if(aggregation && ccaggregation) {\n            return of({aggregation: aggregation, ccaggregation: ccaggregation});\n        }\n\n        else if(ccaggregation) {\n            return this.fetchAggregation(aggregationName, ccaggregation, range).pipe(\n                map(agg => {return {aggregation: agg, ccaggregation: ccaggregation} })\n            );\n        }\n\n        else {\n            throw new Error(`Aggregation ${aggregationName} does not exist in the Query web service`);\n        }\n    }\n\n    /**\n     * Get an aggregation from the server, filtering by range if provided\n     * @param aggregation \n     * @param ccaggregation \n     * @param range \n     */\n    fetchAggregation(aggregation: string, ccaggregation: CCAggregation, range?: [Date, Date]): Observable<Aggregation> {\n        const query = Utils.copy(this.searchService.query);\n        query.action = \"aggregate\";\n        query.aggregations = [aggregation];\n\n        if(range){\n            query.addSelect(`${ccaggregation.column}:[${this.formatDayRequest(range[0])}..${this.formatDayRequest(range[1])}]`);\n        }\n\n        return this.searchService.getResults(query, undefined, {searchInactive: true}).pipe(\n            map(results => results.aggregations[0])\n        );\n    }\n\n    /**\n     * Given a combined aggregation configuration and a range, this method searches for the most \n     * adapted aggregation scale (years, months, weeks or days) and updates the data if necessary.\n     * @param config \n     * @param range \n     * @param iTimeseries \n     */\n    updateCombinedAggregation(config: TimelineCombinedAggregations, range: [Date, Date], timeseries$: ReplaySubject<TimelineSeries>) {\n        const nmonths = d3.timeMonth.count(range[0], range[1]);\n\n        if(!config.maxNMonths || config.maxNMonths.length !== config.aggregations.length) {\n            console.error(config);\n            throw new Error(\"maxNMonths and aggregations must have the same number of items\");\n        }\n\n        // Find the aggregation with min maxNMonths with maxNMonths >= nmonths\n        let jMin;\n        config.maxNMonths.forEach((maxNMonths, j) => {\n            if(maxNMonths >= nmonths && (jMin === undefined || maxNMonths < config.maxNMonths[jMin] || config.maxNMonths[jMin] === -1) \n                || maxNMonths === -1 && jMin === undefined){\n                jMin = j;\n            }\n        });\n\n        const bestAggregation = config.aggregations[jMin];\n\n        if(bestAggregation !== config.current \n            || this.currentRange && (range[0] < this.currentRange[0] || range[1] > this.currentRange[1])) {\n\n            config.current = bestAggregation;\n            this.getTimeseries(bestAggregation, range).subscribe({\n                next: d => timeseries$.next(d),\n                error: err => timeseries$.error(err)\n            });\n        }\n\n    }\n\n\n    // Interaction callbacks\n\n    /**\n     * On selection is triggered when the user selects a range of dates on the timeline.\n     * This has the effect of updating the query.select (either remove it or add/replace it)\n     * and it updates the search.\n     * @param selection \n     */\n    onSelectionChange(selection: [Date, Date] | undefined) {\n        this.selection = selection;\n        if(selection) {\n            const from = this.formatDayRequest(selection[0]);\n            const to = this.formatDayRequest(selection[1]);\n\n            const exprs: string[] = [];\n            this.searchService.query.removeSelect(this.name);\n\n            this.timeseries.forEach((config) => {\n                    \n                if((config as TimelineAggregation).aggregation !== undefined \n                || (config as TimelineCombinedAggregations).default !== undefined) {\n\n                    const aggregation = (config as TimelineAggregation).aggregation || (config as TimelineCombinedAggregations).default.aggregation;\n                    const ccaggregation = this.appService.getCCAggregation(aggregation);\n                    if(ccaggregation) {\n                        exprs.push(this.exprBuilder.makeRangeExpr(ccaggregation.column, from, to));\n                    }\n                }\n\n            });\n\n            if(exprs.length > 0) {\n                const expr = this.exprBuilder.concatOrExpr(exprs);\n                this.searchService.query.addSelect(expr, this.name);\n                this.searchService.search(undefined, {type:AuditEventType.Search_Timeline_Usage, detail: { from, to }});\n            }            \n        }\n\n        else if(this.searchService.query.findSelect(this.name)) {\n            this.searchService.query.removeSelect(this.name);\n            this.searchService.search();\n        }\n    }\n\n    /**\n     * On range is triggered when the user zooms in our out on the timeline,\n     * which triggers a dynamic update of the combined aggregation timelines.\n     * @param range \n     */\n    onRangeChange(range: [Date, Date]) {\n\n        this.timeseries.forEach((config, i) => {\n            if((config as TimelineCombinedAggregations).aggregations !== undefined) {\n                this.updateCombinedAggregation(config as TimelineCombinedAggregations, range, this.timeseries$[i]);\n            }\n        });\n\n        // Note: updateCombinedAggregation() compares currentRange and range\n        // So this update must be kept after the forEach\n        this.currentRange = range;\n    }\n\n    /**\n     * When an event is clicked, the event is propagated to the parent, and the tooltip is closed\n     * @param event \n     * @param closeTooltip \n     */\n    onEventClicked(event: TimelineEvent, closeTooltip: () => void) {\n        this.eventClicked.next(event);\n        closeTooltip();\n        return false;\n    }\n\n\n    // Static utility methods\n    \n    \n    /**\n     * Create a time series object from its config, data (aggregation) and configuration (ccaggregation)\n     * @param config \n     * @param aggregation \n     * @param ccaggregation \n     */\n    static createTimeseries(config: TimelineAggregation, aggregation: Aggregation, ccaggregation: CCAggregation, range?: [Date, Date]): TimelineSeries {\n        return {\n            name: config.name || aggregation.name,\n            primary: config.primary,\n            dates: this.createDatapoints(aggregation.items, ccaggregation?.mask, range),\n            lineStyles: config.lineStyles,\n            areaStyles: config.areaStyles\n        }\n    }\n\n    /**\n     * Create a list of events from its config, data (aggregation) and configuration (ccaggregation)\n     * @param config \n     * @param aggregation \n     * @param ccaggregation \n     */\n    static createAggregationEvents(config: TimelineEventAggregation, aggregation: Aggregation, ccaggregation: CCAggregation): TimelineEvent[] {\n        return !aggregation.items? [] : aggregation.items.map(item => {\n            return {\n                id: config.getDate(item).toUTCString()+\"|\"+config.getDisplay(item),\n                date: config.getDate(item),\n                size: !config.size? 6 : typeof config.size === 'function'? config.size(item) : config.size,\n                styles: !config.styles? undefined :\n                        typeof config.styles === 'function'? config.styles(item) : \n                        config.styles,                \n                display: config.getDisplay(item),\n\n                // Custom params for click action\n                item: item,\n                aggregation: aggregation,\n                ccaggregation: ccaggregation\n            }\n        });\n    }\n\n    /**\n     * This methods transforms a raw list of aggregation items into\n     * a time series completed with zeros, following the below scheme:\n     * Aggregation:  [    # #         # # #   #     # #       # # #    ]\n     * Series:       [  0 # # 0     0 # # # 0 # 0 0 # # 0   0 # # # 0  ]\n     * @param items \n     * @param resolution \n     */\n    static createDatapoints(items: AggregationItem[] | undefined, resolution: string, range?: [Date, Date]): TimelineDate[] {\n\n        if(!items) {\n            return [];\n        }\n\n        const timeInterval = this.getD3TimeInterval(resolution);\n        \n        const series: TimelineDate[] = [];\n\n        const _items = items\n            .map(item => {\n                if(!!item.value && !(item.value instanceof Date)){\n                    const val = item.value.toString();\n                    item.value = moment(val.length <= 4? val + \"-01\" : val).toDate();\n                    if(isNaN(item.value.getTime())){\n                        item.value = <Date><unknown> undefined; // So it gets filtered out\n                    }\n                }\n                return item;\n            })\n            .filter(item => !!item.value && (!range || ((item.value as Date) >= range[0] && (item.value as Date) <= range[1])));\n\n        _items.forEach((item,i) => {\n            const date = item.value as Date;\n            \n            if(i === 0 || timeInterval.offset(series[series.length-1].date, 1) < date) {\n                series.push({date: timeInterval.offset(date, -1), value: 0});\n            }\n\n            series.push({date: date, value: item.count});\n\n            if(i === _items.length-1 || timeInterval.offset(date, 1) < _items[i+1].value){\n                series.push({date: timeInterval.offset(date, 1), value: 0});                    \n            }\n        });\n\n        series.forEach(item => item.date = this.shiftDate(item.date, resolution));\n\n        return series;\n    }\n\n    \n    /**\n     * Shift the date to the middle of their time bracket (2020 = middle of the year, April = middle of the month, etc.)\n     * @param date \n     * @param resolution \n     */\n    static shiftDate(date: Date, resolution: string): Date {\n        switch(resolution){\n            case \"YYYY-MM-DD\": return d3.timeHour.offset(date, 12);\n            case \"YYYY-WW\": return d3.timeHour.offset(date, 84); // 3*24 + 12\n            case \"YYYY-MM\": return d3.timeDay.offset(date, 15);\n            case \"YYYY\": return d3.timeMonth.offset(date, 6);\n        }\n        return date;\n    }\n\n\n    static getD3TimeInterval(resolution: string): d3.CountableTimeInterval {\n        switch(resolution){\n            case \"YYYY-MM-DD\": return d3.timeDay;\n            case \"YYYY-WW\": return d3.timeWeek;\n            case \"YYYY-MM\": return d3.timeMonth;\n            case \"YYYY\": return d3.timeYear;\n        }\n        return d3.timeDay;\n    }\n\n    static defaultRecordStyle(selected: boolean): {[key: string]: any} {\n        return {\n            'fill': selected? 'red' : 'green',\n            'stroke': selected? 'red' : undefined,\n            'stroke-width': selected? '2px' : undefined\n        };\n    }\n}","<sq-timeline\n    [data]=\"mergedTimeseries$ | async\"\n    [events]=\"mergedEvents$ | async\"\n    [selection]=\"selection\"\n    [minDate]=\"getMinDate()\"\n    [maxDate]=\"getMaxDate()\"\n    [zoomable]=\"zoomable\"\n    [minZoomDays]=\"minZoomDays\"\n    [maxZoomDays]=\"maxZoomDays\"\n    [width]=\"width\"\n    [height]=\"height\"\n    [margin]=\"margin\"\n    [curveType]=\"curveType\"\n    [showTooltip]=\"showTooltip\"\n    [theme]=\"theme\"\n\n    (selectionChange)=\"onSelectionChange($event)\"\n    (rangeInit)=\"onRangeChange($event)\"\n    (rangeChange)=\"onRangeChange($event)\">\n\n    <ng-template #tooltipTpl let-event let-close=\"close\">\n        <a href=\"#\" (click)=\"onEventClicked(event, close)\"\n            class=\"tooltip-item list-group-item list-group-item-action\">\n            <span class=\"small text-muted\">{{ event.date | sqDate }}</span>\n            <div class=\"text-truncate\">{{ event.display || event.record.title }}</div>\n        </a>\n    </ng-template>\n\n</sq-timeline>\n\n<sq-timeline-legend *ngIf=\"showLegend\"\n    [data]=\"mergedTimeseries$ | async\"\n    [events]=\"legendEvents\"\n    [legendStyles]=\"legendStyles\"\n    [orientation]=\"legendOrientation\"\n    [yOffset]=\"legendYOffset\">\n</sq-timeline-legend>\n","import {Component, Input, Output, OnChanges, SimpleChanges, EventEmitter} from \"@angular/core\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {SearchService} from \"@sinequa/components/search\";\n\n@Component({\n    selector: \"sq-result-thumbnail\",\n    templateUrl: \"./result-thumbnail.html\"\n})\nexport class ResultThumbnail implements OnChanges {\n    @Input() record: Record;\n    @Input() linkBehavior: \"open\" | \"action\" = \"open\";\n    @Input() thumbnailColumn: string;\n    @Input() defaultThumbnail: string = \"\";\n    @Output() thumbnailClicked = new EventEmitter<boolean>();\n    thumbnailUrl: string;\n    private documentUrl: string;\n\n    constructor(\n        private appService: AppService,\n        private searchService: SearchService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!!changes[\"record\"]) {\n            this.documentUrl = this.record.url1;\n            if (!!this.thumbnailColumn) {\n                this.thumbnailUrl = this.record[this.thumbnailColumn];\n            }\n            if (!this.thumbnailUrl && !!this.record.thumbnailUrl) {\n                this.thumbnailUrl = this.record.thumbnailUrl;\n            }\n            if (!this.thumbnailUrl && !!this.defaultThumbnail) {\n                this.thumbnailUrl = this.defaultThumbnail;\n            }\n            this.thumbnailUrl = this.appService.updateUrlForCors(this.thumbnailUrl);\n        }\n    }\n\n    get hasLinkBehaviour(): boolean {\n        return this.linkBehavior === \"open\";\n    }\n\n    public get href(): string {\n        return (this.hasLinkBehaviour && this.documentUrl) || \"#\";\n    }\n\n    public get target(): string {\n        return (this.hasLinkBehaviour && this.documentUrl) ? \"_blank\" : \"_self\";\n    }\n\n    public click() : boolean {\n        const isLink = this.hasLinkBehaviour && !!this.documentUrl; // true if this is a regular link (performs the default action)\n        if(isLink)\n            this.searchService.notifyOpenOriginalDocument(this.record);\n        this.thumbnailClicked.emit(isLink); // Can be use to trigger actions\n        return isLink;\n    }\n}","<a *ngIf=\"thumbnailUrl\" href=\"{{href}}\" target=\"{{target}}\" (click)=\"click()\">\n    <img src=\"{{thumbnailUrl}}\">\n</a>","import {Utils} from \"@sinequa/core/base\";\nimport {enLogin, frLogin, deLogin} from \"@sinequa/core/login\";\n\nconst enCore = Utils.merge({}, enLogin);\nconst frCore = Utils.merge({}, frLogin);\nconst deCore = Utils.merge({}, deLogin);\n\nexport { enCore, frCore, deCore };\n","export default {\n    \"heatmap\": {\n        \"name\": \"Heatmap\",\n        \"nodata\": \"No data to display\",\n        \"maxX\": \"Max items on X axis\",\n        \"maxY\": \"Max items on Y axis\",\n        \"rescale\": \"Re-scale axes\",\n        \"colors\": \"Color scheme\",\n        \"blue\": \"Blue\",\n        \"red\": \"Red\",\n        \"green\": \"Green\",\n        \"diverging\": \"Diverging\",\n        \"spectral\": \"Spectral\",\n        \"cool\": \"Cool\",\n        \"defaults\": \"Defaults\",\n        \"showing\": \"Showing {shown, number} of {total, number} tiles\",\n        \"tooltip\": \"{count, plural, one {# item} other {# items}}\"\n    },\n};\n","export * from \"./alerts.module\";\nexport * from \"./alerts-menu/alerts-menu.component\";\nexport * from \"./edit-alert/edit-alert\";\nexport * from \"./manage-alerts/manage-alerts\";","import { Query } from '@sinequa/core/app-utils';\nimport { NodeType, NetworkContext } from '../network-models';\nimport { RecordsProvider, StructuralEdgeType } from './records-provider';\n\n\n/**\n * An extension of RecordsProviders where the records are not provided\n * directly, but instead fetched from the server via a given Query object.\n */\nexport class AsyncRecordsProvider extends RecordsProvider {\n\n    constructor(\n        public name: string,\n        protected nodeType: NodeType,\n        protected edgeTypes: StructuralEdgeType[],\n        protected query: Query,\n        protected hideRecordNode = false\n    ){\n        super(name, nodeType, edgeTypes, [], hideRecordNode);\n    }\n\n\n    /**\n     * Sets a new query to asynchronous records providers.\n     * It will be used on the next call to getData()\n     * @param query The query object we want to use to fetch records\n     */\n    public setQuery(query: Query) {\n        this.query = query;\n    }\n\n\n    // NetworkProvider interface\n\n    /**\n     * Updates the dataset after an asynchronous call to retrieve the records.\n     */\n    getData(context: NetworkContext) {\n        this.context = context;\n        // Query mode\n        this.context.searchService.getResults(this.query, undefined, {searchInactive: true})\n            .subscribe(results => {\n                this.updateDataset(results.records);\n                this.provider.next(this.dataset);\n            });\n    }\n\n}\n    ","import {NgModule, ModuleWithProviders} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {Ng5SliderModule} from \"ng5-slider\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {CollapseModule} from \"@sinequa/components/collapse\";\nimport {BsActionModule} from \"@sinequa/components/action\";   // needed for sq-action-button\nimport {BsSearchModule} from \"@sinequa/components/search\";   // needed for refine facet / didyoumean\nimport {BsAutocompleteModule} from \"@sinequa/components/autocomplete\";  // needed for refine facet\n\nimport {FacetState, ALL_FACETS, DEFAULT_FACETS} from \"../facet.service\";\nimport {BsRefine} from \"./facet-refine/facet-refine\";\nimport {BsFacetBar} from \"./facet-bar/facet-bar\";\nimport {BsMySearch} from \"./facet-mysearch/facet-mysearch\";\nimport {BsFacetRange} from \"./facet-range/facet-range\";\nimport {BsFacetCard} from \"./facet-card/facet-card\";\nimport {BsFacetList} from \"./facet-list/facet-list\";\nimport {BsFacetTree} from \"./facet-tree/facet-tree\";\nimport {BsFacetFilters} from \"./facet-filters/facet-filters\";\nimport {BsFacetMultiComponent} from \"./facet-multi/facet-multi.component\";\nimport { BsFacetTagCloud } from './facet-tag-cloud/facet-tag-cloud';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n\n        IntlModule,\n\n        UtilsModule,\n        CollapseModule,\n        BsActionModule,\n        BsSearchModule,\n        BsAutocompleteModule,\n\n        Ng5SliderModule\n    ],\n    declarations: [\n        BsFacetCard, BsFacetList, BsFacetTree,\n        BsFacetFilters,\n        BsRefine,\n        BsFacetRange, BsMySearch, BsFacetBar,\n        BsFacetMultiComponent,\n        BsFacetTagCloud\n    ],\n    exports: [\n        BsFacetCard, BsFacetList, BsFacetTree,\n        BsFacetFilters,\n        BsRefine,\n        BsFacetRange, BsMySearch, BsFacetBar,\n        BsFacetMultiComponent,\n        BsFacetTagCloud\n    ],\n})\nexport class BsFacetModule {\n    public static forRoot(allFacets: any[]|undefined = undefined, defaultFacets: FacetState[]|undefined = undefined): ModuleWithProviders<BsFacetModule> {\n        return {\n            ngModule: BsFacetModule,\n            providers: [\n                {\n                    provide: ALL_FACETS,\n                    useValue: allFacets\n                },\n                {\n                    provide: DEFAULT_FACETS,\n                    useValue: defaultFacets\n                },\n            ]\n        };\n    }\n}\n","import {Component, Input, ChangeDetectionStrategy} from '@angular/core';\r\nimport {animate, style, transition, trigger} from '@angular/animations';\r\n\r\n@Component({\r\n  selector: 'sqx-tooltip',\r\n  styleUrls: ['./tooltip.component.css'],\r\n  template: `<div class=\"sq-tooltip\" @tooltip>{{ text }}</div>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [\r\n    trigger('tooltip', [\r\n      transition(':enter', [\r\n        style({opacity: 0}),\r\n        animate(300, style({opacity: 1})),\r\n      ]),\r\n      transition(':leave', [\r\n        animate(300, style({opacity: 0})),\r\n      ]),\r\n    ]),\r\n  ],\r\n})\r\nexport class TooltipComponent {\r\n\r\n  @Input() text = '';\r\n}","export default {\n\n    \"userMenu\": {\n        \"user\": \"User\",\n        \"login\": \"Login\",\n        \"overrideUser\": \"Override User\",\n        \"settings\": \"Settings\",\n        \"revertUserOverride\": \"Revert User Override\",\n        \"administration\": \"Administration\",\n        \"logout\": \"Logout\",\n\n        \"language\": \"Language\",\n        \n        \"resetUserSettings\": {\n            \"menu\": \"Reset user settings\",\n            \"modalTitle\": \"Reset user settings\",\n            \"modalMessage\": \"You are about to reset ALL your user data (recent queries, collections, alerts, preferences, etc.). Do you want to continue?\",\n            \"modalConfirmButton\": \"Confirm\",\n            \"successMessage\": \"Reset user settings succefully\",\n            \"errorMessage\": \"Reset user settings failed\"\n        }\n    },\n\n    \"editUserSettings\": {\n        \"title\": \"Settings\",\n        \"language\": \"UI Language\",\n        \"pageSize\": \"Number of results per page\",\n        \"email\": \"Email\"\n    }\n\n};\n","import {Injectable, Optional, Inject, OnDestroy, InjectionToken} from \"@angular/core\";\nimport {Subject, Observable, concat, of, throwError} from \"rxjs\";\nimport {map, last} from \"rxjs/operators\";\nimport IntlMessageFormat from \"intl-messageformat\";\nimport memoizeFormatConstructor from \"intl-format-cache\";\n// TODO - check loading of locale data per locale - the ponyfill doesn't seem to work\nimport \"@formatjs/intl-relativetimeformat/polyfill\";\nimport \"intl-pluralrules\";\nimport get from \"lodash/get\";\nimport {Utils, MapOf, JsonObject} from \"@sinequa/core/base\";\n// We support loading d3 bundled and unbundled as it is typically easier\n// for others to integrate bundled examples but some 3rd party libs (eg swimlane/charts)\n// load d3 unbundled.\nimport {FormatLocaleDefinition, formatDefaultLocale} from \"d3-format\";\nimport {TimeLocaleDefinition, timeFormatDefaultLocale} from \"d3-time-format\";\nimport * as d3 from \"d3\";\nimport moment from \"moment\";\n\n/**\n * @ignore\n */\nconst formatters = {\n    getMessageFormat: memoizeFormatConstructor(IntlMessageFormat),\n    getNumberFormat: memoizeFormatConstructor(Intl.NumberFormat),\n    getDateTimeFormat: memoizeFormatConstructor(Intl.DateTimeFormat),\n    getRelativeTimeFormat: memoizeFormatConstructor(Intl.RelativeTimeFormat),\n    getPluralRules: memoizeFormatConstructor(Intl.PluralRules)\n};\n\n/**\n * @ignore\n */\nconst DATE_TIME_FORMAT_OPTIONS = [\n    \"dateStyle\",\n    \"timeStyle\",\n    \"localeMatcher\",\n    \"timeZone\",\n    \"hour12\",\n    \"hourCycle\",\n    \"formatMatcher\",\n    \"weekday\",\n    \"era\",\n    \"year\",\n    \"month\",\n    \"day\",\n    \"hour\",\n    \"minute\",\n    \"second\",\n    \"timeZoneName\",\n];\n\n/**\n * @ignore\n */\nconst NUMBER_FORMAT_OPTIONS = [\n    \"localeMatcher\",\n    \"style\",\n    \"currency\",\n    \"currencyDisplay\",\n    \"useGrouping\",\n    \"minimumIntegerDigits\",\n    \"minimumFractionDigits\",\n    \"maximumFractionDigits\",\n    \"minimumSignificantDigits\",\n    \"maximumSignificantDigits\",\n];\n\n/**\n * @ignore\n */\nconst RELATIVE_TIME_FORMAT_OPTIONS = [\n    \"localeMatcher\",\n    \"numeric\",\n    \"style\"\n];\n\n/**\n * Describes event emitted by {@link IntlService} when the current locale changes\n */\nexport interface LocaleChangeEvent {\n    /**\n     * The name of the newly selected locale\n     */\n    locale: string;\n}\n\n/**\n * Describes the data that can be set in a Sinequa locale. Instances are normally\n * defined in application locale modules which can be included statically or loaded\n * dynamically\n */\nexport interface LocaleData {\n    /**\n     * Options pertaining to the `Intl` API\n     */\n    intl: {\n        locale: string\n    };\n    /**\n     * Options pertaining to the `Moment.js` library\n     */\n    moment?: { // default to built-in en-us, data is auto set by moment.defineLocale when the locale module is loaded\n        locale: string\n    };\n    /**\n     * Options pertaining to the `D3.js` library\n     */\n    d3?: {\n        locale: string,\n        format: FormatLocaleDefinition,\n        time: TimeLocaleDefinition\n    };\n    /**\n     * The messages (ICU Message syntax) for this locale\n     */\n    messages: JsonObject;\n}\n\n/**\n * Describes a Sinequa locale\n */\nexport interface Locale {\n    /**\n     * The name identifying the locale\n     */\n    name: string;\n    /**\n     * A display name for the locale\n     */\n    display: string;\n    /**\n     * The directionality of text in this locale (left-to-right or right-to-left)\n     */\n    direction?: \"ltr\" | \"rtl\";\n    /**\n     * The locale data for the locale\n     */\n    data?: LocaleData;\n}\n\n/**\n * @ignore\n */\ninterface NextLang {\n    start: number;\n    end: number;\n    lang1: number;\n    lang2: number;\n}\n\n\n// moment needs to be set globally to load moment locales successfully when the locales are bundled in the main rollup bundle\n// see: https://github.com/rollup/rollup/issues/641\nimport \"./import-moment\";\n\n/**\n * Describes the locales configuration object defined by an application and used by the {@link IntlService}\n */\nexport interface LocalesConfig {\n    /**\n     * The default locale\n     */\n    defaultLocale: Locale;\n    /**\n     * The set of locales supported by the application\n     */\n    locales?: Locale[];\n    /**\n     * An optional loader for the dynamic loading of locale data\n     * for locales that do not define the data statically\n     */\n    loadLocale?(locale: string): Observable<LocaleData>;\n}\n\n/**\n * An injection token used to initialize the [locales configuration]{@link LocalesConfig} of {@link IntlModule}\n */\nexport const LOCALES_CONFIG = new InjectionToken<LocalesConfig>('LOCALES_CONFIG');\n\n/**\n * Describes the object to specify custom ICU Message formats\n */\nexport interface IntlFormats {\n    /**\n     * Format options for dates\n     */\n    date?: MapOf<Intl.DateTimeFormatOptions>;\n    /**\n     * Format options for times\n     */\n    time?: MapOf<Intl.DateTimeFormatOptions>;\n    /**\n     * Format options for numbers\n     */\n    number?: MapOf<Intl.NumberFormatOptions>;\n    /**\n     * Format options for relative times\n     */\n    relativeTime?: MapOf<Intl.RelativeTimeFormatOptions>;\n}\n\n/**\n * Describes a general configuration object for the {@link IntlModule}\n */\nexport interface IntlConfig {\n    /**\n     * Custom formats for ICU Message processing\n     */\n    formats?: IntlFormats;\n}\n\n/**\n * An injection token used to initialize the [general configuration]{@link IntlConfig} of {@link IntlModule}\n */\nexport const INTL_CONFIG = new InjectionToken<IntlConfig>('INTL_CONFIG');\n\n/**\n * Default custom ICU Message formats\n */\nconst DEFAULT_FORMATS: IntlFormats = {\n    date: {\n        sqDateTime: {\n            day: \"2-digit\",\n            month: \"2-digit\",\n            year: \"numeric\",\n            hour: \"2-digit\",\n            minute: \"2-digit\",\n            second: \"2-digit\"\n        },\n        sqDate: {\n            day: \"2-digit\",\n            month: \"2-digit\",\n            year: \"numeric\"\n        },\n        sqYear: {\n            year: \"numeric\"\n        },\n        sqMonthYear: {\n            month: \"short\",\n            year: \"numeric\"\n        }\n    },\n    time: {\n    },\n    number: {\n        sqWeek: {\n            minimumIntegerDigits: 2,\n            useGrouping: false\n        },\n        sqYear: {\n            useGrouping: false\n        },\n        sqNoGrouping: {\n            useGrouping: false\n        },\n        sqZeroDecimalPlaces: {\n            maximumFractionDigits: 0\n        },\n        sqOneDecimalPlace: {\n            maximumFractionDigits: 1\n        },\n        sqTwoDecimalPlaces: {\n            maximumFractionDigits: 2\n        },\n        sqThreeDecimalPlaces: {\n            maximumFractionDigits: 3\n        },\n        sqFourDecimalPlaces: {\n            maximumFractionDigits: 4\n        },\n        sqFiveDecimalPlaces: {\n            maximumFractionDigits: 5\n        }\n    }\n};\n\n/* eslint-disable jsdoc/check-alignment,jsdoc/check-indentation,jsdoc/newline-after-description */\n/**\n * This service provides methods for managing locales and for formatting dates, numbers and strings using\n * [ICU Message syntax]{@link https://formatjs.io/guides/message-syntax/}. [Messages]{@link LocaleData#messages} stored\n * in a locale's data are referenced using a key in the following form: `msg#<JSONPath>`. Given the following messages:\n``` json\n{\n    \"myComponent\": {\n        \"title\": \"Component: {name}\",\n        \"footer\": \"Created on {created, date, medium} by {author}\"\n    }\n}\n```\n * this key: `msg#myComponent.footer` references myComponent's footer message. The message itself uses\n * ICU Message syntax.\n *\n * This service registers a number of [default custom ICU formats]{@link DEFAULT_FORMATS}. These can be overridden or\n * extended by providing the [INTL_CONFIG]{@link INTL_CONFIG} injection token.\n */\n/* eslint-enable jsdoc/check-alignment, jsdoc/check-indentation, jsdoc/newline-after-description */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class IntlService implements OnDestroy {\n    /**\n     * The prefix for ICU messages to be retrieved from [LocaleData.messages]{@link LocaleData#messages}\n     * by {@link formatMessage}\n     */\n    readonly messagePrefix = \"msg#\";\n    /**\n     * An alternative prefix for inline ICU messages processed by {@link formatMessage}\n     */\n    readonly textPrefix = \"txt#\";\n    /**\n     * The available locales\n     */\n    locales: Locale[];\n    /** The current locale */\n    currentLocale: Locale;\n    protected intlLocale: string;\n    /** The current direction */\n    direction: \"ltr\" | \"rtl\";\n    protected _events: Subject<LocaleChangeEvent>;\n    protected formats: IntlFormats;\n\n    constructor(\n        @Optional() @Inject(INTL_CONFIG) protected intlConfig: IntlConfig,\n        @Optional() @Inject(LOCALES_CONFIG) protected localesConfig: LocalesConfig\n    ) {\n        if (!this.intlConfig) {\n            this.intlConfig = {};\n        }\n        if (!localesConfig) {\n            if (!localesConfig) {\n                console.error(\"LOCALES_CONFIG has not been provided by the calling app. \" +\n                    \"Please import IntlModule using the forRoot method to which you should pass a LocalesConfig object\");\n            }\n        }\n        this._events = new Subject<LocaleChangeEvent>();\n        this.locales = localesConfig.locales || [localesConfig.defaultLocale];\n    }\n\n    private static getLanguage(name: string) {\n        const sepPos = name.indexOf(\"-\");\n        if (sepPos === -1) {\n            return name;\n        }\n        return name.substring(0, sepPos);\n    }\n\n    private static getBrowserLanguages(): string[] {\n        if ((navigator as any).languages) {\n            return (navigator as any).languages;\n        }\n        const language = navigator.language || (navigator as any).userLanguage ||\n            (navigator as any).browserLanguage || (navigator as any).systemLanguage;\n        return !!language ? [language] : [];\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n    }\n\n    /**\n     * The observable events emitted by this service\n     */\n    get events(): Observable<LocaleChangeEvent> {\n        return this._events;\n    }\n\n    private getInitialLocale(): Locale {\n        const language = window.localStorage.getItem(\"sinequa-locale\");\n        const languages = !!language ? [language] : IntlService.getBrowserLanguages();\n        let locale = this.getLocale(languages);\n        if (locale) {\n            return locale;\n        }\n        locale = this.getLocale(languages, true);\n        if (locale) {\n            return locale;\n        }\n        return this.localesConfig.defaultLocale;\n    }\n\n    /**\n     * Initialize the service. The current locale is initialized to either the `sinequa-locale` local\n     * storage value, the browser language or the default locale.\n     *\n     * This method is called automatically by the {@link IntlModule} at application startup.\n     *\n     * @return An observable of the current locale\n     */\n    init(): Observable<string> {\n        // Set up formats\n        this.formats = Utils.merge(DEFAULT_FORMATS, this.intlConfig.formats);\n        // Load default locale\n        let observable = this.use(this.localesConfig.defaultLocale.name, false);\n        const initialLocale = this.getInitialLocale();\n        if (initialLocale !== this.localesConfig.defaultLocale) {\n            // Load initial locale if different to default\n            console.log(\"Setting initial locale: \", initialLocale.name);\n            observable = concat<string>(observable, this.use(initialLocale.name, false)).pipe(last<string>());\n        }\n        Utils.subscribe(observable,\n            (value) => {\n                console.log(\"Initial locale set: \", value);\n            });\n        return observable;\n    }\n\n    private loadData(locale: string): Observable<LocaleData> {\n        if (!this.localesConfig.loadLocale) {\n            return throwError(\"Dynamic locale loading has not been implemented in the calling app - \"  +\n                \"please add a loadLocale handler to your LocalesConfig\");\n        }\n        return this.localesConfig.loadLocale(locale);\n    }\n\n    private getLocale(names: string | string[], approximate = false): Locale | undefined {\n        if (typeof names === \"string\") {\n            names = [names];\n        }\n        for (const name of names) {\n            const locale = this.locales.find((locale1) => {\n                if (locale1.name === name) {\n                    return true;\n                }\n                if (approximate && IntlService.getLanguage(locale1.name) === IntlService.getLanguage(name)) {\n                    return true;\n                }\n                return false;\n            });\n            if (locale) {\n                return locale;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Change the current locale. The change is made asynchronously as the locale may need to be\n     * downloaded. The current locale is optionally stored in local storage (`sinequa-locale`)\n     * to be picked up the next time the service is initialized\n     *\n     * @param locale The name of the locale to use\n     * @param store If `true` the current locale is stored in local storage\n     */\n    use(locale: string, store = true): Observable<string> {\n        const newLocale = this.getLocale(locale);\n        if (!newLocale) {\n            return throwError({error: \"unsupported locale\"});\n        }\n\n        const observable = !!newLocale.data ? of(newLocale.data) : this.loadData(locale);\n        Utils.subscribe<LocaleData>(observable,\n            (data) => {\n                this.currentLocale = newLocale;\n\n                if (store) {\n                    window.localStorage.setItem(\"sinequa-locale\", this.currentLocale.name);\n                }\n\n                this.direction = this.currentLocale.direction || \"ltr\";\n\n                if (!this.currentLocale.data) {\n                    this.currentLocale.data = data;\n                }\n\n                // Set moment locale\n                if (this.currentLocale.data.moment) {\n                    // Set (and define if necessary) moment locale (it auto-defines when we are not bundled)\n                    if (moment.locale(this.currentLocale.data.moment.locale) !== this.currentLocale.data.moment.locale) {\n                        console.log(`moment locale not defined: ${this.currentLocale.data.moment.locale} - defaulting to en`);\n                        moment.locale(\"en\");\n                    }\n                }\n                else {\n                    moment.locale(\"en\");\n                }\n\n                // Set d3 locale\n                if (this.currentLocale.data.d3) {\n                    formatDefaultLocale(this.currentLocale.data.d3.format);\n                    timeFormatDefaultLocale(this.currentLocale.data.d3.time);\n                    d3.formatDefaultLocale(this.currentLocale.data.d3.format);\n                    d3.timeFormatDefaultLocale(this.currentLocale.data.d3.time);\n                }\n\n                if (this.currentLocale.data.intl && this.currentLocale.data.intl.locale) {\n                    this.intlLocale = this.currentLocale.data.intl.locale;\n                }\n                else {\n                    this.intlLocale = this.localesConfig.defaultLocale.data ? this.localesConfig.defaultLocale.data.intl.locale : \"en\";\n                }\n                return of(this.intlLocale);\n            });\n\n        const observable2 = observable.pipe(map((value) => {\n            return this.currentLocale.name;\n        }));\n\n        Utils.subscribe(observable2,\n            (name) => {\n                this._events.next({locale: name});\n            });\n\n        return observable2;\n    }\n\n    private getDefaultMessages(): any {\n        const _default = this.locales.find((value) => !!value.data && !!value.data.messages);\n        if (_default) {\n            return _default.data && _default.data.messages;\n        }\n        return {};\n    }\n\n    private getMessages(): any {\n        let messages;\n        if (this.currentLocale && this.currentLocale.data) {\n            messages = this.currentLocale.data.messages;\n        }\n        if (!messages) {\n            messages = this.getDefaultMessages();\n        }\n        return messages;\n    }\n\n    /**\n     * Get the message from the current locale that corresponds to the passed `key`.\n     * If the is not prefixed by {@link messagePrefix} then `null` is returned\n     *\n     * @param key The message key\n     */\n    getMessage(key: string): string | undefined {\n        if (!Utils.startsWith(key, this.messagePrefix)) {\n            return undefined;\n        }\n        key = key.substr(this.messagePrefix.length);\n        const messages = this.getMessages();\n        let message = get(messages, key);\n        if (!message) {\n            const defaultMessages = this.getDefaultMessages();\n            if (messages !== defaultMessages) {\n                message = get(defaultMessages, key);\n            }\n        }\n        return message;\n    }\n\n    // Returned start and end are for the text BEFORE the language specifier and so refer to the previous\n    // language not the one returned by the same call to this method\n    private nextLang(text: string, start: number, allowNone: boolean): NextLang | undefined {\n        for (let i = start, ic = text.length - 3; i < ic; i++) {\n            if (text[i] === \"[\" && text[i + 3] === \"]\") {\n                return {\n                    start,\n                    end: i,\n                    lang1: text.charCodeAt(i + 1),\n                    lang2: text.charCodeAt(i + 2)\n                };\n            }\n        }\n        if (allowNone) {\n            return {\n                start,\n                end: text.length,\n                lang1: -1,\n                lang2: -1\n            };\n        }\n        return undefined;\n    }\n\n    // ([nnn])<default>[fr]<french>[de]<german>...\n    private sysLang(text: string): string {\n        if (!text) {\n            return text;\n        }\n        let iStart = 0;\n        const len = text.length;\n        // Skip order\n        let i = 0;\n        if (text[i] === \"[\") {\n            while (i < len && text[i] >= \"0\" && text[i] <= \"9\") {\n                i++;\n            }\n            if (text[i] === \"]\") {\n                iStart = i + 1;\n            }\n        }\n        // Pick out default value\n        const defaultLang = this.nextLang(text, iStart, false);\n        if (!defaultLang) {\n            return text; // Not a sys lang formatted text\n        }\n        // Look for a matching language\n        const lang1 = this.currentLocale.name.charCodeAt(0);\n        const lang2 = this.currentLocale.name.charCodeAt(1);\n        let curLang: NextLang | undefined = defaultLang;\n        while (curLang) {\n            if (lang1 === curLang.lang1 && lang2 === curLang.lang2) {\n                // We have a matching language, get its text\n                const nextLang = this.nextLang(text, curLang.end + 4, true);\n                return text.substring(nextLang!.start, nextLang!.end);\n            }\n            else {\n                curLang = this.nextLang(text, curLang.end + 4, false);\n            }\n        }\n        // return default language text\n        return text.substring(defaultLang.start, defaultLang.end);\n    }\n\n    private processFormatMessage(message: string, values = {}): string {\n        const hasValues = Object.keys(values).length > 0;\n        if (!hasValues) {\n            return message;\n        }\n        if (message) {\n            try {\n                const formatter = formatters.getMessageFormat(message, this.intlLocale, this.formats, {formatters});\n                const formattedMessage = formatter.format(values);\n                return formattedMessage;\n            }\n            catch (e) {\n                console.log(\"IntlService.processFormatMessage error:\", e);\n                return message;\n            }\n        }\n        else {\n            return message;\n        }\n    }\n\n    /**\n     * Format a message identified by a `key`. Any values referenced\n     * by the message are taken from an optional `values` map. The key can be\n     * in a variety of forms:\n     * * a Sinequa \"syslang\" string: `apple[fr]pomme[de]Apfel`\n     * * a message key resolved in the [messages]{@link LocaleData#messages} of the current\n     * locale:  `msg#path1.path2.path3`\n     * * an ICU message using the `txt#` prefix: `txt#Hello {name}`\n     *\n     * @param key The message identifier\n     * @param values Values referenced by an ICU message\n     * @return The formatted message. If the key is not resolved then it is returned unprocessed\n     */\n    formatMessage(key: string, values?: MapOf<any>): string {\n        key = Utils.trim(key);\n        const sysLangStr = this.sysLang(key);\n        if (sysLangStr !== key) {\n            return sysLangStr;\n        }\n        const _values = {};\n        if (values) {\n            for (const valueName of Object.keys(values)) {\n                const value = values[valueName];\n                if (value && Utils.isString(value)) {\n                    _values[valueName] = this.formatMessage(value);\n                }\n                else {\n                    _values[valueName] = value;\n                }\n            }\n        }\n        if (Utils.startsWith(key, this.messagePrefix)) {\n            if (Utils.eq(key, this.messagePrefix)) {\n                return key;\n            }\n            let message = this.getMessage(key);\n            if (!Utils.isString(message)) {\n                message = key;\n            }\n            const formattedMessage = this.processFormatMessage(message, _values);\n            return formattedMessage;\n        }\n        else if (Utils.startsWith(key, this.textPrefix)) {\n            if (Utils.eq(key, this.textPrefix)) {\n                return key;\n            }\n            key = key.substr(this.textPrefix.length);\n            const formattedMessage = this.processFormatMessage(key, _values);\n            return formattedMessage;\n        }\n        else {\n            return key;\n        }\n    }\n\n    /**\n     * Format an ICU Message string\n     *\n     * @param text An ICU Message to format\n     * @param values Values referenced by an ICU message\n     */\n    formatText(text: string, values?: {}): string {\n        const formattedMessage = this.processFormatMessage(text, values);\n        return formattedMessage;\n    }\n\n    /**\n     * Parse a date string in the current locale - eg `04/09/1986`\n     *\n     * @param value A date string\n     * @returns The parse `Date` or `undefined` if the date cannot be parsed\n     */\n    parseDate(value: string): Date | undefined {\n        const m = moment(value, \"L\");\n        if (m.isValid()) {\n            return m.toDate();\n        }\n        return undefined;\n    }\n\n    private getNamedFormat(type: string, name: string): Intl.DateTimeFormatOptions | Intl.NumberFormatOptions | undefined {\n        const format = this.formats && this.formats[type] && this.formats[type][name];\n        if (format) {\n            return format;\n        }\n        console.warn(`IntlService.getNamedFormat - not found - type: ${type}, name: ${name}`);\n        return undefined;\n    }\n\n    private filterProps(props: {[k: string]: any}, whitelist: string[], defaults: {[k: string]: any} = {}): any {\n        return whitelist.reduce<{[k: string]: string}>((filtered, name) => {\n            if (props.hasOwnProperty(name)) {\n                filtered[name] = props[name];\n            }\n            else if (defaults.hasOwnProperty(name)) {\n                filtered[name] = defaults[name];\n            }\n            return filtered;\n        }, {});\n    }\n\n    /**\n     * Format a date in the current locale according to the passed options. If the passed `value` is not a `Date`\n     * then one is constructed from it.\n     *\n     * @param value The date to format\n     * @param options The options can include a custom format\n     */\n    formatDate(value: string | number | Date, options: Intl.DateTimeFormatOptions & { format?: string } = {}): string {\n        const {format} = options;\n        const date = value instanceof Date ? value : new Date(value);\n        const defaults = (format && this.getNamedFormat(\"date\", format)) || {};\n        const filteredOptions = this.filterProps(options, DATE_TIME_FORMAT_OPTIONS, defaults);\n        try {\n            return formatters.getDateTimeFormat(this.intlLocale, filteredOptions).format(date);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatDate:\", e);\n        }\n        return String(date);\n    }\n\n    /**\n     * Format a time in the current locale according to the passed options. If the passed `value` is not a `Date` then one is\n     * constructed from it.\n     *\n     * @param value The date to format\n     * @param options The options can include a custom format\n     */\n    formatTime(value: string | number | Date, options: Intl.DateTimeFormatOptions & { format?: string } = {}): string {\n        const {format} = options;\n        const date = value instanceof Date ? value : new Date(value);\n        const defaults = (format && this.getNamedFormat(\"time\", format)) || {};\n        let filteredOptions = this.filterProps(options, DATE_TIME_FORMAT_OPTIONS, defaults);\n        if (!filteredOptions.hour && !filteredOptions.minute && !filteredOptions.second) {\n            // Add default formatting options if hour, minute, or second isn't defined.\n            filteredOptions = Object.assign({},\n                filteredOptions,\n                {\n                    hour: 'numeric',\n                    minute: 'numeric'\n                });\n        }\n        try {\n            return formatters.getDateTimeFormat(this.intlLocale, filteredOptions).format(date);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatTime:\", e);\n        }\n        return String(date);\n    }\n\n    private makeRelativeTimeParams(value: Date): { value: number, unit: Intl.RelativeTimeUnit } {\n        const diff = value.getTime() - Utils.now.getTime();\n        const absDiff = Math.abs(diff);\n        if (absDiff < Utils.oneSecond) {\n            return { value: 0, unit: \"seconds\" };\n        }\n        else if (absDiff < Utils.oneMinute) {\n            return { value: Utils.roundAway(diff / Utils.oneSecond), unit: \"seconds\" };\n        }\n        else if (absDiff < Utils.oneHour) {\n            return { value: Utils.roundAway(diff / Utils.oneMinute), unit: \"minutes\" };\n        }\n        else if (absDiff < Utils.oneDay) {\n            return { value: Utils.roundAway(diff / Utils.oneHour), unit: \"hours\" };\n        }\n        else if (absDiff < (Utils.oneDay * 30)) {\n            return { value: Utils.roundAway(diff / Utils.oneDay), unit: \"days\" };\n        }\n        else if (absDiff < (Utils.oneDay * 365)) {\n            return { value: Utils.roundAway(diff / (Utils.oneDay * 30)), unit: \"months\" };\n        }\n        else {\n            return { value: Utils.roundAway(diff / (Utils.oneDay * 365)), unit: \"years\" };\n        }\n    }\n\n    /**\n     * Format a relative time in the current locale according to the passed options\n     *\n     * @param value The relative time to format. Negative number values represent times in the past.\n     * If a Date value is passed then a number value and unit are deduced automatically based on\n     * the current date and time.\n     * @param unit The relative time unit (eg years, days or seconds). Must be passed if value\n     * is a number.\n     * @param options The options can include a custom format\n     */\n    formatRelativeTime(\n        value: string | number | Date | undefined, unit?: Intl.RelativeTimeUnit,\n        options: Intl.RelativeTimeFormatOptions & { format?: string } = {}\n    ): string {\n        if (value === undefined) {\n            return \"\";\n        }\n        if (Utils.isString(value)) {\n            value = new Date(value);\n        }\n        if (Utils.isDate(value)) {\n            const params =  this.makeRelativeTimeParams(value);\n            value = params.value;\n            unit = params.unit;\n        }\n        const { format } = options;\n        const defaults = (format && this.getNamedFormat(\"relativeTime\", format)) || {};\n        const filteredOptions = this.filterProps(options, RELATIVE_TIME_FORMAT_OPTIONS, defaults);\n        if (!filteredOptions.numeric) {\n            filteredOptions.numeric = \"auto\"; // default is always - we prefer auto\n        }\n        try {\n            return formatters.getRelativeTimeFormat(this.intlLocale, filteredOptions).format(value, unit);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatRelativeTime:\", e);\n        }\n        return String(value);\n    }\n\n    /**\n     * Format a number in the current locale\n     *\n     * @param value The number to format\n     * @param options The options can include a custom format\n     */\n    formatNumber(value: any, options: Intl.NumberFormatOptions & { format?: any } = {}): string {\n        const {format} = options;\n        const defaults = format && this.getNamedFormat(\"number\", format);\n        const filteredOptions = this.filterProps(options, NUMBER_FORMAT_OPTIONS, defaults);\n        try {\n          return formatters.getNumberFormat(this.intlLocale, filteredOptions).format(value);\n        }\n        catch (e) {\n            console.warn(\"IntlService.formatNumber:\", e);\n        }\n        return String(value);\n    }\n}\n","export * from \"./public-api\";","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\n\nimport { IntlModule } from '@sinequa/core/intl';\nimport { UtilsModule } from \"@sinequa/components/utils\";\nimport { MoneyTimelineComponent } from \"./money-timeline/money-timeline.component\";\nimport { BsHeatmapModule } from \"@sinequa/analytics/heatmap\";\nimport { BsActionModule } from \"@sinequa/components/action\";\nimport { MoneyCloudComponent } from \"./money-cloud/money-cloud.component\";\n\n\n@NgModule({\n\n    imports: [\n        CommonModule,\n        IntlModule,\n        UtilsModule,\n        BsHeatmapModule,\n        BsActionModule\n    ],\n    declarations: [\n        MoneyTimelineComponent,\n        MoneyCloudComponent\n    ],\n    exports: [\n        MoneyTimelineComponent,\n        MoneyCloudComponent\n    ],\n})\nexport class FinanceModule {}","import { Utils } from '@sinequa/core/base';\nimport { Node, Edge, NodeType, EdgeType, NetworkProvider, NetworkDataset, NetworkContext} from '../network-models';\nimport { Subject } from 'rxjs';\nimport { Action } from '@sinequa/components/action';\n\n\n/**\n * Base implementation of the NetworkProvider interface with convenience\n * methods to create nodes and edges, and default features which should apply\n * to all providers.\n */\nexport class BaseProvider implements NetworkProvider {\n\n    protected readonly provider = new Subject<NetworkDataset>();\n    public dataset = new NetworkDataset();\n    public active = true;\n\n    public readonly EDGESEPARATOR = \"~~~EDGE~~~\";\n\n    /** Action to turn the provider on or off */\n    public readonly activateAction: Action;\n    /** Action to reset the provider */\n    public readonly resetAction: Action;\n\n    public context: NetworkContext;\n\n    constructor(\n        public name: string\n    ) {\n        this.activateAction = new Action({\n            icon: this.active? \"fas fa-toggle-on fa-fw\" : \"fas fa-toggle-off fa-fw\",\n            text: this.active? \"msg#network.actions.active\" : \"msg#network.actions.inactive\",\n            title: \"msg#network.actions.toggle\",\n            action: (action: Action) => {\n                this.active = !this.active\n                action.icon = this.active? \"fas fa-toggle-on fa-fw\" : \"fas fa-toggle-off fa-fw\";\n                action.text = this.active? \"msg#network.actions.active\" : \"msg#network.actions.inactive\";\n                this.getData(this.context);\n            }\n        });\n        this.resetAction = new Action({\n            icon: \"fas fa-trash-alt fa-fw\",\n            text: \"msg#network.actions.reset\",\n            title: \"msg#network.actions.resetTitle\",\n            action: () => {\n                this.dataset.clear();\n                this.getData(this.context);\n            }\n        });\n    }\n\n    /** Returns a standard ID for an edge between two given nodes */\n    protected getEdgeId(node1: Node, node2: Node): string {\n        return node1.id + this.EDGESEPARATOR + node2.id;\n    }\n    \n    /** Returns a standard ID for a node with a given type and \"value\" */\n    protected getNodeId(type: NodeType, value: string): string {\n        return `${type.name}:${value}`;\n    }\n\n    /** Retrieves the \"value\" of the node from its ID */\n    protected getNodeValue(node: Node): string {\n        return node.id.substr(node.type.name.length+1);\n    }\n\n    /**\n     * Creates a new Node object\n     * @param type The NodeType of the node\n     * @param value The \"value\" of the node (eg. \"BILL GATES\")\n     * @param label (default: display = value) The \"display value\" of the node (eg. \"Bill Gates\")\n     * @param visible (default: true) Whether the node should be visible or not\n     * @param customProps (default: {}) Custom properties to add to the node object\n     * @param count (default: 1) A \"count\" property that can reflect the \"size\" or \"importance\" of the node in the network (note that the count property accumulates when nodes are merged)\n     */\n    protected createNode(type: NodeType, value: string, label?: string, visible = true, customProps = {}, count = 1): Node {\n        // Apply formatter if any\n        if(type.field) {\n            const col = this.context.appService.getColumn(type.field);\n            if(col?.formatter) {\n                label = this.context.appService.formatService.formatFieldValue({value, display: label}, col);\n            }\n        }\n        // Create node\n        const node: Node = {\n            id: this.getNodeId(type, value),\n            label: label || value,\n            type,\n            provider: this,\n            visible,\n            count,\n            context: this.context\n        }\n        Utils.extend(node, customProps);\n        let options;\n        if(typeof type.nodeOptions === \"function\") {\n            options = type.nodeOptions(node, type);\n        }\n        else {\n            options = type.nodeOptions;\n        }\n        return Utils.extend(node, options);\n    }\n    \n    /**\n     * Creates a new Edge object\n     * @param type The EdgeType of that Edge\n     * @param fromNode The \"from\" Node object to which this edge is attached\n     * @param toNode The \"to\" Node object to which this edge is attached\n     * @param fieldValue (default: undefined) An optional value, which, if provided, allows to filter the search with a select (\"type.field = fieldValue\")\n     * @param visible (default: true) Whether the edge should be visible or not\n     * @param customProps (default: {}) Custom properties to add to this edge\n     * @param count (default: 1) A \"count\" property that can reflect the \"size\" or \"importance\" of the edge in the network (note that the count property accumulates when edges are merged)\n     * @param directed (default: false) Whether the edge is directed or undirected. If true, an arrow is drawn on the edge.\n     * @param relation (default: undefined) If provided, the \"relation\" is a label displayed in the middle of the edge\n     */\n    protected createEdge(type: EdgeType, fromNode: Node, toNode: Node, fieldValue: string | undefined = undefined, visible = true, customProps = {}, count = 1, directed = false, relation?: string): Edge {\n        const edge: Edge = {\n            id: this.getEdgeId(fromNode, toNode),\n            from: fromNode.id,\n            to: toNode.id,\n            fieldValue,\n            type,\n            visible,\n            count,\n            provider: this,\n            context: this.context\n        }\n        Utils.extend(edge, customProps);\n        if(directed) {\n            edge[\"arrows\"] = {middle: {scaleFactor: 0.3, enabled: true}};\n        }\n        if(relation) {\n            edge[\"label\"] = relation;\n            edge[\"labels\"] = [relation];\n            edge[\"font\"] = {size: 5, color: \"#808080\"};            \n        }\n        let options: {[key: string]: any};\n        if(typeof type.edgeOptions === \"function\") {\n            options = type.edgeOptions([fromNode, toNode], edge, type);\n        }\n        else {\n            options = type.edgeOptions;\n        }\n        return Utils.extend(edge, options);\n    }\n    \n\n    // Implementation of the NetworkProvider interface\n\n    getProvider(): Subject<NetworkDataset> {\n        return this.provider;\n    }\n\n    getData(context: NetworkContext) {\n        this.context = context;\n    }\n\n    onDatasetsMerged(dataset: NetworkDataset) {\n        \n    }\n\n    onNodesInserted(nodes: Node[]) {\n        \n    }\n    \n    onNodeClicked(node: Node | undefined) {\n        \n    }\n\n    onEdgeClicked(edge: Edge | undefined) {\n        \n    }\n\n    /**\n     * By default, the base provider includes an action to turn the provider\n     * on or off, and an action to reset the data from this provider\n     */\n    getProviderActions(): Action[] {\n        return [this.activateAction, this.resetAction];\n    }\n\n    /**\n     * By default the base provider includes an action to filter the search if a clicked\n     * node has a \"field\" property\n     * @param node The clicked node\n     */\n    getNodeActions(node: Node): Action[] {\n        const actions: Action[] = []\n        if(this.active && node.provider === this && node.type.field) {\n            actions.push(new Action({\n                icon: \"fas fa-filter\",\n                title: this.context.intlService.formatMessage(\"msg#network.actions.filterSearch\", {label: node.label}),\n                action: () => {\n                    const expr = this.context.exprBuilder.makeExpr(node.type.field!, this.getNodeValue(node), node.label);\n                    node.context.searchService.query.addSelect(expr, node.context.name);\n                    node.context.searchService.search();\n                }\n            }));\n        }\n        return actions;\n    }\n\n    /**\n     * By default the base provider includes an action to filter the search if a clicked\n     * edge has a \"type.field\" property and a \"fieldValue\" (alternatively, an action\n     * is created if the 2 adjacent nodes can be filtered, ie they both have a \"field\"\n     * property)\n     * @param edge The clicked edge\n     */\n    getEdgeActions(edge: Edge): Action[] {\n        const actions: Action[] = [];\n        const nodeFrom = edge.context.nodes.get(edge.from);\n        const nodeTo = edge.context.nodes.get(edge.to);\n        if(this.active && edge.provider === this) {\n            if(edge.type.field && edge.fieldValue) {\n                actions.push(new Action({\n                    icon: \"fas fa-filter\",\n                    title: this.context.intlService.formatMessage(\"msg#network.actions.filterSearch\", {label: edge.fieldValue}),\n                    action: () => {\n                        const expr = this.context.exprBuilder.makeExpr(edge.type.field!, edge.fieldValue!);\n                        edge.context.searchService.query.addSelect(expr, edge.context.name);\n                        edge.context.searchService.search();\n                    }\n                }));\n            }\n            else if(nodeFrom && nodeTo && nodeFrom.type.field && nodeTo.type.field) {\n                actions.push(new Action({\n                    icon: \"fas fa-filter\",\n                    title: this.context.intlService.formatMessage(\"msg#network.actions.filterSearch2\", {label1: nodeFrom.label, label2: nodeTo.label}),\n                    action: () => {\n                        const exprFrom = this.context.exprBuilder.makeExpr(nodeFrom.type.field!, this.getNodeValue(nodeFrom), nodeFrom.label);\n                        const exprTo = this.context.exprBuilder.makeExpr(nodeTo.type.field!, this.getNodeValue(nodeTo), nodeTo.label);\n                        const expr = this.context.exprBuilder.concatAndExpr([exprFrom, exprTo]);\n                        edge.context.searchService.query.addSelect(expr, edge.context.name);\n                        edge.context.searchService.search();\n                    }\n                }));\n            }\n            \n        }\n        return actions;\n    }\n\n    onDestroy() {\n        \n    }\n\n}","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\nimport {Expr, ExprMessageOptions} from \"@sinequa/core/app-utils\";\nimport {Utils} from \"@sinequa/core/base\";\n\n@Pipe({name: \"sqExpr\", pure: false})\nexport class ExprPipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: Expr | string, params: ExprMessageOptions): void {\n        super.updateValue(key, params);\n        if (key instanceof Expr) {\n            const message = key.toMessage(params);\n            this.value = this.intlService.formatMessage(message.message, message.values);\n        }\n        else {\n            this.value = this.intlService.formatMessage(key);\n            if (params && params.asHTML) {\n                this.value = Utils.encodeHTML(this.value);\n            }\n        }\n    }\n}","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {AuditEvents} from \"./audit.web.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {CCApp} from \"./config/ccapp\";\n\n/**\n * Defines the object returned by a call to [AppWebService.refresh]{@link AppWebService#refresh}. If the upToDate\n * member is false then the app member contains the latest version of the app configuration\n */\nexport interface CCAppRefresh {\n    upToDate: boolean;\n    app?: CCApp;\n}\n\n/**\n * This service provides methods to retrieve and refresh the configuration of an app\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AppWebService extends HttpService {\n    /**\n     * Constructor\n     *\n     * @param startConfig Provides the app name\n     * @param httpClient The HTTP client\n     */\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n\n        if (!this.appName) {\n            console.error(\"Missing app name!\");\n        }\n    }\n\n    /**\n     * Gets the app configuration for the app name\n     *\n     * @returns An observable of the app configuration\n     */\n    get(): Observable<CCApp> {\n        const observable = this.httpClient.get<CCApp>(this.makeUrl(\"app\"), {\n            params: this.makeParams({\n                app: this.appName || \"\"\n            })\n        });\n        observable\n            .subscribe(\n                (response) => {\n                //console.log(\"appWebService.get success - data: \", response);\n                    return response;\n                },\n                (error) => {\n                    //console.log(\"appWebService.get failure - reason: \", error);\n                });\n        return observable;\n    }\n\n    /**\n     * Refreshes the app configuration based on a version identifier\n     *\n     * @param appVersionId The current app version id [CCApp.versionId]{@link CCApp#versionId}\n     * @param auditEvents Audit events to be recorded for this call\n     *\n     * @returns An observable of an object containing a flag indicating whether the configuration was up to date. If false\n     * then the app member of the object will be set to the new version of the configuration.\n     */\n    refresh(appVersionId: string, auditEvents?: AuditEvents): Observable<CCAppRefresh> {\n        const observable = this.httpClient.get<{upToDate: boolean, app: CCApp}>(this.makeUrl(\"app\"), {\n            params: this.makeParams({\n                app: this.appName || \"\",\n                versionId: appVersionId,\n                $auditRecord: auditEvents\n            })\n        });\n        observable\n            .subscribe(\n                (response) => {\n                    //console.log(\"appWebService.refresh success - data: \", response);\n                    return response;\n                },\n                (error) => {\n                    //console.log(\"appWebService.refresh failure - reason: \", error);\n                });\n        return observable;\n    }\n}","import {Component, Input, OnChanges, SimpleChanges, ChangeDetectorRef, ChangeDetectionStrategy, OnInit, OnDestroy} from \"@angular/core\";\nimport {Results, Aggregation, AggregationItem} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {FacetService} from \"../../facet.service\";\nimport {Action} from \"@sinequa/components/action\";\nimport {AbstractFacet} from \"../../abstract-facet\";\nimport {BehaviorSubject, Observable, of, Subscription} from 'rxjs';\nimport {catchError, debounceTime, distinctUntilChanged, map, switchMap} from 'rxjs/operators';\nimport {FormControl, FormGroup} from '@angular/forms';\n\n@Component({\n    selector: \"sq-facet-list\",\n    templateUrl: \"./facet-list.html\",\n    styleUrls: [\"./facet-list.scss\"],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsFacetList extends AbstractFacet implements OnChanges, OnInit, OnDestroy {\n    @Input() name: string; // If ommited, the aggregation name is used\n    @Input() results: Results;\n    @Input() aggregation: string;\n    @Input() showCount: boolean = true; // Show the number of occurrences\n    @Input() searchable: boolean = true; // Allow to search for items in the facet\n    @Input() allowExclude: boolean = true; // Allow to exclude selected items\n    @Input() allowOr: boolean = true; // Allow to search various items in OR mode\n    @Input() allowAnd: boolean = true; // Allow to search various items in AND mode\n    @Input() displayEmptyDistributionIntervals: boolean = false; // If the aggregration is a distribution, then this property controls whether empty distribution intervals will be displayed\n    @Input() displayActions = false;\n    @Input() showProgressBar = false;    // Allow to display item count as progress bar\n\n    // Aggregation from the Results object\n    data$ = new BehaviorSubject<Aggregation | undefined>(undefined)\n    items$ = new BehaviorSubject<AggregationItem[]>([]);\n    data = () => this.data$.getValue();\n    subscriptions: Subscription[] = [];\n\n    filtering: boolean = false;\n\n    // Search\n    myGroup: FormGroup;\n    searchQuery: FormControl; // ngModel for textarea\n    suggestDelay = 200;\n    noResults = false;\n    searchActive = false;\n    suggestions$: BehaviorSubject<AggregationItem[]> = new BehaviorSubject<AggregationItem[]>([]);\n    \n    /** Sum of all items count value */\n    sumOfCount: number;\n\n    /** List of selected items */\n    selected: AggregationItem[] = [];\n\n    /** Selected items that are not visible in the current aggregation (or suggestions in search mode) */\n    hiddenSelected: AggregationItem[] = [];\n    \n    /** List of excluded/filtered items */\n    filtered: AggregationItem[] = [];\n\n\n    // Loading more data\n    private skip = 0;\n    /** num of items currently displayed in the facet */\n    private count = 0;\n    /** Does facet has more items to display ? */\n    loadingMore = false;\n\n    // Actions (displayed in facet menu)\n    // All actions are built in the constructor\n    private readonly filterItemsOr: Action;\n    private readonly filterItemsAnd: Action;\n    private readonly excludeItems: Action;\n    private readonly clearFilters: Action;\n    public readonly searchItems: Action;\n\n    constructor(\n        private facetService: FacetService,\n        private changeDetectorRef: ChangeDetectorRef) {\n        super();\n\n        this.myGroup = new FormGroup({\n            searchQuery: new FormControl()\n        });\n\n        this.searchQuery = this.myGroup.get(\"searchQuery\") as FormControl;\n        this.subscriptions[\"suggest\"] = this.suggest$(this.searchQuery.valueChanges)\n            .subscribe(values => {\n                this.suggestions$.next(values);\n                // Refresh hiddenSelected list when the list of items is updated\n                this.refreshHiddenSelected();\n                this.searchActive = false;\n                this.changeDetectorRef.markForCheck();\n            });\n\n        // Keep documents with ANY of the selected items\n        this.filterItemsOr = new Action({\n            icon: \"fas fa-filter\",\n            title: \"msg#facet.filterItems\",\n            action: () => {\n                if (this.data()) {\n                    this.facetService.addFilterSearch(this.getName(), this.data() as Aggregation, this.selected);\n                }\n            }\n        });\n\n        // Keep documents with ALL the selected items\n        this.filterItemsAnd = new Action({\n            icon: \"fas fa-bullseye\",\n            title: \"msg#facet.filterItemsAnd\",\n            action: () => {\n                if (this.data()) {\n                    this.facetService.addFilterSearch(this.getName(), this.data() as Aggregation, this.selected, {and: true});\n                }\n            }\n        });\n\n        // Exclude document with selected items\n        this.excludeItems = new Action({\n            icon: \"fas fa-times\",\n            title: \"msg#facet.excludeItems\",\n            action: () => {\n                if (this.data()) {\n                    this.facetService.addFilterSearch(this.getName(), this.data() as Aggregation, this.selected, {not: true});\n                }\n            }\n        });\n\n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                this.facetService.clearFiltersSearch(this.getName(), true);\n            }\n        });\n\n        // Search for a value in this list\n        this.searchItems = new Action({\n            icon: \"fas fa-search\",\n            title: \"msg#facet.searchItems\",\n            action: (item, event) => {\n                item.selected = !item.selected;\n                if(!item.selected){\n                    this.clearSearch();\n                }\n                event.stopPropagation();\n                this.changeDetectorRef.markForCheck();\n            }\n        });\n    }\n\n    clearSearch() {\n        this.searchQuery.setValue(\"\"); // Remove suggestions if some remain\n        this.noResults = false;\n        this.suggestions$.next([]);\n    }\n\n    /**\n     * Name of the facet, used to create and retrieve selections\n     * through the facet service.\n     */\n    getName() : string {\n        return this.name || this.aggregation;\n    }\n\n    /**\n     * OnChanges listener awaits new results from the search service\n     * This completely resets the display\n     * @param changes\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.showCount === undefined) this.showCount = true;\n        if (this.searchable === undefined) this.searchable = true;\n        if (this.allowExclude === undefined) this.allowExclude = true;\n        if (this.allowOr === undefined) this.allowOr = true;\n        if (this.allowAnd === undefined) this.allowAnd = true;\n\n        if (!!changes[\"results\"]) {     // New data from the search service\n            if(!this.count){\n                this.count = this.facetService.getAggregationCount(this.aggregation);\n            }\n            this.filtered.length = 0;\n            this.selected.length = 0;\n            this.hiddenSelected.length = 0;\n            this.skip = 0;\n            this.searchItems.selected = false;\n            this.clearSearch();\n            this.data$.next(this.facetService.getAggregation(this.aggregation, this.results));\n        }\n    }\n\n    ngOnInit() {\n        this.subscriptions[\"data\"] = this.data$.pipe(\n            map(data => {\n                const nonFilteredItems = this.refreshFiltered(data);\n\n                return !data?.isDistribution || this.displayEmptyDistributionIntervals?\n                    nonFilteredItems : nonFilteredItems.filter(item => item.count > 0);\n            }),\n        ).subscribe(items => {\n            this.sumOfCount = items.length > 0 ? items.map(item => item.count).reduce((acc, value) => acc += value) / 100 : 0;\n            this.items$.next(items);\n            // Refresh hiddenSelected list when the list of items is updated\n            this.refreshHiddenSelected();\n        });\n    }\n\n    ngOnDestroy() {\n        this.subscriptions.forEach(subscription => subscription.unsubscribe());\n    }\n\n    /**\n     * Returns all the actions that are relevant in the current context\n     */\n    get actions(): Action[] {\n\n        const actions: Action[] = [];\n\n        if (this.selected.length > 0) {\n            if(this.allowOr){\n                actions.push(this.filterItemsOr);\n            }\n            if(this.allowAnd && this.selected.length > 1){\n                actions.push(this.filterItemsAnd);\n            }\n            if(this.allowExclude){\n                actions.push(this.excludeItems);\n            }\n        }\n\n        if(!this.hasSuggestions() && this.hasFiltered()) {\n            actions.push(this.clearFilters);\n        }\n\n        if(this.searchable){\n            actions.push(this.searchItems);\n        }\n\n        return actions;\n    }\n\n\n    // Filtered items\n\n    /**\n     * Actualize the state of filtered items (note that excluded terms are not in the distribution, so the equivalent cannot be done)\n     */\n    refreshFiltered(data: Aggregation | undefined): AggregationItem[] {\n        // refresh filters from breadcrumbs\n        const items = this.facetService.getAggregationItemsFiltered(this.getName(), data?.valuesAreExpressions);\n        items.forEach(item => {\n            if (!this.isFiltered(data, item)) {\n                this.filtered.push(item);\n            }\n        });\n\n        const nonFilteredItems: AggregationItem[] = [];\n        data?.items?.forEach(item => {\n            const indx = this.facetService.filteredIndex(data, this.filtered, item);\n            if (this.facetService.itemFiltered(this.getName(), data, item)) {\n                if (!this.isFiltered(data, item)) {\n                    this.filtered.push(item);\n                } else {\n                    this.filtered[indx].count = item.count;\n                }\n            } else {\n                // sometime facetService.itemFiltered() could returns false but item is present in breadcrumbs\n                if (indx !== -1) {\n                    this.filtered[indx].count = item.count;\n                } else {\n                    nonFilteredItems.push(item);\n                }\n            }\n        });\n        return nonFilteredItems;\n    }\n\n    refreshHiddenSelected() {\n        this.hiddenSelected = this.selected.filter(item => {\n            const idx = this.hasSuggestions()\n                ? this.facetService.findAggregationItemIndex(this.suggestions$.getValue(), item)\n                : this.facetService.findAggregationItemIndex(this.items$.getValue() || [], item);\n            return idx === -1;\n        });\n    }\n\n    /**\n     * Returns true if the given AggregationItem is filtered\n     * @param item\n     */\n    isFiltered(data: Aggregation | undefined, item: AggregationItem): boolean {\n        return this.facetService.filteredIndex(data, this.filtered, item) !== -1;\n    }\n\n    /**\n     * Returns true if there is an active selection (or exclusion) from this facet\n     */\n    hasFiltered(): boolean {\n        return this.facetService.hasFiltered(this.getName());\n    }\n\n    /**\n     * Called when clicking on a facet item text\n     * @param item\n     * @param event\n     */\n    filterItem(item: AggregationItem, event) {\n        const data = this.data();\n        if (data) {\n            this.filtering = true;\n            if (!this.isFiltered(data, item)) {\n                this.facetService.addFilterSearch(this.getName(), data, item);\n            }\n            else {\n                this.facetService.removeFilterSearch(this.getName(), data, item);\n            }\n        }\n        event.preventDefault();\n    }\n\n\n    // Selected items\n\n    /**\n     * Returns true if the given AggregationItem is selected\n     * @param item\n     */\n    isSelected(item: AggregationItem) : boolean {\n        return this.facetService.findAggregationItemIndex(this.selected, item) !== -1;\n    }\n\n\n    /**\n     * Called when selecting/unselecting an item in the facet\n     * @param item\n     */\n    selectItem(item: AggregationItem, e: Event) {\n        e.preventDefault();\n        if(!this.filtering) {\n            this.updateSelected(item);\n            e.stopPropagation();\n        }\n        this.filtering = false;\n    }\n\n    private updateSelected(item: AggregationItem) {\n        if (!this.isFiltered(this.data(), item)) {\n            const index = this.facetService.findAggregationItemIndex(this.selected, item);\n            if (index === -1) {\n                this.selected.push(item);\n            } else {\n                this.selected.splice(index, 1);\n            }\n            this.refreshHiddenSelected();\n        }\n    }\n\n\n    // Loading more items\n\n    /**\n     * Returns true if this facet can get more data from the server\n     * (The only way to guess is to check if the facet is \"full\", it capacity being the (skip+)count)\n     */\n    get hasMore(): boolean {\n        return this.resultsLength >= this.skip + this.count;\n    }\n\n    get resultsLength() {\n        return this.items$.getValue().length + this.filtered.length\n    }\n\n    /**\n     * Called on loadMore button click\n     */\n    loadMore(e: Event) {\n        e.stopPropagation();\n        if (this.data()) {\n            const skip = this.resultsLength;    // avoid hasMore() to return false when fetching data\n            this.loadingMore = true;\n            this.changeDetectorRef.markForCheck();\n\n            Utils.subscribe(this.facetService.loadData(this.aggregation, skip, this.count),\n                agg => {\n                    this.skip = skip;\n                    if (agg?.items && this.data()) {\n                        agg.items = this.items$.getValue().concat(agg.items);\n                        this.data$.next(agg);\n                    }\n                },\n                undefined,\n                () => {\n                    this.loadingMore = false;\n                    this.changeDetectorRef.markForCheck();\n                });\n        }\n        return false; // Avoids following href\n    }\n\n\n    // Suggest / Search\n\n    /**\n     * Returns true if the search mode is active (ie. there are suggestions to display in place of the aggregation)\n     */\n    hasSuggestions(): boolean {\n        return this.suggestions$.getValue().length > 0 || this.noResults;\n    }\n\n    /**\n     * Called on NgModel change (searchQuery)\n     * Uses the suggestfield API to retrieve suggestions from the server\n     * The suggestions \"override\" the data from the distribution (until search results are cleared)\n     */\n    suggest$ = (text$: Observable<string>) => text$.pipe(\n        debounceTime(this.suggestDelay),\n        distinctUntilChanged(),\n        switchMap(term => {\n            if (term.trim() === \"\") {\n                this.noResults = false;\n                return of([]);\n            }\n            this.searchActive = true;\n            this.changeDetectorRef.markForCheck();\n            return this.facetService.suggest(term, this.data()?.column || '').pipe(\n                catchError(err => {\n                    console.log(err);\n                    this.noResults = false;\n                    return of([]);\n                }),\n                map(items => {\n                    const suggestions = items.slice(0, this.count)\n                        .map(item => this.facetService.suggestionToAggregationItem(item))\n                        .filter(item => !this.isFiltered(this.data(), item));\n\n                    this.noResults = suggestions.length === 0 && term.trim() !== \"\";\n                    return suggestions;\n                })\n            )\n        })\n    )\n\n    /* AbstractFacet abstract methods */\n    isHidden(): boolean {\n        return !this.data();\n    }\n    \n    /**\n     * Convert facet item count to percentage width\n     * @param count item count\n     * @returns a % string representation\n     */\n    getPercent(count: number): string {\n        return `${100 - (count / this.sumOfCount)}%`;\n    }\n}\n","<div *ngIf=\"!isHidden()\" class=\"list-group list-group-flush\">\n    <div *ngIf=\"displayActions && actions\" class=\"d-flex pb-2 pr-2\">\n        <div class=\"btn-group ml-auto\"\n            [sq-action-buttons]=\"{items: actions, size: 'sm'}\">\n        </div>\n    </div>\n\n    <div *ngIf=\"searchItems.selected\" class=\"position-relative\" [formGroup]=\"myGroup\">\n        <div class=\"p-1\">\n            <input class=\"form-control\" sqAutofocus\n                formControlName=\"searchQuery\"\n                [placeholder]=\"'msg#facet.searchPlaceholder' | sqMessage\">\n        </div>\n        <sq-loading-bar [active]=\"searchActive\"></sq-loading-bar>\n    </div>\n\n    <!-- filtered items -->\n    <div  *ngFor=\"let item of filtered\"\n        class=\"d-flex flex-row align-items-center list-group-item list-group-item-action list-group-item-success text-truncate border-0 px-3 py-1 facet-row cursor-pointer\"\n        [ngClass]=\"{'list-group-item-success': !item.$excluded, 'list-group-item-secondary': item.$excluded}\"\n        [title]=\"'msg#facet.selectedValue' | sqMessage\"\n        (click)=\"filterItem(item, $event)\">\n\n        <a href=\"#\" class=\"text-truncate mr-auto\">{{item | sqValue:item.$column}}</a>\n\n        <span *ngIf=\"showCount && item.count\" class=\"ml-2 text-muted small\">{{item.count | sqNumber}}</span>\n        <span class=\"fa-stack cursor-pointer\">\n            <i class=\"ml-2 far fa-minus-square fa-stack-1x icons icon-hover rotate\"></i>\n            <i class=\"ml-2 far fa-check-square fa-stack-1x icons icon-default rotate\"></i>\n        </span>\n\n    </div>\n\n    <!-- hidden selected items -->\n    <div  *ngFor=\"let item of hiddenSelected\"\n        class=\"d-flex flex-row align-items-center list-group-item list-group-item-primary text-truncate border-0 px-3 py-1 facet-row cursor-pointer\"\n        [title]=\"'msg#facet.itemUnselect' | sqMessage\"\n        (click)=\"selectItem(item, $event)\">\n\n        <a  href=\"#\" (click)=\"filterItem(item, $event)\"\n            [title]=\"'msg#facet.filterItem' | sqMessage:{'terme':(item | sqValue:item.$column)}\"\n            class=\"text-truncate mr-auto\">{{item | sqValue:item.$column}}</a>\n        \n        <span *ngIf=\"showCount && item.count\" class=\"ml-2 text-muted small\">{{item.count | sqNumber}}</span>\n    </div>\n\n    <!--- suggestions items -->\n    <div *ngFor=\"let suggest of suggestions$ | async\"\n        class=\"d-flex flex-row align-items-center list-group-item list-group-item-action text-truncate border-0 px-3 py-1 facet-row cursor-pointer\"\n        [ngClass]=\"{'list-group-item-primary': isSelected(suggest)}\"\n        (click)=\"selectItem(suggest, $event)\">\n        \n        <a  href=\"#\" (click)=\"filterItem(suggest, $event)\"\n            role=\"button\" \n            title=\"{{ 'msg#facet.filterItem' | sqMessage:{'terme':(suggest | sqValue:suggest.$column)} }}\"\n            class=\"text-truncate mr-auto\">{{suggest | sqValue:suggest.$column}}</a>                \n\n        <span *ngIf=\"showCount && suggest.count\" class=\"ml-2 text-muted small\" style=\"z-index: 1;\">{{suggest.count | sqNumber}}</span>\n    \n    </div>\n    <span *ngIf=\"noResults\" class=\"d-block text-center text-muted small py-1\"><i>{{'msg#facet.searchNoResult' | sqMessage}}</i></span>\n\n    <div *ngIf=\"!hasSuggestions()\" class=\"facet-results-scrollable\">\n        <!--- aggregation items without filtered -->\n        <div *ngFor=\"let item of items$ | async\"\n            class=\"position-relative list-group-item list-group-item-action border-0 px-3 py-1 facet-row cursor-pointer\"\n            [ngClass]=\"{ 'list-group-item-primary': isSelected(item) }\"\n            [title]=\"(isSelected(item) ? 'msg#facet.itemUnselect' : 'msg#facet.itemSelect') | sqMessage\"\n            (click)=\"selectItem(item, $event)\">\n\n            <div *ngIf=\"showProgressBar && resultsLength > 1\" class=\"position-absolute progress-bar progress-color\" [style.--count]=\"getPercent(item.count)\"></div>\n            <div class=\"d-flex justify-content-between align-items-baseline\">\n                <a  href=\"#\" (click)=\"filterItem(item, $event)\" style=\"z-index: 1;\"\n                    [title]=\"'msg#facet.filterItem' | sqMessage:{'terme':(item | sqValue:item.$column)}\"\n                    class=\"text-truncate mr-auto\">{{item | sqValue:item.$column}}</a>\n\n                <span *ngIf=\"showCount && item.count\" class=\"ml-2 text-muted small\" style=\"z-index: 1;\">{{item.count | sqNumber}}</span>\n            </div>\n        </div>\n\n        <a *ngIf=\"hasMore\" class=\"d-block border-0 px-3 py-1 text-center\" (click)=\"loadMore($event)\" href=\"#\">\n            <span *ngIf=\"loadingMore\" class=\"fas fa-sync fa-fw fa-spin\"></span>\n            <small *ngIf=\"!loadingMore\">{{'msg#facet.loadMore' | sqMessage}}</small>\n        </a>\n    </div>\n\n</div>","import {Injectable, Inject} from \"@angular/core\";\nimport {START_CONFIG, StartConfig, SqHttpClient, HttpService} from \"@sinequa/core/web-services\";\nimport {Observable} from \"rxjs\";\nimport {map} from \"rxjs/operators\";\nimport {Credentials} from \"./authentication.service\";\n\n/**\n * A service to retrieve a JWT (JSON Web Token) from the Sinequa server.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class JWTService extends HttpService {\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Get a JWT from the Sinequa server using the passed credentials. The JWT is received in a cookie\n     * and the associated CSRF token in the response payload.\n     *\n     * @param credentials The credentials to be used for the JWT. These are sent in clear text\n     */\n    getToken(credentials: Credentials): Observable<string> {\n        const observable = this.httpClient.post<{csrfToken: string}>(this.makeUrl(\"webToken\"),\n            {\n                action: \"get\",\n                user: credentials.userName,\n                password: credentials.password,\n                tokenInCookie: true,\n            },\n            {\n                params: this.makeParams({\n                    noUserOverride: true,\n                    noAutoAuthentication: true\n                })\n            });\n        return observable.pipe(\n            map((value) => {\n                return value.csrfToken;\n            }));\n    }\n}\n","import {Type} from \"@angular/core\";\nimport {OverlayRef} from '@angular/cdk/overlay';\nimport {Subject, Observable, of} from \"rxjs\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {ModalResult} from \"./modal.service\";\n\n/**\n * Describes the event raised by an {@link IModalRef} instance before a modal dialog is closed.\n */\nexport interface CheckCloseEvent {\n    /**\n     * The result passed to the [IModalRef.close]{@link IModalRef#close} method.\n     */\n    result: ModalResult;\n    /**\n     * A flag that can be set by the event receiver to indicate that the closing of the modal dialog\n     * should be cancelled.\n     */\n    cancelled?: Observable<boolean>;\n}\n\n/**\n * Describes the object returned by the [ModalService.openRef]{@link ModalService.openRef} method\n * to maintain a reference to the opened modal.\n */\nexport interface IModalRef {\n    /**\n     * The component instance of the referenced modal component.\n     */\n    componentInstance: Type<any> | undefined;\n    /**\n     * A stream that emits before the referenced modal is closed to allow an observer\n     * to cancel the closing.\n     */\n    checkClose(): Observable<CheckCloseEvent>;\n    /**\n     * A stream that emits before the referenced modal is closed.\n     */\n    beforeClosed(): Observable<ModalResult>;\n    /**\n     * A stream that emits after the referenced modal is closed.\n     */\n    afterClosed(): Observable<ModalResult>;\n    /**\n     * Close the referenced modal with the passed `result`.\n     * @param result The referenced modal's result.\n     */\n    close(result: ModalResult);\n}\n\n/**\n * An implementation of the {@link IModalRef} interface.\n */\nexport class ModalRef implements IModalRef {\n    /**\n     * The component instance of the referenced modal component.\n     */\n    componentInstance: Type<any> | undefined;\n    /**\n     * A flag indicating whether the referenced modal has been submitted.\n     */\n    submitted: boolean;\n    private _checkClose = new Subject<CheckCloseEvent>();\n    private _beforeClosed = new Subject<ModalResult>();\n    private _afterClosed = new Subject<ModalResult>();\n    private formElement: HTMLFormElement | undefined;\n\n    constructor(private overlayRef: OverlayRef) {\n    }\n\n    /**\n     * A stream that emits before the referenced modal is closed to allow an observer\n     * to cancel the closing.\n     */\n    checkClose(): Observable<CheckCloseEvent> {\n        return this._checkClose.asObservable();\n    }\n\n    /**\n     * A stream that emits before the referenced modal is closed.\n     */\n    beforeClosed(): Observable<ModalResult> {\n        return this._beforeClosed.asObservable();\n    }\n\n    /**\n     * A stream that emits aftervthe referenced modal is closed.\n     */\n    afterClosed(): Observable<ModalResult> {\n        return this._afterClosed.asObservable();\n    }\n\n    /**\n     * Close the referenced modal with the passed `result`.\n     * @param result The referenced modal's result.\n     */\n    close(result = ModalResult.Cancel) {\n        // Delay to allow submit handling\n        Utils.delay().then(() => {\n            const checkCloseEvent: CheckCloseEvent = { result };\n            this._checkClose.next(checkCloseEvent);\n            (checkCloseEvent.cancelled || of(false)).subscribe(\n                (cancelled) => {\n                    if (!cancelled) {\n                        this._checkClose.complete();\n                        this._beforeClosed.next(result);\n                        this._beforeClosed.complete();\n                        this.removeSubmitListener();\n                        this.overlayRef.detachBackdrop();\n                        this.overlayRef.dispose();\n                        this.componentInstance = undefined;\n                        this._afterClosed.next(result);\n                        this._afterClosed.complete();\n                    }\n                }\n            );\n        });\n    }\n\n    private submitListener = (event) => {\n        this.submitted = true;\n        event.preventDefault();\n        return false;\n    }\n\n    /**\n     * Disable the standard browser submit handling on any HTML form in the modal component.\n     */\n    disableSubmit() {\n        if (!this.formElement) {\n            const formElement = this.overlayRef.overlayElement.querySelector(\"form\");\n            if (formElement) {\n                this.formElement = formElement;\n                this.formElement.addEventListener(\"submit\", this.submitListener);\n            }\n        }\n    }\n\n    private removeSubmitListener() {\n        if (this.formElement) {\n            this.formElement.removeEventListener(\"submit\", this.submitListener);\n            this.formElement = undefined;\n        }\n    }\n}\n","import { Component, Input, Output, EventEmitter, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { HighlightValue, PreviewData, CCColumn } from '@sinequa/core/web-services';\nimport { PreviewDocument } from '../../preview-document';\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\nimport { AppService } from '@sinequa/core/app-utils';\n\n@Component({\n  selector: 'sq-preview-entity-facet',\n  templateUrl: './preview-entity-facet.component.html',\n  styleUrls: ['./preview-entity-facet.component.scss']\n})\nexport class BsPreviewEntityFacetComponent extends AbstractFacet implements OnInit, OnChanges {\n  @Input() entity: string;  // Required from init\n  @Input() data: HighlightValue[];  // Required from init\n  @Input() previewData: PreviewData;  // Required from init and does not change (facet is rebuilt if it does)\n  @Input() previewDocument: PreviewDocument;  // May be null at the start\n  @Input() startUnchecked: boolean;\n  @Output() itemsChecked = new EventEmitter<boolean>();\n\n  count: number = 10;\n  sortFreq: boolean = true;\n  hidden = new Map<string, boolean>();\n  nav = new Map<string, number>();\n  column: CCColumn | undefined;\n\n  checkAction: Action;\n  sortFreqAction: Action;\n  sortAlphaAction: Action;\n\n  constructor(\n    private appService:AppService\n  ) {\n    super();\n\n    this.checkAction = new Action({\n      icon: \"far fa-check-square\",\n      title: \"msg#preview.highlightFilters.keepNone\",\n      action: this.unselectAll,\n      updater: (action: Action) => {\n        let foundHidden = false;\n        let foundNotHidden = false;\n        this.data.forEach(value => {\n          foundHidden = foundHidden || this.hidden.get(value.value) || false;\n          foundNotHidden = foundNotHidden || !this.hidden.get(value.value);\n        });\n        if(!foundHidden){ // All items selected\n          action.action = this.unselectAll;\n          action.icon = \"far fa-check-square\";\n          action.title = \"msg#preview.highlightFilters.keepNone\";\n        }\n        else if(!foundNotHidden){ // All items unselected\n          action.action = this.selectAll;\n          action.icon = \"far fa-square\";\n          action.title = \"msg#preview.highlightFilters.keepAll\";\n        }\n        else { // Some items selected\n          action.action = this.selectAll;\n          action.icon = \"far fa-check-square\";\n          action.title = \"msg#preview.highlightFilters.keepAll\";\n        }\n      }\n    });\n    this.sortAlphaAction = new Action({\n      icon: \"fas fa-sort-alpha-down\",\n      title: \"msg#preview.sortAlphabetically\",\n      action: () => {\n        this.sortFreq = false;\n      }\n    });\n    this.sortFreqAction = new Action({\n      icon: \"fas fa-sort-amount-down\",\n      title: \"msg#preview.sortFrequency\",\n      action: () => {\n        this.sortFreq = true;\n      }\n    });\n  }\n\n  get actions(): Action[]{\n    const actions: Action[] = [];\n    if(this.previewDocument){\n      actions.push(this.checkAction);\n    }\n    actions.push(this.sortFreq? this.sortAlphaAction : this.sortFreqAction);\n    return actions;\n  }\n\n  /**\n   * Uncheck items if needed\n   */\n  ngOnInit(){\n    if(this.startUnchecked){\n      this.unselectAll();\n      this.checkAction.update();\n    }\n    this.column = this.appService.getColumn(this.entity);\n  }\n\n  /**\n   * Since the preview document comes after the preview data, we need to wait for that change\n   * and apply the hidden state in the document.\n   * @param changes\n   */\n  ngOnChanges(changes: SimpleChanges) {\n    if(changes[\"previewDocument\"]){\n      if(this.previewDocument){\n        this.data.forEach(val => {\n          if(this.hidden.get(val.value)){\n            this.previewDocument.toggleHighlight(this.entity, false, val.value);\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * Returns the entities to be displayed in the facet, performing truncation and sorting of the input list\n   */\n  get entityValues(): HighlightValue[] {\n    return this.data.sort((a,b) => {\n      const d = b.locations.length - a.locations.length;\n      return this.sortFreq && d !== 0?  d : a.displayValue.localeCompare(b.displayValue);\n    }).slice(0, this.count);\n  }\n\n  /**\n   * Returns the number of occurrences of a given value.\n   * If the user used the facet to navigate, the format is \"i / count\"\n   * @param value\n   */\n  entityCount(value: HighlightValue): string {\n    let count = value.locations.length + \"\";\n    const navValue = this.nav.get(value.value);\n    if(navValue !== undefined){\n      count = (navValue+1) + \" / \" + count;\n    }\n    return count;\n  }\n\n  /**\n   * Return whether the entity is hidden (unchecked) or not\n   * @param value\n   */\n  entityHidden(value: HighlightValue): boolean {\n    return !!this.hidden.get(value.value);\n  }\n\n  /**\n   * Shows all the entities in the list\n   */\n  showAll(){\n    this.count = this.data.length;\n    return false;\n  }\n\n  /**\n   * Toggles the hidden (checked/unchecked) state of a value in the list.\n   * Modifies the provided preview document.\n   * @param value\n   */\n  toggleEntity(value: HighlightValue){\n    this.hidden.set(value.value, !this.hidden.get(value.value));\n    if(this.previewDocument){\n      this.previewDocument.toggleHighlight(this.entity, !this.hidden.get(value.value), value.value);\n    }\n    this.checkAction.update();\n  }\n\n  /**\n   * Unselect all entities (set hidden)\n   */\n  unselectAll = (action?: Action) => {\n    if(this.previewDocument){\n      this.previewDocument.toggleHighlight(this.entity, false);\n    }\n    this.data.forEach((value)=> {\n      this.hidden.set(value.value, true);\n    });\n    if(action){\n      action.update();\n      this.itemsChecked.next(false);\n    }\n  }\n\n  /**\n   * Select all entities (unset hidden)\n   */\n  selectAll = (action: Action) => {\n    if(this.previewDocument){\n      this.previewDocument.toggleHighlight(this.entity, true);\n    }\n    this.data.forEach((value)=> {\n      this.hidden.set(value.value, false);\n    });\n    if(action){\n      action.update();\n      this.itemsChecked.next(true);\n    }\n  }\n\n  /**\n   * Navigate to the next value of this entity.\n   * Modifies the provided preview document.\n   * @param value\n   */\n  nextEntity(value: HighlightValue){\n    let navValue = this.nav.get(value.value);\n    if(navValue === undefined){\n      navValue = 0;\n      this.nav.set(value.value, navValue);\n    }\n    else if(navValue < value.locations.length-1){\n      navValue++;\n      this.nav.set(value.value, navValue);\n    }\n    this.selectEntity(this.entity, value.value, navValue);\n  }\n\n  /**\n   * Navigate to the next value of this entity.\n   * Modifies the provided preview document.\n   * @param value\n   */\n  prevEntity(value: HighlightValue){\n    let navValue = this.nav.get(value.value);\n    if(navValue === undefined){\n      navValue = 0;\n      this.nav.set(value.value, navValue);\n    }\n    else if(navValue > 0){\n      navValue--;\n      this.nav.set(value.value, navValue);\n    }\n    this.selectEntity(this.entity, value.value, navValue);\n  }\n\n  /**\n   * Navigate to the given occurrence of an entity in a specific category\n   * Modifies the provided preview document.\n   * @param category\n   * @param value\n   * @param i\n   */\n  selectEntity(category: string, value: string, i: number){\n    const indexes = this.getEntityIndexes(category, value);\n    this.previewDocument.selectHighlight(category, indexes[i]);\n  }\n\n  /**\n   * Helper function to find the indexes of all occurrences of a entity value in the document\n   * @param category\n   * @param value\n   */\n  private getEntityIndexes(category: string, value: string) {\n    const indexes: number[] = [];\n    for (let i = 0; i < this.previewData.highlightsPerLocation['length']; i++) {\n      const highlight = this.previewData.highlightsPerLocation[i];\n      const categories = Object.keys(highlight.positionInCategories);\n      for (const currentCategory of categories) {\n        if (currentCategory === category) {\n          for (const highlightValue of highlight.values) {\n            if (highlightValue === value) {\n              indexes.push(highlight.positionInCategories[category]);\n            }\n          }\n        }\n      }\n    }\n    return indexes;\n  }\n}\n","<div class=\"list-group list-group-flush entity-facet\">\n    <div class=\"list-group-item align-items-center border-0 py-1 px-3 d-flex\" *ngFor=\"let value of entityValues\">\n        <span class=\"text-muted px-1 cursor-pointer\" (click)=\"toggleEntity(value)\">\n            <i class=\"far\" [ngClass]=\"{'fa-check-square': !entityHidden(value), 'fa-square': entityHidden(value)}\"></i>\n        </span>\n        <span class=\"mr-auto mx-1\">{{ value.displayValue | sqValue:column }}</span>\n        <span class=\"text-muted small mx-1\">{{ entityCount(value) }}</span>\n        <span *ngIf=\"previewDocument\" class=\"text-muted px-1 cursor-pointer\" (click)=\"prevEntity(value)\" title=\"{{ 'msg#preview.previousHighlightButtonAltText' | sqMessage }}\"><i class=\"fas fa-chevron-left\"></i></span>\n        <span *ngIf=\"previewDocument\" class=\"text-muted px-1 cursor-pointer\" (click)=\"nextEntity(value)\" title=\"{{ 'msg#preview.nextHighlightButtonAltText' | sqMessage }}\"><i class=\"fas fa-chevron-right\"></i></span>\n    </div>\n    <div class=\"list-group-item border-0 py-1 text-center\" *ngIf=\"data.length > count\">\n        <a class=\"text-muted small\" href=\"#\" (click)=\"showAll()\" title=\"{{ 'msg#preview.showAll' | sqMessage }}\">{{ 'msg#preview.showAll' | sqMessage }}</a>\n    </div>\n</div>\n","  import {Component, ElementRef, ViewChild, Input, OnDestroy, AfterViewInit} from '@angular/core';\r\n  import {SearchService} from '../../search.service';\r\n\r\n  @Component({\r\n    selector: 'sq-scroller',\r\n    template: `<div #anchor style=\"height:5px\"></div>`\r\n  })\r\n  export class BsScroller implements AfterViewInit, OnDestroy {\r\n  @Input() options = {};\r\n  @ViewChild('anchor') anchor: ElementRef<HTMLElement>;\r\n\r\n  private observer: IntersectionObserver;\r\n\r\n  constructor(private searchService: SearchService) {}\r\n\r\n  ngAfterViewInit() {\r\n    const options = {\r\n      root: null,\r\n      ...this.options\r\n    };\r\n\r\n    this.observer = new IntersectionObserver(([entry]) => {\r\n      if(entry.isIntersecting) {\r\n        this.searchService.loadMore();\r\n      }\r\n    }, options);\r\n\r\n    this.observer.observe(this.anchor.nativeElement);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.observer.disconnect();\r\n  }\r\n\r\n}","export default {\n    \"theme\": {\n        \"darkMode\": \"Mode sombre\",\n        \"darkModeTitle\": \"Activer le mode sombre\",\n        \"lightMode\": \"Mode clair\",\n        \"lightModeTitle\": \"Activer le mode clair\"\n    }\n}\n","import {Utils} from \"@sinequa/core/base\";\nimport {enIntl, frIntl, deIntl} from \"@sinequa/core/intl\";\nimport {enModal, frModal, deModal} from \"@sinequa/core/modal\";\nimport {enValidation, frValidation, deValidation} from \"@sinequa/core/validation\";\nimport _enLogin from \"./en\";\nimport _frLogin from \"./fr\";\nimport _deLogin from \"./de\";\n\nconst enLogin = Utils.merge({}, _enLogin, enIntl, enModal, enValidation);\nconst frLogin = Utils.merge({}, _frLogin, frIntl, frModal, frValidation);\nconst deLogin = Utils.merge({}, _deLogin, deIntl, deModal, deValidation);\n\nexport { enLogin, frLogin, deLogin };\n","import {Component, OnInit, OnDestroy, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {NotificationsService, Notification, NotificationState} from \"@sinequa/core/notification\";\n\n@Component({\n    selector: \"sq-notifications\",\n    templateUrl: \"./notifications.html\"\n})\nexport class BsNotifications implements OnInit, OnDestroy {\n    private subscription: Subscription;\n    notifications: Notification[];\n\n    constructor(\n        private notificationsService: NotificationsService,\n        private changeDetectorRef: ChangeDetectorRef) {\n        this.notifications = [];\n    }\n\n    ngOnInit() {\n        this.loadNotifications();\n        this.subscription = this.notificationsService.events.subscribe(\n            (event) => {\n                if (event.type === \"updated\") {\n                    this.loadNotifications();\n                    this.changeDetectorRef.markForCheck();\n                }\n            });\n    }\n\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n\n    loadNotifications() {\n        this.notifications.splice(0);\n        for (const notification of this.notificationsService.notifications) {\n            if (notification.state !== NotificationState.Hidden) {\n                this.notifications.unshift(notification);\n            }\n        }\n    }\n}","<div class=\"sq-notifications\">\n    <sq-notification *ngFor=\"let notification of notifications\" [notification]=\"notification\"></sq-notification>\n</div>","export * from \"./public-api\";","import {LocaleData} from \"@sinequa/core/intl\";\nimport \"moment/locale/fr\";\nimport d3Format from \"d3-format/locale/fr-FR.json\";\nimport d3Time from \"d3-time-format/locale/fr-FR.json\";\nimport {frCore} from \"@sinequa/core\";\nimport appMessages from \"./messages/fr.json\";\nimport \"intl/locale-data/jsonp/fr-FR\"; // Safari\nimport \"@formatjs/intl-relativetimeformat/dist/locale-data/fr\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {frUtils} from \"@sinequa/components/utils\";\nimport {frAdvanced} from \"@sinequa/components/advanced\";\nimport {frAlerts} from \"@sinequa/components/alerts\";\nimport {frBaskets} from \"@sinequa/components/baskets\";\nimport {frFacet} from \"@sinequa/components/facet\";\nimport {frFeedback} from \"@sinequa/components/feedback\";\nimport {frHeatmap} from \"@sinequa/analytics/heatmap\";\nimport {frLabels} from \"@sinequa/components/labels\";\nimport {frMetadata} from \"@sinequa/components/metadata\";\nimport {frNotification} from \"@sinequa/components/notification\";\nimport {frPreview} from \"@sinequa/components/preview\";\nimport {frResult} from \"@sinequa/components/result\";\nimport {frResultsView} from \"@sinequa/components/results-view\";\nimport {frSavedQueries} from \"@sinequa/components/saved-queries\";\nimport {frSelection} from \"@sinequa/components/selection\";\nimport {frSearch} from \"@sinequa/components/search\";\nimport {frStatusBar} from \"@sinequa/components/status-bar\";\nimport {frUserSettings} from \"@sinequa/components/user-settings\";\nimport {frNetwork} from \"@sinequa/analytics/network\";\nimport {frGooglemaps} from \"@sinequa/analytics/googlemaps\";\nimport {frTheme} from \"@sinequa/components/theme-toggle\";\nimport {frFinance} from \"@sinequa/analytics/finance\";\n\nd3Format.thousands = \" \"; // consistency with intl-number-format\n\nconst messages = Utils.merge({}, frCore, frUtils, frAdvanced, frAlerts, frBaskets, frFacet, frFeedback, frHeatmap, frLabels, frMetadata,\n    frNotification, frPreview, frResult, frResultsView, frSavedQueries, frSelection, frSearch, frStatusBar, frUserSettings, frNetwork, frGooglemaps, frFinance, appMessages,\n    frTheme);\n\nexport default <LocaleData>{\n    intl: {\n        locale: \"fr-FR\"\n    },\n    moment: {\n        locale: \"fr\"\n    },\n    d3: {\n        locale: \"fr-FR\",\n        format: d3Format,\n        time: d3Time\n    },\n    messages: messages\n};","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\n\nimport _enSelection from \"./en\";\nimport _frSelection from \"./fr\";\nimport _deSelection from \"./de\";\n\nconst enSelection = Utils.merge({}, _enSelection, enSearch);\nconst frSelection = Utils.merge({}, _frSelection, frSearch);\nconst deSelection = Utils.merge({}, _deSelection, deSearch);\n\nexport { enSelection, frSelection, deSelection };\n","import {Component, Input} from \"@angular/core\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {FacetService} from \"../../facet.service\";\n\n@Component({\n    selector: \"sq-facet-bar\",\n    templateUrl: \"./facet-bar.html\"\n})\nexport class BsFacetBar {\n    @Input() results: Results;\n    @Input() containerIndex: number = 0; // There could be various facet bars (but only one service and storage array)\n\n    constructor(\n        private facetService: FacetService) {\n    }\n\n    get facets(): any[] { // Which facets are actually displayed in this facet bar\n        const facets = this.facetService.getFacets(this.containerIndex);\n        return facets;\n    }\n\n}","<div class=\"container-fluid\">\n    <div class=\"row\">\n        <ng-content></ng-content>\n        <ng-container *ngFor=\"let f of facets\">\n            <sq-facet-card [ngSwitch]=\"f.type\" class=\"{{f['className']}}\" [title]=\"f.title\">\n                <sq-facet-list #facet *ngSwitchCase=\"'list'\" [name]=\"f.name\" [results]=\"results\" [aggregation]=\"f.aggregations\"></sq-facet-list>\n                <sq-facet-tree #facet *ngSwitchCase=\"'tree'\" [name]=\"f.name\" [results]=\"results\" [aggregation]=\"f.aggregations\"></sq-facet-tree>\n                <!-- Note: Removing the support for charts, but could be enabled back via a more generic ng-template approach (get all ng-template passed by transclusion and map them to a facet type) -->\n            </sq-facet-card>\n        </ng-container> \n    </div>\n</div>","import {Component, Input, OnInit, AfterViewInit, OnDestroy, ViewChild, forwardRef, ElementRef} from \"@angular/core\";\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {BsDatepickerDirective, BsDatepickerConfig} from \"ngx-bootstrap/datepicker\";\nimport moment from \"moment\";\n\nexport const DATE_PICKER_VALUE_ACCESSOR: any = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => BsDatePicker),\n    multi: true\n};\n\nexport interface DatePickerOptions {\n    name?: string;\n    system?: boolean; // default false\n    minDate?: Date;\n    maxDate?: Date;\n}\n\n@Component({\n    selector: \"sq-date-picker\",\n    template: `\n        <div class=\"sq-date-picker form-row\">\n            <div class=\"col\">\n                <input type=\"text\" #input class=\"form-control\" autocomplete=\"off\" bsDatepicker triggers=\"click\" #picker=\"bsDatepicker\" [bsConfig]=\"bsConfig()\" [ngModel]=\"value\" (ngModelChange)=\"updateValue($event)\" [placeholder]=\"dateFormat\" />\n            </div>\n        </div>\n    `,\n    providers: [DATE_PICKER_VALUE_ACCESSOR]\n})\nexport class BsDatePicker implements OnInit, AfterViewInit, OnDestroy, ControlValueAccessor {\n\n    private readonly SystemFormat: string = 'YYYY-MM-DD';\n\n    @Input() options: DatePickerOptions;\n    value: Date;\n    private onChangeCallback: (_: any) => void = () => {};\n    private localeChange: Subscription;\n    @ViewChild(\"picker\", {static: false}) picker: BsDatepickerDirective;\n    @ViewChild('input', {static: false}) input: ElementRef;\n\n    constructor(\n        public intlService: IntlService) {\n    }\n\n    ngOnInit() {\n        if (!this.options) {\n            this.options = {};\n        }\n    }\n\n    public get dateFormat(): string {\n        return this.options.system ? this.SystemFormat : moment.localeData().longDateFormat('L');\n    }\n\n    setLocale() {\n        if (!!this.picker && this.picker.isOpen) {\n            this.picker.hide();\n            this.picker.show();\n        }\n    }\n\n    ngAfterViewInit() {\n        this.setLocale();\n        this.localeChange = Utils.subscribe(this.intlService.events,\n            (value) => {\n                this.setLocale();\n            });\n    }\n\n    ngOnDestroy() {\n        if (this.localeChange) {\n            this.localeChange.unsubscribe();\n        }\n    }\n\n    bsConfig(): BsDatepickerConfig {\n        return <any>{\n            minDate: this.options.minDate,\n            maxDate: this.options.maxDate,\n            containerClass:'theme-default',\n            showWeekNumbers: false,\n            dateInputFormat: this.options.system ? this.SystemFormat : moment.localeData().longDateFormat('L')\n        };\n    }\n\n    updateValue(value: Date) {\n        this.value = value;\n        this.zeroTimes(this.value);\n        this.onChangeCallback(this.value);\n        this.focus();\n    }\n\n    private zeroTimes(value: Date): void {\n        if (Utils.isDate(value)) { // includes null checking\n            value.setHours(0, 0, 0, 0);\n        }\n    }\n\n    public focus(): void {\n        if (this.input) {\n            this.input.nativeElement.focus();\n        }\n    }\n\n    //#region ControlValueAccessor\n    writeValue(value: Date): void {\n        this.value = value;\n    }\n\n    registerOnChange(fn: any): void {\n        this.onChangeCallback = fn;\n    }\n\n    registerOnTouched(fn: any): void {\n    }\n    //#endregion\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\n\nimport {BsFeedbackMenu} from \"./feedback-menu/feedback-menu\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        BsActionModule,\n        ValidationModule,\n        BsModalModule\n    ],\n    declarations: [\n        BsFeedbackMenu\n    ],\n    exports: [\n        BsFeedbackMenu\n    ]\n})\nexport class BsFeedbackModule {\n}\n","export default {\n    \"googlemaps\": {\n        \"filterArea\": \"Search documents in this area\"\n    },\n};\n","import {\n    Injectable,\n    Inject,\n    InjectionToken,\n    Type,\n    OnDestroy,\n} from \"@angular/core\";\nimport { Observable, of, Subscription } from \"rxjs\";\nimport {\n    PrincipalWebService,\n    LabelsWebService,\n    AuditEventType,\n    LabelsRights,\n} from \"@sinequa/core/web-services\";\nimport { AppService, ValueItem } from \"@sinequa/core/app-utils\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { SearchService } from \"@sinequa/components/search\";\nimport { ModalService, ModalResult } from \"@sinequa/core/modal\";\nimport { Action } from \"@sinequa/components/action\";\nimport { IntlService } from \"@sinequa/core/intl\";\nimport { NotificationsService } from \"@sinequa/core/notification\";\nimport { SelectionService } from \"@sinequa/components/selection\";\n\nexport interface LabelsComponents {\n    renameModal: Type<any>;\n    labelsAutocompleteComponent: Type<any>;\n    deleteModal: Type<any>;\n    addModal: Type<any>;\n    editModal: Type<any>;\n}\n\nexport interface ModalProperties {\n    public: boolean;\n    allowEditPublicLabels: boolean;\n    allowManagePublicLabels: boolean;\n    allowNewLabels: boolean;\n    disableAutocomplete: boolean;\n    action: number;\n    radioButtons: any[];\n}\n\nexport const enum UpdateLabelsAction {\n    add,\n    remove,\n    rename,\n    delete,\n    bulkAdd,\n    bulkRemove,\n    edit,\n}\n\nexport const LABELS_COMPONENTS = new InjectionToken<LabelsComponents>(\n    \"LABELS_COMPONENTS\"\n);\n\n@Injectable({\n    providedIn: \"root\",\n})\nexport class LabelsService implements OnDestroy {\n    private _privateLabelsPrefix: string | undefined;\n    private static readonly defaultLabelsRights: LabelsRights = {\n        canManagePublicLabels: true,\n        canEditPublicLabels: true,\n    };\n    private labelsRightsSubscription: Subscription | undefined;\n    private labelsRights: LabelsRights | undefined;\n\n    constructor(\n        private labelsWebService: LabelsWebService,\n        private appService: AppService,\n        private searchService: SearchService,\n        private modalService: ModalService,\n        private principalWebService: PrincipalWebService,\n        private intlService: IntlService,\n        private notificationService: NotificationsService,\n        private selectionService: SelectionService,\n        @Inject(LABELS_COMPONENTS) public labelsComponents: LabelsComponents\n    ) {\n        this.principalWebService.events.subscribe((event) => {\n            switch (event.type) {\n                case \"changed\":\n                    this._privateLabelsPrefix = undefined;\n                    this.labelsRights = undefined;\n                    this.labelsRightsSubscription = undefined;\n                    break;\n            }\n        });\n    }\n\n    public get publicLabelsField(): string | undefined {\n        return this.appService.cclabels\n            ? this.appService.cclabels.publicLabelsField\n            : undefined;\n    }\n\n    public get privateLabelsField(): string | undefined {\n        return this.appService.cclabels\n            ? this.appService.cclabels.privateLabelsField\n            : undefined;\n    }\n\n    public get labelsAutoSuggestWildcard(): string | undefined {\n        return this.appService.cclabels\n            ? this.appService.cclabels.labelsAutoSuggestWildcard\n            : undefined;\n    }\n\n    public get allowPublicLabelsManagement(): boolean {\n        return this.appService.cclabels\n            ? this.appService.cclabels.allowPublicLabelsCreation\n            : false;\n    }\n\n    public get allowPublicLabelsEdition(): boolean {\n        return this.appService.cclabels\n            ? this.appService.cclabels.allowPublicLabelsModification\n            : false;\n    }\n\n    public get userLabelsRights(): LabelsRights {\n        let rights: LabelsRights | undefined;\n        if (!this.labelsRights) {\n            if (!this.labelsRightsSubscription) {\n                const observable = this.labelsWebService.getUserRights();\n                this.labelsRightsSubscription = Utils.subscribe(\n                    observable,\n                    (response) => (rights = response)\n                );\n            } else {\n                rights = LabelsService.defaultLabelsRights;\n            }\n            this.labelsRights = !!rights\n                ? rights\n                : LabelsService.defaultLabelsRights;\n        }\n        return this.labelsRights;\n    }\n\n    ngOnDestroy() {\n        if (this.labelsRightsSubscription) {\n            this.labelsRightsSubscription.unsubscribe();\n        }\n    }\n\n    /** From navbar */\n    public renameLabelModal(): Promise<ModalResult> {\n        const data = {\n            oldValues: [],\n            newValue: \"\",\n            properties: this._modalProperties(UpdateLabelsAction.rename),\n        };\n        return this.modalService.open(this.labelsComponents.renameModal, {\n            model: data,\n        });\n    }\n\n    public deleteLabelModal(): Promise<ModalResult> {\n        const data = {\n            values: [],\n            properties: this._modalProperties(UpdateLabelsAction.delete),\n        };\n        return this.modalService.open(this.labelsComponents.deleteModal, {\n            model: data,\n        });\n    }\n\n    public bulkAddLabelModal(): Promise<ModalResult> {\n        const data = {\n            values: [],\n            properties: this._modalProperties(UpdateLabelsAction.bulkAdd),\n        };\n        return this.modalService.open(this.labelsComponents.addModal, {\n            model: data,\n        });\n    }\n\n    public bulkRemoveLabelModal(): Promise<ModalResult> {\n        const data = {\n            values: [],\n            properties: this._modalProperties(UpdateLabelsAction.bulkRemove),\n        };\n        return this.modalService.open(this.labelsComponents.deleteModal, {\n            model: data,\n        });\n    }\n\n    private _modalProperties(action: number): ModalProperties {\n        const allowManagePublicLabels: boolean =\n            this.allowPublicLabelsManagement &&\n            this.userLabelsRights &&\n            this.userLabelsRights.canManagePublicLabels;\n        const allowEditPublicLabels: boolean =\n            this.allowPublicLabelsEdition &&\n            this.userLabelsRights &&\n            this.userLabelsRights.canEditPublicLabels;\n        let allowNewLabels: boolean = false;\n        let radioButtonsConf: any;\n\n        switch (action) {\n            case UpdateLabelsAction.rename:\n            case UpdateLabelsAction.remove:\n            case UpdateLabelsAction.delete:\n            case UpdateLabelsAction.bulkRemove:\n                allowNewLabels = false;\n                break;\n            case UpdateLabelsAction.add:\n            case UpdateLabelsAction.bulkAdd:\n            case UpdateLabelsAction.edit:\n                allowNewLabels = true;\n                break;\n            default:\n                break;\n        }\n\n        switch (action) {\n            case UpdateLabelsAction.rename:\n            case UpdateLabelsAction.delete:\n                radioButtonsConf = this._getModalRadioButtonsConf(\n                    allowManagePublicLabels\n                );\n                break;\n            case UpdateLabelsAction.add:\n            case UpdateLabelsAction.bulkAdd:\n            case UpdateLabelsAction.remove:\n            case UpdateLabelsAction.bulkRemove:\n            case UpdateLabelsAction.edit:\n                radioButtonsConf = this._getModalRadioButtonsConf(\n                    allowManagePublicLabels || allowEditPublicLabels\n                );\n                break;\n            default:\n                break;\n        }\n\n        return {\n            allowEditPublicLabels: allowEditPublicLabels,\n            allowManagePublicLabels: allowManagePublicLabels,\n            allowNewLabels: allowNewLabels,\n            action: action,\n            ...radioButtonsConf,\n        };\n    }\n\n    private _getModalRadioButtonsConf(publicRight: boolean): any {\n        let isPublic: boolean = true;\n        let disableAutocomplete: boolean = false;\n        let radioButtons: any[] = [];\n        let publicRadioButton = {\n            id: \"publicLabel\",\n            name: \"msg#labels.public\",\n            value: true,\n            disabled: false,\n            checked: true,\n        };\n        let privateRadioButton = {\n            id: \"privateLabel\",\n            name: \"msg#labels.private\",\n            value: false,\n            disabled: false,\n            checked: false,\n        };\n        if (!!this.publicLabelsField && !!this.privateLabelsField) {\n            if (publicRight) {\n                isPublic = true;\n                radioButtons = [publicRadioButton, privateRadioButton];\n            } else {\n                isPublic = false;\n                publicRadioButton = {\n                    ...publicRadioButton,\n                    disabled: true,\n                    checked: false,\n                };\n                privateRadioButton = {\n                    ...privateRadioButton,\n                    disabled: true,\n                    checked: true,\n                };\n                radioButtons = [publicRadioButton, privateRadioButton];\n            }\n        } else if (!!this.publicLabelsField) {\n            if (publicRight) {\n                isPublic = true;\n                publicRadioButton = {\n                    ...publicRadioButton,\n                    disabled: true,\n                    checked: true,\n                };\n                radioButtons = [publicRadioButton];\n            } else {\n                isPublic = false;\n                disableAutocomplete = true;\n                publicRadioButton = {\n                    ...publicRadioButton,\n                    disabled: true,\n                    checked: false,\n                };\n                radioButtons = [publicRadioButton];\n            }\n        } else if (!!this.privateLabelsField) {\n            isPublic = false;\n            privateRadioButton = {\n                ...privateRadioButton,\n                disabled: true,\n                checked: true,\n            };\n            radioButtons = [privateRadioButton];\n        }\n\n        return {\n            public: isPublic,\n            disableAutocomplete: disableAutocomplete,\n            radioButtons: radioButtons,\n        };\n    }\n    /** END From navbar */\n\n    /** From result selector */\n    public buildSelectionAction(): Action | undefined {\n        if (!this.publicLabelsField && !this.privateLabelsField) {\n            return undefined;\n        }\n        const action = new Action({\n            icon: \"fas fa-tags\",\n            title: \"msg#labels.labels\",\n            action: () => {\n                this.editLabelModal();\n            },\n        });\n        if (action) {\n            action.updater = (action) => {\n                action.hidden = !this.selectionService.haveSelectedRecords;\n            };\n            action.hidden = true;\n        }\n        return action;\n    }\n\n    public editLabelModal(): Promise<ModalResult> {\n        const data = {\n            valuesToBeAdded: [],\n            valuesToBeRemoved: [],\n            properties: this._modalProperties(UpdateLabelsAction.edit),\n        };\n        return this.modalService.open(this.labelsComponents.editModal, {\n            model: data,\n        });\n    }\n    /** END result selector */\n\n\n    addLabels(\n        labels: string[],\n        ids: string[],\n        _public: boolean\n    ): Observable<void> {\n        if (!labels || labels.length === 0 || !ids || ids.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.add(labels, ids, _public);\n        return observable;\n    }\n\n    removeLabels(\n        labels: string[],\n        ids: string[],\n        _public: boolean\n    ): Observable<void> {\n        if (!labels || labels.length === 0 || !ids || ids.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.remove(labels, ids, _public);\n        return observable;\n    }\n\n    selectLabels(labels: string[], _public: boolean): Promise<boolean> {\n        const field =\n            this.appService.cclabels &&\n            (_public\n                ? this.appService.cclabels.publicLabelsField\n                : this.appService.cclabels.privateLabelsField);\n        if (!field) {\n            return Promise.resolve(false);\n        }\n        const items: ValueItem[] = [];\n        const selectedLabels: string[] = this.getSelectedLabels(field);\n        for (let label of labels) {\n            const display = label;\n            if (!_public) {\n                label = <string>this.addPrivatePrefix(label);\n            }\n            if (selectedLabels.indexOf(label) === -1) {\n                items.push({\n                    value: label,\n                    display: display,\n                });\n            }\n        }\n\n        this.searchService.addFieldSelect(field, items);\n        return this.searchService.search(undefined, {\n            type: AuditEventType.Label_Open,\n            detail: {\n                label: !!labels ? labels.toString() : null,\n                public: _public,\n            },\n        });\n    }\n\n    /**\n     * Retrieves the labels that are not in the current filters of breadcrumbs\n     *\n     * @param field The column index containing the labels.\n     * @returns The selected labels\n     */\n    private getSelectedLabels(field: string): string[] {\n        const labels: string[] = [];\n        if (field && this.searchService.breadcrumbs?.activeSelects) {\n            for (const select of this.searchService.breadcrumbs.activeSelects) {\n                if (select.expr) {\n                    const values = select.expr.getValues(field);\n                    values.forEach((value) => {\n                        if (labels.indexOf(value) === -1) {\n                            labels.push(value);\n                        }\n                    });\n                }\n            }\n        }\n        return labels;\n    }\n\n    renameLabels(\n        labels: string[],\n        newLabel: string,\n        _public: boolean\n    ): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.rename(\n            labels,\n            newLabel,\n            _public\n        );\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\"msg#renameLabel.errorFeedback\");\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#renameLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    deleteLabels(labels: string[], _public: boolean): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.delete(labels, _public);\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\"msg#deleteLabel.errorFeedback\");\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#deleteLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    bulkAddLabels(labels: string[], _public: boolean): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.bulkAdd(\n            labels,\n            this.searchService.query,\n            _public\n        );\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\n                    \"msg#bulkAddLabel.errorFeedback\"\n                );\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#bulkAddLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    bulkRemoveLabels(labels: string[], _public: boolean): Observable<void> {\n        if (!labels || labels.length === 0) {\n            return of();\n        }\n        const observable = this.labelsWebService.bulkRemove(\n            labels,\n            this.searchService.query,\n            _public\n        );\n        Utils.subscribe(\n            observable,\n            () => {},\n            () => {\n                this.notificationService.error(\n                    \"msg#bulkRemoveLabel.errorFeedback\"\n                );\n            },\n            () => {\n                this.notificationService.success(\n                    \"msg#bulkRemoveLabel.successFeedback\"\n                );\n                this.searchService.search(); /** Update the display immediately in the components and facets*/\n            }\n        );\n        return observable;\n    }\n\n    get privateLabelsPrefix(): string {\n        if (!this.principalWebService.principal) {\n            return \"\";\n        }\n        if (!this._privateLabelsPrefix && this.appService.cclabels) {\n            if (\n                this.appService.isTree(\n                    this.appService.cclabels.privateLabelsField\n                )\n            ) {\n                this._privateLabelsPrefix = Utils.addUrl(\n                    \"/\",\n                    Utils.replace(\n                        this.principalWebService.principal.userId,\n                        \"|\",\n                        \"/\"\n                    ),\n                    \"/\"\n                );\n            } else {\n                this._privateLabelsPrefix =\n                    this.principalWebService.principal.userId + \"|\";\n            }\n        }\n        return this._privateLabelsPrefix || \"\";\n    }\n\n    sort(labels: string[], _public: boolean): string[] {\n        if (!labels) return labels;\n        return labels.sort((a, b) => {\n            if (!a) return -1;\n            if (!b) return 1;\n            if (!_public) {\n                a = <string>this.removePrivatePrefix(a);\n                b = <string>this.removePrivatePrefix(b);\n            }\n            a = this.intlService.formatMessage(a);\n            b = this.intlService.formatMessage(b);\n            return a.localeCompare(b);\n        });\n    }\n\n    split(labels: string): string[] {\n        if (!labels) {\n            return [];\n        }\n        return labels\n            .trim()\n            .split(/\\s*;\\s*/)\n            .filter((value) => {\n                return value !== \"\";\n            });\n    }\n\n    private _addPrivatePrefix(label: string): string {\n        if (\n            this.appService.cclabels &&\n            this.appService.isTree(this.appService.cclabels.privateLabelsField)\n        ) {\n            return Utils.addUrl(this.privateLabelsPrefix, label);\n        } else {\n            return this.privateLabelsPrefix + label;\n        }\n    }\n\n    addPrivatePrefix(labels: string | string[]): string | string[] {\n        if (typeof labels === \"string\") {\n            return this._addPrivatePrefix(labels);\n        } else {\n            for (let i = 0, ic = labels.length; i < ic; i++) {\n                labels[i] = this._addPrivatePrefix(labels[i]);\n            }\n            return labels;\n        }\n    }\n\n    private _removePrivatePrefix(label: string): string {\n        if (label.indexOf(this.privateLabelsPrefix) === 0) {\n            if (\n                this.appService.cclabels &&\n                this.appService.isTree(\n                    this.appService.cclabels.privateLabelsField\n                )\n            ) {\n                return label.slice(this.privateLabelsPrefix.length - 1);\n            } else {\n                return label.slice(this.privateLabelsPrefix.length);\n            }\n        }\n        return label;\n    }\n\n    removePrivatePrefix(labels: string | string[]): string | string[] {\n        if (typeof labels === \"string\") {\n            return this._removePrivatePrefix(labels);\n        } else {\n            for (let i = 0, ic = labels.length; i < ic; i++) {\n                labels[i] = this._removePrivatePrefix(labels[i]);\n            }\n            return labels;\n        }\n    }\n}\n","export * from \"./public-api\";","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Record} from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-result-extracts\",\n    templateUrl: \"./result-extracts.html\",\n    styles: [`\np, ul {\n    margin: 0;\n    color: #676767;\n    font-size: 0.9em;\n}\n    `]\n})\nexport class ResultExtracts implements OnChanges {\n    @Input() record: Record;\n    @Input() limitLinesDisplayed: boolean;\n    @Input() showLinesExpander: boolean;\n    @Input() showTextAlways: boolean;\n    @Input() showLongExtracts: boolean;\n    @Input() hideDate: boolean;\n    @Input() maxLongExtracts: number;\n    @Input() dateFormat: Intl.DateTimeFormatOptions = {year: 'numeric', month: 'short', day: 'numeric'};\n    collapsed: boolean = true;\n    text: string | undefined;\n    longExtracts: string[] | undefined;\n    extractsClass: string;\n\n    setup() {\n        this.text = undefined;\n        this.longExtracts = undefined;\n        if (this.showTextAlways) {\n            this.text = Utils.encodeHTML(this.record.text);\n            this.extractsClass = \"sq-text-extracts\";\n        }\n        else {\n            if (this.showLongExtracts && (this.record[\"extracts\"] || this.record[\"extractsperpartname\"] )) {\n                this.longExtracts = [];\n                // extractsperpartname is a complex structure where extracts are stored in an object: \"highlight.data\"\n                // in a csv field (';' separator)\n                let recordExtracts = this.record[\"extracts\"] || this.record[\"extractsperpartname\"].highlight[0].data.split(\";\");\n                if (this.maxLongExtracts) {\n                    recordExtracts = recordExtracts.slice(0, this.maxLongExtracts * 3);\n                }\n                for (let i = 0; i < recordExtracts.length; i += 3) {\n                    this.longExtracts.push(recordExtracts[i].replace(/\\{b\\}/g, \"<strong>\").replace(/\\{nb\\}/g, \"</strong>\"));\n                }\n                this.extractsClass = \"sq-long-extracts\";\n            }\n            else if (this.record.relevantExtracts) {\n                this.text = this.record.relevantExtracts;\n                this.extractsClass = \"sq-relevant-extracts\";\n            }\n            else {\n                this.text = Utils.encodeHTML(this.record.text);\n                this.extractsClass = \"sq-text-extracts\";\n            }\n        }\n\n        if (!this.limitLinesDisplayed || !this.collapsed) {\n            this.extractsClass += \" sq-show-all\";\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.setup();\n    }\n\n    collapseClick(event: Event) {\n        this.collapsed = !this.collapsed;\n        this.setup();\n        event.preventDefault();\n    }\n}","<ng-container *ngIf=\"text || longExtracts\">\n    <p *ngIf=\"!longExtracts\" class=\"{{extractsClass}} sq-text\">\n        <span *ngIf=\"record.modified && !hideDate\" class=\"extracts-date\">{{record.modified | sqDate:dateFormat}}{{!!text ? ' - ' : ''}}</span>\n        <span class=\"extracts-text\" [innerHTML]=\"text\"></span>\n    </p>\n    <ng-container *ngIf=\"longExtracts\">\n        <p *ngIf=\"record.modified && !hideDate\" class=\"{{extractsClass}} extracts-date sq-text\">{{record.modified | sqDate:dateFormat}}</p>\n        <ul *ngIf=\"longExtracts\" class=\"{{extractsClass}} sq-text\">\n            <li *ngFor=\"let extract of longExtracts\" [innerHTML]=\"extract\"></li>\n        </ul>\n    </ng-container>\n    <a *ngIf=\"showLinesExpander\" class=\"sq-text\" href=\"#\" (click)=\"collapseClick($event)\">\n        <sq-collapse-button [collapsed]=\"collapsed\"></sq-collapse-button>\n    </a>\n</ng-container>\n","import {NgModule, APP_INITIALIZER, ModuleWithProviders, Type} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {BaseModule} from \"@sinequa/core/base\";\n\nimport {IntlService, LOCALES_CONFIG, LocalesConfig} from \"./intl.service\";\nimport {MessagePipe} from \"./message.pipe\";\nimport {INTL_MODULE_PROVIDERS} from \"./module.providers\";\n\n/**\n * An APP_INITIALIZER factory function for initialising the {@link IntlService} before any UI is displayed\n */\nexport function IntlInitializer(intlService: IntlService): () => Promise<string> {\n    const init = () => intlService.init().toPromise();\n    return init;\n}\n\n/**\n * This module contains core internationalization functionality for the formatting of numbers, dates and strings.\n * It is based on the industry standard\n * [Intl]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl} API\n * and an implementation of the ICU Message syntax provided by [FormatJS]{@link https://formatjs.io/}.\n *\n * The module provides mechanisms for the definition and loading of locales which can be extended with library specific\n * locale information. By default, locales contain support for `Moment.js` and `D3.js`.\n *\n * The module can be initialized by importing it using the `forRoot` static method or otherwise providing the\n * {@link LOCALES_CONFIG} injection token\n */\n@NgModule({\n    imports: [\n        CommonModule,\n        BaseModule\n    ],\n    declarations: [\n        MessagePipe\n    ],\n    exports: [\n        MessagePipe\n    ],\n    providers: [\n        {provide: APP_INITIALIZER, useFactory: IntlInitializer, deps: [IntlService], multi: true},\n        ...INTL_MODULE_PROVIDERS\n    ]\n})\nexport class IntlModule {\n    static forRoot(localeConfig: Type<LocalesConfig>): ModuleWithProviders<IntlModule> {\n        return {\n            ngModule: IntlModule,\n            providers: [\n                {provide: LOCALES_CONFIG, useClass: localeConfig},\n            ]\n        };\n    }\n}\n","import {Utils} from \"@sinequa/core/base\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enFeedback from \"./en\";\nimport _frFeedback from \"./fr\";\nimport _deFeedback from \"./de\";\n\nconst enFeedback = Utils.merge({}, _enFeedback, enModal);\nconst frFeedback = Utils.merge({}, _frFeedback, frModal);\nconst deFeedback = Utils.merge({}, _deFeedback, deModal);\n\nexport { enFeedback, frFeedback, deFeedback };\n","export default {\n    \"advanced\": {\n        \"rangeSeparator\": \" / \",\n        \"dateRangePicker\": {\n            \"separator\": \" / \"\n        },\n        \"rangeInput\": {\n            \"separator\": \"/\"\n        },\n        \"select\": {\n            \"nItems\": \"{count} éléments sélectionnés\",\n            \"allItems\": \"Tous les éléments\",\n            \"noItems\": \"Aucun élément\"\n        }\n    }\n};\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\n\n@Pipe({name: \"sqRelativeTime\", pure: false})\nexport class RelativeTimePipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: string |number | Date | undefined, params: {unit: Intl.RelativeTimeUnit} & Intl.RelativeTimeFormatOptions & { format?: string }): void {\n        super.updateValue(key, params);\n        this.value = this.intlService.formatRelativeTime(key, params ? params.unit : undefined, params);\n    }\n}","import { Component, Input } from \"@angular/core\";\nimport { Principal } from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-metadata-access-lists-item-single-access-list\",\n    templateUrl: \"./metadata-access-lists-item-single-access-list.html\",\n    styleUrls: [\"./metadata-access-lists-item-single-access-list.css\"]\n})\nexport class MetadataAccessListsItemSingleAccessList {\n\n    @Input() private readonly authorized: boolean;\n    @Input() public readonly index: number;\n    @Input() public readonly accessList: Principal[];\n    public collapsed = true;\n\n    public get headerMessage(): string {\n        return \"msg#metadata.accessLists.\" + (this.authorized ? \"authorizedListHeader\" : \"deniedListHeader\");\n    }\n\n    public collapseClick(event: Event) {\n        this.collapsed = !this.collapsed;\n        event.preventDefault();\n    }\n}\n","<div class=\"accessListHeader\">\n    {{ headerMessage | sqMessage:{values: {value: index} } }}\n    <a href=\"#\" (click)=\"collapseClick($event)\">\n        <sq-collapse-button class=\"collapseButton\" [collapsed]=\"collapsed\">\n        </sq-collapse-button>\n    </a>\n</div>\n<sq-collapse [collapsed]=\"collapsed\">\n    <ng-template>\n        <div class=\"accessListBody\">\n            <div class=\"principalList\">\n                <div *ngFor=\"let principal of accessList\" class=\"principal\">\n                    <div class=\"domain\">{{ principal.domain }}</div>\n                    <div class=\"separator\"> | </div>\n                    <div class=\"id\">{{ principal.id }}</div>\n                </div>\n            </div>\n        </div>    \n    </ng-template>\n</sq-collapse>\n","import {Utils, MapOf, IRef, FieldValue} from \"@sinequa/core/base\";\nimport {AppService} from \"../app.service\";\nimport {AppServiceHelpers} from \"../app-service-helpers\";\nimport {CCColumn, EngineType} from \"@sinequa/core/web-services\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {FormatService} from \"../format.service\";\n\n/**\n * Describes a context for processing expressions\n */\nexport interface ExprContext {\n    appService: AppService;\n    formatService: FormatService;\n    intlService: IntlService;\n    disallowFulltext?: boolean;\n}\n\n/**\n * The operators accepted in fielded search expressions\n */\nexport const enum ExprOperator {\n    none,\n    eq,\n    gt,\n    gte,\n    lt,\n    lte,\n    neq,\n    regex,\n    like,\n    contains,\n    in,\n    between\n}\n\n/**\n * The range operators accepted in fielded search expressions\n */\nexport const enum ExprRange {\n    none,\n    gteLte,\n    gteLt,\n    gtLte,\n    gtLt\n}\n\n/**\n * An object containing the data necessary to format an `Expr` using\n * [IntlService.formatMessage]{@link IntlService#formatMessage}\n */\nexport interface ExprMessage {\n    /**\n     * The `IntlService` compatible message string\n     */\n    message: string;\n    /**\n     * Any values referenced by `message`\n     */\n    values?: {\n        [key: string]: FieldValue\n    };\n}\n\n/**\n * Options to be used with `Expr.toMessage`\n */\nexport interface ExprMessageOptions {\n    /**\n     * If `true`, field names are included in the message\n     */\n    withFields?: boolean;\n    /**\n     * If `true`, use any display value set in the expression\n     */\n    useDisplay?: boolean;\n    /**\n     * Include HTML formatting in the message\n     */\n    asHTML?: boolean;\n    /**\n     * If `true`, don't include any outer `NOT` operator in the message\n     */\n    hideOuterNot?: boolean;\n}\n\n/**\n * @ignore\n */\ninterface ExprMessageCtxt {\n    inner: boolean;\n    message: string[];\n    values: {\n        [key: string]: FieldValue\n    };\n    valueIndex: number;\n}\n\n/**\n * Describes a location in a fielded search expression\n */\nexport interface ExprLocation {\n    start: number;\n    length: number;\n}\n\n/**\n * Describes a location and value in a fielded search expression\n */\nexport interface ExprValueLocation extends ExprLocation {\n    value: string;\n}\n\n/**\n * Describes a location, value and field in a fielded search expression\n */\nexport interface ExprValueInfo extends ExprValueLocation {\n    field: string;\n}\n\n/**\n * Describes the data used in [Expr.evaluate]{@link Expr#evaluate}\n */\nexport interface ExprEvaluationContext {\n    [key: string]: any;\n}\n\n/**\n * Describes an initialization object used in the construction of an {@link Expr} from a value\n */\nexport interface ExprValueInitializer {\n    /**\n     * The expression context\n     */\n    exprContext: ExprContext;\n    /**\n     * A single value\n     */\n    value?: string;\n    /**\n     * An array of values\n     */\n    values?: string[];\n    /**\n     * Locations of the values used in range expressions\n     */\n    locations?: ExprLocation[];\n    /**\n     * The operator used in the expression\n     */\n    operator?: ExprOperator;\n    /**\n     * The field name\n     */\n    field?: string;\n    /**\n     * The display value\n     */\n    display?: string;\n}\n\n/**\n * Describes an initialization object used in the construction of a boolean {@link Expr} with a pair of operands\n */\nexport interface ExprOperandsInitializer {\n    /**\n     * The expression context\n     */\n    exprContext: ExprContext;\n    /**\n     * The first operand\n     */\n    op1: Expr;\n    /**\n     * If `true` this `Expr` represents an `AND` expression, otherwise it represents an `OR` expression\n     */\n    and: boolean;\n    /**\n     * The second operand\n     */\n    op2: Expr;\n    /**\n     * The field name\n     */\n    field?: string;\n    /**\n     * The display value\n     */\n    display?: string;\n}\n\n/**\n * Represents a parsed fielded search expression. A tree of expression nodes is built when an expression\n * combines sub-expressions using boolean operators\n */\nexport class Expr {\n\n    private _field: string | undefined = undefined;\n\n    /**\n     * Return the field name of this expression. Return the first ancestor's non-empty field\n     * if the field on this node is empty\n     */\n    public get field(): string | undefined {\n        let expr: Expr = this;\n        while (expr) {\n            if (!Utils.isEmpty(expr._field)) {\n                return expr._field;\n            }\n            expr = expr.parent;\n        }\n        return undefined;\n    }\n\n    /**\n     * Set the field name of this expression\n     */\n    public set field(value: string | undefined) {\n        this._field = value;\n    }\n\n    private _display: string | undefined = undefined;\n    private _displayObj: {label?: string, display?: string} | undefined = undefined;\n\n    /**\n     * Return the display value of this expression. Return the first ancestor's non-empty display value\n     * if the display value on this node is empty\n     */\n    public get display(): string | undefined {\n        let expr: Expr = this;\n        while (expr) {\n            if (!Utils.isEmpty(expr._display)) {\n                return expr._display;\n            }\n            expr = expr.parent;\n        }\n        return undefined;\n    }\n\n    /**\n     * Set the display value of this expression. If the display value is a valid stringified JSON object\n     * then set `displayObj` to the parsed object\n     */\n    public set display(value: string | undefined) {\n        this._display = value;\n        if (!this._display) {\n            this._displayObj = undefined;\n        }\n        else {\n            if (this._display[0] === \"{\" && this._display[this._display.length - 1] === \"}\") {\n                try {\n                    this._displayObj = Utils.fromJson(this._display);\n                }\n                catch (e) {\n                    this._displayObj = undefined;\n                }\n            }\n            else {\n                this._displayObj = undefined;\n            }\n        }\n    }\n\n    /**\n     * Return the display object of this expression. Return the first ancestor's non-empty display object\n     * if the display object on this node is empty\n     */\n    public get displayObj(): {label?: string, display?: string} | undefined {\n        let expr: Expr = this;\n        while (expr) {\n            if (expr._displayObj) {\n                return expr._displayObj;\n            }\n            expr = expr.parent;\n        }\n        return undefined;\n    }\n\n    /**\n     * The values of this expression\n     */\n    public values: string[] | undefined = undefined;\n    /**\n     * The locations of the values of this expression\n     */\n    public locations: ExprLocation[] | undefined;\n\n    /**\n     * Return the value of this expression. Note that range expressions may have multiple values\n     */\n    public get value(): string | undefined {\n        if (!this.values || this.values.length === 0) {\n            return undefined;\n        }\n        return this.values[0];\n    }\n\n    /**\n     * Set the value of this expression\n     */\n    public set value(value: string | undefined) {\n        if (value === undefined) {\n            this.values = undefined;\n        }\n        else {\n            if (!this.values) {\n                this.values = [];\n            }\n            this.values[0] = value;\n            this.values.length = 1;\n        }\n    }\n\n    /**\n     * The operator of this expression\n     */\n    public operator: ExprOperator;\n    /**\n     * If `true` then this expression included the `NOT` boolean operator\n     */\n    public not: boolean;\n    /**\n     * If `true` then the operands of this expression are combined with the `AND` operator.\n     * Otherwise the operands are combined with the `OR` operator\n     */\n    public and: boolean;\n    /**\n     * The operands of this expression, if any\n     */\n    public operands: Expr[];\n    /**\n     * The parent expression, if any\n     */\n    public parent: Expr;\n    /**\n     * The expression context\n     */\n    public exprContext: ExprContext;\n    /**\n     * The distance specified in a `NEAR` expression\n     */\n    public near: number;\n    /**\n     * The position of this expression's value in the original text\n     */\n    public start: number;\n    /**\n     * The length of this expression's value in the original text\n     */\n    public length: number;\n    private mergedStructured: boolean;\n\n    // for evaluate\n    private _evaluationRegExps: MapOf<RegExp | undefined>;\n    private get evaluationRegExps(): MapOf<RegExp | undefined> {\n        if (!this._evaluationRegExps) {\n            this._evaluationRegExps = {};\n        }\n        return this._evaluationRegExps;\n    }\n\n    constructor(init: ExprValueInitializer | ExprOperandsInitializer) {\n        if (!(<ExprOperandsInitializer>init).op1) {\n            const valueInit: ExprValueInitializer = <ExprValueInitializer>init;\n            this.exprContext = valueInit.exprContext;\n            if (!Utils.isUndefined(valueInit.value)) {\n                this.value = ExprParser.unescape(valueInit.value);\n            }\n            else if (!Utils.isUndefined(valueInit.values)) {\n                this.values = ExprParser.unescapeList(valueInit.values);\n            }\n            this.locations = valueInit.locations;\n            this.field = valueInit.field;\n            this.display = valueInit.display;\n            this.operator = !Utils.isUndefined(valueInit.operator) ? valueInit.operator : ExprOperator.none;\n            this.near = -1;\n            this.start = -1;\n            this.length = 0;\n        }\n        else {\n            const opsInit: ExprOperandsInitializer = init as ExprOperandsInitializer;\n            this.exprContext = opsInit.exprContext;\n            this.field = opsInit.field;\n            this.display = opsInit.display;\n            this.addOperand(opsInit.op1);\n            this.addOperand(opsInit.op2);\n            this.and = opsInit.and;\n            this.near = -1;\n            this.start = -1;\n            this.length = 0;\n        }\n    }\n\n    /**\n     * Add an operand to this expression\n     *\n     * @param operand The operand to add\n     * @param contextField The parser's field context, if any\n     * @param prepend If `true` the operand is prepended to the operands\n     */\n    public addOperand(operand: Expr, contextField?: string, prepend = false) {\n        if (Utils.isUndefined(contextField)) {\n            contextField = this.field;\n        }\n        if (!this.operands) {\n            this.operands = [];\n        }\n        if (!Utils.isEmpty(this.field) && Utils.isEmpty(operand.field) && !operand.isStructured) {\n            if (Utils.isEmpty(contextField)) {\n                // Prefer setting the fields explicitly on the target operands rather the Field to \"text\" on the source operand\n                // operand.field = ExprParser.fieldPartnamePrefix + \"text\";\n                for (const expr of this.operands) {\n                    if (Utils.isEmpty(expr._field)) {\n                        expr._field = this.field;\n                    }\n                }\n                this.field = undefined;\n            }\n        }\n        if (!Utils.eqNC(this.field || \"\", operand.field || \"\")) {\n            operand._field = operand.field;\n        }\n        else {\n            operand._field = undefined;\n        }\n        if (!Utils.isEmpty(this.display)) {\n            operand._display = undefined;\n        }\n        if (prepend) {\n            this.operands.unshift(operand);\n        }\n        else {\n            this.operands.push(operand);\n        }\n        operand.parent = this;\n    }\n\n    /**\n     * Return `true` if this expression is a leaf node (does have a value)\n     */\n    public get isLeaf(): boolean {\n        // if (this.value === null && !this.operands) throw \"Expr.isLeaf - bad expression\";\n        return !!this.value;\n    }\n\n    /**\n     * Make an expression object\n     *\n     * @param exprContext The expression context\n     * @param text The value of the expression\n     * @param field The parser's field context\n     * @param display The display value\n     * @param allowEmptyValue Determines how empty values will be processed when making the expression\n     */\n    public static makeExpr(exprContext: ExprContext, text: string, field: string, display: string, allowEmptyValue: boolean): Expr | undefined {\n        if (!Expr.getIsStructuredField(exprContext, Expr.resolveField(exprContext, field))) {\n            return new Expr({\n                exprContext: exprContext,\n                value: text,\n                field: field,\n                display: display\n            });\n        }\n\n        const values: IRef<string[] | undefined> = {value: undefined};\n        const locations: IRef<ExprLocation[] | undefined> = {value: undefined};\n        const operator: IRef<ExprOperator> = {value: ExprOperator.none};\n        const range: IRef<ExprRange> = {value: ExprRange.none};\n        Expr.parseValue(exprContext, text, field, allowEmptyValue, values, locations, operator, range);\n        if (range.value !== ExprRange.none && values.value && locations.value) {\n            const value1 = values.value[0];\n            const value2 = values.value[1];\n            const location1 = locations.value[0];\n            const location2 = locations.value[1];\n            if (range.value === ExprRange.gteLte && !Utils.eqNC(value1, \"*\") && !Utils.eqNC(value2, \"*\")) {\n                return new Expr({\n                    exprContext: exprContext,\n                    values: values.value,\n                    locations: locations.value,\n                    field: field,\n                    display: display,\n                    operator: ExprOperator.between\n                });\n            }\n            const expr1 = !Utils.eqNC(value1, \"*\") ? new Expr({\n                exprContext: exprContext,\n                value: value1,\n                locations: [location1],\n                field: field,\n                display: display,\n                operator: range.value === ExprRange.gteLt || range.value === ExprRange.gteLte ? ExprOperator.gte : ExprOperator.gt\n            }) : null;\n            const expr2 = !Utils.eqNC(value2, \"*\") ? new Expr({\n                exprContext: exprContext,\n                value: value2,\n                locations: [location2],\n                field: field,\n                display: display,\n                operator: range.value === ExprRange.gteLte || range.value === ExprRange.gtLte ? ExprOperator.lte : ExprOperator.lt\n            }) : undefined;\n            if (!expr1 && !expr2) {\n                return undefined;\n            }\n            if (!(!!expr1 && !!expr2)) return !!expr1 ? expr1 : expr2;\n            return new Expr({\n                exprContext: exprContext,\n                op1: expr1,\n                and: true,\n                op2: expr2,\n                display: display\n            });\n        }\n        return new Expr({\n            exprContext: exprContext,\n            values: values.value,\n            locations: locations.value,\n            field: field,\n            display: display,\n            operator: operator.value\n        });\n    }\n\n    private static resolveField(exprContext: ExprContext, field: string | null | undefined): string {\n        if (Utils.isString(field)) {\n            return exprContext.appService.resolveColumnName(field);\n        }\n        return \"\";\n    }\n\n    private static getColumn(exprContext: ExprContext, field: string | undefined): CCColumn | undefined {\n        return exprContext.appService.getColumn(field);\n    }\n\n    /**\n     * Return the {@link CCColumn} corresponding to this expression\n     */\n    get column(): CCColumn | undefined {\n        return Expr.getColumn(this.exprContext, this.field);\n    }\n\n    private static getIsStructuredField(exprContext: ExprContext, field: string | undefined): boolean {\n        if (!field) {\n            return false;\n        }\n        if (exprContext.disallowFulltext) {\n            return true;\n        }\n        else {\n            if (field[0] === \":\") {\n                return false; // :: => take partname over column\n            }\n            if (Utils.eqNCN(field, \"exists\", \"missing\")) {\n                return true;\n            }\n            return !!Expr.getColumn(exprContext, field);\n        }\n    }\n\n    /**\n     * Return `true` if the expression has a non-fulltext field. In this case the expression will be a leaf node\n     */\n    get isStructuredField(): boolean {\n        if (!this.isLeaf) {\n            return false;\n        }\n        return Expr.getIsStructuredField(this.exprContext, this.field);\n    }\n\n    /**\n     * Return `true` if the expression only contains non-fulltext fields\n     */\n    public get isStructured(): boolean {\n        if (this.mergedStructured) {\n            return true;\n        }\n        if (this.isLeaf) {\n            return this.isStructuredField;\n        }\n        if (!this.operands) {\n            return false;\n        }\n        for (const operand of this.operands) {\n            if (!operand.isStructured) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Return `true` if the expression and its ancestors do not have `not` set to `true`\n     */\n    public get isPositive(): boolean {\n        let positive = true;\n        let current: Expr = this;\n        while (current != null) {\n            positive = positive && !current.not;\n            current = current.parent;\n        }\n        return positive;\n    }\n\n    /**\n     * Return an `ExprValueLocation` object for the passed text. Leading and trailing\n     * whitespace is excluded\n     */\n    static getValueAndLocation(text: string): ExprValueLocation {\n        let start = 0;\n        let length = text.length;\n        const value1 = Utils.trimStart(text);\n        start += length - value1.length;\n        length -= length - value1.length;\n        const value2 = Utils.trimEnd(value1);\n        length -= length - value2.length;\n        return {\n            value: value2,\n            start: start,\n            length: length\n        };\n    }\n\n    private static parseValue(exprContext: ExprContext, text: string, field: string, allowEmptyValue: boolean, values: IRef<string[] | undefined>, locations: IRef<ExprLocation[] | undefined>, operator: IRef<ExprOperator>, range: IRef<ExprRange>) {\n        if (Utils.isEmpty(text) && !allowEmptyValue) {\n            return;\n        }\n        const first = text[0];\n        const last = text[text.length - 1];\n        let vl: ExprValueLocation;\n        if (\"[{\".includes(first) && \"]}\".includes(last)) {\n            text = text.substr(1, text.length - 2);\n            let sepLen = 4;\n            let sep = text.indexOf(\" TO \");\n            if (sep === -1) {\n                sepLen = 2;\n                sep = text.indexOf(\"..\");\n            }\n            if (sep === -1) {\n                const vls = ExprParser.valuesAndLocationsFromText(text, ',');\n                values.value = [];\n                locations.value = [];\n                vls.forEach(vl1 => {\n                    values.value!.push(vl1.value);\n                    locations.value!.push({start: 1 + vl1.start, length: vl1.length});\n                });\n                operator.value = ExprOperator.in;\n                return;\n            }\n            vl = Expr.getValueAndLocation(text.substr(0, sep));\n            values.value = [vl.value];\n            locations.value = [{start: 1 + vl.start, length: vl.length}];\n            vl = Expr.getValueAndLocation(text.substr(sep + sepLen));\n            values.value.push(vl.value);\n            locations.value.push({start: 1 + sep + sepLen + vl.start, length: vl.length});\n            if (first === \"[\") {\n                range.value = last === \"]\" ? ExprRange.gteLte : ExprRange.gteLt;\n            }\n            else { // '{'\n                range.value = last === \"}\" ? ExprRange.gtLt : ExprRange.gtLte;\n            }\n            return;\n        }\n        vl = {\n            value: text,\n            start: 0,\n            length: text.length\n        };\n        if (text.startsWith(\"=\")) {\n            operator.value = ExprOperator.eq;\n            vl = Expr.getValueAndLocation(text.substr(1));\n            vl.start += 1;\n        }\n        else if (text.startsWith(\">=\")) {\n            operator.value = ExprOperator.gte;\n            vl = Expr.getValueAndLocation(text.substr(2));\n            vl.start += 2;\n        }\n        else if (text.startsWith(\">\")) {\n            operator.value = ExprOperator.gt;\n            vl = Expr.getValueAndLocation(text.substr(1));\n            vl.start += 1;\n        }\n        else if (text.startsWith(\"<=\")) {\n            operator.value = ExprOperator.lte;\n            vl = Expr.getValueAndLocation(text.substr(2));\n            vl.start += 2;\n        }\n        else if (text.startsWith(\"<>\")) {\n            operator.value = ExprOperator.neq;\n            vl = Expr.getValueAndLocation(text.substr(2));\n            vl.start += 2;\n        }\n        else if (text.startsWith(\"<\")) {\n            operator.value = ExprOperator.lt;\n            vl = Expr.getValueAndLocation(text.substr(1));\n            vl.start += 1;\n        }\n        else if (text.startsWith(\"~\")) {\n            operator.value = ExprOperator.regex;\n            vl = Expr.getValueAndLocation(text.substr(1));\n            vl.start += 1;\n        }\n        else if (text.length > 1 && text.startsWith(\"/\") && text.endsWith(\"/\")) {\n            operator.value = ExprOperator.regex;\n            vl.value = text.substr(1, text.length - 2);\n            vl.start = 1;\n            vl.length = vl.value.length;\n        }\n        if (text.startsWith(\"\\\"\") && text.endsWith(\"\\\"\")) {\n            vl.value = text.substr(1, text.length - 2);\n            vl.start = 1;\n            vl.length = vl.value.length;\n        }\n        values.value = [vl.value];\n        locations.value = [{start: vl.start, length: vl.length}];\n    }\n\n    private static getOperatorText(operator: ExprOperator): string {\n        switch (operator) {\n            case ExprOperator.eq: return \"=\";\n            case ExprOperator.gt: return \">\";\n            case ExprOperator.gte: return \">=\";\n            case ExprOperator.lt: return \"<\";\n            case ExprOperator.lte: return \"<=\";\n            case ExprOperator.neq: return \"<>\";\n            case ExprOperator.regex: return \"REGEXP\";\n            case ExprOperator.like: return \"LIKE\";\n            case ExprOperator.contains: return \"CONTAINS\";\n            case ExprOperator.in: return \"IN\";\n            case ExprOperator.between: return \"BETWEEN\";\n            default: return \"=\";\n        }\n    }\n\n    /**\n     * Find the first `ExprValueInfo` object from a starting position in this expression\n     *\n     * @param start The position at which to start the search\n     */\n    findValue(start: number): ExprValueInfo | undefined {\n        if (this.isLeaf) {\n            if (start >= this.start && start <= this.start + this.length) {\n                if (!this.isStructured) {\n                    return {\n                        /* eslint-disable-next-line */\n                        value: this.value!,\n                        /* eslint-disable-next-line */\n                        field: this.field!,\n                        start: this.start,\n                        length: this.length\n                    };\n                }\n                else if (!!this.locations && this.values && this.values.length === this.locations.length) {\n                    for (let i = 0, ic = this.values.length; i < ic; i++) {\n                        const value = this.values[i];\n                        const location = this.locations[i];\n                        if (start >= this.start + location.start && start <= this.start + location.start + location.length) {\n                            return {\n                                value,\n                                /* eslint-disable-next-line */\n                                field: this.field!,\n                                start: this.start + location.start,\n                                length: location.length\n                            };\n                        }\n                    }\n                }\n            }\n        }\n        else if (!!this.operands) {\n            for (const expr of this.operands) {\n                const value = expr.findValue(start);\n                if (value) {\n                    return value;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Combine two expressions into a single expression. The second expression will be added to\n     * the first expression and the first expression returned if the first expression is non-leaf\n     * and is an `AND` expression and not negated. Otherwise, a new `AND` expression will be created\n     * to which both expressions are added as operands.\n     */\n    static combine(expr1: Expr, expr2: Expr): Expr {\n        if (!expr1) {\n            return expr2;\n        }\n        if (!expr2) {\n            return expr1;\n        }\n        if (!expr1.isLeaf && expr1.and && !expr1.not) {\n            if (expr1.isLeaf || !expr2.and || expr2.not) {\n                expr1.addOperand(expr2);\n            }\n            else {\n                for (const expr3 of expr2.operands) {\n                    expr1.addOperand(expr3);\n                }\n            }\n            return expr1;\n        }\n        return new Expr({\n            exprContext: expr1.exprContext,\n            op1: expr1,\n            and: true,\n            op2: expr2\n        });\n    }\n\n    private normalizeField(field: string | undefined): string | undefined {\n        if (field && field[0] === ExprParser.fieldPartnamePrefix) {\n            return field.substr(1);\n        }\n        return field;\n    }\n\n    private shouldDisplayField(): boolean {\n        if (!this.field && !this.parent) { // top level full text\n            return true;\n        }\n        return !!this.field && (!this.parent || !Utils.eqNC(this.field, this.parent.field || \"\"));\n    }\n\n    private getOperatorString(): string {\n        if (this.operator === ExprOperator.none || this.operator === ExprOperator.eq) {\n            return \"\";\n        }\n        return Expr.getOperatorText(this.operator);\n    }\n\n    private escapeValue(value: string | null | undefined): string {\n        if (!!value && !!this.column && (AppServiceHelpers.isString(this.column) || AppServiceHelpers.isCsv(this.column))) {\n            return ExprParser.escape(value);\n        }\n        return value || \"\";\n    }\n\n    private getValueString(): string {\n        if (this.operator === ExprOperator.between && this.values && this.values.length === 2) {\n            return `[${this.escapeValue(this.values[0])}..${this.escapeValue(this.values[1])}]`;\n        }\n        if (this.values && this.values.length > 1) {\n            const sb: string[] = [];\n            for (const value of this.values) {\n                if (sb.length > 0) {\n                    sb.push(\", \");\n                }\n                sb.push(this.escapeValue(value));\n            }\n            sb.unshift(\"[\");\n            sb.push(\"]\");\n            return sb.join(\"\");\n        }\n        return this.escapeValue(this.value);\n    }\n\n    private addFieldToString(sb: string[]): boolean {\n        let added = false;\n        if (this.shouldDisplayField()) {\n            sb.push(this.normalizeField(this.field) || \"text\");\n            added = true;\n        }\n        if (this.display) {\n            sb.push(ExprParser.escape(this.display));\n            added = true;\n        }\n        if (added) {\n            sb.push(\":\");\n        }\n        return added;\n    }\n\n    private _toString(withFields: boolean, inner: boolean): string {\n        const sb: string[] = [];\n        if (this.isLeaf) {\n            if (this.not) {\n                sb.push(\"NOT \");\n            }\n            if (withFields) {\n                this.addFieldToString(sb);\n            }\n            sb.push(this.getOperatorString());\n            sb.push(this.getValueString());\n        }\n        else {\n            if (!this.operands) {\n                return \"\";\n            }\n            if (this.not) {\n                sb.push(\"NOT \");\n            }\n            let bracketed = inner;\n            if (this.addFieldToString(sb)) {\n                bracketed = true;\n            }\n            if (bracketed) {\n                sb.push(\"(\");\n            }\n            let first = true;\n            for (const operand of this.operands) {\n                if (!first) {\n                    if (this.and) {\n                        sb.push(\" AND \");\n                    }\n                    else {\n                        sb.push(\" OR \");\n                    }\n                }\n                first = false;\n                sb.push(operand._toString(withFields, true));\n            }\n            if (bracketed) {\n                sb.push(\")\");\n            }\n        }\n        return sb.join(\"\");\n    }\n\n    /**\n     * Return a string representation of this expression\n     *\n     * @param withFields If `true`, include field names\n     */\n    toString(withFields = true): string {\n        return this._toString(withFields, false);\n    }\n\n    private addDisplay(options: ExprMessageOptions, ctxt: ExprMessageCtxt, display: string) {\n        this._addValue(options, ctxt, this.value || \"\", display);\n    }\n\n    private encodeHTML(text: string, options: ExprMessageOptions): string {\n        if (options && options.asHTML) {\n            return Utils.encodeHTML(text);\n        }\n        else {\n            return text;\n        }\n    }\n\n    private _addValue(options: ExprMessageOptions, ctxt: ExprMessageCtxt, value: string, display?: string) {\n        if (options.asHTML) {\n            ctxt.message.push(`<span class=\"sq-value\">`);\n        }\n        const column = this.exprContext.appService.getColumn(this.field);\n        const valueId = `value${ctxt.valueIndex++}`;\n        let _value: FieldValue = value;\n        let _display: string | undefined;\n        if (display) {\n            _display = this.encodeHTML(ExprParser.unescape(display), options);\n        }\n        if (column && AppServiceHelpers.isNumber(column) && Utils.testFloat(value)) {\n            _value = +value;\n        }\n        else if (column && AppServiceHelpers.isDate(column)) {\n            _value = Utils.fromSysDateStr(value) || value;\n        }\n        else if (column && AppServiceHelpers.isBoolean(column)) {\n            _value = Utils.isTrue(value);\n        }\n        else if (Utils.isString(_value)) {\n            _value = this.encodeHTML(_value, options);\n        }\n        ctxt.message.push(`{${valueId}}`);\n        ctxt.values[valueId] = column\n            ? this.exprContext.formatService.formatFieldValue({value: _value, display: _display}, column)\n            : _display || _value;\n        if (options.asHTML) {\n            ctxt.message.push(`</span>`);\n        }\n    }\n\n    private addValue(options: ExprMessageOptions, ctxt: ExprMessageCtxt) {\n        if (this.values) {\n            if (this.operator === ExprOperator.between && this.values.length === 2) {\n                this._addValue(options, ctxt, this.values[0]);\n                ctxt.message.push(\" \");\n                this.addOperator(\"AND\", options, ctxt);\n                ctxt.message.push(\" \");\n                this._addValue(options, ctxt, this.values[1]);\n            }\n            else if (this.values.length > 1) {\n                let first = true;\n                for (const value of this.values) {\n                    ctxt.message.push(first ? \"[\" : \", \");\n                    first = false;\n                    this._addValue(options, ctxt, value);\n                }\n                ctxt.message.push(\"]\");\n            }\n            else {\n                this._addValue(options, ctxt, this.values[0]);\n            }\n        }\n    }\n\n    private addText(options: ExprMessageOptions, ctxt: ExprMessageCtxt, text: string) {\n        const valueId = `value${ctxt.valueIndex++}`;\n        const message = `{${valueId}}`;\n        ctxt.message.push(message);\n        ctxt.values[valueId] = this.encodeHTML(text, options);\n    }\n\n    private addFieldLabel(options: ExprMessageOptions, ctxt: ExprMessageCtxt) {\n        const displayObj = this.displayObj;\n        if (displayObj && displayObj.label) {\n            this.addText(options, ctxt, displayObj.label);\n        }\n        else if (this.field) {\n            const label = this.exprContext.appService.getLabel(this.normalizeField(this.field) || \"\");\n            this.addText(options, ctxt, label);\n        }\n        else {\n            if (!this.isStructured) {\n                const label = this.exprContext.appService.getLabel(\"text\");\n                this.addText(options, ctxt, label);\n            }\n            else {\n                const fields = this.getFields();\n                fields.forEach((field, index) => {\n                    if (index !== 0) {\n                        this.addText(options, ctxt, \"/\");\n                    }\n                    const label = this.exprContext.appService.getLabel(field);\n                    this.addText(options, ctxt, label);\n                });\n            }\n        }\n    }\n\n    private addField(options: ExprMessageOptions, ctxt: ExprMessageCtxt) {\n        if (options.asHTML) {\n            ctxt.message.push(`<span class=\"sq-field\">`);\n        }\n        this.addFieldLabel(options, ctxt);\n        if (options.asHTML) {\n            ctxt.message.push(`</span>`);\n            ctxt.message.push(`<span class=\"sq-separator\">`);\n        }\n        this.addText(options, ctxt, \"msg#system.fieldSeparator\");\n        if (options.asHTML) {\n            ctxt.message.push(`</span>`);\n        }\n    }\n\n    private addOperator(operator: string, options: ExprMessageOptions, ctxt: ExprMessageCtxt) {\n        if (!operator) {\n            return;\n        }\n        if (options.asHTML) {\n            ctxt.message.push(`<span class=\"sq-operator\">`);\n        }\n        ctxt.message.push(this.encodeHTML(operator, options));\n        if (options.asHTML) {\n            ctxt.message.push(`</span>`);\n        }\n    }\n\n    private _toMessage(ctxt: ExprMessageCtxt, options?: ExprMessageOptions): ExprMessage {\n        const inner = ctxt.inner;\n        ctxt.inner = true;\n        if (!options) {\n            options = {};\n        }\n        if (Utils.isUndefined(options.useDisplay)) {\n            options.useDisplay = true;\n        }\n\n        const displayObj = this.displayObj;\n        const display = (displayObj ? displayObj.display : undefined) || this.display;\n        const showNot = this.not && (inner || !options.hideOuterNot);\n        const showField = (options.withFields || inner) && this.shouldDisplayField();\n        if (options.useDisplay && !!display) {\n            if (showNot) {\n                this.addOperator(\"NOT\", options, ctxt);\n                ctxt.message.push(\" \");\n            }\n            if (showField) {\n                this.addField(options, ctxt);\n            }\n            this.addDisplay(options, ctxt, display);\n        }\n        else if (this.isLeaf) {\n            if (showNot) {\n                this.addOperator(\"NOT\", options, ctxt);\n                ctxt.message.push(\" \");\n            }\n            if (showField) {\n                this.addField(options, ctxt);\n            }\n            const operator = this.getOperatorString();\n            if (operator) {\n                this.addOperator(operator, options, ctxt);\n                ctxt.message.push(\" \");\n            }\n            this.addValue(options, ctxt);\n        }\n        else {\n            if (!this.operands) {\n                return {message: \"\"};\n            }\n            if (showNot) {\n                this.addOperator(\"NOT\", options, ctxt);\n                ctxt.message.push(\" \");\n            }\n            let bracketed = inner;\n            if (showField) {\n                this.addField(options, ctxt);\n                bracketed = true;\n            }\n            if (bracketed) {\n                ctxt.message.push(\"(\");\n            }\n            let first = true;\n            for (const operand of this.operands) {\n                if (!first) {\n                    if (this.and) {\n                        ctxt.message.push(\" \");\n                        this.addOperator(\"AND\", options, ctxt);\n                        ctxt.message.push(\" \");\n                    }\n                    else {\n                        ctxt.message.push(\" \");\n                        this.addOperator(\"OR\", options, ctxt);\n                        ctxt.message.push(\" \");\n                    }\n                }\n                first = false;\n                operand._toMessage(ctxt, options);\n            }\n            if (bracketed) {\n                ctxt.message.push(\")\");\n            }\n        }\n        if (inner) {\n            return {message: \"\"};\n        }\n        return {\n            message: ctxt.message.join(\"\"),\n            values: ctxt.values\n        };\n    }\n\n    /**\n     * Return an `ExprMessage` for the expression which can be used with [IntlService.formatMessage]{@link IntlService#formatMessage}\n     * for display purposes\n     */\n    toMessage(options?: ExprMessageOptions): ExprMessage {\n        return this._toMessage({\n            inner: false,\n            message: [\"txt#\"],\n            values: {},\n            valueIndex: 0\n        }, options);\n    }\n\n    private static matchNode(context: ExprContext, expr1: Expr, expr2: Expr): boolean {\n        if (expr1.isLeaf !== expr2.isLeaf) {\n            return false;\n        }\n        if (expr1.isLeaf) {\n            if (expr1.isStructured !== expr2.isStructured) {\n                return false;\n            }\n            if (expr1.not !== expr2.not) {\n                return false;\n            }\n            const field1 = context.appService.resolveColumnAlias(expr1.field);\n            const field2 = context.appService.resolveColumnAlias(expr2.field);\n            if (field1 !== field2) {\n                return false;\n            }\n            const operator1 = expr1.operator === ExprOperator.none ? ExprOperator.eq : expr1.operator;\n            const operator2 = expr2.operator === ExprOperator.none ? ExprOperator.eq : expr2.operator;\n            if (operator1 !== operator2) {\n                return false;\n            }\n        }\n        if (!expr1.isLeaf) {\n            if (expr1.and !== expr2.and) {\n                return false;\n            }\n            // All of the structured and non-structured operands in expr2 must be in expr1 so check that there are at least enough\n            // operands available. (The actual matching of the contents of the operand nodes is done in the recursive calls to MatchNode)\n            if (!expr1.operands !== !expr2.operands) {\n                return false;\n            }\n            let expr1StructuredCount = 0, expr1UnstructuredCount = 0, expr2StructuredCount = 0, expr2UnstructuredCount = 0;\n            expr1.operands.forEach((operand) => { if (operand.isStructured) { expr1StructuredCount++; } else { expr1UnstructuredCount++; }});\n            expr2.operands.forEach((operand) => { if (operand.isStructured) { expr2StructuredCount++; } else { expr2UnstructuredCount++; }});\n            if ((expr2StructuredCount > expr1StructuredCount) || (expr2UnstructuredCount > expr1UnstructuredCount)) {\n                return false;\n            }\n        }\n        const values1Length = expr1.values ? expr1.values.length : 0;\n        const values2Length = expr2.values ? expr2.values.length : 0;\n        if (values1Length !== values2Length) {\n            return false;\n        }\n        if (values1Length && expr1.values && expr2.values) {\n            for (const value1 of expr1.values) {\n                let found = false;\n                for (const value2 of expr2.values) {\n                    if (Utils.eqNC(value1, value2)) {\n                        found = true;\n                    }\n                }\n                if (!found) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Return `true` if this expression matches the passed one\n     */\n    matchNode(expr: Expr): boolean {\n        return Expr.matchNode(this.exprContext, this, expr);\n    }\n\n    /**\n     * Returns the matching expression or sub-expression in this expression with the passed one.\n     *\n     * @param expr The expression to match\n     * @param filter An option filter function called on first level candidate sub-expressions\n     * before matching within them\n     */\n    find(expr: Expr, filter?: (expr: Expr) => boolean): Expr | null {\n        if (this.matchNode(expr)) {\n            if (!this.isLeaf && this.operands) {\n                for (const child1 of expr.operands) {\n                    let found = false;\n                    for (const child2 of this.operands) {\n                        if (filter && filter(child2)) {\n                            continue;\n                        }\n                        if (child2.find(child1)) {\n                            found = true;\n                            break;\n                        }\n                    }\n                    if (!found) {\n                        return null;\n                    }\n                }\n            }\n            return this;\n        }\n        else {\n            if (!this.isLeaf && this.operands) {\n                for (const child of this.operands) {\n                    if (filter && filter(child)) {\n                        continue;\n                    }\n                    if (child.find(expr)) {\n                        return child;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Perform the passed `action` on this expression and any descendant operands\n     *\n     * @param action The action to perform\n     */\n    forEach(action: (expr: Expr) => void) {\n        action(this);\n        if (this.operands) {\n            for (const operand of this.operands) {\n                operand.forEach(action);\n            }\n        }\n    }\n\n    /**\n     * Execute the callback function on this node and any descendants until the callback returns a truthy value\n     * in which case immediately return `true`. Otherwise return `false`.\n     */\n    some(callback: (expr: Expr) => boolean): boolean {\n        if (callback(this)) {\n            return true;\n        }\n        if (this.operands) {\n            for (const operand of this.operands) {\n                if (operand.some(callback)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Execute the callback function on this node and any descendants until the callback returns a falsy value\n     * in which case, immediately return `false`. Otherwise return `true`.\n     */\n    every(callback: (expr: Expr) => boolean): boolean {\n        if (!callback(this)) {\n            return false;\n        }\n        if (this.operands) {\n            for (const operand of this.operands) {\n                if (!operand.every(callback)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Return `true` if the exoression has at least one fulltext operand.\n     * The test on `isPositive` filters expressions that only contain\n     * negative fulltext terms which will be ignored on the server. Fulltext\n     * expressions must have at least one positive term.\n     */\n    get hasRelevance(): boolean {\n        return this.some(expr => expr.isLeaf && !expr.isStructured && expr.isPositive);\n    }\n\n    /**\n     * Return an array of all fields used in this expression\n     */\n    getFields(): string[] {\n        const fields: string[] = [];\n        this.forEach((expr) => {\n            const field = this.exprContext.appService.resolveColumnAlias(expr.field);\n            if (field) {\n                if (!fields.find((field1) => Utils.eqNC(field, field1))) {\n                    fields.push(field);\n                }\n            }\n        });\n        return fields;\n    }\n\n    /**\n     * Return an array of all values used in this expression that pertain to the passed field and where the associated `isPositive`\n     * field matches the passed `positive` parameter\n     *\n     * @param field The field for which values are to be returned\n     * @param positive The value to test against `isPositive`\n     */\n    getValues(field: string, positive = true): string[] {\n        const values: string[] = [];\n        const column = this.exprContext.appService.resolveColumnName(field);\n        this.forEach((expr) => {\n            if (column) {\n                const column1 = this.exprContext.appService.resolveColumnName(expr.field);\n                if (!Utils.eqNC(column, column1)) {\n                    return;\n                }\n            }\n            if (expr.isLeaf && expr.isPositive === positive && expr.values) {\n                values.push(...expr.values);\n            }\n        });\n        return values;\n    }\n\n    private getDataValue(data: ExprEvaluationContext, field?: string, defaultScope?: string): any {\n        if (!data) {\n            return undefined;\n        }\n        const fields = Utils.split(field || \"\", \".\");\n        if (fields.length >= 1 && Utils.isUndefined(data[fields[0]]) && !!defaultScope) {\n            // By default, look on the \"defaultScope\" sub-object\n            fields.unshift(...Utils.split(defaultScope, \".\"));\n        }\n        let value: any = data;\n        for (const _field of fields) {\n            if (!value) {\n                break;\n            }\n            value = value[_field];\n        }\n        return value;\n    }\n\n    private getWildcardRegExp(value: string): RegExp | undefined {\n        if (value) {\n            let regExp = this.evaluationRegExps[value];\n            if (!Utils.isUndefined(regExp)) {\n                return regExp;\n            }\n            let haveWildcards = false;\n            let escaping = false;\n            const sb: string[] = [];\n            for (const ch of value) {\n                switch (ch) {\n                    // Handle wildcards and wildcard escaping\n                    case \"\\\\\":\n                        if (escaping) {\n                            sb.push(\"\\\\\\\\\");\n                            escaping = false;\n                        }\n                        else {\n                            escaping = true;\n                        }\n                        break;\n                    case \"*\":\n                        if (escaping) {\n                            sb.push(\"\\\\\");\n                            sb.push(ch);\n                            escaping = false;\n                        }\n                        else {\n                            haveWildcards = true;\n                            sb.push(\".*?\");\n                        }\n                        break;\n                    case \"?\":\n                        if (escaping) {\n                            sb.push(\"\\\\\");\n                            sb.push(ch);\n                            escaping = false;\n                        }\n                        else {\n                            haveWildcards = true;\n                            sb.push(\".\");\n                        }\n                        break;\n                    // Escape other regexp special characters\n                    case \"-\":\n                    case \"/\":\n                    case \"^\":\n                    case \"$\":\n                    case \"+\":\n                    case \".\":\n                    case \"(\":\n                    case \")\":\n                    case \"|\":\n                    case \"[\":\n                    case \"]\":\n                    case \"{\":\n                    case \"}\":\n                        sb.push(\"\\\\\");\n                        sb.push(ch);\n                        escaping = false;\n                        break;\n                    // All other characters just emit\n                    default:\n                        sb.push(ch);\n                        escaping = false;\n                        break;\n                }\n            }\n            if (haveWildcards) {\n                regExp = new RegExp(\"^\" + sb.join(\"\") + \"$\", \"i\");\n                this.evaluationRegExps[value] = regExp;\n                return regExp;\n            }\n            else {\n                this.evaluationRegExps[value] = undefined;\n            }\n        }\n        return undefined;\n    }\n\n    // NB comparisons with NaN always return false\n    private compare(value: string | string[] | undefined, dataValue: any, equality?: boolean): number {\n        if (Utils.isArray(dataValue) && dataValue.length === 0) {\n            return NaN;\n        }\n        const column = Expr.getColumn(this.exprContext, this.field || \"\");\n        if (Utils.isArray(dataValue) || Utils.isArray(value)) {\n            // \"in\" / \"contains\"\n            if (!Utils.isArray(dataValue)) {\n                dataValue = [dataValue];\n            }\n            if (Utils.isArray(value)) {\n                if (value.length === 0) {\n                    return NaN;\n                }\n            }\n            else {\n                value = [value + \"\"];\n            }\n            // At least one value in the value array must match a value in the dataValue array\n            for (const value1 of value) {\n                for (const dataValue1 of dataValue) {\n                    if (this.compare(value1, dataValue1, true) === 0) {\n                        return 0;\n                    }\n                }\n            }\n            return NaN;\n        }\n        if (!Utils.isArray(value)) {\n            value = ExprParser.unescape(value || \"\");\n            if (column && column.parser) {\n                value = this.exprContext.formatService.parseValue(value, column.parser);\n            }\n            if (AppServiceHelpers.isNumber(column)) {\n                if (!Utils.isNumber(dataValue)) {\n                    dataValue = 0;\n                }\n                const _value = Utils.toNumber(value);\n                return dataValue - _value;\n            }\n            if (AppServiceHelpers.isDate(column)) {\n                if (Utils.isString(dataValue)){\n                    dataValue = Utils.toDate(dataValue);\n                }\n                if (Utils.isDate(dataValue)) {\n                    const _value = this.exprContext.intlService.parseDate(value);\n                    if (_value) {\n                        return dataValue.getTime() - _value.getTime();\n                    }\n                }\n                return NaN;\n            }\n            if (AppServiceHelpers.isBoolean(column)) {\n                const _value = Utils.isTrue(value) ? 1 : 0;\n                return (dataValue ? 1 : 0) - _value;\n            }\n            dataValue = dataValue || \"\";\n            if (Utils.isString(dataValue)) {\n                dataValue = ExprParser.unescape(dataValue);\n                if (equality) {\n                    const regExp = this.getWildcardRegExp(value);\n                    if (regExp) {\n                        return regExp.test(dataValue) ? 0 : -1;\n                    }\n                }\n                return Utils.compare(dataValue, value);\n            }\n        }\n        return NaN;\n    }\n\n    /**\n     * Evaluate this expression using `data` to provide field values. Field values\n     * can contain scopes (full stop separated components) to reference sub-objects\n     * in the data\n     *\n     * @param data The field values to be used in the evaluation\n     * @param defaultScope If a field value cannot be resolved then try to retrieve a value with this scope prepended to the field name\n     * @return The boolean result of the expression evaluation\n     */\n    evaluate(data: ExprEvaluationContext, defaultScope?: string): boolean {\n        let ret: boolean;\n        if (this.isLeaf) {\n            if (!this.isStructured) {\n                ret = false;\n            }\n            else {\n                if (Utils.eqNC(this.field || \"\", \"exists\")) {\n                    const dataValue = this.getDataValue(data, this.value, defaultScope);\n                    ret = !Utils.isUndefined(dataValue);\n                }\n                else if (Utils.eqNC(this.field || \"\", \"missing\")) {\n                    const dataValue = this.getDataValue(data, this.value, defaultScope);\n                    ret = Utils.isUndefined(dataValue);\n                }\n                else {\n                    const dataValue = this.getDataValue(data, this.field, defaultScope);\n                    switch (this.operator) {\n                        case ExprOperator.none:\n                        case ExprOperator.eq:\n                            ret = this.compare(this.value, dataValue, true) === 0;\n                            break;\n                        case ExprOperator.gt:\n                            ret = this.compare(this.value, dataValue) > 0;\n                            break;\n                        case ExprOperator.gte:\n                            ret = this.compare(this.value, dataValue) >= 0;\n                            break;\n                        case ExprOperator.lt:\n                            ret = this.compare(this.value, dataValue) < 0;\n                            break;\n                        case ExprOperator.lte:\n                            ret = this.compare(this.value, dataValue) <= 0;\n                            break;\n                        case ExprOperator.neq:\n                            ret = this.compare(this.value, dataValue, true) !== 0;\n                            break;\n                        case ExprOperator.regex: {\n                            const regExp = new RegExp(this.value || \"\");\n                            ret = regExp.test(dataValue + \"\");\n                            break;\n                        }\n                        case ExprOperator.like: // not currently generated in parse\n                            ret = this.compare(this.value + \"*\", dataValue, true) === 0;\n                            break;\n                        case ExprOperator.in:\n                            ret = this.compare(this.values, dataValue, true) === 0;\n                            break;\n                        case ExprOperator.contains: // not currently generated in parse\n                            ret = this.compare(this.value, dataValue, true) === 0;\n                            break;\n                        case ExprOperator.between:\n                            ret = !!this.values &&\n                                this.compare(this.values[0], dataValue) >= 0 && this.compare(this.values[1], dataValue) <= 0;\n                            break;\n                    }\n                }\n            }\n        }\n        else {\n            ret = !!this.and;\n            for (const operand of this.operands) {\n                const ret1 = operand.evaluate(data, defaultScope);\n                if (this.and) {\n                    ret = ret && ret1;\n                    if (!ret) {\n                        break;\n                    }\n                }\n                else {\n                    ret = ret || ret1;\n                }\n            }\n        }\n        if (this.not) {\n            ret = !ret;\n        }\n        return ret;\n    }\n}\n\n/**\n * @ignore\n */\nexport const enum Token {\n    invalid=-1,\n    or=0,\n    and=1,\n    not=2,\n    near=3,\n    infixNear=4,\n    lPar=5,\n    rPar=6,\n    eof=7,\n    value=8\n}\n\n/**\n * @ignore\n */\nconst enum Act {\n    s,  // shift\n    r,  // reduce\n    a,  // accept\n    e1, // error : missing right parenthesis\n    e2, // error : missing operator\n    e3, // error : unbalanced right parenthesis\n    e4  // error : invalid function argument\n}\n\n/**\n * Parsing options\n */\nexport interface ExprParserOptions {\n    /**\n     * If `true` then a fielded search expression with no value will not generate an error. This would be used\n     * when providing feedback during text entry\n     */\n    allowEmptyValues?: boolean;\n    /**\n     * If `true`, fields can contain the scoping character (`.`). This is typically used with `Expr.evaluate`\n     */\n    allowScopedFields?: boolean;\n    /**\n     * If `true` then arbitrary field names are permitted. This is typically used with `Expr.evaluate`\n     */\n    disallowFulltext?: boolean;\n}\n\n/**\n * @ignore\n */\nexport class ExprParserOperator {\n    public static invalid: ExprParserOperator = new ExprParserOperator(Token.invalid);\n    public static or: ExprParserOperator = new ExprParserOperator(Token.or);\n    public static and: ExprParserOperator = new ExprParserOperator(Token.and);\n    public static not: ExprParserOperator = new ExprParserOperator(Token.not);\n    public static lPar: ExprParserOperator = new ExprParserOperator(Token.lPar);\n    public static rPar: ExprParserOperator = new ExprParserOperator(Token.rPar);\n    public static eof: ExprParserOperator = new ExprParserOperator(Token.eof);\n\n    public tok: Token;\n    public tokValue: string;\n    public tokValuePos: number;\n    public tokValueLen: number;\n\n    constructor(tok: Token, value: string = \"\", valuePos: number = -1, valueLen: number = -1) {\n        this.tok = tok;\n        this.tokValue = value;\n        this.tokValuePos = valuePos;\n        this.tokValueLen = valueLen;\n    }\n}\n\n/**\n * A parser for Sinequa fielded search expressions. Such expressions allow filters to be specified in fulltext and\n * can be combined with boolean operators to build complex queries.\n *\n * A single fielded search clause has this form:\n * ``<fieldname>[`display value`]:[:][<operator>]<value>``\n *\n * A field name is either a column name or alias or a partname. In the case of a partname and column name clashing then\n * the field is treated as a column. Two colons can be specified as the separator to denote that the field is a partname.\n * An optional display value can follow the fieldname enclosed in backquote characters\n *\n * Operators are: `=` (default), `>=`, `>`, `<=`, `<`, `~` (regexp)\n * In addition, a regular expression can be specified by enclosing the value in `/` characters\n *\n * An inclusive range of values can be specified using a square bracket syntax: `[value1..value2]`\n * An exclusive range of values can be specified using a curly bracket syntax: `{value1..value2}`\n * The brackets can be mixed. For example: `age:{5..13]` expresses `13 >= age > 5`.\n *\n * For multi-value csv fields an `IN` condition can be expressed using a comma-separated list of values enclosed in square brackets.\n * For example: `authors:[Proust, Orwell, Dickens]`\n *\n * If a value contains reserved characters then it can be enclosed in backquote characters to prevent the parser interpreting them\n * incorrectly. For example: ``code: `a:b:c` ``\n *\n * The parser also supports a NEAR operator to allow searching for terms close to each other. There are two forms suppported:\n * * infix - `term1 NEAR[/n] term2` where `n` is the maximum number of words between the two terms for them to match\n * * function - `NEAR[/n](term1, term2, term3, ...)` where `n` is \"window\" size within which all the terms must be present for them\n * to match. The minimum useful value for n is thus equal to the number of terms passed to the operator.\n *\n * Fielded search expresions can be combined with the boolean operators `AND`, `OR` and `NOT` and brackets used for grouping.\n * For example: `football (age:>=7 AND (name:smith OR name:jones))`\n */\nexport class ExprParser {\n\n    public static fieldPartnamePrefix = \"@\";\n    private static parsetbl: Act[][] = [\n    /* stk  ------------- input ------------*/\n    /*\t\t                                 INFIX                  */\n    /*\t\t         OR\t   AND\t NOT   NEAR  NEAR  (\t  )\t     $  */\n    /*OR */         [Act.r, Act.s, Act.s, Act.s, Act.s, Act.s, Act.r, Act.r],\n    /*AND*/         [Act.r, Act.r, Act.s, Act.s, Act.s, Act.s, Act.r, Act.r],\n    /*NOT*/         [Act.r, Act.r, Act.s, Act.s, Act.r, Act.s, Act.r, Act.r],\n    /*NEAR*/        [Act.r, Act.r, Act.s, Act.s, Act.r, Act.s, Act.r, Act.r],\n    /*INFIXNEAR*/   [Act.r, Act.r, Act.s, Act.s, Act.r, Act.s, Act.r, Act.r],\n    /*(*/           [Act.s, Act.s, Act.s, Act.s, Act.s, Act.s, Act.s, Act.e1],\n    /*)*/           [Act.r, Act.r, Act.r, Act.r, Act.r, Act.e2, Act.r, Act.r],\n    /*$*/           [Act.s, Act.s, Act.s, Act.s, Act.s, Act.s, Act.e3, Act.a]\n    ];\n\n    private exprContext: ExprContext;\n    private options: ExprParserOptions;\n    private expressions: Expr[];\n    private operators: ExprParserOperator[];\n    private fields: string[]; // pushed on '(', popped on ')'\n    private displays: string[]; // pushed on '(', popped on ')'\n    private op: ExprParserOperator;\n    private prevOp: ExprParserOperator;\n    private saveOp: ExprParserOperator; // for default conjunction operator\n    private field: string;\n    private display: string;\n    private text: string;\n    private current: number;\n    private length: number;\n\n    private constructor(exprContext: ExprContext, options?: ExprParserOptions) {\n        this.exprContext = exprContext;\n        this.options = options || {};\n        this.exprContext.disallowFulltext = this.options.disallowFulltext;\n        this.expressions = [];\n        this.operators = [];\n        this.fields = [];\n        this.displays = [];\n        this.text = \"\";\n        this.current = 0;\n        this.length = 0;\n        this.op = this.prevOp = this.saveOp = ExprParserOperator.invalid;\n    }\n\n    /**\n     * Escape a string so that the characters in it are not processed by the fielded search expression parser.\n     * Single occurrences of the backslash character are replaced by two backslashes and backquote characters\n     * are prefixed by a backslash. Finally, the string is enclosed in backquotes.\n     *\n     * For example: `` a\\`\\b `` => `` a\\\\\\`\\\\b ``\n     */\n    // \\ => \\\\\n    // ` => \\`\n    // then surround with ``\n    public static escape(value: string | undefined): string {\n        if (!value) {\n            return \"``\";\n        }\n        value = String(value); // make sure we have a string\n        if (value.search(/[\\\\`]/) === -1) {\n            return \"`\" + value + \"`\";\n        }\n        const sb: string[] = [\"`\"];\n        for (let i = 0, ic = value.length; i < ic; i++) {\n            const ch = value[i];\n            if (ch === \"\\\\\" || ch === \"`\") {\n                sb.push(\"\\\\\");\n            }\n            sb.push(ch);\n        }\n        sb.push(\"`\");\n        return sb.join(\"\");\n    }\n\n    private static isEscaped(value: string | undefined): boolean {\n        return !!value && value.length >= 2 && value[0] === \"`\" && value[value.length - 1] === \"`\";\n    }\n\n    /**\n     * Perform the reverse operation to [ExprParser.escpae]{@link ExprParser#escape}\n     */\n    // remove surrounding ``\n    // \\\\ => \\\n    // \\` => `\n    public static unescape(value: string): string {\n        if (!ExprParser.isEscaped(value)) {\n            return value;\n        }\n        const sb: string[] = [];\n        for (let i = 1, ic = value.length - 1; i < ic; i++) {\n            let ch = value[i];\n            if (ch === \"\\\\\") {\n                if (i >= ic - 1) { // we end with a \\ => drop it\n                    continue;\n                }\n                ch = value[++i];\n            }\n            sb.push(ch);\n        }\n        return sb.join(\"\");\n    }\n\n    /**\n     * @ignore\n     */\n    public static unescapeList(values: string[]): string[] {\n        if (!values) {\n            return values;\n        }\n        const values1: string[] = [];\n        for (let _i = 0, _a = values; _i < _a.length; _i++) {\n            const value = _a[_i];\n            values1.push(ExprParser.unescape(value));\n        }\n        return values1;\n    }\n\n    /**\n     * @ignore\n     */\n    public static valuesAndLocationsFromText(text: string, separator: string): ExprValueLocation[] {\n        if (Utils.isEmpty(text)) {\n            return [];\n        }\n        if (!text.includes(separator)) {\n            return [{value: text, start: 0, length: text.length}];\n        }\n        const values: ExprValueLocation[] = [];\n        const length = text.length;\n        let current = 0;\n        let currentStart = 0;\n        const sb: string[] = [];\n        let value: ExprValueLocation;\n        while (true) {\n            if (current >= length) {\n                value = Expr.getValueAndLocation(sb.join(\"\"));\n                value.start += currentStart;\n                if (!Utils.isEmpty(value.value)) {\n                    values.push(value);\n                }\n                break;\n            }\n            const ch = text[current];\n            if (ch === \"\\\\\") {\n                sb.push(ch);\n                current++;\n                if (current < length) {\n                    const ch1 = text[current];\n                    if (ch1 === \"\\\\\" || ch1 === \"`\") {\n                        sb.push(ch1);\n                        current++;\n                    }\n                }\n            }\n            else if (ch === \"`\") {\n                const last: IRef<number> = {value: 0};\n                const s = ExprParser.matchUntil(text, length, current, current + 1, \"`\", last);\n                if (!!s) {\n                    sb.push(s);\n                    current = last.value;\n                }\n                else {\n                    sb.push(ch);\n                    current++;\n                }\n            }\n            else if (ch === separator) {\n                value = Expr.getValueAndLocation(sb.join(\"\"));\n                value.start += currentStart;\n                sb.length = 0;\n                if (!Utils.isEmpty(value.value)) {\n                    values.push(value);\n                }\n                current++;\n                currentStart = current;\n            }\n            else {\n                sb.push(ch);\n                current++;\n            }\n        }\n        return values;\n    }\n\n    private matchKeyword(keyword: string, sbCurrentValue: string[], suffixCh?: string): boolean {\n        if (sbCurrentValue.length !== 0) {\n            const currentValue = sbCurrentValue.join(\"\");\n            if (!!currentValue && !\" \\r\\n\\t\".includes(currentValue[currentValue.length - 1])) {\n                return false;\n            }\n        }\n        if (Utils.isEmpty(keyword)) {\n            return false;\n        }\n        const keywordLen = keyword.length;\n        if (this.current + keywordLen > this.length) {\n            return false;\n        }\n        for (let i = 0, ic = keywordLen; i < ic; i++) {\n            const ch = this.text[this.current + i];\n            const kh = keyword[i];\n            if (ch !== kh) {\n                return false;\n            }\n        }\n        if (this.current + keywordLen < this.length) {\n            const nch = this.text[this.current + keywordLen];\n            if (nch !== suffixCh && !\" \\r\\n\\t(\".includes(nch)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private matchUntil(first: number, start: number, endChars: string, last: IRef<number>): string | undefined {\n        return ExprParser.matchUntil(this.text, this.length, first, start, endChars, last);\n    }\n\n    private static matchUntil(text: string, length: number, first: number, start: number, endChars: string, last: IRef<number>): string | undefined {\n        last.value = start;\n        let found = false;\n        const sb: string[] = [text.substr(first, start - first)];\n        while (last.value < length) {\n            let ch = text[last.value++];\n            if (ch === \"\\\\\") {\n                sb.push(ch);\n                if (last.value < length) {\n                    ch = text[last.value++];\n                    if (ch === \"\\\\\" || ch === \"`\") {\n                        sb.push(ch);\n                        continue;\n                    }\n                }\n            }\n            sb.push(ch);\n            if (endChars.includes(ch)) {\n                found = true;\n                break;\n            }\n        }\n        if (!found) {\n            return undefined;\n        }\n        return sb.join(\"\");\n    }\n\n    private matchSimpleValue(start: number): string {\n        const first = this.current;\n        let last = start;\n        while (last < this.length) {\n            const ch = this.text[last];\n            if (\" \\r\\n\\t)\".includes(ch)) {\n                break;\n            }\n            last++;\n        }\n        if (last === start) {\n            return \"\";\n        }\n        return this.text.substr(first, last - first);\n    }\n\n    private getTerminators(ch: string, allowRanges: boolean): string {\n        if (ch === \"\\\"\") return \"\\\"\";\n        if (ch === \"[\") return allowRanges ? \"]}\" : \"]\";\n        if (ch === \"{\") return allowRanges ? \"}]\" : \"}\";\n        if (ch === \"/\") return \"/\";\n        if (ch === \"(\") return \")\";\n        if (ch === \"`\") return \"`\";\n        return \"\";\n    }\n\n    private canBeTokValue(value: string, canBeEmpty = true) {\n        return !Utils.isEmpty(value) || (canBeEmpty && this.options.allowEmptyValues && !Utils.isEmpty(this.field));\n    }\n\n    private _getTokValue(value: string, canBeEmpty = true): boolean {\n        // Current is pointing at the next non-whitepspace character after this value\n        if (value === null) return false;\n        let pos = this.current;\n        const len = value.length;\n        value = Utils.trimEnd(value);\n        pos -= len - value.length;\n        value = value.trim();\n        if (this.canBeTokValue(value, canBeEmpty)) {\n            this.op = new ExprParserOperator(Token.value, value, pos - value.length, value.length);\n            return true;\n        }\n        return false;\n    }\n\n    private getTokValue(sb: string[], canBeEmpty = true): boolean {\n        if (!sb) {\n            return false;\n        }\n        return this._getTokValue(sb.join(\"\"), canBeEmpty);\n    }\n\n    private ensureNearValue(value: string): string {\n        const defaultNearValue = this.exprContext.appService.ccquery ? this.exprContext.appService.ccquery.defaultNearValue : 0;\n        let near = Utils.toInt(value, defaultNearValue);\n        if (near < 0) {\n            near = defaultNearValue;\n        }\n        return near.toString();\n    }\n\n    private findDisplay(value: string): number {\n        if (!value || value.length < 3) {\n            return -1;\n        }\n        if (value[value.length - 1] !== \"`\") {\n            return -1;\n        }\n        let pos = value.length - 2;\n        while (pos !== -1) {\n            pos = value.lastIndexOf(\"`\", pos);\n            if (pos !== -1) {\n                let escapes = 0;\n                let pos1 = pos - 1;\n                while (pos1 >= 0) {\n                    if (value[pos1] !== \"\\\\\") {\n                        break;\n                    }\n                    escapes++;\n                    pos1--;\n                }\n                if (escapes % 2 === 0) {\n                    return pos;\n                }\n                pos--;\n            }\n        }\n        return -1;\n    }\n\n    private isValidFieldName(name: string): boolean {\n        return this.options.allowScopedFields ? Utils.isValidScopedSimpleName(name) : Utils.isValidSimpleName(name);\n    }\n\n    private isAllowedField(field: string, forcePartname: boolean, isPartname: IRef<boolean>): boolean {\n        isPartname.value = false;\n        if (Utils.eqNCN(field, \"exists\", \"missing\")) {\n            return true;\n        }\n        if (Utils.eqNCN(field, \"text\", \"concepts\", \"refine\", \"matchingpartnames\")) {\n            // NB @concepts, @refine and @matchingpartnames must be handled specially by the caller\n            isPartname.value = true;\n            return true;\n        }\n        const ccquery = this.exprContext.appService.ccquery;\n        if (ccquery) {\n            forcePartname = forcePartname && !this.exprContext.disallowFulltext;\n            let column = forcePartname ? undefined : this.exprContext.appService.getColumn(field);\n            if (!!column) {\n                if (column.eType === EngineType.varchar) { // only type not indexed\n                    column = undefined;\n                }\n                else if ((ccquery.$columnFieldsPattern && ccquery.$columnFieldsPattern.hasPatterns()) &&\n                    !ccquery.$columnFieldsPattern.isIncluded(field) &&\n                    !ccquery.$columnFieldsPattern.isIncluded(column.name)) {\n                    column = undefined;\n                }\n            }\n            if (!this.exprContext.disallowFulltext && !column) {\n                isPartname.value = true;\n                if ((ccquery.$partnameFieldsPattern && ccquery.$partnameFieldsPattern.hasPatterns()) &&\n                    !ccquery.$partnameFieldsPattern.isIncluded(field)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    private readToken(): string | undefined {\n        if (this.saveOp !== ExprParserOperator.invalid) {\n            this.prevOp = this.op;\n            this.op = this.saveOp;\n            this.saveOp = ExprParserOperator.invalid;\n            return undefined;\n        }\n        let ch;\n        this.prevOp = this.op;\n        let nextValue: string | undefined;\n        const sbCurrentValue: string[] = [];\n        let candidateFieldPos = -1;\n        let fieldSpecified = false;\n        while (true) {\n            if (this.current >= this.length) {\n                if (this.getTokValue(sbCurrentValue)) {\n                    return undefined;\n                }\n                this.op = ExprParserOperator.eof;\n                return undefined;\n            }\n            ch = this.text[this.current];\n            if (ch === \"\\\\\") { // \\ escapes \\ and `\n                sbCurrentValue.push(ch);\n                this.current++;\n                if (this.current < this.length) {\n                    const ch1 = this.text[this.current];\n                    if (ch1 === \"\\\\\" || ch1 === \"`\") {\n                        sbCurrentValue.push(ch1);\n                        this.current++;\n                    }\n                }\n            }\n            else if (ch === \"(\") {\n                if (this.getTokValue(sbCurrentValue, false)) {\n                    return undefined;\n                }\n                this.op = ExprParserOperator.lPar;\n                this.current++;\n                return undefined;\n            }\n            else if (ch === \")\") {\n                if (this.getTokValue(sbCurrentValue)) {\n                    return undefined;\n                }\n                this.op = ExprParserOperator.rPar;\n                this.current++;\n                return undefined;\n            }\n            else if (this.matchKeyword(\"AND\", sbCurrentValue)) {\n                if (this.getTokValue(sbCurrentValue)) {\n                    return undefined;\n                }\n                this.op = ExprParserOperator.and;\n                this.current += 3;\n                return undefined;\n            }\n            else if (this.matchKeyword(\"OR\", sbCurrentValue)) {\n                if (this.getTokValue(sbCurrentValue)) {\n                    return undefined;\n                }\n                this.op = ExprParserOperator.or;\n                this.current += 2;\n                return undefined;\n            }\n            else if (this.matchKeyword(\"NOT\", sbCurrentValue)) {\n                if (this.getTokValue(sbCurrentValue)) {\n                    return undefined;\n                }\n                this.op = ExprParserOperator.not;\n                this.current += 3;\n                return undefined;\n            }\n            else if (this.matchKeyword(\"NEAR\", sbCurrentValue, \"/\")) {\n                if (this.getTokValue(sbCurrentValue)) {\n                    return undefined;\n                }\n                this.current += 4;\n                nextValue = undefined;\n                if (this.current < this.length && this.text[this.current] === \"/\") {\n                    const last: IRef<number> = {value: 0};\n                    nextValue = this.matchUntil(this.current + 1, this.current + 1, \" \\r\\n\\t`\\\"([/\", last);\n                    let near = -1;\n                    if (nextValue !== undefined) {\n                        nextValue = nextValue.substr(0, nextValue.length - 1);\n                        near = Utils.toInt(nextValue, -1);\n                    }\n                    if (near < 0) {\n                        return \"bad operator\";\n                    }\n                    this.current = last.value - 1;\n                }\n                nextValue = this.ensureNearValue(nextValue || \"\");\n                const infix = this.current >= this.length || this.text[this.current] !== \"(\";\n                // For infix, near value is the number of words between the two terms so add the 2 terms to\n                // the window (near/0 = adjacent terms)\n                this.op = infix ?\n                    new ExprParserOperator(Token.infixNear, (Utils.toInt(nextValue) + 2).toString()) :\n                    new ExprParserOperator(Token.near, nextValue);\n                return undefined;\n            }\n            else if (ch === \"+\" || ch === \"-\") {\n                if (this.current + 1 < this.length) {\n                    const ch1 = this.text[this.current + 1];\n                    const last: IRef<number> = {value: 0};\n                    let length: number;\n                    if (\"(\\\"[/`\".includes(ch1)) { // ( \" [ / `\n                        nextValue = this.matchUntil(this.current, this.current + 2, this.getTerminators(ch1, false), last);\n                        length = last.value - this.current;\n                    }\n                    else {\n                        nextValue = this.matchSimpleValue(this.current + 1);\n                        length = !!nextValue ? nextValue.length : 0;\n                    }\n                    if (!!nextValue) {\n                        sbCurrentValue.push(nextValue);\n                        this.current += length;\n                        continue;\n                    }\n                }\n                return \"bad operator: \" + ch;\n            }\n            else if (\"\\\"[{/`\".includes(ch)) { // \" [ { / `\n                const last: IRef<number> = {value: 0};\n                nextValue = this.matchUntil(this.current, this.current + 1, this.getTerminators(ch, true), last);\n                if (!!nextValue) {\n                    const forceRange = (fieldSpecified && \"[{\".includes(ch) && sbCurrentValue.length === 0);\n                    sbCurrentValue.push(nextValue);\n                    this.current = last.value;\n                    if (forceRange && this.getTokValue(sbCurrentValue)) {\n                        return undefined;\n                    }\n                    continue;\n                }\n                return \"bad operator: \" + ch;\n            }\n            else {\n                if (ch === \":\") { // Field\n                    // Pick out previous value and/or field name\n                    // Field specifier can be:\n                    // field:value\n                    // field`display`:value\n                    // `display`:value\n                    const currentValue = sbCurrentValue.join(\"\");\n                    if (candidateFieldPos === -1) {\n                        // Check for display\n                        candidateFieldPos = this.findDisplay(currentValue);\n                        if (candidateFieldPos === -1) {\n                            this.op = ExprParserOperator.invalid;\n                            return \"invalid token\";\n                        }\n                    }\n                    let field = currentValue.substr(candidateFieldPos).trim();\n                    let display = \"\";\n                    // Extract display\n                    const displayStart = this.findDisplay(field);\n                    if (displayStart !== -1) {\n                        display = ExprParser.unescape(field.substr(displayStart, field.length - displayStart));\n                        field = field.substr(0, displayStart);\n                    }\n                    if (this.isValidFieldName(field) || (Utils.isEmpty(field) && !Utils.isEmpty(display))) {\n                        const value = currentValue.substr(0, candidateFieldPos);\n                        if (this.canBeTokValue(value.trim())) {\n                            this.current -= (sbCurrentValue.join(\"\").length - candidateFieldPos); // back up to field\n                            this._getTokValue(value);\n                            return undefined;\n                        }\n                        if (!Utils.isEmpty(field)) {\n                            let forcePartname = false;\n                            if (this.current + 1 < this.length && this.text[this.current + 1] === \":\") {\n                                // :: => force partname over column\n                                forcePartname = true;\n                                this.current++;\n                            }\n                            const isPartname: IRef<boolean> = { value: false };\n                            if (!this.isAllowedField(field, forcePartname, isPartname)) {\n                                candidateFieldPos = -1;\n                                sbCurrentValue.push(\":\");\n                                if (forcePartname) {\n                                    sbCurrentValue.push(\":\");\n                                }\n                                this.current++;\n                                continue;\n                            }\n                            if (isPartname.value) {\n                                field = ExprParser.fieldPartnamePrefix + field;\n                            }\n                        }\n                        if (!Utils.isEmpty(field)) {\n                            this.field = field;\n                            fieldSpecified = true;\n                        }\n                        if (!Utils.isEmpty(display)) {\n                            this.display = display;\n                        }\n                        sbCurrentValue.length = 0;\n                        this.current++;\n                        continue;\n                    }\n                }\n                if (\" \\r\\n\\t)\".includes(ch)) {\n                    candidateFieldPos = -1;\n                }\n                else if (candidateFieldPos === -1) {\n                    candidateFieldPos = sbCurrentValue.join(\"\").length;\n                }\n                sbCurrentValue.push(ch);\n                this.current++;\n            }\n        }\n    }\n\n    private clear() {\n        this.text = \"\";\n        this.current = 0;\n        this.length = 0;\n        this.operators.length = 0;\n        this.expressions.length = 0;\n        this.fields.length = 0;\n        this.displays.length = 0;\n    }\n\n    /**\n     * Parse some text using the Sinequa fielded search syntax\n     *\n     * @return The parsed `Expr` or an error string\n     */\n    public static parse(text: string, context: ExprContext, options?: ExprParserOptions): Expr | string {\n        const parser = new ExprParser(context, options);\n        const error = parser.parse(text);\n        if (error) {\n            return error;\n        }\n        return parser.parseResult();\n    }\n\n    private parseResult(): Expr | string {\n        if (this.expressions.length !== 1) {\n            return \"no expression found\";\n        }\n        return this.expressions[0];\n    }\n\n    private get contextField(): string {\n        let field = this.field;\n        if (Utils.isEmpty(field)) {\n            field = this.peekField();\n        }\n        return field;\n    }\n\n    private get contextDisplay(): string {\n        let display = this.display;\n        if (Utils.isEmpty(display)) {\n            display = this.peekDisplay();\n        }\n        return display;\n    }\n\n    private parse(text: string): string {\n        this.clear();\n        if (this.options.allowEmptyValues && !Utils.len(text.trim())) {\n            const expr = Expr.makeExpr(this.exprContext, \"\", this.contextField, this.contextDisplay, this.options.allowEmptyValues);\n            if (expr) {\n                expr.start = 0;\n                expr.length = 0;\n                this.expressions.push(expr);\n            }\n            return \"\";\n        }\n        this.text = text || \"\";\n        this.length = this.text.length;\n        this.operators.push(ExprParserOperator.eof);\n        let err = this.readToken();\n        if (err) {\n            return err;\n        }\n        while (true) {\n            if ((this.op.tok === Token.value || this.op.tok === Token.lPar || this.op.tok === Token.not || this.op.tok === Token.near) &&\n                (this.prevOp.tok === Token.value || this.prevOp.tok === Token.rPar)) {\n                // Default to AND for space separated terms\n                // NOT xxx => AND NOT xxx\n                this.saveOp = this.op;\n                this.op = ExprParserOperator.and;\n            }\n\n            let a: Act;\n            if (this.op.tok === Token.value) {\n                a = Act.s;\n            }\n            else {\n                a = ExprParser.parsetbl[this.operators[this.operators.length - 1].tok][this.op.tok];\n            }\n            switch (a) {\n                case Act.r:\n                    err = this.reduce();\n                    if (err) {\n                        return err;\n                    }\n                    break;\n                case Act.s:\n                    err = this.shift();\n                    if (err) {\n                        return err;\n                    }\n                    break;\n                case Act.a:\n                    if (this.expressions.length !== 1) {\n                        return \"syntax error\";\n                    }\n                    return \"\";\n                case Act.e1:\n                    return \"missing ')'\";\n                case Act.e2:\n                    return \"missing operator (AND,OR,NOT)\";\n                case Act.e3:\n                    return \"missing '('\";\n                case Act.e4:\n                    return \"invalid argument\";\n            }\n        }\n    }\n\n    private shift(): string | undefined {\n        if (this.op.tok === Token.value) {\n            const value = this.op.tokValue.trim();\n            if (Utils.isEmpty(value) && !this.options.allowEmptyValues) {\n                return \"empty token\";\n            }\n            const expr = Expr.makeExpr(this.exprContext, value, this.contextField, this.contextDisplay, !!this.options.allowEmptyValues);\n            if (!expr) {\n                return \"invalid expression\";\n            }\n            expr.start = this.op.tokValuePos;\n            expr.length = this.op.tokValueLen;\n            if (!!expr.operands) {\n                expr.operands.forEach(operand => {\n                    operand.start = this.op.tokValuePos;\n                    operand.length = this.op.tokValueLen;\n                });\n            }\n            this.expressions.push(expr);\n            this.field = \"\";\n            this.display = \"\";\n        }\n        else {\n            this.operators.push(this.op);\n            if (this.op.tok === Token.lPar) {\n                if (Utils.isEmpty(this.field)) {\n                    this.fields.push(this.peekField());\n                }\n                else {\n                    this.fields.push(this.field);\n                }\n                this.field = \"\";\n                if (Utils.isEmpty(this.display)) {\n                    this.displays.push(this.peekDisplay());\n                }\n                else {\n                    this.displays.push(this.display);\n                }\n                this.display = \"\";\n            }\n        }\n        return this.readToken();\n    }\n\n    private peekField(): string {\n        if (this.fields.length === 0) {\n            return \"\";\n        }\n        return this.fields[this.fields.length - 1];\n    }\n\n    private peekDisplay(): string {\n        if (this.displays.length === 0) {\n            return \"\";\n        }\n        return this.displays[this.displays.length - 1];\n    }\n\n    private canBeMergeTarget(e: Expr, and: boolean): boolean {\n        if (e.isLeaf) {\n            return false;\n        }\n        if (e.near >= 0) {\n            return false;\n        }\n        if (e.and !== and) {\n            return false;\n        }\n        if (e.not) {\n            return false;\n        }\n        return true;\n    }\n\n    private mergeExpr(e1: Expr, e2: Expr, and: boolean): Expr {\n        let source: Expr, target: Expr;\n        let prepend = false;\n        if (this.canBeMergeTarget(e1, and)) {\n            target = e1;\n            source = e2;\n        }\n        else if (this.canBeMergeTarget(e2, and)) {\n            target = e2;\n            source = e1;\n            prepend = true; // to keep the same order as in the input text\n        }\n        else {\n            return new Expr({\n                exprContext: e1.exprContext,\n                op1: e1,\n                and,\n                op2: e2,\n                field: this.peekField(),\n                display: this.peekDisplay()\n            });\n        }\n        if (source.isLeaf || source.and !== and || source.not || !Utils.eq(source.display || \"\", target.display || \"\")) {\n            target.addOperand(source, this.peekField(), prepend);\n        }\n        else {\n            if (source.operands) {\n                for (const operand of source.operands) {\n                    target.addOperand(operand, this.peekField(), prepend);\n                }\n            }\n        }\n        return target;\n    }\n\n    private reduce(): string | undefined {\n        let e: Expr | undefined;\n        let e1: Expr | undefined;\n        let e2: Expr | undefined;\n        const op: ExprParserOperator = this.operators[this.operators.length - 1];\n        switch (op.tok) {\n            case Token.not:\n                // Apply E := NOT E\n                e = this.expressions.pop();\n                if (!e) {\n                    return \"syntax error\";\n                }\n                e.not = !e.not;\n                this.expressions.push(e);\n                break;\n            case Token.and:\n                e2 = this.expressions.pop();\n                e1 = this.expressions.pop();\n                if (!e1 || !e2) {\n                    return \"syntax error\";\n                }\n                this.expressions.push(this.mergeExpr(e1, e2, true));\n                break;\n            case Token.or:\n                e2 = this.expressions.pop();\n                e1 = this.expressions.pop();\n                if (!e1 || !e2) {\n                    return \"syntax error\";\n                }\n                this.expressions.push(this.mergeExpr(e1, e2, false));\n                break;\n            case Token.near:\n                e = this.expressions.pop();\n                if (!e) {\n                    return \"syntax error\";\n                }\n                e.near = Utils.toInt(this.ensureNearValue(op.tokValue));\n                this.expressions.push(e);\n                break;\n            case Token.infixNear:\n                e2 = this.expressions.pop();\n                e1 = this.expressions.pop();\n                if (!e1 || !e2) {\n                    return \"syntax error\";\n                }\n                if (!e2.isLeaf || e2.isStructured || !e1.isLeaf || e1.isStructured || e2.not || e1.not || !Utils.eqNC(e2.field || \"\", e1.field || \"\")) {\n                    return \"syntax error\";\n                }\n                e = new Expr({\n                    exprContext: e1.exprContext,\n                    op1: e1,\n                    and: false,\n                    op2: e2,\n                    field: this.peekField(),\n                    display: this.peekDisplay()\n                });\n                e.near = Utils.toInt(this.ensureNearValue(op.tokValue));\n                this.expressions.push(e);\n                break;\n            case Token.rPar:\n                this.operators.pop();\n                if (this.fields.length === 0) {\n                    return \"missing field\";\n                }\n                if (this.expressions.length === 0) {\n                    return \"syntax error\";\n                }\n                const field = this.fields.pop();\n                const display = this.displays.pop();\n                // Set Field for single term bracketed expressions\n                e = this.expressions[this.expressions.length - 1];\n                if (e.isLeaf) {\n                    if (Utils.isEmpty(e.field)) {\n                        e.field = field;\n                    }\n                    if (Utils.isEmpty(e.display)) {\n                        e.display = display;\n                    }\n                }\n                break;\n        }\n        this.operators.pop();\n        return undefined;\n    }\n}\n","export default {\n    collapseButton: {\n        \"collapse\": \"Reduzieren\",\n        \"expand\": \"Erweitern\"\n    }\n};\n","export * from \"./public-api\";","export default {\n\n    \"userMenu\": {\n        \"user\": \"Utilisateur\",\n        \"login\": \"S'identifier\",\n        \"overrideUser\": \"Surcharger l'utilisateur\",\n        \"settings\": \"Paramètres\",\n        \"revertUserOverride\": \"Revenir à l'utilisateur normal\",\n        \"administration\": \"Administration\",\n        \"logout\": \"Se déconnecter\",\n\n        \"language\": \"Langue\",\n        \n        \"resetUserSettings\": {\n            \"menu\": \"Réinitialiser les paramètres utilisateur\",\n            \"modalTitle\": \"Réinitialiser Paramètres Utilisateur\",\n            \"modalMessage\": \"Vous êtes sur le point de réinitialiser TOUTES vos données utilisateur (requêtes récentes, collections, alertes, préférences, etc.). Voulez-vous continuer ?\",\n            \"modalConfirmButton\": \"Confirmer\",\n            \"successMessage\": \"Réinitialisation des paramètres utilisateur réussie\",\n            \"errorMessage\": \"Echec de la réinitialisation des paramètres utilisateur\"\n        }\n    },\n\n    \"editUserSettings\": {\n        \"title\": \"Paramètres\",\n        \"language\": \"Langue de l'interface\",\n        \"pageSize\": \"Nombre de résultats par page\",\n        \"email\": \"E-mail\"\n    }\n\n};\n","import { Injectable } from '@angular/core';\nimport { ValidatorFn, Validators } from '@angular/forms';\nimport { Router, NavigationEnd, UrlSerializer } from '@angular/router';\nimport { Clipboard } from '@angular/cdk/clipboard';\nimport { Location } from '@angular/common';\nimport { Utils } from '@sinequa/core/base';\nimport { LoginService } from '@sinequa/core/login';\nimport { UserSettingsWebService } from '@sinequa/core/web-services';\nimport { ModalResult, ModalService, PromptOptions, ModalButton, ConfirmType } from '@sinequa/core/modal';\nimport { Action } from '@sinequa/components/action';\nimport { SearchService } from '@sinequa/components/search';\nimport { DashboardAddItemModel, DashboardAddItemComponent } from './dashboard-add-item.component';\nimport { GridsterConfig, GridsterItem } from 'angular-gridster2';\nimport { NotificationsService } from '@sinequa/core/notification';\nimport { Subject } from 'rxjs';\nimport { UserPreferences } from '@sinequa/components/user-settings';\nimport { IntlService } from '@sinequa/core/intl';\n\n/**\n * Interface storing the configuration of a widget. It must contain the minimal amount of information\n * to rebuild the widget's content (eg. for the preview we need an id and a query).\n * This configuration is stored in user settings and/or shared with other users, so it must not include\n * large objects or raw data (only the means to rebuild these objects or data).\n * This interface is an extension of GridsterItem, so that we store things like the position of each\n * widget in the dashboard.\n */\nexport interface DashboardItem extends GridsterItem {\n    type: string;\n    icon: string;\n    title: string;\n    width?: number;\n    height?: number;\n\n    // Properties specific to some types\n    recordId?: string; // For type === 'preview'\n    queryStr?: string; // For type === 'preview'\n    aggregation?: string; // For type === 'chart'\n    chartType?: string; // For type === 'chart'\n}\n\n/**\n * A dashboard configuration interface incl. a name and the configuration of each widget\n */\nexport interface Dashboard {\n    name: string;\n    items: DashboardItem[];\n}\n\n/**\n * An interface to define a type of widget that can be added to the dashboard. This basic information\n * is used to create a button to select a type of widget among a list.\n */\nexport interface DashboardItemOption {\n    type: string;\n    icon: string;\n    text: string;\n    unique: boolean;\n}\n\n// Name of the \"default dashboard\" (displayed prior to any user customization)\nexport const defaultDashboardName = \"<default>\";\n\n// List of widgets supported in this dashboard. They can be used:\n// - to define the \"default dashboard\" (by calling setDefaultDashboard())\n// - to create the \"dashboard actions\" (which include the possibility of adding new widgets to the dashboard)\nexport const MAP_WIDGET: DashboardItemOption = {type: 'map', icon: 'fas fa-globe-americas fa-fw', text: 'msg#dashboard.map', unique: true};\nexport const TIMELINE_WIDGET: DashboardItemOption = {type: 'timeline', icon: 'fas fa-chart-line fa-fw', text: 'msg#dashboard.timeline', unique: true};\nexport const NETWORK_WIDGET: DashboardItemOption = {type: 'network', icon: 'fas fa-project-diagram fa-fw', text: 'msg#dashboard.network', unique: true};\nexport const CHART_WIDGET: DashboardItemOption = {type: 'chart', icon: 'fas fa-chart-bar fa-fw', text: 'msg#dashboard.chart', unique: false};\nexport const HEATMAP_WIDGET: DashboardItemOption = {type: 'heatmap', icon: 'fas fa-th fa-fw', text: 'msg#dashboard.heatmap', unique: false};\nexport const TAGCLOUD_WIDGET: DashboardItemOption = {type: 'tagcloud', icon: 'fas fa-comments fa-fw', text: 'msg#dashboard.tagcloud', unique: true}\nexport const MONEYTIMELINE_WIDGET: DashboardItemOption = {type: 'money-timeline', icon: 'fas fa-search-dollar fa-fw', text: 'msg#money.timeline', unique: true}\nexport const MONEYCLOUD_WIDGET: DashboardItemOption = {type: 'money-cloud', icon: 'fas fa-comment-dollar fa-fw', text: 'msg#money.cloud', unique: true}\nexport const PREVIEW_WIDGET: DashboardItemOption = {type: 'preview', icon: 'far fa-file-alt', text: '', unique: false}\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DashboardService {\n\n    /** Currently active dashboard */\n    dashboard: Dashboard;\n    /** Default dashboard (active by default or if the user reinitializes the dashboard) */\n    defaultDashboard: Dashboard;\n\n    /** Options of the Gridster dashboard component*/\n    options: GridsterConfig;\n\n    /** Action objects part of the \"dashboard actions\" (returned by createDashboardActions()) */\n    manualLayout: Action;\n    autoLayout: Action;\n    fixedLayout: Action;\n    openAction: Action;\n    autoSaveAction: Action;\n    setDefaultAction: Action;\n\n    /** A subject firing events when the dashboard changes */\n    dashboardChanged = new Subject<Dashboard>();\n\n    constructor(\n        public modalService: ModalService,\n        public userSettingsService: UserSettingsWebService,\n        public loginService: LoginService,\n        public prefs: UserPreferences,\n        public searchService: SearchService,\n        public notificationService: NotificationsService,\n        public router: Router,\n        public location: Location,\n        public urlSerializer: UrlSerializer,\n        public clipboard: Clipboard,\n        public intlService: IntlService\n    ) {\n\n        // Default options of the Gridster dashboard\n        this.options = {\n            swap: true,\n            draggable: {\n                enabled: true,\n                ignoreContent: true, // By default, dragging is impossible\n                dragHandleClass: 'card-header', // except in the facet header\n                ignoreContentClass: 'btn-group', // *except* in the button group\n            },\n            resizable: {enabled: true},\n            itemChangeCallback: (item, itemComponent) => {\n                this.notifyItemChange(item as DashboardItem);\n            },\n            itemResizeCallback: (item, itemComponent) => {\n                if (!document.fullscreenElement) { // Exclude the change detection on switch from/to full-screen mode\n                    /** Items must know their height/width to (re)size their content*/\n                    if (!itemComponent.el.classList.contains('widget-maximized-view')) {\n                        item.height = itemComponent.height;\n                        item.width = itemComponent.width;\n                    } else {\n                        item.height = itemComponent.gridster.curHeight;\n                        item.width = itemComponent.gridster.curWidth;\n                    }\n                    this.notifyItemChange(item as DashboardItem);\n                }\n            },\n            scrollToNewItems: true, // Scroll to new items when inserted\n            gridType: 'verticalFixed', // The grid has a fixed size vertically, and fits the screen horizontally\n            fixedRowHeight: (window.innerHeight - 150) / 4, // 150px to account for header and margins\n            minRows: 4,\n            minCols: 4\n        };\n\n        // Manage URL changes (which may include dashboard name or config to be imported)\n        this.router.events.subscribe(event => {\n            if(event instanceof NavigationEnd) {\n                this.handleNavigation();\n            }\n        })\n\n        // Dashboards are stored in User Settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Menus need to be rebuilt\n            if(this.openAction) {\n                this.updateOpenAction();\n                this.updateAutoSaveAction();\n                this.setLayout(this.layout);\n            }\n        });\n\n        // Manage Autosave\n        this.dashboardChanged.subscribe(dashboard => {\n            if(this.autoSave && this.isDashboardSaved()) {\n                this.debounceSave();\n            }\n        });\n    }\n\n\n    /**\n     * Handle URL changes. Retrieve a dashboard name or configuration if any, depending on\n     * the params contained in the URL.\n     */\n    protected handleNavigation() {\n        const url = Utils.makeURL(this.router.url);\n        const dashboard = url.searchParams.get(\"dashboard\");\n        const dashboardShared = url.searchParams.get(\"dashboardShared\");\n        // Dashboards are not available yet! (pending login complete...)\n        if(dashboard && dashboard !== this.dashboard?.name) {\n            this.searchService.queryStringParams.dashboard = dashboard;\n            if(this.hasDashboard(dashboard)) {\n                this.dashboard = this.getDashboard(dashboard)!;\n            }\n        }\n        else if(dashboardShared) {\n            const db = Utils.fromJson(dashboardShared);\n            if(db as DashboardItem[]) {\n                this.setDashboardItems(db);\n            }\n            else {\n                this.notificationService.error(\"Could not import this dashboard...\");\n                console.error(\"Could not import this dashboard:\", dashboardShared);\n            }\n        }\n        // Update the state of the setDefault action after an Open, Save, New\n        this.updateSetDefaultAction();\n    }\n\n    /**\n     * Returns the list of this user's dashboards.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of dashboards if it does not already exist.\n     */\n    public get dashboards() : Dashboard[] {\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"dashboards\"])\n            this.userSettingsService.userSettings[\"dashboards\"] = [];\n        return this.userSettingsService.userSettings[\"dashboards\"];\n    }\n\n    /**\n     * Tests whether a dashboard name exists or not in the user settings\n     * @param dashboard\n     */\n    public hasDashboard(dashboard: string): boolean {\n        return !!this.getDashboard(dashboard);\n    }\n\n    /**\n     * Retrieves a dashboard configuration from the user settings\n     * @param dashboard\n     */\n    public getDashboard(dashboard: string): Dashboard | undefined {\n        return this.dashboards.find(d => d.name === dashboard);\n    }\n\n    /**\n     * Sets the configuration for the \"default dashboard\" (dashboard displayed by default or\n     * when the user reinitializes the dashboard).\n     * @param items\n     */\n    public setDefaultDashboard(items: DashboardItemOption[]) {\n        // The default dashboard may have been customized by the user, in which case we ignore the \"items\" input\n        const defaultDashboard = this.prefs.get(\"dashboard-default\");\n        if(defaultDashboard && this.hasDashboard(defaultDashboard)) {\n            this.defaultDashboard = Utils.copy(this.getDashboard(defaultDashboard)!);\n            this.defaultDashboard.name = defaultDashboardName;\n        }\n        // There is no user-customized default dashboard: we create one and initialize it with the \"items\" input\n        else {\n            this.defaultDashboard = {\n                name: defaultDashboardName,\n                items: []\n            };\n            items.forEach(item => this.addWidget(item, this.defaultDashboard));\n        }\n        // If there is no dashboard explicitly opened currently, we open the default dashboard that we just created\n        if(!this.dashboard) {\n            this.dashboard = Utils.copy(this.defaultDashboard); // Default dashboard is kept as a deep copy, so we don't change it by editing the dashboard\n        }\n    }\n\n    /**\n     * Explicitly sets the current dashboard's items (and optionally its name)\n     * @param items\n     */\n    public setDashboardItems(items: DashboardItem[], name = defaultDashboardName) {\n        this.dashboard = { name, items };\n        this.dashboardChanged.next(this.dashboard);\n    }\n\n    /**\n     * A dashboard is considered saved if it has a name that is different from the default one\n     */\n    public isDashboardSaved(): boolean {\n        return this.defaultDashboard && this.dashboard && this.dashboard.name !== defaultDashboardName;\n    }\n\n\n    // Dashboard modifications\n\n    /**\n     * Fire an event when a dashboard item changes\n     * @param item\n     */\n    public notifyItemChange(item: DashboardItem) {\n        this.dashboardChanged.next(this.dashboard);\n    }\n\n    /**\n     * Update the Gridster options\n     * @param options\n     */\n    public updateOptions(options: GridsterConfig) {\n        this.options = options;\n        this.options.api?.optionsChanged!();\n    }\n\n    /**\n     * Add a new widget to the dashboard. The widget is added a x = y = 0 so that Gridster automaticaly\n     * finds a good spot to insert the widget.\n     * @param option a DashboardItemOption, containing among other thing the type of widget to be created\n     * @param dashboard a Dashboard object (default to the currently active widget)\n     * @param rows the number of rows that this widget should take in the dashboard (default to 2)\n     * @param cols the number of columns that this widget should take in the dashboard (default to 2)\n     * @param closable whether this widget is closable (default to true)\n     */\n    public addWidget(option: DashboardItemOption, dashboard: Dashboard = this.dashboard, rows = 2, cols = 2): DashboardItem {\n        dashboard.items.push({\n            x: 0,\n            y: 0,\n            rows,\n            cols,\n            type: option.type,\n            icon: option.icon,\n            title: option.text\n        });\n        this.dashboardChanged.next(dashboard);\n        return dashboard.items[dashboard.items.length - 1];\n    }\n\n    /**\n     * Remove a widget from the dashboard\n     * @param item\n     */\n    public removeItem(item: DashboardItem) {\n        this.dashboard.items.splice(this.dashboard.items.indexOf(item), 1);\n        this.notifyItemChange(item);\n    }\n\n    /**\n     * Rename a widget in the dashboard\n     * @param item\n     * @param newTitle\n     */\n    public renameWidget(item: DashboardItem, newTitle: string) {\n        item.title = newTitle;\n        this.notifyItemChange(item);\n    }\n\n    /**\n     * Open a dialog to submit a new name for a given widget\n     * @param item\n     */\n    public renameWidgetModal(item: DashboardItem) {\n\n        const model: PromptOptions = {\n            title: 'msg#dashboard.renameWidget',\n            message: 'msg#dashboard.renameWidgetMessage',\n            buttons: [],\n            output: this.intlService.formatMessage(item.title),\n            validators: [Validators.required]\n        };\n\n        this.modalService.prompt(model).then(res => {\n            if(res === ModalResult.OK) {\n                this.renameWidget(item, model.output);\n            }\n        });\n    }\n\n    /**\n     * Creates a list of Action objects that allow to interact with this dashboard.\n     * These actions are meant to be displayed next to the dashboard within a menu\n     * component.\n     * The actions include:\n     * - Adding widgets\n     * - Sharing the dashboard\n     * - Changing the layout mode of Gridster\n     * - Saving, opening and deleting the dashboard\n     * @param addWidgetOptions list of DashboardItemOption used to display a list\n     * of widget types for the user to choose from\n     */\n    public createDashboardActions(addWidgetOptions: DashboardItemOption[]): Action[] {\n\n        const dashboardActions = [] as Action[];\n\n        // Action to add a widget\n        dashboardActions.push(new Action({\n            icon: 'fas fa-plus fa-fw',\n            text: 'msg#dashboard.addWidget',\n            title: 'msg#dashboard.addWidgetTitle',\n            action: () => {\n                // We include only items either not unique or not already in the dashboard\n                const model: DashboardAddItemModel = {\n                    options: addWidgetOptions.filter(item =>\n                        !item.unique || !this.dashboard.items.find(widget => widget.type === item.type)\n                    )\n                };\n                this.modalService.open(DashboardAddItemComponent, {model}).then(value => {\n                    if(value === ModalResult.OK && model.selectedOption) {\n                        this.addWidget(model.selectedOption, this.dashboard, model.height, model.width);\n                    }\n                });\n            }\n        }));\n\n        // Action to share a widget\n        dashboardActions.push(new Action({\n            icon: 'fas fa-share-alt',\n            text: 'msg#dashboard.share',\n            title: 'msg#dashboard.shareTitle',\n            action: () => {\n                const dashboard = Utils.toJson(this.dashboard.items);\n                const query = this.searchService.query.toJsonForQueryString();\n                const urlTree = this.router.createUrlTree(['/search'], {queryParams: {query, dashboardShared: dashboard}});\n                const url = window.location.origin+window.location.pathname+this.location.prepareExternalUrl(this.urlSerializer.serialize(urlTree));\n                if(this.clipboard.copy(url)) {\n                    this.notificationService.success(\"msg#dashboard.shareSuccess\");\n                }\n                else {\n                    this.notificationService.warning(\"msg#dashboard.shareError\", {url});\n                }\n            }\n        }));\n\n        // Action to select the \"manual\" layout mode\n        this.manualLayout = new Action({\n            text: 'msg#dashboard.manual',\n            title: 'msg#dashboard.manualTitle',\n            selected: false,\n            action: () => {\n                if(!this.manualLayout.selected) {\n                    this.setLayout(\"manual\");\n                }\n            }\n        });\n        // Action to select the \"auto\" layout mode\n        this.autoLayout = new Action({\n            text: 'msg#dashboard.auto',\n            title: 'msg#dashboard.autoTitle',\n            selected: false,\n            action: () => {\n                if(!this.autoLayout.selected) {\n                    this.setLayout(\"auto\");\n                }\n            }\n        });\n        // Action to select the \"fixed\" layout mode\n        this.fixedLayout = new Action({\n            text: 'msg#dashboard.fixed',\n            title: 'msg#dashboard.fixedTitle',\n            selected: false,\n            action: () => {\n                if(!this.fixedLayout.selected) {\n                    this.setLayout(\"fixed\");\n                }\n            }\n        });\n        if(this.loginService.complete) {\n            this.setLayout(this.layout);\n        }\n\n        // Action to create a new dashboard\n        const newDashboard = new Action({\n            text: \"msg#dashboard.new\",\n            title: \"msg#dashboard.newTitle\",\n            selected: false,\n            action: () => this.newDashboard()\n        });\n\n        // Action to open a saved dashboard\n        this.openAction = new Action({\n            text: \"msg#dashboard.open\",\n            title: \"msg#dashboard.openTitle\",\n            selected: false,\n            children: []\n        });\n        if(this.loginService.complete) {\n            this.updateOpenAction();\n        }\n\n        // Action to delete the current dashboard from the saved dashboards\n        const deleteAction = new Action({\n            text: 'msg#dashboard.delete',\n            title: 'msg#dashboard.deleteTitle',\n            selected: false,\n            action: () => {\n                this.modalService.confirm({\n                    title: \"msg#dashboard.deleteConfirmTitle\",\n                    message: \"msg#dashboard.deleteConfirmMessage\",\n                    messageParams: {values: {dashboard: this.dashboard.name}},\n                    confirmType: ConfirmType.Warning,\n                    buttons: [\n                        new ModalButton({\n                            result: ModalResult.OK,\n                            primary: true\n                        }),\n                        new ModalButton({\n                            result: ModalResult.Cancel\n                        })\n                    ]\n                }).then(value => {\n                    if(value === ModalResult.OK) {\n                        if(this.isDashboardSaved()) {\n                            const i = this.dashboards.findIndex(d => d.name === this.dashboard.name);\n                            this.dashboards.splice(i, 1);\n                            this.patchDashboards(false);\n                            this.updateOpenAction();\n                            if(this.prefs.get(\"dashboard-default\") === this.dashboard.name) {\n                                this.prefs.delete(\"dashboard-default\");\n                            }\n                        }\n                        else if(this.prefs.get(\"dashboard-default\")) {\n                            this.prefs.delete(\"dashboard-default\");\n                        }\n                        this.newDashboard();\n                    }\n                });\n            }\n        });\n\n        // Action to save this dashboard in the usersettings\n        const saveAs = new Action({\n            text: 'msg#dashboard.saveAs',\n            title: 'msg#dashboard.saveAsTitle',\n            selected: false,\n            action: () => this.saveAs()\n        });\n        // Action to save this (already saved) dashboard in the usersettings\n        const save = new Action({\n            text: 'msg#dashboard.save',\n            title: 'msg#dashboard.saveTitle',\n            selected: false,\n            action: () => {\n                if(!this.isDashboardSaved()){\n                    this.saveAs();\n                }\n                else {\n                    this.patchDashboards();\n                }\n            }\n        });\n        // Action to toggle auto-save mode\n        this.autoSaveAction = new Action({\n            text: 'msg#dashboard.autoSave',\n            title: 'msg#dashboard.autoSaveTitle',\n            selected: this.autoSave,\n            action: (action) => {\n                this.prefs.set(\"auto-save-dashboards\", !this.autoSave);\n                action.selected = this.autoSave;\n                if(this.autoSave && this.isDashboardSaved()) {\n                    this.patchDashboards();\n                }\n            }\n        });\n        // Action to set the currently saved dashboard as the default one\n        this.setDefaultAction = new Action({\n            text: 'msg#dashboard.setDefault',\n            title: 'msg#dashboard.setDefaultTitle',\n            selected: false,\n            disabled: true,\n            action: () => {\n                this.modalService.confirm({\n                    title: \"msg#dashboard.setDefaultConfirmTitle\",\n                    message: \"msg#dashboard.setDefaultConfirm\",\n                    messageParams: {values: {dashboard: this.dashboard.name}},\n                    buttons: [\n                        new ModalButton({\n                            result: ModalResult.OK,\n                            primary: true\n                        }),\n                        new ModalButton({\n                            result: ModalResult.Cancel\n                        })\n                    ]\n                }).then(res => {\n                    if(res === ModalResult.OK) {\n                        // Make the current dashboard as the default one (locally)\n                        this.defaultDashboard = Utils.copy(this.dashboard);\n                        // Store the name of the saved default dashboard for resetting it upon next login\n                        this.prefs.set(\"dashboard-default\", this.defaultDashboard.name);\n                        // Update the name of the current dashboard (it can diverge from its saved version)\n                        this.defaultDashboard.name = defaultDashboardName;\n                        // Update the action to reflect the new app state\n                        this.updateSetDefaultAction();\n                        // Notify user that this worked\n                        this.notificationService.success(\"msg#dashboard.setDefaultSuccess\", {dashboard: this.dashboard.name});\n                    }\n                });\n            }\n        });\n\n        // Assemble the actions into one menu\n        const settings = new Action({\n            icon: 'fas fa-cog fa-fw',\n            title: 'msg#dashboard.settingsTitle',\n            children: [\n                this.manualLayout,\n                this.autoLayout,\n                this.fixedLayout,\n                new Action({separator: true}),\n                newDashboard,\n                this.openAction,\n                deleteAction,\n                new Action({separator: true}),\n                save,\n                saveAs,\n                this.autoSaveAction,\n                this.setDefaultAction\n            ],\n        });\n\n        dashboardActions.push(settings);\n\n        return dashboardActions;\n    }\n\n    /**\n     * Update the \"open\" action to reflect the list of saved dashboards\n     */\n    protected updateOpenAction() {\n        this.openAction.children = this.dashboards.map(dashboard => new Action({\n            text: dashboard.name,\n            title: 'msg#dashboard.openDashboard',\n            messageParams: {values: {dashboard: dashboard.name}},\n            action: () => {\n                this.dashboard = dashboard;\n                this.searchService.queryStringParams.dashboard = dashboard.name;\n                this.searchService.navigate({skipSearch: true});\n            }\n        }));\n        if(this.openAction.children.length > 0) {\n            delete this.openAction.selected;\n        }\n    }\n\n    /**\n     * Update the state of the autosave action\n     */\n    protected updateAutoSaveAction() {\n        this.autoSaveAction.selected = this.autoSave;\n    }\n\n    /**\n     * Update the state of the setDefault action\n     */\n    protected updateSetDefaultAction() {\n        // We cannot set this as the default dashboard if is unsaved or if it is already the default\n        if(this.setDefaultAction) {\n            this.setDefaultAction.disabled = !this.dashboard || this.dashboard.name === defaultDashboardName || this.dashboard.name === this.prefs.get(\"dashboard-default\");\n        }\n    }\n\n    /**\n     * Modifies the layout mode of the Gridster dashboard\n     * @param layout\n     */\n    protected setLayout(layout: string) {\n        if(layout === \"auto\") {\n            this.options.compactType = 'compactLeft&Up';\n            this.options.draggable!.enabled = true;\n            this.options.resizable!.enabled = true;\n        }\n        else if (layout === \"fixed\") {\n            this.options.compactType = 'none';\n            this.options.draggable!.enabled = false;\n            this.options.resizable!.enabled = false;\n        }\n        else {\n            this.options.compactType = 'none';\n            this.options.draggable!.enabled = true;\n            this.options.resizable!.enabled = true;\n        }\n        this.options.api?.optionsChanged!();\n        this.prefs.set(\"dashboard-layout\", layout);\n        this.manualLayout.selected = this.layout === \"manual\";\n        this.autoLayout.selected = this.layout === \"auto\";\n        this.fixedLayout.selected = this.layout === \"fixed\";\n    }\n\n    /**\n     * Creates a new dashboard (using the default dashboard)\n     */\n    protected newDashboard() {\n        this.dashboard = Utils.copy(this.defaultDashboard);\n        delete this.searchService.queryStringParams.dashboard;\n        this.searchService.navigate({skipSearch: true});\n    }\n\n    /**\n     * Prompts the user for a name and saves the dashboard under this name in the\n     * user settings.\n     */\n    protected saveAs() {\n\n        const unique : ValidatorFn = (control) => {\n            const unique = control.value !== defaultDashboardName && !this.getDashboard(control.value);\n            if(!unique) return {unique: true};\n            return null;\n        };\n\n        const model: PromptOptions = {\n            title: 'msg#dashboard.saveAsModalTitle',\n            message: 'msg#dashboard.saveAsModalMessage',\n            buttons: [],\n            output: 'dashboard',\n            validators: [Validators.required, unique]\n        };\n\n        this.modalService.prompt(model).then(res => {\n            if(res === ModalResult.OK) {\n                const dashboard = Utils.copy(this.dashboard);\n                dashboard.name = model.output;\n                // Update User settings\n                this.dashboards.push(dashboard);\n                this.patchDashboards();\n                // Update URL (store dashboard name in the queryParams)\n                this.searchService.queryStringParams.dashboard = model.output; // Needed when refreshing the page\n                this.searchService.navigate({skipSearch: true});\n                // Update menu\n                this.updateOpenAction();\n            }\n        });\n\n    }\n\n    debounceSave = Utils.debounce(() => this.patchDashboards(false), 200); // debounce save to avoid multiple events\n\n    /**\n     * Updates the list of dashboards in the user settings\n     * @param notify\n     */\n    protected patchDashboards(notify = true) {\n        this.userSettingsService.patch({dashboards: this.dashboards})\n            .subscribe(\n                next => {\n                    if(notify) {\n                        this.notificationService.success(\"msg#dashboard.saveSuccess\");\n                    }\n                },\n                error => {\n                    if(notify) {\n                        this.notificationService.error(\"msg#dashboard.saveFailure\");\n                    }\n                    console.error(\"Could not patch Dashboards!\", error);\n                }\n            );\n    }\n\n    /** Getter for the auto-save preference */\n    public get autoSave(): boolean {\n        return !!this.prefs.get(\"auto-save-dashboards\");\n    }\n\n    /** Getter for the layout mode preference */\n    public get layout(): string {\n        return this.prefs.get(\"dashboard-layout\") || \"manual\";\n    }\n}\n","export default {\n    metadata: {\n        extractslocationsLabel: \"Relevanter Extrakt\",\n        extractslocationsPluralLabel: \"Relevante Extrakte\",\n        geoLabel: \"Ort\",\n        geoPluralLabel: \"Orte\",\n        personLabel: \"Person\",\n        personPluralLabel: \"Personen\",\n        companyLabel: \"Firma\",\n        companyPluralLabel: \"Firmen\",\n        treepathLabel: \"Quelle\",\n        treepathPluralLabel: \"Quellen\",\n        matchlocationsLabel: \"Suchbegriff\",\n        matchlocationsPluralLabel: \"Suchbegriffe\",\n        titleLabel: \"Titel\",\n        titlePluralLabel: \"Titel\",\n        authorsLabel: \"Autor\",\n        authorsPluralLabel: \"Autoren\",\n        filenameLabel: \"Dateiname\",\n        filenamePluralLabel: \"Dateinamen\",\n        modifiedLabel: \"Datum\",\n        modifiedPluralLabel: \"Datumsangaben\",\n        sizeLabel: \"Größe\",\n        sizePluralLabel: \"Größen\",\n        docformatLabel: \"Format\",\n        docformatPluralLabel: \"Formate\",\n        documentlanguagesLabel: \"Sprache\",\n        documentlanguagesPluralLabel: \"Sprachen\",\n        geo_label: \"Ort\",\n        geo_plural_label: \"Orte\",\n        person_label: \"Person\",\n        person_plural_label: \"Personen\",\n        company_label: \"Firma\",\n        company_plural_label: \"Firmen\",\n        treepath_label: \"Quelle\",\n        treepath_plural_label: \"Quellen\",\n        title_label: \"Titel\",\n        title_plural_label: \"Titel\",\n        authors_label: \"Autor\",\n        authors_plural_label: \"Autoren\",\n        filename_label: \"Dateiname\",\n        filename_plural_label: \"Dateinamen\",\n        modified_label: \"Datum\",\n        modified_plural_label: \"Datumsangaben\",\n        size_label: \"Größe\",\n        size_plural_label: \"Größen\",\n        docformat_label: \"Format\",\n        docformat_plural_label: \"Formate\",\n        documentlanguages_label: \"Sprache\",\n        documentlanguages_plural_label: \"Sprachen\",\n        accessLists: {\n            authorizedListTitleText: \"Liste der erlaubten Zugriffe\",\n            authorizedListHeader: \"Liste der erlaubten Zugriffe {value, number}\",\n            deniedListTitleText: \"Liste der unerlaubten Zugriffe\",\n            deniedListHeader: \"Liste der unerlaubten Zugriffe {value, number}\"\n        },\n        item: {\n            label: \"{label}:\",\n            separator: \"|\",\n            treeSeparator: \" ; \",\n            treeNodeSeparator: \"/\",\n            listSeparator: \", \",\n            empty_boolean: 'false',\n            empty_number: '0'\n        }\n    }\n};\n","import {\n    Directive,\n    ElementRef,\n    Input,\n    EventEmitter,\n    SimpleChanges,\n    Output,\n    HostListener,\n    OnInit,\n    OnChanges,\n} from \"@angular/core\";\nimport {\n    Autocomplete,\n    SuggestService,\n    AutocompleteState,\n    AutocompleteItem,\n} from \"@sinequa/components/autocomplete\";\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { UIService } from \"@sinequa/components/utils\";\nimport { LabelsWebService, Labels } from \"@sinequa/core/web-services\";\nimport { Keys } from \"@sinequa/core/base\";\nimport { LabelsService } from \"./labels.service\";\n\n@Directive({\n    selector: \"[sqAutocompleteLabels]\",\n})\nexport class LabelsAutocomplete extends Autocomplete implements OnInit, OnChanges {\n    /** Event synchronizing the list of selected labels in the parent component */\n    @Output() itemsUpdate = new EventEmitter<AutocompleteItem[]>();\n\n    /** Whether the labels are public or not */\n    @Input() public: boolean;\n\n    /** Enable adding new labels in labelsItems or not */\n    @Input() allowNewLabels: boolean = false;\n\n    /** Define the right of adding new labels in labelsItems or not */\n    @Input() allowManagePublicLabels: boolean = false;\n\n    /** Stores the selected labels items selected via Tab */\n    @Input() labelsItems: AutocompleteItem[] = [];\n\n    /** Stores the suggestions retrieved by th server in order to perform checks on key.enter events */\n    private _suggestions: string[] = [];\n\n    constructor(\n        elementRef: ElementRef,\n        suggestService: SuggestService,\n        appService: AppService,\n        uiService: UIService,\n        private labelsWebService: LabelsWebService,\n        private labelsService: LabelsService\n    ) {\n        super(elementRef, suggestService, appService, uiService);\n    }\n\n    /**\n     * The ngOnInit() method from the original directive is overriden\n     * On initialization, we listen to the autocomplete component for\n     * selection events\n     */\n    ngOnInit() {\n        this._dropdownSubscription = this.dropdown.clicked.subscribe((item) => {\n            this.select(item, true); // An item was selected from the autocomplete => take the value\n        });\n        this.start();\n    }\n\n    /**\n     * If the inputs changes state, react accordingly\n     * @param changes\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"labelsItems\"]) {\n            this.updatePlaceholder();\n        }\n\n        // Override start() by using init() instead, so that no double queries are generated and autocomplete dropdown is shown only on focus\n        if (changes[\"off\"] && !this.off) {\n            this.init();\n        }\n\n        // If labels category changes, we must remove the selected labels items and reinitialize the autocomplete\n        if (changes[\"public\"] && !changes[\"public\"].firstChange) {\n            const newInitLabels = [...changes[\"labelsItems\"].currentValue];\n            this.inputElement.blur();\n            /** Reset the input Value*/\n            this.setInputValue(\"\");\n            /** initialize the input needed specially for labels edit cases */\n            this.updatePlaceholder();\n            this.itemsUpdate.next(newInitLabels);\n        }\n    }\n\n    /**\n     * The getSuggests() method from the original directive is overriden to\n     * use the labelsService rather than suggest service.\n     */\n    protected getSuggests() {\n        const value = this.getInputValue();\n\n        if (value) {\n            // parse\n            const labels = value.split(\";\");\n\n            // find label at caret location\n            const position = this.getInputPosition();\n            let length = 0;\n            let val:\n                | { value: string, start: number, length: number }\n                | undefined;\n            for (const label of labels) {\n                if (position >= length && position <= length + label.length) {\n                    val = {\n                        value: label,\n                        start: length,\n                        length: label.length,\n                    };\n                    break;\n                }\n                length += label.length + 1;\n            }\n\n            // Get suggestions from web service\n            if (val) {\n                this._getLabelsSuggestions(val.value);\n            }\n        } else {\n            if (!!this.labelsService.labelsAutoSuggestWildcard) {\n                this._getLabelsSuggestions(\n                    this.labelsService.labelsAutoSuggestWildcard\n                );\n            } else {\n                this.start();\n            }\n        }\n    }\n\n    private _getLabelsSuggestions(val: string) {\n        this.labelsWebService.list(val, this.public).subscribe(\n            (labels: Labels) => {\n                if (\n                    this.getState() === AutocompleteState.ACTIVE ||\n                    this.getState() === AutocompleteState.OPENED\n                ) {\n                    /** Eliminate suggestions that are already selected */\n                    labels.labels = labels.labels.filter(\n                        (label) =>\n                            !this.labelsItems.find(\n                                (item) => item.display === label\n                            )\n                    );\n\n                    /** update the local list of suggestions */\n                    this._suggestions = labels.labels;\n\n                    /** limit the suggestions to be displayed to 10  */\n                    labels.labels = labels.labels.slice(0, 10);\n\n                    this.dropdown.update(\n                        true,\n                        labels.labels.map((label) => {\n                            return {\n                                display: label,\n                                category: \"\",\n                            };\n                        })\n                    );\n                }\n            },\n            () => {\n                this.dropdown.update(false);\n            },\n            () => {\n                if (\n                    this.dropdown.hasItems &&\n                    this.getState() === AutocompleteState.ACTIVE\n                ) {\n                    this.open(); // Switch from ACTIVE to OPENED (if not already)\n                } else if (\n                    !this.dropdown.hasItems &&\n                    this.getState() === AutocompleteState.OPENED\n                ) {\n                    // No data\n                    this.active(); // Switch from OPENED to ACTIVE (if not already)\n                }\n            }\n        );\n    }\n\n    /**\n     * The setAutocompleteItem() method from the original directive is overriden to\n     * Sets the content of the <input> based on the given\n     * Autocomplete Item.\n     * @returns false since labels items don't need to be searched\n     */\n    protected setAutocompleteItem(item: AutocompleteItem): boolean {\n        if (item) {\n            // Store the autocomplete items that will be used to create a selection\n            this.labelsItems.push(item);\n            this.updatePlaceholder();\n            this.itemsUpdate.next(this.labelsItems);\n            this.setInputValue(\"\");\n        }\n        return false;\n    }\n\n    /**\n     * The startOrActive() method from the original directive is overriden to\n     * immediately switch to ACTIVE if it is not the case\n     */\n    protected startOrActive(): void {\n        if (\n            this.getState() !== AutocompleteState.ACTIVE &&\n            this.getState() !== AutocompleteState.OPENED\n        ) {\n            // Avoid flickering\n            this.start();\n            this.active();\n        }\n    }\n\n    /**\n     * Listen to user's keyboard actions in the <input>, in order to navigate\n     * and select the autocomplete suggestions.\n     * Overrides the parent keydown method, adds the management of the backspace key\n     * to remove labels items, enhance the enter key to support adding new labels.\n     * @param event the keyboard\n     */\n    keydown(event: KeyboardEvent) {\n        const keydown = super.keydown(event);\n\n        if (keydown === undefined) {\n            //We can remove selections by typing <backspace> when the input is empty\n            if (event.keyCode === Keys.backspace) {\n                if (this.getInputValue() === \"\") {\n                    this.labelsItems.pop();\n                    this.updatePlaceholder();\n                    this.itemsUpdate.next(this.labelsItems);\n                }\n            }\n            /** Allow the selection one of new labels that not exists in the list */\n            if (event.keyCode === Keys.enter) {\n                this._manageSetAutocompleteItem();\n            }\n        }\n        return keydown;\n    }\n\n    /**\n     * Listens to focus events on the <input> host and overrides the parent focus events in order to launch the autocomplete\n     * If empty input :\n     * - display top relevent labels if the auto-suggest wildcard is configured\n     * - restart the autocomplete if no auto-suggest wildcard is found\n     * If not empty input :\n     * retrieve suggestions based on this input text\n     */\n    @HostListener(\"focus\") focus() {\n        this.start();\n        this.active();\n    }\n\n    /**\n     * Listens to blur events (out of focus) on the <input> host and overrides the parent blur events\n     */\n    @HostListener(\"blur\", [\"$event\"]) blur(event: FocusEvent) {\n        this._manageSetAutocompleteItem();\n        this.init();\n    }\n\n    /**\n     * Overrides the parent inputChanged method, so that it is possible to reinitialize the autocomplete\n     * @param event\n     */\n    @HostListener(\"input\", [\"$event\"]) inputChanged(event: Event) {\n        switch (this.getState()) {\n            case AutocompleteState.OPENED:\n                this.suggest(); // Just request more data, but no state change\n                break;\n            case AutocompleteState.START:\n            case AutocompleteState.ACTIVE:\n                this.active(); // get more data, and change state if not already ACTIVE\n                break;\n            case AutocompleteState.SELECTED:\n                this.start(); // The model changed because we selected a value ==> we restart in case the user keeps typing\n                this.active();\n                break;\n            case AutocompleteState.INIT:\n                break;\n        }\n    }\n\n    /**\n     * Updates the <input>'s placeholder to avoid displaying something\n     * when there are labelsItems displayed to the left.\n     */\n    updatePlaceholder() {\n        this._placeholder = this.labelsItems.length > 0 ? \"\" : this.placeholder;\n    }\n\n    private _manageSetAutocompleteItem(): void {\n        /** Always consider if there is text in the <input> and that it is not yet added in the labelsItems  */\n        if (!!this.getInputValue() && this.getInputValue() !== \"\") {\n            if (this.allowNewLabels) {\n                /** When it is an add Labels action ==> check the privilege to create new label */\n                if (\n                    !this.public ||\n                    (this.public && this.allowManagePublicLabels)\n                ) {\n                    this.setAutocompleteItem({\n                        display: this.getInputValue(),\n                        category: \"\",\n                    });\n                }\n            } else {\n                /** For all other actions on the labels, check if the typed text equals an existing label in the _suggestions  */\n                if (this._suggestions.indexOf(this.getInputValue()) > -1) {\n                    this.setAutocompleteItem({\n                        display: this.getInputValue(),\n                        category: \"\",\n                    });\n                }\n            }\n        }\n    }\n}\n","export default {\n    \"theme\": {\n        \"darkMode\": \"Dunkler Modus\",\n        \"darkModeTitle\": \"Dunkelmodus umschalten\",\n        \"lightMode\": \"Licht Modus\",\n        \"lightModeTitle\": \"lichtmodus umschalten\"\n    }\n}","import {HttpClientModule} from \"@angular/common/http\";\n\nimport {NgModule, ModuleWithProviders, APP_INITIALIZER} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\n// Intl is required by various web services\nimport {BaseModule} from \"@sinequa/core/base\";\nimport {IntlModule} from \"@sinequa/core/intl\";\n// StartConfig\nimport {StartConfigWebService, START_CONFIG, StartConfig} from \"./start-config.web.service\";\n\nimport {WEB_SERVICES_MODULE_PROVIDERS} from \"./module.providers\";\n\n// Used to ensure that the StartConfigWebService is instantiated\nexport function StartConfigInitializer(startConfigWebService: StartConfigWebService): () => Promise<void> {\n    const init = () => Promise.resolve();\n    return init;\n}\n\n/**\n * This module implements client services for the Sinequa web service APIs\n */\n// @dynamic\n@NgModule({\n    imports: [\n        CommonModule,\n        HttpClientModule,\n        BaseModule,\n        IntlModule\n    ],\n    declarations: [\n    ],\n    exports: [\n    ],\n    providers: [\n        // Ensure that the StartConfigWebService is instantiated so StartConfig is initialized\n        {provide: APP_INITIALIZER, useFactory: StartConfigInitializer, deps: [StartConfigWebService], multi: true},\n        ...WEB_SERVICES_MODULE_PROVIDERS\n    ]\n})\nexport class WebServicesModule {\n    /**\n     * Configures the module with a start configuration\n     *\n     * @param startConfig The start configuration object\n     *\n     * @returns The configured module\n     */\n    static forRoot(startConfig: StartConfig) : ModuleWithProviders<WebServicesModule> {\n        return {\n            ngModule: WebServicesModule,\n            providers: [\n                // Provide START_CONFIG\n                {provide: START_CONFIG, useValue: startConfig},\n            ]\n        };\n    }\n}","export * from \"./public-api\";","import {Injectable, InjectionToken, Optional, Inject} from \"@angular/core\";\nimport {Observable} from \"rxjs\";\nimport atomic from \"atomicjs\";\nimport {IProviders} from \"ng2-ui-auth\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * An {@link InjectionToken} to access the app's {@link StartConfig} instance\n */\nexport const START_CONFIG = new InjectionToken<StartConfig>(\"START_CONFIG\");\n\n/**\n * Defines members whose values are automatically deduced from direct {@link StartConfig} members\n */\nexport interface DeducedStartConfig {\n    /**\n     * The origin of the url used to make Sinequa API calls\n     */\n    origin?: string;\n    /**\n     * The application path of the url used to make Sinequa API calls\n     */\n    applicationPath?: string;\n    /**\n     * The url in the browser (origin + pathname)\n     */\n    browserUrl?: string;\n    /**\n     * The path used to make Sinequa API calls, including any virtual directories.\n     * If CORS is active then it will be prefixed by the Sinequa server origin\n     */\n    apiPath?: string;\n    /**\n     * A flag indicating whether the app is running in a CORS context.\n     */\n    corsActive?: boolean;\n}\n\n/**\n * Defines members whose values are retrieved from the Sinequa app configuration and that are available prior to user login\n */\nexport interface PreloginAppConfig {\n    /**\n     * Specifies which storage should be used to hold the CSRF token used to protect Sinequa API calls against\n     * CSRF attacks\n     */\n    authenticationStorage?: 'session' | 'local';\n    /**\n     * Contains the available login providers (only used for popup-based login)\n     */\n    providers?: IProviders;\n    /**\n     * Contains the OAuth auto login provider\n     */\n    autoOAuthProvider?: string;\n    /**\n     * Contains the OAuth auto login provider\n     */\n    autoSAMLProvider?: string;\n    /**\n     * A boolean value indicating whether popup-based login should be used\n     */\n    usePopupForLogin?: boolean;\n    /**\n     * The URL to be used to display online help\n     */\n    helpUrl?: string;\n    /**\n     * A boolean value indicating whether auditing is enabled\n     */\n    auditEnabled?: boolean;\n    /**\n     * A boolean value indicating whether ML auditing is enabled\n     */\n    mlAuditEnabled?: boolean;\n    /**\n     * The version of Sinequa running on the server\n     */\n    version?: string;\n    /**\n     * The date of the version of Sinequa running on the server\n     */\n    versionDate?: Date;\n}\n\n/**\n * Contains start-up configuration for the application. An instance of this object\n * must be provided when registering the {@link WebServicesModule} either by providing the START_CONFIG\n * injection token or by using the [forRoot]{@link WebServicesModule#forRoot} static method.\n *\n * Typically only the members declared directly (url, app, production) should be specified.\n * The other values are either deduced from these members or are retrieved from the Sinequa configuration\n */\nexport interface StartConfig extends DeducedStartConfig, PreloginAppConfig {\n    /**\n     * The url of the sinequa server including any virtual directories - defaults to the browser url\n     */\n    url?: string;\n    /**\n     * The app name (can be deduced from the browser url when the app is served by Sinequa)\n     */\n    app?: string;\n    /**\n     * A flag indicating whether the app is running in production mode or not\n     * (can be deduced from the browser url when the app is served by Sinequa)\n     */\n    production?: boolean;\n}\n\n/**\n * Defines Sinequa server configuration that can be held on a web server and retrieved using\n * [StartConfigWebService.fetchServerConfig]{@link StartConfigWebService#fetchServerConfig}\n */\nexport interface ServerConfig {\n    /**\n     * The URL of the Sinequa server including any virtual directories\n     */\n    url?: string;\n    /**\n     * The name of the application\n     */\n    app?: string;\n}\n\n/**\n * A service to manage the initialization of the app's {@link StartConfig} instance. The service\n * is automatically instantiated by an {@link APP_INITIALIZER} in {@link WebServicesModule} and the\n * initialization is performed in the constructor.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class StartConfigWebService {\n    private static API_PATH = \"/api/v1\";\n\n    /**\n     * Initializes the injected {@link StartConfig} instance. Outputs an error to the\n     * console if no instance is injected.\n     *\n     * @param startConfig The start configuration instance\n     */\n    constructor(@Optional() @Inject(START_CONFIG) private startConfig: StartConfig) {\n        if (!startConfig) {\n            console.error(\"START_CONFIG must be provided in your app module\");\n            return;\n        }\n        this.initStartConfig();\n    }\n\n    private getDefaultStartConfig(): StartConfig {\n        const startConfig: StartConfig = {};\n        const browserUrl = Utils.makeURL(window.location.href);\n        let parts = Utils.split(browserUrl.pathname, \"/\");\n        const appSpecifierIndex = parts.findIndex(value => Utils.eqNCN(value, \"app\", \"app-debug\"));\n        if (appSpecifierIndex !== -1 && appSpecifierIndex < parts.length - 1) {\n            const appSpecifier = parts[appSpecifierIndex];\n            startConfig.app = parts[appSpecifierIndex + 1];\n            startConfig.production = appSpecifier === \"app\" ? true : false;\n            parts = parts.slice(0, appSpecifierIndex);\n        }\n        startConfig.url = Utils.addUrl(browserUrl.origin, ...parts);\n        return startConfig;\n    }\n\n    private initStartConfig() {\n        const defaultStartConfig = this.getDefaultStartConfig();\n        const initialStartConfig = Utils.copy(this.startConfig);\n        Utils.extend(this.startConfig, defaultStartConfig, initialStartConfig);\n        const browserUrl = Utils.makeURL(window.location.href);\n        const url = Utils.makeURL(this.startConfig.url!);\n        let apiPath = Utils.addUrl(url.pathname, StartConfigWebService.API_PATH);\n        let applicationPath = url.pathname;\n        const corsActive = url.origin !== browserUrl.origin;\n        if (corsActive) {\n            apiPath = Utils.addUrl(url.origin, apiPath);\n            applicationPath = Utils.addUrl(url.origin, applicationPath);\n        }\n        this.startConfig.origin = url.origin;\n        this.startConfig.applicationPath = applicationPath;\n        this.startConfig.apiPath = apiPath;\n        this.startConfig.corsActive = corsActive;\n        this.startConfig.browserUrl = Utils.addUrl(browserUrl.origin, browserUrl.pathname);\n    }\n\n    /**\n     * Fetches pre-login app configuration from the Sinequa server and merges it\n     * into the start config instance\n     *\n     * @returns An observable of the start config after being merged with the pre-login app configuration\n     */\n    fetchPreLoginAppConfig(): Observable<StartConfig> {\n        return Observable.create(observer => {\n            let _url = Utils.addUrl(this.startConfig.apiPath!, \"app\");\n            _url = Utils.addSearchParams(_url, {\n                app: this.startConfig.app,\n                preLogin: true\n            });\n            atomic(_url, {\n                headers: {\n                    \"sinequa-force-camel-case\": true\n                }\n            })\n                .then(response => {\n                    const initialStartConfig = Utils.copy(this.startConfig);\n                    Utils.extend(this.startConfig, response.data, initialStartConfig);\n                    const versionDate = this.startConfig.versionDate;\n                    if (Utils.isString(versionDate)) { // it will be\n                        this.startConfig.versionDate = Utils.fromSysDateStr(versionDate);\n                    }\n                    observer.next(this.startConfig);\n                    observer.complete();\n                })\n                .catch(error => {\n                    console.error(\"Error retrieving app config\");\n                    observer.error(error);\n                });\n        });\n    }\n\n    /**\n     * Retrieves Sinequa server configuration from a web server hosting the app\n     *\n     * @param url A URL to a JSON file containing the Sinequa server configuration\n     *\n     * @returns An observable of the Sinequa server configuration\n     */\n    fetchServerConfig(url?: string): Observable<ServerConfig> {\n        return Observable.create(observer => {\n            if (!url) {\n                const _url = Utils.makeURL(window.location.href);\n                url = Utils.addUrl(_url.pathname, \"sinequa-config.json\");\n            }\n            atomic(url)\n                .then(response => {\n                    // If the config file is empty or not valid json we'll most likely get a string for data\n                    let serverConfig = response.data;\n                    if (!Utils.isObject(serverConfig)) {\n                        console.warn(\"invalid sinequa-config.json file\");\n                        serverConfig = {};\n                    }\n                    observer.next(serverConfig);\n                    observer.complete();\n                })\n                .catch(error => {\n                    console.log(\"sinequa-config.json not found\");\n                    observer.next({});\n                    observer.complete();\n                });\n        });\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport \"./polyfills\";\n\n/**\n * This module contains a variety of base types and utility classes including the {@link Utils} utilility class\n */\n@NgModule({\n    imports: [\n    ],\n    declarations: [\n    ],\n    exports: [\n    ]\n})\nexport class BaseModule {\n}","export * from \"./public-api\";","export * from \"./public-api\";","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {DragDropModule} from \"@angular/cdk/drag-drop\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\nimport {BsActionModule} from \"@sinequa/components/action\";\n\nimport {BASKET_COMPONENTS} from \"../baskets.service\";\nimport {BsEditBasket} from \"./edit-basket/edit-basket\";\nimport {BsManageBaskets} from \"./manage-baskets/manage-baskets\";\nimport {BsSelectBasket} from \"./select-basket/select-basket\";\nimport {BsResultBaskets} from \"./result-baskets/result-baskets\";\nimport {BsBasketsMenuComponent} from \"./baskets-menu/baskets-menu.component\";\nimport {BsFacetBasketsComponent} from './facet-baskets/facet-baskets.component';\nimport {RouterModule} from '@angular/router';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n        DragDropModule,\n        RouterModule,\n\n        BsModalModule,\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsSelectionModule,\n        BsActionModule\n    ],\n    declarations: [\n        BsEditBasket, BsManageBaskets, BsSelectBasket,\n        BsResultBaskets, BsBasketsMenuComponent,\n        BsFacetBasketsComponent\n    ],\n    exports: [\n        BsEditBasket, BsManageBaskets, BsSelectBasket,\n        BsResultBaskets, BsBasketsMenuComponent,\n        BsFacetBasketsComponent\n    ],\n    providers: [\n        {\n            provide: BASKET_COMPONENTS,\n            useValue: {\n                selectBasketModal: BsSelectBasket,\n                editBasketModal: BsEditBasket,\n                manageBasketsModal: BsManageBaskets\n            }\n        }\n    ]\n})\nexport class BsBasketsModule {\n}\n","export default {\n    \"resultSelector\": {\n        \"selectDocument\": \"Dokument auswählen\",\n        \"unselectDocument\": \"Dokumentauswahl aufheben\"\n    },\n    \"resultsSelector\": {\n        \"selectDocuments\": \"{count, selectordinal, =0 {} other {(#)}}\",\n        \"selectDocumentsTitle\": \"Dokumente auswählen\",\n        \"unselectDocumentsTitle\": \"Dokumentauswahl aufheben\",\n    },\n    \"selection\": {\n        \"selectedDocuments\": \"{count, plural, =0 {} one {# ausgewähltes Dokument} other {# ausgewählte Dokumente}}\"\n    }\n};\n","import {Component, Input, OnInit, AfterViewInit, OnDestroy, ViewChild, forwardRef} from \"@angular/core\";\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {BsDaterangepickerDirective, BsDaterangepickerConfig, BsDatepickerDirective, BsDatepickerConfig} from \"ngx-bootstrap/datepicker\";\nimport moment from \"moment\";\nimport { DatePickerOptions } from '../date-picker/date-picker';\n\nexport const DATE_RANGE_PICKER_VALUE_ACCESSOR: any = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => BsDateRangePicker),\n    multi: true\n};\n\nexport interface DateRangePickerOptions extends DatePickerOptions {\n    closedRange?: boolean;\n}\n\n@Component({\n    selector: \"sq-date-range-picker\",\n    template: `\n        <div *ngIf=\"options.closedRange\" class=\"sq-date-range-picker form-row\">\n            <div class=\"col\">\n                <input type=\"text\" autocomplete=\"off\" class=\"form-control\" bsDaterangepicker triggers=\"click\" #fromTo=\"bsDaterangepicker\" [bsConfig]=\"bsFromToConfig()\" [ngModel]=\"value\" (ngModelChange)=\"updateFromTo($event)\" [placeholder]=\"dateFormat\"/>\n            </div>\n        </div>\n        <div *ngIf=\"!options.closedRange\" class=\"sq-date-range-picker form-row\">\n            <div class=\"col-auto\">\n                <input type=\"text\" autocomplete=\"off\" [id]=\"fromName\" class=\"form-control sq-range-from\" bsDatepicker triggers=\"click\" #from=\"bsDatepicker\" [bsConfig]=\"bsFromConfig()\" [ngModel]=\"value[0]\" (ngModelChange)=\"updateFrom($event)\" [placeholder]=\"dateFormat\"/>\n            </div>\n            <div class=\"col-auto sq-separator\">{{'msg#advanced.dateRangePicker.separator' | sqMessage}}</div>\n            <div class=\"col-auto\">\n                <input type=\"text\" autocomplete=\"off\" [id]=\"toName\" class=\"form-control sq-range-to\" bsDatepicker triggers=\"click\" #to=\"bsDatepicker\" [bsConfig]=\"bsToConfig()\" [ngModel]=\"value[1]\" (ngModelChange)=\"updateTo($event)\" [placeholder]=\"dateFormat\"/>\n            </div>\n        </div>\n    `,\n    providers: [DATE_RANGE_PICKER_VALUE_ACCESSOR]\n})\nexport class BsDateRangePicker implements OnInit, AfterViewInit, OnDestroy, ControlValueAccessor {\n\n    private readonly SystemFormat: string = 'YYYY-MM-DD';\n\n    @Input() options: DateRangePickerOptions;\n    value: (Date | undefined)[];\n    private onChangeCallback: (_: any) => void = () => {};\n    private localeChange: Subscription;\n    @ViewChild(\"fromTo\", {static: false}) fromToPicker: BsDaterangepickerDirective;\n    @ViewChild(\"from\", {static: false}) fromPicker: BsDatepickerDirective;\n    @ViewChild(\"to\", {static: false}) toPicker: BsDatepickerDirective;\n    fromName: string;\n    toName: string;\n\n    constructor(\n        public intlService: IntlService) {\n    }\n\n    ngOnInit() {\n        if (!this.options) {\n            this.options = {};\n        }\n        this.fromName = \"from_\" + this.options.name;\n        this.toName = \"to_\" + this.options.name;\n\n        if (!this.value) {\n            this.value = [undefined, undefined];\n        }\n    }\n\n    public get dateFormat(): string {\n        return this.options.system ? this.SystemFormat : moment.localeData().longDateFormat('L');\n    }\n\n    setLocale() {\n        if (!!this.fromToPicker && this.fromToPicker.isOpen) {\n            this.fromToPicker.hide();\n            this.fromToPicker.show();\n        }\n        if (!!this.fromPicker && this.fromPicker.isOpen) {\n            this.fromPicker.hide();\n            this.fromPicker.show();\n        }\n        if (!!this.toPicker && this.toPicker.isOpen) {\n            this.toPicker.hide();\n            this.toPicker.show();\n        }\n    }\n\n    ngAfterViewInit() {\n        this.setLocale();\n        this.localeChange = Utils.subscribe(this.intlService.events,\n            (value) => {\n                this.setLocale();\n            });\n    }\n\n    ngOnDestroy() {\n        if (this.localeChange) {\n            this.localeChange.unsubscribe();\n        }\n    }\n\n    //#region closedRange\n    bsFromToConfig(): BsDaterangepickerConfig {\n        return <any>{\n            minDate: this.options.minDate,\n            maxDate: this.options.maxDate,\n            containerClass:'theme-default',\n            showWeekNumbers: false,\n            rangeInputFormat: this.options.system ? this.SystemFormat : moment.localeData().longDateFormat('L')\n        };\n    }\n\n    updateFromTo(fromTo: Date[]) {\n        this.setValue([!!fromTo ? fromTo[0] : undefined, !!fromTo ? fromTo[1] : undefined]);\n        this.onChangeCallback(this.value);\n    }\n    //#endregion closedRange\n\n    //#region !closedRange\n    maxDate: Date | undefined;\n    minDate: Date | undefined;\n    bsFromConfig(): BsDatepickerConfig {\n        return <any>{\n            minDate: this.options.minDate,\n            maxDate: this.maxDate,\n            containerClass:'theme-default',\n            showWeekNumbers: false,\n            dateInputFormat: this.options.system ? this.SystemFormat : moment.localeData().longDateFormat('L'),\n        };\n    }\n\n    bsToConfig(): BsDatepickerConfig {\n        return <any>{\n            minDate: this.minDate,\n            maxDate: this.options.maxDate,\n            containerClass:'theme-default',\n            showWeekNumbers: false,\n            dateInputFormat: this.options.system ? this.SystemFormat : moment.localeData().longDateFormat('L'),\n        };\n    }\n\n    setMinMaxDate() {\n        this.maxDate = this.value[1] || this.options.maxDate;\n        this.minDate = this.value[0] || this.options.minDate;\n    }\n\n    resetMinMaxDate() {\n        this.maxDate = this.options.maxDate;\n        this.minDate = this.options.minDate;\n    }\n\n    updateFrom(from: Date) {\n        this.setValue([from, this.value[1]]);\n        this.onChangeCallback(this.value);\n    }\n\n    updateTo(to: Date) {\n        this.setValue([this.value[0], to]);\n        this.onChangeCallback(this.value);\n    }\n    //#endregion !closedRange\n\n    zeroTimes() {\n        if (this.value) {\n            if (Utils.isDate(this.value[0])) {\n                const date = this.value[0];\n                date.setHours(0);\n                date.setMinutes(0);\n                date.setSeconds(0);\n                date.setMilliseconds(0);\n            }\n            if (Utils.isDate(this.value[1])) {\n                const date = this.value[1];\n                date.setHours(0);\n                date.setMinutes(0);\n                date.setSeconds(0);\n                date.setMilliseconds(0);\n            }\n        }\n    }\n\n    setValue(value: (Date | undefined)[] | undefined) {\n        if (!this.value || !value || !Utils.equals(this.value[0], value[0]) || !Utils.equals(this.value[1], value[1])) {\n            if (!value) {\n                value = [undefined, undefined];\n            } else {\n                value[0] = !!value[0] ? new Date(value[0]) : value[0];\n                value[1] = !!value[1] ? new Date(value[1]) : value[1];\n            }\n            if (this.options.closedRange) {\n                this.value = value;\n                this.zeroTimes();\n            } else {\n                this.resetMinMaxDate();\n                this.value = value;\n                this.zeroTimes();\n                this.setMinMaxDate();\n            }\n        }\n    }\n\n    //#region ControlValueAccessor\n    writeValue(value: Date[]): void {\n        this.setValue(value);\n    }\n\n    registerOnChange(fn: any): void {\n        this.onChangeCallback = fn;\n    }\n\n    registerOnTouched(fn: any): void {\n    }\n    //#endregion\n}\n","export * from \"./public-api\";","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable, of} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils, MapOf, JsonObject} from \"@sinequa/core/base\";\nimport {Results, Record} from \"./query.web.service\";\nimport {LinkResult} from \"./sponsored-links.web.service\";\n\n/**\n * Describes a single audit event\n */\nexport interface AuditEvent {\n    type: AuditEventType | string; // allow custom event types\n    detail?: JsonObject;\n    rfmDetail?: JsonObject;\n}\n\n/**\n * Contains an array of {@link AuditEvent} objects and an array of ML audit event records\n */\nexport interface AuditRecord {\n    auditEvents?: AuditEvent[];\n    mlAuditEvents?: any[];\n}\n\n/**\n * A composite type describing a set of AuditEvents\n */\nexport type AuditEvents = AuditEvent | AuditEvent[] | AuditRecord;\n\n/**\n * The standard audit event types\n */\nexport const enum AuditEventType {\n    // Should be in par with AuditEventType enum from AuditManager.cs\n    None = \"None\",\n\n    // WebApp event types\n    Search_FirstPage = \"Search_FirstPage\",\n    Search_Text = \"Search_Text\",\n    Search_Refine = \"Search_Refine\",\n    Search_Select_Item = \"Search_Select_Item\",\n    Search_Select_Custom = \"Search_Select_Custom\",\n    Search_Select_Concept = \"Search_Select_Concept\",\n    Search_Select_Correction = \"Search_Select_Correction\",\n    Search_GotoPage = \"Search_GotoPage\",\n    Search_GotoTab = \"Search_GotoTab\",\n    Search_DisplayResult = \"Search_DisplayResult\",\n    Search_RemoveResult = \"Search_RemoveResult\",\n    Search_RemoveAdvanced = \"Search_RemoveAdvanced\",\n    Search_SavedQuery = \"Search_SavedQuery\",\n    Search_WebService = \"Search_WebService\",\n    Search_DidYouMean_Original = \"Search_DidYouMean_Original\",\n    Search_DidYouMean_Correction = \"Search_DidYouMean_Correction\",\n    Search_ExportCSV = \"Search_ExportCSV\",\n    Search_SavedQuery_ExportCSV = \"Search_SavedQuery_ExportCSV\",\n    Search_Selection_ExportCSV = \"Search_Selection_ExportCSV\",\n    Search_AlertQuery = \"Search_AlertQuery\",\n    Search_Select_AnalyticsItem = \"Search_Select_AnalyticsItem\",\n    Search_Sort = \"Search_Sort\",\n    Search_Exit_Logout = \"Search_Exit_Logout\",\n    Search_Timeline_Usage = \"Search_Timeline_Usage\",\n    Search_AutoComplete = \"Search_Autocomplete\",\n\n    SavedQuery_Add = \"SavedQuery_Add\",\n    SavedQuery_Delete = \"SavedQuery_Delete\",\n    SavedQuery_DeleteAll = \"SavedQuery_DeleteAll\",\n    SavedQuery_Rename = \"SavedQuery_Rename\",\n\n    Alert_Edit = \"Alert_Edit\",\n    Alert_Delete = \"Alert_Delete\",\n    Alert_DeleteAll = \"Alert_DeleteAll\",\n\n    Link_Display = \"Link_Display\",\n    Link_Click = \"Link_Click\",\n\n    Basket_Add = \"Basket_Add\",\n    Basket_Delete = \"Basket_Delete\",\n    Basket_DeleteAll = \"Basket_DeleteAll\",\n    Basket_Rename = \"Basket_Rename\",\n    Basket_AddDoc = \"Basket_AddDoc\",\n    Basket_RemoveDoc = \"Basket_RemoveDoc\",\n    Basket_Open = \"Basket_Open\",\n    Basket_ExportCSV = \"Basket_ExportCSV\",\n\n    Label_Add = \"Label_Add\",\n    Label_Delete = \"Label_Delete\",\n    Label_Rename = \"Label_Rename\",\n    Label_Open = \"Label_Open\",\n    Label_AddDoc = \"Label_AddDoc\",\n    Label_RemoveDoc = \"Label_RemoveDoc\",\n    Label_ExportCSV = \"Label_ExportCSV\",\n    Label_Menu_ExportCSV = \"Label_Menu_ExportCSV\",\n\n    Rating_Set = \"Rating_Set\",\n    Rating_Delete = \"Rating_Delete\",\n\n    Doc_Preview = \"Doc_Preview\",\n    Doc_CacheHtml = \"Doc_CacheHtml\",\n    Doc_CachePdf = \"Doc_CachePdf\",\n    Doc_CacheOriginal = \"Doc_CacheOriginal\",\n    Doc_Url1 = \"Doc_Url1\",\n    Doc_Url2 = \"Doc_Url2\",\n\n    Click_ResultLink = \"Click_ResultLink\",\n    Click_ResultLink1 = \"Click_ResultLink1\",\n    Click_ResultLink2 = \"Click_ResultLink2\",\n    Click_ResultLink3 = \"Click_ResultLink3\",\n    Click_ResultLink4 = \"Click_ResultLink4\",\n    Click_ResultLink5 = \"Click_ResultLink5\",\n    Click_ResultLink6 = \"Click_ResultLink6\",\n    Click_ResultLink7 = \"Click_ResultLink7\",\n    Click_ResultLink8 = \"Click_ResultLink8\",\n    Click_ResultLink9 = \"Click_ResultLink9\",\n    Click_ResultLink10 = \"Click_ResultLink10\",\n    Click_PreviewLink1 = \"Click_PreviewLink1\",\n    Click_PreviewLink2 = \"Click_PreviewLink2\",\n    Click_PreviewLink3 = \"Click_PreviewLink3\",\n    Click_PreviewLink4 = \"Click_PreviewLink4\",\n    Click_PreviewLink5 = \"Click_PreviewLink5\",\n    Click_PreviewLink6 = \"Click_PreviewLink6\",\n    Click_PreviewLink7 = \"Click_PreviewLink7\",\n    Click_PreviewLink8 = \"Click_PreviewLink8\",\n    Click_PreviewLink9 = \"Click_PreviewLink9\",\n    Click_PreviewLink10 = \"Click_PreviewLink10\",\n\n    RFM_ClickSet = \"RFM_ClickSet\",\n    RFM_ClickReset = \"RFM_ClickReset\",\n    RFM_Like = \"RFM_Like\",\n    RFM_LikeReset = \"RFM_LikeReset\",\n    RFM_Dislike = \"RFM_Dislike\",\n    RFM_Important = \"RFM_Important\",\n    RFM_ImportantReset = \"RFM_ImportantReset\",\n    RFM_Ban = \"RFM_Ban\"\n}\n\n/**\n * A service to notify the audit manager on the Sinequa server of client-side events\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AuditWebService extends HttpService {\n    private static readonly endpoint = \"audit.notify\";\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        protected httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Notify the Sinequa server of a sponsored link event\n     *\n     * @param evt The audit event type\n     * @param sl The sponsored link\n     * @param resultId The id of the results that showed the sponsored link\n     * @param parameters Additional information\n     */\n    notifySponsoredLink(\n        evt: AuditEventType, sl: LinkResult, resultId: string,\n        parameters?: MapOf<string | number | boolean | undefined>): Observable<void>  {\n        const detail: JsonObject = {\n            \"link-id\": sl.id,\n            rank: sl.rank || 0,\n            title: sl.title,\n            url: sl.url,\n            \"result-id\": resultId\n        };\n        if (parameters) {\n            Object.keys(parameters).forEach(key => detail[key] = parameters[key]);\n        }\n        const data: AuditEvent = {\n            type: evt,\n            detail\n        };\n        return this.notify(data);\n    }\n\n    /**\n     * Notify the Sinequa server of a document event\n     *\n     * @param evt The audit event type\n     * @param doc The document (record) in question\n     * @param resultsOrId The results or resultid that contain the document\n     * @param parameters Additional parameters\n     * @param rfmParameters Additional RFM parameters\n     */\n    notifyDocument(\n        evt: AuditEventType, doc: Record, resultsOrId: Results | string,\n        parameters?: MapOf<string | number | boolean | undefined>,\n        rfmParameters?: MapOf<string | number | boolean | undefined>): Observable<void>  {\n        let resultId: string | null;\n        let results: Results | undefined;\n        if (Utils.isString(resultsOrId)) {\n            resultId = resultsOrId;\n        }\n        else {\n            results = resultsOrId;\n            resultId = results ? results.id : null;\n        }\n        const detail: JsonObject = {\n            app: this.appName,\n            \"doc-id\": doc.id,\n            rank: doc.rank,\n            title: doc.title,\n            source: Utils.treeFirstNode(doc.collection[0]),\n            collection: doc.collection[0],\n            \"result-id\": resultId,\n            filename: doc.filename,\n            fileext: doc.fileext,\n            index: doc.databasealias\n        };\n        if (results) {\n            detail[\"result-count\"] = results.totalRowCount;\n        }\n        if (parameters) {\n            Object.keys(parameters).forEach(key => detail[key] = parameters[key]);\n        }\n        const data: AuditEvent = {\n            type: evt,\n            detail\n        };\n        if (rfmParameters) {\n            const rfmDetail: JsonObject = {};\n            Object.keys(rfmParameters).forEach(key => rfmDetail[key] = rfmParameters[key]);\n            data.rfmDetail = rfmDetail;\n        }\n        return this.notify(data);\n    }\n\n    /**\n     * Notify the Sinequa server of a document event\n     *\n     * @param evt The audit event type\n     * @param id The id of the document (record) in question\n     * @param parameters Additional parameters\n     * @param rfmParameters Additional RFM parameters\n     */\n    notifyDocumentById(\n        evt: AuditEventType, id: string,\n        parameters?: MapOf<string | number | boolean | undefined>,\n        rfmParameters?: MapOf<string | number | boolean | undefined>): Observable<void>  {\n        const collection = id.substr(0, id.indexOf(\"|\"));\n        const detail: JsonObject = {\n            app: this.appName,\n            \"doc-id\": id,\n            rank: -1,\n            source: Utils.treeFirstNode(collection),\n            collection\n        };\n        if (parameters) {\n            Object.keys(parameters).forEach(key => detail[key] = parameters[key]);\n        }\n        const data: AuditEvent = {\n            type: evt,\n            detail\n        };\n        if (rfmParameters) {\n            const rfmDetail: JsonObject = {};\n            Object.keys(rfmParameters).forEach(key => rfmDetail[key] = rfmParameters[key]);\n            data.rfmDetail = rfmDetail;\n        }\n        return this.notify(data);\n    }\n\n    /**\n     * Notify logout\n     */\n    notifyLogout() : Observable<void> {\n        const detail: JsonObject = {\n            app: this.appName,\n        };\n\n        const data: AuditEvent = {\n            type: AuditEventType.Search_Exit_Logout,\n            detail\n        };\n\n        return this.notify(data);\n    }\n\n    /**\n     * Notify the Sinequa server of a set of audit events\n     *\n     * @param auditEvents The audit events\n     */\n    notify(auditEvents: AuditEvents): Observable<void> {\n        if (!this.startConfig.auditEnabled) {\n            return of(undefined);\n        }\n        const observable = this.httpClient.post<void>(this.makeUrl(AuditWebService.endpoint), {\n            event: AuditEventType.None,\n            app: this.appName,\n            $auditRecord: auditEvents\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"auditService.notify failure - error: \", error);\n            });\n        return observable;\n    }\n}","import {NgModule, ModuleWithProviders} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {WebServicesModule} from \"@sinequa/core/web-services\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {LoginModule} from \"@sinequa/core/login\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {SearchOptions, SEARCH_OPTIONS} from \"../search.service\";\n\nimport {BsDidYouMean} from \"./did-you-mean/did-you-mean\";\nimport {BsBreadcrumbs} from \"./breadcrumbs/breadcrumbs\";\nimport {BsPager} from \"./pager/pager\";\nimport {BsPageSizeSelector} from \"./page-size-selector/page-size-selector\";\nimport {BsSortSelector} from \"./sort-selector/sort-selector\";\nimport {BsTabs} from \"./tabs/tabs\";\nimport {BsLoadingBar} from \"./loading-bar/loading-bar\";\nimport {BsScroller} from \"./scroller/scroller\"\nimport {BsLoadMore} from './load-more/load-more';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n\n        WebServicesModule,\n        IntlModule,\n        LoginModule,\n\n        UtilsModule,\n        BsActionModule\n    ],\n    declarations: [\n        BsDidYouMean,\n        BsBreadcrumbs, BsPager, BsPageSizeSelector, BsSortSelector,\n        BsTabs, BsLoadingBar,\n        BsScroller, BsLoadMore\n    ],\n    exports: [\n        BsDidYouMean,\n        BsBreadcrumbs, BsPager, BsPageSizeSelector, BsSortSelector,\n        BsTabs, BsLoadingBar,\n        BsScroller, BsLoadMore\n    ],\n})\nexport class BsSearchModule {\n    static forRoot(searchOptions: SearchOptions) : ModuleWithProviders<BsSearchModule> {\n        return {\n            ngModule: BsSearchModule,\n            providers: [\n                // Provide SEARCH_OPTIONS\n                {provide: SEARCH_OPTIONS, useValue: searchOptions},\n            ]\n        };\n    }\n}\n","import { Component, Input, OnChanges } from \"@angular/core\";\nimport { Node } from './network-models';\n\n\nexport interface NodeData {\n    node: Node;\n    count?: number; // The count displayed may be different from the node count (for edges)\n}\n\n@Component({\n    selector: \"sq-node-info-card\",\n    templateUrl: \"node-info-card.component.html\",\n    styles: [`\n.card {\n    top: 5px;\n    left: 0;\n    right: 0;\n    width: 80%;\n}\n.circular-image {\n    width: 1.5em;\n    height: 1.5em;\n    border-radius: 50%;\n    object-fit: cover;\n}\n    `]\n})\nexport class BsNodeInfoCard implements OnChanges {\n    @Input() node: Node;\n\n    closed: boolean;\n    expanded: boolean;\n\n    nodeData: NodeData;\n\n    neighbors: {[type: string]: NodeData[]};\n\n    ngOnChanges() {\n        this.closed = false;\n        this.expanded = false;\n        this.nodeData = { node: this.node, count: this.node.count };\n\n        this.neighbors = {};\n        this.node.context.edges\n            .stream()\n            .filter(e => e.from === this.node.id || e.to === this.node.id) // Filter edges\n            .map(e => {\n                const id = e.from === this.node.id ? e.to : e.from\n                const node = this.node.context.nodes.get(id);\n                return {node, count: e.count};\n            }) // get node and edge count\n            .forEach(item => {\n                if(item.node) {\n                    const type = item.node.type.field ?\n                        item.node.context.appService.getPluralLabel(item.node.type.field) : // Try to get the \"pretty label\"\n                        item.node.type.name; // Or just use the node type's name\n                    if(!this.neighbors[type]) {\n                        this.neighbors[type] = []; // Initialize the neighbor array\n                    }\n                    // Create the node data\n                    this.neighbors[type].push({ node: item.node, count: item.count } as NodeData);\n                }\n                return true;\n            });\n        // Sort the neighbors by decreasing count number\n        Object.values(this.neighbors)\n            .forEach(list => list.sort((a,b) => (b.count || 0) - (a.count || 0)));\n    }\n\n    focusNode(node: Node) {\n        // Hack to gain access to the network instance (networkService does not have the focus() method)\n        const networkInstance = node.context.networkService['networks'][node.context.name];\n        networkInstance.focus(node.id, {animation: true}); // Move the view to this node with animation\n        networkInstance.selectNodes([node.id], true); // Warning: does not trigger events...\n        node.context.select(node, undefined); // Select the node to update info cards, actions\n        return false;\n    }\n}","<div class=\"card position-absolute mx-auto\" *ngIf=\"!closed\">\n    <div class=\"card-body\">\n        <div class=\"d-flex align-items-center mb-1\">\n            <ng-container *ngTemplateOutlet=\"nodeTpl; context:{$implicit: nodeData}\"></ng-container>\n            <button class=\"btn btn-sm ml-auto\" title=\"{{ (expanded? 'msg#network.infocards.collapse' : 'msg#network.infocards.expand') | sqMessage }}\" (click)=\"expanded = !expanded\">\n                <i class=\"fas fa-chevron-{{ expanded? 'up' : 'down' }}\"></i>\n            </button>\n            <button class=\"btn btn-sm\" title=\"{{ 'msg#network.infocards.close' | sqMessage }}\" (click)=\"closed = true\">\n                <i class=\"fas fa-times\"></i>\n            </button>\n        </div>\n        <sq-collapse [collapsed]=\"!expanded\">\n            <ng-template>\n                <div *ngFor=\"let neighbor of neighbors | keyvalue\" class=\"mt-1 small\">\n                    <strong>{{neighbor.key | sqMessage}}</strong>\n                    <ul class=\"list-unstyled pl-3 m-0\">\n                        <li *ngFor=\"let item of neighbor.value\">\n                            <a href=\"#\" (click)=\"focusNode(item.node)\" title=\"{{ 'msg#network.infocards.focus' | sqMessage }}\">\n                                <ng-container *ngTemplateOutlet=\"nodeTpl; context:{$implicit: item}\"></ng-container>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </ng-template>\n        </sq-collapse>\n    </div>\n</div>\n\n<ng-template #nodeTpl let-nodeData>\n    <span *ngIf=\"nodeData.node['image']\"><img src=\"{{nodeData.node['image']}}\" class=\"circular-image mr-2\"></span>\n    <span *ngIf=\"!nodeData.node['image'] && nodeData.node['icon']\" [ngStyle]=\"{color: nodeData.node['icon']['color']}\" class=\"fa mr-2\">{{nodeData.node['icon']['code']}}</span>\n    <span class=\"mr-2\">{{nodeData.node.label}}</span>\n    <span *ngIf=\"nodeData.count > 0\" class=\"mr-2 text-muted\" title=\"{{ 'msg#network.infocards.count' | sqMessage }}\">({{nodeData.count}})</span>\n</ng-template>","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject, Input, OnChanges, OnDestroy, SimpleChanges, ViewChild } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport {DOCUMENT} from '@angular/common';\nimport {CdkVirtualScrollViewport} from '@angular/cdk/scrolling';\nimport {Subscription} from 'rxjs';\n\nimport { HighlightValue, PreviewData } from '@sinequa/core/web-services';\nimport {Action} from \"@sinequa/components/action\";\n\nimport { PreviewDocument } from '../../preview-document';\nimport {PreviewService} from '../../preview.service';\n\nexport class Extract {\n  text: SafeHtml; // Sanitized HTML text\n  startIndex : number; // this is the start index of the extracts within the Document Text  \n  relevanceIndex : number; // 0 the most relevant to N the less relevant\n  textIndex : number; // index of the extract in the text. e.g 0 is the first extract displayed in the document\n}\n\n@Component({\n  selector: 'sq-preview-extracts-panel',\n  templateUrl: './preview-extracts-panel.component.html',\n  styleUrls: ['./preview-extracts-panel.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsPreviewExtractsPanelComponent implements OnChanges, OnDestroy {\n  @Input() previewData: PreviewData;\n  @Input() previewDocument: PreviewDocument;\n  @Input() downloadUrl: string;\n  @Input() style: \"light\"|\"dark\" = \"light\";\n  @ViewChild(\"scrollViewport\") cdkScrollViewport: CdkVirtualScrollViewport;\n\n  sortAction : Action;\n  extracts: Extract[] = [];\n  currentIndex = -1;\n  loading = false;\n  loadCompleteSubscription: Subscription;\n\n  constructor(\n    @Inject(DOCUMENT) document: Document,\n    private previewService: PreviewService,\n    private cdr: ChangeDetectorRef,\n    private domSanitizer: DomSanitizer) { }\n\n  ngOnDestroy() {\n    if(this.loadCompleteSubscription) {\n      this.loadCompleteSubscription.unsubscribe();\n    }\n  }\n    \n  /**\n   * Extracts the list of extracts from the preview document\n   */\n  ngOnChanges(changes: SimpleChanges) {\n    this.extracts = [];\n    if (this.previewData && this.previewDocument) {\n      const extracts = this.previewData.highlightsPerCategory[\"extractslocations\"]?.values; //Extract locations Array ordered by \"relevance\"\n      if (!!extracts && extracts.length > 0) {\n        this.extractAll(extracts, this.previewDocument);\n        return;\n      }\n    }\n    \n    if(this.previewData && this.downloadUrl){\n      const extracts = this.previewData.highlightsPerCategory[\"extractslocations\"]?.values; //Extract locations Array ordered by \"relevance\"\n      if(!!extracts && extracts.length > 0){\n        this.loading = true;\n\n        if (this.previewDocument) {\n          this.extractAll(extracts, this.previewDocument)\n        } else {\n          this.previewService.getHtmlPreview(this.downloadUrl)\n            .subscribe((value) => {\n              const previewDocument = this.createDocument(value);\n              this.extractAll(extracts, previewDocument);\n            });\n        }\n      }\n    }\n  }\n  \n  private createDocument(value: string): PreviewDocument {\n    const doc = document.implementation.createHTMLDocument(\"\");\n    doc.write(value);\n    doc.close();\n    let previewDocument = new PreviewDocument(doc);\n\n    const count = previewDocument.document.querySelectorAll(\"[id^='extractslocations']\").length;\n    if (count === 0 && this.previewDocument) {\n      // use previous document to retrieve extracts\n      previewDocument = this.previewDocument;\n    }\n    \n    return previewDocument;\n  }\n\n  private extractAll(extracts:HighlightValue[], previewDocument: PreviewDocument) {\n    // Init the extracts Array and storing the relevancy index = i because extractsLocations is already ordered by relevance\n    // but extract's text is sort by \"start\", that why text is set to empty here\n    this.extracts = extracts[0].locations.map((el, i) => ({\n      text: \"\",\n      startIndex: el.start,\n      relevanceIndex: i,  // used to sort by relevance index\n      textIndex: 0\n    }));\n\n    // next sort the array by startIndex to extract the correct extract's text\n    // and set the textIndex\n    this.extracts.sort((a, b) => a.startIndex - b.startIndex) // Sorting by start index (text index)\n    .forEach((el, i) => {\n      el.text = this.sanitize(previewDocument.getHighlightText(\"extractslocations\", i)); // get the text\n      el.textIndex = i // Storing the TextIndex to be able to select extracts\n    });\n\n    // do not take item without text\n    this.extracts = this.extracts.filter(el => el.text !== '');\n    \n    // finally sort extracts by relevance\n    this.extracts.sort((a,b) => a.relevanceIndex - b.relevanceIndex);\n    \n    this.buildSortAction();\n          \n    this.loading = false;\n    this.currentIndex = -1;\n    this.cdr.detectChanges();\n  }\n\n  /**\n   * Build Sort Action for Extracts\n   * @param i \n   */\n  buildSortAction(){\n    this.sortAction = new Action({\n      title: \"msg#sortSelector.sortByTitle\",\n      text:  \"msg#preview.relevanceSortHighlightButtonText\",\n      children: [\n        new Action({\n          icon: 'fas fa-sort-amount-down',\n          text: \"msg#preview.relevanceSortHighlightButtonText\",\n          action: (item: Action, event: Event) => {\n            // return a new map to re-render the collection\n            this.extracts = this.extracts.map(el => el).sort((a, b) => a.relevanceIndex - b.relevanceIndex);\n            this.sortAction.text = item.text;\n            this.currentIndex = -1;\n            }\n        }),\n        new Action({\n          icon: 'fas fa-sort-amount-down',\n          text: \"msg#preview.textOrderSortHighlightButtonText\",\n          action: (item: Action, event: Event) => {\n            // return a new map to re-render the collection\n            this.extracts = this.extracts.map(el => el).sort((a,b) => a.textIndex-b.textIndex);\n            this.sortAction.text = item.text;\n            this.currentIndex = -1;\n          }\n        })\n      ]\n    });\n\n  }\n\n  /**\n   * Scroll to a specific extract\n   * @param i\n   */\n  scrollExtract(extract: Extract, index?: number) {\n    if (index !== undefined) {\n      this.currentIndex = index;\n    }\n\n    if (this.previewDocument) {\n      // extracts are always at textIndex position whatever the sort\n      this.previewDocument.selectHighlight(\"extractslocations\", extract.textIndex);\n    }\n    return false;\n  }\n\n  /**\n   * Sanitize the text of a HTML formatted extract\n   * @param text\n   */\n  sanitize(text: string): SafeHtml | string {\n    return text !== \"\" ? this.domSanitizer.bypassSecurityTrustHtml(text.replace(/sq\\-current/, \"\")) : \"\";\n  }\n\n  /**\n   * Select the previous extract in the list\n   */\n  previousExtract(){\n    this.currentIndex--;\n    this.scrollTo();\n  }\n\n  /**\n   * Select the next extract in the list\n   */\n  nextExtract(){\n    this.currentIndex++;\n    this.scrollTo();\n  }\n  \n  private scrollTo() {\n    this.cdkScrollViewport.scrollToIndex(this.currentIndex);\n    const extract = this.extracts[this.currentIndex];\n    this.scrollExtract(extract);\n  }\n}\n","<ng-container *ngIf=\"previewData\">\n    <div class=\"d-flex justify-content-between p-2\" *ngIf=\"extracts?.length > 0\">\n        <button class=\"btn btn-light\" (click)=\"previousExtract()\" [disabled]=\"currentIndex < 1\">\n            <i class=\"fas fa-arrow-left\"></i>&nbsp;{{ 'msg#preview.previousDocument' | sqMessage}}\n        </button>\n        <div class=\"btn-group\" [sq-action-buttons]=\"{items: [sortAction], autoAdjust: true}\" ></div>\n        <button class=\"btn btn-light float-right\" (click)=\"nextExtract()\" [disabled]=\"currentIndex >= extracts.length-1\">\n            {{ 'msg#preview.nextDocument' | sqMessage}}&nbsp;<i class=\"fas fa-arrow-right\"></i>\n        </button>\n    </div>\n\n    <div *ngIf=\"loading\" class=\"d-flex justify-content-center align-items-center h-100\">\n        <div class=\"spinner-grow\" role=\"status\"></div>\n    </div>\n    <div class=\"text-center text-muted\" *ngIf=\"!loading && extracts?.length === 0; else extractsTpl\">\n        <span>{{ 'msg#preview.noextract' | sqMessage}}</span>\n    </div>\n    \n    <ng-template #extractsTpl>\n        <cdk-virtual-scroll-viewport #scrollViewport [itemSize]=\"64\" style=\"height: 100%;\">\n            <div *cdkVirtualFor=\"let extract of extracts; let i = index\" class=\"pl-2 pr-2\">\n                <a  href=\"#\" \n                    class=\"card my-1 list-group-item-action\"\n                    [ngClass]=\"{'active': i === currentIndex}\"\n                    (click)=\"scrollExtract(extract, i)\">\n                    <p class=\"card-body m-0\" [innerHTML]=\"extract.text\"></p>\n                </a>\n            </div>\n        </cdk-virtual-scroll-viewport>\n    </ng-template>\n</ng-container>\n\n<div class=\"text-center\" *ngIf=\"!previewData\">\n    {{ 'msg#preview.loading' | sqMessage}}\n</div>","import {Injectable, Inject} from \"@angular/core\";\nimport {HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpParams} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {START_CONFIG, StartConfig, AuditRecord, AuditEvent, AuditEvents} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * An `HttpInterceptor` to process audi events attached to the request body\n * in the `$auditRecord` member.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AuditInterceptor implements HttpInterceptor {\n    \n    // Store the session id and its datetime of creation/refresh\n    sessionid: string;\n    sessionstart: Date;\n\n    constructor(\n        @Inject(START_CONFIG) private startConfig: StartConfig\n    ) {\n    }\n\n    private shouldIntercept(url: string): boolean {\n        return Utils.startsWith(url, this.startConfig.apiPath!);\n    }\n\n    private isJsonable(obj): boolean {\n        return (Utils.isObject(obj) || Utils.isArray(obj)) && !Utils.isArrayBuffer(obj) && !Utils.isBlob(obj) &&\n            !Utils.isString(obj) && !(obj instanceof HttpParams);\n    }\n\n    // Handle legacy calls where auditEvents is either an AuditEvent or AuditEvent[]\n    private ensureAuditRecord(auditEvents: AuditEvents): AuditRecord | undefined{\n        if (!auditEvents) {\n            return undefined;\n        }\n        let auditEvents1: AuditEvent[] | undefined;\n        if (Utils.isArray(auditEvents)) {\n            auditEvents1 = auditEvents;\n        }\n        else if (Utils.isObject(auditEvents)) {\n            const auditRecord = auditEvents as AuditRecord;\n            if (auditRecord.auditEvents || auditRecord.mlAuditEvents) {\n                return auditRecord;\n            }\n            auditEvents1 = [auditEvents as AuditEvent];\n        }\n        return {\n            auditEvents: auditEvents1\n        };\n    }\n\n    /**\n     * Add a sessionid to all the audit events\n     * @param auditRecord \n     */\n    private addSessionId(auditRecord?: AuditRecord) {\n        const sessionid = this.getSessionId();\n        auditRecord?.auditEvents?.forEach(event => {\n            if(!event.detail) {\n                event.detail = {};\n            }\n            event.detail['session-id'] = sessionid;\n        });\n    }\n\n    /**\n     * Get a Session Id initialized upon login. The session is maintained for 10 minutes\n     * after the last call to this method.\n     */\n    private getSessionId(): string {\n        if(!this.sessionid || this.isSessionStale()) {\n            this.sessionid = Utils.guid();\n        }\n        this.sessionstart = new Date();\n        return this.sessionid;\n    }\n\n    /**\n     * Test whether the current session id valid or stale (need to be refreshed)\n     */\n    private isSessionStale(): boolean {\n        const lastSession = new Date().getTime() - this.sessionstart.getTime();\n        // Consider the session stale after 10 minutes\n        return lastSession > 10 * 60 * 1000;\n    }\n\n    /**\n     * Called once the `$auditRecord` member has been standardized, this method\n     * can be overidden to update fields in the audit events associated with a\n     * web service call.\n     */\n    protected updateAuditRecord(auditRecord?: AuditRecord) {\n    }\n\n    /**\n     * Intercept requests with a JSON body and standardize the format of the\n     * `$auditRecord` member.\n     */\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        if (this.shouldIntercept(request.url) && this.isJsonable(request.body)) {\n            request.body.$auditRecord = this.ensureAuditRecord(request.body.$auditRecord);\n            this.addSessionId(request.body.$auditRecord);\n            this.updateAuditRecord(request.body.$auditRecord);\n        }\n        return next.handle(request);\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsHeatmapModule} from \"@sinequa/analytics/heatmap\";\n\nimport {BsTimelineComponent} from \"./timeline.component\";\nimport {BsFacetTimelineComponent} from \"./facet-timeline.component\";\nimport { TimelineLegendComponent } from \"./timeline-legend.component\";\n\n@NgModule({\n    imports: [\n        FormsModule, ReactiveFormsModule,\n        CommonModule,\n        IntlModule,\n\n        UtilsModule,\n        BsSelectionModule,\n        BsActionModule,\n        BsHeatmapModule // We need the heatmap module for the tooltip component\n    ],\n    declarations: [\n        BsTimelineComponent,\n        BsFacetTimelineComponent,\n        TimelineLegendComponent\n    ],\n    exports: [\n        BsTimelineComponent,\n        BsFacetTimelineComponent,\n        TimelineLegendComponent\n    ]\n})\nexport class BsTimelineModule {\n}","import {Directive, Input, OnChanges, ElementRef} from \"@angular/core\";\n\nexport interface ScrollIntoViewOptions {\n    active: boolean;\n    first: boolean;\n}\n\n@Directive({\n    selector: \"[sqScrollIntoView]\"\n})\nexport class ScrollIntoView implements OnChanges {\n    @Input(\"sqScrollIntoView\") options: ScrollIntoViewOptions;\n\n    constructor(\n        private elementRef: ElementRef) {\n    }\n\n    ngOnChanges() {\n        if (this.options.active) {\n            if (this.options.first) {\n                this.elementRef.nativeElement.scrollIntoView(false);\n            }\n            else {\n                this.elementRef.nativeElement.scrollIntoViewIfNeeded(false);\n            }\n        }\n    }\n}\n","import { Subscription } from 'rxjs';\nimport { Record } from '@sinequa/core/web-services';\nimport { SelectionService, SelectionEventType } from '@sinequa/components/selection';\nimport { NodeType, NetworkContext } from '../network-models';\nimport { RecordsProvider, StructuralEdgeType } from './records-provider';\n\n\n/**\n * An extension of the RecordsProvider, where records are not provided\n * directly, but instead are taken from the SelectionService and refreshed\n * every time a node is selected or unselected.\n * ⚠️ Note that the SelectionService must be configured to store records instead\n * of just records ids!\n * See http://localhost:4000/sba-angular/modules/components/selection.html#selection-service\n */\nexport class SelectedRecordsProvider extends RecordsProvider {\n\n    // Subscription to the SelectionService, allowing to refresh the list of records\n    selectionSubscription: Subscription;\n\n    constructor(\n        public name = \"Selected documents\",\n        protected nodeType: NodeType,\n        protected edgeTypes: StructuralEdgeType[],\n        protected selectionService: SelectionService,\n        protected hideRecordNode = false\n    ){\n        super(name, nodeType, edgeTypes, selectionService.getSelectedItems() as Record[], hideRecordNode);\n\n        this.selectionSubscription = selectionService.events.subscribe(event => {\n            if(event.type === SelectionEventType.SELECT || SelectionEventType.UNSELECT) {\n                const records = selectionService.getSelectedItems() as Record[];\n                this.updateDataset(records);\n                this.provider.next(this.dataset);\n            }\n        });\n    }\n\n\n    // NetworkProvider interface\n\n    getData(context: NetworkContext) {\n        this.context = context;\n        this.updateDataset(this.selectionService.getSelectedItems() as Record[]);\n        this.provider.next(this.dataset);\n    }\n    \n    onDestroy() {\n        this.selectionSubscription?.unsubscribe();\n    }\n\n}\n    ","import {Injectable, OnDestroy, InjectionToken, Inject} from \"@angular/core\";\nimport {Subject} from \"rxjs\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {Action} from \"@sinequa/components/action\";\nimport {SearchService} from \"@sinequa/components/search\";\n\nexport enum SelectionEventType {\n    SELECT,\n    UNSELECT,\n    MOVE\n}\n\nexport interface SelectionEvent {\n    type: SelectionEventType;\n    records: Record[];\n    source?: string;\n}\n\nexport interface SelectionItem {\n    id: string;\n}\n\n/**\n * The storage mode allows to customize how the service stores records, \n * which enables different features:\n * - id: only store the id of a selected record (default)\n * - record: store the entire record\n * - a function that customize what is stored (at least the record id is required)\n */\nexport interface SelectionOptions {\n    resetOnNewResults: boolean;\n    resetOnNewQuery: boolean;\n    storage: \"id\" | \"record\" | ((record: Record) => SelectionItem);\n}\n\nexport const defaultSelectionOptions: SelectionOptions = {\n    resetOnNewResults: false,\n    resetOnNewQuery: true,\n    storage: \"id\"\n}\n\nexport const SELECTION_OPTIONS = new InjectionToken<SelectionOptions>(\"SELECTION_OPTIONS\");\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SelectionService implements OnDestroy {\n\n    protected readonly selectedRecords: SelectionItem[] = []; // currently selected items\n    public readonly selectionActions: Action[] = []; // Actions that other services can register onto this service\n\n    private _events = new Subject<SelectionEvent>();\n\n    public readonly selectedRecordsAction: Action;\n\n    constructor(\n        public searchService : SearchService,\n        @Inject(SELECTION_OPTIONS) public selectionOptions: SelectionOptions \n    ){\n\n        this.searchService.events.subscribe(event => {\n\n            if(!this.selectionOptions.resetOnNewResults && event.type === \"new-results\" && this.searchService.haveRecords){\n\n                const newSelectedRecords: Record[] = [];\n                if (this.searchService.results?.records) {\n                    for (const record of this.searchService.results.records) {\n                        const index = this.selectedRecords.findIndex(item => item.id === record.id);\n                        if (index !== -1 && !record.$selected) {\n                            record.$selected = true;    // Select previously selected records\n                            this.selectedRecords.splice(index, 1, record);\n                            newSelectedRecords.push(record);\n                        }\n                    }\n                }\n                if(newSelectedRecords.length > 0)   // Menus might need to be refreshed\n                    this._events.next({type: SelectionEventType.SELECT, records: newSelectedRecords, source: event.type});\n\n            }\n\n            if(this.selectionOptions.resetOnNewResults && event.type === \"new-results\") {\n                this.clearSelectedRecords(event.type);\n            }\n            \n            if(this.selectionOptions.resetOnNewQuery && event.type === \"new-query\") {\n                this.clearSelectedRecords(event.type);\n            }\n\n        });\n\n        this.selectedRecordsAction = this.buildSelectRecordsAction();\n        this.selectionActions.push(this.selectedRecordsAction);\n\n        this.events.subscribe({next: () => {\n            this.selectionActions.forEach(action => action.update());\n        }});\n\n    }\n\n    /**\n     * Emits an event on any (bulk or single) selection and unselection events\n     */\n    public get events() : Subject<SelectionEvent> {\n        return this._events;\n    }\n\n    ngOnDestroy(){\n        this._events.complete();\n    }\n\n    private getItem(record: Record): SelectionItem {\n        if(this.selectionOptions.storage === \"id\") {\n            return {id: record.id};\n        }\n        else if(this.selectionOptions.storage === \"record\") {\n            return record;\n        }\n        else {\n            return this.selectionOptions.storage(record);\n        }\n    }\n\n    /**\n     * Returns a copy of the list of selected records\n     */\n    public getSelectedItems(): SelectionItem[] {\n        return this.selectedRecords.slice(0);\n    }\n\n    /**\n     * Return the list of selected record ids\n     */\n    public getSelectedIds(): string[] {\n        return this.selectedRecords.map(r => r.id);\n    }\n\n    /**\n     * @returns true if at least one record is selected\n     */\n    public get haveSelectedRecords(): boolean {\n        return this.selectedRecords.length > 0;\n    }\n\n    public getSelectedCount(): number {\n        return this.selectedRecords.length;\n    }\n\n    /**\n     * @returns true if all records in the search results are selected\n     */\n    public get allRecordsSelected(): boolean {\n        if (!this.searchService.results || !this.searchService.results.records) {\n            return false;\n        }\n        for (const record of this.searchService.results.records) {\n            if (!record.$selected) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private selectCurrentRecords(source?: string) {\n        const newSelectedRecords: Record[] = [];\n        if (this.searchService.results && this.searchService.results.records) {\n            for (const record of this.searchService.results.records) {\n                if (!record.$selected) {\n                    this.selectedRecords.push(this.getItem(record));\n                    newSelectedRecords.push(record);\n                    record.$selected = true;\n                }\n            }\n        }\n        if(newSelectedRecords.length > 0)\n            this._events.next({type: SelectionEventType.SELECT, records: newSelectedRecords, source});\n    }\n\n\n    /**\n     * Toggles the selection of one record or all those in the results.\n     * Emits a SelectionEvent if a record is selected or unselected.\n     * @param record if provided, will toggle the selection of this record; if not will toggle all records in results\n     */\n    public toggleSelectedRecords(record?: Record, source?: string) {\n        if (!!record) {\n            const index = this.selectedRecords.findIndex(item => item.id === record.id);\n            if (index > -1) {\n                this.selectedRecords.splice(index, 1);\n                record.$selected = false;\n            }\n            else {\n                this.selectedRecords.push(this.getItem(record));\n                record.$selected = true;\n            }\n            // record might not be the one in the search service results (if passing a SelectionItem)\n            const ssRecord = this.searchService.getRecordFromId(record.id);\n            if(ssRecord) {\n                ssRecord.$selected = record.$selected;\n            }\n            this._events.next({type: record.$selected? SelectionEventType.UNSELECT : SelectionEventType.SELECT, records: [record], source});\n        }\n        else {\n            if (this.allRecordsSelected) {\n                this.clearSelectedRecords(source);\n            }\n            else {\n                this.selectCurrentRecords(source);\n            }\n        }\n    }\n\n    /**\n     * Moves a selected record to a different index;\n     * @param record \n     * @param newIndex \n     */\n    public moveSelectedRecord(record: Record, newIndex: number, source?: string) {\n        const i = this.selectedRecords.findIndex(r => r.id === record.id);\n        if(i === -1) {\n            throw new Error(`Record ${record.id} is not in the selected records`);\n        }\n        this.selectedRecords.splice(i, 1);\n        this.selectedRecords.splice(newIndex, 0, this.getItem(record));\n        this.events.next({type: SelectionEventType.MOVE, records: [record], source});\n    }\n\n    /**\n     * Unselect all selected records\n     * Emits a SelectionEvent\n     */\n    public clearSelectedRecords(source?: string) {\n        this.selectedRecords.splice(0);\n        const newUnselectedRecords: Record[] = [];\n        if (this.searchService.results && this.searchService.results.records) {\n            for (const record of this.searchService.results.records) {\n                if(record.$selected){\n                    record.$selected = false;\n                    newUnselectedRecords.push(record);\n                }\n            }\n        }\n        if(newUnselectedRecords.length > 0)\n            this._events.next({type: SelectionEventType.UNSELECT, records: newUnselectedRecords, source});\n    }\n\n    private buildSelectRecordsAction(): Action {\n        return new Action({\n            icon: \"far fa-square\",\n            text: \"msg#resultsSelector.selectDocuments\",\n            title: this.allRecordsSelected ? \"msg#resultsSelector.unselectDocumentsTitle\" : \"msg#resultsSelector.selectDocumentsTitle\",\n            messageParams: {values: {count: this.selectedRecords.length}},\n            action: (item, $event) => {\n                this.toggleSelectedRecords(undefined, \"multiple-selector\");\n            },\n            updater: (item) => {\n                item.icon = this.haveSelectedRecords ? \"far fa-check-square\" : \"far fa-square\";\n                item.title = this.allRecordsSelected ? \"msg#resultsSelector.unselectDocumentsTitle\" : \"msg#resultsSelector.selectDocumentsTitle\";\n                item.messageParams = {values: {count: this.selectedRecords.length}};\n            }\n        });\n    }\n}","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enAlerts from \"./en\";\nimport _frAlerts from \"./fr\";\nimport _deAlerts from \"./de\";\n\nconst enAlerts = Utils.merge({}, _enAlerts, enSearch, enModal);\nconst frAlerts = Utils.merge({}, _frAlerts, frSearch, frModal);\nconst deAlerts = Utils.merge({}, _deAlerts, deSearch, deModal);\n\nexport { enAlerts, frAlerts, deAlerts };\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {ValidationErrors} from \"@angular/forms\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\nimport {ValidationService} from \"./validation.service\";\n\n/**\n * A pipe to display the first error in a `ValidationErrors` map.\n */\n@Pipe({name: \"sqValidationError\", pure: false})\nexport class ValidationErrorPipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef,\n        protected validationService: ValidationService) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: ValidationErrors, params: any): void {\n        super.updateValue(key, params);\n        const text = this.validationService.getFirstErrorText(key);\n        const info = this.validationService.getFirstErrorInfo(key);\n        this.value = text ? this.intlService.formatMessage(text, {values: info}) : undefined;\n    }\n}\n","import { Component, ChangeDetectorRef } from \"@angular/core\";\nimport { ComponentWithLogin, LoginService } from \"@sinequa/core/login\";\nimport { BasketsService } from '@sinequa/components/baskets';\nimport { SavedQueriesService, RecentQueriesService, RecentDocumentsService } from '@sinequa/components/saved-queries';\nimport { AlertsService } from '@sinequa/components/alerts';\nimport { LabelsService } from '@sinequa/components/labels';\nimport { UserPreferences } from '@sinequa/components/user-settings';\nimport { SelectionService } from '@sinequa/components/selection';\nimport { AppService } from '@sinequa/core/app-utils';\nimport { FEATURES } from '../config';\n\n@Component({\n    selector: \"app-root\",\n    templateUrl: \"./app.component.html\"\n})\nexport class AppComponent extends ComponentWithLogin {\n\n\n    constructor(\n        // These 2 services are required by the constructor of ComponentWithLogin\n        loginService: LoginService,\n        cdRef: ChangeDetectorRef,\n\n        // Services are instantiated by the app component,\n        // to guarantee they are instantiated in a consistent order,\n        // regardless of the entry route.\n        // The order below impacts the order of the actions in the selection menu.\n        prefs: UserPreferences,\n        public savedQueriesService: SavedQueriesService,\n        public basketsService: BasketsService,\n        public alertsService: AlertsService,\n        public labelsService: LabelsService,\n        recentQueriesService: RecentQueriesService,\n        RecentDocumentsService: RecentDocumentsService,\n        public selectionService: SelectionService,\n        public appService: AppService\n        ){\n        super(loginService, cdRef);\n\n    }\n\n    initDone: boolean = false;\n    /**\n     * Initialize the list of actions in the selection service.\n     * This method may be called multiple times, before the login is actually complete,\n     * hence the initDone and this.appService.app test\n     */\n    onLoginComplete(){\n\n        if(!this.initDone && this.appService.app){\n\n            this.initDone = true;\n\n            let features = FEATURES;\n            // The local config (config.ts) can be overriden by server-side config\n            if(this.appService.app && this.appService.app.data && this.appService.app.data.features){\n                features = <string[]> this.appService.app.data.features;\n            }\n\n            features.forEach(feature => {\n                switch(feature) {\n                    case 'saved-queries': {\n                        this.selectionService.selectionActions.push(this.savedQueriesService.selectedRecordsAction);\n                        break;\n                    }\n                    case 'baskets': {\n                        this.basketsService.selectedRecordsAction.icon = \"fas fa-inbox\"; // Overriding the baskets icon (hard coded in the service)\n                        this.selectionService.selectionActions.push(this.basketsService.selectedRecordsAction);\n                        break;\n                    }\n                    case 'labels': {\n                        const action = this.labelsService.buildSelectionAction();\n                        if(action){\n                            this.selectionService.selectionActions.push(action);\n                        }\n                        break;\n                    }\n                }\n            });\n\n        }\n    }\n\n\n}","<router-outlet></router-outlet>\n<sq-notifications></sq-notifications>","export default {\n    \"googlemaps\": {\n        \"filterArea\": \"Chercher les documents dans cette zone\"\n    },\n};\n","export default {\n    \"money\": {\n        \"inspect\": \"Inspecter ce document\",\n        \"filter\": \"Filtrer les résultats de recherche contenant ce montant d'argent\",\n        \"timeline\": \"Timeline de montants d'argent\",\n        \"cloud\": \"Nuage de montants d'argent\"\n    },\n};\n","import { Component, forwardRef, Input, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Utils, Keys } from \"@sinequa/core/base\";\nimport { ValueItem } from '@sinequa/core/app-utils';\n\n@Component({\n    selector: \"sq-select\",\n    templateUrl: \"./select.html\",\n    providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        multi: true,\n        useExisting: forwardRef(() => BsSelectComponent),\n        }]\n})\nexport class BsSelectComponent implements ControlValueAccessor, OnInit {\n    @Input() items: ValueItem[];\n    @Input() disabled: boolean;\n    @Input() multiple: boolean;\n    @ViewChild(\"button\", {static: false}) buttonElement: ElementRef;\n    opened: boolean = false;\n    isOpen: boolean = false;\n    activeItem: number = -1;\n    private cancelBlur: boolean = false; // For IE which takes focus when clicking on dropdown scrollbar despite the mousedown handling\n    public names: string[];\n    private selectedItems: number[]; //stores indices of selected items\n    private onChangeCallback: (_: any) => void = () => {};\n\n    ngOnInit() {\n        this.clearSelected();\n        if (this.items.length === 0) {\n          this.disabled = false;\n        }\n        this.names = [];\n        this.items.forEach(item => this.names.push(item.display!));\n    }\n\n    setOpen(value: boolean): void {\n        if (!this.opened) {\n            if (this.disabled || !value) {\n                return;\n            }\n            this.opened = true;\n        }\n        this.isOpen = value;\n        if (!value) {\n            this.activeItem = -1;\n        }\n    }\n\n    mousedown(event: Event): void {\n        event.preventDefault();\n        this.cancelBlur = true;\n        Utils.delay().then(() => this.cancelBlur = false);\n    }\n\n    blur(event: FocusEvent): void {\n        if (this.cancelBlur) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            Utils.delay().then(() => {\n                this.buttonElement.nativeElement.focus();\n            });\n            return;\n        }\n        this.setOpen(false);\n    }\n\n    toggleOpen(): void {\n        if (this.disabled) {\n            return;\n        }\n        this.setOpen(!this.isOpen);\n    }\n\n    keydown($event: KeyboardEvent): void {\n        if (this.disabled) {\n            return;\n        }\n        // arrow down\n        if ($event.keyCode === Keys.down) {\n            if (!this.isOpen) {\n                this.setOpen(true);\n            }\n            this.activeItem++;\n            if (this.activeItem >= this.items.length) {\n                this.activeItem = 0;\n            }\n            $event.preventDefault();\n            $event.stopPropagation();\n        }\n        // arrow up\n        else if ($event.keyCode === Keys.up) {\n            if (!this.isOpen) {\n                this.setOpen(true);\n            }\n            this.activeItem--;\n            if (this.activeItem < 0) {\n                this.activeItem = this.items.length - 1;\n            }\n            $event.preventDefault();\n            $event.stopPropagation();\n        }\n        // enter or space\n        else if (($event.keyCode === Keys.enter || $event.keyCode === Keys.space) &&\n            this.activeItem >= 0 && this.activeItem < this.items.length) {\n            this.toggleItemSelected(this.activeItem);\n            $event.preventDefault();\n            $event.stopPropagation();\n        }\n        // escape\n        else if ($event.keyCode === Keys.esc && this.isOpen) {\n            this.setOpen(false);\n            $event.preventDefault();\n            $event.stopPropagation();\n        }\n    }\n\n    private clearSelected() {\n        this.selectedItems = [];\n    }\n\n    private countSelected(): number {\n        return this.selectedItems.length;\n    }\n\n    isItemSelected(itemIndex: number) : boolean {\n        return this.selectedItems.includes(itemIndex);\n    }\n\n    toggleItemSelected(itemIndex: number): void {\n        const idx: number = this.selectedItems.indexOf(itemIndex);\n        // Remove item if it was already selected\n        if (idx > -1) {\n            this.selectedItems.splice(idx, 1);\n        }\n        // regular case: just add the index, and update the active item if it exists\n        else if (this.multiple) {\n            this.selectedItems.push(itemIndex);\n            if (this.activeItem >= 0)\n                this.activeItem = itemIndex;\n        }\n        // single-item case: ensure there is only one selected item, and close the menu\n        else {\n            this.selectedItems = [itemIndex];\n            this.setOpen(false);\n        }\n        this.triggerOnChange();\n    }\n\n    /* Template properties */\n    get buttonTitleMessageParams(): any {\n        return {\n            values: {\n                count: this.countSelected()\n            }\n        };\n    }\n\n    get buttonTitle(): string {\n        const selectCount = this.countSelected();\n\n        if (selectCount === 0) {\n            return \"msg#advanced.select.noItems\";\n        }\n        if (!this.multiple) {\n            return this.items[this.selectedItems[0]].display!;\n        }\n        if (selectCount === this.items.length) {\n            return \"msg#advanced.select.allItems\";\n        }\n\n        //Get list of items names corresponding to selected indices\n        return this.selectedItems\n            .map(index => this.items[index].display!)\n            .sort()\n            .join(\", \");\n    }\n\n    get itemListHeight(): string {\n        // use 10 as default\n        return (10 * 4) + \"ex\";\n    }\n    /* End Template properties */\n\n    /* Change event */\n    private triggerOnChange() {\n        // Gather selected item values\n        let values: ValueItem | ValueItem[] | undefined;\n        // We can not pass an empty array, when empty use undefined instead\n        if (this.selectedItems.length === 0) {\n            values = undefined;\n        }\n        // return an array if multiple\n        else if (this.multiple) {\n            values = this.selectedItems.map(index => this.items[index]);\n        }\n        // directly pass the value if not multiple\n        else {\n            values = this.items[this.selectedItems[0]];\n        }\n\n        this.onChangeCallback(values);\n    }\n    /* End Change event */\n\n    /* ControlValueAccessor methods */\n    writeValue(value: ValueItem | ValueItem[]): void {\n        this.clearSelected();\n        if (value) {\n            // the value may not be an array if this select is not multiple\n            const asArray = Array.isArray(value) ? value : [value];\n            //Mark items as selected based on input values\n            this.items.forEach((item, index) => {\n                if (asArray.find((el) => el.value === item.value) && index !== undefined) {\n                    this.selectedItems.push(index);\n                }\n            });\n        }\n    }\n\n    registerOnChange(fn: any): void {\n        this.onChangeCallback = fn;\n    }\n\n    registerOnTouched(fn: any): void {\n    }\n    /* End ControlValueAccessor methods */\n}\n","<div class=\"dropdown\">\n    <!-- item-list toggle -->\n    <button #button class=\"btn btn-light {{disabled ? ' disabled' : ''}} dropdown-toggle form-control\" data-toggle=\"dropdown\" type=\"button\" role=\"button\" (click)=\"toggleOpen()\" (blur)=\"blur($event)\" (keydown)=\"keydown($event)\" tabindex=\"0\"><span class=\"sq-button-text\">{{buttonTitle | sqMessage:buttonTitleMessageParams}}</span></button>\n    <!-- item-list view -->\n    <div *ngIf=\"opened\" [hidden]=\"!isOpen\" class=\"dropdown-menu dropdown-menu-left show\" [style.max-height]=\"itemListHeight\" role=\"combobox\" (mousedown)=\"mousedown($event)\">\n        <!-- items -->\n        <a *ngFor=\"let itemName of names; let i = index\" class=\"dropdown-item{{activeItem === i ? ' active' : ''}}\"\n            (click)=\"toggleItemSelected(i)\" (keydown)=\"keydown($event)\" tabindex=\"-1\"\n            [sqScrollIntoView]=\"{active: i === activeItem, first: i === 0}\">\n            <span class=\"fas fa-check {{isItemSelected(i) ? '' : ' invisible'}} left\"></span>\n            <span>{{itemName}}</span>\n        </a>\n    </div>\n</div>\n","import {Component, Input, OnInit, AfterViewInit, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef} from \"@angular/core\";\nimport {Action} from \"../../action\";\nimport {UIService} from \"@sinequa/components/utils\";\nimport {DropdownMenuOptions} from \"../dropdown-menu/dropdown-menu\";\n\n\nexport interface ActionItemOptions {\n    item: Action;\n    size?: string;\n    style?: string;\n    autoAdjust?: boolean;\n    autoAdjustBreakpoint?: string;\n    inMenu: boolean;\n    rightAligned?: boolean;\n}\n\n@Component({\n    selector: \"[sq-action-item]\",\n    templateUrl: \"./action-item.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsActionItem implements OnInit, AfterViewInit {\n    @Input(\"sq-action-item\") options: ActionItemOptions;\n    @Input() collapseBreakpoint: string = \"md\";\n    inListItem: boolean;\n    dropdownButton: Element;\n    dropdownListItem: Element;\n    autoAdjustBreakpoint?: string;\n    showDropdown: boolean;\n\n    constructor(\n        private uiService: UIService,\n        private elementRef: ElementRef,\n        private cdRef: ChangeDetectorRef) {\n    }\n\n    get haveItem(): boolean {\n        return !!this.options.item;\n    }\n\n    get isVisible(): boolean {\n        return this.haveItem && !this.options.item.hidden;\n    }\n\n    get hasAction(): boolean {\n        return this.haveItem && !!this.options.item.action;\n    }\n\n    get isDropdownButton(): boolean {\n        return this.isVisible && !this.inListItem && this.options.item.hasChildren;\n    }\n\n    get isButton(): boolean {\n        return this.isVisible && !this.inListItem && !this.options.item.hasChildren && this.hasAction;\n    }\n\n    get isDropdownListItem(): boolean {\n        return this.isVisible && this.inListItem && this.options.item.hasChildren;\n    }\n\n    get isListItem(): boolean {\n        return this.isVisible && this.inListItem && !this.options.item.hasChildren && this.hasAction;\n    }\n\n    get haveSpace(): boolean {\n        if (this.uiService.screenSizeIsGreaterOrEqual(this.autoAdjustBreakpoint)) {\n            return true;\n        }\n        if (this.inListItem && this.uiService.screenSizeIsLess(this.collapseBreakpoint)) {\n            return true;\n        }\n        return false;\n    }\n\n    get haveIcon(): boolean {\n        return !!this.options.item.icon || !!this.options.item.iconAfter;\n    }\n\n    get itemText(): string {\n        if (!this.haveItem) {\n            return \"\";\n        }\n        const text = this.options.item.text || \"\";\n        if (this.options.autoAdjust && this.haveIcon) {\n            return this.haveSpace ? text : \"\";\n        }\n        else {\n            return text;\n        }\n    }\n\n    get itemTitle(): string {\n        if (!this.haveItem) {\n            return \"\";\n        }\n        const text = this.options.item.text || \"\";\n        const title = this.options.item.title || \"\";\n        if (this.options.autoAdjust && this.haveIcon) {\n            return this.haveSpace ? (title !== text ? title : \"\") : title || text;\n        }\n        else {\n            return title;\n        }\n    }\n\n    get itemMessageParams(): any {\n        if (!this.haveItem) {\n            return null;\n        }\n        return this.options.item.messageParams;\n    }\n\n    get sizeClass(): string {\n        return this.options.size ? `btn-${this.options.size}` : \"\";\n    }\n\n    get styleClass(): string {\n        return this.options.style ? `btn-${this.options.style}` : \"btn-light\";\n    }\n    \n    get dropdownMenuOptions(): DropdownMenuOptions {\n        return ({...this.options, showMenuClass: 'show'});\n    }\n\n    ngAfterViewInit() {\n        this.dropdownButton = this.elementRef.nativeElement.querySelector(\"div.dropdown\");\n        this.dropdownListItem = this.elementRef.nativeElement.querySelector(\"li.dropdown-toggle\");\n    }\n\n    ngOnInit() {\n        this.inListItem = (this.elementRef.nativeElement.nodeName === \"LI\");\n        if (this.options.item.init) {\n            this.options.item.init(this.options.item);\n        }\n        this.autoAdjustBreakpoint = this.options.autoAdjustBreakpoint;\n        this.uiService.resizeEvent.subscribe(e => this.cdRef.detectChanges());\n    }\n\n    ngOnDestroy() {\n        if (this.options.item.destroy) {\n            this.options.item.destroy(this.options.item);\n        }\n    }\n\n    click(event: UIEvent) {\n        if (!this.options.item.disabled) {\n            if (this.options.item.action) {\n                this.options.item.action(this.options.item, event);\n            }\n            if (this.options.item.toggle && (this.isDropdownButton || this.isDropdownListItem)) {\n                const openElement = this.dropdownButton || (this.dropdownListItem ? this.dropdownListItem.parentElement : null);\n                if (openElement) {\n                    this.options.item.toggle(this.options.item, !openElement.classList.contains(\"open\"));\n                }\n            }\n        }\n    }\n\n    touchstart() {\n        this.showDropdown = true;\n    }\n\n    mousedown() {\n        this.showDropdown = true;\n    }\n\n    focusin() {\n        this.showDropdown = true;\n    }\n}","<!-- dropdown button -->\n<ng-container *ngIf=\"isDropdownButton\">\n    <button *ngIf=\"hasAction\" class=\"btn {{styleClass}} {{sizeClass}} {{options.item.disabled ? 'disabled' : ''}}\" type=\"button\" (click)=\"click($event)\" sqTooltip=\"{{itemTitle | sqMessage:itemMessageParams}}\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\">\n        <sq-action-item-content [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n    </button>\n    <ng-container *ngIf=\"options.item.flattenable && options.item.children?.length === 1; then flattened else unflattened\"></ng-container>\n    <ng-template #flattened>\n        <div *ngIf=\"!hasAction\" class=\"btn-text {{sizeClass}}\">\n            <sq-action-item-content *ngIf=\"!hasAction\" [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n        </div>\n    </ng-template>\n    <ng-template #unflattened>\n        <button class=\"btn {{styleClass}} dropdown-toggle {{sizeClass}}\" type=\"button\" data-toggle=\"dropdown\" sqTooltip=\"{{itemTitle | sqMessage:itemMessageParams}}\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\" (touchstart)=\"touchstart()\" (mousedown)=\"mousedown()\" (focusin)=\"focusin()\">\n            <sq-action-item-content *ngIf=\"!hasAction\" [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n        </button>\n        <ul *ngIf=\"showDropdown\" [sq-dropdown-menu]=\"dropdownMenuOptions\"></ul>\n    </ng-template>\n</ng-container>\n<!-- button -->\n<sq-action-item-content *ngIf=\"isButton\" [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n<!-- dropdown list item -->\n<ng-container *ngIf=\"isDropdownListItem\">\n    <a href=\"javascript:void(0)\" (click)=\"click($event)\" class=\"{{options.inMenu ? 'nav-link' : 'dropdown-item'}} dropdown-toggle {{options.item.disabled ? 'disabled' : ''}}\" data-toggle=\"dropdown\" role=\"button\" title=\"{{itemTitle | sqMessage:itemMessageParams}}\" aria-haspopup=\"true\" aria-expanded=\"false\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\">\n        <sq-action-item-content [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n    </a>\n    <ul [sq-dropdown-menu]=\"dropdownMenuOptions\"></ul>   \n</ng-container>\n\n<!-- list item -->\n<a *ngIf=\"isListItem\" href=\"javascript:void(0)\" class=\"{{options.inMenu ? 'nav-link' : 'dropdown-item'}} {{options.item.disabled ? 'disabled' : ''}}\" role=\"button\" (click)=\"click($event)\" title=\"{{itemTitle | sqMessage:itemMessageParams}}\" [attr.aria-label]=\"itemTitle | sqMessage:itemMessageParams\">\n    <sq-action-item-content [item]=\"options.item\" [text]=\"itemText\"></sq-action-item-content>\n</a>\n","import {Injectable, InjectionToken, Inject, Optional, OnDestroy} from \"@angular/core\";\nimport {Router, NavigationStart, NavigationEnd, Params} from \"@angular/router\";\nimport {Subject, BehaviorSubject, Observable, Subscription, of, throwError} from \"rxjs\";\nimport {map, catchError  } from \"rxjs/operators\";\nimport {QueryWebService, AuditWebService, CCQuery, QueryIntentData, Results, Record, Tab, DidYouMeanKind,\n    QueryIntentAction, QueryIntent, QueryAnalysis, IMulti, CCTab,\n    AuditEvents, AuditEventType, AuditEvent} from \"@sinequa/core/web-services\";\nimport {AppService, FormatService, ValueItem, Query, ExprParser, Expr, ExprBuilder} from \"@sinequa/core/app-utils\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {LoginService} from \"@sinequa/core/login\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Breadcrumbs, BreadcrumbsItem} from './breadcrumbs';\n\nexport interface SearchOptions {\n    routes?: string[];\n    skipSearchRoutes?: string[];\n    homeRoute?: string;\n    deactivateRouting?: boolean;\n    preventQueryNameChanges?: boolean;\n}\n\nexport const SEARCH_OPTIONS = new InjectionToken<SearchOptions>(\"SEARCH_OPTIONS\");\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class SearchService implements OnDestroy {\n    protected _query: Query | undefined;\n    queryStringParams: Params = {};\n    results: Results | undefined;\n    breadcrumbs: Breadcrumbs | undefined;\n    searchActive: boolean;\n\n    protected loginSubscription: Subscription;\n    protected routerSubscription: Subscription;\n    protected appSubscription: Subscription;\n    protected fetchingLoadMore = false;\n    protected _events = new Subject<SearchService.Events>();\n    protected _queryStream = new BehaviorSubject<Query | undefined>(undefined);\n    protected _resultsStream = new BehaviorSubject<Results | undefined>(undefined);\n\n    constructor(\n        @Optional() @Inject(SEARCH_OPTIONS) protected options: SearchOptions,\n        protected router: Router,\n        protected appService: AppService,\n        protected queryService: QueryWebService,\n        protected loginService: LoginService,\n        protected intlService: IntlService,\n        protected formatService: FormatService,\n        protected auditService: AuditWebService,\n        protected notificationsService: NotificationsService,\n        protected exprBuilder: ExprBuilder) {\n\n        if (!this.options) {\n            this.options = {\n                routes: [\"search\"]\n            };\n        }\n\n        this.results = undefined;\n        this.breadcrumbs = undefined;\n\n        this.loginSubscription = this.loginService.events.subscribe(\n            (value) => {\n                if (value.type === \"session-changed\") {\n                    this.handleLogin();\n                }\n            });\n        this.routerSubscription = this.router.events.subscribe(\n            (event) => {\n                if (event instanceof NavigationStart) {\n                    // Restore state on back/forward until this issue is fixed: https://github.com/angular/angular/issues/28108\n                    const currentNavigation = this.router.getCurrentNavigation();\n                    if (currentNavigation && event.navigationTrigger === \"popstate\" &&\n                        !currentNavigation.extras.state && event.restoredState) {\n                        currentNavigation.extras.state = event.restoredState;\n                    }\n                }\n                else if (event instanceof NavigationEnd) {\n                    this.handleNavigation();\n                }\n            });\n        this.appSubscription = this.appService.events.subscribe(\n            (event) => {\n                if (event.type === \"query-changed\") {\n                    if (this._query && (!this.appService.ccquery || (this._query.name !== this.appService.ccquery.name))) {\n                        this.clearQuery();\n                    }\n                }\n            });\n    }\n\n    ngOnDestroy() {\n        this.loginSubscription.unsubscribe();\n        this.routerSubscription.unsubscribe();\n        this.appSubscription.unsubscribe();\n        this._events.complete();\n        this._queryStream.complete();\n        this._resultsStream.complete();\n    }\n\n    get events(): Observable<SearchService.Events> {\n        return this._events;\n    }\n\n    get queryStream(): Observable<Query | undefined> {\n        return this._queryStream;\n    }\n\n    get resultsStream(): Observable<Results | undefined> {\n        return this._resultsStream.asObservable();\n    }\n\n    getTabConfig(name: string): CCTab | undefined {\n        if (this.appService.ccquery && this.appService.ccquery.tabSearch && this.appService.ccquery.tabSearch.tabs) {\n            return this.appService.ccquery.tabSearch.tabs.find(t => Utils.eqNC(t.name, name));\n        }\n        return undefined;\n    }\n\n    get query(): Query {\n        if (!this._query) {\n            this._query = this.makeQuery();\n            this._events.next({type: \"new-query\", query: this._query});\n        }\n        return this._query;\n    }\n\n    public setQuery(query: Query | undefined, newQuery = true) {\n        if (query === this._query) {\n            return;\n        }\n        this._query = query;\n        if (this._query) {\n            let ccquery: CCQuery | undefined;\n            if (this.options.preventQueryNameChanges) {\n                ccquery = this.appService.ccquery || this.appService.defaultCCQuery;\n            }\n            else {\n                ccquery = this.appService.getCCQuery(this._query.name);\n                if (!ccquery) {\n                    console.warn(`Query '${this._query.name}' not found`);\n                    ccquery = this.appService.defaultCCQuery;\n                }\n            }\n            if (ccquery) {\n                this._query.name = ccquery.name;\n                if (this.appService.ccquery !== ccquery) {\n                    this.appService.ccquery = ccquery;\n                }\n            }\n        }\n        if (newQuery) {\n            this._events.next({type: \"new-query\", query: this._query});\n        }\n    }\n\n    public clearQuery() {\n        this.setQuery(undefined);\n    }\n\n    public updateBreadcrumbs(results: Results | undefined, options: SearchService.SetResultsOptions) {\n        if (!results) {\n            this.breadcrumbs = undefined;\n            return;\n        }\n        if (!this.breadcrumbs || (!options.resuseBreadcrumbs && !options.advanced)) {\n            this.breadcrumbs = Breadcrumbs.create(this.appService, this, this.query);\n        }\n        else if (options.advanced) {\n            this.breadcrumbs.update(this.query);\n        }\n    }\n\n    private _setResults(results: Results | undefined, options: SearchService.SetResultsOptions = {}) {\n        if (results === this.results) {\n            return;\n        }\n        this._events.next({type: \"before-new-results\", results});\n        this.results = results;\n        this.treatQueryIntents(results);\n        this.updateBreadcrumbs(results, options);\n        if (this.results) {\n            if (this.results.tab) {\n                this.query.tab = this.results.tab;\n            }\n            if (this.results.attributes && this.results.attributes.queryid) {\n                this.query.queryId = this.results.attributes.queryid;\n            }\n        }\n        this._events.next({type: \"new-results\", results: this.results});\n        this._resultsStream.next(this.results);\n    }\n\n    public setResults(results: Results) {\n        return this._setResults(results);\n    }\n\n    // TODO: queryintents in their own service ?\n\n    private treatQueryIntents (results: Results | undefined) {\n        if (results && results.queryAnalysis && results.queryIntents) {\n            const queryIntents = results.queryIntents;\n            for (const intent of queryIntents) {\n                if (intent.actions) {\n                    for (const action of intent.actions) {\n                        const event: SearchService.ProcessQueryIntentActionEvent = {type: \"process-query-intent-action\", action: action, intent: intent, analysis: results.queryAnalysis};\n                        this._events.next(event);\n                        if (!event.actionProcessed) {\n                            if (!!action.data) {\n                                switch (action.type) {\n                                    case \"tab\":\n                                        if (results.queryAnalysis.initial && this.query &&\n                                            !Utils.eqNC(this.query.tab || \"\", action.data)) {\n                                            this.selectTab(action.data, {skipLocationChange: true});\n                                        }\n                                        break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    get haveRecords(): boolean {\n        return !!this.results && !!this.results.records && this.results.records.length > 0;\n    }\n\n    get rowCount(): number {\n        return (!!this.results && this.results.rowCount) ? this.results.rowCount : 0;\n    }\n\n    get totalRowCount(): number {\n        return (!!this.results && this.results.totalRowCount) ? this.results.totalRowCount : 0;\n    }\n\n    get pageSize(): number {\n        if (this.query && this.query.pageSize) {\n            return this.query.pageSize;\n        }\n        if (this.appService.ccquery && this.appService.ccquery.pageSize) {\n            return this.appService.ccquery.pageSize;\n        }\n        return SearchService.DefaultPageSize;\n    }\n\n    get page(): number {\n        if (!this.results) {\n            return 1;\n        }\n        return this.results.page;\n    }\n\n    get pageCount(): number {\n        if (!this.results || !this.results.rowCount) {\n            return 0;\n        }\n        return Math.ceil(this.results.rowCount / this.results.pageSize);\n    }\n\n    makeQuery(recentQuery?: Query): Query {\n        const ccquery = this.appService.ccquery;\n        const query = new Query(ccquery ? ccquery.name : \"_unknown\");\n        if(recentQuery){\n            Object.assign(query, recentQuery);\n        }\n        this._events.next({type: \"make-query\", query: query});\n        return query;\n    }\n\n    protected makeAuditEvent(event: AuditEvent): AuditEvent {\n        this._events.next({type: \"make-audit-event\", event: event});\n        return event;\n    }\n\n    selectBreadcrumbsItem(item: BreadcrumbsItem) {\n        if (this.breadcrumbs) {\n            const query = this.breadcrumbs.selectItem(item);\n            if (query) {\n                this.setQuery(query, false);\n                this.search({reuseBreadcrumbs: true}); // audit?\n            }\n        }\n    }\n\n    removeBreadcrumbsItem(item: BreadcrumbsItem) {\n        if (this.breadcrumbs) {\n            const next = this.breadcrumbs.removeItem(item);\n            if (this.isEmptySearch(this.breadcrumbs.query)) {\n                this.clear();\n                return;\n            }\n            if (next) {\n                this.selectBreadcrumbsItem(next);\n            }\n        }\n    }\n\n    removeSelect(index: number) {\n        if (this.breadcrumbs) {\n            const item = this.breadcrumbs.items[index + 1];\n            this.removeBreadcrumbsItem(item);\n        }\n    }\n\n    removeText() {\n        if (this.breadcrumbs) {\n            const item = this.breadcrumbs.items[0];\n            this.removeBreadcrumbsItem(item);\n        }\n    }\n\n    clear(navigate = true, path?: string) {\n        this.clearQuery();\n        path = path || this.options.homeRoute;\n        this._setResults(undefined);\n        this._events.next({type: \"clear\", path});\n        if (navigate) {\n            this.navigate({path: path || this.options.homeRoute});\n        }\n    }\n\n    home(path = this.options.homeRoute) {\n        this.clear(true, path);\n    }\n\n    protected makeQueryIntentData(queryIntentData: QueryIntentData): QueryIntentData {\n        this._events.next({type: \"make-query-intent-data\", intentData: queryIntentData});\n        return queryIntentData;\n    }\n\n    isEmptySearchIgnoreSelects(query: Query | undefined): boolean {\n        if (!query) {\n            return true;\n        }\n        if (!query.action || query.action === \"search\") {\n            // Test isFirstPage\n            if (query.isFirstPage) {\n                return false;\n            }\n            // Test empty text\n            if (query.text && Utils.trim(query.text)) {\n                return false;\n            }\n            // Test basket\n            if (query.basket) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEmptySearch(query: Query | undefined): boolean {\n        if (!query) {\n            return true;\n        }\n        if (!query.action || query.action === \"search\") {\n            if (!this.isEmptySearchIgnoreSelects(query)) {\n                return false;\n            }\n            // Test no facet selection\n            if (query.select && query.select.length > 0) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    checkEmptySearch(queries: Query | Query[]): boolean {\n        if (this.appService.ccquery && !this.appService.ccquery.allowEmptySearch) {\n            if (!Utils.isArray(queries)) {\n                queries = [queries];\n            }\n            for (const query of queries) {\n                if (this.isEmptySearch(query)) {\n                    this.notificationsService.info(\"msg#search.emptySearchNotification\");\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    getResults(\n        query: Query, auditEvents?: AuditEvents,\n        options: SearchService.GetResultsOptions = {}): Observable<Results> {\n        if (!this.checkEmptySearch(query)) {\n            return throwError(\"empty search\");\n        }\n        if (!options.searchInactive) {\n            this.searchActive = true;\n        }\n        const tab = this.getCurrentTab();\n        return this.queryService.getResults(query, auditEvents,\n            this.makeQueryIntentData({\n                tab: !!tab ? tab.name : undefined,\n                queryIntents: options.queryIntents,\n                queryAnalysis: options.queryAnalysis\n            })\n        ).pipe(\n            map((results) => {\n                this.searchActive = false;\n                return results;\n            })\n        );\n    }\n\n    getMultipleResults(queries: Query[], auditEvents?: AuditEvents): Observable<IMulti<Results>> {\n        if (!this.checkEmptySearch(queries)) {\n            return of({results: []});\n        }\n        return this.queryService.getMultipleResults(queries, auditEvents);\n    }\n\n    navigate(options?: SearchService.NavigationOptions, audit?: AuditEvents): Promise<boolean> {\n        if (!options) {\n            options = {};\n        }\n        if (!options.analyzeQueryText && this.results) {\n            options.queryIntents = this.results.queryIntents;\n            options.queryAnalysis = this.results.queryAnalysis;\n        }\n        if (!this.routingActive) {\n            this.handleNavigation(options, audit);\n            return Promise.resolve(true);\n        }\n        else {\n            // Save currentPath and currentSearch\n            let url = Utils.makeURL(this.router.url);\n            const currentPath = url.pathname;\n            url.searchParams.delete(\"$refresh\");\n            const currentSearch = decodeURIComponent(url.search);\n            // Set up queryParams and add current query\n            const queryParams = Utils.copy(this.queryStringParams);\n            if (this._query) {\n                queryParams.query = this._query.toJsonForQueryString();\n            }\n            // Set up history state\n            const state: SearchService.HistoryState = {\n                audit,\n                navigationOptions: options\n            };\n            const extras = {\n                queryParams,\n                state,\n                skipLocationChange: options.skipLocationChange\n            };\n            // Calculate new search\n            let path = options.path;\n            if (!path) {\n                path = currentPath;\n            }\n            url = Utils.makeURL(path);\n            path = url.pathname; // normalized\n            for (const key of Object.keys(queryParams)) {\n                url.searchParams.set(key, queryParams[key]);\n            }\n            const search = decodeURIComponent(url.search);\n            // If path and search are both the same as current then force navigation (without adding to history)\n            if (Utils.eq(currentPath, path) && Utils.eq(currentSearch, search)) {\n                // We want to force the navigation so that the query will be processed\n                extras.queryParams.$refresh = Utils.now.getTime();\n                // But don't update the browser url\n                extras.skipLocationChange = true;\n            }\n            return this.router.navigate([path], extras);\n        }\n    }\n\n    protected getHistoryState(): SearchService.HistoryState {\n        const navigation = this.router.getCurrentNavigation();\n        if (navigation) {\n            return navigation.extras && navigation.extras.state || {};\n        }\n        return window.history.state || {};\n    }\n\n    public isSearchRouteActive(): boolean {\n        const url = Utils.makeURL(this.router.url);\n        return this.isSearchRoute(url.pathname);\n    }\n\n    protected isSearchRoute(pathname: string): boolean {\n        return this.checkSearchRoute(pathname, this.options.routes);\n    }\n\n    protected isSkipSearchRoute(pathname: string): boolean {\n        return this.checkSearchRoute(pathname, this.options.skipSearchRoutes);\n    }\n\n    private checkSearchRoute(pathname: string, routes: string[] | undefined): boolean {\n        if (routes) {\n            for (const route of routes) {\n                if (Utils.endsWith(pathname, Utils.addUrl(\"/\", route))) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    public getQueryFromUrl(): Query | undefined {\n        let query: Query | undefined;\n        const url = Utils.makeURL(this.router.url);\n        if (this.isSearchRoute(url.pathname)) {\n            const jquery = url.searchParams.get(\"query\");\n            if (jquery) {\n                try {\n                    query = this.makeQuery().fromJson(jquery);\n                }\n                catch {}\n            }\n        }\n        return query;\n    }\n\n    protected ensureQueryFromUrl(): Query | undefined {\n        const query = this.getQueryFromUrl();\n        if (!query) {\n            this.clear(false);\n            return undefined;\n        }\n        else {\n            // The url query should be the same as the current query on SearchService unless\n            // it's the initial navigation or if the url is changed manually.\n            // In any case, we always set the query from the url. We only send a new-query\n            // event if the current query is empty so that we don't systematically create a\n            // new query \"session\" (ml-audit)\n            this.setQuery(query, !this._query);\n            return query;\n        }\n    }\n\n    protected handleLogin(): Promise<boolean> {\n        if (!this.loginService.complete) {\n            return Promise.resolve(false);\n        }\n        if (!!this.ensureQueryFromUrl()) {\n            return this.navigate();\n        }\n        else {\n            return Promise.resolve(true);\n        }\n    }\n\n    get routingActive(): boolean {\n        return !this.options.deactivateRouting;\n    }\n\n    set routingActive(value: boolean) {\n        this.options.deactivateRouting = !value;\n    }\n\n    protected makeAuditEventFromCurrentQuery(): AuditEvent | undefined {\n        const lastSelect = this.query.lastSelect();\n        if (lastSelect) {\n            const lastExpr = this.appService.parseExpr(lastSelect.expression);\n            if (lastExpr instanceof Expr) {\n                if (lastExpr.field === \"refine\") {\n                    return this.makeAuditEvent({\n                        type: AuditEventType.Search_Refine,\n                        detail: {\n                            text: lastExpr.value,\n                            itembox: lastSelect.facet,\n                            \"from-result-id\": !!this.results ? this.results.id : null\n                        }\n                    });\n                }\n                else {\n                    return this.makeAuditEvent({\n                        type: AuditEventType.Search_Select_Item,\n                        detail: {\n                            item: lastSelect as any,\n                            itembox: lastSelect.facet,\n                            itemcolumn: lastExpr.field,\n                            isitemexclude: lastExpr.not,\n                            \"from-result-id\": !!this.results ? this.results.id : null\n                        }\n                    });\n                }\n            }\n        }\n        else {\n            if (this.query.basket) {\n                return this.makeAuditEvent({\n                    type: AuditEventType.Basket_Open,\n                    detail: {\n                        basket: this.query.basket\n                    }\n                });\n            }\n            else {\n                return this.makeAuditEvent({\n                    type: AuditEventType.Search_Text,\n                    detail: {\n                        text: this.query.text,\n                        scope: this.query.scope\n                    }\n                });\n            }\n        }\n        return undefined;\n    }\n\n    protected handleNavigation(navigationOptions?: SearchService.NavigationOptions, audit?: AuditEvents): Promise<boolean> {\n        if (!this.loginService.complete) {\n            return Promise.resolve(false);\n        }\n        if (!this.appService.ccquery) {\n            return Promise.resolve(false);\n        }\n        let query = this._query;\n        if (this.routingActive) {\n            query = this.ensureQueryFromUrl();\n        }\n        this._events.next({type: \"update-query\", query});\n        this._queryStream.next(query);\n        if (!query) {\n            return Promise.resolve(true);\n        }\n        if (this.routingActive) {\n            const state = this.getHistoryState();\n            // console.log(\"history.state:\", state);\n            audit = state.audit;\n            navigationOptions = state.navigationOptions;\n        }\n        navigationOptions = navigationOptions || {};\n        const pathName = navigationOptions.path ? navigationOptions.path : Utils.makeURL(this.router.url).pathname;\n        if(navigationOptions.skipSearch || this.isSkipSearchRoute(pathName)) {\n            return Promise.resolve(true);\n        }\n        if (!audit) {\n            audit = this.makeAuditEventFromCurrentQuery();\n            if (audit && audit.type === AuditEventType.Search_Text) {\n                delete navigationOptions.queryIntents;\n                delete navigationOptions.queryAnalysis;\n            }\n        }\n        let observable = this.getResults(this.query, audit,\n            {\n                queryIntents: navigationOptions.queryIntents,\n                queryAnalysis: navigationOptions.queryAnalysis\n            });\n        Utils.subscribe(observable,\n            (results) => {\n                navigationOptions = navigationOptions || {};\n                this._setResults(results, {\n                    resuseBreadcrumbs: navigationOptions.reuseBreadcrumbs,\n                });\n                return results;\n            });\n        if (navigationOptions.selectTab) {\n            const afterSelectTabEvent: SearchService.AfterSelectTabEvent = {\n                type: \"after-select-tab\",\n                observable\n            };\n            this._events.next(afterSelectTabEvent);\n            observable = afterSelectTabEvent.observable;\n        }\n        return observable.pipe(\n            map(() => true),\n            catchError(() => of(false))).toPromise();\n    }\n\n    search(navigationOptions?: SearchService.NavigationOptions, audit?: AuditEvents): Promise<boolean> {\n        delete this.query.page;\n        delete this.query.spellingCorrectionMode;\n        return this.navigate(navigationOptions, audit);\n    }\n\n    searchText(path?: string): Promise<boolean> {\n        // Check for empty search preemptively to avoid clearing the current results in the most\n        // common case of the user entering empty search text in the search box\n        // The lower level check in getResults will handle less obvious cases (url editing etc)\n        if (!this.checkEmptySearch(this.query)) {\n            return Promise.resolve(false);\n        }\n        return this.search(\n            {\n                path,\n                analyzeQueryText: true\n            },\n            this.makeAuditEvent({\n                type: AuditEventType.Search_Text,\n                detail: {\n                    text: this.query.text,\n                    scope: this.query.scope,\n                    language: this.intlService.currentLocale.name\n                }\n            }));\n    }\n\n    searchRefine(text: string): Promise<boolean> {\n        // add \"refine\" name to facet value is mandatory as it's used in preview's query\n        this.query.addSelect(this.exprBuilder.makeRefineExpr(text), \"refine\");\n        return this.search(undefined,\n            this.makeAuditEvent({\n                type: AuditEventType.Search_Refine,\n                detail: {\n                    text: text,\n                    itembox: \"refine\",\n                    \"from-result-id\": !!this.results ? this.results.id : null\n                }\n            }));\n    }\n\n    gotoPage(page: number): Promise<boolean> {\n        this.query.page = page;\n        return this.navigate(undefined, this.makeAuditEvent({\n            type: AuditEventType.Search_GotoPage,\n            detail: {\n                page: page,\n                \"from-result-id\": !!this.results ? this.results.id : null\n            }\n        }));\n    }\n\n    /**\n     * Load more results and append them to previous results\n     */\n    loadMore() {\n        if(!this.fetchingLoadMore) {\n            let page = this.query.page || this.page;\n            page += (page <= this.pageCount) ? 1 : 0;\n            if (page <= this.pageCount) {\n                this.fetchingLoadMore = true;\n                this.query.page = page;\n\n                const auditEvents = this.makeAuditEvent({\n                    type: AuditEventType.Search_GotoPage,\n                    detail: {\n                        page: page,\n                        \"from-result-id\": !!this.results ? this.results.id : null\n                    }\n                })\n\n                this.getResults(this.query, auditEvents)\n                .subscribe(results => {\n                    if(this.results && results) {\n                        this.results.records = [...this.results?.records || [], ...results.records] || [];\n                        this._resultsStream.next(this.results);\n                    }\n                    this.fetchingLoadMore = false;\n                });\n            }\n        }\n    }\n\n    /**\n     * @returns true if more are available otherwise false\n     */\n    hasMore(): boolean {\n        const page = this.query.page || this.page;\n        return (page < this.pageCount);\n    }\n\n    didYouMean(text: string, context: \"search\" | \"refine\", kind: DidYouMeanKind): Promise<boolean> {\n        if (context === \"search\") {\n            this.query.text = text;\n        }\n        else {\n            const refineSelect = this.query.findSelect(\"refine\");\n            if (refineSelect) {\n                refineSelect.expression = \"refine:\" + ExprParser.escape(text);\n            }\n        }\n        this.query.spellingCorrectionMode = \"dymonly\";\n        return this.navigate(undefined, this.makeAuditEvent({\n            type: kind === DidYouMeanKind.Original ? AuditEventType.Search_DidYouMean_Original : AuditEventType.Search_DidYouMean_Correction,\n            detail: {\n                text: text\n            }\n        }));\n    }\n\n    getCurrentRecordIds(): string[]{\n        if (this.results && this.results.records) {\n            return this.results.records.map(record => record.id);\n        }\n        return [];\n    }\n\n    getRecordFromId(id: string): Record | undefined {\n        if (this.results && this.results.records) {\n            return this.results.records.find(record => Utils.eq(record.id, id));\n        }\n        return undefined;\n    }\n\n    addFieldSelect(field: string, items: ValueItem | ValueItem[], options?: SearchService.AddSelectOptions): boolean {\n        if (items && (!Utils.isArray(items) || items.length > 0)) {\n            let expr = this.exprBuilder.makeFieldExpr(field, items, options?.and);\n            if (options?.not) {\n                expr = this.exprBuilder.makeNotExpr(expr);\n            }\n            this.query.addSelect(expr, options?.facetName);\n            return true;\n        }\n        return false;\n    }\n\n\n    get lastRefineText(): string {\n        if (this.breadcrumbs) {\n            const refineExpr = this.breadcrumbs.findSelect(\"refine\");\n            if (refineExpr) {\n                return ExprParser.unescape(refineExpr.toString(false));\n            }\n        }\n        return \"\";\n    }\n\n    get hasRelevance(): boolean {\n        if (!this.breadcrumbs) {\n            return false;\n        }\n        if (this.breadcrumbs.textExpr?.hasRelevance) {\n            return true;\n        }\n        const refineExpr = this.breadcrumbs.findSelect(\"refine\");\n        return refineExpr?.hasRelevance || false;\n    }\n\n    selectTab(arg: string | Tab, options: SearchService.NavigationOptions = {}): Promise<boolean> {\n        options.selectTab = true;\n        const tabName = typeof arg === 'string' ? arg : arg.name;\n        this.query.tab = tabName;\n        delete this.query.queryId; // SBA-154\n        this._events.next({type: \"before-select-tab\", query: this.query});\n        return this.search(options,\n            this.makeAuditEvent({\n                type: AuditEventType.Search_GotoTab,\n                detail: {\n                    tab: tabName,\n                    \"from-result-id\": !!this.results ? this.results.id : null\n                }\n            }));\n    }\n\n    selectScope(scope: string) {\n        this.query.scope = scope;\n    }\n\n    getTab(tabName: string): Tab | undefined {\n        if (this.results && this.results.tabs) {\n            for (const tab of this.results.tabs) {\n                if (Utils.equals(tab.name, tabName)) {\n                    return tab;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    getCurrentTab(): Tab | undefined {\n        if (this.results && this.results.tab) {\n            return this.getTab(this.results.tab);\n        }\n        return undefined;\n    }\n\n    notifyOpenOriginalDocument(record: Record, resultId?: string): void {\n        const results = this.results && this.results.records && this.results.records.includes(record) ? this.results : undefined;\n        this._events.next({ type: \"open-original-document\", record });\n        const querylang = this.results?.queryAnalysis?.queryLanguage\n            || this.query?.questionLanguage\n            || this.appService?.ccquery?.questionLanguage;\n        this.auditService.notifyDocument(\n            AuditEventType.Click_ResultLink,\n            record,\n            results || resultId || \"\",\n            {\n                text: this.query.text,\n                querylang,\n            },\n            {\n                queryhash: results ? results.rfmQueryHash : undefined,\n                querytext: this.query.text,\n                querylang: querylang\n            }\n        );\n    }\n\n    checkBeforeSearch(cancelReasons?: string[]): boolean {\n        const beforeSearch: SearchService.BeforeSearchEvent = {type: \"before-search\"};\n        this._events.next(beforeSearch);\n        if (cancelReasons && beforeSearch.cancelReasons) {\n            cancelReasons.splice(0, 0, ...beforeSearch.cancelReasons);\n        }\n        return !beforeSearch.cancel;\n    }\n}\n\nexport module SearchService {\n    export interface GetResultsOptions {\n        queryIntents?: QueryIntent[];\n        queryAnalysis?: QueryAnalysis;\n        searchInactive?: boolean;   // default \"false\"\n    }\n\n    export interface SetResultsOptions {\n        resuseBreadcrumbs?: boolean;\n        advanced?: boolean;\n    }\n\n    export interface AddSelectOptions {\n        not?: boolean;      // default \"false\"\n        and?: boolean;      // default \"false\"\n        facetName?: string; // default: undefined\n    }\n\n    export interface NavigationOptions {\n        path?: string; // absolute path, current path used if not specified\n        reuseBreadcrumbs?: boolean;\n        selectTab?: boolean;\n        analyzeQueryText?: boolean;\n        queryIntents?: QueryIntent[];\n        queryAnalysis?: QueryAnalysis;\n        skipLocationChange?: boolean;\n        skipSearch?: boolean;\n    }\n\n    export interface HistoryState {\n        audit?: AuditEvents;\n        navigationOptions?: NavigationOptions;\n    }\n\n    export interface Event {\n        type: \"new-query\" | \"update-query\" | \"make-query\" | \"before-new-results\" | \"new-results\" | \"make-query-intent-data\" |\n            \"process-query-intent-action\" | \"make-audit-event\" |\n            \"before-select-tab\" | \"after-select-tab\" | \"clear\" | \"open-original-document\" | \"before-search\";\n    }\n\n    export interface NewQueryEvent extends Event {\n        type: \"new-query\";\n        query: Query | undefined;\n    }\n\n    export interface UpdateQueryEvent extends Event {\n        type: \"update-query\";\n        query: Query | undefined;\n    }\n\n    export interface MakeQueryEvent extends Event {\n        type: \"make-query\";\n        query: Query;\n    }\n\n    export interface BeforeNewResultsEvent extends Event {\n        type: \"before-new-results\";\n        results: Results | undefined;\n    }\n\n    export interface NewResultsEvent extends Event {\n        type: \"new-results\";\n        results: Results | undefined;\n    }\n\n    export interface MakeQueryIntentDataEvent extends Event {\n        type: \"make-query-intent-data\";\n        intentData: QueryIntentData;\n    }\n\n    export interface ProcessQueryIntentActionEvent extends Event {\n        type: \"process-query-intent-action\";\n        action: QueryIntentAction;\n        intent: QueryIntent;\n        analysis: QueryAnalysis;\n        actionProcessed?: boolean;\n    }\n\n    export interface MakeAuditEventEvent extends Event {\n        type: \"make-audit-event\";\n        event: AuditEvent;\n    }\n\n    export interface BeforeSelectTabEvent extends Event {\n        type: \"before-select-tab\";\n        query: Query;\n    }\n\n    export interface AfterSelectTabEvent extends Event {\n        type: \"after-select-tab\";\n        observable: Observable<Results>;\n    }\n\n    export interface ClearEvent extends Event {\n        type: \"clear\";\n        path?: string;\n    }\n\n    export interface OpenOriginalDocument extends Event {\n        type: \"open-original-document\";\n        record: Record;\n    }\n\n    export interface BeforeSearchEvent extends Event {\n        type: \"before-search\";\n        cancel?: boolean;\n        cancelReasons?: string[];\n    }\n\n    export type Events =\n        NewQueryEvent |\n        UpdateQueryEvent |\n        MakeQueryEvent |\n        BeforeNewResultsEvent |\n        NewResultsEvent |\n        MakeQueryIntentDataEvent |\n        ProcessQueryIntentActionEvent |\n        MakeAuditEventEvent |\n        BeforeSelectTabEvent |\n        AfterSelectTabEvent |\n        ClearEvent |\n        OpenOriginalDocument |\n        BeforeSearchEvent;\n\n    export const DefaultPageSize = 20;\n}\n","import {NgModule, ModuleWithProviders, Type} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {WebServicesModule} from \"@sinequa/core/web-services\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {PreviewDocumentIframe} from \"./preview-document-iframe.component\";\nimport {PreviewTooltip} from \"./preview-tooltip.component\";\nimport {PREVIEW_MODAL} from \"./preview.service\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        WebServicesModule,\n        UtilsModule\n    ],\n    declarations: [\n        PreviewDocumentIframe, PreviewTooltip\n    ],\n    exports: [\n        PreviewDocumentIframe, PreviewTooltip\n    ],\n})\nexport class PreviewModule {\n    static forRoot(previewModal: Type<any>) : ModuleWithProviders<PreviewModule> {\n        return {\n            ngModule: PreviewModule,\n            providers: [\n                {provide: PREVIEW_MODAL, useValue: previewModal},\n            ]\n        };\n    }\n}","export default {\r\n    \"clipboard\": {\r\n        \"success\": \"{data} copied to the clipboard\",\r\n        \"error\": \"Clipboard error\"\r\n    }\r\n};\r\n","import { Directive, Input, OnInit } from \"@angular/core\";\nimport { FormGroup } from \"@angular/forms\";\nimport { ValidationDirective } from \"@sinequa/core/validation\";\n\n@Directive({\n    selector: \"[sqAdvancedFormValidation]\",\n})\nexport class BsAdvancedFormValidation extends ValidationDirective implements OnInit {\n    @Input() field: string;\n    @Input() validationForm: FormGroup;\n    \n    ngOnInit() {\n        this.options = {\n            form: this.validationForm,\n            controlName: this.field,\n        };\n        super.ngOnInit();\n    }\n}\n","import {Component, Input} from '@angular/core';\nimport {SearchService} from \"../../search.service\";\n\n// From https://stackoverflow.com/questions/34773266/how-to-write-css-keyframes-to-indeterminate-material-design-progress-bar\n\n@Component({\n    selector: 'sq-loading-bar',\n    template: `\n<div class=\"slider\" *ngIf=\"isActive()\">\n\t<div class=\"line\"></div>\n  <div class=\"subline inc\"></div>\n  <div class=\"subline dec\"></div>\n</div>\n    `,\n    styles: [`\n\n.slider{\n  position:absolute;\n  width:100%;\n  height:3px;\n  overflow: hidden;\n  z-index: 3;\n}\n\n.line{\n  position:absolute;\n  opacity: 0.4;\n  background:#4a8df8;\n  width:150%;\n  height:5px;\n}\n\n.subline{\n  position:absolute;\n  background:#4a8df8;\n  height:5px;\n}\n.inc{\nanimation: increase 1s infinite;\n}\n.dec{\nanimation: decrease 1s 0.25s infinite;\n}\n\n@keyframes increase {\n from { left: -5%; width: 5%; }\n to { left: 130%; width: 100%;}\n}\n@keyframes decrease {\n from { left: -80%; width: 80%; }\n to { left: 110%; width: 10%;}\n}\n    `]\n})\nexport class BsLoadingBar {\n  /**\n   * active can provided as a boolean to activate the loading bar.\n   * If it is not provided, the SearchService searchActive property is used.\n   */\n  @Input() active?: boolean;\n\n  constructor(\n    public searchService: SearchService\n  ) { }\n\n  isActive() {\n    return this.active === undefined ? this.searchService.searchActive : this.active;\n  }\n}\n","export default {\n    \"labels\": {\n        \"labels\": \"Etiketten\",\n        \"publicLabels\": \"Öffentliche Etiketten\",\n        \"privateLabels\": \"Private Etiketten\",\n        \"public\": \"Öffentliche\",\n        \"private\": \"Private\",\n        \"selectLabel\": \"Etikett(en) auswählen\",\n        \"deleteLabelAreYouSure\": \"Möchten Sie dieses Etikett wirklich löschen: {name}?\",\n        \"bulkAddLabelAreYouSure\": \"Möchten Sie wirklich das Etikett {name} zu allen Ergebnissen der aktuellen Suche hinzufügen?\",\n        \"bulkRemoveLabelAreYouSure\": \"Möchten Sie wirklich das Etikett {name} von allen Ergebnissen der aktuellen Suche entfernen?\",\n        \"addPublicLabelText\": \"+\",\n        \"removePublicLabelText\": \"×\",\n        \"addPublicLabelTitle\": \"Öffentliches Etikett hinzufügen\",\n        \"selectPublicLabelTitle\": \"Öffentliches Etikett auswählen\",\n        \"removePublicLabelTitle\": \"Öffentliches Etikett entfernen\",\n        \"addPrivateLabelText\": \"+\",\n        \"removePrivateLabelText\": \"×\",\n        \"addPrivateLabelTitle\": \"Privates Etikett hinzufügen\",\n        \"selectPrivateLabelTitle\": \"Privates Etikett auswählen\",\n        \"removePrivateLabelTitle\": \"Privates Etikett entfernen\"\n    },\n\n    \"renameLabel\": {\n        \"title\": \"Etikett(en) unbenennen\",\n        \"btnRename\": \"Umbennen\",\n        \"newLabel\": \"Neuen Etikett\",\n        \"oldLabels\": \"Altes Etikett(en)\",\n        \"alertText\": \"Diese Aktion benennt das (die) ausgewählte(n) Etikett(en) im Index um und ist unwiderruflich\",\n        \"successFeedback\": \"Etikett(en), das (die) im Index umbenannt wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"deleteLabel\": {\n        \"title\": \"Etikett(en) global entfernen\",\n        \"btnDelete\": \"Löschen\",\n        \"alertText\": \"Diese Aktion löscht das (die) ausgewählte(n) Etikett(en) aus dem Index und ist unwiderruflich\",\n        \"successFeedback\": \"Etikett(en), das (die) aus dem Index gelöscht wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"bulkRemoveLabel\": {\n        \"title\": \"Etikett(en) von aktuellen Ergebnissen entfernen\",\n        \"btnBulkRemove\": \"Entfernen\",\n        \"alertText\": \"Diese Aktion löscht das (die) ausgewählte(n) Etikett(en) aus allen gefundenen Ergebnisse (nicht nur die der ersten Seite)\",\n        \"successFeedback\": \"Etikett(en), das (die) aus allen gefundenen Ergebnissen gelöscht wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"bulkAddLabel\": {\n        \"title\": \"Etikett(en) zu aktuellen Ergebnissen hinzufügen\",\n        \"btnBulkAdd\": \"Hinzufügen\",\n        \"alertText\": \"Diese Aktion fügt das (die) ausgewählte(n) Etikett(en) zu allen gefundenen Ergebnissen (nicht nur denen der ersten Seite) hinzu\",\n        \"infoText\": \"klicken Sie auf 'Enter', um ein neues Etikett, das nicht in den Vorschlägen existiert, hinzuzufügen\",\n        \"successFeedback\": \"Etikett(en), das (die) allen gefundenen Ergebnissen hinzugefügt wurde(n)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    },\n\n    \"editLabel\": {\n        \"title\": \"Bearbeiten des (der) Etikett(en) aus dem (den) ausgewählten Ergebnis(sen)\",\n        \"btnEdit\": \"speichern\",\n        \"alertText\": \"Diese Aktion bearbeitet das (die) Etikett(en) des (der) ausgewählten Ergebnisse(s)\",\n        \"infoText\": \"klicken Sie auf 'Enter', um ein neues Etikett, das nicht in den Vorschlägen existiert, hinzuzufügen\",\n        \"labelsToBeRemoved\": \"Zu löschende(s) Etikett(en)\",\n        \"labelsToBeAdded\": \"Hinzuzufügende(s) Etikett(en)\",\n        \"successFeedback\": \"Etikett(en), das (die) zu dem (den) ausgewählten Ergebnis(sen) bearbeit(en)\",\n        \"errorFeedback\": \"Ein Fehler ist aufgetreten. Die Suchanfrage war erfolglos\"\n    }\n};\n","import {Component, Input} from \"@angular/core\";\nimport {Action} from \"../../action\";\n\n@Component({\n    selector: \"sq-action-item-content\",\n    templateUrl: \"./action-item-content.html\",\n    styles: [`\n.sq-action-item-content-container > div:not(:last-child) {\n    margin-right: 0.25rem;\n}\n    `]\n})\nexport class BsActionItemContent {\n    @Input() item: Action;\n    @Input() text: string;\n    @Input(\"in-dropdown-menu\") inDropdownMenu: boolean;\n\n    componentClick(event: UIEvent) {\n        if (this.item.action && !this.item.disabled) {\n            this.item.action(this.item, event);\n        }\n        event.stopPropagation();\n        return false;\n    }\n}","<ng-container *ngIf=\"inDropdownMenu; then in_dropdown_menu else not_in_dropdown_menu\"></ng-container>\n\n<ng-template #in_dropdown_menu>\n    <ng-container *ngIf=\"!!item.component\" (click)=\"componentClick($event)\"[sqLoadComponent]=\"{component: item.component, inputs: item.componentInputs }\"></ng-container>\n    <div *ngIf=\"!!!item.component\" class=\"d-flex flex-row sq-action-item-content-container\">\n        <div *ngIf=\"item.showSelected\"><span class=\"fas fa-check {{item.selected ? '' : 'invisible'}}\" aria-hidden=\"true\"></span></div>\n        <div *ngIf=\"!!item.icon\"><span class=\"{{item.icon}}\" aria-hidden=\"true\"></span></div>\n        <div>{{text | sqMessage:item.messageParams}}</div>\n        <div *ngIf=\"!!item.iconAfter\" class=\"ml-auto\"><span class=\"{{item.iconAfter}}\" aria-hidden=\"true\"></span></div>\n    </div>\n</ng-template>\n\n<ng-template #not_in_dropdown_menu>\n    <span [ngClass]=\"item.styles || ''\">\n        <span *ngIf=\"!!item.icon\" class=\"{{item.icon}}\" aria-hidden=\"true\"></span>\n        {{text | sqMessage:item.messageParams}}\n        <span *ngIf=\"!!item.iconAfter\" class=\"{{item.iconAfter}}\" aria-hidden=\"true\"></span>\n    </span>\n</ng-template>","import {Component, Input, HostBinding, Injector} from \"@angular/core\";\nimport {ModalService, ModalResult, ModalRef} from \"@sinequa/core/modal\";\n\n@Component({\n    selector: \"sq-modal-header\",\n    templateUrl: \"./modal-header.component.html\"\n})\nexport class BsModalHeader {\n    @Input() title: string;\n    @HostBinding(\"class.sq-modal-header\") true;\n\n    constructor(\n        protected modalRef: ModalRef,\n        protected injector: Injector) {\n    }\n\n    // Avoid circular reference (via Confirm)\n    get modalService(): ModalService {\n        return this.injector.get(ModalService);\n    }\n\n    cancel() {\n        this.modalRef.close(ModalResult.Cancel);\n    }\n}","<div class=\"modal-header\">\n    <h5 *ngIf=\"title\" class=\"modal-title\">{{title | sqMessage}}</h5>\n    <ng-content></ng-content>\n    <button type=\"button\" class=\"close\" (click)=\"cancel()\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n</div>\n","export * from \"./public-api\";","export default {\n    \"resultSelector\": {\n        \"selectDocument\": \"Select document\",\n        \"unselectDocument\": \"Unselect document\"\n    },\n    \"resultsSelector\": {\n        \"selectDocuments\": \"{count, selectordinal, =0 {} other {(#)}}\",\n        \"selectDocumentsTitle\": \"Select documents\",\n        \"unselectDocumentsTitle\": \"Unselect documents\"\n    },\n    \"selection\": {\n        \"selectedDocuments\": \"{count, plural, =0 {} one {# selected document} other {# selected documents}}\"\n    }\n};\n","export default {\n    \"preview\": {\n        \"noDocumentDataErrorPopupTitle\": \"Fehler beim Laden der Dokumentdaten\",\n        \"highlightsTitle\": \"Markierungen\",\n        \"noEntityToHighlight\": \"Keine Markierungen im Dokument verfügbar\",\n        \"termXLabel\": \"Suchbegriff\",\n        \"otherTerms\": \"Andere Begriffe\",\n        \"previousDocument\": \"Vorheriges Dokument\",\n        \"nextDocument\": \"Nächstes Dokument\",\n        \"originalDocument\": \"Originales Dokument\",\n        \"selectedHighlight\": \"Ausgewählte Markierung\",\n        \"noSelectedHighlight\": \"Keine Markierung ausgewählt\",\n        \"firstHighlightButtonAltText\": \"Erste Markierung\",\n        \"previousHighlightButtonAltText\": \"Vorherige Markierung\",\n        \"nextHighlightButtonAltText\": \"Nächste Markierung\",\n        \"lastHighlightButtonAltText\": \"Letzte Markierung\",\n        \"highlightFilters\": {\n            \"title\": \"Filter\",\n            \"keepAll\": \"Alle\",\n            \"keepNone\": \"Keine\",\n            \"keepAllInCategory\": \"Alle\",\n            \"keepNoneInCategory\": \"Keine\"\n        },\n        \"documentPropertiesTitle\": \"Dokumenteigenschaften\",\n        \"similarDocumentsTitle\": \"Ähnliche Dokumente\",\n        \"showAll\": \"Zeige alle Werte\",\n        \"sortAlphabetically\": \"Alphabetische Sortierung\",\n        \"sortFrequency\": \"Sortierung nach Häufigkeit\",\n        \"loading\": \"Laden...\",\n        \"noextract\": \"kein Auszug\",\n        \"search\": \"Suche\",\n        \"gotopage\": \"Zur Seite gehen\",\n        \"page\": \"Seite {page}\",\n        \"current\": \"aktuell\"\n    },\n    \"facet\": {\n        \"preview\": {\n            \"closeTitle\": \"Schließen\",\n            \"expandTitle\": \"Maximieren\",\n            \"minimize\": \"Rauszoomen\",\n            \"maximize\": \"hineinzoomen\",\n            \"toggleExtracts\": \"Schalten Sie die Hervorhebung relevanter Auszüge um\",\n            \"toggleEntities\": \"Schalten Sie die Hervorhebung von Objekten\"\n        }\n    }\n};\n","export * from \"./public-api\";","const WEB_SERVICES_MODULE_PROVIDERS = [];\n\nexport {WEB_SERVICES_MODULE_PROVIDERS};\n","export default {\n    metadata: {\n        extractslocationsLabel: \"Extrait pertinent\",\n        extractslocationsPluralLabel: \"Extraits pertinents\",\n        geoLabel: \"Lieu\",\n        geoPluralLabel: \"Lieux\",\n        personLabel: \"Personne\",\n        personPluralLabel: \"Personnes\",\n        companyLabel: \"Société\",\n        companyPluralLabel: \"Sociétés\",\n        treepathLabel: \"Source\",\n        treepathPluralLabel: \"Sources\",\n        matchlocationsLabel: \"Terme recherché\",\n        matchlocationsPluralLabel: \"Termes recherchés\",\n        titleLabel: \"Titre\",\n        titlePluralLabel: \"Titres\",\n        authorsLabel: \"Auteur\",\n        authorsPluralLabel: \"Auteurs\",\n        filenameLabel: \"Nom de fichier\",\n        filenamePluralLabel: \"Noms de fichiers\",\n        modifiedLabel: \"Date\",\n        modifiedPluralLabel: \"Dates\",\n        sizeLabel: \"Taille\",\n        sizePluralLabel: \"Tailles\",\n        docformatLabel: \"Format\",\n        docformatPluralLabel: \"Formats\",\n        documentlanguagesLabel: \"Langue\",\n        documentlanguagesPluralLabel: \"Langues\",\n        geo_label: \"Lieu\",\n        geo_plural_label: \"Lieux\",\n        person_label: \"Personne\",\n        person_plural_label: \"Personnes\",\n        company_label: \"Société\",\n        company_plural_label: \"Sociétés\",\n        treepath_label: \"Source\",\n        treepath_plural_label: \"Sources\",\n        title_label: \"Titre\",\n        title_plural_label: \"Titres\",\n        authors_label: \"Auteur\",\n        authors_plural_label: \"Auteurs\",\n        filename_label: \"Nom de fichier\",\n        filename_plural_label: \"Noms de fichiers\",\n        modified_label: \"Date\",\n        modified_plural_label: \"Dates\",\n        size_label: \"Taille\",\n        size_plural_label: \"Tailles\",\n        docformat_label: \"Format\",\n        docformat_plural_label: \"Formats\",\n        documentlanguages_label: \"Langue\",\n        documentlanguages_plural_label: \"Langues\",\n        accessLists: {\n            authorizedListTitleText: \"Accès autorisés\",\n            authorizedListHeader: \"Liste d'accès autorisés {value, number}\",\n            deniedListTitleText: \"Accès refusés\",\n            deniedListHeader: \"Liste d'accès refusés {value, number}\"\n        },\n        item: {\n            label: \"{label}:\",\n            separator: \"|\",\n            treeSeparator: \" ; \",\n            treeNodeSeparator: \"/\",\n            listSeparator: \", \",\n            empty_boolean: 'false',\n            empty_number: '0'\n        }\n    },\n};\n","import {Directive, Input, Output, ElementRef, OnInit, OnDestroy, EventEmitter} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\n\nexport interface ClickOutsideOptions {\n    exclude?: string[];\n}\n\n@Directive({\n    selector: \"[sqClickOutside]\"\n})\nexport class ClickOutside implements OnInit, OnDestroy {\n    @Input(\"sqClickOutside\") options: ClickOutsideOptions;\n    @Output(\"sqClickOutside\") clickOutside = new EventEmitter<{click: UIEvent}>();\n    element: HTMLElement;\n\n    constructor(elementRef: ElementRef) {\n        this.element = <HTMLElement>elementRef.nativeElement;\n    }\n\n    ngOnInit() {\n        document.addEventListener(\"click\", this.clickHandler);\n        if (!this.options) {\n            this.options = { exclude: ['.bs-datepicker'] }; // By default exclude bootstrap date picker\n        }\n    }\n\n    ngOnDestroy() {\n        document.removeEventListener(\"click\", this.clickHandler);\n    }\n\n    private isActive(element: Element): boolean {\n        let active = document[\"activeElement\"];\n        while (active) {\n            if (element === active) {\n                return true;\n            }\n            active = active.parentElement;\n        }\n        return false;\n    }\n\n    clickHandler = (event: MouseEvent) => {\n        if (!event || !event.target) {\n            return;\n        }\n        if (this.element.offsetWidth === 0) {\n            return;\n        }\n        if (event.target === document.body && document.elementFromPoint(event.pageX, event.pageY) !== event.target) {\n            return;\n        }\n        if (this.element.contains(<HTMLElement>event.target)) {\n            return;\n        }\n        if (this.options.exclude) {\n            let targetRoot = <HTMLElement>event.target;\n            while (!!targetRoot.parentElement) {\n                targetRoot = targetRoot.parentElement;\n            }\n            for (const selector of this.options.exclude) {\n                const elts = Array.from(targetRoot.querySelectorAll(selector));\n                for (const elt of elts) {\n                    if (elt && elt.contains(<Node>event.target)) {\n                        return;\n                    }\n                }\n            }\n        }\n        // Call via timeout so we can check whether the click was leading to us taking focus\n        // If we have the focus then we don't call clickOutside\n        Utils.delay()\n            .then(() => {\n                if (!this.isActive(this.element)) {\n                    this.clickOutside.emit({click: event});\n                }\n            });\n    }\n}","export * from \"./public-api\";","import { Component, Input, OnChanges, ElementRef, OnDestroy } from \"@angular/core\";\nimport { FormGroup, AbstractControl } from \"@angular/forms\";\nimport { Keys, Utils } from \"@sinequa/core/base\";\nimport { AutocompleteItem } from \"@sinequa/components/autocomplete\";\nimport { Subscription } from \"rxjs\";\nimport { AppService, ValueItem } from '@sinequa/core/app-utils';\n\n/**\n * Component representing a text input that accepts multiple entries.\n * This component also performs value validation on each entry.\n *\n */\n@Component({\n    selector: \"sq-advanced-form-multi-input\",\n    templateUrl: \"./advanced-form-multi-input.html\",\n    styleUrls: [\"./advanced-form-multi-input.scss\"],\n})\nexport class BsAdvancedFormMultiInput implements OnChanges, OnDestroy {\n    @Input() form: FormGroup;\n    @Input() field: string;\n    @Input() suggestQuery: string;\n    @Input() label: string;\n\n    items: AutocompleteItem[] = []; /** List of items already existing in the advanced search */\n    private _valueChangesSubscription: Subscription;\n\n    control: AbstractControl | null;\n\n    constructor(\n        private elementRef: ElementRef,\n        public appService: AppService) {}\n\n    ngOnChanges(): void {\n        if(this.label === undefined) {\n            this.label = this.appService.getPluralLabel(this.field);\n        }\n        this.control = this.form.get(this.field);\n        if (this.control) {\n            this.items = this.control.value\n                ? (Utils.isArray(this.control.value)\n                        ? this.control.value\n                        : [this.control.value]\n                    ).map((item: ValueItem) => {\n                        return {\n                            display: item.display ? item.display : item.value.toString(),\n                            normalized: item.value.toString(),\n                            category: \"\",\n                        };\n                    })\n                : [];\n\n            this._valueChangesSubscription = Utils.subscribe(\n                this.control.valueChanges,\n                (value) => {\n                    if(value && !Utils.isArray(value)) {\n                        value = [value];\n                    }\n                    this.items = value\n                        ? value.map((item: ValueItem) => {\n                                return {\n                                    display: item.display ? item.display : item.value.toString(),\n                                    normalized: item.value.toString(),\n                                    category: \"\",\n                                };\n                            })\n                        : [];\n                }\n            );\n        }\n        else {\n            throw new Error(\"No form control named \"+this.field);\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._valueChangesSubscription) {\n            this._valueChangesSubscription.unsubscribe();\n        }\n    }\n\n    removeItem(item: AutocompleteItem) {\n        this.items.splice(this.items.indexOf(item), 1);\n        this._updateControl();\n    }\n\n    onItemsChanged(items: AutocompleteItem[]) {\n        this.items = items;\n        this._updateControl();\n    }\n\n    keydown(event: KeyboardEvent) {\n        // Intercept tab and set focus to surrounding dropdown-item\n        if (event.keyCode === Keys.tab) {\n            const dropdownItem = this._getDropdownItem();\n            if (dropdownItem) {\n                dropdownItem.focus();\n                event.preventDefault();\n                return false;\n            }\n        }\n        return undefined;\n    }\n\n    keypress(event: KeyboardEvent) {\n        if (event.keyCode === Keys.enter) {\n            // Stop click event firing on surrounding anchor (Firefox)\n            event.preventDefault();\n            return false;\n        }\n        return undefined;\n    }\n\n    private _updateControl(): void {\n        const value = this.items.length > 0\n            ? this.items.map((item) => (\n                {\n                    value: item.normalized!,\n                    display: item.display\n                }\n            ))\n            : undefined\n        this.control?.markAsDirty();\n        this.control?.setValue(value, {emitEvent: false});\n    }\n\n    private _getDropdownItem(): HTMLElement | null {\n        if (this.elementRef) {\n            let current: HTMLElement | null = this.elementRef\n                .nativeElement as HTMLElement;\n            while (current && !current.classList.contains(\"dropdown-item\")) {\n                current = current.parentElement;\n            }\n            return current;\n        }\n        return null;\n    }\n}\n","<div class=\"d-inline\">\n    <label>{{label | sqMessage}}</label>\n    <section class=\"sq-dropdown-form\">\n        <div class=\"form-control multi-entry\"\n            sqAdvancedFormValidation\n            [field]=\"field\"\n            [validationForm]=\"form\">\n            <span\n                *ngFor=\"let item of items\"\n                class=\"badge badge-pill badge-secondary align-self-center mr-1\">\n                {{ item.display }}\n                <span class=\"fas fa-times-circle clickable\" (click)=\"removeItem(item)\"></span>\n            </span>\n            <input\n                class=\"input-autocomplete flex-grow-1\"\n                type=\"text\"\n                autocomplete=\"off\"\n                spellcheck=\"off\"\n                sqAdvancedFormAutocompleteMultiInput\n                [field]=\"field\"\n                [off]=\"!suggestQuery\"\n                [suggestQuery]=\"suggestQuery\"\n                (itemsUpdate)=\"onItemsChanged($event)\"\n                [items]=\"items\"\n                [dropdown]=\"dropdown\"\n                (keydown)=\"keydown($event)\"\n                (keypress)=\"keypress($event)\">\n        </div>\n        <sq-autocomplete-list #dropdown>\n            <ng-template #itemTpl let-item>\n                <div class=\"autocomplete-item p-2\">{{item.display}}\n                </div>\n            </ng-template>\n        </sq-autocomplete-list>\n    </section>\n</div>\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\nimport moment from \"moment\";\n\nexport interface MomentParams {\n    format?: string;\n    type?: \"fromNow\" | \"from\" | \"toNow\" | \"to\" | \"calendar\" | \"diff\" | \"valueOf\" | \"unix\" | \"daysInMonth\" | \"iso\";\n    suffix?: boolean; // from | fromNow | to| toNow (default: true)\n    reference?: moment.MomentInput; // from| to | calendar | diff\n    unit?: moment.unitOfTime.Diff; // diff\n    precise?: boolean; // diff\n}\n\n@Pipe({name: \"sqMoment\", pure: false})\nexport class MomentPipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key:moment.MomentInput, params: MomentParams = {}): void {\n        super.updateValue(key, params);\n        const m = moment(key);\n        if (params.format) {\n            this.value = m.format(params.format);\n        }\n        else {\n            switch (params.type) {\n                case \"fromNow\":\n                    this.value = m.fromNow(params.suffix);\n                    break;\n                case \"from\":\n                    this.value = m.from(params.reference, params.suffix);\n                    break;\n                case \"toNow\":\n                    this.value = m.toNow(params.suffix);\n                    break;\n                case \"to\":\n                    this.value = m.to(params.reference, params.suffix);\n                    break;\n                case \"calendar\":\n                    this.value = m.calendar(params.reference);\n                    break;\n                case \"diff\":\n                    this.value = \"\" + m.diff(params.reference, params.unit, params.precise);\n                    break;\n                case \"valueOf\":\n                    this.value = \"\" + m.valueOf();\n                    break;\n                case \"unix\":\n                    this.value = \"\" + m.unix();\n                    break;\n                case \"daysInMonth\":\n                    this.value = \"\" + m.daysInMonth();\n                    break;\n                case \"iso\":\n                    this.value = m.toISOString();\n                    break;\n            }\n        }\n    }\n}","export default {\n    \"money\": {\n        \"inspect\": \"Überprüfen Sie dieses Dokument\",\n        \"filter\": \"Filtern Sie Suchergebnisse, die diesen Geldbetrag enthalten\",\n        \"timeline\": \"Zeitleiste der Geldbeträge\",\n        \"cloud\": \"Wolke der Geldbeträge\"\n    },\n};\n","export * from \"./public-api\";","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {CollapseModule} from \"@sinequa/components/collapse\";\nimport {MetadataModule} from \"@sinequa/components/metadata\";\n\nimport {ResultTitle} from \"./result-title/result-title\";\nimport {ResultSource} from \"./result-source/result-source\";\nimport {ResultExtracts} from \"./result-extracts/result-extracts\";\nimport {ResultMissingTerms} from \"./result-missing-terms/result-missing-terms\";\nimport {ResultThumbnail} from \"./result-thumbnail/result-thumbnail\";\nimport {UserRating} from \"./user-rating/user-rating\";\nimport {SponsoredResults} from './sponsored-results/sponsored-results';\nimport {ResultsCounter} from \"./results-counter/results-counter\";\nimport {ResultIcon} from \"./result-icon/result-icon\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n\n        IntlModule,\n\n        UtilsModule,\n        CollapseModule,\n        MetadataModule\n    ],\n    declarations: [\n        ResultTitle, ResultExtracts,\n        ResultMissingTerms,\n        ResultThumbnail, UserRating,\n        SponsoredResults, ResultsCounter,\n        ResultIcon, ResultSource\n    ],\n    exports: [\n        ResultTitle, ResultExtracts,\n        ResultMissingTerms,\n        ResultThumbnail, UserRating,\n        SponsoredResults, ResultsCounter,\n        ResultIcon, ResultSource\n    ]\n})\nexport class ResultModule {\n}\n","import enTheme from \"./en\";\nimport frTheme from \"./fr\";\nimport deTheme from \"./de\";\n\nexport { enTheme, frTheme, deTheme };\n","import { Component, Input, SimpleChanges, Output, EventEmitter, OnChanges } from '@angular/core';\nimport { GridsterItemComponent } from 'angular-gridster2';\n\nimport { Results, Record } from '@sinequa/core/web-services';\nimport { Utils } from '@sinequa/core/base';\nimport { ExprBuilder, Query } from '@sinequa/core/app-utils'\n\nimport { Action } from '@sinequa/components/action';\nimport { SearchService } from '@sinequa/components/search';\n\nimport { NetworkProvider, ProviderFactory, oOTBConfig, defaultOptions } from \"@sinequa/analytics/network\";\nimport { defaultChart } from '@sinequa/analytics/fusioncharts';\n\nimport { DashboardItem, DashboardService } from './dashboard.service';\n/**\n * A wrapper component for all widgets in the dashboard.\n * The component is in charge of updating inputs going into each widget.\n * To add a custom widget, add it to the template, along with other widgets,\n * then, in the ngOnChanges method, generate the inputs necessary for this widget.\n */\n\n@Component({\n    selector: 'sq-dashboard-item',\n    templateUrl: './dashboard-item.component.html',\n    styleUrls: ['./dashboard-item.component.scss']\n})\nexport class DashboardItemComponent implements OnChanges {\n    @Input() config: DashboardItem;\n    @Input() results: Results;\n\n    // Whether this widget can be renamed or not\n    @Input() renamable = false;\n\n    // Whether this widget can be removed or not\n    @Input() closable = true;\n\n    // Whether this widget can be displayed in full-screen mode or not\n    @Input() fullScreenExpandable = false;\n\n    // Whether this widget can be viewed in maximized dimensions or not\n    @Input() maximizable = true;\n\n    // Size of the container, known only after it has been resized by the Gridster library\n    @Input() width?: number;\n    @Input() height?: number;\n\n    // Dark/Light theme\n    @Input() buttonsStyle: string;\n\n    // Emit an event when the user clicks on a record displayed within a widget\n    @Output() recordClicked = new EventEmitter<Record>();\n\n    // Custom actions for this widget\n    actions: Action[] = [];\n    closeAction: Action;\n    renameAction: Action;\n    fullScreenAction: Action;\n    maximizeAction: Action;\n\n    // Properties specific to certain types of dashboard items\n    innerwidth = 600;\n    innerheight = 200;\n\n    // Network\n    networkProviders: NetworkProvider[] = [];\n    networkOptions = defaultOptions;\n\n    // Fusion charts\n    chart = defaultChart;\n    chartObj?: any;\n\n    // Preview\n    record?: Record;\n    query?: Query;\n    error = false;\n\n    constructor(\n        public gridsterItemComponent: GridsterItemComponent,\n        public providerFactory: ProviderFactory,\n        public searchService: SearchService,\n        public dashboardService: DashboardService,\n        public exprBuilder: ExprBuilder) {\n\n        this.closeAction = new Action({\n            icon: \"fas fa-times\",\n            title: \"msg#dashboard.widgetClose\",\n            action: () => this.close()\n        });\n\n        this.renameAction = new Action({\n            icon: \"far fa-edit\",\n            title: \"msg#dashboard.renameWidgetTitle\",\n            action: () => this.rename()\n        });\n\n        this.fullScreenAction = new Action({\n            icon: \"fas fa-expand\",\n            title: \"msg#dashboard.fullScreenTitle\",\n            action: () => this.toggleFullScreen()\n        });\n\n        this.maximizeAction = new Action({\n            icon: \"fas fa-expand-alt\",\n            title: \"msg#dashboard.maximizeTitle\",\n            action: (action) => {\n                this.toggleMaximizedView();\n                action.icon = this.gridsterItemComponent.el.classList.contains('widget-maximized-view')\n                              ? \"fas fa-compress-alt\"\n                              : \"fas fa-expand-alt\";\n                action.title = this.gridsterItemComponent.el.classList.contains('widget-maximized-view')\n                              ? \"msg#dashboard.minimizeTitle\"\n                              : \"msg#dashboard.maximizeTitle\";\n            }\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n\n        // Set up the configuration for the NETWORK widget.\n        // The test \"this.networkProviders.length === 0\" ensures the configuration is done only once\n        if(this.config.type === \"network\" && this.results && this.networkProviders.length === 0) {\n            this.networkProviders = oOTBConfig(this.providerFactory);\n        }\n\n        // If this widget displays a doc preview, a record object is needed. It may come from the list of results\n        // or from a additional query via the Search Service.\n        if(this.config.type === \"preview\" && !this.record && this.config.recordId && this.config.queryStr) {\n            // Rebuild the query that allowed to obtain this record\n            this.query = this.searchService.makeQuery().fromJson(this.config.queryStr);\n            if(this.results) {\n                // Try to retrieve the record from the results list\n                this.record = this.results.records.find(r => r.id === this.config.recordId)\n            }\n            if(!this.record) {\n                // Try to retrieve the record from a dedicated query\n                this.query.addSelect(this.exprBuilder.makeExpr('id', this.config.recordId));\n                this.searchService.getResults(this.query, undefined, {searchInactive: true}).subscribe(\n                    results => {\n                        this.record = results.records[0];\n                    },\n                    err => {\n                        console.error(err);\n                        this.error = true;\n                    }\n                );\n            }\n        }\n\n        if(this.config.type === \"chart\") {\n            this.chart.theme = this.buttonsStyle === \"dark\"? \"candy\" : \"fusion\";\n        }\n\n        // Manage width and height changes. Some components need additional treatment\n\n        if(changes[\"height\"] && this.height) {\n            this.innerheight = this.height - 43;\n            // Update network\n            if(this.config.type === \"network\") {\n                this.networkOptions = Utils.copy(defaultOptions);\n                this.networkOptions.height = this.innerheight + \"px\";\n            }\n            // Update chart\n            if(this.chartObj) {\n                this.chartObj.resizeTo(this.width, this.innerheight)\n            }\n        }\n\n        if(changes[\"width\"] && this.width) {\n            this.innerwidth = this.width;\n            // Update chart, if not already done\n            if(this.chartObj && !changes[\"height\"]) {\n                this.chartObj.resizeTo(this.width, this.innerheight)\n            }\n        }\n\n        // Update the actions\n        this.actions = [];\n        if(this.renamable) {\n            this.actions.push(this.renameAction);\n        }\n        if(this.closable) {\n            this.actions.push(this.closeAction);\n        }\n        if (this.fullScreenExpandable) {\n            this.actions = [this.fullScreenAction, ...this.actions];\n        }\n        if (this.maximizable) {\n            this.actions = [this.maximizeAction, ...this.actions]\n        }\n    }\n\n    toggleFullScreen(): void {\n        const elem = this.gridsterItemComponent.el;\n\n        if (!document.fullscreenElement) {\n            if (elem.requestFullscreen) {\n                this.config.height = window.screen.height; // update gridsterItem to full-fill the screen height\n                this.config.width = window.screen.width; // update gridsterItem to full-fill the screen width\n                elem.requestFullscreen()\n                    .catch(\n                        (err) => console.error(`Error attempting to enable full-screen mode: ${err.message}`)\n                    );\n            }\n        } else {\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            }\n        }\n\n        /**\n         * callback to update the item's actions on switch from/to full-screen mode\n         */\n        elem.onfullscreenchange = () => {\n            if (document.fullscreenElement) {\n                this.fullScreenAction.icon = \"fas fa-compress\";\n                this.fullScreenAction.title = \"msg#dashboard.exitFullScreenTitle\";\n            } else {\n                this.fullScreenAction.icon = \"fas fa-expand\";\n                this.fullScreenAction.title = \"msg#dashboard.fullScreenTitle\";\n            }\n\n            // update related maximize/minimize actions since they can not be performed in full-screen mode\n            if (this.maximizable) {\n                this.maximizeAction.disabled =  document.fullscreenElement !== null;\n            }\n        }\n    }\n\n    toggleMaximizedView(): void {\n        const elem = this.gridsterItemComponent.el;\n\n        elem.classList.toggle('widget-maximized-view'); // allow container of gridsterItem to full-fill its direct parent dimensions\n        elem.parentElement?.classList.toggle('no-scroll'); // disable the direct parent scroll\n\n        if (elem.classList.contains('widget-maximized-view')) { // update component defined in gridsterItem to full-fill its maximized space\n            this.config.height = elem.parentElement?.clientHeight!;\n            this.config.width = elem.parentElement?.clientWidth!;\n        } else { // update height/width to the dimensions of the gridsterItemComponent\n            this.config.height = this.gridsterItemComponent.height;\n            this.config.width = this.gridsterItemComponent.width;\n        }\n\n        // update related full-screen actions since they can not be performed in maximized mode\n        if (this.fullScreenExpandable) {\n            this.fullScreenAction.disabled = elem.classList.contains('widget-maximized-view');\n        }\n    }\n\n    // Specific callback methods for the CHART widget\n\n    onChartInitialized(chartObj: any) {\n        this.chartObj = chartObj;\n        this.chartObj.resizeTo(this.width, this.innerheight);\n    }\n\n    onChartAggregationChange(aggregation: string) {\n        this.config.aggregation = aggregation;\n        this.dashboardService.notifyItemChange(this.config);\n    }\n\n    onChartTypeChange(type: string) {\n        this.config.chartType = type;\n        this.dashboardService.notifyItemChange(this.config);\n    }\n\n    /**\n     * Notifies parent that a record was clicked\n     * @param record\n     */\n    onRecordClicked(record?: Record){\n        if(record){\n            this.recordClicked.next(record);\n        }\n    }\n\n    /**\n     * Open a modal to rename this widget\n     */\n    rename() {\n        this.dashboardService.renameWidgetModal(this.config);\n    }\n\n    /**\n     * Remove this widget from the dashboard\n     */\n    close() {\n        this.dashboardService.removeItem(this.config);\n        if (this.gridsterItemComponent.el.parentElement?.classList.contains('no-scroll')) {\n            this.gridsterItemComponent.el.parentElement.classList.remove('no-scroll')\n        }\n    }\n}\n","<sq-facet-card\n    [icon]=\"config.icon\"\n    [title]=\"config.title\"\n    [collapsible]=\"false\"\n    [actions]=\"actions\"\n    [actionsFirst]=\"false\"\n    [buttonsStyle]=\"buttonsStyle\"\n    [ngSwitch]=\"config.type\">\n\n    <!-- Map view-->\n    <sq-googlemaps *ngSwitchCase=\"'map'\"\n        #facet\n        [results]=\"results\"\n        [height]=\"innerheight\"\n        [style]=\"buttonsStyle\"\n        (recordClicked)=\"onRecordClicked($event)\">\n    </sq-googlemaps>\n\n    <!-- Timeline view-->\n    <sq-facet-timeline *ngSwitchCase=\"'timeline'\"\n        #facet\n        [results]=\"results\"\n        [width]=\"innerwidth\"\n        [height]=\"innerheight\"\n        [theme]=\"buttonsStyle\"\n        (eventClicked)=\"onRecordClicked($event.record)\">\n    </sq-facet-timeline>\n\n    <!-- Network view -->\n    <sq-network *ngSwitchCase=\"'network'\"\n        #facet\n        [results]=\"results\"\n        [providers]=\"networkProviders\"\n        [options]=\"networkOptions\">\n        <!-- Info cards (deactivated by default to save space) -->\n        <!-- <ng-template #nodeTpl let-node>\n            <sq-node-info-card [node]=\"node\"></sq-node-info-card>\n        </ng-template>\n\n        <ng-template #edgeTpl let-edge>\n            <sq-edge-info-card [edge]=\"edge\"></sq-edge-info-card>\n        </ng-template> -->\n\n    </sq-network>\n\n    <!-- Chart view -->\n    <div class=\"overflow-hidden\" *ngSwitchCase=\"'chart'\">\n        <sq-fusion-chart\n            #facet\n            [results]=\"results\"\n            [chart]=\"chart\"\n            [aggregation]=\"config.aggregation || 'Company'\"\n            [aggregations]=\"['Company','Geo','Person','Concepts']\"\n            [type]=\"config.chartType || 'Column2D'\"\n            [types]=\"[{type: 'Column2D', display: 'Columns 2D'}, {type: 'Bar2D', display: 'Bars 2D'}, {type: 'Pie2D', display: 'Pie 2D'}, {type: 'Column3D', display: 'Columns 3D'}, {type: 'Bar3D', display: 'Bars 3D'}, {type: 'Pie3D', display: 'Pie 3D'}]\"\n            [autohide]=\"false\"\n            (initialized)=\"onChartInitialized($event)\"\n            (typeChange)=\"onChartTypeChange($event)\"\n            (aggregationChange)=\"onChartAggregationChange($event)\">\n        </sq-fusion-chart>\n    </div>\n\n    <!-- Heatmap view -->\n    <sq-facet-heatmap *ngSwitchCase=\"'heatmap'\"\n        #facet\n        [results]=\"results\"\n        [fieldX]=\"'geo'\"\n        [fieldY]=\"'company'\"\n        [fieldsX]=\"['geo', 'company', 'person']\"\n        [fieldsY]=\"['geo', 'company', 'person']\"\n        [width]=\"innerwidth\"\n        [height]=\"innerheight\"\n        [allowResizeOption]=\"false\"\n        [theme]=\"buttonsStyle\">\n    </sq-facet-heatmap>\n\n    <sq-facet-tag-cloud *ngSwitchCase=\"'tagcloud'\"\n        #facet\n        class=\"d-block overflow-auto\"\n        [ngStyle]=\"{'height.px':innerheight}\"\n        [results]=\"results\"\n        [aggregations]=\"['Concepts','Geo','Company','Person']\">\n    </sq-facet-tag-cloud>\n\n    <sq-money-timeline *ngSwitchCase=\"'money-timeline'\"\n        #facet\n        [results]=\"results\"\n        [width]=\"innerwidth\"\n        [height]=\"innerheight\"\n        [theme]=\"buttonsStyle\"\n        (recordClicked)=\"onRecordClicked($event)\">\n    </sq-money-timeline>\n\n    <sq-money-cloud *ngSwitchCase=\"'money-cloud'\"\n        #facet\n        [results]=\"results\"\n        [width]=\"innerwidth\"\n        [height]=\"innerheight\"\n        [theme]=\"buttonsStyle\">\n    </sq-money-cloud>\n\n    <!-- Preview -->\n    <ng-container *ngSwitchCase=\"'preview'\">\n        <sq-facet-preview-2 *ngIf=\"record\"\n            #facet\n            [record]=\"record\"\n            [query]=\"query\"\n            [scalingFactor]=\"0.8\"\n            [expandModal]=\"false\"\n            [closable]=\"false\"\n            [height]=\"innerheight\"\n            (recordClosed)=\"close()\">\n        </sq-facet-preview-2>\n        <div *ngIf=\"error\" class=\"text-white bg-warning\">\n            Could not retrieve document preview for {{config.recordId}}\n        </div>\n    </ng-container>\n\n</sq-facet-card>\n","import {Component, OnInit, OnDestroy, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\n\n@Component({\n    selector: \"sq-network-activity\",\n    templateUrl: \"./network-activity.html\",\n    styleUrls: [\"./network-activity.scss\"]\n})\nexport class BsNetworkActivity implements OnInit, OnDestroy {\n    subscription: Subscription | undefined;\n    active: boolean;\n    hidden: boolean;\n\n    constructor(\n        private notificationsService: NotificationsService,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnInit() {\n        this.unbind();\n        this.bind();\n    }\n\n    ngOnDestroy() {\n        this.unbind();\n    }\n\n    bind() {\n        this.subscription = this.notificationsService.events.subscribe(\n            (value) => {\n                this.active = this.notificationsService.get(\"network\") > 0;\n                setTimeout(() => this.changeDetectorRef.markForCheck(), 0); // Value can switch synchronously => this can cause \"Expression has changed\" error\n            });\n    }\n\n    unbind() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n            this.subscription = undefined;\n        }\n    }\n\n}","<div class=\"btn-toolbar\">\n    <div class=\"btn-group\">\n        <div class=\"btn-text\" title=\"{{'msg#statusbar.networkActivity' | sqMessage}}\">\n            <span class=\"fas fa-bolt\" [ngClass]=\"{'blink': active}\"></span>\n        </div>\n    </div>\n</div>","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-pager\",\n    templateUrl: \"./pager.html\",\n})\nexport class BsPager implements OnChanges {\n    @Input() results: Results;\n    @Input() showNavigation: boolean = true;\n    @Input() showFirstLast: boolean = true;\n    @Input() showPages: boolean = true;\n    @Input() endPages: number = 1;\n    @Input() pages: number = 5;\n\n    items: BsPager.Item[] | undefined;\n\n    private currentPage: number;\n    pageCount: number = 0;\n\n    static FIRST_PAGE = \"«\";\n    static PREVIOUS_PAGE = \"‹\";\n    static NEXT_PAGE = \"›\";\n    static LAST_PAGE = \"»\";\n    static ELLIPSIS = \"…\";\n\n    constructor(\n        private searchService: SearchService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"results\"]) {\n            this.makeItems();\n        }\n    }\n\n    makeItems() {\n        this.pageCount = this.searchService.pageCount;\n        this.currentPage = this.searchService.page;\n        if (this.pageCount === 0) {\n            this.items = undefined;\n            return;\n        }\n        let endPages = this.endPages;\n        if (!endPages || endPages <= 0) {\n            endPages = 1;\n        }\n\n        const endWidth = endPages + 1; // +1 for the …\n\n        let pages = this.pages;\n        if (!pages) {\n            pages = 3 + endWidth * 2;\n        }\n        if (pages < 3 + endWidth * 2) {\n            pages = 3 + endWidth * 2; // 3 is the minimum number of pages to show between the … separators\n        }\n        let split1 = -1, split2 = -1;\n        if (this.pageCount <= pages) {\n            pages = this.pageCount;\n        }\n        else {\n            // pages must be an odd number to accommodate:  (First page) … (Current page - 1) (Current page) (Current page + 1) … (Last page)\n            pages = Math.floor(pages / 2) * 2 + 1;\n            const mid = pages - endWidth * 2;\n            const delta = Math.floor(mid / 2);\n            if ((this.currentPage - delta) > endPages + 1 + 1) {\n                split1 = this.currentPage - delta;\n            }\n            if ((this.currentPage + delta) < (this.pageCount - endWidth)) {\n                split2 = this.currentPage + delta;\n            }\n            if (split1 === -1 && split2 !== -1) {\n                split2 += endPages + 1 + 1 - (this.currentPage - delta);\n            }\n            else if (split2 === -1 && split1 !== -1)  {\n                split1 -= (this.currentPage + delta) - (this.pageCount - endWidth);\n            }\n        }\n        this.items = [];\n        if (this.showNavigation) {\n            if (this.showFirstLast) {\n                this.items.push(new BsPager.Item(1, this.currentPage, BsPager.FIRST_PAGE, \"msg#pager.firstPage\"));\n            }\n            this.items.push(new BsPager.Item(this.currentPage > 1 ? this.currentPage - 1 : 1, this.currentPage, BsPager.PREVIOUS_PAGE, \"msg#pager.previousPage\"));\n        }\n        if (this.showPages) {\n            for (let i = 1, ic = split1 !== -1 ? endPages : split2 !== -1 ? split2 : this.pageCount; i <= ic; i++) {\n                this.items.push(new BsPager.Item(i, this.currentPage));\n            }\n            if (split1 !== -1) {\n                this.items.push(new BsPager.Item(0, this.currentPage, BsPager.ELLIPSIS));\n                for (let i = split1, ic = split2 !== -1 ? split2 : this.pageCount; i <= ic; i++) {\n                    this.items.push(new BsPager.Item(i, this.currentPage));\n                }\n            }\n            if (split2 !== -1) {\n                this.items.push(new BsPager.Item(0, this.currentPage, BsPager.ELLIPSIS));\n                for (let i = this.pageCount - endPages + 1, ic = this.pageCount; i <= ic; i++) {\n                    this.items.push(new BsPager.Item(i, this.currentPage));\n                }\n            }\n        }\n        if (this.showNavigation) {\n            this.items.push(new BsPager.Item(this.currentPage < this.pageCount ? this.currentPage + 1 : this.pageCount, this.currentPage, BsPager.NEXT_PAGE, \"msg#pager.nextPage\"));\n            if (this.showFirstLast) {\n                this.items.push(new BsPager.Item(this.pageCount, this.currentPage, BsPager.LAST_PAGE, \"msg#pager.lastPage\"));\n            }\n        }\n    }\n\n    gotoPage(page: number) {\n        if (page !== this.currentPage && page > 0) {\n            this.searchService.gotoPage(page);\n        }\n    }\n}\n\nexport namespace BsPager {\n    export class Item {\n        constructor(\n            public page: number,\n            public currentPage: number,\n            public display?: string | number,\n            public title?: string) {\n            if (display) {\n                this.display = display;\n            }\n            else {\n                this.display = page;\n            }\n            if (Utils.isUndefined(title) && page) {\n                this.title = \"msg#pager.pageNumberTitle\";\n            }\n        }\n\n        get active(): boolean {\n            return this.isPage && (this.currentPage === this.page);\n        }\n\n        get disabled(): boolean {\n            return this.isEllipsis || ((this.currentPage === this.page) && this.isNavigation);\n        }\n\n        get isNavigation(): boolean {\n            return this.display === BsPager.FIRST_PAGE ||\n                this.display === BsPager.PREVIOUS_PAGE ||\n                this.display === BsPager.NEXT_PAGE ||\n                this.display === BsPager.LAST_PAGE;\n        }\n\n        get isPage(): boolean {\n            return !!this.page && !this.isNavigation;\n        }\n\n        get isEllipsis(): boolean {\n            return this.display === BsPager.ELLIPSIS;\n        }\n    }\n}","<ul class=\"pagination my-0\" *ngIf=\"pageCount > 1\">\n    <li *ngFor=\"let item of items\" \n        title=\"{{item.title | sqMessage:{values: {page: item.page} } }}\" \n        class=\"page-item\" \n        [ngClass]=\"{'active': item.active, 'disabled': item.disabled, 'sq-navigation': item.isNavigation, 'sq-page': item.isPage, 'sq-ellipsis': item.isEllipsis}\" \n        (click)=\"gotoPage(item.page)\">\n        <a href=\"javascript:void(0)\" class=\"page-link\"> \n            <span>{{item.display | sqNumber}}</span>\n        </a>            \n    </li>\n</ul>","const MODAL_MODULE_PROVIDERS = [];\n\nexport {MODAL_MODULE_PROVIDERS};\n","import {Component, HostBinding, OnInit, OnDestroy, Inject} from \"@angular/core\";\nimport {FormBuilder, FormGroup, FormControl, Validators} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {START_CONFIG, StartConfig} from \"@sinequa/core/web-services\";\nimport {ModalService, MODAL_MODEL, ModalRef, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AuthenticationService, Credentials} from \"@sinequa/core/login\";\n\n@Component({\n    selector: \"sq-login\",\n    templateUrl: \"./login.component.html\"\n})\nexport class BsLogin implements OnInit, OnDestroy {\n    @HostBinding(\"class.sq-login\") true;\n    userNameControl: FormControl;\n    passwordControl: FormControl;\n    providerNameControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n    buttons: ModalButton[];\n    providers: any[];\n    providerName: string;\n\n    constructor(\n        @Inject(MODAL_MODEL) protected model: Credentials,\n        protected modalService: ModalService,\n        protected modalRef: ModalRef,\n        protected formBuilder: FormBuilder,\n        @Inject(START_CONFIG) protected startConfig: StartConfig,\n        protected authenticationService: AuthenticationService) {\n    }\n\n    ngOnInit() {\n        this.userNameControl = new FormControl(this.model.userName, Validators.required);\n        this.passwordControl = new FormControl(this.model.password, Validators.required);\n        this.providerNameControl = new FormControl();\n        this.form = this.formBuilder.group({\n            userName: this.userNameControl,\n            password: this.passwordControl,\n            providerName: this.providerNameControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.model.userName = this.userNameControl.value;\n                this.model.password = this.passwordControl.value;\n                this.providerName = this.providerNameControl.value;\n            });\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.form\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n\n        if (this.startConfig.providers) {\n            Object.keys(this.startConfig.providers).forEach((providerName) => {\n                if (!this.providers) {\n                    this.providerName = \"\";\n                    this.providers = [{displayName: \"msg#modal.login.signInWith\", name: \"\"}];\n                }\n                this.providers.push(this.startConfig.providers![providerName]);\n            });\n        }\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n\n    yes() {\n        this.modalRef.close(ModalResult.Yes);\n    }\n\n    authenticate() {\n        Utils.subscribe(this.authenticationService.authenticateWithProvider(this.providerName),\n            (response) => {\n                this.yes();\n            },\n            (error) => {\n                console.log(\"login.authenticate cancelled: \", error);\n            });\n    }\n}\n","<form novalidate [formGroup]=\"form\">\n    <sq-modal\n        [title]=\"'msg#modal.login.title'\"\n        [buttons]=\"buttons\">\n        <div class=\"form-group sq-form-group\">\n            <label for=\"userName\">{{'msg#modal.login.userName' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"userName\" formControlName=\"userName\" spellcheck=\"off\" cdkFocusInitial>\n        </div>\n        <div class=\"form-group sq-form-group\">\n            <label for=\"password\">{{'msg#modal.login.password' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"password\" class=\"form-control\" id=\"password\" formControlName=\"password\" autocomplete=\"off\" spellcheck=\"off\">\n        </div>\n        <div class=\"form-group sq-form-group\" *ngIf=\"!!providers\">\n            <label for=\"providerName\">{{'msg#modal.login.singleSignOn' | sqMessage}}</label>\n            <select class=\"form-control custom-select\" id=\"providerName\" formControlName=\"providerName\" (change)=\"authenticate()\">\n                <option *ngFor=\"let provider of providers\" [value]=\"provider.name\" [hidden]=\"!provider.name\" [disabled]=\"!provider.name\">{{(provider.displayName || provider.name) | sqMessage}}</option>\n            </select>\n        </div>\n    </sq-modal>\n</form>","import {Injectable, Inject} from \"@angular/core\";\nimport {START_CONFIG, StartConfig, SqHttpClient, HttpService} from \"@sinequa/core/web-services\";\nimport {Observable} from \"rxjs\";\nimport {map} from \"rxjs/operators\";\n\n/**\n * A service to manage JWT and CSRF tokens. The methods of this service\n * can be called before the authentication process has completed\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class TokenService extends HttpService {\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Retrieve the CSRF token corresponding to the current JWT cookie\n     * which should accompany the request. This method is called by\n     * [AuthenticationService.autoAuthenticate]{@link AuthenticationService#autoAuthenticate}\n     *\n     * @param notify `true` if any errors should be notified using the {@NotificationService}\n     */\n    getCsrfToken(notify = false): Observable<string> {\n        return this.httpClient.get<{csrfToken: string}>(this.makeUrl(\"challenge\"), {\n            params: this.makeParams({\n                action: \"getCsrfToken\",\n                suppressErrors: !notify,\n                noUserOverride: true,\n                noAutoAuthentication: true,\n                noNotify: !notify\n            })\n        }).pipe(\n            map((value) => {\n                return value.csrfToken;\n            }));\n    }\n\n    /**\n     * Delete the current JWT cookie.\n     * This method is called by [AuthenticationService.logout]{@link AuthenticationService#logout}\n     */\n    deleteWebTokenCookie(): Observable<void> {\n        return this.httpClient.get<void>(this.makeUrl(\"challenge\"), {\n            params: this.makeParams({\n                action: \"deleteWebTokenCookie\",\n                noUserOverride: true,\n                noAutoAuthentication: true\n            })\n        });\n    }\n}\n","export default {\n    \"results\": {\n        \"viewTitle\": \"Vue : {text}\",\n        \"unselectableViewDisplay\": \"<Autre>\",\n        \"resultsListView\": {\n            \"display\": \"Liste\",\n            \"selectDocument\": \"Sélectionner le document\",\n            \"unselectDocument\": \"Désélectionner le document\",\n            \"previewPopup\": \"Document Navigator\",\n            \"previewInCurrentPage\": \"Document Navigator (dans la page courante)\",\n            \"previewInNewTab\": \"Document Navigator (dans un nouvel onglet)\",\n            \"showMetadata\": \"Détails\",\n            \"showLabels\": \"Libellés\"\n        },\n        \"resultsGridView\": {\n            \"display\": \"Grille\",\n            \"selectDocument\": \"Sélectionner le document\",\n            \"unselectDocument\": \"Désélectionner le document\",\n            \"selectDocuments\": \"Sélectionner les documents\",\n            \"unselectDocuments\": \"Désélectionner les documents \"\n        },\n        \"viewPageSize\": \"Nombre de résultats par page\",\n        \"viewUpdateApply\": \"Appliquer\",\n        \"warningNoViewForTab\": \"L'onglet '{tab}' n'est associé à aucune vue.\",\n        \"warningCannotDisplayTabOnView\": \"L'onglet '{tab}' ne peut pas être affiché dans la vue '{view}' car il n'est pas inclus dans la configuration de la vue.\",\n\n        \"resultsAllTab\": \"Tous\",\n        \"resultsTextTab\": \"Texte\",\n        \"results_all_tab\": \"Tous\",\n        \"results_text_tab\": \"Texte\",\n    }\n};\n","\nexport * from \"./advanced-form-checkbox/advanced-form-checkbox\";\nexport * from \"./advanced-form-input/advanced-form-input\";\nexport * from \"./advanced-form-multi-input/advanced-form-multi-input\";\nexport * from \"./advanced-form-range/advanced-form-range\";\nexport * from \"./advanced-form-select/advanced-form-select\";\nexport * from \"./advanced.module\";\nexport * from \"./advanced-form-select/select/select\";\nexport * from \"./advanced-form-range/date-picker/date-picker\";\nexport * from \"./advanced-form-range/date-range-picker/date-range-picker\";\nexport * from \"./advanced-form-autocomplete.directive\";\nexport * from \"./advanced-form-validation.directive\";\nexport * from \"./advanced-form-multi-input/advanced-form-autocomplete-multi-input.directive\";\n","export * from \"./public-api\";","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {ModalModule as CoreModalModule} from \"@sinequa/core/modal\";\nimport {LoginModule} from \"@sinequa/core/login\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsModal} from \"./modal.component\";\nimport {BsModalHeader} from \"./modal-header.component\";\nimport {BsModalFooter} from \"./modal-footer.component\";\nimport {BsLogin} from \"./login.component\";\nimport {BsConfirm} from \"./confirm.component\";\nimport {BsPrompt} from \"./prompt.component\";\nimport {BsHelp} from \"./help/help\";\nimport {BsOverrideUser} from \"./override-user/override-user\";\nimport {BsEditable} from \"./editable/editable\";\n\nimport {OverlayModule} from \"@angular/cdk/overlay\";\nimport {A11yModule} from \"@angular/cdk/a11y\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n        OverlayModule,\n        A11yModule,\n\n        IntlModule,\n        ValidationModule,\n        CoreModalModule.forRoot(BsConfirm, BsPrompt),\n        LoginModule.forRoot(BsLogin),\n\n        UtilsModule,\n    ],\n    declarations: [\n        BsModal, BsModalHeader, BsModalFooter, BsLogin, BsConfirm,\n        BsHelp, BsOverrideUser, BsEditable, BsPrompt\n    ],\n    exports: [\n        BsModal, BsModalHeader, BsModalFooter, BsLogin, BsConfirm,\n        BsHelp, BsOverrideUser, BsEditable, BsPrompt\n    ],\n})\nexport class BsModalModule {\n}","export default {\n\n    \"userMenu\": {\n        \"user\": \"Benutzer\",\n        \"login\": \"Anmeldung\",\n        \"overrideUser\": \"Benutzer wechseln\",\n        \"settings\": \"Einstellungen\",\n        \"revertUserOverride\": \"Zum Administrator zurückkehren\",\n        \"administration\": \"Administration\",\n        \"logout\": \"Abmeldung\",\n\n        \"language\": \"Sprache\",\n        \n        \"resetUserSettings\": {\n            \"menu\": \"Benutzereinstellungen zurücksetzen\",\n            \"modalTitle\": \"Benutzereinstellungen zurücksetzen\",\n            \"modalMessage\": \"Sie sind dabei, ALLE Ihre Benutzerdaten zurückzusetzen (letzte Abfragen, Sammlungen, Warnungen, Einstellungen usw.). Möchtest du fortfahren?\",\n            \"modalConfirmButton\": \"Bestätigen\",\n            \"successMessage\": \"Benutzereinstellungen erfolgreich zurücksetzen\",\n            \"errorMessage\": \"Benutzereinstellungen zurücksetzen fehlgeschlagen\"\n        }\n    },\n\n    \"editUserSettings\": {\n        \"title\": \"Einstellungen\",\n        \"language\": \"Sprache der Benutzeroberfläche\",\n        \"pageSize\": \"Anzahl der Ergebnisse pro Seite\",\n        \"email\": \"E-Mail\"\n    }\n\n};\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe} from \"./abstract-intl.pipe\";\nimport {IntlService} from \"./intl.service\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\n\n/**\n * Describes the parameters that can be passed to the [sqMessage]{@link MessagePipe} pipe\n */\nexport interface MessageParams {\n    /**\n     * Values that can be referenced from ICU messages\n     */\n    values?: MapOf<any>;\n}\n\n/**\n * A pipe to display messages in the current locale. Inputs are processed by\n * [IntlService.formatMessage]{@link IntlService#formatMessage}\n */\n@Pipe({name: \"sqMessage\", pure: false})\nexport class MessagePipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    protected updateValue(value: any, params: MessageParams): void {\n        if (!Utils.isEmpty(value)) {\n            // coerce to string (eg sys date strings get converted to dates so if this happens to a title we will break otherwise)\n            value = value + \"\";\n        }\n        super.updateValue(value, params);\n        if (!value) {\n            this.value = value;\n            return;\n        }\n        let values: MapOf<any> | undefined;\n        if (params) {\n            values = params.values ? params.values : params;\n        }\n        this.value = this.intlService.formatMessage(value, values);\n    }\n}\n","import {Injectable} from \"@angular/core\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {Utils, FieldValue} from \"@sinequa/core/base\";\nimport {AppServiceHelpers} from \"./app-service-helpers\";\nimport {CCColumn} from \"@sinequa/core/web-services\";\nimport {format} from \"d3-format\";\n\n/**\n * Describes a value item object that includes a {@link FieldValue} and an optional display value\n * to override standard field value formatting\n */\nexport interface ValueItem {\n    value: FieldValue;\n    display?: string;\n    count?: number; // Following ES-11166, the number of occurrence for an entity can be included\n}\n\n/**\n * This service provides methods for locale-sensitive formatting and parsing of values that can be found in\n * Sinequa search results.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class FormatService {\n    constructor(\n        public intlService: IntlService) {\n    }\n\n    /**\n     * Returns `true` if the passed parameter is a `ValueItem` object\n     */\n    protected isValueItem(valueItem: ValueItem | FieldValue): valueItem is ValueItem {\n        if (Utils.isObject(valueItem) && !Utils.isDate(valueItem) && !Utils.isArray(valueItem)) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Extracts the value and display components from a parameter that can be either a `ValueItem`\n     * object or a simple `FieldValue`, in which case the display will be `undefined`.\n     */\n    protected getValueAndDisplay(valueItem: ValueItem | FieldValue): [FieldValue, string] {\n        let value: FieldValue;\n        let display: string;\n        if (this.isValueItem(valueItem)) {\n            value = valueItem.value;\n            display = valueItem.display || \"\";\n        }\n        else {\n            value = valueItem;\n            display = \"\";\n        }\n        return [value, display];\n    }\n\n    /**\n     * Return the display equivalent of a Sinequa language specifier (`en`, `fr`, ...).\n     * The display values are defined in the {@link IntlModule} message files\n     *\n     * @param value A value containing a Sinequa language specifier\n     */\n    formatLanguage(value: FieldValue): string {\n        return this.intlService.formatMessage(`msg#language.${Utils.toLowerCase(value + \"\")}`);\n    }\n\n    /**\n     * Return the display equivalent of a size value. The units (`kb`, `mb`, ...) are defined\n     * in the {@link IntlModule} message files\n     *\n     * @param size A memory size in bytes\n     */\n    formatMemorySize(size: number): string {\n        const kiloBytes: number = size / 1024;\n        const megaBytes: number = kiloBytes / 1024;\n        const gigaBytes: number = megaBytes / 1024;\n        const teraBytes: number = gigaBytes / 1024;\n        const petaBytes: number = teraBytes / 1024;\n\n        let messageKey = \"msg#system.memorySize.bytes\";\n        const params: any = { value: size };\n        if (Math.abs(petaBytes) >= 1) {\n            messageKey = \"msg#system.memorySize.pb\";\n            params.value = petaBytes;\n        }\n        else if (Math.abs(teraBytes) >= 1) {\n            messageKey = \"msg#system.memorySize.tb\";\n            params.value = teraBytes;\n        }\n        else if (Math.abs(gigaBytes) >= 1) {\n            messageKey = \"msg#system.memorySize.gb\";\n            params.value = gigaBytes;\n        }\n        else if (Math.abs(megaBytes) >= 1) {\n            messageKey = \"msg#system.memorySize.mb\";\n            params.value = megaBytes;\n        }\n        else if (Math.abs(kiloBytes) >= 1) {\n            messageKey = \"msg#system.memorySize.kb\";\n            params.value = kiloBytes;\n        }\n        return this.intlService.formatMessage(messageKey, params);\n    }\n\n    /** D3 formatter for large number: 42096 => 42K */\n    bigNumberFormatter = format(\"~s\");\n\n    /** Similar to bigNumberFormatter, but replaces \"G\" by \"B\" (as in \"$42B\") */\n    moneyFormatter = s => this.bigNumberFormatter(s).replace(/G/, \"B\");\n    \n    /**\n     * Format an amount of money (typically extracted by a Sinequa Text-mining agent)\n     * USD 42069 => USD 42K\n     * @param value \n     * @returns \n     */\n    formatMoney(value: string): string {\n        let [currency, val] = value.split(\" \");\n        return `${currency} ${this.moneyFormatter(+val)}`;\n    }\n\n    /**\n     * Format a value for display according to the passed `column`. Formatters\n     * can be defined in the column's configuration to provide domain-specific\n     * formatting. The standard formatters are `language` and `memorysize`.\n     *\n     * @param valueItem The value to format\n     * @param column The column associated with the value\n     */\n    formatValue(valueItem: ValueItem | FieldValue, column?: CCColumn): string {\n        let [value, display] = this.getValueAndDisplay(valueItem);\n        if (column && column.formatter) {\n            switch (Utils.toLowerCase(column.formatter)) {\n                case \"language\": return this.formatLanguage(value);\n                case \"memorysize\":\n                    if (Utils.isNumber(value)) {\n                        return this.formatMemorySize(value);\n                    }\n                    break;\n                case \"money\":\n                    if(Utils.isString(value)) {\n                        return this.formatMoney(value);\n                    }\n                    else if(Utils.isArray(value)) {\n                        return value.map(v => \n                            this.formatMoney(Utils.isString(v)? v : v.value)\n                        ).join(', ');\n                    }\n                    break;\n            }\n        }\n        if (display) {\n            if (Utils.isDate(display)) { // ES-7785\n                display = Utils.toSysDateStr(display);\n            }\n            return this.intlService.formatMessage(display, {value});\n        }\n        if (Utils.isNumber(value)) {\n            const message = this.intlService.getMessage(\"msg#system.number\");\n            if (message) {\n                return this.intlService.formatText(message, {value});\n            }\n            else {\n                return this.intlService.formatNumber(value);\n            }\n        }\n        if (column && AppServiceHelpers.isDate(column) && Utils.isString(value)) {\n            value = Utils.fromSysDateStr(value) || value;\n        }\n        if (Utils.isDate(value)) {\n            if (column && !AppServiceHelpers.isDate(column)) { // ES-7785\n                value = Utils.toSysDateStr(value);\n            }\n            else {\n                const message = this.intlService.getMessage(\"msg#system.date\");\n                if (message) {\n                    return this.intlService.formatText(message, {date: value, time: Utils.getTime(value)});\n                }\n                else {\n                    let s = this.intlService.formatDate(value);\n                    if (Utils.getTime(value) !== 0) {\n                        s += \", \" + this.intlService.formatTime(value);\n                    }\n                    return s;\n                }\n            }\n        }\n        if (Utils.isBoolean(value)) {\n            const message = this.intlService.getMessage(\"msg#system.boolean\");\n            if (message) {\n                return this.intlService.formatText(message, {value});\n            }\n            else {\n                return value.toString();\n            }\n        }\n        if (Utils.isArray(value)) {\n            const joinValue: string[] = [];\n            value.forEach(v => {\n                if (joinValue.length > 0) {\n                    joinValue.push(\";\");\n                }\n                let _v: string;\n                if (!v) {\n                    _v = \"<null>\";\n                }\n                else if (Utils.isDate(v)) {\n                    _v = Utils.toSysDateStr(v);\n                }\n                else if (Utils.isString(v)) {\n                    _v = v;\n                }\n                else {\n                    _v = v.display || v.value || \"<null>\";\n                }\n                joinValue.push(_v);\n            });\n            value = joinValue.join(\"\");\n        }\n        if (!value) {\n            return value;\n        }\n        return this.intlService.formatMessage(value);\n    }\n\n    /**\n     * Transform a display value. Multiple transformers can be defined on a column and their calls are chained.\n     * The standard formatters are `uppercase`, `upperfirst`, `lowercase`, `lowerfirst`, `startcase`, `kebabcase`,\n     * `snakecase` and `camelcase`.\n     *\n     * @param value The value to transform\n     * @param column The column associated with the value\n     */\n    transformValue(value: string, column?: CCColumn): string {\n        const transforms = column ? Utils.split(column.transforms || \"\", \",\") : undefined;\n        if (!transforms || transforms.length === 0) {\n            return value;\n        }\n        // transforms are composable\n        for (const transform of transforms) {\n            switch (Utils.toLowerCase(transform)) {\n                case \"uppercase\": value = Utils.toUpperCase(value); break;\n                case \"upperfirst\": value = Utils.toUpperFirst(value); break;\n                case \"lowercase\": value = Utils.toLowerCase(value); break;\n                case \"lowerfirst\": value = Utils.toLowerFirst(value); break;\n                case \"startcase\": value = Utils.toStartCase(value); break;\n                case \"kebabcase\": value = Utils.toKebabCase(value); break;\n                case \"snakecase\": value = Utils.toSnakeCase(value); break;\n                case \"camelcase\": value = Utils.toCamelCase(value); break;\n            }\n        }\n        return value;\n    }\n\n    /**\n     * Format a value item for display. This is the standard entry point for formatting a value.\n     * By default, this method calls [formatValue]{@link #formatValue} and [transformValue]{@link #transformValue}.\n     *\n     * @param valueItem The value item to format\n     * @param column The column associated with the value item\n     */\n    formatFieldValue(valueItem: ValueItem | FieldValue, column?: CCColumn): string {\n        let formattedValue = this.formatValue(valueItem, column);\n        formattedValue = this.transformValue(formattedValue, column);\n        return formattedValue;\n    }\n\n    /**\n     * Parse an input value according to the passed `parser`. The standard parser is `memorysize`. Parsers\n     * are configured in the {@link CCColumn} configuration. The parsed value is returned as a string for\n     * processing by the {@link ValidationModule}\n     *\n     * @param value The value to parse\n     * @param parser The parser to use\n     */\n    parseValue(value: any, parser: string): string {\n        if (Utils.isString(value)) {\n            if (parser) {\n                switch (Utils.toLowerCase(parser)) {\n                    case \"memorysize\": {\n                        return this.parseMemorySize(value) + \"\";\n                    }\n                }\n            }\n        }\n        return value;\n    }\n\n    /**\n     * Parse a size string using [Utils.toSize]{@link Utils#toSize}\n     *\n     * @param str The string to parse\n     * @param _default The default value to return if the string cannot be parsed\n     * @return The parsed size in bytes\n     */\n    parseMemorySize(str: string, _default = 0): number {\n        return Utils.toSize(str, _default);\n    }\n\n    /**\n     * Display a raw value without applying any formatting\n     * (besides the native toString() method for non-string values)\n     * @param value \n     * @returns \n     */\n    formatRaw(value: ValueItem | FieldValue): string {\n        let [val] = this.getValueAndDisplay(value);\n        if(Utils.isArray(val)) {\n            return val.map(v => Utils.isString(v)? v : v.value).join(';');\n        }\n        return val?.toString();\n    }\n}\n","import {Utils} from \"@sinequa/core/base\";\nimport {enFacet, frFacet, deFacet} from \"@sinequa/components/facet\";\nimport _enGooglemaps from \"./en\";\nimport _frGooglemaps from \"./fr\";\nimport _deGooglemaps from \"./de\";\n\nconst enGooglemaps = Utils.merge({}, _enGooglemaps, enFacet);\nconst frGooglemaps = Utils.merge({}, _frGooglemaps, frFacet);\nconst deGooglemaps = Utils.merge({}, _deGooglemaps, deFacet);\n\nexport { enGooglemaps, frGooglemaps, deGooglemaps };\n","import \"fast-text-encoding\"; // IE 11 / Edge\n\n// NB the name of the intl polyfill (below) conflicts with @sinequa/core/intl in the module resolution.\n// Output of traceResolution: true gives the following:\n//\n// Resolving module name 'intl' relative to base url 'D:/ice/sba/ng-ws/projects/core' - 'D:/ice/sba/ng-ws/projects/core/intl'.\n// Loading module as file / folder, candidate module location 'D:/ice/sba/ng-ws/projects/core/intl', target file type 'TypeScript'.\n// ...\n// This can be worked around in a number of ways:\n// 1. Rename the @sinequa/core/intl folder and all references to it (not overly desirable)\n// 2. Install the intl polyfill using an alias: npm install my-intl-alias@npm:intl. But then references in the locale files would have\n//    to use import \"my-intl-alias/...\"\n// 3. Don't use index.ts as the entry point filename. This is a bit hacky but it works and has the least impact so that's what we've gone with\n//    _index.ts is used and referenced in package.json: { \"ngPackage\": { \"lib\": { \"entryFile\": \"index.ts\" } } }\n//    We also put an explicit Path to @sinequa/core/intl => ./intl/_index in the local tsconfig.json so that references to @sinequa/core/intl\n//    are resolved correctly in VSCode\nimport \"intl\"; // Safari\nimport \"intl/locale-data/jsonp/en-US\"; // Locale needed for formatjs initialization (new Intl.NumberFormat())\nimport \"js-polyfills/url\";\nimport \"matchmedia-polyfill\";\nimport focusWithin from \"focus-within\"; // IE 11 / Edge - https://github.com/jonathantneal/focus-within\n\nfocusWithin(document);\n\n// String.trimStart, String.trimEnd\nif (!(<any>String.prototype).trimStart) {\n  (<any>String.prototype).trimStart = function () {\n    return this.replace(/^[\\s\\uFEFF\\xA0]+/g, '');\n  };\n}\n\nif (!(<any>String.prototype).trimEnd) {\n  (<any>String.prototype).trimEnd = function () {\n    return this.replace(/[\\s\\uFEFF\\xA0]+$/g, '');\n  };\n}\n\n// See https://gist.github.com/jocki84/6ffafd003387179a988e\nif (!(<any>Element.prototype).scrollIntoViewIfNeeded) {\n    (<any>Element.prototype).scrollIntoViewIfNeeded = function (centerIfNeeded) {\n        function withinBounds(value, min, max, extent) {\n            if (false === centerIfNeeded || max <= value + extent && value <= min + extent) {\n                return Math.min(max, Math.max(min, value));\n            } else {\n                return (min + max) / 2;\n            }\n        }\n\n        function makeArea(left, top, width, height) {\n            return  { \"left\": left, \"top\": top, \"width\": width, \"height\": height\n                    , \"right\": left + width, \"bottom\": top + height\n                    , \"translate\":\n                        function (x, y) {\n                            return makeArea(x + left, y + top, width, height);\n                        }\n                    , \"relativeFromTo\":\n                        function (lhs, rhs) {\n                            let newLeft = left, newTop = top;\n                            lhs = lhs.offsetParent;\n                            rhs = rhs.offsetParent;\n                            if (lhs === rhs) {\n                                return area;\n                            }\n                            for (; lhs; lhs = lhs.offsetParent) {\n                                newLeft += lhs.offsetLeft + lhs.clientLeft;\n                                newTop += lhs.offsetTop + lhs.clientTop;\n                            }\n                            for (; rhs; rhs = rhs.offsetParent) {\n                                newLeft -= rhs.offsetLeft + rhs.clientLeft;\n                                newTop -= rhs.offsetTop + rhs.clientTop;\n                            }\n                            return makeArea(newLeft, newTop, width, height);\n                        }\n                    };\n        }\n\n        let parent, elem = this, area = makeArea(\n            this.offsetLeft, this.offsetTop,\n            this.offsetWidth, this.offsetHeight);\n        while ((parent = elem.parentNode) instanceof HTMLElement) {\n            const clientLeft = parent.offsetLeft + parent.clientLeft;\n            const clientTop = parent.offsetTop + parent.clientTop;\n\n            // Make area relative to parent's client area.\n            area = area.\n                relativeFromTo(elem, parent).\n                translate(-clientLeft, -clientTop);\n\n            parent.scrollLeft = withinBounds(\n                parent.scrollLeft,\n                area.right - parent.clientWidth, area.left,\n                parent.clientWidth);\n\n            parent.scrollTop = withinBounds(\n                parent.scrollTop,\n                area.bottom - parent.clientHeight, area.top,\n                parent.clientHeight);\n\n            // Determine actual scroll amount by reading back scroll properties.\n            area = area.translate(clientLeft - parent.scrollLeft,\n                                  clientTop - parent.scrollTop);\n            elem = parent;\n        }\n    };\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n(function () {\n\n  if ( typeof (<any>window).CustomEvent === \"function\" ) return;\n\n  function CustomEvent ( event, params ) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    const evt = document.createEvent( 'CustomEvent' );\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    return evt;\n   }\n\n  CustomEvent.prototype = (<any>window).Event.prototype;\n\n  (<any>window).CustomEvent = CustomEvent;\n})();\n\n// IE\nif (!window.location.origin) { // Some browsers (mainly IE) do not have this property, so we need to build it manually...\n    try {\n        window.location[/*foo readonly*/<string>\"origin\"] = window.location.protocol + '//' + window.location.hostname + (window.location.port ? (':' + window.location.port) : '');\n    }\n    catch (e) {\n    }\n}\n\n// fake storage (eg for Safari private browsing)\nfunction fakeStorage(storageName: string) {\n    let fakeStorage = {};\n    let storage;\n    let needed = false;\n\n    if (typeof window[storageName] === \"object\") {\n        // Storage is there, does it work (eg Safari private browsing)\n        try {\n            window[storageName].setItem(\"fakeStorageTest\", \"1\");\n            window[storageName].removeItem(\"fakeStorageTest\");\n        }\n        catch (e) {\n            needed = true;\n        }\n    }\n    else {\n        needed = true;\n    }\n\n    if (!needed) {\n        return;\n    }\n\n    if (typeof window[storageName] === \"object\") {\n        // Override with fake implementation\n        storage = window[storageName];\n    }\n    else {\n        // Implement with fake\n        try {\n            storage = window[/*fool readonly*/<string>storageName] = {};\n        }\n        catch (e) {\n            console.warn(\"Unable to set fake\", storageName);\n            return;\n        }\n    }\n\n    console.warn(\"Using fake\", storageName);\n\n    const dispatchStorageEvent = function(key, newValue) {\n        const oldValue = (!key) ? null : storage.getItem(key);\n        const url = location.href.substr(location.origin.length);\n        const storageEvent = document.createEvent(\"StorageEvent\"); // For IE, http://stackoverflow.com/a/25514935/1214183\n\n        storageEvent[\"initStorageEvent\"](\"storage\", false, false, key, oldValue, newValue, url, storage);\n        window.dispatchEvent(storageEvent);\n    };\n\n    storage.key = function(i) {\n        const key = Object.keys(fakeStorage)[i];\n        return typeof key === \"string\" ? key : null;\n    };\n\n    storage.getItem = function(key) {\n        return typeof fakeStorage[key] === 'string' ? fakeStorage[key] : null;\n    };\n\n    storage.setItem = function(key, value) {\n        dispatchStorageEvent(key, value);\n        fakeStorage[key] = String(value);\n    };\n\n    storage.removeItem = function(key) {\n        dispatchStorageEvent(key, null);\n        delete fakeStorage[key];\n    };\n\n    storage.clear = function() {\n        dispatchStorageEvent(null, null);\n        fakeStorage = {};\n    };\n}\n\nfakeStorage(\"localStorage\");\nfakeStorage(\"sessionStorage\");\n\n// DOMRect polyfill\n// Credit: https://github.com/Financial-Times/polyfill-service/pull/1732\n(function(global: any) {\n    if (global.DOMRect) {\n        return;\n    }\n    function number(v) {\n        return v === undefined ? 0 : Number(v);\n    }\n    function different(u, v) {\n        return u !== v && !(isNaN(u) && isNaN(v));\n    }\n    function DOMRect(this: DOMRect, xArg, yArg, wArg, hArg) {\n        let x; let y; let width; let height; let left; let right; let top; let bottom;\n        x = number(xArg);\n        y = number(yArg);\n        width = number(wArg);\n        height = number(hArg);\n        Object.defineProperties(this, {\n            x: {\n                get: function () { return x; },\n                set: function (newX) {\n                    if (different(x, newX)) {\n                        x = newX;\n                        left = right = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            y: {\n                get: function () { return y; },\n                set: function (newY) {\n                    if (different(y, newY)) {\n                        y = newY;\n                        top = bottom = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            width: {\n                get: function () { return width; },\n                set: function (newWidth) {\n                    if (different(width, newWidth)) {\n                        width = newWidth;\n                        left = right = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            height: {\n                get: function () { return height; },\n                set: function (newHeight) {\n                    if (different(height, newHeight)) {\n                        height = newHeight;\n                        top = bottom = undefined;\n                    }\n                },\n                enumerable: true\n            },\n            left: {\n                get: function () {\n                    if (left === undefined) {\n                        left = x + Math.min(0, width);\n                    }\n                    return left;\n                },\n                enumerable: true\n            },\n            right: {\n                get: function () {\n                    if (right === undefined) {\n                        right = x + Math.max(0, width);\n                    }\n                    return right;\n                },\n                enumerable: true\n            },\n            top: {\n                get: function () {\n                    if (top === undefined) {\n                        top = y + Math.min(0, height);\n                    }\n                    return top;\n                },\n                enumerable: true\n            },\n            bottom: {\n                get: function () {\n                    if (bottom === undefined) {\n                        bottom = y + Math.max(0, height);\n                    }\n                    return bottom;\n                },\n                enumerable: true\n            }\n        });\n    }\n    global.DOMRect = DOMRect;\n}(window));\n\n// Element.closest and Element.matches polyfills (see https://developer.mozilla.org/en-US/docs/Web/API/Element/closest)\nif (!Element.prototype.matches) {\n    Element.prototype.matches =\n        (Element.prototype as any).msMatchesSelector ||\n        Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n    Element.prototype.closest = function(s) {\n        let el = this;\n        do {\n            if (el.matches(s)) {\n                return el;\n            }\n            el = el.parentElement || el.parentNode as Element;\n        } while (el !== null && el.nodeType === 1);\n        return null;\n    };\n}\n\nexport {\n};\n","export * from \"./public-api\";","export * from \"./baskets.module\";\nexport * from \"./baskets-menu/baskets-menu.component\";\nexport * from \"./edit-basket/edit-basket\";\nexport * from \"./facet-baskets/facet-baskets.component\";\nexport * from \"./manage-baskets/manage-baskets\";\nexport * from \"./result-baskets/result-baskets\";\nexport * from \"./select-basket/select-basket\";\n","import {Injectable, Inject, OnDestroy} from \"@angular/core\";\nimport {Subject, Observable} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AuditEvents} from \"./audit.web.service\";\nimport jstz from \"jstz\";\n\n/**\n * Minimal built-in user settings. Can be extended in the context of\n * complex applications to store user data, preferences, objects, etc.\n */\nexport interface UserSettings {\n    language?: string;\n    skipCount?: number;\n    email?: string;\n    [key: string]: any;\n}\n\n/**\n * A base event from which all events that can be issued by the {@link UserSettingsWebService} are derived\n */\nexport interface UserSettingsEvent {\n    type: \"changed\";\n}\n\n/**\n * This event is fired each time the [userSettings]{@link UserSettingsWebService#userSettings} member is modified.\n * Typically this will be at login / logoff and also if the \"override user\" admin feature is used.\n */\nexport interface UserSettingsChangedEvent extends UserSettingsEvent {\n    type: \"changed\";\n}\n\n/**\n * A service for calling the usersettings web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class UserSettingsWebService extends HttpService implements OnDestroy {\n    private _userSettings: UserSettings | undefined;\n    /**\n     * The timezone for the user\n     */\n    timezone: string;\n    /**\n     * A reviver function that, if set, will be called on the user settings when they are loaded\n     */\n    reviver: (us: UserSettings) => void;\n    private _events = new Subject<UserSettingsChangedEvent>();\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n        this.timezone = jstz.determine().name(); // until momentjs gets this\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n    }\n\n    /**\n     * The observable events emitted by this service\n     */\n    get events(): Observable<UserSettingsChangedEvent> {\n        return this._events;\n    }\n\n    /**\n     * Gets the current {@link UserSettings}\n     */\n    get userSettings(): UserSettings | undefined {\n        return this._userSettings;\n    }\n\n    /**\n     * Sets the current {@link UserSettings} and issues the \"changed\" event\n     */\n    set userSettings(value: UserSettings | undefined) {\n        this._userSettings = value;\n        this._events.next({type: \"changed\"});\n    }\n\n    //TODO remove\n    /**\n     * @deprecated use \"userSettings\" get property to retrieve the user settings\n     * @returns User settings object or undefined\n     */\n    public getUserSettings(): UserSettings | undefined{\n        return this.userSettings;\n    }\n\n    /**\n     * Load the user settings for the currently logged in user.\n     * Sets the userSettings member and issues the \"changed\" event\n     */\n    public load(): Observable<UserSettings> {\n        const observable = this.httpClient.get<UserSettings>(this.makeUrl(\"usersettings\"), {\n            params: this.makeParams({\n                app: this.appName,\n                action: \"load\"\n            })\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                this.userSettings = response;\n                if (this.userSettings) {\n                    if (this.reviver) {\n                        this.reviver(this.userSettings);\n                    }\n                }\n            },\n            (error) => {\n                console.log(\"userSettingsService.load failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Saves the current user settings on the server\n     *\n     * @param auditEvents\n     */\n    public save(auditEvents?: AuditEvents): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"usersettings\"), {\n            app: this.appName,\n            action: \"save\",\n            userSettings: this.userSettings,\n            $auditRecord: auditEvents\n        });\n        Utils.subscribe(observable,\n            (response) => response,\n            (error) => {\n                console.log(\"userSettingsService.save failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Patches the user settings on the server using a partial user settings object. The partial\n     * object is used to update the user settings on the server according to [RFC7396]{@link https://tools.ietf.org/html/rfc7396}\n     *\n     * @param userSettings The partial user settings\n     * @param auditEvents Any associated audit events to store on the server\n     */\n    public patch(userSettings: UserSettings, auditEvents?: AuditEvents): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"usersettings\"), {\n            app: this.appName,\n            action: \"patch\",\n            userSettings: userSettings,\n            $auditRecord: auditEvents\n        });\n        Utils.subscribe(observable,\n            (response) => response,\n            (error) => {\n                console.log(\"userSettingsService.patch failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Resets User Settings (emits a change event and audit events).\n     */\n    public reset() {\n        // Save current state\n        const currentState = this.userSettings;\n        // Reset User settings (and emit an event!)\n        this.userSettings = {};\n        const observable = this.save({\n            type: 'UserSettings_Reset'\n        });\n        observable.subscribe({\n            next: () => {},\n            error: () => this.userSettings = currentState // Restore previous state\n        })\n        return observable;\n    }\n\n    /**\n     * Reads a user setting.\n     *\n     * @param paths The path to the setting in the JSON.\n     */\n    public readUserSetting(paths: string[]): any {\n        let json: any = this.userSettings;\n        if (json) {\n            for (const path of paths) {\n                json = json[path];\n                if (!json) {\n                    // Value does not exist yet\n                    return undefined;\n                }\n            }\n        }\n        return json;\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { BasketsService, Basket, BasketEventType } from '../../baskets.service';\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\n\n@Component({\n  selector: 'sq-facet-baskets',\n  templateUrl: './facet-baskets.component.html',\n  styles: [`\n.basket-item .basket-delete{\n    opacity: 0;\n}\n\n.basket-item:hover .basket-delete{\n    opacity: 1;\n    transition: opacity 0.2s ease-in-out;\n}\n  `]\n})\nexport class BsFacetBasketsComponent extends AbstractFacet {\n  @Input() searchRoute: string = \"/search\";\n  @Input() maxBaskets: number = 5;\n  @Input() enableDelete: boolean = true;\n\n  page: number = 0;\n\n  createBasket: Action;\n  manageBasket: Action;\n  previousPage: Action;\n  nextPage: Action;\n\n  constructor(\n    public basketsService: BasketsService) {\n    super();\n\n    this.createBasket = new Action({\n      icon: \"fas fa-plus\",\n      title: \"msg#baskets.createBasket\",\n      action: () => {\n        this.basketsService.createBasketModal();\n      }\n    });\n\n    this.manageBasket = new Action({\n      icon: \"fas fa-cog\",\n      title: \"msg#baskets.manageBaskets\",\n      action: () => {\n        this.basketsService.manageBasketsModal();\n      }\n    });\n\n    this.previousPage = new Action({\n      icon: \"fas fa-chevron-left\",\n      title: \"msg#facet.previous\",\n      action: () => {\n        this.page--;\n      },\n      updater: (action: Action) => {\n        action.disabled = this.page <= 0;\n        action.hidden = this.maxPage === 0;\n      }\n    });\n\n    this.nextPage = new Action({\n      icon: \"fas fa-chevron-right\",\n      title: \"msg#facet.next\",\n      action: () => {\n        this.page++;\n      },\n      updater: (action: Action) => {\n        action.disabled = this.page >= this.maxPage;\n        action.hidden = this.maxPage === 0;\n      }\n    });\n  }\n\n  get maxPage(): number {\n    return Math.max(0, Math.ceil(this.basketsService.baskets.length / this.maxBaskets) - 1);\n  }\n\n  get startIndex(): number {\n    return this.page * this.maxBaskets;\n  }\n\n  get endIndex(): number {\n    return (this.page+1) * this.maxBaskets;\n  }\n\n  openBasket(basket: Basket){\n    this.basketsService.notifyOpenBasket(basket)\n    return true;\n  }\n\n  get actions(): Action[] {\n    this.previousPage.update();\n    this.nextPage.update();\n    return [this.createBasket, this.previousPage, this.nextPage, this.manageBasket];\n  }\n\n  deleteBasket(basket: Basket, event: Event){\n    event.stopPropagation();\n    this.basketsService.deleteBasket(basket);\n    this.page = Math.min(this.page, this.maxPage);\n    return false;\n  }\n\n  getQueryParams(basket: Basket) {\n    const query = this.basketsService.makeQuery(basket);\n    const queryParams = query.toJsonForQueryString();\n    return {query: queryParams};\n  }\n\n  getRouterState(basket: Basket) {\n    return {\n      audit: {\n        type: BasketEventType.Open,\n        detail: {\n          basket: basket.name\n        }\n      }\n    }\n  }\n}\n","<div class=\"list-group list-group-flush\">\n    <a *ngFor=\"let basket of basketsService.baskets | slice:startIndex:endIndex\"\n        class=\"basket-item list-group-item list-group-item-action d-flex align-items-center\"\n        [routerLink]=\"[searchRoute]\" [queryParams]=\"getQueryParams(basket)\" [state]=\"getRouterState(basket)\"\n        (click)=\"openBasket(basket)\">\n        <span class=\"basket-name text-truncate mr-auto\">{{ basket.name }}</span>\n        <span *ngIf=\"basket.ids\" class=\"basket-count ml-2 text-muted small\">{{ basket.ids.length }}</span>\n        <i *ngIf=\"enableDelete\" class=\"basket-delete ml-2 fas fa-times\" [title]=\"'msg#baskets.delete' | sqMessage\" (click)=\"deleteBasket(basket, $event)\"></i>\n    </a>\n    <div *ngIf=\"basketsService.baskets.length == 0\" class=\"list-group-item text-center text-muted font-italic small py-5\">\n        {{ 'msg#baskets.noBasket' | sqMessage }}\n    </div>\n</div>","export default {\n    \"advanced\": {\n        \"rangeSeparator\": \" / \",\n        \"dateRangePicker\": {\n            \"separator\": \" / \"\n        },\n        \"rangeInput\": {\n            \"separator\": \"/\"\n        },\n        \"select\": {\n            \"nItems\": \"{count} items selected\",\n            \"allItems\": \"All items selected\",\n            \"noItems\": \"No items selected\"\n        }\n    }\n};\n","import {Component, Input, Output, EventEmitter} from \"@angular/core\";\n\nexport interface CollapseStateChange {\n    group: string;\n    collapsed: boolean;\n}\n\n@Component({\n    selector: \"sq-collapse-link\",\n    templateUrl: \"./collapse-link.component.html\"\n})\nexport class CollapseLink {\n    @Input() title: string = \"\";\n    @Input() icon: string = \"\";\n    @Input() text: string = \"\";\n    @Input() group: string;\n    @Output() stateChange = new EventEmitter<CollapseStateChange>();\n    collapsed: boolean = true;\n\n    constructor() {\n    }\n\n    click() {\n        this.collapsed = !this.collapsed;\n        this.stateChange.emit({group: this.group, collapsed: this.collapsed});\n        return false; // Prevent following href\n    }\n}","<a href=\"#\" title=\"{{title | sqMessage}}\" (click)=\"click()\">\n    <sq-collapse-button [collapsed]=\"collapsed\" [icon]=\"icon\" [text]=\"text\"></sq-collapse-button>\n</a>","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable} from \"rxjs\";\nimport {tap} from \"rxjs/operators\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Record} from \"./query.web.service\";\nimport {AuditEventType} from \"./audit.web.service\";\n\n/**\n * Describes a rating configuration object\n */\nexport interface CCRating {\n    ratingsColumn: string;\n    averageColumn: string;\n\n    updateDocWeight: boolean;\n\n    ratingsDistribution: string[];\n}\n\n/**\n * Describes a user rating response object\n */\nexport interface UserRatingResponse {\n    rating: number;\n    averagerating: number;\n}\n\n/**\n * A service for calling the ratings web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class UserRatingsWebService extends HttpService {\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Gets the current user rating for a document\n     *\n     * @param docid The id of a document for which to get the rating\n     * @param config The ratings configuration\n     */\n    getRating(docid: string, config: CCRating): Observable<UserRatingResponse> {\n        return this.httpClient.post<UserRatingResponse>(this.makeUrl(\"ratings\"), {\n            action: \"get\",\n            docid,\n            ratingscolumn: config.ratingsColumn,\n            averagecolumn: config.averageColumn,\n            ratingsdistribution: config.ratingsDistribution\n        }).pipe(tap(\n            r => {},\n            error => console.log(\"ratingsService.getRating failure - error: \", error)\n        ));\n    }\n\n    /**\n     * Sets the current user rating for a document\n     *\n     * @param record The document for which to set the rating\n     * @param rating A rating value\n     * @param config The ratings configuration\n     */\n    setRating(record: Record, rating: number, config: CCRating): Observable<UserRatingResponse> {\n        const ratingResponse = this.getRecordRating(record, config);\n        const observable = this.httpClient.post<UserRatingResponse>(this.makeUrl(\"ratings\"), {\n            action: \"set\",\n            docid: record.id,\n            ratingscolumn: config.ratingsColumn,\n            averagecolumn: config.averageColumn,\n            ratingsdistribution: config.ratingsDistribution,\n            updatedocweight: config.updateDocWeight,\n            rating,\n            $auditRecord: {\n                auditEvents: [\n                    {\n                        type: AuditEventType.Rating_Set,\n                        detail: {\n                            \"doc-id\": record.id,\n                            ratingnum: rating,\n                            value: ratingResponse.rating,\n                            average: ratingResponse.averagerating\n                        }\n                    }\n                ],\n                mlAuditEvents: [\n                    {\n                        actionType: \"addRating\",\n                        documentIds: record.id\n                    }\n                ]\n            }\n        });\n\n        observable.subscribe(\n            response => response,\n            error => console.log(\"ratingsService.setRating failure - error: \", error)\n        );\n\n        return observable;\n    }\n\n    /**\n     * Delete a rating for a document\n     *\n     * @param record The document for which to delete the rating\n     * @param config The ratings configuration\n     */\n    deleteRating(record: Record, config: CCRating): Observable<UserRatingResponse> {\n        const ratingResponse = this.getRecordRating(record, config);\n        const observable = this.httpClient.post<UserRatingResponse>(this.makeUrl(\"ratings\"), {\n            action: \"delete\",\n            docid: record.id,\n            ratingscolumn: config.ratingsColumn,\n            averagecolumn: config.averageColumn,\n            ratingsdistribution: config.ratingsDistribution,\n            updatedocweight: config.updateDocWeight,\n            $auditRecord: {\n                auditEvents: [\n                    {\n                        type: AuditEventType.Rating_Delete,\n                        detail: {\n                            \"doc-id\": record.id,\n                            value: ratingResponse.rating,\n                            average: ratingResponse.averagerating\n                        }\n                    }\n                ],\n                mlAuditEvents: [\n                    {\n                        actionType: \"removeRating\",\n                        documentIds: record.id\n                    }\n                ]\n            }\n        });\n\n        observable.subscribe(\n            response => response,\n            error => console.log(\"ratingsService.deleteRating failure - error: \", error)\n        );\n\n        return observable;\n    }\n\n    /**\n     * Gets user rating information from the given record\n     *\n     * @param record The record for which to get the rating\n     * @param config The ratings configuration\n     */\n    getRecordRating(record: Record, config: CCRating): UserRatingResponse {\n        return {\n            rating: this.parseUserRating(record[config.ratingsColumn], config),\n            averagerating: this.parseAverageRating(record[config.averageColumn], config)\n        };\n    }\n\n    private parseAverageRating(columnEntries: string[], config: CCRating): number {\n        if (config.ratingsDistribution && columnEntries) {\n            return config.ratingsDistribution.indexOf(columnEntries[0]);\n        }\n        else {\n            return -1;\n        }\n    }\n\n    private parseUserRating(ratingValues: string[], config: CCRating): number {\n        if(ratingValues) {\n            if (config.ratingsDistribution) {\n                return config.ratingsDistribution.indexOf(ratingValues[0]);\n            }\n        }\n        return -1;\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {BsDatepickerModule} from \"ngx-bootstrap/datepicker\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsAutocompleteModule} from \"@sinequa/components/autocomplete\";\n\nimport {BsAdvancedFormCheckbox} from \"./advanced-form-checkbox/advanced-form-checkbox\";\nimport {BsAdvancedFormRange} from \"./advanced-form-range/advanced-form-range\";\nimport {BsAdvancedFormSelect} from \"./advanced-form-select/advanced-form-select\";\nimport { BsAdvancedFormMultiInput } from './advanced-form-multi-input/advanced-form-multi-input';\nimport { BsAdvancedFormInput } from './advanced-form-input/advanced-form-input';\nimport { BsDatePicker } from './advanced-form-range/date-picker/date-picker';\nimport { BsDateRangePicker } from './advanced-form-range/date-range-picker/date-range-picker';\nimport { BsSelectComponent } from './advanced-form-select/select/select';\n\n// Directives\nimport {BsAdvancedFormAutocomplete} from \"./advanced-form-autocomplete.directive\";\nimport {BsAdvancedFormValidation} from \"./advanced-form-validation.directive\";\nimport { BsAdvancedFormAutocompleteMultiInput } from './advanced-form-multi-input/advanced-form-autocomplete-multi-input.directive';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n\n        IntlModule,\n\n        // ngx-bootstrap\n        BsDatepickerModule.forRoot(),\n\n        UtilsModule,\n        BsAutocompleteModule\n    ],\n    declarations: [\n        BsAdvancedFormCheckbox,\n        BsAdvancedFormInput,\n        BsAdvancedFormRange,\n        BsAdvancedFormSelect,\n        BsAdvancedFormMultiInput,\n        BsDatePicker,\n        BsDateRangePicker,\n        BsSelectComponent,\n\n        BsAdvancedFormAutocompleteMultiInput,\n        BsAdvancedFormAutocomplete,\n        BsAdvancedFormValidation,\n    ],\n    exports: [\n        BsAdvancedFormCheckbox,\n        BsAdvancedFormInput,\n        BsAdvancedFormRange,\n        BsAdvancedFormSelect,\n        BsAdvancedFormMultiInput,\n        BsDatePicker,\n        BsDateRangePicker,\n        BsSelectComponent,\n\n        BsAdvancedFormAutocompleteMultiInput,\n        BsAdvancedFormAutocomplete,\n        BsAdvancedFormValidation,\n    ]\n})\nexport class BsAdvancedModule {\n}\n","import {Component, Input, OnChanges, SimpleChanges, ChangeDetectorRef} from \"@angular/core\";\nimport {FormGroup, FormBuilder, AbstractControl} from \"@angular/forms\";\nimport {Results} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {AbstractFacet} from \"../../abstract-facet\";\nimport {ParseResult} from '@sinequa/components/autocomplete';\n\n@Component({\n    selector: \"sq-refine\",\n    templateUrl: \"./facet-refine.html\"\n})\nexport class BsRefine extends AbstractFacet implements OnChanges {\n\n    /**\n     * Results of the search page associated to this refine\n     */\n    @Input() results: Results;\n\n    /**\n     * Whether or not to enable autocompletion\n     */\n    @Input() autocompleteEnabled: boolean;\n\n    /**\n     * Suggest query with which to perform autocompletion\n     */\n    @Input() suggestQuery: string;\n\n    /**\n     * Minimum delay (in ms) between suggest queries\n     */\n    @Input() suggestDelay: number = 200;\n\n    form: FormGroup;\n    searchControl: AbstractControl | null;\n\n    inputErrorMessage: string;\n\n    constructor(\n        public formBuilder: FormBuilder,\n        public searchService: SearchService,\n        private changeDetectorRef: ChangeDetectorRef) {\n        super();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.form) {\n            this.form = this.formBuilder.group({\n                \"search\": \"\"\n            });\n            this.searchControl = this.form.get(\"search\");\n        }\n        if (!!changes[\"results\"] && this.searchControl) {\n            this.searchControl.setValue(this.searchService.lastRefineText);\n        }\n    }\n\n    doRefine = () => {\n        if (this.searchControl) {\n            const text = Utils.trim(this.searchControl.value);\n            if (text) {\n                this.searchService.searchRefine(text);\n            }\n        }\n    }\n\n    setError(parseResult: ParseResult = {}){\n        if(parseResult.error !== this.inputErrorMessage){\n            this.inputErrorMessage = parseResult.error || \"\";\n            this.changeDetectorRef.markForCheck();\n        }\n    }\n}","<div class=\"card-body\">\n    <form role=\"search\" novalidate [formGroup]=\"form\">\n        \n        <div class=\"d-flex flex-column flex-grow-1 position-relative\">        \n            <div class=\"input-group\">\n                <label class=\"sr-only\">{{'msg#facet.refine.input.label' | sqMessage}}</label>\n                \n                <input type=\"text\"\n                    formControlName=\"search\" \n                    class=\"form-control {{inputErrorMessage ? 'is-invalid' : ''}}\"\n                    spellcheck=\"false\"\n                    autocomplete=\"off\"\n                    [title]=\"inputErrorMessage\"\n\n                    sqAutocomplete\n                    [placeholder]=\"'msg#facet.refine.input.placeholder' | sqMessage\"\n                    [dropdown]=\"dropdown\" \n                    [suggestQuery]=\"suggestQuery\"\n                    [off]=\"!autocompleteEnabled\"\n                    [suggestDelay]=\"suggestDelay\"                    \n\n                    (submit)=\"doRefine()\"\n                    (parse)=\"setError($event)\">\n    \n                <div class=\"input-group-append\">\n                    <button class=\"btn btn-light\" type=\"button\" (click)=\"doRefine()\" title=\"{{'msg#facet.refine.input.buttonTitle' | sqMessage}}\">\n                        <i class=\"fas fa-search\"></i>\n                    </button>\n                </div>\n            </div>\n    \n            <sq-autocomplete-list #dropdown>\n                <ng-template #itemTpl let-item>\n                    <div class=\"py-2\" style=\"padding-left:0.75rem;\">{{item.display}}\n                        <small *ngIf=\"item.category\" class=\"ml-2 text-muted\">{{(item.label || item.category) | sqMessage}}</small>\n                    </div>\n                </ng-template>\n            </sq-autocomplete-list>\n        </div>\n    </form>    \n    <sq-did-you-mean [results]=\"results\" [context]=\"'refine'\"></sq-did-you-mean>\n</div>","import { Directive, ElementRef, Input } from '@angular/core';\nimport { AutocompleteFieldSearch, SuggestService, AutocompleteItem, AutocompleteState } from '@sinequa/components/autocomplete';\nimport { AppService, ExprBuilder } from '@sinequa/core/app-utils';\nimport { UIService } from '@sinequa/components/utils';\nimport { RecentQueriesService, RecentDocumentsService, SavedQueriesService, RecentDocument, RecentQuery, SavedQuery } from '@sinequa/components/saved-queries';\nimport { PreviewService } from '@sinequa/components/preview';\nimport { SearchService } from '@sinequa/components/search';\nimport { BasketsService } from '@sinequa/components/baskets';\nimport { Observable, forkJoin, from, of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { Basket } from '@sinequa/components/baskets';\nimport { AuditEventType, AuditWebService } from '@sinequa/core/web-services';\n\n/**\n * This directive extends the autocomplete directive to provide autocomplete on\n * additional objects, such as recent queries, documents and baskets\n */\n@Directive({\n    selector: \"[sqAutocompleteExtended]\"\n})\nexport class AutocompleteExtended extends AutocompleteFieldSearch {\n\n    /**\n     * List of features within which to search in\n     * (list of 'recent-documents', 'recent-queries', 'saved-queries', 'baskets')\n     */\n    @Input() sqAutocompleteExtended: string[] = [];\n\n    constructor(\n        elementRef: ElementRef,\n        suggestService: SuggestService,\n        appService: AppService,\n        uiService: UIService,\n        exprBuilder: ExprBuilder,\n        protected recentQueriesService: RecentQueriesService,\n        protected recentDocumentsService: RecentDocumentsService,\n        protected savedQueriesService: SavedQueriesService,\n        protected basketsService: BasketsService,\n        protected previewService: PreviewService,\n        protected searchService: SearchService,\n        protected audit: AuditWebService){\n        super(elementRef, suggestService, appService, uiService, exprBuilder);\n\n    }\n\n    /**\n     * This method overrides the Autocomplete.getSuggestsObs() method from the sqAutocomplete directive.\n     * Rather than only getting suggests from the server via the SuggestService, this directive also\n     * searches for matches in the User Settings objects (recent documents, recent queries, saved\n     * queries, baskets)\n     */\n    protected getSuggestsObs(value: string, fields?: string[]): Observable<AutocompleteItem[]> {\n    \n        // Methods returning (observable of) suggestions from different sources\n        let dataSources: Observable<AutocompleteItem[]>[];\n        // Fielded search mode\n        if((fields && fields.length > 0) || this.fieldSearchItems.length > 0 || value !== this.getInputValue()){\n            dataSources = [super.getSuggestsObs(value, fields)];\n        }\n        // Normal mode\n        else {\n            dataSources = this.sqAutocompleteExtended.map(source => {\n                switch(source) {\n                    case 'suggests': return  this.suggestService.get(this.suggestQuery, value, fields);\n                    case 'baskets': return from(this.searchBaskets(value));\n                    case 'recent-documents': return from(this.searchRecentDocuments(value));\n                    case 'recent-queries': return from(this.searchRecentQueries(value));\n                    case 'saved-queries': return from(this.searchSavedQueries(value));\n                }\n                return of([]);\n            });\n        }\n        \n        // The forkJoin method allows to merge the suggestions into a single array, so the parent\n        // directive only sees a single source.\n        return forkJoin(...dataSources).pipe(\n            map((suggests) => {\n                return [].concat(...suggests)\n                    .sort((a,b) => (b['score'] || 0) - (a['score'] || 0)); // autocomplete items returned by searchData still have their \"score\" attribute, which is consistent across categories\n            }),\n            catchError((err, caught) => {\n                console.error(err);\n                return [];\n            })\n        );\n\n    }\n\n    /**\n     * This method overrides the Autocomplete.select() method from the sqAutocomplete directive.\n     * It performs custom actions when a specific category of autocomplete item is selected, such\n     * as selecting a basket, a saved query or a recent document.\n     * @param item\n     * @param submit\n     */\n    protected select(item: AutocompleteItem, submit?: boolean) {\n        this.audit.notify({type: AuditEventType.Search_AutoComplete, detail:{display: item.display, category: item.category }})\n        \n        // TODO: in Pepper add recent document to dashboard(?)\n        if (item.category === \"recent-document\") {\n            this.previewService.openRoute(item['data'], this.searchService.makeQuery());\n        }\n        else if (item.category === \"saved-query\") {\n            this.savedQueriesService.searchSavedQuery(item['data'], \"/search\");\n            this.setState(AutocompleteState.SELECTED);\n            this.dropdown.update(false);    // Close dropdown\n        }\n        else if (item.category === \"basket\") {\n            this.basketsService.searchBasket(item['data'], \"/search\");\n            this.setState(AutocompleteState.SELECTED);\n            this.dropdown.update(false);    // Close dropdown\n        }\n        else {\n            super.select(item, submit);\n        }\n    }\n\n    /**\n     * Search for the input text in the recent queries and return autocomplete items asynchronously\n     * @param text\n     */\n    searchRecentQueries(text: string): Promise<AutocompleteItem[]> {\n        return this.suggestService.searchData<RecentQuery>(\n            'recent-query',\n            text,\n            this.recentQueriesService.recentqueries,\n            (query) => query.query.text || \"\",\n            undefined,\n            \"msg#searchForm.recentQuery\");\n    }\n\n    /**\n     * Search for the input text in the recent documents and return autocomplete items asynchronously\n     * @param text\n     */\n    searchRecentDocuments(text: string): Promise<AutocompleteItem[]> {\n        return this.suggestService.searchData<RecentDocument>(\n            'recent-document',\n            text,\n            this.recentDocumentsService.recentdocuments,\n            (doc: RecentDocument) => doc.title,\n            (doc: RecentDocument) => ([] as string[]).concat(doc.url1, doc.treepath, doc.authors),\n            \"msg#searchForm.recentDocument\");\n    }\n\n    /**\n     * Search for the input text in the saved queries and return autocomplete items asynchronously\n     * @param text\n     */\n    searchSavedQueries(text: string): Promise<AutocompleteItem[]> {\n        return this.suggestService.searchData<SavedQuery>(\n            'saved-query',\n            text,\n            this.savedQueriesService.savedqueries,\n            (query) => query.name,\n            (query) => [query.description || \"\", query.query.text || \"\"],\n            \"msg#editSavedQuery.title\");\n    }\n\n    /**\n     * Search for the input text in the baskets and return autocomplete items asynchronously\n     * @param text\n     */\n    searchBaskets(text: string): Promise<AutocompleteItem[]> {\n        return this.suggestService.searchData<Basket>(\n            'basket',\n            text,\n            this.basketsService.baskets,\n            (bsk) => bsk.name,\n            (bsk) => [bsk.description || \"\"],\n            \"msg#editBasket.title\");\n    }\n\n}","import { NgModule, APP_INITIALIZER } from \"@angular/core\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { RouterModule, Routes } from '@angular/router';\nimport { LocationStrategy, HashLocationStrategy } from \"@angular/common\";\nimport { HTTP_INTERCEPTORS } from \"@angular/common/http\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\n// @sinequa/core library\nimport { WebServicesModule, StartConfigWebService, StartConfig } from \"@sinequa/core/web-services\";\nimport { LoginModule, LoginInterceptor } from \"@sinequa/core/login\";\nimport { IntlModule } from \"@sinequa/core/intl\";\nimport { ModalModule } from \"@sinequa/core/modal\";\nimport { NotificationsInterceptor } from \"@sinequa/core/notification\";\nimport { AuditInterceptor } from \"@sinequa/core/app-utils\";\n\n// @sinequa/components library\nimport { BsSearchModule, SearchOptions } from \"@sinequa/components/search\";\nimport { BsAutocompleteModule } from \"@sinequa/components/autocomplete\";\nimport { BsNotificationModule } from \"@sinequa/components/notification\";\nimport { BsFacetModule } from \"@sinequa/components/facet\";\nimport { BsActionModule } from \"@sinequa/components/action\";\nimport { BsModalModule } from \"@sinequa/components/modal\";\nimport { BsBasketsModule } from '@sinequa/components/baskets';\nimport { BsAlertsModule } from '@sinequa/components/alerts';\nimport { BsSavedQueriesModule } from '@sinequa/components/saved-queries';\nimport { UtilsModule, SCREEN_SIZE_RULES } from '@sinequa/components/utils';\nimport { BsLabelsModule } from '@sinequa/components/labels';\nimport { BsUserSettingsModule } from '@sinequa/components/user-settings';\nimport { ResultModule } from '@sinequa/components/result';\nimport { BsFeedbackModule } from '@sinequa/components/feedback';\nimport { BsPreviewModule } from '@sinequa/components/preview';\nimport { MetadataModule } from '@sinequa/components/metadata';\nimport { BsThemeToggleModule } from \"@sinequa/components/theme-toggle\";\nimport { BsSelectionModule, SelectionOptions, SELECTION_OPTIONS } from '@sinequa/components/selection';\nimport { BsAdvancedModule } from \"@sinequa/components/advanced\";\n\n// @sinequa/analytics library\nimport { BsHeatmapModule } from '@sinequa/analytics/heatmap';\nimport { BsTimelineModule } from '@sinequa/analytics/timeline';\nimport { NgxChartsModule } from '@sinequa/analytics/ngx-charts';\nimport { FusionChartsModule } from '@sinequa/analytics/fusioncharts';\nimport { VisTimelineModule } from '@sinequa/analytics/vis-timeline';\nimport { NetworkModule } from '@sinequa/analytics/network';\nimport { GoogleMapsModule } from '@sinequa/analytics/googlemaps';\nimport { FinanceModule } from '@sinequa/analytics/finance';\n\n// Third-party libs\nimport { GridsterModule } from 'angular-gridster2';\nimport { AgmCoreModule } from '@agm/core';\n\n// Components\nimport { AppComponent } from \"./app.component\";\nimport { SearchComponent } from './search/search.component';\nimport { SearchFormComponent } from './search-form/search-form.component';\nimport { AutocompleteExtended } from './search-form/autocomplete-extended.directive';\nimport { DashboardItemComponent } from './dashboard/dashboard-item.component';\nimport { DashboardAddItemComponent } from './dashboard/dashboard-add-item.component';\n\n// Environment\nimport { environment } from \"../environments/environment\";\n\n\n// Initialization of @sinequa/core\nexport const startConfig: StartConfig = {\n    // app: \"training\",\n    production: environment.production,\n    // autoSAMLProvider: environment.autoSAMLProvider,\n    auditEnabled: true\n};\n\n// @sinequa/core config initializer\nexport function StartConfigInitializer(startConfigWebService: StartConfigWebService): () => Promise<StartConfig> {\n    const init = () => startConfigWebService.fetchPreLoginAppConfig().toPromise();\n    return init;\n}\n\n\n// Application routes (see https://angular.io/guide/router)\nexport const routes: Routes = [\n    {path: \"search\", component: SearchComponent},\n    {path: \"**\", redirectTo: \"search\"}\n];\n\n\n// Search options (search service)\nexport const searchOptions: SearchOptions = {\n    routes: [\"search\"],\n    homeRoute: \"home\"\n};\n\n\n// Application languages (intl service)\nimport {LocalesConfig, Locale} from \"@sinequa/core/intl\";\nimport enLocale from \"../locales/en\";\nimport frLocale from \"../locales/fr\";\nimport deLocale from \"../locales/de\";\n\nexport class AppLocalesConfig implements LocalesConfig {\n    defaultLocale: Locale;\n    locales?: Locale[];\n    constructor(){\n        this.locales = [\n            { name: \"en\", display: \"msg#locale.en\", data: enLocale},\n            { name: \"fr\", display: \"msg#locale.fr\", data: frLocale},\n            { name: \"de\", display: \"msg#locale.de\", data: deLocale},\n        ];\n        this.defaultLocale = this.locales[0];\n    }\n}\n\n\n// Screen size breakpoints (consistent with Bootstrap custom breakpoints in app.scss)\nexport const breakpoints = {\n    xl: \"(min-width: 1650px)\",\n    lg: \"(min-width: 1400px) and (max-width: 1649.98px)\",\n    md: \"(min-width: 992px) and (max-width: 1399.98px)\",\n    sm: \"(min-width: 576px) and (max-width: 991.98px)\",\n    xs: \"(max-width: 575.98px)\",\n};\n\nexport const selectionOptions: SelectionOptions = {\n    resetOnNewQuery: false,\n    resetOnNewResults: false,\n    storage: \"record\"\n}\n\n\n@NgModule({\n    imports: [\n        BrowserModule,\n        BrowserAnimationsModule,\n        RouterModule.forRoot(routes),\n        FormsModule,\n        ReactiveFormsModule,\n\n        WebServicesModule.forRoot(startConfig),\n        IntlModule.forRoot(AppLocalesConfig),\n        LoginModule,\n        ModalModule,\n\n        BsSearchModule.forRoot(searchOptions),\n        BsAutocompleteModule,\n        BsNotificationModule,\n        BsFacetModule,\n        BsActionModule,\n        BsModalModule,\n        BsBasketsModule,\n        BsAlertsModule,\n        BsSavedQueriesModule,\n        UtilsModule,\n        BsLabelsModule,\n        BsUserSettingsModule,\n        ResultModule,\n        BsFeedbackModule,\n        BsPreviewModule,\n        MetadataModule,\n        BsSelectionModule,\n        BsThemeToggleModule,\n        BsAdvancedModule,\n\n        BsHeatmapModule,\n        BsTimelineModule,\n        NgxChartsModule,\n        FusionChartsModule,\n        VisTimelineModule,\n        NetworkModule,\n        GoogleMapsModule,\n        AgmCoreModule.forRoot({\n            apiKey: \"\" // Replace with your own Google Maps API key\n        }),\n        FinanceModule,\n        GridsterModule\n    ],\n    declarations: [\n        AppComponent,\n        SearchComponent,\n        SearchFormComponent,\n        AutocompleteExtended,\n        DashboardItemComponent,\n        DashboardAddItemComponent\n    ],\n    providers: [\n        // Provides an APP_INITIALIZER which will fetch application configuration information from the Sinequa\n        // server automatically at startup using the application name specified in the URL (app[-debug]/<app-name>).\n        // This allows an application to avoid hard-coding parameters in the StartConfig but requires that the application\n        // be served from the an app[-debug]/<app name> URL.\n        {provide: APP_INITIALIZER, useFactory: StartConfigInitializer, deps: [StartConfigWebService], multi: true},\n\n        // Provides the Angular LocationStrategy to be used for reading route state from the browser's URL. Currently\n        // only the HashLocationStrategy is supported by Sinequa.\n        {provide: LocationStrategy, useClass: HashLocationStrategy},\n\n        // Provides an HttpInterceptor to handle user login. The LoginInterceptor handles HTTP 401 responses\n        // to Sinequa web service requests and initiates the login process.\n        {provide: HTTP_INTERCEPTORS, useClass: LoginInterceptor, multi: true},\n\n        // Provides an HttpInterceptor that offers a centralized location through which all client-side\n        // audit records pass. An application can replace AuditInterceptor with a subclass that overrides\n        // the updateAuditRecord method to add custom audit information to the records.\n        {provide: HTTP_INTERCEPTORS, useClass: AuditInterceptor, multi: true},\n\n        // Provides an HttpInterceptor that automatically processes any notifications specified in the $notifications\n        // member of the response body to any Sinequa web service requests.\n        {provide: HTTP_INTERCEPTORS, useClass: NotificationsInterceptor, multi: true},\n\n        {provide: SCREEN_SIZE_RULES, useValue: breakpoints},\n        {provide: SELECTION_OPTIONS, useValue: selectionOptions}\n    ],\n    bootstrap: [\n        AppComponent\n    ]\n})\nexport class AppModule {\n}\n","import { Component, Input, OnChanges, SimpleChanges, OnDestroy, Output, EventEmitter, ContentChild, TemplateRef } from '@angular/core';\nimport { FormGroup, FormControl, FormBuilder } from '@angular/forms';\nimport { Subscription, combineLatest } from 'rxjs';\n\nimport { Results } from '@sinequa/core/web-services';\nimport { AppService, ExprBuilder } from '@sinequa/core/app-utils';\nimport { Utils } from '@sinequa/core/base';\nimport { UserPreferences } from '@sinequa/components/user-settings';\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\nimport { SearchService } from '@sinequa/components/search';\n\nimport { Options, VisNetworkService } from 'ngx-vis';\nimport { DataSet } from \"vis-data/peer/esm/vis-data\";\n\nimport { Node, Edge, NetworkDataset, NetworkProvider, NetworkContext } from './network-models';\nimport { IntlService } from '@sinequa/core/intl';\n\n/**\n * Default options of the Vis.js network.\n * See: https://visjs.github.io/vis-network/docs/network/\n */\nexport const defaultOptions: Options = {\n    height: '500px'\n};\n\n/**\n * Structure of the events emitted by the Vis.js network\n */\nexport interface VisEvent {\n    nodes: string[];\n    edges: string[];\n    event: any;\n    items: any[];\n    pointer: any;\n}\n\n@Component({\n    selector: 'sq-network',\n    templateUrl: './network.component.html'\n})\nexport class NetworkComponent extends AbstractFacet implements OnChanges, OnDestroy {\n\n    /** Name of the network - should be unique within the app */\n    @Input() name = \"Network\";\n\n    /** Input results - used to produce a OnChange event when  */\n    @Input() results: Results;\n\n    @Input() providers: NetworkProvider[];\n\n    /** General Vis options passed to the network (https://visjs.github.io/vis-network/docs/network/) */\n    @Input() options: Options = defaultOptions;\n\n    optionsPrefs: Options;\n\n    @Output() nodeClicked = new EventEmitter<Node>();\n    @Output() edgeClicked = new EventEmitter<Edge>();\n\n    // Settings form\n    form: FormGroup;\n\n    // State\n    _networkInitialized: boolean;\n    _selectedNode?: Node;\n    _selectedEdge?: Edge;\n\n    // Actions\n    _actions: Action[] = [];\n    refreshAction: Action;\n    clearFilters: Action;\n\n    // Info cards\n    @ContentChild(\"nodeTpl\", {static: false}) nodeTpl: TemplateRef<any>;\n    @ContentChild(\"edgeTpl\", {static: false}) edgeTpl: TemplateRef<any>;\n\n    readonly context: NetworkContext;\n\n    providersSubscription: Subscription;\n\n    constructor(\n        public networkService: VisNetworkService,\n        public searchService: SearchService,\n        public appService: AppService,\n        public intlService: IntlService,\n        public formBuilder: FormBuilder,\n        public prefs: UserPreferences,\n        public exprBuilder: ExprBuilder\n    ) {\n        super();\n\n        // Notify providers when a node is clicked (this may trigger new data, or a node mutation)\n        this.nodeClicked.subscribe((node?: Node) => {\n            this.providers.forEach(p => p.onNodeClicked(node));\n        });\n\n        // Notify providers when a node is clicked (this may trigger new data, or a node mutation)\n        this.edgeClicked.subscribe((edge?: Edge) => {\n            this.providers.forEach(p => p.onEdgeClicked(edge));\n        });\n\n        // Refresh the network\n        this.refreshAction = new Action({\n            icon: \"fas fa-sync-alt\",\n            title: \"msg#network.actions.refresh\",\n            action: () => {\n                this.updateData();\n                this.updateActions();\n            }\n        });\n\n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                this.searchService.query.removeSelect(this.name);\n                this.searchService.search();\n            }\n        });\n\n        this.context = {\n            name: this.name,\n            nodes: new DataSet<Node>(),\n            edges: new DataSet<Edge>(),\n            searchService: searchService,\n            appService: appService,\n            networkService: networkService,\n            intlService: intlService,\n            exprBuilder: exprBuilder,\n            select: (node?: Node, edge?: Edge) => this.select(node, edge),\n        };\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n\n        if(changes['results'] || changes['providers']) {\n            // Update the context\n            this.context.name = this.name;\n\n            // Update selections\n            this.selectEdge();\n            this.selectNode();\n\n            // Update options from the preferences\n            this.updateOptions();\n\n            // Update data from the providers (async)\n            this.updateData();\n\n            // Update the actions of the facet\n            this.updateActions();\n        }\n        else if(changes['options']) {\n            this.updateOptions();\n        }\n\n    }\n\n    /**\n     * Resets the nodes and edges, create a new listener for the providers and\n     * call getData() on these providers to refresh the data\n     */\n    protected updateData() {\n\n        this.context.nodes.clear();\n        this.context.edges.clear();\n\n        if(this.providersSubscription){\n            this.providersSubscription.unsubscribe();\n        }\n\n        this.providersSubscription = combineLatest(\n            this.providers.map(p => p.getProvider())\n        ).subscribe(datasets =>\n            this.mergeDatasets(datasets.filter(d => !!d) as NetworkDataset[])\n        );\n\n        this.providers.forEach(p => p.getData(this.context));\n    }\n\n    /**\n     * Take in the datasets produced by each provider and merges them into\n     * a single one\n     * @param datasets\n     */\n    protected mergeDatasets(datasets: NetworkDataset[]) {\n        const dataset = datasets.reduce((prev, cur) => prev.merge(cur), new NetworkDataset());\n\n        // Notify providers that nodes were inserted (which could trigger an update of the data)\n        this.providers.forEach(p => p.onDatasetsMerged(dataset));\n\n        // TODO: Post process the dataset somehow to adjust visibility (or other properties)\n        dataset.updateDatasets(this.context.nodes, this.context.edges);\n\n        // Fit the nodes and edges\n        if(this._networkInitialized) {\n            this.fitNetwork();\n        }\n\n        // Notify providers that nodes were inserted (which could trigger an update of the data)\n        this.providers.forEach(p => p.onNodesInserted(this.context.nodes.get()));\n\n        this.updateActions();\n    }\n\n    get actions(): Action[] {\n        return this._actions;\n    }\n\n    /**\n     * Updates the actions displayed in the facet frame (_action variable).\n     * Actions may come from this component or from its providers\n     */\n    protected updateActions() {\n        this._actions = [];\n\n        // Clear the active filters\n        if(this.searchService.breadcrumbs && !!this.searchService.breadcrumbs.findSelect(this.name)) {\n            this._actions.push(this.clearFilters);\n        }\n\n        // Selected node actions\n        if(this._selectedNode) {\n            this.providers.forEach(p => {\n                const actions = p.getNodeActions(this._selectedNode!);\n                if(actions.length){\n                    this._actions = this._actions.concat(actions);\n                }\n            });\n        }\n\n        // Selected edge actions\n        if(this._selectedEdge) {\n            this.providers.forEach(p => {\n                const actions = p.getEdgeActions(this._selectedEdge!);\n                if(actions.length){\n                    this._actions = this._actions.concat(actions);\n                }\n            });\n        }\n\n        // Actions specific to each provider\n        const providersActionList = new Action({\n            icon: \"fas fa-tasks\",\n            title: \"msg#network.actions.providers\",\n            children: this.providers.map(p => new Action({\n                text: this.intlService.formatMessage(p.name),\n                title: this.intlService.formatMessage(p.name),\n                children: p.getProviderActions()\n            }))\n        });\n        this._actions.push(providersActionList);\n\n        // Action to refresh the network\n        this._actions.push(this.refreshAction);\n\n    }\n\n    /**\n     * Fit the network view (zoom and position) to its content, with a delay\n     * to avoid some elusive bugs in the Vis library\n     */\n    fitNetwork() {\n        this.networkService.fit(this.name);\n    }\n\n\n    // Event handling\n\n    /**\n     * Called from the template by ngx-vis, when the network is initialized,\n     * and the NetworkService can be used.\n     */\n    networkInitialized() {\n        this._networkInitialized = true;\n\n        // now we can use the service to register on events\n        this.networkService.on(this.name, 'click');\n\n        this.networkService.click.subscribe((eventData: any[]) => this.onNetworkClick(eventData));\n\n        this.networkService.setOptions(this.name, this.optionsPrefs);\n\n    }\n\n    /**\n     * Method called when a node or edge in the network is clicked.\n     * The method generates appropriate nodeClicked and edgeClicked events,\n     * and updates the state of _selectedEdge and _selectedNode.\n     * @param eventData\n     */\n    protected onNetworkClick(eventData: any[]) {\n        if (eventData[0] === this.name) {\n            const event = eventData[1] as VisEvent;\n\n            if(event.event.type === \"tap\") {\n\n                if(event.edges.length === 1 && event.nodes.length === 0) {\n                    this.selectEdge(this.context.edges.get(event.edges[0]) as Edge);\n                    this.selectNode();\n                }\n                else {\n                    this.selectEdge();\n                    if(event.nodes.length === 1) {\n                        this.selectNode(this.context.nodes.get(event.nodes[0]) as Node);\n                    }\n                    else {\n                        this.selectNode();\n                    }\n                }\n\n            }\n            else {\n                this.selectNode();\n                this.selectEdge();\n            }\n\n            this.updateActions();\n        }\n    }\n\n    select(node?: Node, edge?: Edge) {\n        this.selectNode(node);\n        this.selectEdge(edge);\n        this.updateActions();\n    }\n\n    selectNode(node?: Node) {\n        this._selectedNode = node;\n        this.nodeClicked.next(node);\n    }\n\n    selectEdge(edge?: Edge) {\n        this._selectedEdge = edge;\n        this.edgeClicked.next();\n    }\n\n    ngOnDestroy() {\n        this.networkService.off(this.name, 'click');\n        if(this.providersSubscription){\n            this.providersSubscription.unsubscribe();\n        }\n    }\n\n\n    // Settings\n\n    /**\n     * Sets the options values either to the user preferences (stored in user settings)\n     * or the default values.\n     */\n    updateOptions() {\n        this.optionsPrefs = Utils.copy(this.options);\n        if(!this.optionsPrefs.physics){\n            this.optionsPrefs.physics = {};\n        }\n        if(!this.optionsPrefs.physics.barnesHut){\n            this.optionsPrefs.physics.barnesHut = {};\n        }\n        this.optionsPrefs.physics.barnesHut.springLength = this.springLengthPref;\n        this.optionsPrefs.physics.barnesHut.springConstant = this.springConstantPref / 100;\n        this.optionsPrefs.physics.barnesHut.damping = this.dampingPref / 100;\n        this.optionsPrefs.physics.barnesHut.gravitationalConstant = -this.repulsionPref;\n        this.optionsPrefs.physics.barnesHut.centralGravity = this.gravityPref / 10;\n\n        if(this._networkInitialized) {\n            this.networkService.setOptions(this.name, this.optionsPrefs);\n            this.fitNetwork();\n        }\n    }\n\n    /**\n     * Method from the AbstractFacet interface called when the settings\n     * panel is opened or closed\n     * @param opened whether settings are opened or closed\n     */\n    onOpenSettings(opened: boolean){\n        if(opened) {\n            const springLengthControl = new FormControl(this.springLengthPref);\n            const springConstantControl = new FormControl(this.springConstantPref);\n            const dampingControl = new FormControl(this.dampingPref);\n            const repulsionControl = new FormControl(this.repulsionPref);\n            const gravityControl = new FormControl(this.gravityPref);\n\n            this.form = this.formBuilder.group({\n                springLength: springLengthControl,\n                springConstant: springConstantControl,\n                damping: dampingControl,\n                repulsion: repulsionControl,\n                gravity: gravityControl\n            });\n\n            this.form.valueChanges.subscribe(_ => {\n                this.prefs.set(this.name+'-spring-length', springLengthControl.value, true);\n                this.prefs.set(this.name+'-spring-constant', springConstantControl.value, true);\n                this.prefs.set(this.name+'-damping', dampingControl.value, true);\n                this.prefs.set(this.name+'-repulsion', repulsionControl.value, true);\n                this.prefs.set(this.name+'-gravity', gravityControl.value, true);\n                this.debounceSync();\n            });\n        }\n        else {\n            this.updateOptions();\n            this.updateData();\n        }\n    }\n\n    // Debounce syncing to avoid many calls to the user settings web service\n    debounceSync = Utils.debounce(() => {\n        this.prefs.sync();\n    }, 1000);\n\n    /**\n     * This method resets all the user preferences and rebuilds the settings form,\n     * so that the values displayed are up-to-date\n     */\n    setDefaults() {\n        this.prefs.delete(this.name+'-spring-length', true);\n        this.prefs.delete(this.name+'-spring-constant',true);\n        this.prefs.delete(this.name+'-damping', true);\n        this.prefs.delete(this.name+'-repulsion', true);\n        this.prefs.delete(this.name+'-gravity', true);\n        this.prefs.sync();\n        this.onOpenSettings(true);\n    }\n\n    // Accessor method for each of the settings.\n    // Return either the saved user preference or the default value.\n\n    get springLengthPref(): number {\n        return this.prefs.get(this.name+'-spring-length') || 100;\n    }\n\n    get springConstantPref(): number {\n        return this.prefs.get(this.name+'-spring-constant') || 4;\n    }\n\n    get dampingPref(): number {\n        return this.prefs.get(this.name+'-damping') || 50;\n    }\n\n    get repulsionPref(): number {\n        return this.prefs.get(this.name+'-repulsion') || 2000;\n    }\n\n    get gravityPref(): number {\n        return this.prefs.get(this.name+'-gravity') || 3;\n    }\n}\n","<div class=\"position-relative\">\n\n    <div *ngIf=\"context\"\n        [visNetwork]=\"name\" \n        [visNetworkData]=\"context\" \n        [visNetworkOptions]=\"optionsPrefs\"\n        (initialized)=\"networkInitialized()\">\n    </div>\n\n    <ng-container *ngIf=\"nodeTpl && _selectedNode\">\n        <ng-container *ngTemplateOutlet=\"nodeTpl; context:{$implicit: _selectedNode}\"></ng-container>\n    </ng-container>\n\n    <ng-container *ngIf=\"edgeTpl && _selectedEdge\">\n        <ng-container *ngTemplateOutlet=\"edgeTpl; context:{$implicit: _selectedEdge}\"></ng-container>\n    </ng-container>\n</div>\n\n\n<ng-template #settingsTpl>\n    <div class=\"card-body\">\n        <form [formGroup]=\"form\">\n            <div class=\"form-group\">\n\n                <h3>{{'msg#network.settings.physics' | sqMessage}}</h3>\n\n                <label for=\"springLength\">{{'msg#network.settings.springLength' | sqMessage}} ({{springLengthPref}})</label>\n                <input type=\"range\" class=\"form-control-range\" id=\"springLength\" min=\"30\" max=\"200\" formControlName=\"springLength\">\n\n                <label for=\"springConstant\">{{'msg#network.settings.springConstant' | sqMessage}} ({{springConstantPref}})</label>\n                <input type=\"range\" class=\"form-control-range\" id=\"springConstant\" min=\"1\" max=\"20\" formControlName=\"springConstant\">\n\n                <label for=\"damping\">{{'msg#network.settings.damping' | sqMessage}} ({{dampingPref}})</label>\n                <input type=\"range\" class=\"form-control-range\" id=\"damping\" min=\"10\" max=\"100\" formControlName=\"damping\">\n                \n                <label for=\"repulsion\">{{'msg#network.settings.repulsion' | sqMessage}} ({{repulsionPref}})</label>\n                <input type=\"range\" class=\"form-control-range\" id=\"repulsion\" min=\"1000\" max=\"10000\" formControlName=\"repulsion\">\n                \n                <label for=\"gravity\">{{'msg#network.settings.gravity' | sqMessage}} ({{gravityPref}})</label>\n                <input type=\"range\" class=\"form-control-range\" id=\"gravity\" min=\"1\" max=\"20\" formControlName=\"gravity\">\n                \n                <hr>\n\n                <button class=\"btn btn-light\" (click)=\"setDefaults()\">{{'msg#network.settings.defaults' | sqMessage}}</button>\n            </div>\n        </form>\n    </div>\n</ng-template>","import {Injectable, Inject} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {flatMap} from \"rxjs/operators\";\nimport {PopupService} from \"ng2-ui-auth\";\nimport {START_CONFIG, StartConfig} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * Override ng2-ui-auth's popup handling as it doesn't work with SAML + IE11 because\n * of a double redirection.\n * The initial request is to Sinequa which redirects to the authentication provider.\n * On successful authentication, the authentication provider redirects back\n * to Sinequa to perform the login.\n * In IE the initial redirection causes the popup window to be reported as \"closed\"\n * which breaks the process.\n * So, override ng2-ui-auth's PopupService and do the inital request to get the\n * redirect url outside of the popup\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AuthenticationPopupService extends PopupService {\n    constructor(\n        @Inject(START_CONFIG) protected startConfig: StartConfig,\n        protected httpClient: HttpClient) {\n        super();\n    }\n\n    open(url: string, options: any/*IOauth2Options | IOauth1Options*/, cordova: boolean | undefined): Observable<Window> {\n        if (Utils.startsWith(url, this.startConfig.apiPath!)) {\n            return this.httpClient.get<{redirectUrl: string}>(url, {\n                params: Utils.makeHttpParams({\n                    noUserOverride: true,\n                    noAutoAuthentication: true,\n                    tokenInCookie: true,\n                    loginInPopup: true\n                })\n            }).pipe(flatMap((ret) => {\n                return super.open(ret.redirectUrl, options, cordova);\n            }));\n        }\n        return super.open(url, options, cordova);\n    }\n}\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\n\n@Pipe({name: \"sqDate\", pure: false})\nexport class DatePipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: number | Date, params: Intl.DateTimeFormatOptions): void {\n        super.updateValue(key, params);\n        this.value = this.intlService.formatDate(key, params);\n    }\n}","export default {\r\n    \"clipboard\": {\r\n        \"success\": \"{data} copié dans le presse-papiers\",\r\n        \"error\": \"Erreur du presse-papiers\"\r\n    }\r\n};\r\n","import { Component, ContentChild, TemplateRef, Input, Output, EventEmitter } from \"@angular/core\";\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { Record } from \"@sinequa/core/web-services\";\nimport { SearchService } from '@sinequa/components/search';\nimport { SelectionService, SelectionItem } from '../../selection.service';\n\n@Component({\n    selector: \"sq-selection-arranger\",\n    templateUrl: \"./selection-arranger.component.html\",\n    styleUrls: [\"./selection-arranger.component.scss\"]\n})\nexport class BsSelectionArranger {\n\n    /**\n     * If a list of records is supplied it is used to display and rearrange the list of records.\n     * If this list is not supplied, the SelectionService list of items is used instead.\n     */\n    @Input() records?: Record[];\n\n    /**\n     * A template must be passed by transclusion to display each record in the selection\n     */\n    @ContentChild(TemplateRef, {static: false}) recordTpl: TemplateRef<any>;\n\n    /**\n     * Triggers event when the user moves or removes a record in the list.\n     */\n    @Output() change = new EventEmitter<SelectionItem[]>();\n\n    constructor(\n        public searchService: SearchService,\n        public selectionService: SelectionService\n    ) {\n    }\n\n    getRecords(): SelectionItem[] {\n        return this.records || this.selectionService.getSelectedItems();\n    }\n\n    dropRecord(event: CdkDragDrop<string[]>) {\n        if (event.isPointerOverContainer) { //https://material.angular.io/cdk/drag-drop/api#CdkDragExit\n            if(this.records) {\n                moveItemInArray(this.records, event.previousIndex, event.currentIndex); // Reorder the items when item dragged inside the drop zone\n            }\n            else {\n                const record = this.selectionService.getSelectedItems()[event.previousIndex];\n                this.selectionService.moveSelectedRecord(record as Record, event.currentIndex);\n            }\n        }\n        else {\n            if(this.records) {\n                this.records.splice(event.previousIndex, 1);\n            }\n            else {\n                const record = this.selectionService.getSelectedItems()[event.previousIndex];\n                this.selectionService.toggleSelectedRecords(record as Record, \"selection-arranger\");\n            }\n        }\n        this.change.next(this.getRecords());\n    }\n\n    removeRecord(record: Record) {\n        if(this.records) {\n            this.records.splice(this.records.indexOf(record), 1);\n        }\n        else {\n            this.selectionService.toggleSelectedRecords(record, \"selection-arranger\");\n        }\n        this.change.next(this.getRecords());\n    }\n}","<div cdkDropList  (cdkDropListDropped)=\"dropRecord($event)\">\n    <div class=\"card\" *ngFor=\"let record of getRecords(); let i=index\" cdkDrag>\n        <div class=\"record-placeholder\" *cdkDragPlaceholder></div>\n        <ng-container *ngTemplateOutlet=\"recordTpl; context:{$implicit: record, index: i}\"></ng-container>\n        <i class=\"position-absolute fas fa-times record-close\" (click)=\"removeRecord(record)\"></i>\n    </div>\n</div>","export * from \"./bootstrap/index\";\nexport * from \"./autocomplete.directive\";\nexport * from \"./autocomplete-field-search.directive\";\nexport * from \"./suggest.service\";","export * from \"./preview.module\";\nexport * from \"./preview.service\";\nexport * from \"./preview-document\";\nexport * from \"./preview-document-iframe.component\";\nexport * from \"./preview-tooltip.component\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export default {\n    \"preview\": {\n        \"noDocumentDataErrorPopupTitle\": \"Error loading document's data\",\n        \"highlightsTitle\": \"Highlights\",\n        \"noEntityToHighlight\": \"No highlighted entity in document\",\n        \"termXLabel\": \"Search term {index, number}\",\n        \"otherTerms\": \"Other terms\",\n        \"previousDocument\": \"Previous\",\n        \"nextDocument\": \"Next\",\n        \"originalDocument\": \"Original document\",\n        \"selectedHighlight\": \"Selected highlight\",\n        \"noSelectedHighlight\": \"No highlight selected\",\n        \"firstHighlightButtonAltText\": \"First\",\n        \"previousHighlightButtonAltText\": \"Previous\",\n        \"nextHighlightButtonAltText\": \"Next\",\n        \"relevanceSortHighlightButtonText\": \"Relevance\",\n        \"textOrderSortHighlightButtonText\": \"Text order\",\n        \"lastHighlightButtonAltText\": \"Last\",\n        \"highlightFilters\": {\n            \"title\": \"Filters\",\n            \"keepAll\": \"All\",\n            \"keepNone\": \"None\",\n            \"keepAllInCategory\": \"All\",\n            \"keepNoneInCategory\": \"None\"\n        },\n        \"documentPropertiesTitle\": \"Details\",\n        \"similarDocumentsTitle\": \"Similar documents\",\n        \"showAll\": \"Show all values\",\n        \"sortAlphabetically\": \"Sort alphabetically\",\n        \"sortFrequency\": \"Sort by frequency\",\n        \"loading\": \"Loading...\",\n        \"noextract\": \"No extract\",\n        \"search\": \"Search\",\n        \"gotopage\": \"Go to page\",\n        \"page\": \"Page {page}\",\n        \"current\": \"current\"\n    },\n    \"facet\": {\n        \"preview\": {\n            \"closeTitle\": \"Close\",\n            \"expandTitle\": \"Maximize\",\n            \"minimize\": \"Zoom out\",\n            \"maximize\": \"Zoom in\",\n            \"toggleExtracts\": \"Toggle relevant extracts highlighting\",\n            \"toggleEntities\": \"Toggle entities highlighting\"\n        }\n    }\n};\n","import {Component, OnInit, OnDestroy, Inject} from \"@angular/core\";\nimport {FormBuilder, FormGroup, FormControl, Validators} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {MODAL_MODEL, ModalResult, ModalRef} from \"@sinequa/core/modal\";\nimport {Credentials} from \"./authentication.service\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * A basic login component that request a user name and password. It is designed to work with\n * [LoginService.getCredentials]{@link LoginService#getCredentials} and can be set using the\n * {@link MODAL_LOGIN} injection token\n */\n@Component({\n    selector: \"sq-core-login\",\n    template: `\n        <form novalidate [formGroup]=\"form\" style=\"border: solid;padding: 16px;background-color: white;\"\n            cdkTrapFocus [cdkTrapFocusAutoCapture]=\"true\">\n            <h3 style=\"margin-top: 0;\">{{'msg#modal.login.title' | sqMessage}}</h3>\n            <input placeholder=\"{{'msg#modal.login.userName' | sqMessage}}\" formControlName=\"userName\">\n            <ng-container *ngIf=\"showError(userNameControl)\">\n                <br>\n                <span style=\"color: red;\">{{form.get(\"userName\")?.errors | sqValidationError}}</span>\n            </ng-container>\n            <div style=\"margin-bottom: 8px;\"></div>\n            <input type=\"password\" placeholder=\"{{'msg#modal.login.password' | sqMessage}}\" formControlName=\"password\">\n            <ng-container *ngIf=\"showError(passwordControl)\">\n                <br>\n                <span style=\"color: red;\">{{form.get(\"password\")?.errors | sqValidationError}}</span>\n            </ng-container>\n            <hr>\n            <button type=\"submit\" (click)=\"ok()\">{{'msg#modal.buttons.ok' | sqMessage}}</button>\n            <button type=\"button\" (click)=\"cancel()\">{{'msg#modal.buttons.cancel' | sqMessage}}</button>\n        </form>\n    `\n})\nexport class Login implements OnInit, OnDestroy {\n    userNameControl: FormControl;\n    passwordControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n\n    constructor(\n        @Inject(MODAL_MODEL) protected model: Credentials,\n        protected modalRef: ModalRef,\n        protected formBuilder: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.userNameControl = new FormControl(this.model.userName, Validators.required);\n        this.passwordControl = new FormControl(this.model.password, Validators.required);\n        this.form = this.formBuilder.group({\n            userName: this.userNameControl,\n            password: this.passwordControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.model.userName = this.userNameControl.value;\n                this.model.password = this.passwordControl.value;\n            });\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n\n    showError(control: FormControl): boolean {\n        return control.invalid && (control.dirty || this.modalRef.submitted);\n    }\n\n    ok() {\n        if (!this.form.valid) {\n            return;\n        }\n        this.modalRef.close(ModalResult.OK);\n    }\n\n    cancel() {\n        this.modalRef.close(ModalResult.Cancel);\n    }\n}\n","export * from \"./map.component\";\nexport * from \"./dark-style\";\nexport * from \"./googlemaps.module\";\nexport * from \"./messages\";","export default {\n    \"feedback\":{\n        \"text\" : \"\",\n        \"title\" : \"Envoyer un feedback à l'admin Sinequa\",\n        \"content\" : {\n            \"text\" : \"Contenu\",\n            \"title\" : \"Proposer d'ajouter du contenu ou d'améliorer le contenu actuel\"\n        },\n        \"ui\" : {\n            \"text\" : \"Interface Utilisateur\",\n            \"title\" : \"Proposer des améliorations d'interfaces utilisateur\"\n        },\n        \"lang\" : {\n            \"text\" : \"Langage\",\n            \"title\" : \"Proposer des améliorations linguistiques, comme des nouveaux mots et synonymes à ajouter aux dictionaires (cela affecte directement la pertinence du moteur de recherche)\"\n        },\n        \"other\" : {\n            \"text\" : \"Autre\",\n            \"title\" : \"Proposer des fonctionnalités supplémentaires et autres idées d'améliorations\"\n        },\n        \"thankyou\": \"Merci pour votre commentaire !\",\n        \"quality\" : {\n            \"label\" : \"Qualité du document:\"\n        },\n        \"relevance\" : {\n            \"label\" : \"Pertinence du document:\"\n        },\n        \"labels\" : {\n            \"public\" : {\n                \"label\" : \"Tags:\"\n            },\n            \"private\" : {\n                \"label\" : \"Tags privés:\"\n            }\n        }\n    },\n};\n","import {Component, OnInit, OnDestroy, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {Action} from \"@sinequa/components/action\";\n\n\n@Component({\n    selector: \"sq-notifications-manager\",\n    templateUrl: \"./notifications-manager.html\"\n})\nexport class BsNotificationsManager implements OnInit, OnDestroy {\n    private subscription: Subscription | undefined;\n    action: Action;\n    randomAction: Action;\n\n    constructor(\n        private notificationsService: NotificationsService,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnInit() {\n        this.buildAction();\n        this.unbind();\n        this.bind();\n    }\n\n    bind() {\n        this.subscription = this.notificationsService.notificationsStream.subscribe(\n            notification => {\n                this.action.update();\n        });\n    }\n\n    unbind() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n            this.subscription = undefined;\n        }\n    }\n\n    ngOnDestroy() {\n        this.unbind();\n    }\n\n    buildAction() {\n        this.action = new Action({\n            icon: \"fas fa-shield-alt\",\n            title: \"msg#notification.title\",\n            hidden: true,\n            children: [\n                new Action({\n                    text: \"msg#notification.showNotifications\",\n                    action: (item, $event) => {\n                        this.notificationsService.showNotifications();\n                    },\n                    updater: (item) => {\n                        item.hidden = this.notificationsService.allNotificationsShowing;\n                        this.changeDetectorRef.markForCheck();\n                    }\n                }),\n                new Action({\n                    text: \"msg#notification.hideNotifications\",\n                    action: (item, $event) => {\n                        this.notificationsService.hideNotifications();\n                    },\n                    updater: (item) => {\n                        item.hidden = this.notificationsService.allNotificationsHidden;\n                        this.changeDetectorRef.markForCheck();\n                    }\n                }),\n                new Action({\n                    separator: true\n                }),\n                new Action({\n                    text: \"msg#notification.clearNotifications\",\n                    action: (item, $event) => {\n                        this.notificationsService.deleteAllNotifications();\n                    }\n                })\n            ]\n        });\n    }\n}","<div class=\"btn-toolbar dropup\">\n    <div class=\"btn-group\" [sq-action-buttons]=\"{items: [action]}\"></div>\n</div>","import {Directive, ElementRef, Output, EventEmitter, AfterViewInit, OnDestroy, NgZone} from \"@angular/core\";\nimport {UIService} from \"../ui.service\";\n\n@Directive({\n    selector: \"[sqResize]\"\n})\nexport class ResizeEventDirective implements AfterViewInit, OnDestroy {\n    @Output(\"sqResize\") resizeEvent = new EventEmitter<DOMRectReadOnly>();\n    // NB we don't use one of the ResizeObserver polyfills as they rely on polling\n    // for changes which continuously consumes cpu time...\n    protected resizeObserver: /*ResizeObserver*/any;\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected zone: NgZone,\n        protected uiService: UIService\n    ) {\n    }\n\n    protected raiseEvent = () => {\n        const contentRect = this.elementRef.nativeElement.getBoundingClientRect();\n        this.resizeEvent.emit(contentRect);\n    }\n\n    ngAfterViewInit() {\n        if ((window as any).ResizeObserver) {\n            this.resizeObserver = new (window as any).ResizeObserver((entries) => {\n                this.zone.run(() => {\n                    const contentRect = (entries?.length === 1 && entries[0].contentRect);\n                    this.resizeEvent.emit(contentRect);\n                });\n            });\n            this.resizeObserver.observe(this.elementRef.nativeElement);\n        }\n        else {\n            this.uiService.addElementResizeListener(this.elementRef.nativeElement, this.raiseEvent);\n        }\n    }\n\n    ngOnDestroy() {\n        if ((window as any).ResizeObserver) {\n            this.resizeObserver.unobserve(this.elementRef.nativeElement);\n        }\n        else {\n            this.uiService.removeElementResizeListener(this.elementRef.nativeElement, this.raiseEvent);\n        }\n    }\n}\n","import {Component, OnInit, OnDestroy, Inject} from \"@angular/core\";\nimport {FormBuilder, FormGroup, FormControl, Validators} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {ModalRef, MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AlertsService, Alert} from \"../../alerts.service\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {KeyValue} from \"@angular/common\";\n\n@Component({\n    selector: \"sq-edit-alert\",\n    templateUrl: \"./edit-alert.html\",\n    styleUrls: [\"./edit-alert.scss\"]\n})\nexport class BsEditAlert implements OnInit, OnDestroy {\n    form: FormGroup;\n    formChanges: Subscription;\n    buttons: ModalButton[];\n    frequencies: Alert.Frequency[];\n    frequency: typeof Alert.Frequency;\n    canUpdateQuery: boolean;\n    updateQuery: boolean;\n    weekdays = {\n        'monday': Alert.Days.Monday, \n        'tuesday': Alert.Days.Tuesday,\n        'wednesday': Alert.Days.Wednesday,\n        'thursday': Alert.Days.Thursday,\n        'friday': Alert.Days.Friday,\n        'saturday': Alert.Days.Saturday,\n        'sunday': Alert.Days.Sunday\n    };\n    \n    showDirtyMessage = false;\n    \n    // Preserve original property order\n    originalOrder = (a: KeyValue<string, Alert.Days>, b: KeyValue<string, Alert.Days>): number => 0\n    \n    private alertDaysControl: FormControl;\n    private alertNameControl: FormControl;\n    private alertFrequencyControl: FormControl;\n    private alertTimesControl: FormControl;\n    private alertActiveControl: FormControl;\n    private updateQueryControl: FormControl;\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: { alert: Alert, searchRoute?: string },\n        private formBuilder: FormBuilder,\n        private searchService: SearchService,\n        private alertsService: AlertsService,\n        private modalRef: ModalRef) {\n        this.frequencies = [\n            Alert.Frequency.Daily,\n            Alert.Frequency.Hourly,\n            Alert.Frequency.Immediate,\n        ];\n        this.frequency = Alert.Frequency;\n    }\n\n    get alert() {\n        return this.model.alert;\n    }\n\n    ngOnInit() {\n        if (!this.alert.days) {\n            this.alert.days = Alert.Days.None;\n        }\n        this.canUpdateQuery = (!!this.alertsService.alert(this.alert.name)) &&\n            !!this.searchService.results && !!this.searchService.results.records;\n\n        this.alertDaysControl = new FormControl(this.alert.days);\n        this.alertNameControl = new FormControl(this.alert.name, Validators.required);\n        this.alertFrequencyControl = new FormControl(this.alert.frequency);\n        this.alertTimesControl = new FormControl(this.alert.times); // TODO validator\n        this.alertActiveControl = new FormControl(this.alert.active);\n        this.updateQueryControl = new FormControl(this.updateQuery);\n        this.form = this.formBuilder.group({\n            alertName: this.alertNameControl,\n            alertFrequency: this.alertFrequencyControl,\n            alertTimes: this.alertTimesControl,\n            alertActive: this.alertActiveControl,\n            updateQuery: this.updateQueryControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.alert.name = this.alertNameControl.value;\n                this.alert.frequency = this.alertFrequencyControl.value;\n                this.alert.times = this.alertTimesControl.value;\n                this.alert.active = this.alertActiveControl.value;\n                this.alert.days = this.alertDaysControl.value;\n                this.updateQuery = this.updateQueryControl.value;\n            }\n        );\n        \n        this.createButtons();\n    }\n\n    private createButtons() {\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#editAlert.runQuery\",\n                result: ModalResult.Custom,\n                action: (button) => {\n                    this.runQuery();\n                    this.modalRef.close(ModalResult.Cancel); // dismiss the dialog too (?)\n                },\n                visible: !!this.alertsService.alert(this.alert.name)\n            }),\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.form,\n                action: (button) => {\n                    if (this.updateQuery) {\n                        this.alertsService.setAlertToCurrentQuery(this.alert);\n                    }\n                }\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n                action: (button) => {\n                    if (this.form.dirty) {\n                        button.result = ModalResult.Custom;\n                        this.showDirtyMessage = true;\n                        this.createYesNoButtons();\n                    }\n                }\n            })\n        ];\n    }\n    private createYesNoButtons() {\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.Yes,\n                primary: true,\n            }),\n            new ModalButton({\n                result: ModalResult.No,\n                action: (button) => {\n                    button.result = ModalResult.Custom;\n                    this.showDirtyMessage = false;\n                    this.createButtons();\n                }\n            })\n        ];\n    }\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n\n    dayChecked(day: Alert.Days): boolean {\n        return (this.alert.days & day) !== 0;\n    }\n\n    dayChange(event: UIEvent, day: Alert.Days) {\n        const input = event.target as HTMLInputElement;\n        if (input.checked) {\n            this.alertDaysControl.setValue(this.alert.days |= day);\n            // this.alert.days |= day;\n        }\n        else {\n            this.alertDaysControl.setValue(this.alert.days &= ~day);\n            // this.alert.days &= ~day;\n        }\n        this.form.markAsDirty();\n    }\n\n    runQuery() {\n        this.alertsService.searchAlert(this.alert, this.model.searchRoute);\n    }\n}","<form name=\"editAlert\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#editAlert.title'\" [buttons]=\"buttons\">\n        <div class=\"form-group sq-form-group\">\n            <label for=\"alertName\">{{'msg#editAlert.name' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"alertName\" formControlName=\"alertName\" autocomplete=\"off\" spellcheck=\"off\" sqAutofocus>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"alertFrequency\">{{'msg#editAlert.frequency' | sqMessage}}</label>\n            <select class=\"form-control custom-select\" id=\"alertFrequency\" formControlName=\"alertFrequency\">\n                <option *ngFor=\"let frequencyValue of frequencies\" [value]=\"frequencyValue\">{{frequency[frequencyValue] | sqMessage}}</option>\n            </select>\n        </div>\n        <div class=\"form-group\">\n            <label>{{'msg#editAlert.days' | sqMessage}}</label>\n            <div class=\"weekdays-grid\">\n                <label *ngFor=\"let day of weekdays | keyvalue: originalOrder\" class=\"custom-control custom-control-inline custom-checkbox\">\n                    <input class=\"custom-control-input\" type=\"checkbox\" [checked]=\"dayChecked(day.value)\" (change)=\"dayChange($event, day.value)\">\n                    <span class=\"custom-control-label user-select-none cursor-pointer\">{{ 'msg#editAlert.'+day.key | sqMessage}}</span>\n                </label>\n            </div>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"alertTimes\">{{'msg#editAlert.times' | sqMessage}}</label>\n            <input type=\"text\" class=\"form-control\" id=\"alertTimes\" formControlName=\"alertTimes\" autocomplete=\"off\" spellcheck=\"off\">\n        </div>\n        <div class=\"form-group\">\n            <label class=\"custom-control custom-control-inline custom-checkbox\">\n                <input class=\"custom-control-input\" type=\"checkbox\" id=\"alertActive\" formControlName=\"alertActive\">\n                <span class=\"custom-control-label user-select-none cursor-pointer\">{{'msg#editAlert.active' | sqMessage}}</span>\n            </label>\n            <label *ngIf=\"canUpdateQuery\" class=\"custom-control custom-control-inline custom-checkbox\">\n                <input class=\"custom-control-input\" type=\"checkbox\" id=\"updateQuery\" formControlName=\"updateQuery\">\n                <span class=\"custom-control-label user-select-none cursor-pointer\">{{'msg#editAlert.updateQuery' | sqMessage}}</span>\n            </label>\n        </div>\n        <sq-alert-message footer [message]=\"'msg#editAlert.lossDataMessage' | sqMessage\" *ngIf=\"showDirtyMessage\"></sq-alert-message>\n    </sq-modal>\n</form>","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable} from \"rxjs\";\nimport {map} from \"rxjs/operators\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {IQuery} from \"./query/query\";\nimport {AuditEventType} from \"./audit.web.service\";\n\n/**\n * Describes the object returned by the list action of the labels web service\n */\nexport interface Labels {\n    labels: string[];\n}\n\n/**\n * Describes the object returned by the getUserRights action of the labels web service\n */\nexport interface LabelsRights {\n    canManagePublicLabels: boolean;\n    canEditPublicLabels: boolean;\n}\n\n/**\n * A service for calling the labels web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class LabelsWebService extends HttpService {\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient,\n        private intlService: IntlService) {\n        super(startConfig);\n    }\n\n    /**\n     * Calls the list action of the labels web service\n     *\n     * @param prefix The string that the returned labels should begin with\n     * @param _public Determines whether public or private labels should be returned\n     */\n    list(\n        prefix: string,\n        _public: boolean): Observable<Labels> {\n        const observable = this.httpClient.get<Labels>(this.makeUrl(\"labels\"), {\n            params: this.makeParams({\n                app: this.appName,\n                action: \"list\",\n                q: prefix,\n                public: _public,\n                locale: this.intlService.currentLocale.name,\n                localize: false\n            })\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"labelsService.list failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * A wrapper around the list method. The matching labels are returned as an array of strings\n     *\n     * @param prefix The string that the returned labels should begin with\n     * @param _public Determines whether public or private labels should be returned\n     */\n    array(\n        prefix: string,\n        _public: boolean): Observable<string[]> {\n        return this.list(prefix, _public)\n            .pipe(map((value) => {\n                return value.labels;\n            }));\n    }\n\n    /**\n     * Calls the getUserRights action of the labels web service\n     */\n\n    getUserRights(): Observable<LabelsRights> {\n        const observable = this.httpClient.get<LabelsRights>(\n            this.makeUrl('labels'),\n            {\n                params: this.makeParams({\n                    app: this.appName,\n                    action: 'getUserRights'\n                })\n            }\n        );\n        Utils.subscribe(\n            observable,\n            response => response,\n            error => console.log(\"labelsService.getUserRights failure - error: \", error)\n        );\n        return observable;\n    }\n\n    /**\n     * Add labels to a set of documents\n     *\n     * @param labels The labels to add\n     * @param ids The ids of the documents to which the labels should be added\n     * @param _public Determines whether the labels are public or private\n     */\n    add(labels: string[],\n        ids: string[],\n        _public: boolean): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"labels\"), {\n            app: this.appName,\n            action: \"add\",\n            labels: labels,\n            ids: ids,\n            public: _public,\n            $auditRecord: {\n                auditEvents: [\n                    {\n                        type: AuditEventType.Label_AddDoc,\n                        detail: {\n                            public: _public,\n                            label: !!labels ? labels.toString() : null,\n                            doccount: !!ids ? ids.length : 0\n                        }\n                    }\n                ],\n                mlAuditEvents: [\n                    {\n                        actionType: \"addToLabel\",\n                        documentIds: ids\n                    }\n                ]\n            }\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"labelsService.add failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Removes labels from a set of documents\n     *\n     * @param labels The labels to remove\n     * @param ids The ids of the documents from which the labels should be removed\n     * @param _public Determines whether the labels are public or private\n     */\n    remove(labels: string[],\n        ids: string[],\n        _public: boolean): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"labels\"), {\n            app: this.appName,\n            action: \"remove\",\n            labels: labels,\n            ids: ids,\n            public: _public,\n            $auditRecord: {\n                auditEvents: [\n                    {\n                        type: AuditEventType.Label_RemoveDoc,\n                        detail: {\n                            public: _public,\n                            label: !!labels ? labels.toString() : null,\n                            doccount: !!ids ? ids.length : 0\n                        }\n                    }\n                ],\n                mlAuditEvents: [\n                    {\n                        actionType: \"removeFromLabel\",\n                        documentIds: ids\n                    }\n                ]\n            }\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"labelsService.remove failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Renames a set of labels\n     *\n     * @param labels The labels to rename\n     * @param newLabel The new name for the labels\n     * @param _public Determines whether the labels are public or private\n     */\n    rename(labels: string[],\n        newLabel: string,\n        _public: boolean): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"labels\"), {\n            app: this.appName,\n            action: \"rename\",\n            labels: labels,\n            newLabel: newLabel,\n            public: _public,\n            auditEvents: {\n                type: AuditEventType.Label_Rename,\n                detail: {\n                    public: _public,\n                    oldlabel: !!labels ? labels.toString() : null,\n                    label: newLabel\n                }\n            }\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"labelsService.rename failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Deletes a set of labels\n     *\n     * @param labels The labels to be deleted\n     * @param _public Determines whether the labels are public or private\n     */\n    delete(labels: string[],\n        _public: boolean): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"labels\"), {\n            app: this.appName,\n            action: \"delete\",\n            labels: labels,\n            public: _public,\n            auditEvents: {\n                type: AuditEventType.Label_Delete,\n                detail: {\n                    public: _public,\n                    label: !!labels ? labels.toString() : null\n                }\n            }\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"labelsService.delete failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Adds labels to the documents identified by the passed query\n     *\n     * @param labels The labels to add\n     * @param query The query to produce the documents to which the labels should be added\n     * @param _public Determines whether the labels are public or private\n     */\n    bulkAdd(labels: string[],\n        query: IQuery,\n        _public: boolean): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"labels\"), {\n            app: this.appName,\n            action: \"bulkAdd\",\n            labels: labels,\n            query: query,\n            public: _public,\n            auditEvents: {\n                type: AuditEventType.Label_Add,\n                detail: {\n                    public: _public,\n                    label: !!labels ? labels.toString() : null,\n                    query: query != null ? query.name : null\n                }\n            }\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"labelsService.bulkAdd failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Removes labels from the documents identified by the passed query\n     *\n     * @param labels The labels to remove\n     * @param query The query to produce the documents from which the labels should be removed\n     * @param _public Determines whether the labels are public or private\n     */\n    bulkRemove(labels: string[],\n        query: IQuery,\n        _public: boolean): Observable<void> {\n        const observable = this.httpClient.post<void>(this.makeUrl(\"labels\"), {\n            app: this.appName,\n            action: \"bulkRemove\",\n            labels: labels,\n            query: query,\n            public: _public,\n            auditEvents: {\n                type: AuditEventType.Label_Delete,\n                detail: {\n                    public: _public,\n                    label: !!labels ? labels.toString() : null,\n                    query: query != null ? query.name : null\n                }\n            }\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                return response;\n            },\n            (error) => {\n                console.log(\"labelsService.bulkRemove failure - error: \", error);\n            });\n        return observable;\n    }\n}\n","import { Component, OnChanges, Input, Output, ViewChild, EventEmitter, ChangeDetectorRef } from '@angular/core';\nimport { Results } from '@sinequa/core/web-services';\nimport { AbstractFacet } from '../../abstract-facet';\nimport { Action } from '@sinequa/components/action';\nimport { FacetService } from '../../facet.service';\nimport { Utils } from '@sinequa/core/base';\n\nexport interface FacetConfig {\n  name: string;\n  type: 'list' | 'tree';\n  title: string;\n  icon?: string;\n  aggregation: string;\n  showCount?: boolean;\n  searchable?: boolean;\n  allowExclude?: boolean;\n  allowOr?: boolean;\n  allowAnd?: boolean;\n  displayEmptyDistributionIntervals?: boolean;\n\n  // Parameters set by the component\n  $count?: string;\n  $hasData?: boolean;\n  $hasFiltered?: boolean;\n}\n\n@Component({\n  selector: 'sq-facet-multi',\n  templateUrl: './facet-multi.component.html',\n  styleUrls: ['./facet-multi.component.scss']\n})\nexport class BsFacetMultiComponent extends AbstractFacet implements OnChanges {\n\n  @Input() results: Results;\n  @Input() facets: FacetConfig[];\n  @Input() showCount: boolean = true;\n  @Input() showProgressBar = false;    // will display or not item count as progress bar\n\n  @Output() events = new EventEmitter<FacetConfig>();\n  @ViewChild(\"facet\", {static: false}) public facetComponent: AbstractFacet;\n\n  /**\n   * The facet configuration to open\n   */\n  openedFacet: FacetConfig | undefined;\n\n  /**\n   * Action to switch back from an opened facet to the facet multi view\n   */\n  backAction: Action;\n  clearAllFiltersAction: Action;\n\n  constructor(\n    public facetService: FacetService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {\n\n    super();\n\n    this.backAction = new Action({\n      name: \"back\",\n      icon: \"fas fa-arrow-left\",\n      title: \"msg#facet.filters.back\",\n      action: () => {\n        this.openedFacet = undefined;\n        this.events.next(undefined);\n        this.changeDetectorRef.detectChanges();\n      }\n    });\n\n    this.clearAllFiltersAction = new Action({\n      icon: \"far fa-minus-square\",\n      title: \"msg#facet.filters.clear\",\n      action: () => {\n        const facetsWithFiltered = this.facets.filter((facet) => facet.$hasFiltered).map(facet => facet.name);\n        this.facetService.clearFiltersSearch(facetsWithFiltered, true);\n      }\n    });\n\n  }\n\n  /**\n   * If a sub-facet is opened, add a Back button and forward\n   * the actions of the facet.\n   */\n  get actions(): Action[] {\n    const actions: Action[] = [];\n    if(this.openedFacet){\n      actions.push(this.backAction);\n    } else {\n      const hasFiltered = this.facets.some(facet => facet.$hasFiltered);\n      if (hasFiltered) actions.push(this.clearAllFiltersAction);\n    }\n    if(this.facetComponent){\n      actions.push(...this.facetActions);\n    }\n    return actions;\n  }\n\n  /**\n   * Return the actions of the child facet\n   */\n  get facetActions(): Action[] {\n    if(this.facetComponent){\n      return this.facetComponent.actions;\n    }\n    return [];\n  }\n\n  /**\n   * Open this sub facet\n   * @param facet\n   */\n  openFacet(facet: FacetConfig){\n    this.openedFacet = facet;\n    this.events.next(facet);\n    this.changeDetectorRef.detectChanges();\n  }\n\n  clearFacetFilters(facet: FacetConfig, e:Event) {\n    e.stopPropagation();\n    this.facetService.clearFiltersSearch(facet.name, true);\n    return false;\n  }\n\n  /**\n   * Return the number of items to display for a given facet\n   * @param facet\n   */\n  private getFacetCount(facet: FacetConfig): string {\n    const agg = this.results.aggregations.find(agg => Utils.eqNC(agg.name, facet.aggregation)); // avoid calling getAggregation() which is costly for trees\n    if (!agg?.items)\n      return \"\";\n    const count = this.facetService.getAggregationCount(facet.aggregation); // configured count (default: 10)\n    const aggItemCounter = (!agg.isDistribution || facet.displayEmptyDistributionIntervals)\n      ? agg.items.length\n      : agg.items.filter(item => item.count > 0).length;\n    return aggItemCounter >= count ? `${count}+` : `${aggItemCounter}`;\n  }\n\n  /**\n   * Return whether a given facet has been used in the current context\n   * @param facet\n   */\n  private hasFiltered(facet: FacetConfig): boolean {\n    return this.facetService.hasFiltered(facet.name);\n  }\n\n  /**\n   * When the results change, actualize count, hasData and hasFiltered\n   * which are displayed in the template.\n   */\n  ngOnChanges() {\n    this.facets.forEach(facet => {\n      facet.$count = this.getFacetCount(facet);\n      facet.$hasData = this.facetService.hasData(facet.aggregation, this.results);\n      facet.$hasFiltered = this.hasFiltered(facet);\n    });\n    this.changeDetectorRef.detectChanges();\n  }\n\n}\n","<div *ngIf=\"!openedFacet\" class=\"list-group list-group-flush\">\n    <div *ngFor=\"let facet of facets\" (click)=\"openFacet(facet)\"\n        class=\"open-facet d-flex flex-row list-group-item border-0 list-group-item-action px-3 py-1 align-items-center\"\n        [ngClass]=\"{'list-group-item-success':facet.$hasFiltered, 'disabled':!facet.$hasData }\">\n        <span class=\"flex-grow-1\">{{ facet.title | sqMessage }}</span>\n        <span class=\"fa-stack icons-group\" sqTooltip=\"{{ 'msg#facet.filters.clear' | sqMessage }}\" (click)=\"clearFacetFilters(facet, $event)\" *ngIf=\"facet.$hasFiltered\">\n            <i class=\"ml-2 far fa-minus-square fa-stack-1x icons icon-hover\"></i>\n            <i class=\"ml-2 far fa-check-square fa-stack-1x icons icon-default\"></i>\n        </span>\n        <span\n            *ngIf=\"showCount\"\n            class=\"mx-2 text-muted small\"\n            title=\"{{ 'msg#facet.filterItemCountTooltip' | sqMessage:{ values: { count: facet.$count } } }}\"\n        >\n            {{ facet.$count | sqNumber }}\n        </span>\n        <i class=\"fas fa-caret-right\"></i>\n    </div>\n</div>\n\n<ng-container *ngIf=\"openedFacet\">\n    <sq-facet-list #facet *ngIf=\"openedFacet.type==='list'\"\n        [name]=\"openedFacet.name\"\n        [results]=\"results\"\n        [aggregation]=\"openedFacet.aggregation\"\n        [showCount]=\"openedFacet.showCount\"\n        [searchable]=\"openedFacet.searchable\"\n        [allowExclude]=\"openedFacet.allowExclude\"\n        [allowOr]=\"openedFacet.allowOr\"\n        [allowAnd]=\"openedFacet.allowAnd\"\n        [displayEmptyDistributionIntervals]=\"openedFacet.displayEmptyDistributionIntervals\"\n        [showProgressBar]=\"showProgressBar\"\n    >\n    </sq-facet-list>\n\n    <sq-facet-tree #facet *ngIf=\"openedFacet.type==='tree'\"\n        [name]=\"openedFacet.name\"\n        [results]=\"results\"\n        [aggregation]=\"openedFacet.aggregation\"\n        [showCount]=\"openedFacet.showCount\"\n        [allowExclude]=\"openedFacet.allowExclude\"\n        [allowOr]=\"openedFacet.allowOr\">\n    </sq-facet-tree>\n</ng-container>\n","import {Injectable, ViewContainerRef, ComponentRef, Type, ComponentFactory, ComponentFactoryResolver, ApplicationRef,\n    Injector, SimpleChanges, SimpleChange, EventEmitter} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\n\n/**\n * Describes the options that can be passed to [LoadComponentService.loadComponent]{@link LoadComponentService#loadComponent}\n */\nexport interface LoadComponentOptions {\n    /**\n     * The type of the component to load\n     */\n    component: Type<any>;\n    /**\n     * The initial values for the component's `@Input` decorated properties\n     */\n    inputs?: MapOf<any>;\n    /**\n     * The handlers for the component's `@Output` decorated events\n     */\n    outputs?: MapOf<any>;\n    /**\n     * The index at which to insert the loaded component's host view into the container.\n     * If not specified, appends the new view as the last entry.\n     * See [ViewContainerRef.createComponent]{@link https://angular.io/api/core/ViewContainerRef#createComponent}\n     */\n    index?: number;\n}\n\n/**\n * Describes the object returned by [LoadComponentService.loadComponent]{@link LoadComponentService#loadComponent}\n */\nexport interface LoadedComponent {\n    /**\n     * The loaded component instance\n     */\n    componentRef: ComponentRef<any>;\n    /**\n     * The subscriptions made to the component's output events\n     */\n    subscriptions?: Subscription;\n}\n\n/**\n * This service provides methods to dynamically load and unload an angular component from its type.\n * The component's initial inputs and outputs are respected and the first call to the component's\n * `ngOnChanges` method is made.\n * Changes to the inputs and outputs can be made by calling {@link #bindComponent} which will call\n * the component's `ngOnChanges` method again\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class LoadComponentService {\n\n    // A cache of resolved component factories\n    private factories = new Map<Type<any>, ComponentFactory<any>>();\n\n    constructor(\n        private componentFactoryResolver: ComponentFactoryResolver,\n        private applicationRef: ApplicationRef) {\n    }\n\n    private _bindComponent(options: LoadComponentOptions, loadedComponent: LoadedComponent, initialLoad: boolean) {\n        if (!initialLoad) {\n            this.unbindComponent(loadedComponent);\n        }\n        const ngOnChanges: (changes: SimpleChanges) => void = loadedComponent.componentRef.instance.ngOnChanges;\n        let simpleChanges: SimpleChanges | undefined;\n        const makeSimpleChanges = Utils.isFunction(ngOnChanges) && !!options.inputs;\n        if (!!options.inputs) {\n            // Assign inputs and generate SimpleChanges if required\n            Object.keys(options.inputs).forEach(name => {\n                if (makeSimpleChanges) {\n                    const previousValue = initialLoad ? undefined : loadedComponent.componentRef.instance[name];\n                    const currentValue = options.inputs![name];\n                    if (initialLoad || currentValue !== previousValue) {\n                        if (!simpleChanges) {\n                            simpleChanges = {};\n                        }\n                        simpleChanges[name] = new SimpleChange(previousValue, currentValue, initialLoad);\n                    }\n                }\n                loadedComponent.componentRef.instance[name] = options.inputs![name];\n            });\n        }\n        if (!!options.outputs) {\n            Object.keys(options.outputs).forEach(name => {\n                const eventEmitter: EventEmitter<any> = loadedComponent.componentRef.instance[name];\n                if (eventEmitter) {\n                    const subscription = eventEmitter.subscribe(options.outputs![name]);\n                    if (!loadedComponent.subscriptions) {\n                        loadedComponent.subscriptions = subscription;\n                    }\n                    else {\n                        loadedComponent.subscriptions.add(subscription);\n                    }\n                }\n            });\n        }\n        if (simpleChanges) {\n            ngOnChanges.call(loadedComponent.componentRef.instance, simpleChanges);\n        }\n    }\n\n    /**\n     * Bind a component's input and output properties according to the passed options. Generate a\n     * call to the component's `ngOnChanges` method if the inputs have changed since the last call.\n     * If the component has been previously bound it is first unbound by calling {@link #unbindComponent}\n     * which will unsubscribe the component's outputs\n     *\n     * @param options Specify the inputs and outputs for the component\n     * @param loadedComponent A component loaded by {@link #loadComponent}\n     */\n    public bindComponent(options: LoadComponentOptions, loadedComponent: LoadedComponent) {\n        return this._bindComponent(options, loadedComponent, false);\n    }\n\n    /**\n     * Unbind a previously bound dynamically loaded component. Subscriptions to the component's\n     * outputs are unsubscribed\n     *\n     * @param loadedComponent A component loaded by {@link #loadComponent}\n     */\n    unbindComponent(loadedComponent: LoadedComponent) {\n        if (!!loadedComponent.subscriptions) {\n            loadedComponent.subscriptions.unsubscribe();\n            loadedComponent.subscriptions = undefined;\n        }\n    }\n\n    /**\n     * Dynamically load a component from its type. The component's inputs and outputs will be initialized\n     * by calling {@link #bindComponent}.\n     *\n     * @param options The options containing the component to load and its inputs and outputs\n     * @param viewContainerRef Specifies where the loaded component should be attached. If not specified then the\n     * loaded component is inserted before the application component\n     * @param injector Overrides the injector to use as the parent for the component. By default this will be\n     * the injector held on the `viewContainerRef`\n     */\n    loadComponent<T>(options: LoadComponentOptions, viewContainerRef?: ViewContainerRef, injector?: Injector): LoadedComponent {\n        let componentRef: ComponentRef<T>;\n        let factory = this.factories.get(options.component);\n        if (!factory) {\n            factory = this.componentFactoryResolver.resolveComponentFactory(options.component);\n        }\n        if (!viewContainerRef) {\n            const appElement: Element = this.applicationRef.components[0].location.nativeElement;\n            const injector1 = this.applicationRef.components[0].injector;\n            componentRef = factory.create(injector1, [[appElement]]);\n            this.applicationRef.attachView(componentRef.hostView);\n            if (appElement.parentElement) {\n                appElement.parentElement.insertBefore(componentRef.location.nativeElement, appElement.nextSibling);\n            }\n        }\n        else {\n            if (!injector) {\n                injector = viewContainerRef.injector;\n            }\n            const index = !Utils.isEmpty(options.index) ? options.index : undefined;\n            componentRef = viewContainerRef.createComponent(factory, index, injector, []);\n        }\n        const loadedComponent: LoadedComponent = {\n            componentRef\n        };\n        this._bindComponent(options, loadedComponent, true);\n        loadedComponent.componentRef.changeDetectorRef.detectChanges();\n        return loadedComponent;\n    }\n\n    /**\n     * Unload a dynamically loaded component. It is unbound prior to being destroyed\n     *\n     * @param component A loaded component\n     */\n    unloadComponent(component: LoadedComponent) {\n        if (!!component) {\n            this.unbindComponent(component);\n            component.componentRef.destroy();\n        }\n    }\n}\n","export default {\n    \"results\": {\n        \"missingTerms\": \"fehlende Begriffe:\",\n        \"resultsCount\": \"{count, plural, =0 {keine Ergebnisse} one {# Ergebnis} other {# Ergebnisse}}\"\n    },\n    \"userRatings\": {\n        \"average\": \"Durchschnittlich: {average}\"\n    },\n};\n","export * from \"./feedback.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export default {\n    \"modal\": {\n        \"login\": {\n            \"title\": \"Login\",\n            \"userName\": \"User name\",\n            \"password\": \"Password\",\n            \"singleSignOn\": \"Single sign-on\",\n            \"signInWith\": \"Sign in with...\"\n        }\n    }\n};\n","export * from \"./public-api\";","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport { ModalProperties, LabelsService } from \"../../labels.service\";\nimport { SelectionService } from \"@sinequa/components/selection\";\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { Record } from \"@sinequa/core/web-services\";\nimport { SearchService } from \"@sinequa/components/search\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { NotificationsService } from \"@sinequa/core/notification\";\n\n@Component({\n    selector: \"sq-edit-label\",\n    templateUrl: \"./edit-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsEditLabel implements OnInit {\n    public selectedRecordsIds: string[];\n    public buttons: ModalButton[];\n    /** Initial labels list assigned to a record */\n    public initialLabels: string[] = [];\n    public record: Record | undefined;\n    public isProcessing: boolean = false;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            valuesToBeAdded: string[],\n            valuesToBeRemoved: string[],\n            properties: ModalProperties\n        },\n        private appService: AppService,\n        private selectionService: SelectionService,\n        private labelsService: LabelsService,\n        private searchService: SearchService,\n        private notificationService: NotificationsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        this.selectedRecordsIds = !!this.selectionService.getSelectedIds()\n            ? this.selectionService.getSelectedIds()\n            : [];\n        if (this.selectedRecordsIds.length === 1) {\n            this.record = this.searchService.getRecordFromId(\n                this.selectedRecordsIds[0]\n            );\n            this.initialLabels = this._getInitialRecordLabels();\n        }\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#editLabel.btnEdit\",\n                primary: true,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: () => {\n                    const observable = this.labelsService.addLabels(\n                        this.model.valuesToBeAdded,\n                        this.selectionService.getSelectedIds(),\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.notificationService.error(\n                                    \"msg#editLabel.errorFeedback\"\n                                );\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.labelsService\n                                    .removeLabels(\n                                        this.model.valuesToBeRemoved,\n                                        this.selectionService.getSelectedIds(),\n                                        this.model.properties.public\n                                    )\n                                    .subscribe(\n                                        () => {},\n                                        (error) => {\n                                            this.notificationService.error(\n                                                \"msg#editLabel.errorFeedback\"\n                                            );\n                                            this.modalRef.close(error);\n                                        },\n                                        () => {\n                                            this.isProcessing = false;\n                                            this.modalRef.close(ModalResult.OK);\n                                            this.notificationService.success(\n                                                \"msg#editLabel.successFeedback\"\n                                            );\n                                            this.searchService.search(); /** Update the display immediately in the components and facets*/\n                                        }\n                                    );\n                            }\n                        );\n                    }\n                },\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n        this.model.valuesToBeRemoved = [];\n        this.model.valuesToBeAdded = [];\n        if (this.selectedRecordsIds.length === 1) {\n            this.initialLabels = this._getInitialRecordLabels(); /** update initial labels */\n        }\n    }\n\n    onLabelsChanged(values: string[]) {\n        if (!!this.initialLabels) {\n            this.model.valuesToBeAdded = values.filter(\n                (value) => !this.initialLabels.find((label) => label === value)\n            );\n            this.model.valuesToBeRemoved = this.initialLabels.filter(\n                (label) => !values.find((value) => value === label)\n            );\n        } else {\n            this.model.valuesToBeAdded = values;\n            this.model.valuesToBeRemoved = [];\n        }\n    }\n\n    onLabelsToBeAddedChanged(values: string[]) {\n        this.model.valuesToBeAdded = values;\n    }\n\n    onLabelsToBeRemovedChanged(values: string[]) {\n        this.model.valuesToBeRemoved = values;\n    }\n\n    /**\n     * Return the list of labels already assigned to the selected record\n     */\n    private _getInitialRecordLabels(): string[] {\n        if (!!this.record) {\n            const field = this.model.properties.public\n                ? this.labelsService.publicLabelsField\n                : this.labelsService.privateLabelsField;\n            const labelsField = this.appService.resolveColumnAlias(field);\n            if (!this.model.properties.public) {\n                return !!this.record[labelsField]\n                    ? (this.labelsService.removePrivatePrefix(\n                          this.record[labelsField]\n                      ) as string[])\n                    : ([] as string[]);\n            }\n            return this.record[labelsField] || [];\n        } else {\n            return [];\n        }\n    }\n}\n","<form name=\"editLabel\" novalidate>\n    <sq-modal [title]=\"'msg#editLabel.title'\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert alert-warning\" role=\"alert\">\n                {{'msg#editLabel.alertText' | sqMessage}}\n            </div>\n            <div *ngIf=\"model.properties.allowManagePublicLabels || !model.properties.public \" class=\"alert alert-info\" role=\"alert\">\n                {{'msg#editLabel.infoText' | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n\n            <section *ngIf=\"record\">\n                <b><label for=\"label\">{{'msg#labels.labels' | sqMessage}}</label></b>\n                <sq-labels-autocomplete\n                    (labelsUpdate)=\"onLabelsChanged($event)\"\n                    [public]=\"model.properties.public\"\n                    [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                    [allowNewLabels]=\"model.properties.allowNewLabels\"\n                    [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\"\n                    [initLabels]=\"initialLabels\">\n                </sq-labels-autocomplete>\n            </section>\n\n            <section *ngIf=\"!record\">\n                <b><label for=\"label\">{{'msg#editLabel.labelsToBeAdded' | sqMessage}}</label></b>\n                <sq-labels-autocomplete\n                    (labelsUpdate)=\"onLabelsToBeAddedChanged($event)\"\n                    [public]=\"model.properties.public\"\n                    [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                    [allowNewLabels]=\"model.properties.allowNewLabels\"\n                    [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n                </sq-labels-autocomplete>\n                <b><label for=\"label\">{{'msg#editLabel.labelsToBeRemoved' | sqMessage}}</label></b>\n                <sq-labels-autocomplete\n                    (labelsUpdate)=\"onLabelsToBeRemovedChanged($event)\"\n                    [public]=\"model.properties.public\"\n                    [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                    [allowNewLabels]=\"model.properties.allowNewLabels\"\n                    [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n                </sq-labels-autocomplete>\n            </section>\n\n        </div>\n    </sq-modal>\n</form>\n","export * from \"./results-view.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export * from \"./public-api\";","export default {\n    \"baskets\": {\n        \"baskets\": \"Paniers\",\n        \"addToBasket\": \"Ajouter au panier\",\n        \"removeFromBasket\": \"Supprimer du panier\",\n        \"removeFromAllBaskets\": \"Supprimer de tous les paniers\",\n        \"removeFromAllBasketsConfirmation\": \"Êtes-vous sûr de vouloir supprimer ce résultat de ces paniers : {baskets} ?\",\n        \"basketAlreadyExists\": \"Un panier avec ce nom existe déjà. Voulez-vous le remplacer ?\",\n        \"noBasket\": \"Vous n'avez pas encore ajouté de document à un panier...\",\n        \"createBasket\": \"Créer un panier\",\n        \"manageBaskets\": \"Gérer les paniers\",\n        \"delete\": \"Supprimer ce panier\"\n    },\n\n    \"editBasket\": {\n        \"title\": \"Panier\",\n        \"name\": \"Nom\"\n    },\n\n    \"manageBaskets\": {\n        \"title\": \"Gérer les paniers\",\n        \"edit\": \"Editer\",\n        \"reorder\": \"Réorganiser\",\n        \"remove\": \"Effacer\",\n        \"removeAll\": \"Effacer tout\",\n        \"name\": \"Nom\"\n    },\n\n    \"selectBasket\": {\n        \"title\": \"Sélectionner un panier\",\n        \"newBasket\": \"Nouveau panier...\"\n    },\n\n};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enIntl, frIntl, deIntl} from \"@sinequa/core/intl\";\nimport _enModal from \"./en\";\nimport _frModal from \"./fr\";\nimport _deModal from \"./de\";\n\nconst enModal = Utils.merge({}, _enModal, enIntl);\nconst frModal = Utils.merge({}, _frModal, frIntl);\nconst deModal = Utils.merge({}, _deModal, deIntl);\n\nexport { enModal, frModal, deModal };\n","import enIntl from \"./en\";\nimport frIntl from \"./fr\";\nimport deIntl from \"./de\";\n\nexport { enIntl, frIntl, deIntl };\n","export default {\n    \"modal\": {\n        \"buttons\": {\n            \"ok\": \"OK\",\n            \"cancel\": \"Annuler\",\n            \"yes\": \"Oui\",\n            \"no\": \"Non\",\n            \"abort\": \"Abandonner\",\n            \"retry\": \"Réessayer\",\n            \"ignore\": \"Ignorer\"\n        },\n\n        \"confirm\": {\n            \"title\": \"Confirmer\"\n        },\n        \"prompt\": {\n            \"title\": \"Saississez une valeur\"\n        }\n    }\n};\n","import { Component, Input, OnChanges, SimpleChanges, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { Utils } from \"@sinequa/core/base\";\nimport { LinkResult, SponsoredLinksWebService, AuditWebService, AuditEventType, AuditEvent } from \"@sinequa/core/web-services\";\nimport { AppService, Query } from \"@sinequa/core/app-utils\";\nimport {SearchService} from \"@sinequa/components/search\";\n\n@Component({\n    selector: 'sq-sponsored-results',\n    templateUrl: './sponsored-results.html',\n    styleUrls: [\"./sponsored-results.scss\"]\n})\n\n/**\n * Represent the component that display the sponsored results on result page.\n * NOTE: this class and (its containing file) could have been named SponsoredLinks but this naming causes\n * the file to be flagged as ads by Adblock.\n */\nexport class SponsoredResults implements OnChanges, OnInit {\n    @Input() query: Query;\n    public sponsoredlinks: LinkResult[];\n\n    private lastText: string;\n    private currentPage?: number;\n    private linksQuery: Query;\n    private initDone: boolean;\n    private webService: string;\n\n    constructor(\n        private appService: AppService,\n        private searchService: SearchService,\n        private sponsoredResultsService: SponsoredLinksWebService,\n        private auditService: AuditWebService,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    /**\n     * Considers the text of the new query and sees if the list of the sponsored lists needs to be updated.\n     *\n     * @param text The text of the new query.\n     * @memberof SponsoredLinks\n     */\n    private updateSponsoredLinksIfNecessary(text: string): void {\n        if (!this.appService.app) {\n            return; // logout\n        }\n\n        let redoQuery = false;\n        const currentWS = this.getWebService();\n        if (!Utils.eqNC(this.webService, currentWS)) {\n            this.webService = currentWS;\n            redoQuery = true;\n        }\n\n        if (!redoQuery && !Utils.eqNC(this.lastText, text)) {\n            this.lastText = text;\n            redoQuery = true;\n        }\n\n        if (!redoQuery && this.currentPage !== this.searchService.query.page) {\n            this.currentPage = this.searchService.query.page;\n            redoQuery = true;\n        }\n\n        if (redoQuery) {\n            if (!Utils.isEmpty(this.webService) && !Utils.isEmpty(text)) {\n                this.linksQuery.text = text;\n                this.linksQuery.page = this.currentPage;\n                Utils.subscribe(\n                    this.sponsoredResultsService.getLinks(this.linksQuery, this.webService),\n                    (results) => {\n                        this.sponsoredlinks = results.links;\n                        this.auditLinksDisplay();\n                        this.changeDetectorRef.markForCheck();\n                    },\n                    (error) => console.log(`Could not retrieve sponsored links: ${error}.`)\n                );\n            } else {\n                this.sponsoredlinks = [];\n            }\n        }\n    }\n\n    /**\n     * Retrieves the web service for sponsored links.\n     * If it is defined both in the component configuration and the app configuration,\n     * this method returns the one in the component configuration.\n     *\n     * @returns the web service for sponsored links.\n     */\n    private getWebService(): string {\n        return (this.appService.app && this.appService.app.sponsoredLinks) || \"\";\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.initDone) {\n            this.initialize();\n        }\n\n        if (changes['query'] || changes['results']) {\n            this.updateSponsoredLinksIfNecessary(Utils.trim(this.query.text || \"\"));\n        }\n    }\n\n    private initialize(): void {\n        if (this.initDone) {\n            return;\n        }\n\n        if (this.appService.ccquery) {\n            this.linksQuery = new Query(this.appService.ccquery.name);\n        } else {\n            return;\n        }\n        this.initDone = true;\n    }\n\n    ngOnInit(): void {\n        this.initialize();\n    }\n\n    auditLinksDisplay() {\n        if (!!this.sponsoredlinks && this.sponsoredlinks.length > 0) {\n            const auditEvents: AuditEvent[] = [];\n            this.sponsoredlinks.forEach(link => {\n                auditEvents.push({\n                    type: AuditEventType.Link_Display,\n                    detail: {\n                        resultid: this.searchService.results && this.searchService.results.id,\n                        linkid: link.id,\n                        rank: link.rank,\n                        title: link.title,\n                        url: link.url\n                    }\n                });\n            });\n            this.auditService.notify(auditEvents);\n        }\n    }\n\n    click(link: LinkResult) {\n        this.auditService.notifySponsoredLink(AuditEventType.Link_Click, link,\n            this.searchService.results && this.searchService.results.id || \"\");\n    }\n}\n","<ul class=\"sq-sponsored-links-list\" *ngIf=\"!!sponsoredlinks\" >\n    <li *ngFor=\"let link of sponsoredlinks\" class=\"sponsored-item\" >\n        <div class=\"sq-sponsored-link-view\">\n            <div *ngIf=\"link.thumbnail\" class=\"sq-sponsored-link-view-thumbnail\">\n                <a href=\"{{link.url}}\" (click)=\"click(link)\" target=\"_blank\">\n                    <img src=\"{{link.thumbnail}}\">\n                </a>\n            </div>\n            <div class=\"sq-sponsored-link-view-info\">\n                <a href=\"{{link.url}}\" (click)=\"click(link)\" target=\"_blank\" title=\"{{link.title | sqMessage}}\">{{link.title | sqMessage}}</a>\n                <div *ngIf=\"link.summary\" class=\"sq-sponsored-link-view-summary\">{{link.summary | sqMessage}}</div>\n            </div>\n        </div>\n    </li>\n</ul>\n","import {Pipe, ChangeDetectorRef} from \"@angular/core\";\nimport {AbstractIntlPipe, IntlService} from \"@sinequa/core/intl\";\n\n@Pipe({name: \"sqTime\", pure: false})\nexport class TimePipe extends AbstractIntlPipe {\n    constructor(\n        intlService: IntlService,\n        changeDetectorRef: ChangeDetectorRef) {\n        super(intlService, changeDetectorRef);\n    }\n\n    updateValue(key: number | Date, params: Intl.DateTimeFormatOptions): void {\n        super.updateValue(key, params);\n        this.value = this.intlService.formatTime(key, params);\n    }\n}","import { Inject, Injectable } from \"@angular/core\";\r\nimport { Observable } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\nimport { SqHttpClient } from \"./http-client\";\r\nimport { HttpService } from \"./http.service\";\r\nimport { Results } from \"./query.web.service\";\r\nimport { StartConfig, START_CONFIG } from \"./start-config.web.service\";\r\n\r\nexport type Dataset = {[key: string]: Results|DatasetError};\r\n\r\nexport interface DatasetError {\r\n    errorCode: number;\r\n    errorMessage: string;\r\n}\r\n\r\nexport interface DatasetDescription {\r\n    name: string;\r\n    description?: string;\r\n}\r\n\r\n/**\r\n * A service to notify the audit manager on the Sinequa server of client-side events\r\n */\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class DatasetWebService extends HttpService {\r\n    private static readonly endpoint = \"search.dataset\";\r\n\r\n    constructor(\r\n        @Inject(START_CONFIG) startConfig: StartConfig,\r\n        protected httpClient: SqHttpClient) {\r\n        super(startConfig);\r\n    }\r\n\r\n    /**\r\n     * Return the list of queries configured in the given\r\n     * dataset web service.\r\n     * @param webServiceName name of the web service\r\n     */\r\n    list(webServiceName: string): Observable<DatasetDescription[]> {\r\n        return this.httpClient.get<DatasetDescription[]>(\r\n            `${this.makeUrl(DatasetWebService.endpoint)}/${webServiceName}`\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Queries the given web service.\r\n     * @param webServiceName name of the web service\r\n     * @param query name of the query\r\n     * @param params parameters of the queries\r\n     */\r\n    get(webServiceName: string, query: string, parameters = {}): Observable<Results|DatasetError> {\r\n        let url = `${this.makeUrl(DatasetWebService.endpoint)}/${webServiceName}/${query}`;\r\n        return this.httpClient.post<{datasets: Dataset}>(url, {parameters})\r\n            .pipe(map(d => d.datasets[query]));\r\n    }\r\n\r\n    /**\r\n     * Queries the given web service.\r\n     * @param webServiceName name of the web service\r\n     * @param params parameters of the queries\r\n     */\r\n    getAll(webServiceName: string, parameters = {}): Observable<Dataset> {\r\n        let url = `${this.makeUrl(DatasetWebService.endpoint)}/${webServiceName}`;\r\n        return this.httpClient.post<{datasets: Dataset}>(url, {parameters})\r\n            .pipe(map(d => d.datasets));\r\n    }\r\n\r\n}","import {Injectable, InjectionToken, Optional, Inject, OnDestroy} from \"@angular/core\";\nimport {Router} from \"@angular/router\";\nimport {SearchService} from \"./search.service\";\nimport {Subscription, Observable, of} from 'rxjs';\nimport {Utils} from \"@sinequa/core/base\";\nimport {AuditEventType, Results} from \"@sinequa/core/web-services\";\n\nexport interface FirstPageOptions {\n    displayOnHomePage?: boolean;\n}\n\nexport const FIRST_PAGE_OPTIONS = new InjectionToken<FirstPageOptions>(\"FIRST_PAGE_OPTIONS\");\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class FirstPageService implements OnDestroy {\n    private searchSubscription: Subscription;\n    firstPage: Results;\n\n    constructor(\n        @Optional() @Inject(FIRST_PAGE_OPTIONS) protected options: FirstPageOptions,\n        protected searchService: SearchService,\n        protected router: Router\n    ) {\n        if (!this.options) {\n            this.options = {};\n        }\n        this.searchSubscription = this.searchService.events.subscribe(\n            (event) => {\n                if (event.type === \"clear\") {\n                    if (this.displayOnHomePage(event.path)) {\n                        Utils.subscribe(this.getFirstPage(),\n                            (results) => {\n                                this.searchService.setResults(results);\n                            });\n                    }\n                }\n            }\n        );\n    }\n\n    ngOnDestroy() {\n        this.searchSubscription.unsubscribe();\n    }\n\n    /**\n     * @ignore\n     * legacy\n     */\n    get isFirstPage(): boolean {\n        return this.isCurrentSearchResults;\n    }\n\n    get isCurrentSearchResults(): boolean {\n        return !!this.searchService.results && this.searchService.results === this.firstPage;\n    }\n\n    displayOnHomePage(path?: string): boolean {\n        if (Utils.isArray(this.options.displayOnHomePage)) {\n            if (!path) {\n                const url = Utils.makeURL(this.router.url);\n                path = url.pathname;\n            }\n            for (const path1 of this.options.displayOnHomePage) {\n                if (Utils.endsWith(path, Utils.addUrl(\"/\", path1))) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            return !!this.options.displayOnHomePage;\n        }\n    }\n\n    getFirstPage(): Observable<Results> {\n        if (this.firstPage) {\n            return of<Results>(this.firstPage);\n        }\n        const query = this.searchService.makeQuery();\n        query.isFirstPage = true;\n        const observable = this.searchService.getResults(query, {\n            type: AuditEventType.Search_FirstPage\n        }, {\n            searchInactive: true\n        });\n        Utils.subscribe(observable,\n            (results) => {\n                this.firstPage = results;\n                return results;\n            });\n        return observable;\n    }\n}\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enSelection, frSelection, deSelection} from \"@sinequa/components/selection\";\nimport {enCollapse, frCollapse, deCollapse} from \"@sinequa/components/collapse\";\nimport _enFacet from \"./en\";\nimport _frFacet from \"./fr\";\nimport _deFacet from \"./de\";\n\nconst enFacet = Utils.merge({}, _enFacet, enSearch, enSelection, enCollapse);\nconst frFacet = Utils.merge({}, _frFacet, frSearch, frSelection, frCollapse);\nconst deFacet = Utils.merge({}, _deFacet, deSearch, deSelection, deCollapse);\n\nexport {enFacet, frFacet, deFacet};\n\n","export default {\n    metadata: {\n        extractslocationsLabel: \"Relevant extract\",\n        extractslocationsPluralLabel: \"Relevant extracts\",\n        geoLabel: \"Place\",\n        geoPluralLabel: \"Places\",\n        personLabel: \"Person\",\n        personPluralLabel: \"People\",\n        companyLabel: \"Company\",\n        companyPluralLabel: \"Companies\",\n        treepathLabel: \"Source\",\n        treepathPluralLabel: \"Sources\",\n        matchlocationsLabel: \"Search term\",\n        matchlocationsPluralLabel: \"Search terms\",\n        titleLabel: \"Title\",\n        titlePluralLabel: \"Titles\",\n        authorsLabel: \"Author\",\n        authorsPluralLabel: \"Authors\",\n        filenameLabel: \"Filename\",\n        filenamePluralLabel: \"Filenames\",\n        modifiedLabel: \"Date\",\n        modifiedPluralLabel: \"Dates\",\n        sizeLabel: \"Size\",\n        sizePluralLabel: \"Sizes\",\n        docformatLabel: \"Format\",\n        docformatPluralLabel: \"Formats\",\n        documentlanguagesLabel: \"Language\",\n        documentlanguagesPluralLabel: \"Languages\",\n        geo_label: \"Place\",\n        geo_plural_label: \"Places\",\n        person_label: \"Person\",\n        person_plural_label: \"People\",\n        company_label: \"Company\",\n        company_plural_label: \"Companies\",\n        treepath_label: \"Source\",\n        treepath_plural_label: \"Sources\",\n        title_label: \"Title\",\n        title_plural_label: \"Titles\",\n        authors_label: \"Author\",\n        authors_plural_label: \"Authors\",\n        filename_label: \"Filename\",\n        filename_plural_label: \"Filenames\",\n        modified_label: \"Date\",\n        modified_plural_label: \"Dates\",\n        size_label: \"Size\",\n        size_plural_label: \"Sizes\",\n        docformat_label: \"Format\",\n        docformat_plural_label: \"Formats\",\n        documentlanguages_label: \"Language\",\n        documentlanguages_plural_label: \"Languages\",\n        accessLists: {\n            authorizedListTitleText: \"Authorized access list\",\n            authorizedListHeader: \"Authorized access list {value, number}\",\n            deniedListTitleText: \"Denied access list\",\n            deniedListHeader: \"Denied access list {value, number}\"\n        },\n        item: {\n            label: \"{label}:\",\n            separator: \"|\",\n            treeSeparator: \" ; \",\n            treeNodeSeparator: \"/\",\n            listSeparator: \", \",\n            empty_boolean: 'false',\n            empty_number: '0'\n        }\n    },\n};\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsModalModule} from \"@sinequa/components/modal\";\n\nimport {BsAutocompleteModule} from \"@sinequa/components/autocomplete\";\n\nimport {LabelPipe} from \"./label.pipe\";\nimport {Labels} from \"./labels.component\";\nimport {ResultLabels} from \"./result-labels.component\";\nimport {LabelsAutocomplete} from \"./labels-autocomplete.directive\";\n\n@NgModule({\n    imports: [\n        FormsModule, ReactiveFormsModule,\n        CommonModule,\n\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsModalModule,\n        BsAutocompleteModule,\n    ],\n    declarations: [\n        LabelPipe, Labels, ResultLabels, LabelsAutocomplete\n    ],\n    exports: [\n        LabelPipe, Labels, ResultLabels, LabelsAutocomplete\n    ],\n})\nexport class LabelsModule {\n}\n","import {\n    Component,\n    OnInit,\n    Input,\n    OnChanges,\n    SimpleChanges,\n    OnDestroy,\n} from \"@angular/core\";\nimport { Action } from \"@sinequa/components/action\";\nimport { LoginService } from \"@sinequa/core/login\";\nimport { LabelsService } from \"../../labels.service\";\nimport { Results } from \"@sinequa/core/web-services\";\nimport { Subscription } from \"rxjs\";\n\n@Component({\n    selector: \"sq-labels-menu\",\n    templateUrl: \"./labels-menu.component.html\",\n})\nexport class BsLabelsMenuComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() results: Results;\n    @Input() icon: string = \"fas fa-tags\";\n    @Input() autoAdjust: boolean = true;\n    @Input() autoAdjustBreakpoint: string = \"xl\";\n    @Input() collapseBreakpoint: string = \"sm\";\n    @Input() size: string;\n\n    menu: Action | undefined;\n\n    // Labels  actions\n    renameAction: Action;\n    deleteAction: Action;\n    bulkAddAction: Action;\n    bulkDeleteAction: Action;\n\n    private _loginServiceSubscription: Subscription;\n\n    constructor(\n        public loginService: LoginService,\n        public labelsService: LabelsService\n    ) {\n        this.renameAction = new Action({\n            text: \"msg#renameLabel.title\",\n            title: \"msg#renameLabel.title\",\n            action: () => {\n                this.labelsService.renameLabelModal();\n            },\n        });\n\n        this.deleteAction = new Action({\n            text: \"msg#deleteLabel.title\",\n            title: \"msg#deleteLabel.title\",\n            action: () => {\n                this.labelsService.deleteLabelModal();\n            },\n        });\n\n        this.bulkAddAction = new Action({\n            text: \"msg#bulkAddLabel.title\",\n            title: \"msg#bulkAddLabel.title\",\n            action: () => {\n                this.labelsService.bulkAddLabelModal();\n            },\n        });\n\n        this.bulkDeleteAction = new Action({\n            text: \"msg#bulkRemoveLabel.title\",\n            title: \"msg#bulkRemoveLabel.title\",\n            action: () => {\n                this.labelsService.bulkRemoveLabelModal();\n            },\n        });\n    }\n\n    ngOnInit() {\n        this._loginServiceSubscription = this.loginService.events.subscribe(\n            (event) => {\n                if (event.type === \"session-changed\") {\n                    this.updateMenu();\n                }\n            }\n        );\n    }\n\n    ngOnDestroy() {\n        if (this._loginServiceSubscription) {\n            this._loginServiceSubscription.unsubscribe();\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.results) {\n            this.updateMenu();\n        }\n    }\n\n    updateMenu() {\n        if (!this.loginService.complete) {\n            this.menu = undefined;\n            return;\n        }\n\n        if (\n            !this.labelsService.publicLabelsField &&\n            !this.labelsService.privateLabelsField\n        ) {\n            this.menu = undefined;\n            return;\n        }\n\n        const labelsActions: Action[] = [this.renameAction, this.deleteAction];\n\n        /** Allow Bulk actions only if there are some results */\n        if (!!this.results && !!this.results.records) {\n            labelsActions.push(this.bulkAddAction);\n            labelsActions.push(this.bulkDeleteAction);\n        }\n\n        this.menu = new Action({\n            icon: this.icon,\n            text: \"msg#labels.labels\",\n            children: labelsActions,\n        });\n    }\n}\n","<li *ngIf=\"!!menu && !menu.hidden\" class=\"nav-item dropdown\" \n    [sq-action-item]=\"{item: menu, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n    [collapseBreakpoint]=\"collapseBreakpoint\"\n></li>","import {Component, Input, Output, EventEmitter, HostBinding} from \"@angular/core\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {AppService, ValueItem} from \"@sinequa/core/app-utils\";\nimport {Record} from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-metadata\",\n    templateUrl: \"./metadata.html\",\n    styleUrls: [\"./metadata.scss\"]\n})\nexport class Metadata {\n    @Input() record: Record;\n    @Input() items: string[];\n    @Input() showTitles: boolean = true;\n    @Input() showIcons: boolean = false;\n    @Input() showCounts: boolean = true;\n    @Input() clickable: boolean = true;\n    @HostBinding(\"class.sq-tabular\") @Input() tabular: boolean = true;\n    @Input() collapseRows: boolean = true;\n    @Input() searchOnClick: boolean = true;\n    \n    @Output(\"select\") _select = new EventEmitter<{item: string, valueItem: ValueItem}>();\n\n    constructor(\n        public appService: AppService, \n        public searchService: SearchService) {\n    }\n\n    select(item: string, valueItem: ValueItem) {\n        if(this.searchOnClick) {\n            this.searchService.addFieldSelect(item, valueItem);\n            this.searchService.search();\n        }\n        this._select.emit({item: item, valueItem: valueItem});\n    }\n}","<sq-metadata-item *ngFor=\"let item of items; let $index = index\"\n    [record]=\"record\"\n    [item]=\"item\"\n    (select)=\"select($event.item, $event.valueItem)\"\n    [showTitle]=\"showTitles\"\n    [showIcon]=\"showIcons\"\n    [showCounts]=\"showCounts\"\n    [clickable]=\"clickable\"\n    [tabular]=\"tabular\"\n    [collapseRows]=\"collapseRows\">\n    <span *ngIf=\"!tabular && $index < items.length - 1\" class=\"ml-1 mr-2\">{{'msg#metadata.item.separator' | sqMessage}}</span>\n</sq-metadata-item>\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\n\nimport {VisModule} from \"ngx-vis\";\n\nimport {ResultTimeline} from \"./result-timeline/result-timeline\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n\n        IntlModule,\n\n        VisModule\n    ],\n    declarations: [\n        ResultTimeline\n    ],\n    exports: [\n        ResultTimeline\n    ]\n})\nexport class VisTimelineModule {\n}\n","export * from \"./validation.directive\";\nexport * from \"./validation-error.pipe\";\nexport * from \"./validation-message.component\";\nexport * from \"./validation.module\";\nexport * from \"./validation.service\";\nexport * from \"./messages/index\";\n","export * from \"./abstract-intl.pipe\";\nexport * from \"./import-moment\";\nexport * from \"./intl.module\";\nexport * from \"./intl.service\";\nexport * from \"./message.pipe\";\nexport * from \"./messages/index\";\n","export * from \"./public-api\";","export * from \"./edit-saved-query/edit-saved-query\";\nexport * from \"./export-query/export-query\";\nexport * from \"./manage-saved-queries/manage-saved-queries\";\nexport * from \"./query-exporter/query-exporter\";\nexport * from \"./saved-queries.module\";\nexport * from \"./saved-queries-menu/saved-queries-menu.component\";\nexport * from \"./facet-saved-queries/facet-saved-queries\";\nexport * from \"./facet-recent-queries/facet-recent-queries\";\nexport * from \"./facet-recent-documents/facet-recent-documents\";","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {BaseModule} from \"@sinequa/core/base\";\nimport {AppUtilsModule} from \"@sinequa/core/app-utils\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {LoadComponentModule} from \"@sinequa/core/load-component\";\n\nimport {ValidationDirective, VALIDATION_MESSAGE_COMPONENT} from \"./validation.directive\";\nimport {ValidationErrorPipe} from \"./validation-error.pipe\";\nimport {ValidationMessageComponent} from \"./validation-message.component\";\n\nimport {VALIDATION_MODULE_PROVIDERS} from \"./module.providers\";\n\n/**\n * This module contains facilities for working with Angular's form validation. It provides a\n * {@link ValidationService} that works with {@link IntlService} and {@link FormatService} to\n * support locale-sensitive validators.\n */\n@NgModule({\n    imports: [\n        CommonModule,\n        BaseModule,\n        AppUtilsModule,\n        IntlModule,\n        LoadComponentModule\n    ],\n    declarations: [\n        ValidationDirective, ValidationMessageComponent, ValidationErrorPipe,\n    ],\n    exports: [\n        ValidationDirective, ValidationMessageComponent, ValidationErrorPipe,\n    ],\n    providers: [\n        {provide: VALIDATION_MESSAGE_COMPONENT, useValue: ValidationMessageComponent},\n\n        ...VALIDATION_MODULE_PROVIDERS\n    ]\n})\nexport class ValidationModule {\n}\n","export default {\n    \"advanced\": {\n        \"rangeSeparator\": \" / \",\n        \"dateRangePicker\": {\n            \"separator\": \" / \"\n        },\n        \"rangeInput\": {\n            \"separator\": \"/\"\n        },\n        \"select\": {\n            \"nItems\": \"{count} Elemente ausgewählt\",\n            \"allItems\": \"Alle Elemenente ausgewählt\",\n            \"noItems\": \"Keine Elemente ausgewählt\"\n        }\n    }\n};\n","import { Component, Input, OnChanges, SimpleChanges, ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Record } from \"@sinequa/core/web-services\";\nimport { ModalService, ModalResult } from \"@sinequa/core/modal\";\nimport { BasketsService, Basket } from \"../../baskets.service\";\nimport { Action } from \"@sinequa/components/action\";\n\n/**\n * Component representing the add-to-baskets button in one item of the result list view.\n *\n */\n@Component({\n    selector: 'sq-result-baskets',\n    templateUrl: './result-baskets.html'\n})\nexport class BsResultBaskets implements OnChanges, OnDestroy {\n    @Input() record: Record;\n    @Input() rightAligned: boolean;\n\n    public basketsAction: Action;\n    private addToBasketAction: Action;\n    private removeFromBasketAction: Action;\n    private removeFromAllBasketsAction: Action;\n\n    private baskets: string[];\n    private initialized: boolean;\n    private basketsSubscription: Subscription;\n\n    constructor(\n        private modalService: ModalService,\n        private basketsService: BasketsService,\n        private changeDetectorRef: ChangeDetectorRef\n    ) {\n        this.baskets = [];\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (!this.initialized) {\n            this.initialized = true;\n            this.addToBasketAction = this.buildAddToBasketAction();\n            this.removeFromBasketAction = this.buildRemoveFromBasketAction();\n            this.removeFromAllBasketsAction = this.buildRemovalFromAllBasketsAction();\n            this.basketsSubscription = this.basketsService.changes.subscribe(event => {\n                this.updateRecordBaskets();\n                this.refreshVisualization();\n            });\n        }\n        this.updateRecordBaskets();\n        this.refreshVisualization();\n    }\n\n    ngOnDestroy(): void {\n        if (this.basketsSubscription) {\n            this.basketsSubscription.unsubscribe();\n        }\n    }\n\n    public get isInBaskets(): boolean {\n        return this.baskets.length > 0;\n    }\n\n    private refreshVisualization(): void {\n        this.basketsAction = this.buildBasketsAction();\n        this.changeDetectorRef.markForCheck();\n    }\n\n    private updateRecordBaskets(): void {\n        const currentBaskets: Basket[] = this.basketsService.baskets;\n        this.baskets = [];\n        for (const basket of currentBaskets) {\n            if (!!basket.ids && basket.ids.includes(this.record.id)) {\n                this.baskets.push(basket.name);\n            }\n        }\n    }\n\n    private buildAddToBasketAction(): Action {\n        return new Action({\n            text: 'msg#baskets.addToBasket',\n            action: (item, $event) => {\n                this.basketsService.addToBasketModal(this.record.id, this.baskets);\n            }\n        });\n    }\n\n    private buildRemoveFromBasketAction(): Action {\n        return new Action({\n            text: 'msg#baskets.removeFromBasket',\n            action: (item, $event) => {\n                this.basketsService.removeFromBasketModal(this.record.id, this.baskets);\n            }\n        });\n    }\n\n    private buildRemovalFromAllBasketsAction(): Action {\n        return new Action({\n            text: 'msg#baskets.removeFromAllBaskets',\n            action: () => {\n                this.modalService\n                    .yesNo(\n                        'msg#baskets.removeFromAllBasketsConfirmation',\n                        {values: {baskets: this.baskets.join(', ')}})\n                    .then(result => {\n                        if (result === ModalResult.Yes) {\n                            this.basketsService.removeFromAllBaskets(this.record.id);\n                        }\n                    });\n            }\n        });\n    }\n\n    private buildBasketsAction(): Action {\n        return new Action({\n            icon: 'fas fa-shopping-basket',\n            title: 'msg#baskets.baskets',\n            children: this.isInBaskets\n                ? this.baskets.length === 1\n                    ? [this.addToBasketAction, this.removeFromBasketAction]\n                    : [this.addToBasketAction, this.removeFromBasketAction, this.removeFromAllBasketsAction]\n                : [this.addToBasketAction]\n        });\n    }\n}\n","<div class=\"btn-group {{ isInBaskets ? 'sq-document-in-baskets' : 'sq-document-not-in-baskets' }}\"\n    [sq-action-buttons]=\"{\n        items: [basketsAction],\n        autoAdjust: true,\n        rightAligned: rightAligned\n    }\"></div>\n","export * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export * from \"./public-api\";","export default {\n    \"system\": {\n        \"date\": \"{time, selectordinal, =0 {{date, date}} other {{date, date}, {date, time, medium}}}\",\n        \"number\": \"{value, number}\",\n        \"boolean\": \"{value, select, true {true} other {false}}\",\n        \"percent\": \"{value, number, percent}\",\n        \"fieldSeparator\": \": \",\n        \"memorySize\": {\n            \"bytes\": \"{value, number, sqZeroDecimalPlaces} B\",\n            \"kb\": \"{value, number, sqZeroDecimalPlaces} KB\",\n            \"mb\": \"{value, number, sqOneDecimalPlace} MB\",\n            \"gb\": \"{value, number, sqTwoDecimalPlaces} GB\",\n            \"tb\": \"{value, number, sqThreeDecimalPlaces} TB\",\n            \"pb\": \"{value, number, sqFourDecimalPlaces} PB\"\n        }\n    },\n\n    \"error\": {\n        \"serverError\": \"Server error\",\n        \"loginCancelled\": \"login cancelled\",\n        \"processedCredentialsError\": \"unable to get processed credentials\",\n        \"autoLoginError\": \"login failed\",\n        \"principalSwitched\": \"the logged in user has changed\",\n        \"userOverrideFailure\": \"unable to override user\",\n        \"responseLoadFailure\": \"failed to load response\",\n        \"unknownError\": \"unknown error\"\n    },\n\n    \"language\": {\n        \"ar\": \"Arabic\",\n        \"da\": \"Danish\",\n        \"de\": \"German\",\n        \"el\": \"Greek\",\n        \"en\": \"English\",\n        \"es\": \"Spanish\",\n        \"fi\": \"Finnish\",\n        \"fr\": \"French\",\n        \"it\": \"Italian\",\n        \"ja\": \"Japanese\",\n        \"ko\": \"Korean\",\n        \"nl\": \"Dutch\",\n        \"no\": \"Norwegian\",\n        \"pl\": \"Polish\",\n        \"pt\": \"Portuguese\",\n        \"ro\": \"Romanian\",\n        \"ru\": \"Russian\",\n        \"sv\": \"Swedish\",\n        \"th\": \"Thai\",\n        \"zh\": \"Traditional Chinese\",\n        \"zs\": \"Simplified Chinese\",\n        \"zz\": \"Unknown\"\n    }\n};\n","import {Input, Component} from \"@angular/core\";\n\n@Component({\n    selector: \"sq-results-counter\",\n    templateUrl: \"./results-counter.html\"\n})\nexport class ResultsCounter {\n    @Input() rowCount: number;\n}\n","<div class=\"sq-results-count\">{{'msg#results.resultsCount' | sqMessage:{values: {count: rowCount} } }}</div>","export default {\n    \"statusBar\": {\n        \"fullscreenTitleEnter\": \"Plein écran\",\n        \"fullscreenTitleExit\": \"Quitter le mode plein écran\",\n        \"networkActivity\": \"Activité reseau\"\n    }\n};\n","import { Component, OnInit, Inject, ChangeDetectorRef } from \"@angular/core\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport { ModalProperties, LabelsService } from \"../../labels.service\";\nimport { Utils } from \"@sinequa/core/base\";\n\n@Component({\n    selector: \"sq-add-label\",\n    templateUrl: \"./add-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsAddLabel implements OnInit {\n    public buttons: ModalButton[];\n    public isProcessing: boolean = false;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            values: string[],\n            properties: ModalProperties\n        },\n        private labelsService: LabelsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#bulkAddLabel.btnBulkAdd\",\n                primary: true,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: () => {\n                    const observable = this.labelsService.bulkAddLabels(\n                        this.model.values,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                },\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n    }\n\n    onLabelsChanged(values: string[]) {\n        this.model.values = values;\n    }\n}\n","<form name=\"addLabel\" novalidate>\n    <sq-modal [title]=\"'msg#bulkAddLabel.title'\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert alert-warning\" role=\"alert\">\n                {{'msg#bulkAddLabel.alertText' | sqMessage}}\n            </div>\n            <div *ngIf=\"model.properties.allowManagePublicLabels || !model.properties.public \" class=\"alert alert-info\" role=\"alert\">\n                {{'msg#bulkAddLabel.infoText' | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n            <b><label for=\"label\">{{'msg#labels.labels' | sqMessage}}</label></b>\n            <sq-labels-autocomplete\n                (labelsUpdate)=\"onLabelsChanged($event)\"\n                [public]=\"model.properties.public\"\n                [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                [allowNewLabels]=\"model.properties.allowNewLabels\"\n                [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n            </sq-labels-autocomplete>\n        </div>\n    </sq-modal>\n</form>\n","import { Component, Input, OnChanges, ChangeDetectorRef, SimpleChanges, DoCheck, Optional } from '@angular/core';\nimport { FormBuilder, FormGroup, FormControl } from '@angular/forms';\nimport { Utils } from '@sinequa/core/base';\nimport { AppService } from '@sinequa/core/app-utils';\nimport { AbstractFacet, BsFacetCard, FacetService } from '@sinequa/components/facet';\nimport { Results, ListAggregation, AggregationItem } from '@sinequa/core/web-services';\nimport { SearchService } from '@sinequa/components/search';\nimport { Action } from '@sinequa/components/action';\nimport { UserPreferences } from '@sinequa/components/user-settings';\nimport { SelectionService } from '@sinequa/components/selection';\nimport { HeatmapItem } from './heatmap.component';\n\n@Component({\n    selector: \"sq-facet-heatmap\",\n    templateUrl: './facet-heatmap.component.html'\n})\nexport class BsFacetHeatmapComponent extends AbstractFacet implements OnChanges, DoCheck {\n    @Input() results: Results;\n    @Input() aggregation= \"Heatmap\";\n    @Input() name?: string;\n\n    // Fields primarily used for a cross-distribution heatmap\n    @Input() fieldX?: string;\n    @Input() fieldY?: string;\n    @Input() fieldsX?: string[];\n    @Input() fieldsY?: string[];\n\n    // Field used for a cooccurrence heatmap (optionally fieldX and fieldY can be used for filtering based on axes)\n    @Input() fieldCooc?: string; \n    \n    // Graphical settings\n    @Input() height = 600; // Height of the SVG viewbox (will adjust to container while preserving aspect ratio)\n    @Input() width = 600; // Width of the SVG viewbox (will adjust to container while preserving aspect ratio)\n    @Input() allowResizeOption = true; // The resize option allows to adjust the actual width/height in function of the number of items on each axis. If set to false, the tiles are resized so that the heatmap always matches the input width/height.\n    @Input() margin = {top: 100, bottom: 20, left: 100, right: 40};\n    @Input() transition = 1000; // Transition time in ms (0 to avoid transitions)\n    @Input() buckets = 9; // Color buckets\n    @Input() colorScheme = \"schemeBlues\"; // Color scheme from D3\n    @Input() maxX = 20; // Max items on X\n    @Input() maxY = 20; // Max items on Y\n    @Input() theme: \"light\" | \"dark\" = \"light\";\n\n    // Interaction settings\n    @Input() itemsClickable = true;\n    @Input() axisClickable = true;\n    @Input() highlightSelected = true;\n\n    // Data\n    aggregationData?: ListAggregation;\n    data?: HeatmapItem[];\n\n    // Actions\n    selectFieldX: Action;\n    selectFieldY: Action;\n    clearFilters: Action;\n\n    // Settings form\n    form: FormGroup;\n\n    // Selected items\n    readonly selectedItems = new Set<string>();\n\n    // A flag to wait for the parent component to actually display this child, since creating\n    // the heatmap component without displaying causes strange bugs...\n    ready = false;\n\n    constructor(\n        public appService: AppService,\n        public searchService: SearchService,\n        public facetService: FacetService,\n        public selectionService: SelectionService,\n        public formBuilder: FormBuilder,\n        public cdRef: ChangeDetectorRef,\n        public prefs: UserPreferences,\n        @Optional() public cardComponent?: BsFacetCard\n    ){\n        super();\n           \n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                this.searchService.query.removeSelect(this._name);\n                this.searchService.search();\n            }\n        });\n\n        // Listen to selection changes & update the heatmap items accordingly\n        this.selectionService.events.subscribe(() => {\n            if(this.highlightSelected) {\n                // Update the selectedItems set\n                this.updateSelectedItems();\n    \n                // Update the data\n                if(this.data){\n                    this.data.forEach(item => item.selected = this.selectedItems.has(this.fieldCooc ? item.value : item.display));\n                    this.cdRef.markForCheck();\n                }\n            }\n        });\n    }\n\n    // The name of the heatmap is used to identify it in the list of breadcrumbs and the user preferences\n    get _name(): string{\n        return this.name || 'heatmap-'+this.aggregation.toLowerCase();\n    }\n\n    /**\n     * On changes triggers when the results change (following a new query)\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        this.updateActions();\n        // Create the heatmap data\n        if(changes['results'] || changes['aggregation']) {\n            this.updateData();\n        }\n    }\n    \n    ngDoCheck(){\n        // We check that the parent component (if any) as been expanded at least once so that the fusioncharts\n        // gets created when it is visible (otherwise, there can be visual bugs...)\n        this.ready = !this.cardComponent?._collapsed;\n    }\n\n    \n    /**\n     * Update the actions for selecting the X or Y fields\n     */\n    updateActions() {\n        // Create or update the actions to change the X and Y axis\n        if(this.fieldsX){\n            if(!this.selectFieldX){\n                this.selectFieldX = this.selectField('x');\n            }\n            this.selectFieldX.update();\n        }\n        if(this.fieldsY){\n            if(!this.selectFieldY){\n                this.selectFieldY = this.selectField('y');\n            }\n            this.selectFieldY.update();\n        }\n    }\n\n    /**\n     * Updates the heatmap data\n     */\n    updateData() {\n        if(this.results) {\n            this.aggregationData = this.facetService.getAggregation(this.aggregation, this.results);\n            if(!this.aggregationData){\n                this.getHeatmapData();\n            }\n            else {\n                this.data = this.processAggregation();\n            }\n        }\n        else {\n            this.data = undefined;\n        }\n    }\n\n    /**\n     * This method is called by the parent sq-facet-card when the settings\n     * button is clicked. This has the effect of displaying the settingsTpl template\n     * instead of the heatmap.\n     * @param opened if true settings are opened, if false they are closed\n     */\n    onOpenSettings(opened: boolean){\n        if(opened) {\n\n            const maxXControl = new FormControl(this.maxXPref);\n            const maxYControl = new FormControl(this.maxYPref);\n            const rescaleControl = new FormControl(!!this.prefs.get(this._name+'-rescale'));\n            const colorControl = new FormControl(this.colorSchemePref);\n\n            this.form = this.formBuilder.group({\n                maxX: maxXControl,\n                maxY: maxYControl,\n                scaleAxes: rescaleControl,\n                colors: colorControl\n            });\n\n            this.form.valueChanges.subscribe(_ => {\n                this.prefs.set(this._name+'-max-x', maxXControl.value, true);\n                this.prefs.set(this._name+'-max-y', maxYControl.value, true);\n                this.prefs.set(this._name+'-rescale', rescaleControl.value, true);\n                this.prefs.set(this._name+'-color-scheme', colorControl.value, true);\n                this.debounceSync();\n            });\n        }\n        else {\n            this.updateData();\n        }\n    }\n\n    // Debounce syncing to avoid many calls to the user settings web service\n    debounceSync = Utils.debounce(() => {\n        this.prefs.sync();\n    }, 1000);\n\n    /**\n     * This method resets all the user preferences and rebuilds the settings form,\n     * so that the values displayed are up-to-date\n     */\n    setDefaults() {\n        this.prefs.delete(this._name+'-field-x', true);\n        this.prefs.delete(this._name+'-field-y', true);\n        this.prefs.delete(this._name+'-max-x', true);\n        this.prefs.delete(this._name+'-max-y', true);\n        this.prefs.delete(this._name+'-rescale', true);\n        this.prefs.delete(this._name+'-color-scheme', true);\n        this.prefs.sync();\n        this.onOpenSettings(true);\n    }\n\n    /**\n     * Returns the list of actions to display for this facet component\n     */\n    get actions(): Action[] {\n        const actions: Action[] = [];\n        if(this.facetService.hasFiltered(this._name)){\n            actions.push(this.clearFilters);\n        }\n        actions.push(this.selectFieldY, this.selectFieldX);\n        return actions;\n    }\n\n    /**\n     * Queries the server for the heatmap data via the Search Service\n     */\n    getHeatmapData() {\n        if(!this.appService.getCCAggregation(this.aggregation)) {\n            throw new Error(`Aggregation ${this.aggregation} does not exist in the Query web service configuration`);\n        }\n        const query = Utils.copy(this.searchService.query);\n        query.action = \"aggregate\";\n        query.aggregations = [this.aggregation];\n        if(!this.fieldCooc) {\n            query[\"heatmapField1\"] = this.fieldXPref;\n            query[\"heatmapField2\"] = this.fieldYPref;\n        }\n\n        this.searchService.getResults(query).subscribe(\n            results => {\n                this.aggregationData = results.aggregations[0] as ListAggregation;\n                this.data = this.processAggregation();\n            }\n        );\n    }\n\n    /**\n     * Transform an aggregation into a list of HeatmapItem objects\n     */\n    processAggregation(): HeatmapItem[] | undefined {\n        if (!this.aggregationData || !this.aggregationData.items) {\n            return undefined;\n        }\n        if(this.fieldCooc) {\n            return this.aggregationData.items.map(this.parseCooccurrenceItem);\n        }\n        else {\n            return this.aggregationData.items.map(this.parseCrossDistributionItem);\n        }\n    }\n\n    /**\n     * Default parsing method for cross-distribution aggregation data\n     */\n    @Input() parseCrossDistributionItem: (i:AggregationItem) => HeatmapItem \n    = value => {\n        if(!value.display){\n            throw new Error(`Aggregation Item '${value.value}' has no display value`);\n        }\n        const parts = value.display.split(\"/\");\n        if(parts.length < 2){\n            throw new Error(`'${value.display}' does not contain the '/' cross-distribution separator`);\n        }\n        return {\n            x: parts[0],\n            y: parts[1],\n            count: value.count,\n            display: value.display,\n            value: value.value as string,\n            selected: this.selectedItems.has(value.display)\n        };\n    }\n    \n    /**\n     * Default parsing method for cooccurrence aggregation data\n     */\n    @Input() parseCooccurrenceItem: (i:AggregationItem) => HeatmapItem \n    = value => {\n        const val = value.display || value.value.toString();\n        const parts = val.substr(1, val.length-2).split(\")#(\");\n        if(parts.length < 2){\n            throw new Error(`'${val}' is not formatted as a co-occurrence: (value 1)#(value 2)`);\n        }\n        return {\n            x: parts[0],\n            y: parts[1],\n            count: value.count,\n            display: `${parts[0]} - ${parts[1]}`,\n            value: value.value.toString(),\n            selected: this.selectedItems.has(value.value.toString())\n        };\n    }\n\n    /**\n     * Callback when a heatmap time is clicked\n     * @param item \n     */\n    onItemClicked(item: HeatmapItem){\n        if(this.aggregationData){\n            this.facetService.addFilterSearch(this._name, this.aggregationData, item);\n        }\n    }\n\n    /**\n     * Callback when a value of an axis is clicked\n     * @param item \n     */\n    onAxisClicked(item: {value: string, axis: 'x' | 'y'}){\n        this.searchService.addFieldSelect(item.axis === 'x'? this.fieldXPref : this.fieldYPref, item);\n        this.searchService.search();\n    }\n\n    /**\n     * Helper method to build the actions for selecting each dimension\n     * @param axis \n     */\n    selectField(axis: 'x' | 'y'): Action {\n        return new Action({\n            title: \"Select field\",\n            scrollable: true,\n            updater: (action) => {\n                action.name = axis === 'x'? this.fieldXPref : this.fieldYPref;\n                action.text = this.appService.getPluralLabel(axis === 'x'? this.fieldXPref : this.fieldYPref);\n                action.icon = \"sq-icon-\"+(axis === 'x'? this.fieldXPref : this.fieldYPref);\n                action.children = ((axis === 'x'? this.fieldsX : this.fieldsY) || [])\n                    .filter(f => f !== (axis === 'x'? this.fieldXPref : this.fieldYPref))\n                    .map(f => {\n                        return new Action({\n                            name: f,\n                            text: this.appService.getPluralLabel(f),\n                            icon: \"sq-icon-\"+f,\n                            action : () => {\n                                this.prefs.set(this._name+'-field-'+axis, f);\n                                this.updateActions();\n                                this.updateData();\n                            }\n                        });\n                    });\n            }\n        });\n    }\n\n    /**\n     * When the list of selected record changes we need to refresh the\n     * selectedItems Set (which can then be used to set the 'selected'\n     * property of HeatmapItem)\n     */\n    updateSelectedItems() {\n\n        this.selectedItems.clear();\n\n        if(this.results){\n\n            this.results.records\n                .filter(r => r.$selected)\n                .forEach(r => {\n\n                    if(this.fieldCooc) {                \n                        if(r[this.fieldCooc]){\n                            r[this.fieldCooc].forEach(v => this.selectedItems.add(v.value));                                \n                        }\n                    }\n\n                    else {\n                        if(r[this.fieldXPref] && r[this.fieldYPref]){\n                            r[this.fieldXPref].forEach(x => {\n                                r[this.fieldYPref].forEach(y => {\n                                    this.selectedItems.add(x.display+\"/\"+y.display);\n                                });\n                            });\n                        }\n                    }\n            });\n        }\n    }\n\n    // Accessor methods to get the preferred or default values of the heatmap parameters\n\n    get fieldXPref(): string {\n        return this.prefs.get(this._name+'-field-x') || this.fieldX;\n    }\n    \n    get fieldYPref(): string {\n        return this.prefs.get(this._name+'-field-y') || this.fieldY;\n    }\n\n    get maxXPref(): number {\n        return this.prefs.get(this._name+'-max-x') || this.maxX;\n    }\n    \n    get maxYPref(): number {\n        return this.prefs.get(this._name+'-max-y') || this.maxY;\n    }\n\n    get colorSchemePref(): string {\n        return this.prefs.get(this._name+'-color-scheme') || this.colorScheme;\n    }\n    \n    get widthPref(): number {\n        if(this.prefs.get(this._name+'-rescale')){\n            return ((this.width - this.margin.left - this.margin.right) * this.maxXPref / this.maxX) + this.margin.left + this.margin.right\n        }\n        return this.width;\n    }\n    \n    get heightPref(): number {\n        if(this.prefs.get(this._name+'-rescale')){\n            return ((this.height - this.margin.top - this.margin.bottom) * this.maxYPref / this.maxY) + this.margin.top + this.margin.bottom\n        }\n        return this.height;\n    }\n}","<sq-heatmap *ngIf=\"data && ready\"\n    [data]=\"data\"\n    [height]=\"heightPref\"\n    [width]=\"widthPref\"\n    [margin]=\"margin\"\n    [transition]=\"transition\"\n    [itemsClickable]=\"itemsClickable\"\n    [axisClickable]=\"axisClickable\"\n    [buckets]=\"buckets\"\n    [colorScheme]=\"colorSchemePref\"\n    [maxX]=\"maxXPref\"\n    [maxY]=\"maxYPref\"\n    [theme]=\"theme\"\n\n    (itemClicked)=\"onItemClicked($event)\"\n    (axisClicked)=\"onAxisClicked($event)\"\n>\n</sq-heatmap>\n\n<div class=\"text-center py-5 px-3\" *ngIf=\"!data\">\n    <i>{{'msg#heatmap.nodata' | sqMessage}}</i>\n</div>\n\n<ng-template #settingsTpl>\n    <div class=\"card-body\">\n        <form [formGroup]=\"form\">\n            <div class=\"form-group\">\n                <label for=\"maxX\">{{'msg#heatmap.maxX' | sqMessage}} ({{maxXPref}})</label>\n                <input type=\"range\" class=\"form-control-range\" id=\"maxX\" min=\"10\" max=\"40\" formControlName=\"maxX\">\n\n                <label for=\"maxY\">{{'msg#heatmap.maxY' | sqMessage}} ({{maxYPref}})</label>\n                <input type=\"range\" class=\"form-control-range\" id=\"maxY\" min=\"10\" max=\"100\" formControlName=\"maxY\">\n                \n                <div class=\"custom-control custom-checkbox my-1\" *ngIf=\"allowResizeOption\">\n                    <input class=\"custom-control-input\" type=\"checkbox\" id=\"scaleAxes\" formControlName=\"scaleAxes\">\n                    <label class=\"custom-control-label\" for=\"scaleAxes\">{{'msg#heatmap.rescale' | sqMessage}}</label>\n                </div>\n\n                <hr>\n\n                <label for=\"colors\">{{'msg#heatmap.colors' | sqMessage}}</label>\n                <select id=\"colors\" class=\"form-control\" formControlName=\"colors\">\n                    <option [ngValue]=\"'schemeBlues'\">{{'msg#heatmap.blue' | sqMessage}}</option>\n                    <option [ngValue]=\"'schemeReds'\">{{'msg#heatmap.red' | sqMessage}}</option>\n                    <option [ngValue]=\"'schemeGreens'\">{{'msg#heatmap.green' | sqMessage}}</option>\n                    <option [ngValue]=\"'schemeRdBu'\">{{'msg#heatmap.diverging' | sqMessage}}</option>\n                    <option [ngValue]=\"'schemeSpectral'\">{{'msg#heatmap.diverging' | sqMessage}}</option>\n                    <option [ngValue]=\"'schemeYlGnBu'\">{{'msg#heatmap.cool' | sqMessage}}</option>\n                </select>\n\n                <hr>\n\n                <button class=\"btn btn-light\" (click)=\"setDefaults()\">{{'msg#heatmap.defaults' | sqMessage}}</button>\n            </div>\n        </form>\n    </div>\n</ng-template>","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enSelection, frSelection, deSelection} from \"@sinequa/components/selection\";\n\nimport _enResultsView from \"./en\";\nimport _frResultsView from \"./fr\";\nimport _deResultsView from \"./de\";\n\nconst enResultsView = Utils.merge({}, _enResultsView, enSearch, enSelection);\nconst frResultsView = Utils.merge({}, _frResultsView, frSearch, frSelection);\nconst deResultsView = Utils.merge({}, _deResultsView, deSearch, deSelection);\n\nexport { enResultsView, frResultsView, deResultsView };\n","const VALIDATION_MODULE_PROVIDERS = [];\n\nexport {VALIDATION_MODULE_PROVIDERS};\n","import {Component, Input, OnInit, ElementRef, HostBinding, ChangeDetectionStrategy} from \"@angular/core\";\nimport {Action} from \"../../action\";\n\nexport interface DropdownMenuOptions {\n    item: Action;\n    rightAligned?: boolean;\n    showMenuClass: string;\n    header?: string;\n}\n\n@Component({\n    selector: \"[sq-dropdown-menu]\",\n    host: {\n        \"class\": \"dropdown-menu\",\n        \"role\": \"menu\"\n    },\n    templateUrl: \"./dropdown-menu.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsDropdownMenu implements OnInit {\n    children: Action[];\n    \n    private _options: DropdownMenuOptions;\n    \n    @Input(\"sq-dropdown-menu\")\n    set options(opts: DropdownMenuOptions) {\n        this._options = {...opts};\n        this.children = opts.item.children?.filter(child => !child.hidden) || [];\n    }\n    get options(): DropdownMenuOptions {\n        return this._options;\n    }\n    \n    @HostBinding(\"class.dropdown-menu-right\") rightAligned;\n\n    constructor(\n        private elementRef: ElementRef) {\n    }\n\n    ngOnInit() {\n        const element: HTMLElement = this.elementRef.nativeElement;\n        if (this.options.item.scrollable) {\n            element.classList.add(\"sq-scrollable-menu\");\n        }\n        else if (this.options.item.scrollGroup) {\n            element.classList.add(\"sq-scroll-menu\");\n        }\n        this.rightAligned = this.options.rightAligned;\n    }\n\n    private getLi(element: HTMLElement): HTMLElement | null {\n        let element1: HTMLElement | null = element;\n        while (element1 && element1.nodeName !== \"LI\") {\n            element1 = element1.parentElement;\n        }\n        return element1;\n    }\n\n    click(item: Action, event: UIEvent) {\n        if (!this.options.item.disabled) {\n            // Handle sub-menu opening\n            let isOpen = false;\n            const li = this.getLi(<HTMLElement>event.target);\n            if (!!li && li.classList.contains(\"dropdown-submenu\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                isOpen = li.classList.contains(this.options.showMenuClass);\n                const ul = li.parentElement;\n                if (ul) {\n                    for (let i = 0, ic = ul.children.length; i < ic; i++) {\n                        const _li = ul.children[i];\n                        _li.classList.remove(this.options.showMenuClass);\n                    }\n                }\n                // NB toggle's second param does not work on IE\n                // li.classList.toggle(this.options.showMenuClass, !isOpen);\n                if (!isOpen) {\n                    li.classList.add(this.options.showMenuClass);\n                }\n            }\n            if (item.action) {\n                item.action(item, event);\n            }\n            if (item.toggle) {\n                item.toggle(item, !isOpen);\n            }\n        }\n    }\n}","<h6 *ngIf=\"options.item.title && options.item.headerGroup\" class=\"dropdown-header\">{{ options.item.title | sqMessage:options.item.messageParams }}</h6>\n<ng-container *ngFor=\"let child of options.item.children\">\n    <li *ngIf=\"!child.hidden\" class=\"{{child.separator ? 'dropdown-divider' : child.scrollGroup ? 'sq-scroll-menu-item open' : child.hasChildren ? 'dropdown-submenu' : ''}}\" title=\"{{child.title | sqMessage:child.messageParams}}\" [attr.aria-label]=\"child.title | sqMessage:child.messageParams\">\n        <ng-container *ngIf=\"!child.separator\">\n            <a *ngIf=\"!child.scrollGroup && child.href\" class=\"dropdown-item {{child.disabled ? 'disabled' : ''}}\" tabindex=\"-1\" href=\"{{child.href}}\">\n                <sq-action-item-content [item]=\"child\" [text]=\"child.text\" [in-dropdown-menu]=\"true\"></sq-action-item-content>\n            </a>\n            <a *ngIf=\"!child.scrollGroup && !child.href && !child.component\" href=\"javascript:void(0)\" class=\"dropdown-item {{child.hasChildren ? 'dropdown-toggle': ''}} {{child.disabled ? 'disabled' : ''}}\" [attr.data-toggle]=\"child.hasChildren ? 'dropdown' : ''\" tabindex=\"-1\" (click)=\"click(child, $event)\">\n                <sq-action-item-content [item]=\"child\" [text]=\"child.text\" [in-dropdown-menu]=\"true\"></sq-action-item-content>\n            </a>\n            <sq-action-item-content *ngIf=\"child.component\" [item]=\"child\" [text]=\"child.text\" [in-dropdown-menu]=\"true\"></sq-action-item-content>\n            <ul *ngIf=\"child.hasChildren\" [sq-dropdown-menu]=\"{item: child, showMenuClass: options.showMenuClass}\"></ul>\n        </ng-container>\n    </li>\n</ng-container>","export * from \"./result-extracts/result-extracts\";\nexport * from \"./result-icon/result-icon\";\nexport * from \"./result-missing-terms/result-missing-terms\";\nexport * from \"./result-module\";\nexport * from \"./result-source/result-source\";\nexport * from \"./result-thumbnail/result-thumbnail\";\nexport * from \"./result-title/result-title\";\nexport * from \"./results-counter/results-counter\";\nexport * from \"./sponsored-results/sponsored-results\";\nexport * from \"./user-rating/user-rating\";\nexport * from \"./messages/index\";","export default {\n    \"heatmap\": {\n        \"name\": \"Heatmap-Diagramm\",\n        \"nodata\": \"Keine Daten zum Anzeigen\",\n        \"maxX\": \"Maximale Anzahl von Elementen auf der X-Achse\",\n        \"maxY\": \"Maximale Anzahl von Elementen auf der Y-Achse\",\n        \"rescale\": \"Achsen neu skalieren\",\n        \"colors\": \"Farbschema\",\n        \"blue\": \"Blau\",\n        \"red\": \"Rot\",\n        \"green\": \"Grün\",\n        \"diverging\": \"Abweichend\",\n        \"spectral\": \"Spektral\",\n        \"cool\": \"Kalt\",\n        \"defaults\": \"Standard\",\n        \"showing\": \"Zeige {shown, number} von {total, number} Elementen\",\n        \"tooltip\": \"{count, plural, one {# Element} other {# Elemente}}\"\n    }\n};\n","import {Component, OnInit, OnDestroy, Inject} from \"@angular/core\";\nimport {FormBuilder, FormGroup, FormControl, Validators} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SavedQuery} from \"../../saved-queries.service\";\n\n@Component({\n    selector: \"sq-edit-saved-query\",\n    templateUrl: \"./edit-saved-query.html\"\n})\nexport class BsEditSavedQuery implements OnInit, OnDestroy {\n    nameControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n    buttons: ModalButton[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: SavedQuery,\n        private formBuilder: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.nameControl = new FormControl(this.model.name, Validators.required);\n        this.form = this.formBuilder.group({\n            savedQueryName: this.nameControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.model.name = this.nameControl.value;\n            }\n        );\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.form\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n}\n","<form name=\"editSavedQuery\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#editSavedQuery.title'\" [buttons]=\"buttons\">\n        <div class=\"form-group sq-form-group\">\n            <label for=\"savedQueryName\">{{'msg#editSavedQuery.name' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"savedQueryName\" formControlName=\"savedQueryName\" spellcheck=\"off\" sqAutofocus>\n        </div>\n    </sq-modal>\n</form>","import { Component, Input, OnChanges } from \"@angular/core\";\nimport { FormGroup } from \"@angular/forms\";\nimport { AppService } from '@sinequa/core/app-utils';\n\n@Component({\n    selector: \"sq-advanced-form-checkbox\",\n    templateUrl: \"./advanced-form-checkbox.html\",\n})\nexport class BsAdvancedFormCheckbox implements OnChanges {\n    @Input() form: FormGroup;\n    @Input() field: string;\n    @Input() label: string;\n\n    constructor(public appService: AppService) {}\n\n    ngOnChanges() {\n        if(this.label === undefined) {\n            this.label = this.appService.getLabel(this.field);\n        }\n    }\n}\n","<div class=\"form-group\" [formGroup]=\"form\">\n    <div class=\"form-check\">\n        <label class=\"custom-control custom-checkbox\">\n            <input\n                class=\"custom-control-input\"\n                type=\"checkbox\"\n                sqAdvancedFormValidation\n                [field]=\"field\"\n                [validationForm]=\"form\"\n                [formControlName]=\"field\">\n            <span class=\"custom-control-label\">{{label | sqMessage}}</span>\n        </label>\n    </div>\n</div>\n","export default {\n    \"system\": {\n        \"date\": \"{time, selectordinal, =0 {{date, date}} other {{date, date} à {date, time, medium}}}\",\n        \"number\": \"{value, number}\",\n        \"boolean\": \"{value, select, true {vrai} other {faux}}\",\n        \"percent\": \"{value, number, percent}\",\n        \"fieldSeparator\": \" : \",\n        \"memorySize\": {\n            \"bytes\": \"{value, number, sqZeroDecimalPlaces} o\",\n            \"kb\": \"{value, number, sqZeroDecimalPlaces} Ko\",\n            \"mb\": \"{value, number, sqOneDecimalPlace} Mo\",\n            \"gb\": \"{value, number, sqTwoDecimalPlaces} Go\",\n            \"tb\": \"{value, number, sqThreeDecimalPlaces} To\",\n            \"pb\": \"{value, number, sqFourDecimalPlaces} Po\"\n        }\n    },\n\n    \"error\": {\n        \"serverError\": \"Erreur de serveur\",\n        \"loginCancelled\": \"Connexion annulée\",\n        \"processedCredentialsError\": \"Impossible d'obtenir les informations d'identification\",\n        \"autoLoginError\": \"Echec de la connexion\",\n        \"principalSwitched\": \"L'utilisateur connecté a été modifié\",\n        \"userOverrideFailure\": \"Echec de surchargement de l'utilisateur\",\n        \"responseLoadFailure\": \"Echec de chargement de la réponse\",\n        \"unknownError\": \"Erreur inconnue\"\n    },\n\n    \"language\": {\n        \"ar\": \"Arabe\",\n        \"da\": \"Danois\",\n        \"de\": \"Allemand\",\n        \"el\": \"Grec\",\n        \"en\": \"Anglais\",\n        \"es\": \"Espagnol\",\n        \"fi\": \"Finlandais\",\n        \"fr\": \"Français\",\n        \"it\": \"Italien\",\n        \"ja\": \"Japonais\",\n        \"ko\": \"Coréen\",\n        \"nl\": \"Néerlandais\",\n        \"no\": \"Norvégien\",\n        \"pl\": \"Polonais\",\n        \"pt\": \"Portugais\",\n        \"ro\": \"Roumain\",\n        \"ru\": \"Russe\",\n        \"sv\": \"Suédois\",\n        \"th\": \"Thaïlandais\",\n        \"zh\": \"Chinois traditionnel\",\n        \"zs\": \"Chinois simplifié\",\n        \"zz\": \"Inconnu\"\n    },\n};\n","import {Component, OnInit, OnDestroy, Inject} from \"@angular/core\";\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {debounceTime} from \"rxjs/operators\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {UserOverride} from \"@sinequa/core/login\";\n\n@Component({\n    selector: \"sq-override-user\",\n    templateUrl: \"./override-user.html\"\n})\nexport class BsOverrideUser implements OnInit, OnDestroy {\n    form: FormGroup;\n    formChanges: Subscription;\n    buttons: ModalButton[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: UserOverride,\n        private formBuilder: FormBuilder) {\n    }\n\n    ngOnInit() {\n        this.form = this.formBuilder.group({\n            \"userName\": [this.model.userName, Validators.required],\n            \"domain\": [this.model.domain, Validators.required]\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges.pipe(debounceTime(100)),\n            (value) => {\n                Utils.merge(this.model, value);\n                //this.model.userName = this.form.get(\"userName\").value;\n                //this.model.domain = this.form.get(\"domain\").value;\n            });\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: <any>this.form\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n}","<form name=\"overrideUser\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#overrideUser.title'\" [buttons]=\"buttons\">\n        <div class=\"form-group sq-form-group\">\n            <label for=\"userName\">{{'msg#overrideUser.userName' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"userName\" formControlName=\"userName\" spellcheck=\"off\" sqAutofocus>\n        </div>\n        <div class=\"form-group sq-form-group\">\n            <label for=\"domain\">{{'msg#overrideUser.domain' | sqMessage}}</label>\n            <input [sqValidation]=\"form\" type=\"text\" class=\"form-control\" id=\"domain\" formControlName=\"domain\" spellcheck=\"off\">\n        </div>\n    </sq-modal>\n</form>","export * from \"./public-api\";","import enCollapse from \"./en\";\nimport frCollapse from \"./fr\";\nimport deCollapse from \"./de\";\n\nexport { enCollapse, frCollapse, deCollapse };\n","import { Query } from '@sinequa/core/app-utils';\nimport { Record } from '@sinequa/core/web-services';\nimport { NodeType, Node, NetworkProvider, NetworkDataset } from '../network-models';\nimport { RecordsProvider, StructuralEdgeType, RecordNode } from './records-provider';\nimport { Utils } from '@sinequa/core/base';\nimport { combineLatest } from 'rxjs';\nimport { Action } from '@sinequa/components/action';\n\n/**\n * Extension of the NodeType interface with additional properties specific\n * to dynamic nodes, in particular the getQuery() function that returns a\n * query given a node\n */\nexport interface DynamicNodeType extends NodeType {\n    /** Returns a query object to execute to obtain a record for this node */\n    getQuery: (node: Node) => Query|undefined;\n    /** Defines when the query should be executed. Warning: oninsert may generate multiple simultaneous queries */\n    trigger: \"oninsert\" | \"onclick\" | \"manual\";\n}\n\n/**\n * An extension of the RecordsProvider which manages dynamic node types.\n * Dynamic nodes are nodes that are transformed into record nodes via a\n * query. The records are fetched from the server dynamic to enrich the\n * original node.\n * For example, a simple metadata node with the value \"Bill Gates\" can be\n * enriched with the wikipedia page of Bill Gate, which can provide a lot\n * of structured information about Bill Gates (which can be used, for\n * example, to attach structural edges to the original Bill Gates node).\n * Note that the \"source node\" have to come from different providers, so it is\n * necessary to listen to these providers and update the data generated by this\n * provider accordingly.\n */\nexport class DynamicNodeProvider extends RecordsProvider {\n\n    /** List of the source nodes that have been already processed via clicks or actions */\n    protected processedNodes: string[] = [];\n    /** to avoid fetching the same data multiple times, we store the record objects fetched from the server in this cache */\n    protected nodeCache = new Map<string, Record>();\n\n    constructor(\n        public name: string,\n        protected nodeType: DynamicNodeType,\n        protected edgeTypes: StructuralEdgeType[],\n        protected permanent: boolean,\n        protected sourceProviders: NetworkProvider[]\n    ){\n        super(name, nodeType, edgeTypes, [], false);\n        \n        combineLatest(sourceProviders.map(p => p.getProvider())).subscribe(dataset => {\n            if(this.active){\n                // \"Merge\" the nodes from all datasets into a map\n                const map = new Map<string, Node>();\n                dataset.forEach(dataset => {\n                    dataset.getNodes().forEach(node => {\n                        if(node.visible && node.type === this.nodeType) {\n                            map.set(node.id, node);\n                        }\n                    });\n                });\n                // Update the dataset of dynamic edges\n                this.updateDynamicDataset(Array.from(map.values()));\n            }\n        });\n    }\n\n    /**\n     * Rebuild the dataset of this provider given a list of source nodes to process\n     * @param sourceNodes A list of source nodes to process\n     */\n    protected updateDynamicDataset(sourceNodes: Node[]) {\n        \n        // We rebuild the dataset from scratch, in case some source nodes were removed\n        this.dataset = new NetworkDataset();\n\n        // If oninsert, we want to process all the source nodes. If not, we want to process the nodes in the processedNodes list\n        if(this.nodeType.trigger !== \"oninsert\") {\n            this.processedNodes = this.processedNodes.filter(id => !!sourceNodes.find(node => node.id === id)); // We want to \"forget\" the nodes that are not in the source anymore\n            sourceNodes = sourceNodes.filter(node => this.processedNodes.indexOf(node.id) !== -1); // We want to process only the nodes currently in the processed list\n        }\n        \n        // For each source, we get its query\n        const queries = sourceNodes.map(node => (this.nodeCache.has(node.id) || (node as RecordNode).record)? undefined : this.nodeType.getQuery(node));\n        const _queries = queries.filter(q => !!q) as Query[];\n        // If there are queries, we process them asynchronously\n        if(_queries.length > 0) {\n            this.context.searchService.getMultipleResults(_queries, undefined).subscribe(res => {\n                this.mutateNodes(sourceNodes as RecordNode[], res.results.map(r => r.records.length > 0? r.records[0] : undefined), queries);\n            });\n        }\n        else {\n            this.mutateNodes(sourceNodes as RecordNode[], [], queries);\n        }\n    }\n\n    /**\n     * Processes a given node: If the record for this node is available\n     * in the node cache, we take this record and mutate the node. If not,\n     * we get the query via the dynamic node type's getQuery() function,\n     * and mutate the node upon results.\n     * @param node A source node to process\n     */\n    protected processNode(node: RecordNode) {\n        if(!this.permanent) {\n            this.dataset.clear(); // Remove data from previously clicked node\n            this.processedNodes.splice(0); // Remove the processed nodes\n        }\n\n        this.processedNodes.push(node.id);\n        if(this.nodeCache.has(node.id)) {\n            this.mutateNode(node, this.nodeCache[node.id]);\n            this.provider.next(this.dataset);\n        }\n        else {\n            const query = this.nodeType.getQuery(node);\n            if(query) {\n                this.context.searchService.getResults(query, undefined, {searchInactive: true}).subscribe(results => {\n                    if(results.records.length > 0) {\n                        this.mutateNode(node, results.records[0]);\n                    }\n                    this.provider.next(this.dataset);\n                });\n            }\n        }       \n    }\n\n    /**\n     * Mutates a list of nodes, given a corresponding list of records\n     * and of queries. Manages to get the record objects either from\n     * these inputs or from the cache.\n     * @param nodes The list of node to mutate\n     * @param records The list of records for each node\n     * @param queries The list of queries for each node\n     */\n    protected mutateNodes(nodes: RecordNode[], records: (Record|undefined)[], queries: (Query|undefined)[]) {\n        let j = 0;\n        for(let i = 0; i<nodes.length; i++){\n            const node = nodes[i];\n            const query = queries[i];\n            let record: Record|undefined;\n            if(query){\n                record = records[j++];\n            }\n            else if(node.record) {\n                record = node.record;\n            }\n            else if(this.nodeCache.has(node.id)){\n                record = this.nodeCache[node.id];\n            }\n\n            if(record) {\n                this.mutateNode(node, record);\n            }\n        }\n        this.provider.next(this.dataset);\n    }\n\n    /**\n     * Mutate a given node with the given record:\n     * - Attaches the record property\n     * - Increases the node precedence\n     * - Updates the node cache\n     * - Refresh the node's appearance (node options)\n     * - Attaches the structural edges to this node\n     * @param node The node to mutate\n     * @param record The record used for mutation\n     */\n    protected mutateNode(node: RecordNode, record: Record) {\n        node.record = record;\n        node.precedence = 1; // Give more precedence to the new node (so it will prevail when merged with another node)\n        this.nodeCache[node.id] = record;\n        this.refreshNodeOptions(node); // The node might change appearance, since it has mutated into a record node\n        this.edgeTypes.forEach(type => {\n            this.addStructuralEdges(node, type);\n        });\n    }\n\n    /**\n     * (Re-)computes the node options of a node (after mutation)\n     * @param node a node\n     */\n    protected refreshNodeOptions(node: Node) {\n        let options;\n        if(typeof this.nodeType.nodeOptions === \"function\") {\n            options = this.nodeType.nodeOptions(node, this.nodeType);\n        }\n        else {\n            options = this.nodeType.nodeOptions;\n        }\n        return Utils.extend(node, options);\n    }\n    \n    // Network provider interface\n\n    /**\n     * Process a clicked node, for dynamic node types with an \"onclick\" trigger\n     * @param node The clicked node\n     */\n    onNodeClicked(node?: RecordNode) {\n        super.onNodeClicked(node);\n        if(this.active && this.nodeType.trigger === \"onclick\" && node && node.type === this.nodeType && this.processedNodes.indexOf(node.id) === -1) {\n            this.processNode(node);\n        }\n    }\n\n    /**\n     * Creates an action to process a clicked node, for dynamic node types\n     * with a \"manual\" trigger.\n     * @param node The clicked node\n     */\n    getNodeActions(node: RecordNode): Action[] {\n        const actions = super.getNodeActions(node);\n        if(this.active && this.nodeType.trigger === \"manual\" && node && node.type === this.nodeType && this.processedNodes.indexOf(node.id) === -1) {\n            actions.unshift(new Action({\n                icon: \"fas fa-star-of-life\",\n                title: this.context.intlService.formatMessage(\"msg#network.actions.expandNode\", {label: node.label}),\n                action: () => {\n                    this.processNode(node);\n                }\n            }));\n        }\n        return actions;\n    }\n}\n","import {Injectable, InjectionToken, Inject, Type, OnDestroy} from \"@angular/core\";\nimport {Subject} from \"rxjs\";\nimport {UserSettingsWebService, AuditEvents, AuditEvent} from \"@sinequa/core/web-services\";\nimport {ModalService, ModalResult} from \"@sinequa/core/modal\";\nimport {Query} from \"@sinequa/core/app-utils\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SearchService} from \"@sinequa/components/search\";\n\n// From core/models/usersettings\nexport namespace Alert {\n    export enum Frequency {\n        Daily,\n        Hourly,\n        Immediate,\n        Weekly,\n        Monthly\n    }\n\n    export enum Days {\n        None = 0x00,\n        Monday = 0x01,\n        Tuesday = 0x02,\n        Wednesday = 0x04,\n        Thursday = 0x08,\n        Friday = 0x10,\n        Saturday = 0x20,\n        Sunday = 0x40,\n        AllDays = (Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday),\n        WeekDays = (Monday | Tuesday | Wednesday | Thursday | Friday)\n    }\n}\n\nexport interface Alert {\n    name: string;\n    description?: string;\n    query: Query;\n    timezone: string;\n    timezoneOffset?: string;\n    frequency: Alert.Frequency;\n    days: Alert.Days;\n    interval: number; // every \"n\"...\n    index: number; // day of month\n    times: string; //times: number[]; // offsets from 00:00 in milliseconds\n    active: boolean;\n    combine: boolean;\n    respectTabSelection: boolean;\n    appQueryUrl?: string; // the URL reference the query of the Alert in the SBA.\n}\n\n// from core/models/audit\nexport const enum AlertEventType {\n    Loaded = \"Alert_Loaded\",\n    Patched = \"Alert_Patched\",\n\n    Add = \"Alert_Add\",\n    Delete = \"Alert_Delete\",\n    DeleteAll = \"Alert_DeleteAll\",\n    Update = \"Alert_Update\",\n\n    Search_AlertQuery = \"Search_AlertQuery\",\n}\n\n// Types of events triggering a change event\nexport const ALERT_CHANGE_EVENTS = [\n    AlertEventType.Loaded,\n    AlertEventType.Add,\n    AlertEventType.Delete,\n    AlertEventType.Update\n];\n\n\n// CRUD Events\nexport interface AlertChangeEvent {\n    type: AlertEventType;\n    alert?: Alert;\n}\n\n\n// Model expected by the ManageAlerts Modal.\nexport interface ManageAlertsModel {\n    alerts: Alert[];\n    auditEvents?: AuditEvent[];\n    searchRoute?: string;\n}\n\n/**\n * The modal types are unknown to this service.\n * The module using this service must provide these components\n * in their forRoot() method\n *\n * Example below:\n *\n *  public static forRoot(): ModuleWithProviders<AlertsModule> {\n        return {\n            ngModule: AlertsModule,\n            providers: [\n                {\n                    provide: ALERT_COMPONENTS,\n                    useValue: {\n                        editAlertModal: EditAlert,\n                        manageAlertsModal: ManageAlerts\n                    }\n                },\n                AlertsService\n            ]\n        };\n    }\n *\n */\nexport interface AlertComponents {\n    editAlertModal: Type<any>;\n    manageAlertsModal: Type<any>;\n}\nexport const ALERT_COMPONENTS = new InjectionToken<AlertComponents>('ALERT_COMPONENTS');\nexport const WINDOW = new InjectionToken('WindowToken');\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class AlertsService implements OnDestroy {\n\n    private readonly _events = new Subject<AlertChangeEvent>();\n    private readonly _changes = new Subject<AlertChangeEvent>();\n\n    constructor(\n        public userSettingsService: UserSettingsWebService,\n        public searchService: SearchService,\n        public modalService: ModalService,\n        @Inject(ALERT_COMPONENTS) public alertComponents: AlertComponents,\n        @Inject(WINDOW) private window : Window\n    ){\n        // Listen to the user settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Menus need to be rebuilt\n            this.events.next({type: AlertEventType.Loaded});\n        });\n        // Listen to own events, to trigger change events\n        this._events.subscribe(event => {\n            if(ALERT_CHANGE_EVENTS.indexOf(event.type) !== -1){\n                this.changes.next(event);\n            }\n        });\n    }\n\n    // GETTERS\n\n    /**\n     * Returns the list of this user's alerts.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of alerts if it does not already exist.\n     */\n    public get alerts() : Alert[]{\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"alerts\"])\n            this.userSettingsService.userSettings[\"alerts\"] = [];\n        return <Alert[]> (<unknown>this.userSettingsService.userSettings[\"alerts\"]);\n    } // TODO: remove cast when UserSettings is updated\n\n    /**\n     * Triggers any event among AlertChangeEvent\n     * (use for fine-grained control of alerts workflow)\n     */\n    public get events() : Subject<AlertChangeEvent> {\n        return this._events;\n    }\n\n    /**\n     * Triggers when events affect the list of alerts\n     * (use to refresh alert menus)\n     * Cf. CHANGE_EVENTS list\n     */\n    public get changes() : Subject<AlertChangeEvent> {\n        return this._changes;\n    }\n\n    /**\n     * @returns true if there is at least one alert\n     */\n    public get hasAlert(): boolean {\n        return this.alerts.length > 0;\n    }\n\n    /**\n     * @returns an alert with the given name or undefined if it does not exist\n     * @param name\n     */\n    public alert(name: string): Alert | undefined {\n        const i = this.alertIndex(name);\n        return i>= 0? this.alerts[i] : undefined;\n    }\n\n    private alertIndex(name: string): number {\n        for (let i = 0, ic = this.alerts.length; i < ic; i++) {\n            const alert = this.alerts[i];\n            if (alert && alert.name === name) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n\n    // CRUD\n\n    /**\n     * Creates a new alert unless it already exists.\n     * Emits an Alert event.\n     * Update the data on the server.\n     * @param alert the alert to create\n     * @returns true if alert was created\n     */\n    public createAlert(alert: Alert) : boolean {\n\n        if(this.alertIndex(alert.name) >= 0)\n            return false; // This alert already exists\n\n        this.alerts.unshift(alert);\n        this.events.next({type : AlertEventType.Add, alert: alert});\n        this.patchAlerts([{\n            type: AlertEventType.Add,\n            detail: {\n                alert: alert.name\n            }\n        }]);\n        return true;\n    }\n\n    /**\n     * Update the alert at the given index, unless an alert with the same name\n     * already exists in the list of alerts.\n     * Emits an Alert event.\n     * Update the data on the server.\n     * @param alert the alert to update\n     * @param index the index at which to update the alert\n     * @returns true if alert was updated\n     */\n    public updateAlert(alert: Alert, index : number) : boolean {\n\n        const prevIndex = this.alertIndex(alert.name);\n        if(prevIndex !== -1 && index !== prevIndex)\n            return false; // An alert with the same name exists at a different index\n\n        if(index >= 0 && index < this.alerts.length){\n\n            this.alerts.splice(index, 1, alert);\n            this.events.next({type : AlertEventType.Update, alert: alert});\n            this.patchAlerts([\n                {\n                    type: AlertEventType.Update,\n                    detail: {\n                        alert: alert.name\n                    }\n                }\n            ]);\n            return true;\n\n        }\n        return false;   // This alert does not exist\n    }\n\n    /**\n     * Updates the full list of alerts.\n     * Emits an Alert event.\n     * Update the data on the server.\n     * @param alerts the new list of alerts\n     * @param auditEvents the list of audit events to log\n     */\n    public updateAlerts(alerts : Alert[], auditEvents?: AuditEvents) : boolean {\n        Utils.arraySet(this.alerts, alerts);\n        this.events.next({type : AlertEventType.Update});\n        this.patchAlerts(auditEvents);\n        return true;\n    }\n\n    /**\n     * Deletes the given alert (based on its name)\n     * Emits an Alert event.\n     * Update the data on the server.\n     * @param alert\n     * @returns true if alert was deleted\n     */\n    public deleteAlert(alert: Alert) : boolean {\n\n        const index = this.alertIndex(alert.name);\n\n        if(index === -1)\n            return false; // Nothing to delete\n\n        this.alerts.splice(index, 1);\n        this.events.next({type : AlertEventType.Delete, alert: alert});\n        this.patchAlerts([\n            {\n                type: AlertEventType.Delete,\n                detail: {\n                    alert: alert.name\n                }\n            }\n        ]);\n        return true;\n    }\n\n    /**\n     * Sets this alert to the current search context, using the search service\n     */\n    public setAlertToCurrentQuery(alert: Alert){\n        alert.query = Query.copy(this.searchService.query);\n    }\n\n    /**\n     * Updates Alerts in User settings.\n     * @param auditEvents : Audit Events to be triggered\n     * @returns an Observable which can be used to trigger further events\n     */\n    private patchAlerts(auditEvents?: AuditEvents) {\n        return this.userSettingsService.patch({alerts: this.alerts}, auditEvents)\n            .subscribe(\n                next => {\n                    this.events.next({type: AlertEventType.Patched});\n                },\n                error => {\n                    console.error(\"Could not patch Alerts!\", error);\n                }\n            );\n    }\n\n\n\n\n    // EVENT HANDLERS (Menus)\n\n    /**\n     * Uses the SearchService to perform a search returning all\n     * the documents matching this alert.\n     * @param alert\n     * @returns the search service promise\n     */\n    public searchAlert(alert: Alert, path?: string) : Promise<boolean> {\n        this.searchService.setQuery(Utils.extend(this.searchService.makeQuery(), Utils.copy(alert.query)));\n        this.events.next({type: AlertEventType.Search_AlertQuery, alert: alert});\n        return this.searchService.search( {path: path}, {\n            type: AlertEventType.Search_AlertQuery,\n            detail: {\n                alert: alert.name\n            }\n        });\n    }\n\n    /**\n     * Opens a dialog allowing a user to create a new alert.\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the alert was created.\n     */\n    public createAlertModal() : Promise<boolean> {\n        const alert: Alert = {\n            name: \"\",\n            description: \"\",\n            timezone: this.userSettingsService.timezone,\n            query: Query.copy(this.searchService.query),\n            frequency: Alert.Frequency.Daily,\n            days: Alert.Days.WeekDays,\n            interval: 1,\n            index: 1,\n            times: \"9:00\",\n            active: true,\n            combine: true,\n            respectTabSelection: false\n        };\n        const queryUrl = this.window.location.href;\n        return this.modalService.open(this.alertComponents.editAlertModal, {model: { alert: alert }})\n            .then((result) => {\n                if (result === ModalResult.OK) {\n\n                    const index = this.alertIndex(alert.name);\n                    if (index !== -1) {\n\n                        return this.modalService.yesNo(\"msg#alerts.alertAlreadyExists\")\n                            .then((result) => {\n                                if (result === ModalResult.Yes) {\n                                    alert.appQueryUrl = queryUrl;\n                                    return this.updateAlert(alert, index);\n                                }\n                                return false;\n                            });\n\n                    } else {\n                        alert.appQueryUrl = queryUrl;\n                        return this.createAlert(alert);\n                    }\n                }\n                return false;\n            });\n    }\n\n    /**\n     * Opens a dialog allowing a user to edit an existing alert.\n     * @param alert: The alert to edit\n     * @param noUpdate: if true, will not update the server after the edit\n     * @param searchRoute: the route to use when replaying the alert's query\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true if the alert was updated.\n     */\n    public editAlertModal(alert: Alert, noUpdate?: boolean, searchRoute?: string) : Promise<boolean> {\n\n        const prevName = alert.name;\n\n        const queryUrl = this.window.location.href;\n        return this.modalService.open(this.alertComponents.editAlertModal,  {model: { alert: alert, searchRoute: searchRoute }})\n            .then((result) => {\n\n                if (result === ModalResult.OK) {\n\n                    if(noUpdate) return true;\n\n                    const prevIndex = this.alertIndex(prevName);\n                    if(prevIndex === -1) return false; // this alert did not exist\n\n                    const index = this.alertIndex(alert.name);\n                    if (index !== -1 && index !== prevIndex) {  // An alert with the same (new) name exists\n\n                        return this.modalService.yesNo(\"msg#alerts.alertAlreadyExists\")\n                            .then((result) => {\n                                if (result === ModalResult.Yes) {\n                                    const prevAlert = this.alert(prevName);\n                                    if (prevAlert) {\n                                        this.deleteAlert(prevAlert); // Remove the alert with old name\n                                    }\n                                    alert.appQueryUrl = queryUrl;\n                                    return this.updateAlert(alert, this.alertIndex(alert.name)); // Update the alert with new name (index might have changed due to delete of old name)\n                                }\n                                return false;\n                            });\n\n                    } else {\n\n                        alert.appQueryUrl = queryUrl;\n                        return this.updateAlert(alert, prevIndex); // Update this alert\n\n                    }\n                }\n\n                return false;\n            });\n    }\n\n    /**\n     * Opens a dialog allowing a user to reorganize and edit the\n     * list of alerts.\n     * @returns a boolean promise resolved when the user closes the dialog\n     * the result is true is the list was updated.\n     */\n    public manageAlertsModal(searchRoute?: string) : Promise<boolean> {\n\n        const model: ManageAlertsModel =  { alerts: Utils.copy(this.alerts), searchRoute: searchRoute };\n\n        return this.modalService.open(this.alertComponents.manageAlertsModal, {model})\n            .then((result) => {\n                if (result === ModalResult.OK) {\n                    return this.updateAlerts(model.alerts, model.auditEvents);\n                }\n                return false;\n            });\n\n    }\n\n    ngOnDestroy() {\n        this.events.complete();\n        this.changes.complete();\n    }\n}\n","export * from \"./alerts.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export * from \"./bootstrap/index\";","export * from \"./public-api\";","import { Component, OnInit, Input } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { ModalButton, ModalResult } from \"@sinequa/core/modal\";\nimport { UserSettingsWebService } from \"@sinequa/core/web-services\";\nimport { MapOf, Utils } from \"@sinequa/core/base\";\nimport { IntlService } from \"@sinequa/core/intl\";\nimport { Validator } from \"@sinequa/core/validation\";\n\nexport module JsonInfo {\n    export interface Entry {\n        type: string;\n        path: string;\n        valueType: string;\n        label: string;\n        list?: string;\n        pattern?: string;\n        min?: number | Date;\n        max?: number | Date;\n        validators?: Validator[];\n    }\n\n    export enum InputType {\n        Entry = 'JsonEntryInput',\n        Range = 'JsonRangeInput',\n        MultiEntry = 'JsonMultiEntryInput',\n    }\n\n    export enum ValueType {\n        String = 'String',\n        Int = 'Int',\n        Number = 'Number',\n        Date = 'Date',\n        Bool = 'Bool',\n    }\n\n    export interface EntryInput extends Entry {\n        type: InputType.Entry;\n    }\n\n    export interface RangeInput extends Entry {\n        type: InputType.Range;\n    }\n\n    export interface MultiEntryInput extends Entry {\n        type: InputType.MultiEntry;\n        distinct?: boolean;\n        nbVisibleLines?: number;\n    }\n}\n\n/**\n * Opens a dialog to modify the user settings.\n *\n */\n@Component({\n    selector: 'sq-edit-user-settings',\n    templateUrl: './edit-user-settings.html'\n})\nexport class BsEditUserSettings implements OnInit {\n\n    @Input() visibleThreshold = 0;\n    @Input() showUILanguageSelector?: boolean;\n\n    public model: MapOf<any>;\n    public layout: MapOf<JsonInfo.Entry>;\n    public form: FormGroup;\n    public buttons: ModalButton[];\n\n    constructor(\n        private userSettingsService: UserSettingsWebService,\n        private intlService: IntlService,\n        private formBuilder: FormBuilder,\n    ) {\n    }\n\n    ngOnInit(): void {\n        this.layout = {};\n        this.model = {\n            'language': this.intlService.currentLocale.name\n        };\n        this.form = this.formBuilder.group({\n            'selectedLocale': [this.intlService.currentLocale.name]\n        });\n\n        const onOkClicked = (_) => {\n            if (this.form.dirty) {\n                // Locale is treated separately because it is not really stored in the user settings.\n                const newLocale = this.form.value['selectedLocale'];\n                this.form.removeControl('selectedLocale');\n                if (!Utils.eqNC(this.model['language'], newLocale)) {\n                    Utils.subscribe(\n                        this.intlService.use(newLocale),\n                        response => console.log('editUserSettings UI language changed.')\n                    );\n                }\n\n                const patch = this.calculatePatch();\n                if (!Utils.isUndefined(patch) && !Utils.isEmpty(patch)) {\n                    const observable = this.userSettingsService.patch(patch);\n                    Utils.subscribe(\n                        observable,\n                        response => {\n                            if (this.userSettingsService.userSettings) {\n                                this.setNewValue(this.userSettingsService.userSettings, patch);\n                            }\n                            console.log('editUserSettings saved.');\n                        },\n                        error => console.log('editUserSettings save failed: ', error)\n                    );\n                }\n            }\n        };\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.form as any,\n                action: onOkClicked\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    private setNewValue(obj: MapOf<any>, newObj: MapOf<any>): void {\n        for (const key of Object.keys(newObj)) {\n            const value = newObj[key];\n            if (value === null) {\n                /* NOTE: Don't use delete obj[key] because some component may put an observer on the user settings property */\n                obj[key] = undefined;\n            }\n            else if (Utils.isObject(value)) {\n                if (Utils.isDate(value)) {\n                    obj[key] = new Date(value.valueOf());\n                }\n                else if (Utils.isRegExp(value)) {\n                    obj[key] = new RegExp(value);\n                }\n                else if (Utils.isArray(value)) {\n                    obj[key] = value.slice(0); // clone the array\n                }\n                else {\n                    if (!Utils.isObject(obj[key])) {\n                        obj[key] = Utils.isArray(value) ? [] : {};\n                    }\n                    this.setNewValue(obj[key], value);\n                }\n            }\n            else {\n                obj[key] = value;\n            }\n        }\n    }\n\n    /**\n     * Calculates the update patch for user settings.\n     *\n     * @returns the update patch.\n     */\n    private calculatePatch(): MapOf<any> {\n        const patch = {};\n        Object.keys(this.form.value).forEach(key => {\n            const formValue = this.ensureType(this.layout[key], this.readFormValue(key));\n            const paths = Utils.split(this.layout[key].path, '.');\n            const currentValue = this.userSettingsService.readUserSetting(paths);\n\n            let includedInPatch = false;\n            if (!Utils.isUndefined(currentValue)) {\n                if (formValue !== currentValue) {\n                    includedInPatch = true;\n                }\n            } else {\n                if (!Utils.isUndefined(formValue)) {\n                    includedInPatch = true;\n                }\n            }\n\n            if (includedInPatch) {\n                this.setValue(patch, paths, formValue);\n            }\n        });\n\n        return patch;\n    }\n\n    /**\n     * Ensures that the form value is of the same type as the user setting before saving it.\n     *\n     * @param entryInfo The entry information.\n     * @param value The form value.\n     * @returns The conformed value for the user setting.\n     */\n    private ensureType(entryInfo: JsonInfo.Entry, value: any): any {\n        const inputType = entryInfo.type as JsonInfo.InputType;\n        const valueType = entryInfo.valueType as JsonInfo.ValueType;\n\n        switch (valueType as JsonInfo.ValueType) {\n            case JsonInfo.ValueType.Bool:\n                // For the case of boolean, we ignore the input type because we only support having a JSON boolean\n                return !!value;\n            case JsonInfo.ValueType.Date:\n                return this.cast<Date>(inputType, value, Utils.asDate);\n            case JsonInfo.ValueType.Int:\n            case JsonInfo.ValueType.Number:\n                return this.cast<number>(inputType, value, Utils.asNumber);\n            case JsonInfo.ValueType.String:\n            default:\n                return this.cast<string>(inputType, value, Utils.asString);\n        }\n    }\n\n\n    /**\n     * Casts the value of a given type to another type.\n     * <p>\n     * If the given value is of array type, it is casted into another array containing element of the\n     * desired type.\n     *\n     * @template T The desired type after casting.\n     * @param inputType The type of form input where the value comes.\n     * @param value The value to cast.\n     * @param castFn The casting function.\n     * @returns the cast result.\n     */\n    private cast<T>(\n        inputType: JsonInfo.InputType, value: any, castFn: (params: any) => T | undefined\n    ): T | T[] | undefined {\n        if (Utils.isArray(value)) {\n            const array = value as any[];\n            const empty = array.length === 0;\n            switch (inputType) {\n                case JsonInfo.InputType.Entry:\n                    return !empty ? castFn(array[0]) : undefined;\n                case JsonInfo.InputType.MultiEntry:\n                case JsonInfo.InputType.Range:\n                    const result: T[] = [];\n                    for (const v of array) {\n                        result.push(castFn(v) as T);\n                    }\n                    return result;\n            }\n            return undefined;\n        }\n\n        return castFn(value);\n    }\n\n    /**\n     * Reads the form value for the given entry.\n     *\n     * @param key The entry key.\n     * @returns The form value.\n     */\n    private readFormValue(key: string): any {\n        const formValue = this.form.value[key];\n        if (Utils.isArray(formValue)) {\n            switch (this.layout[key].type as JsonInfo.InputType) {\n                case JsonInfo.InputType.Entry:\n                    // The entry is single-value type whereas its corresponding form control has an array value.\n                    // This should be because its form control is represented by a Select component.\n                    // The array value should be then a singleton array, we simply return the first element.\n                    const array = <any[]>formValue;\n                    if (array.length !== 1) {\n                        console.log('editUserSettings.readFormValue not a singleton array.');\n                    }\n                    return array[0];\n                case JsonInfo.InputType.MultiEntry:\n                    break;\n                case JsonInfo.InputType.Range:\n                    break;\n            }\n        }\n        return formValue;\n    }\n\n    /**\n     * Sets a JSON value.\n     *\n     * @param json The JSON to set.\n     * @param paths The path of the value in the JSON.\n     * @param value The value to set.\n     */\n    private setValue(json: MapOf<any>, paths: string[], value: any): void {\n        const nbPaths = paths.length;\n        if (nbPaths > 1) {\n            for (let i = 0; i < nbPaths - 1; ++i) {\n                const path = paths[i];\n                if (!json[path]) {\n                    json[path] = {};\n                }\n                json = json[path];\n            }\n        }\n\n        json[paths[nbPaths - 1]] = Utils.isEmpty(value) ? null : value;\n    }\n\n    /**\n     * Indicates the height of the dialog content to trigger scroll behavior when there are too many input controls.\n     *\n     * @return the height of the dialog content to trigger scroll behavior when there are too many input controls.\n     */\n    public get maxHeight(): string {\n        //If size is undefined use 5 as default\n        return (((this.visibleThreshold | 0) || 5) * 10) + \"ex\";\n    }\n}\n","<form name=\"editUserSettings\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#editUserSettings.title'\" [buttons]=\"buttons\">\n        <div class=\"sq-user-settings-modal-body\" [style.max-height]=\"maxHeight\">\n            <sq-user-settings-editor [form]=\"form\" [model]=\"model\" [layout]=\"layout\"></sq-user-settings-editor>\n        </div>\n    </sq-modal>\n</form>\n","/**\n * An enumeration of keyboard code values\n */\nexport enum Keys {\n    up = 38,\n    down = 40,\n    left = 37,\n    right = 39,\n    del = 46,\n    tab = 9,\n    enter = 13,\n    esc = 27,\n    comma = 188,\n    space = 32,\n    pageUp = 33,\n    pageDown = 34,\n    home = 36,\n    end = 35,\n    backspace = 8\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {CollapseModule} from \"@sinequa/components/collapse\";\n\nimport {Metadata} from \"./metadata/metadata\";\nimport {MetadataItem} from \"./metadata-item/metadata-item\";\nimport {MetadataAccessListsItem} from \"./metadata-access-lists-item/metadata-access-lists-item\";\nimport {MetadataAccessListsItemSingleAccessList} from \"./metadata-access-lists-item-single-access-list/metadata-access-lists-item-single-access-list\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        UtilsModule,\n        CollapseModule,\n    ],\n    declarations: [\n        Metadata, MetadataItem,\n        MetadataAccessListsItem, MetadataAccessListsItemSingleAccessList\n    ],\n    exports: [\n        Metadata, MetadataItem\n    ],\n})\nexport class MetadataModule {\n}","import {ChangeDetectionStrategy, Component, Input, OnInit} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Action} from \"../../action\";\n\n@Component({\n    selector: \"sq-action-menu\",\n    templateUrl: \"./action-menu.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BsActionMenu implements OnInit{\n    @Input() items: Action[];\n    @Input() size: string;\n    @Input() autoAdjust: boolean;\n    @Input() autoAdjustBreakpoint: string;\n    @Input() collapseBreakpoint: string;\n    @Input() right: boolean;\n\n    ngOnInit() {\n        if (!Utils.isArray(this.items)) {\n            this.items = [<Action>this.items];\n        }\n    }\n\n    identify(index:number, item: Action) {\n        return item.name || item.text || item.title || index;\n    }\n}","<ul class=\"navbar-nav {{right ? 'navbar-right' : ''}}\">\n    <ng-container *ngFor=\"let item of items; trackBy(identify)\">\n        <li *ngIf=\"!item.hidden\" class=\"nav-item {{item.hasChildren ? 'dropdown' : ''}}\"\n            [sq-action-item]=\"{item: item, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n            [collapseBreakpoint]=\"collapseBreakpoint\"></li>\n    </ng-container>\n</ul>","import {Injectable, Inject, InjectionToken, OnDestroy, ComponentFactory, ComponentRef, Type} from \"@angular/core\";\nimport {Subject, Observable} from \"rxjs\";\nimport {Utils, MapOf} from \"@sinequa/core/base\";\nimport elementResizeDetectorMaker from \"element-resize-detector\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {Clipboard} from '@angular/cdk/clipboard';\n\nexport interface CaretPosition {\n    start: number;\n    end: number;\n}\n\nexport const SCREEN_SIZE_RULES = new InjectionToken<MapOf<string>>('SCREEN_SIZE_RULES');\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class UIService implements OnDestroy {\n    _resizeEvent = new Subject<UIEvent>();\n    _priorityResizeEvent = new Subject<UIEvent>();\n    screenSizes: string[];\n    screenSize: string; // one of the screen size rules values\n    elementResizeDetector: any;\n    factories = new Map<Type<any>, ComponentFactory<any>>();\n\n    constructor(\n        @Inject(SCREEN_SIZE_RULES) public screenSizeRules: MapOf<string>,\n        public notificationsService: NotificationsService,\n        public clipboard: Clipboard\n    ) {\n\n        this.screenSizes = [\"xs\", \"sm\", \"md\", \"lg\", \"xl\", \"xxl\"]; // in ascending size order\n        this.setScreenSize();\n        window.addEventListener(\"resize\", this.resizeEventListener);\n        this.elementResizeDetector = elementResizeDetectorMaker({ strategy: \"scroll\" });\n    }\n\n    protected resizeEventListener = Utils.frame((event: UIEvent) => {\n        this.setScreenSize();\n        this._priorityResizeEvent.next(event);\n        this._resizeEvent.next(event);\n    });\n\n    ngOnDestroy() {\n        this._resizeEvent.complete();\n        this._priorityResizeEvent.complete();\n        window.removeEventListener(\"resize\", this.resizeEventListener);\n    }\n\n    get resizeEvent(): Observable<UIEvent> {\n        return this._resizeEvent;\n    }\n\n    get priorityResizeEvent(): Observable<UIEvent> {\n        return this._priorityResizeEvent;\n    }\n\n    /*private setTitle(title: string) {\n        document.title = this.intlService.formatMessage(title);\n    }*/\n\n    appInit(appComponentRef: ComponentRef<any>) {\n        //this.setTitle();\n        //Utils.subscribe(this.intlService.events,\n        //    (value) => {\n        //        this.setTitle();\n        //    });\n\n        // See https://github.com/angular/angular/issues/18817\n        /*this.resizeEvent.subscribe(\n            (event) => {\n                appComponentRef.changeDetectorRef.markForCheck();\n            });*/\n\n        // this.loadComponent({component: DirtyChecker});\n    }\n\n    // legacy (was called from app.ts)\n    addResizeListener(listener: (event?: UIEvent) => any) {\n        this._resizeEvent.subscribe(listener);\n    }\n\n    private screenSizeIs(list: string | string[]) {\n        //let rules = this.coreConfig.screenSizeRules;\n\n        // validate that we're getting a string or array.\n        if (!Utils.isString(list) && !Utils.isArray(list)) {\n            throw new Error('screenSizeIs requires an array or comma-separated list');\n        }\n\n        // if it's a string, convert to array.\n        if (Utils.isString(list)) {\n            list = list.split(/\\s*,\\s*/);\n        }\n\n        return list.some((size) => window.matchMedia(this.screenSizeRules[size]).matches);\n    }\n\n    private setScreenSize() {\n        for (const size of this.screenSizes) {\n            if (this.screenSizeIs(size)) {\n                this.screenSize = size;\n                return;\n            }\n        }\n        throw new Error(\"UIService.setScreenSize - no matching screen size\");\n    }\n\n    screenSizeIsEqual(screenSize: string): boolean {\n        return this.screenSize === screenSize;\n    }\n\n    screenSizeIsGreater(screenSize: string | undefined): boolean {\n        const index1 = this.screenSizes.findIndex((value) => value === this.screenSize);\n        const index2 = this.screenSizes.findIndex((value) => value === screenSize);\n        return index1 > index2;\n    }\n\n    screenSizeIsLess(screenSize: string): boolean {\n        const index1 = this.screenSizes.findIndex((value) => value === this.screenSize);\n        const index2 = this.screenSizes.findIndex((value) => value === screenSize);\n        return index1 < index2;\n    }\n\n    screenSizeIsGreaterOrEqual(screenSize: string | undefined): boolean {\n        if (screenSize === this.screenSize) {\n            return true;\n        }\n        return this.screenSizeIsGreater(screenSize);\n    }\n\n    screenSizeIsLessOrEqual(screenSize: string): boolean {\n        if (screenSize === this.screenSize) {\n            return true;\n        }\n        return this.screenSizeIsLess(screenSize);\n    }\n\n    private _screenSizeTest(screenSize: string): boolean {\n        if (Utils.eqNCN(screenSize, \"always\", \"true\")) {\n            return true;\n        }\n        if (Utils.eqNCN(screenSize, \"never\", \"false\")) {\n            return false;\n        }\n        if (Utils.startsWith(screenSize, \">=\")) {\n            return this.screenSizeIsGreaterOrEqual(screenSize.slice(2));\n        }\n        if (Utils.startsWith(screenSize, \">\")) {\n            return this.screenSizeIsGreater(screenSize.slice(1));\n        }\n        if (Utils.startsWith(screenSize, \"<=\")) {\n            return this.screenSizeIsLessOrEqual(screenSize.slice(2));\n        }\n        if (Utils.startsWith(screenSize, \"<\")) {\n            return this.screenSizeIsLess(screenSize.slice(1));\n        }\n        if (Utils.startsWith(screenSize, \"=\")) {\n            return this.screenSizeIsEqual(screenSize.slice(1));\n        }\n        return this.screenSizeIsEqual(screenSize);\n    }\n\n    // screenSizes is a sequence of size specs with optional operator separated by space or and (AND)\n    // Multiple sequences can be specified using , or ; as a separator (these are OR'd)\n    screenSizeTest(screenSizes: string): boolean {\n        if (!screenSizes) {\n            return true;\n        }\n        const ors = Utils.split(screenSizes, [',', ';']);\n        for (const or of ors) {\n            const ands = Utils.split(or, \" \");\n            if (ands.length === 0) {\n                continue;\n            }\n            let ok = true;\n            for (const and of ands) {\n                if (Utils.eqNC(and, \"and\")) { // space separated but you can use and if you want to\n                    continue;\n                }\n                if (!this._screenSizeTest(and)) {\n                    ok = false;\n                    break;\n                }\n            }\n            if (ok) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    getContentRect(element: HTMLElement): ClientRect {\n        const rect = element.getBoundingClientRect();\n        const computedStyle = window.getComputedStyle(element);\n        const borderLeft = parseFloat(computedStyle.borderLeft);\n        const borderRight = parseFloat(computedStyle.borderRight);\n        const borderTop = parseFloat(computedStyle.borderTop);\n        const borderBottom = parseFloat(computedStyle.borderBottom);\n        const paddingLeft = parseFloat(computedStyle.paddingLeft);\n        const paddingRight = parseFloat(computedStyle.paddingRight);\n        const paddingTop = parseFloat(computedStyle.paddingTop);\n        const paddingBottom = parseFloat(computedStyle.paddingBottom);\n        return {\n            top: rect.top + borderTop + paddingTop,\n            right: rect.right - borderRight - paddingRight,\n            bottom: rect.bottom - borderBottom - paddingBottom,\n            left: rect.left + borderLeft + paddingLeft,\n            width: rect.width - borderLeft - paddingLeft - paddingRight - borderRight,\n            height: rect.height - borderTop - paddingTop - paddingBottom - borderBottom\n        };\n    }\n\n    // caret support\n    getCaret(input: HTMLInputElement): CaretPosition {\n        return {\n            start: input.selectionStart || 0,\n            end: input.selectionEnd || 0\n        };\n    }\n\n    setCaret(input: HTMLInputElement, start: number, end = start, text?: string, selectionAction = UIService.SelectionAction.collapse, ensureVisible = true, raiseEvent = true) {\n        if (start < 0) {\n            return;\n        }\n        if (Utils.isString(text)) {\n            let value = input.value;\n            if (end >= start) {\n                value = value.slice(0, start) + text + value.slice(end);\n            }\n            else {\n                value = value.slice(0, start) + text;\n            }\n            input.value = value;\n            switch (selectionAction) {\n                case UIService.SelectionAction.adjust:\n                    end = start + text.length;\n                    break;\n                case UIService.SelectionAction.none:\n                    break;\n                case UIService.SelectionAction.collapseToStart:\n                    end = start;\n                    break;\n                case UIService.SelectionAction.collapse:\n                default:\n                    end = start + text.length;\n                    start = end;\n                    break;\n            }\n        }\n        if (end < 0) {\n            end = start;\n        }\n        input.setSelectionRange(start, end);\n        if (ensureVisible) {\n            const rect = input.getBoundingClientRect();\n            const contentRect = this.getContentRect(input);\n            const textPos = this.getTextPosition(input, this.getCaret(input).end);\n            let scrollLeft = input.scrollLeft;\n            const minX = contentRect.left + scrollLeft;\n            const maxX = contentRect.right + scrollLeft;\n            const caretX = rect.left + textPos.left;\n            if (caretX < minX || caretX > maxX) {\n                scrollLeft = Math.max(caretX - contentRect.right + 1/*for the caret*/, 0);\n                input.scrollLeft = scrollLeft;\n            }\n        }\n        if (raiseEvent) {\n            const event = new CustomEvent(\"input\");\n            input.dispatchEvent(event);\n        }\n    }\n\n    // See https://github.com/component/textarea-caret-position\n    // We return a lineHeight value in addition\n    private textPositionProperties = [\n        'direction',  // RTL support\n        'boxSizing',\n        'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n        'height',\n        'overflowX',\n        'overflowY',  // copy the scrollbar for IE\n\n        'borderTopWidth',\n        'borderRightWidth',\n        'borderBottomWidth',\n        'borderLeftWidth',\n        'borderStyle',\n\n        'paddingTop',\n        'paddingRight',\n        'paddingBottom',\n        'paddingLeft',\n\n        // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n        'fontStyle',\n        'fontVariant',\n        'fontWeight',\n        'fontStretch',\n        'fontSize',\n        'fontSizeAdjust',\n        'lineHeight',\n        'fontFamily',\n\n        'textAlign',\n        'textTransform',\n        'textIndent',\n        'textDecoration',  // might not make a difference, but better be safe\n\n        'letterSpacing',\n        'wordSpacing',\n\n        'tabSize',\n        'MozTabSize'\n    ];\n    getTextPosition(element: HTMLElement, position: number, options?: {debug: boolean}): {top: number, left: number, lineHeight: number} {\n        const debug = options && options.debug || false;\n        if (debug) {\n            const el = document.querySelector('#input-textarea-caret-position-mirror-div');\n            if ( el ) {\n                if (el.parentNode) {\n                    el.parentNode.removeChild(el);\n                }\n            }\n        }\n\n        // mirrored div\n        const div = document.createElement('div');\n        div.id = 'input-textarea-caret-position-mirror-div';\n        document.body.appendChild(div);\n\n        const style = div.style;\n        const computed = !!window.getComputedStyle ? getComputedStyle(element) : (<any>element).currentStyle;  // currentStyle for IE < 9\n\n        // default textarea styles\n        style.whiteSpace = 'pre-wrap';\n        if (element.nodeName !== 'INPUT')\n            style.wordWrap = 'break-word';  // only for textarea-s\n\n        // position off-screen\n        style.position = 'absolute';  // required to return coordinates properly\n        if (!debug)\n            style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n        // transfer the element's properties to the div\n        this.textPositionProperties.forEach(function (prop) {\n            style[prop] = computed[prop];\n        });\n\n        if (!Utils.isUndefined((<any>window).mozInnerScreenX)) {\n            // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n            if (element.scrollHeight > parseInt(computed.height, 10))\n            style.overflowY = 'scroll';\n        } else {\n            style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n        }\n\n        div.textContent = (<any>element).value.substring(0, position);\n        // the second special handling for input type=\"text\" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n        if (element.nodeName === 'INPUT' && div.textContent) {\n            div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n        }\n\n        const span = document.createElement('span');\n        // Wrapping must be replicated *exactly*, including when a long word gets\n        // onto the next line, with whitespace at the end of the line before (#7).\n        // The  *only* reliable way to do that is to copy the *entire* rest of the\n        // textarea's content into the <span> created at the caret position.\n        // for inputs, just '.' would be enough, but why bother?\n        div.appendChild(span);\n\n        // return lineHeight too\n        span.textContent = '.';\n        const lineHeight = span.offsetHeight;\n\n        span.textContent = (<any>element).value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n\n        const coordinates = {\n            top: span.offsetTop + parseInt(computed['borderTopWidth'], 10),\n            left: span.offsetLeft + parseInt(computed['borderLeftWidth'], 10),\n            lineHeight: lineHeight\n        };\n\n        if (debug) {\n            span.style.backgroundColor = '#aaa';\n        } else {\n            document.body.removeChild(div);\n        }\n\n        return coordinates;\n    }\n\n    getViewport(): ClientRect {\n        return document.body.getBoundingClientRect();\n    }\n\n    addElementResizeListener(element: HTMLElement, listener: (this: HTMLElement) => void) {\n        this.elementResizeDetector.listenTo(element, listener);\n    }\n\n    removeElementResizeListener(element: HTMLElement, listener: (this: HTMLElement) => void) {\n        this.elementResizeDetector.removeListener(element, listener);\n    }\n    \n    copyToClipboard(data: string, maxLength = 30) {\n        if (!navigator?.clipboard) {\n            // Note: CDK seems to struggle with large chunks of text\n            this.copyToClipboardCdk(data, maxLength);\n        }\n        else {\n            // Navigator built-in clipboard management\n            navigator.clipboard.writeText(data).then(() => {\n                this.notificationsService.success(\"msg#clipboard.success\", {data: \"\\\"\"+(data.length>maxLength? (data.slice(0,maxLength) + \"...\") : data)+\"\\\"\"});\n            }, err => {\n                this.notificationsService.warning(\"msg#clipboard.error\");\n            });\n        }\n    }\n\n    copyToClipboardCdk(data: string, maxLength = 30) {\n        const pending = this.clipboard.beginCopy(data);\n        let remainingAttempts = 3;\n        const attempt = () => {\n            const result = pending.copy();\n            if (!result && --remainingAttempts) {\n                setTimeout(attempt);\n            } else {\n                // Remember to destroy when you're done!\n                pending.destroy();\n                if(result) {\n                    this.notificationsService.success(\"msg#clipboard.success\", {data: \"\\\"\"+(data.length>maxLength? (data.slice(0,maxLength) + \"...\") : data)+\"\\\"\"});\n                }\n                else {\n                    this.notificationsService.warning(\"msg#clipboard.error\");\n                }\n            }\n        };\n        attempt();\n    }\n}\n\nexport module UIService {\n    export enum SelectionAction {\n        adjust,\n        none,\n        collapseToStart,\n        collapse\n    }\n}\n","import {Injectable} from \"@angular/core\";\nimport {HttpClient, HttpRequest, HttpHandler} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {share, tap} from \"rxjs/operators\";\nimport {Utils} from \"@sinequa/core/base\";\n\n/**\n * A helper service that overrides the standard Angular [HttpClient]{@link https://angular.io/api/common/http/HttpClient}\n * to prevent multiple subscribers from causing multiple requests to be issued and to mitigate against request flooding\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class SqHttpClient extends HttpClient {\n\n    private responseCache = new Map<string, Observable<any>>();\n\n    constructor(\n        httpHandler: HttpHandler) {\n        super(httpHandler);\n    }\n\n    private getRequestHash(first: string | HttpRequest<any>, url?: string, options = {}): string {\n        // The replacer ensures that object keys are always serialized in the same order\n        const strRequest = JSON.stringify([first, url, options],\n            (key: string, value: any) => {\n                if (Utils.isObject(value) && !Utils.isIterable(value)) {\n                    return Object.keys(value).sort().reduce(\n                        (s, k) => {\n                            s[k] = value[k];\n                            return s;\n                        }, {});\n                }\n                else {\n                    return value;\n                }\n            });\n        return Utils.sha256(strRequest);\n    }\n\n    /**\n     * Overrides the standard `HttpClient.request` method to change its behavior as follows:\n     * * pipes the observable to the share operator so that only a single request is issued even if there are multiple subscribers\n     * * to mitigate request flooding, a cache of pending response observables keyed by the request thumbprint is maintained.\n     * An observable from the cache is returned if the incoming request is identical to one in the cache\n     */\n    request(first: string | HttpRequest<any>, url?: string, options = {}): Observable<any> {\n        const requestHash = this.getRequestHash(first, url, options);\n        let observable = this.responseCache.get(requestHash);\n        if (!observable) {\n            observable = super.request(first as string, url as string, options)\n                .pipe(share())\n                .pipe(tap(() => this.responseCache.delete(requestHash)));\n            this.responseCache.set(requestHash, observable);\n        }\n        return observable;\n    }\n}\n","export * from \"./public-api\";","export default {\n    \"labels\": {\n        \"labels\": \"Libellés\",\n        \"publicLabels\": \"Libellés publics\",\n        \"privateLabels\": \"Libellés privés\",\n        \"public\": \"Public\",\n        \"private\": \"Privé\",\n        \"selectLabel\": \"Sélectionner le(s) libellé(s)\",\n        \"deleteLabelAreYouSure\": \"Etes-vous sûr de vouloir effacer le libellé: {name} ?\",\n        \"bulkAddLabelAreYouSure\": \"Etes-vous sûr de vouloir ajouter en lot le libellé: {name} aux résultats de la requête courante ? \",\n        \"bulkRemoveLabelAreYouSure\": \"Etes-vous sûr de vouloir enlever en lot le libellé: {name} aux résultats de la requête courante ?\",\n        \"addPublicLabelText\": \"+\",\n        \"removePublicLabelText\": \"×\",\n        \"addPublicLabelTitle\": \"Ajouter un libellé public\",\n        \"selectPublicLabelTitle\": \"Sélectionner le libellé public\",\n        \"removePublicLabelTitle\": \"Supprimer le libellé public\",\n        \"addPrivateLabelText\": \"+\",\n        \"removePrivateLabelText\": \"×\",\n        \"addPrivateLabelTitle\": \"Ajouter un libellé privé\",\n        \"selectPrivateLabelTitle\": \"Sélectionner le libellé privé\",\n        \"removePrivateLabelTitle\": \"Supprimer le libellé privé\"\n    },\n\n    \"renameLabel\": {\n        \"title\": \"Renommer le(s) libellé(s) globalement\",\n        \"btnRename\": \"Renommer\",\n        \"newLabel\": \"Nouveau Libellé\",\n        \"oldLabels\": \"Ancien(s) libellé(s)\",\n        \"alertText\": \"Cette action renomme le(s) libellé(s) sélectionné(s) dans l'index et est irréversible\",\n        \"successFeedback\": \"Libellé(s) renommé(s) dans l'index\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requête non aboutie\"\n    },\n\n    \"deleteLabel\": {\n        \"title\": \"Supprimer le(s) libellé(s) globalement\",\n        \"btnDelete\": \"Supprimer\",\n        \"alertText\": \"Cette action supprime le(s) libellé(s) sélectionné(s) de l'index et est irréversible\",\n        \"successFeedback\": \"Libellé(s) supprimé(s) de l'index\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requête non aboutie\"\n    },\n\n    \"bulkRemoveLabel\": {\n        \"title\": \"Enlever le(s) libellé des résultats courants\",\n        \"btnBulkRemove\": \"Enlever\",\n        \"alertText\": \"Cette action enlève le(s) libellé(s) sélectionné(s) de tous les résultats remontés par le moteur (pas seulement de la première page)\",\n        \"successFeedback\": \"Libellé(s) enlevé(s) de tous les résultats remontés par le moteur\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requête non aboutie\"\n    },\n\n    \"bulkAddLabel\": {\n        \"title\": \"Ajouter le(s) libellé(s) aux résultats courants\",\n        \"btnBulkAdd\": \"Ajouter\",\n        \"alertText\": \"Cette action ajoute le(s) libellé(s) sélectionné(s) à tous les résultats remontés par le moteur (pas seulement à la première page)\",\n        \"infoText\": \"Appuyez sur 'Entrée' pour ajouter un nouveau libellé qui n'existe pas dans les suggestions\",\n        \"successFeedback\": \"Libellé(s) ajouté(s) à tous les résultats remontés par le moteur\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requête non aboutie\"\n    },\n\n    \"editLabel\": {\n        \"title\": \"Editer le(s) libellé(s) de(s) résultat(s) sélectionné(s)\",\n        \"btnEdit\": \"Sauvegarder\",\n        \"alertText\": \"Cette action édite le(s) libellé(s) de(s) résultat(s) sélectionné(s)\",\n        \"infoText\": \"Appuyez sur 'Entrée' pour ajouter un nouveau libellé qui n'existe pas dans les suggestions\",\n        \"labelsToBeRemoved\": \"Libellé(s) à enlever\",\n        \"labelsToBeAdded\": \"Libellé(s) à ajouter\",\n        \"successFeedback\": \"Libellé(s) de(s) résultat(s) sélectionné(s) édité(s)\",\n        \"errorFeedback\": \"Une erreur s'est produite. Requête non aboutie\"\n    }\n};\n","import enStatusBar from \"./en\";\nimport frStatusBar from \"./fr\";\nimport deStatusBar from \"./de\";\n\nexport { enStatusBar, frStatusBar, deStatusBar };\n","import {Utils} from \"@sinequa/core/base\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\n\nimport _enUserSettings from \"./en\";\nimport _frUserSettings from \"./fr\";\nimport _deUserSettings from \"./de\";\n\nconst enUserSettings = Utils.merge({}, _enUserSettings, enModal);\nconst frUserSettings = Utils.merge({}, _frUserSettings, frModal);\nconst deUserSettings = Utils.merge({}, _deUserSettings, deModal);\n\nexport { enUserSettings, frUserSettings, deUserSettings };\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {ScrollingModule} from \"@angular/cdk/scrolling\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {WebServicesModule} from \"@sinequa/core/web-services\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {CollapseModule} from \"@sinequa/components/collapse\";\nimport {MetadataModule} from \"@sinequa/components/metadata\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\nimport {BsFacetModule} from \"@sinequa/components/facet\";\nimport {ResultModule} from \"@sinequa/components/result\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {PreviewModule} from \"../preview.module\";\nimport {BsPreviewHighlights} from \"./preview-highlights/preview-highlights\";\nimport {BsPreviewLinks} from \"./preview-links/preview-links\";\nimport {BsPreviewPopup} from \"./preview-popup/preview-popup\";\nimport {BsPreviewPanel} from \"./preview-panel/preview-panel\";\nimport {BsResultLinkPreview} from \"./result-link-preview/result-link-preview\";\nimport {BsFacetPreview} from \"./facet-preview/facet-preview\";\nimport {BsSimilarDocuments} from \"./similar-documents/similar-documents\";\nimport {BsFacetPreviewComponent2 } from './facet-preview-2/facet-preview.component';\nimport {BsPreviewEntityFacetComponent} from './preview-entity-facet/preview-entity-facet.component';\nimport {BsPreviewEntityPanelComponent} from './preview-entity-panel/preview-entity-panel.component';\nimport {BsPreviewExtractsPanelComponent} from './preview-extracts-panel/preview-extracts-panel.component';\nimport {BsPreviewSearchFormComponent} from './preview-search-form/preview-search-form.component';\nimport {BsPreviewPagesPanelComponent} from './preview-pages-panel/preview-pages-panel.component';\nimport {BsPreviewPageFormComponent} from './preview-page-form/preview-page-form.component';\n\nimport {PREVIEW_MODAL} from '../preview.service';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n        ScrollingModule,\n\n        IntlModule,\n        WebServicesModule,\n        ValidationModule,\n\n        UtilsModule,\n        CollapseModule,\n        MetadataModule,\n        BsModalModule,\n        BsFacetModule,\n        ResultModule,\n        BsActionModule,\n        PreviewModule\n    ],\n    declarations: [\n        BsPreviewHighlights, BsPreviewLinks,\n        BsPreviewPopup, BsPreviewPanel, BsResultLinkPreview,\n        BsFacetPreview, BsFacetPreviewComponent2,\n        BsSimilarDocuments,\n        BsPreviewEntityFacetComponent,\n        BsPreviewEntityPanelComponent,\n        BsPreviewExtractsPanelComponent,\n        BsPreviewSearchFormComponent,\n        BsPreviewPagesPanelComponent,\n        BsPreviewPageFormComponent\n    ],\n    exports: [\n        PreviewModule,\n        BsPreviewHighlights, BsPreviewLinks,\n        BsPreviewPopup, BsPreviewPanel, BsResultLinkPreview,\n        BsFacetPreview, BsFacetPreviewComponent2,\n        BsSimilarDocuments,\n        BsPreviewEntityFacetComponent,\n        BsPreviewEntityPanelComponent,\n        BsPreviewExtractsPanelComponent,\n        BsPreviewSearchFormComponent,\n        BsPreviewPagesPanelComponent,\n        BsPreviewPageFormComponent\n    ],\n    providers: [\n        {provide: PREVIEW_MODAL, useValue: BsPreviewPopup}\n    ]\n})\nexport class BsPreviewModule {\n}","export * from \"./notification.module\";\nexport * from \"./notification/notification\";\nexport * from \"./notifications/notifications\";\nexport * from \"./notifications-manager/notifications-manager\";","export * from \"./public-api\";","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {DragDropModule} from \"@angular/cdk/drag-drop\";\nimport {RouterModule} from '@angular/router';\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\nimport {BsActionModule} from \"@sinequa/components/action\";\n\nimport {SAVEDQUERY_COMPONENTS} from \"../saved-queries.service\";\nimport {BsEditSavedQuery} from \"./edit-saved-query/edit-saved-query\";\nimport {BsManageSavedQueries} from \"./manage-saved-queries/manage-saved-queries\";\nimport {BsExportQuery} from \"./export-query/export-query\";\nimport {BsQueryExporter} from \"./query-exporter/query-exporter\";\nimport {BsSavedQueriesMenuComponent} from \"./saved-queries-menu/saved-queries-menu.component\";\nimport {BsFacetSavedQueries} from \"./facet-saved-queries/facet-saved-queries\";\nimport {BsFacetRecentQueries} from \"./facet-recent-queries/facet-recent-queries\";\nimport {BsFacetRecentDocuments} from \"./facet-recent-documents/facet-recent-documents\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n        DragDropModule,\n\n        BsModalModule,\n\n        IntlModule,\n        ValidationModule,\n        RouterModule,\n\n        BsSelectionModule,\n        BsModalModule,\n        UtilsModule,\n        BsActionModule\n    ],\n    declarations: [\n        BsEditSavedQuery, BsManageSavedQueries,\n        BsExportQuery, BsQueryExporter, BsSavedQueriesMenuComponent,\n        BsFacetSavedQueries, BsFacetRecentQueries, BsFacetRecentDocuments\n    ],\n    exports: [\n        BsEditSavedQuery, BsManageSavedQueries,\n        BsExportQuery, BsQueryExporter, BsSavedQueriesMenuComponent,\n        BsFacetSavedQueries, BsFacetRecentQueries, BsFacetRecentDocuments\n    ],\n    providers: [\n        {\n            provide: SAVEDQUERY_COMPONENTS,\n            useValue: {\n                editSavedQueryModal: BsEditSavedQuery,\n                manageSavedQueriesModal: BsManageSavedQueries,\n                exportSavedQueryModal: BsExportQuery\n            }\n        }\n    ]\n})\nexport class BsSavedQueriesModule {\n}\n","import { Query } from '@sinequa/core/app-utils';\nimport { Results, Record } from '@sinequa/core/web-services';\nimport { EdgeType, Node, Edge, NetworkProvider, NetworkDataset } from '../network-models';\nimport { RecordsProvider, StructuralEdgeType, RecordNode } from './records-provider';\nimport { combineLatest } from 'rxjs';\nimport { Action } from '@sinequa/components/action';\n\n/**\n * Extension of the Edge interface, to include the record property\n * from which this edge is generated\n */\nexport interface DynamicEdge extends Edge {\n    record: Record;\n}\n\n/**\n * Extension of the EdgeType interface, to include properties specific\n * to dynamic edges, in particular a function that returns a Query object\n * for a given source node.\n */\nexport interface DynamicEdgeType extends EdgeType {\n    /** Returns a query object to execute to obtain dynamic edges from a node */\n    getQuery: (node: Node, type: DynamicEdgeType) => Query | undefined;\n    /** count limits the number of records returned by the query service and allows for pagination */\n    count?: number;\n    /** Defines when the dynamic edge should be executed. Warning: oninsert may generate multiple simultaneous queries */\n    trigger: \"oninsert\" | \"onclick\" | \"manual\";\n}\n\n/**\n * Tests whether a given edge type is a DynamicEdgeType\n * @param et an edge type\n */\nexport function isDynamicEdgeType(et: EdgeType): et is DynamicEdgeType {\n    return !!(et as DynamicEdgeType).getQuery;\n}\n\n\n/**\n * A extension of the RecordsProvider, where records are not directly\n * provided, but are instead fetched from the server via a Query specific\n * to a source node.\n * Concretely, the dynamic edge provider will attach one (or more) record nodes\n * (and their structural edges) to one (or more) source nodes, whose type is\n * specified in the DynamicEdgeType.\n * Dynamic edges can be attached right when the source nodes are inserted (oninsert),\n * or when a user clicks on a source node (onclick) or when a user clicks on an\n * action button displayed when a source node is clicked.\n * Note that the \"source node\" have to come from different providers, so it is\n * necessary to listen to these providers and update the data generated by this\n * provider accordingly.\n */\nexport class DynamicEdgeProvider extends RecordsProvider {\n\n    /** List of the source nodes that have been already processed via clicks or actions */\n    protected processedNodes: string[] = [];\n    /** to avoid fetching the same data multiple times, we store the record objects fetched from the server in this cache */\n    protected nodeCache = new Map<string, Results>();\n\n    constructor(\n        public name: string,\n        protected edgeType: DynamicEdgeType,\n        protected secondaryEdgeTypes: StructuralEdgeType[],\n        protected permanent: boolean,\n        protected sourceProviders: NetworkProvider[]\n    ){\n        super(name, edgeType.nodeTypes[1], secondaryEdgeTypes, [], false);\n\n        combineLatest(sourceProviders.map(p => p.getProvider())).subscribe(dataset => {\n            if(this.active) {\n                // Merge the nodes from all datasets into a map\n                const map = new Map<string, Node>();\n                dataset.forEach(dataset => {\n                    dataset.getNodes().forEach(node => {\n                        if(node.visible && node.type === this.edgeType.nodeTypes[0]) {\n                            map.set(node.id, node);\n                        }\n                    });\n                });\n                // Update the dataset of dynamic edges\n                this.updateDynamicDataset(Array.from(map.values()));\n            }\n        });\n    }\n    \n    /**\n     * Rebuilds the dataset of this provider, given a list of source nodes to process.\n     * @param sourceNodes A list of source node to process\n     */\n    protected updateDynamicDataset(sourceNodes: Node[]) {\n\n        // We rebuild the dataset from scratch, in case some source nodes were removed\n        this.dataset = new NetworkDataset();\n\n        // If oninsert, we want to process all the source nodes. If not, we want to process the nodes in the processedNodes list\n        if(this.edgeType.trigger !== \"oninsert\") {\n            this.processedNodes = this.processedNodes.filter(id => !!sourceNodes.find(node => node.id === id)); // We want to \"forget\" the nodes that are not in the source anymore\n            sourceNodes = sourceNodes.filter(node => this.processedNodes.indexOf(node.id) !== -1); // We want to process only the nodes currently in the processed list\n        }\n\n        // For each source, we get its query\n        const queries = sourceNodes.map(node => this.nodeCache.has(node.id)? undefined : this.edgeType.getQuery(node, this.edgeType));\n        const _queries = queries.filter(q => !!q) as Query[];\n        // If there are queries, we process them asynchronously\n        if(_queries.length > 0) {\n            this.context.searchService.getMultipleResults(_queries, undefined).subscribe(res => {\n                this.addDynamicEdges(sourceNodes, res.results, queries);\n            });\n        }\n        // If not, we process them synchronously\n        else {\n            this.addDynamicEdges(sourceNodes, [], queries);\n        }\n    \n    }\n\n    /**\n     * Add dynamic edges to a list of source nodes, given a results set\n     * for each of these nodes (either directly provided or stored in the cache).\n     * @param sourceNodes The source nodes\n     * @param res The list of results sets\n     * @param queries The list of queries from which we obtained the results\n     */\n    protected addDynamicEdges(sourceNodes: Node[], res: Results[], queries: (Query|undefined)[]){\n        let j = 0;\n        // For each source node\n        for(let i = 0; i<sourceNodes.length; i++){\n            const sourceNode = sourceNodes[i];\n            const query = queries[i];\n            // If it has a query or a cached result\n            if(query || this.nodeCache.has(sourceNode.id)) {\n                const results = this.nodeCache.has(sourceNode.id)? this.nodeCache[sourceNode.id] : res[j++]; // Get the results\n                this.nodeCache[sourceNode.id] = results; // update cache\n                this.dataset.addNodes(sourceNode); // This will create a duplicate node which will be merged\n                const recordNodes = this.addRecordNodes(results.records); // Creates all the record nodes and their secondary edges\n                const recordEdges = this.createDynamicEdges(sourceNode, recordNodes);\n                this.dataset.addEdges(recordEdges);\n            }\n        }\n        this.provider.next(this.dataset);\n    }\n\n    /**\n     * Creates and returns edge objects for a given source node and the record nodes\n     * that must be attached to it.\n     * @param node The source node\n     * @param recordNodes The new record nodes that must be attached to the source node\n     */\n    protected createDynamicEdges(node: Node, recordNodes: RecordNode[]): DynamicEdge[] {\n        return recordNodes.map(rNode => this.createEdge(this.edgeType, node, rNode, undefined, node.visible, {record: rNode.record}) as DynamicEdge);\n    }\n\n    /**\n     * Attach dynamic edges to a given node, either synchronously, if the results set\n     * is available in the cache, or asynchronously, by fetching the data from the server.\n     * @param node The node to process\n     */\n    protected processNode(node: Node) {\n        const query = this.edgeType.getQuery(node, this.edgeType); // Get the search query for this node\n        if(query){\n            if(this.nodeCache.has(node.id)) {\n                if(!this.permanent) {\n                    this.dataset.clear(); // Remove data from previously clicked node\n                    this.processedNodes.splice(0); // Remove the processed nodes\n                }\n                this.processedNodes.push(node.id);\n                this.addDynamicEdges([node], [], [query]); // Insert dynamic nodes and edges for this clicked node\n            }\n            else {\n                this.context.searchService.getResults(query, undefined, {searchInactive: true})\n                    .subscribe(results => {\n                        if(!this.permanent) {\n                            this.dataset.clear(); // Remove data from previously clicked node\n                            this.processedNodes.splice(0); // Remove the processed nodes\n                        }\n                        this.processedNodes.push(node.id);\n                        this.addDynamicEdges([node], [results], [query]); // Insert dynamic nodes and edges for this clicked node\n                    });\n            }\n        }\n    }\n\n\n    // Network provider interface\n\n    /**\n     * Process a clicked source node, if the trigger of the edge type is \"onclick\"\n     * @param node The clicked node\n     */\n    onNodeClicked(node?: Node) {\n        super.onNodeClicked(node);\n        if(this.active && this.edgeType.trigger === \"onclick\" && node && node.type === this.edgeType.nodeTypes[0] && !this.dataset.hasNode(node.id)) {\n            this.processNode(node);\n        }\n    }\n    \n    /**\n     * Returns an Action allowing to process a node, if the trigger of the edge type\n     * is \"manual\".\n     * @param node The clicked node\n     */\n    getNodeActions(node: Node): Action[] {\n        const actions = super.getNodeActions(node);\n        if(this.active && this.edgeType.trigger === \"manual\" && node && node.type === this.edgeType.nodeTypes[0] && !this.dataset.hasNode(node.id)) {            \n            actions.push(new Action({\n                icon: \"fas fa-expand-arrows-alt\",\n                title: this.context.intlService.formatMessage(\"msg#network.actions.expandNode\", {label: node.label}),\n                action: () => {\n                    this.processNode(node);\n                }\n            }));            \n        }\n        return actions;\n    }\n}\n","import { Component, OnInit, OnDestroy, Inject, ChangeDetectorRef} from '@angular/core';\nimport { HttpResponse } from '@angular/common/http';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { ValidationService } from \"@sinequa/core/validation\";\nimport { NotificationsService } from \"@sinequa/core/notification\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { ModalRef, ModalButton, ModalResult, MODAL_MODEL } from \"@sinequa/core/modal\";\nimport { ExportSourceType, ExportOutputFormat, CCWebService, CCApp} from \"@sinequa/core/web-services\";\nimport {SavedQueriesService, ExportQueryModel} from \"../../saved-queries.service\";\nimport {SelectionService} from \"@sinequa/components/selection\";\nimport { AppService } from '@sinequa/core/app-utils';\n\n/**\n * Component representing the Export dialog where user can customize the query export action.\n *\n */\n@Component({\n    selector: 'sq-export-query',\n    templateUrl: './export-query.html'\n})\nexport class BsExportQuery implements OnInit, OnDestroy {\n\n    public readonly supportedFormats: ExportOutputFormat[] = [\n        ExportOutputFormat.Csv,\n        ExportOutputFormat.Xlsx,\n        ExportOutputFormat.Json\n    ];\n    public readonly outputFormats: typeof ExportOutputFormat = ExportOutputFormat;\n    public readonly sourceTypes: typeof ExportSourceType = ExportSourceType;\n\n    public form: FormGroup;\n    public savedQueries: string[];\n    public buttons: ModalButton[];\n    public isDownloading: boolean;\n    public exportableColumns: string[];\n\n    private formChanges: Subscription;\n\n    maxCount = 1000; // Default max count hard coded in web service\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: ExportQueryModel,\n        private formBuilder: FormBuilder,\n        private appService: AppService,\n        private selectionService: SelectionService,\n        private savedQueriesService: SavedQueriesService,\n        private validationService: ValidationService,\n        private notificationsService: NotificationsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        public modalRef: ModalRef) { }\n\n    ngOnInit(): void {\n        this.savedQueries = [];\n        for (const query of this.savedQueriesService.savedqueries) {\n            this.savedQueries.push(query.name);\n        }\n\n        this.exportableColumns = [];\n\n        if (this.appService.app) {\n            const queryExportConfig = this.getDefaultQueryExportConfig(this.appService.app);\n            const columns = (queryExportConfig.columns && queryExportConfig.columns['column$']) || [];\n            for (const column of columns) {\n                this.exportableColumns.push(column.title);\n            }\n            if(queryExportConfig.maxCount && Utils.isNumber(queryExportConfig.maxCount)) {\n                this.maxCount = queryExportConfig.maxCount;\n            }\n        }\n\n        this.form = this.formBuilder.group({\n            'format': [this.supportedFormats[0]],\n            'exportedColumns': [this.model.exportedColumns],\n            'export': [this.model.export, Validators.required],\n            'maxCount': [this.model.maxCount, Validators.compose([\n                this.validationService.integerValidator(),\n                this.validationService.minValidator(1)\n            ])],\n        });\n\n        this.isDownloading = false;\n\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#exportQuery.btnDownload\",\n                result: ModalResult.Custom,\n                anchor: true,\n                primary: true,\n                action: (_button) => {\n                    const observable = this.savedQueriesService.download(this.model);\n                    if (observable) {\n                        Utils.subscribe(observable,\n                            (response: HttpResponse<Blob>) => {\n                                console.log('exportQuery.download done.');\n                                this.notificationsService.info('msg#exportQuery.successNotification');\n                                this.modalRef.close(ModalResult.OK);\n                                return response;\n                            },\n                            (error) => {\n                                console.log('exportQuery.download failure - error: ', error);\n                                this.modalRef.close(error);\n                            });\n\n                        this.isDownloading = true;\n                        this.changeDetectorRef.markForCheck();\n                    }\n                },\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            })\n        ];\n\n        const onFormChanged = () => {\n            const newFormat = this.form.value['format'];\n            const newMaxCount = this.form.value['maxCount'];\n            const newExportedColumns = this.form.value['exportedColumns'];\n\n            if (this.model.format !== newFormat) {\n                this.model.format = newFormat;\n            }\n\n            if (this.model.maxCount !== newMaxCount) {\n                this.model.maxCount = newMaxCount;\n            }\n\n            this.model.exportedColumns = newExportedColumns;\n        };\n\n        this.formChanges = Utils.subscribe(this.form.valueChanges, onFormChanged);\n    }\n\n    ngOnDestroy(): void {\n        if (this.formChanges) {\n            this.formChanges.unsubscribe();\n        }\n    }\n\n    private getDefaultQueryExportConfig(app: CCApp): CCQueryExport {\n        let queryExport = app.queryExport;\n        if (queryExport.indexOf(',') !== -1) {\n            queryExport = queryExport.substring(0, queryExport.indexOf(','));\n        }\n        return <CCQueryExport>Utils.getField(app.webServices, queryExport);\n    }\n\n    /**\n     * Check if the client has selected some records.\n     *\n     * @returns true if the client has selected some records.\n     */\n    public hasSelectedRecords(): boolean {\n        return this.selectionService.haveSelectedRecords;\n    }\n\n    /**\n     * Checks if the user chosen export source is the same as the given one.\n     * <p>\n     * Used to control the radio button state.\n     *\n     * @param type The source to check.\n     * @returns true if the user chosen export source is the same as the given one.\n     */\n    public sourceChosen(type: ExportSourceType): boolean {\n        return (this.model.export & type) !== 0;\n    }\n\n    /**\n     * Callback called when user chooses a new export source.\n     *\n     * @param event The related UI event.\n     * @param type The new chosen source.\n     */\n    public sourceChanged(event: UIEvent, type: ExportSourceType): void {\n        const input = <HTMLInputElement>event.target;\n        if (input.checked) {\n            this.model.export = type;\n        }\n    }\n\n    /**\n     * Checks if the dialog allows user to choose export source.\n     * Generally, it returns false when the input model export type is already saved query.\n     *\n     * @returns true if the dialog allows user to choose export source.\n     */\n    public showSourceChooser(): boolean {\n        return !this.sourceChosen(ExportSourceType.SavedQuery);\n    }\n}\n\ninterface CCQueryExportColumnDef {\n    title: string;\n    pattern: string;\n    selectionQuery?: string;\n}\n\ninterface CCQueryExport extends CCWebService {\n    webServiceType: \"queryexport\";\n    columns?: CCQueryExportColumnDef[];\n    linksFilterDuplicateUrls?: boolean;\n    linksGlobalRelevance?: string;\n    linksMaxCount?: number;\n    linksSortByOrder?: boolean;\n    maxCount?: number;\n    separator?: string;\n}\n","<form name=\"exportQuery\" novalidate [formGroup]=\"form\">\n    <sq-modal\n        [title]=\"'msg#exportQuery.dialogTitle'\"\n        [buttons]=\"buttons\"\n        [isProcessingState]=\"isDownloading\">\n        <div class=\"form-group sq-form-group\">\n            <label for=\"format\">{{ 'msg#exportQuery.dialogOutputFormat' | sqMessage }}</label>\n            <select [sqValidation]=\"form\" class=\"form-control custom-select\" formControlName=\"format\" id=\"format\" sqAutofocus>\n                <option [value]=\"format\" *ngFor=\"let format of supportedFormats\">{{ outputFormats[format].toUpperCase() }}</option>\n            </select>\n        </div>\n        <div class=\"form-group sq-form-group\">\n            <label\n                for=\"exportedColumns\"\n                title=\"{{ 'msg#exportQuery.exportedColumnsLabelTooltip' | sqMessage }}\"\n            >\n                {{ 'msg#exportQuery.exportedColumns' | sqMessage }}&nbsp;&#9432;\n            </label>\n            <select\n                id=\"exportedColumns\"\n                formControlName=\"exportedColumns\"\n                [sqValidation]=\"form\"\n                class=\"form-control custom-select\"\n                sqAutofocus multiple\n            >\n                <option [value]=\"column\" *ngFor=\"let column of exportableColumns\">{{ column }}</option>\n            </select>\n        </div>\n        <div class=\"form-group sq-form-group\">\n            <label \n                for=\"maxCount\"\n                title=\"{{ 'msg#exportQuery.dialogMaxCountTooltip' | sqMessage:{values: {count: maxCount} } }}\"\n            >{{ 'msg#exportQuery.dialogMaxCount' | sqMessage }}&nbsp;&#9432;</label>\n            <input [sqValidation]=\"form\" type=\"number\" class=\"form-control\" id=\"maxCount\" formControlName=\"maxCount\" autocomplete=\"off\" spellcheck=\"off\">\n        </div>\n        <div class=\"form-group sq-form-group\" *ngIf=\"showSourceChooser()\">\n            <label for=\"export\">{{ 'msg#exportQuery.dialogSourceType' | sqMessage }}</label>\n            <div>\n                <div class=\"form-check form-check-inline\">\n                    <label class=\"form-check-label\">\n                        <input class=\"form-check-input\" type=\"radio\" [checked]=\"sourceChosen(sourceTypes.Result)\" (change)=\"sourceChanged($event, sourceTypes.Result)\" >\n                        {{ 'msg#exportQuery.dialogResult' | sqMessage }}\n                    </label>\n                </div>\n                <div class=\"form-check form-check-inline\">\n                    <label class=\"form-check-label\">\n                        <input class=\"form-check-input\" type=\"radio\" [checked]=\"sourceChosen(sourceTypes.Selection)\" (change)=\"sourceChanged($event, sourceTypes.Selection)\"\n                        [disabled]=\"!hasSelectedRecords()\" >\n                        {{ 'msg#exportQuery.dialogSelection' | sqMessage }}\n                    </label>\n                </div>\n            </div>\n        </div>\n    </sq-modal>\n</form>\n","import { Component, Input, Output, ElementRef, ViewChild, OnChanges, AfterViewInit, EventEmitter, SimpleChanges, OnDestroy, SimpleChange, ContentChild, TemplateRef, ChangeDetectorRef } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport * as d3 from 'd3';\n\nimport { IntlService } from '@sinequa/core/intl';\nimport {Record} from '@sinequa/core/web-services';\n\n\nexport interface TimelineDate {\n    date: Date;\n    value: number;\n}\n\nexport interface TimelineSeries {\n    name: string;\n    dates: TimelineDate[];\n    primary: boolean;\n    lineStyles?: {[key:string]: any};\n    areaStyles?:  {[key:string]: any};\n}\n\nexport interface TimelineEvent {\n    date: Date;\n    id: string;\n    display: string;\n    size?: number;\n    sizeOpened?: number;\n    styles?: {[key:string]: any};\n    record?: Record;\n}\n\n@Component({\n    selector: 'sq-timeline',\n    templateUrl: './timeline.component.html',\n    styleUrls: ['./timeline.component.scss']\n})\nexport class BsTimelineComponent implements OnChanges, AfterViewInit, OnDestroy {\n\n    @Input() data?: TimelineSeries[];\n    @Input() events?: TimelineEvent[];\n\n    @Input() selection?: [Date, Date];\n\n    // Initial scale (prior to any zoom)\n    @Input() minDate?: Date;\n    @Input() maxDate?: Date;\n\n    @Input() zoomable = true;\n    @Input() minZoomDays = 1; // Max 1 day scale\n    @Input() maxZoomDays = 365 * 100; // Max 100 years scale\n\n    @Input() width = 600;\n    @Input() height = 200;\n    @Input() margin = {top: 15, bottom: 20, left: 40, right: 15};\n\n    @Input() curveType = \"curveMonotoneX\";\n\n    @Input() showTooltip = true;\n    @Input() theme: \"light\" | \"dark\" = \"light\";\n\n    @Output() selectionChange = new EventEmitter<Date[]>();\n    @Output() rangeInit = new EventEmitter<Date[]>();\n    @Output() rangeChange = new EventEmitter<Date[]>();\n\n    @ContentChild(\"tooltipTpl\", {static: false}) tooltipTpl: TemplateRef<any>;\n\n    // Data\n    groupedEvents: TimelineEvent[][] = [];\n\n    // Scales\n    x: d3.ScaleTime<number, number>; // Read/Write\n    xt: d3.ScaleTime<number, number>; // Transformed X axis due to Zoom\n    y: d3.ScaleLinear<number, number>; // Read-only / domain updated\n\n    // Shapes\n    area: d3.Area<TimelineDate>; // Read only\n    line: d3.Line<TimelineDate>; // Read only\n\n    // Behaviors\n    brushBehavior: d3.BrushBehavior<any>; // Read only\n    zoomBehavior: d3.ZoomBehavior<any,any>; // Read/Write\n    brushSelection: [number, number] | null;\n    currentSelection?: Date[]; // Read/Write\n\n    // Elements\n    @ViewChild(\"xAxis\") gx: ElementRef;\n    @ViewChild(\"yAxis\") gy: ElementRef;\n    @ViewChild(\"brush\") gbrush: ElementRef;\n    \n    // Selections\n    xAxis$: d3.Selection<SVGGElement, Date, null, undefined>;\n    yAxis$: d3.Selection<SVGGElement, number, null, undefined>;\n    brush$: d3.Selection<SVGGElement, undefined, null, undefined>;\n    grips$: d3.Selection<SVGGElement, {type: string}, SVGGElement, undefined>;\n        \n    // Tooltip\n    tooltipItem: TimelineEvent[] | undefined;\n    tooltipX: number | undefined;\n    tooltipOrientation: \"left\" | \"right\";\n    tooltipTop: number;\n    tooltipRight: number;\n    tooltipLeft: number;\n\n    // Misc\n    viewInit: boolean;\n    intlSubscription: Subscription;\n    static counter = 0;\n    instance: number;\n    \n    zooming: boolean;\n    brushing: boolean;\n\n    constructor(\n        protected el: ElementRef,\n        protected intlService: IntlService,\n        protected cdRef: ChangeDetectorRef\n    ){\n        // When the locale changes, we rebuild the X scale and axis\n        this.intlSubscription = this.intlService.events.subscribe(e => this.updateXAxis());\n        \n        this.instance = BsTimelineComponent.counter++;\n        \n    }\n\n    get innerWidth(): number {\n        return this.width - this.margin.left - this.margin.right;\n    }\n\n    get innerHeight(): number {\n        return this.height - this.margin.top - this.margin.bottom;\n    }\n\n    // Note: ngOnChanges is always called once before ngAfterViewInit\n    ngOnChanges(changes: SimpleChanges) {\n\n        if(!this.x) {\n            \n            // Scales\n            this.x = d3.scaleUtc()\n                .range([0, this.innerWidth]);\n            this.xt = this.x;\n\n            this.y = d3.scaleLinear()\n                .range([this.innerHeight, 0]);\n                \n            // Shapes\n            this.area = d3.area<TimelineDate>()\n                .curve(d3[this.curveType])\n                .x(d => this.xt(d.date))\n                .y0(this.y(0))\n                .y1(d => this.y(d.value));\n                \n            this.line = d3.line<TimelineDate>()\n                .curve(d3[this.curveType])\n                .x(d => this.xt(d.date))\n                .y(d => this.y(d.value));\n                \n            // Behaviors\n            this.brushBehavior = d3.brushX()\n                .extent([[0, 0], [this.innerWidth, this.innerHeight]])\n                .on(\"start\", () => this.brushing = true)\n                .on('brush', () => this.onBrush())\n                .on('end', () => this.onBrushEnd());\n        }\n\n        // Resize handling\n\n        if(changes[\"height\"]) {\n            this.y.range([this.innerHeight, 0]);\n            this.area.y0(this.y(0));\n            this.brushBehavior.extent([[0, 0], [this.innerWidth, this.innerHeight]]);\n            if(this.viewInit) {\n                this.drawYAxis();\n                this.brush$.call(this.brushBehavior);\n                this.grips$.selectAll(\"path\").attr(\"d\", this.drawGrips);\n            }\n        }\n\n        if(changes[\"width\"]) {\n            this.x.range([0, this.innerWidth]);\n            this.brushBehavior.extent([[0, 0], [this.innerWidth, this.innerHeight]]);\n            if(this.viewInit) {\n                this.drawXAxis();\n                if(!changes[\"height\"]) {\n                    this.brush$.call(this.brushBehavior);\n                    this.grips$.selectAll(\"path\").attr(\"d\", this.drawGrips);\n                }\n            }\n        }\n\n        // If the parent changes the selection, we want to update it\n        // If not, we keep the current selection as is\n        // (Important to keep this statement outside of the if bellow since \n        // the change of selection can be combined with a change of data)\n        const selectionChanged = changes[\"selection\"] && this.updateSelection();\n\n        // Only changes in data result in redrawing the chart\n        // (other input, except selection, are expected to be static)\n        if(this.viewInit && changes[\"data\"] && this.checkDataChanges(changes[\"data\"])){\n            this.updateChart();\n        }\n\n        // If the parent changes the selection (even though the data hasn't changed), \n        // we want to update the brush.\n        // If not, we keep the current selection as is.\n        // We can update the brush only if the view is initialized (viewInit).\n        else if(this.viewInit && ((changes[\"selection\"] && selectionChanged) || changes[\"width\"])) {\n            this.updateBrush();\n        }\n\n        if(changes[\"events\"]) {\n            this.updateEvents();\n        }\n        \n    }\n\n    // Note: In onAfterViewInit we can access gx, gy, etc., obtained with @ViewChild.\n    // At this point we can initialize all the primitives and call updateChart()\n    ngAfterViewInit() {\n\n        // Get native elements\n        this.xAxis$ = d3.select(this.gx.nativeElement);\n        this.yAxis$ = d3.select(this.gy.nativeElement);\n        this.brush$ = d3.select(this.gbrush.nativeElement);\n\n        this.brush$\n            .call(this.brushBehavior)\n            .on(\"mousemove\", () => this.onMousemove())\n            .on(\"mouseout\", () => this.onMouseout());\n                        \n        // Add 2 \"grips\" to the brush goup, on each side of the rectangle\n        // Grips are inserted programmatically to appear on top the brush selection\n        this.grips$ = this.brush$.selectAll<SVGGElement, {type: string}>(\".grip\")\n            .data([{type: \"w\"}, {type: \"e\"}])\n            .enter()\n            .append(\"g\")\n            .attr(\"class\", \"grip\")\n            .attr(\"display\", \"none\");\n            \n        this.grips$.append(\"path\")\n            .attr(\"d\", this.drawGrips);\n\n        this.grips$.append(\"text\")\n            .attr(\"class\", \"grip-text\")\n            .attr(\"text-anchor\", d => d.type === \"w\"? 'end' : 'start')\n            .attr(\"x\", d => d.type === \"w\"? -5 : 5)\n            .attr(\"y\", 10);\n\n        this.viewInit = true;\n\n        this.updateChart();\n\n        // This is necessary to prevent \"Expression has changed after check\" errors\n        // caused by calling updateChart inside ngAfterViewInit().\n        // Unfortunately this is necessary because we need the DOM to be rendered in order fill the DOM\n        // (for example gAxis needs to exist so we can draw the axis)\n        this.cdRef.detectChanges();\n    }\n\n    /**\n     * Redraw the graph (needs to be called after ngAfterViewInit so that the DOM elements\n     * are accessible)\n     */\n    updateChart() {\n\n        this.turnoffTooltip();\n\n        if(this.data && this.data.length) {\n\n            // Update scales\n            // Note: does not stop the update process even if the data is invalid/empty\n            this.updateScales(this.data);\n\n            // Update Axes\n            this.updateAxes();\n            \n            // Update Zoom\n            this.updateZoom();\n\n            // Update brush\n            this.updateBrush();\n\n        }\n        \n    }\n\n\n    /**\n     * Update the x & y scales, based on the input data\n     * @param data \n     */\n    protected updateScales(data: TimelineSeries[]) {\n\n        // Set x and y scales with the primary series (or first one)\n        const primarySeries = data.filter(s => s.primary) || [data[0]];\n        const allPrimaryDates = ([] as TimelineDate[]).concat(...primarySeries.map(s => s.dates));\n\n        const xExtent = d3.extent<TimelineDate, Date>(allPrimaryDates, d => d.date);\n        const yMax = d3.max<TimelineSeries, number>(data, \n            s => d3.max<TimelineDate, number>(s.dates, d => d.value));\n\n        // Check validity of data\n        if(!xExtent[0] || !xExtent[1] || !yMax) {\n            if (allPrimaryDates.length !== 0) {\n                console.error('Invalid timeseries', primarySeries);\n            }\n            this.x.domain(this.xt.domain());\n            this.xt = this.x;\n            return;\n        }\n\n        // Enforce minimum date\n        if(this.minDate) {\n            xExtent[0] = this.minDate;\n        }\n\n        // Enforce maximum date\n        if(this.maxDate) {\n            xExtent[1] = this.maxDate;\n        }\n\n        // Enforce minimum scale (especially when the timeseries contains a single datapoint)\n        const diff = xExtent[1].getTime() - xExtent[0].getTime();\n        const minDiff = this.minZoomDays * 24 * 60 * 60 * 1000;\n        if(diff < minDiff) {\n            const delta = 0.5 * (minDiff - diff); // Delta is the amount of time missing before and after\n            xExtent[0] = new Date(xExtent[0].getTime() - delta);\n            xExtent[1] = new Date(xExtent[0].getTime() + delta);\n        }\n\n        this.x.domain(xExtent);\n        this.xt = this.x;\n        this.y.domain([0, yMax*1.1]);\n        \n        // Fire an initial rangeInit event so that the parent can initialize the currentRange property\n        // The setTimeout prevents \"expressionChangedAfterCheck\" error (since the parent then updates the min/max dates)\n        setTimeout(() => this.rangeInit.next(this.xt.domain()));\n    }\n\n    /**\n     * Update the x and y axes\n     */\n    protected updateAxes(){\n        this.drawXAxis();\n        this.drawYAxis();\n    }\n\n    /**\n     * The events are drawn in the template directly. This method simply\n     * updates the grouping of events (when they are close to each other)\n     */\n    protected updateEvents() {\n        this.groupedEvents = this.groupEvents(5);\n    }\n\n    /**\n     * Update/reset the zoom behavior when new data comes in (and new scales, axes...)\n     */\n    protected updateZoom() {\n        \n        if(!this.zoomable) {\n            return;\n        }\n\n        // Reset the previous zoom !\n        if(this.zoomBehavior){\n            this.zoomBehavior.on(\"zoom\", null);\n            this.zoomBehavior.on(\"end\", null);\n            this.zoomBehavior.transform(this.brush$, d3.zoomIdentity);\n        }\n        \n        // Compute the minimum and maximum zoom\n        const xDomain = this.x.domain();\n        const scaleExtent = (xDomain[1].getTime() - xDomain[0].getTime()) / 86400000; // current number of days on the scale\n\n        // Create the behavior\n        this.zoomBehavior = d3.zoom()\n            .extent([[0, 0], [this.innerWidth, this.innerHeight]])\n            .scaleExtent([scaleExtent/this.maxZoomDays, scaleExtent/this.minZoomDays])\n            .on(\"zoom\", () => this.onZoom())\n            .on(\"end\", () => this.onZoomEnd());\n        \n        // Apply on to the brush element\n        this.brush$\n            .call(this.zoomBehavior)\n            .on(\"mousedown.zoom\", null) // Deactivate mouse event (taken by brush)\n            .on(\"touchstart.zoom\", null)\n            .on(\"touchmove.zoom\", null)\n            .on(\"touchend.zoom\", null);\n        \n    }\n\n    /**\n     * Updates the brush (or hides it if no currentSelection),\n     * following a change of x scale.\n     */\n    protected updateBrush() {\n        if(this.currentSelection) {\n            const selection: [number, number] = [this.xt(this.currentSelection[0]), this.xt(this.currentSelection[1])];\n            this.brush$.call(this.brushBehavior.move, selection);\n        }\n        else {\n            this.brush$.call(this.brushBehavior.move, null);\n        }\n    }\n\n    /**\n     * This method tests whether the input selection is different from the currentSelection\n     * and updates it. It returns true if there is actually a change.\n     */\n    protected updateSelection(): boolean {\n        const change = this.checkSelectionChange(this.selection, this.currentSelection);\n        this.currentSelection = this.selection;\n        return change;\n    }\n\n    /**\n     * Recreate the x scale and axes (in the event of a language change)\n     */\n    protected updateXAxis(){        \n        this.x = d3.scaleUtc()\n            .domain(this.x.domain())\n            .range(this.x.range());\n        \n        this.xt = d3.scaleUtc()\n            .domain(this.xt.domain())\n            .range(this.xt.range());\n\n        this.drawXAxis();\n    }\n\n    /**\n     * Draws the X axis\n     */\n    protected drawXAxis() {\n        const nTicks = Math.round(this.width / 100);\n        this.xAxis$.call(d3.axisBottom(this.xt).ticks(nTicks));\n        this.xAxis$.selectAll(\".domain\").remove(); // Remove the axis line\n    }\n\n    /**\n     * Draws the Y axis\n     */\n    protected drawYAxis() {\n        const nTicks = Math.round(this.height / 40);\n\n        const yAxisTicks = this.y.ticks(nTicks)\n            .filter(tick => Number.isInteger(tick)); // Keep only integer ticks https://stackoverflow.com/questions/13576906/d3-tick-marks-on-integers-only/56821215\n\n        const yAxis = d3.axisLeft<number>(this.y)\n            .tickValues(yAxisTicks)\n            .tickFormat(d3.format(\"~s\")); //https://github.com/d3/d3-format\n        this.yAxis$.call(yAxis);\n        this.yAxis$.selectAll(\".domain\").remove(); // Remove the axis line\n    }\n    \n    /**\n     * Updates the display of the brush's grips when the brush has moved\n     * @param selection \n     */\n    protected updateGrips(selection: [number, number] | null) {\n        if (!selection) {\n            this.grips$.attr(\"display\", \"none\");\n        }\n        else {\n            this.grips$\n                .attr(\"display\", null)\n                .attr(\"transform\", (d, i) => \"translate(\" + selection[i] + \")\");\n            this.grips$.selectAll<SVGTextElement, {type:string}>('.grip-text')\n                .text(d => this.intlService.formatDate(this.xt.invert(selection[d.type === 'w'? 0 : 1])));\n        }\n    }\n\n\n    // Interaction callbacks\n\n    onBrush() {\n        this.turnoffTooltip();\n        this.brushSelection = d3.brushSelection(this.gbrush.nativeElement) as [number, number] | null;\n        this.updateGrips(this.brushSelection);\n    }\n\n    onBrushEnd(){\n        this.brushing = false;\n        this.onBrush();\n        const newSelection = this.brushSelection?.sort((a,b)=>a-b).map(this.xt.invert);\n        if(this.checkSelectionChange(this.currentSelection, newSelection)) {\n            this.currentSelection = newSelection;\n            this.selectionChange.next(this.currentSelection);\n        }\n    }    \n\n    onZoom(){\n\n        this.turnoffTooltip();\n\n        this.zooming = true;\n\n        // Create a transformed scale without modifying the original (to enforce the limit of scaleExtent)\n        const transform = d3.zoomTransform(this.brush$.node() as Element);\n        this.xt = transform.rescaleX(this.x);\n\n        // Redraw the axis\n        this.drawXAxis();\n            \n        // Update the brush position\n        if(this.currentSelection){\n            const selection: [number, number] = [this.xt(this.currentSelection[0]), this.xt(this.currentSelection[1])];\n            this.brushBehavior.move(this.brush$, selection);\n        }\n\n    }\n\n    onZoomEnd(){\n        this.zooming = false;\n\n        // At the end of a zoom, we need to reorganize the grouping of events\n        this.updateEvents();\n\n        // Fire an event\n        this.rangeChange.next(this.xt.domain());\n    }\n\n    /**\n     * Redraw the simple tooltip (vertical line)\n     */\n    onMousemove() {\n        if(!this.tooltipItem && this.showTooltip) {\n            this.tooltipX = d3.mouse(this.gbrush.nativeElement)[0];\n        }\n    }\n\n    /**\n     * Remove the simple tooltip (vertical line)\n     */\n    onMouseout() {\n        if(!this.tooltipItem) {\n            this.tooltipX = undefined\n        }\n    }\n\n    /**\n     * Responds to a click on an event (triangle) by essentially turning tooltip on/off\n     * @param event \n     */\n    onEventClick(event: TimelineEvent[]) {\n\n        if(this.tooltipItem === event) {\n            this.turnoffTooltip();\n        }\n\n        else {\n\n            if(this.tooltipItem) {\n                this.turnoffTooltip();\n            }\n\n            this.tooltipItem = event;\n            this.tooltipX = this.xt(event[0].date);\n\n            // Since we use viewBox to auto-adjust the SVG to the container size, we have to\n            // convert from the SVG coordinate system to the HTML coordinate system\n            const x = this.margin.left + this.tooltipX;\n            const actualWidth = (this.el.nativeElement as HTMLElement).offsetWidth;\n            const scale = actualWidth / this.width;\n            const relativeX = x / this.width;\n\n            // Tooltip to the right\n            if(relativeX < 0.5) {\n                this.tooltipOrientation = \"right\";\n                this.tooltipLeft = scale * x;\n            }\n            // Tooltip to the left\n            else {\n                this.tooltipOrientation = \"left\";\n                this.tooltipRight = actualWidth - scale * x;\n            }\n            this.tooltipTop = scale * (this.margin.top + 0.3*this.innerHeight); // Align tooltip arrow\n\n        }\n    }\n\n    /**\n     * Turns off the tooltip\n     */\n    turnoffTooltip = () => {\n        if(this.tooltipItem) {\n            this.tooltipItem = undefined;\n            this.tooltipX = undefined;\n        }\n    }\n\n    ngOnDestroy(){\n        this.intlSubscription.unsubscribe();\n    }\n\n    // Utilities\n\n    /**\n     * Transforms the input list of events into a list of list, by grouping events within a bin\n     * when their dates are close together. This closeness is measured in \"pixel per event\".\n     * Note: this currently uses a histogram-like algorithm, which could probably be improved (clustering?)\n     * @param pixPerEvent \n     */\n    protected groupEvents(pixPerEvent: number): TimelineEvent[][] {\n        const events: TimelineEvent[][] = [];\n\n        if(this.events) {\n            const nbins = Math.floor(this.innerWidth / pixPerEvent);\n            const domain = this.xt.domain();\n            const timeinterval = (domain[1].getTime() - domain[0].getTime()) / nbins;\n            this.events.concat()\n                .sort((a,b) => a.date.getTime() - b.date.getTime())\n                .forEach(event => {\n                    if(events.length === 0) {\n                        events.push([event]);\n                    }\n                    else {\n                        const last = events[events.length-1];\n                        const lastbin = Math.floor(last[0].date.getTime() / timeinterval);\n                        const bin = Math.floor(event.date.getTime() / timeinterval);\n                        if(bin === lastbin) {\n                            last.push(event);\n                        }\n                        else {\n                            events.push([event]);\n                        }\n                    }\n                });\n        }\n\n        return events;\n    }\n\n    /**\n     * Return true if there are actual changes in the data\n     * (in particular will ignore data refresh which change nothing)\n     * @param change \n     */\n    protected checkDataChanges(change: SimpleChange): boolean {\n        const previousValue = change.previousValue as TimelineSeries[] | undefined;\n        const currentValue = change.currentValue as TimelineSeries[] | undefined;\n        \n        // Ignore null/undefined difference cause by | async\n        // See: https://github.com/angular/angular/issues/16982\n        if(currentValue === null && previousValue === undefined || currentValue === undefined && previousValue === null)\n            return false;\n\n        // Else, if one of them is null/undefined (or difference in length), there's clearly a change\n        if(!previousValue || !currentValue || previousValue.length !== currentValue.length)\n            return true;\n        \n        // If both defined and same size, we need to compare the data piece by piece\n        for(let i=0; i<currentValue.length; i++) {\n\n            const previousSeries = previousValue[i];\n            const currentSeries = currentValue[i];\n            if(previousSeries.name !== currentSeries.name \n                || previousSeries.primary !== currentSeries.primary \n                || previousSeries.areaStyles !== currentSeries.areaStyles\n                || previousSeries.lineStyles !== currentSeries.lineStyles\n                || previousSeries.dates.length !== currentSeries.dates.length) {\n                return true;\n            }\n            for(let j=0; j<previousSeries.dates.length; j++) {\n                if(previousSeries.dates[j].value !== currentSeries.dates[j].value\n                    || previousSeries.dates[j].date.getTime() !== currentSeries.dates[j].date.getTime()){\n                    return true;\n                }                \n            }\n        }\n        \n        return false;\n    }\n\n    /**\n     * Compare the date selections with a second of tolerance (to handle interpolation errors)\n     * @param selection1 \n     * @param selection2 \n     */\n    protected checkSelectionChange(selection1: Date[] | undefined, selection2: Date[] | undefined): boolean {\n        return !selection1 && !!selection2 ||\n              !!selection1 && !selection2 ||\n              !!selection1 && !!selection2 && \n                (Math.floor((selection1[0].getTime() - selection2[0].getTime())/1000) !== 0 ||\n                 Math.floor((selection1[1].getTime() - selection2[1].getTime())/1000) !== 0);\n    }\n    \n    /**\n     * Returns a string containing the path coordinates of a \"grip\" to draw on each side of\n     * the brush object\n     */\n    protected drawGrips = (d) => {\n        const gripHeight = Math.min(10, Math.max((this.innerHeight) / 8, 4));\n        const gripWidth = gripHeight;\n\n        const x = -gripWidth / 2;\n        const y = this.innerHeight / 2 - gripHeight / 2;\n\n        const path =\n            'M ' + x + ' ' + y +\n            ' l ' + -gripWidth + ' ' + gripHeight / 2 +\n            ' l ' + gripWidth + ' ' + gripHeight / 2 + ' z ' +\n            'M ' + -x + ' ' + y +\n            ' l ' + gripWidth + ' ' + gripHeight / 2 +\n            ' l ' + -gripWidth + ' ' + gripHeight / 2 + ' z ' +\n            'M 0 ' + 0 + ' l 0 ' + this.innerHeight + ' z ';\n        return path;\n    }\n\n    /**\n     * Returns the size of the triangle drawn for one event (or a group of events)\n     * @param events \n     */\n    eventSize(events: TimelineEvent[]): number {\n        if(events!==this.tooltipItem) {\n            return events[0].size || 6;\n        }\n        else {\n            return events[0].sizeOpened || (events[0].size || 6)*2;\n        }\n    }\n\n    /**\n     * Return a string containing the path coordinates of a triangle for a given event (or group of events)\n     * @param events \n     * @param size \n     */\n    drawEvents(events: TimelineEvent[], size: number): string {\n        const x = this.xt(events[0].date);\n        return 'M ' + x + ' ' + (this.innerHeight - 3*size/2) +\n            ' l ' + -size + ' ' + (3*size/2) +\n            ' l ' + (2*size) + ' ' + 0 + ' z ';\n    }\n}","<svg [attr.viewBox]=\"'0 0 '+width+' '+height\">\n\n    <g [attr.transform]=\"'translate('+margin.left+','+ margin.top +')'\">\n\n        <defs>\n            <!-- Clip path truncates overflowing data (important for zoom) -->\n            <clipPath [attr.id]=\"'clip'+instance\">\n                <rect [attr.y]=\"-margin.top\" [attr.width]=\"innerWidth\" [attr.height]=\"height - margin.bottom\"></rect>\n            </clipPath>\n            <!-- Mask limits opacity of non-selected areas -->\n            <mask [attr.id]=\"'mask'+instance\" *ngIf=\"!!brushSelection && !!data && !! data.length\">\n                <rect *ngIf=\"brushSelection[0] > 0\" \n                    x=\"0\" [attr.y]=\"-margin.top\" \n                    [attr.width]=\"brushSelection[0]\" [attr.height]=\"height - margin.bottom\"\n                    fill=\"white\" opacity=\"0.5\"/>\n                <rect [attr.x]=\"brushSelection[0]\" [attr.y]=\"-margin.top\"\n                    [attr.width]=\"brushSelection[1] - brushSelection[0]\" [attr.height]=\"height - margin.bottom\"\n                    fill=\"white\"/>\n                <rect *ngIf=\"innerWidth > brushSelection[1]\" \n                    [attr.x]=\"brushSelection[1]\" [attr.y]=\"-margin.top\"\n                    [attr.width]=\"innerWidth - brushSelection[1]\" [attr.height]=\"height - margin.bottom\"\n                    fill=\"white\" opacity=\"0.5\"/>\n            </mask>\n        </defs>\n\n        <!-- Timeline series -->\n        <g class=\"areas\" [attr.clip-path]=\"'url(#clip'+instance+')'\" [attr.mask]=\"'url(#mask'+instance+')'\">\n            <g *ngFor=\"let timeline of data\" class=\"series\">\n                <path class=\"area\" [attr.d]=\"area(timeline.dates)\" [ngStyle]=\"timeline.areaStyles\"></path>\n                <path class=\"line\" [attr.d]=\"line(timeline.dates)\" [ngStyle]=\"timeline.lineStyles\"></path>\n            </g>\n        </g>\n\n        <!-- Tooltip line -->\n        <ng-container *ngIf=\"showTooltip && tooltipX && !zooming && !brushing && !currentSelection\">\n            <line [attr.x1]=\"tooltipX\" [attr.x2]=\"tooltipX\" y1=\"0\" [attr.y2]=\"innerHeight\" class=\"tooltip-line\"></line>\n            <text [attr.x]=\"tooltipX < innerWidth*0.75 ? tooltipX + 5 : tooltipX - 5\" y=\"10\"\n                [attr.text-anchor]=\"tooltipX < innerWidth*0.75 ? 'start' : 'end'\" class=\"tooltip-text\">\n                {{ xt.invert(tooltipX) | sqDate }}\n            </text>\n        </ng-container>\n        \n        <!-- X Axis (built in the controler) -->\n        <g #xAxis class=\"x axis\" [attr.transform]=\"'translate(0,'+ innerHeight +')'\"></g>\n\n        <!-- Y Axis (built in the controler) -->\n        <g #yAxis class=\"y axis\"></g>\n\n        <!-- Brush and Zoom element -->\n        <g #brush class=\"brush\" [attr.clip-path]=\"'url(#clip'+instance+')'\" [attr.display]=\"(!data || !data.length)? 'none' : null\"></g>\n\n        <!-- Timeline events -->\n        <g class=\"events\" [attr.clip-path]=\"'url(#clip'+instance+')'\" [attr.mask]=\"'url(#mask'+instance+')'\">\n            <path *ngFor=\"let events of groupedEvents\" class=\"event\" \n                [attr.d]=\"drawEvents(events, eventSize(events))\" \n                [ngStyle]=\"events[0].styles\" \n                (click)=\"onEventClick(events)\"></path>\n        </g>\n\n    </g>\n\n</svg>\n\n<!-- Tooltip -->\n<sq-tooltip *ngIf=\"tooltipItem\"\n            [orientation]=\"tooltipOrientation\" [left]=\"tooltipLeft\" [right]=\"tooltipRight\" [top]=\"tooltipTop\" [theme]=\"theme\">\n    <div class=\"list-group list-group-flush\">\n        <ng-container *ngFor=\"let event of tooltipItem\">\n            <ng-container *ngIf=\"tooltipTpl\">\n                <ng-container *ngTemplateOutlet=\"tooltipTpl; context:{$implicit: event, close: turnoffTooltip}\"></ng-container>\n            </ng-container>\n            <div *ngIf=\"!tooltipTpl\" class=\"list-group-item\" style=\"max-width: 300px;\">\n                <span class=\"small text-muted\">{{ event.date | sqDate }}</span>\n                <div class=\"text-truncate\">{{ event.display }}</div>\n            </div>\n        </ng-container>\n    </div>\n</sq-tooltip>","import {Utils, MapOf} from \"@sinequa/core/base\";\nimport {IQuery, Select, Open, SpellingCorrectionMode, AggregationOptions} from \"@sinequa/core/web-services\";\n\n\nexport const advancedFacetPrefix = \"advanced_\";\n\n/**\n * Represents a query for retrieving search results from a Sinequa search engine.\n *\n * The properties are described in the {@link IQuery} interface\n */\nexport class Query implements IQuery {\n    text?: string;\n    action: \"\" | \"search\" | \"open\" | \"aggregate\";\n    select?: Select[];\n    open?: Open[];\n    page?: number;\n    pageSize?: number;\n    tab?: string;\n    scope?: string;\n    sort?: string;\n    basket?: string;\n    isFirstPage?: boolean;\n    strictRefine?: boolean;\n    globalRelevance?: number;\n    questionLanguage?: string;\n    questionDefaultLanguage?: string;\n    spellingCorrectionMode?: SpellingCorrectionMode;\n    spellingCorrectionFilter?: string;\n    documentWeight?: string;\n    textPartWeights?: string;\n    relevanceTransforms?: string;\n    removeDuplicates?: boolean;\n    queryId?: string;\n    aggregations: MapOf<AggregationOptions> | string[];\n    orderBy?: string;\n    groupBy?: string;\n\n    /**\n     * Return a copy of the passed query\n     */\n    static copy(query: Query): Query {\n        if (!query) {\n            return query;\n        }\n        return query.copy();\n    }\n\n    constructor(\n        public name: string) {\n    }\n\n    /**\n     * Return `true` if the query has fulltext search elements\n     */\n    get hasRelevance(): boolean {\n        if (!Utils.isEmpty(this.text)) {\n            return true;\n        }\n        if (this.findSelect(\"refine\")) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Add a select filter to the query\n     *\n     * @param expr The fielded search expression to filter the results\n     * @param facet The name of the associated facet\n     */\n    addSelect(expr: string, facet?: string): number {\n        return this.pushSelect({\n            expression: expr,\n            facet: facet || \"\"\n        });\n    }\n\n    /**\n     * Adds a new `Select` object to the end of the query's `selects`\n     */\n    pushSelect(select: Select): number {\n        if (!this.select) {\n            this.select = [];\n        }\n        return this.select.push(select);\n    }\n\n    /**\n     * Remove the last `Select` object from the `selects` and return it\n     */\n    popSelect(): Select | undefined {\n        if (!this.select) {\n            return undefined;\n        }\n        return this.select.pop();\n    }\n\n    /**\n     * Remove the `Select` object identified by `indexOrFacet`\n     *\n     * @param indexOrFacet either an index in the `selects` array or a facet name\n     * @param all If `true` and `indexOrFacet` is a facet name then all `Select` objects with a matching facet name will be removed\n     */\n    removeSelect(indexOrFacet: number | string, all = false): void {\n        if (!this.select) {\n            return;\n        }\n        if (Utils.isString(indexOrFacet)) {\n            // indexOrFacet is a facet name\n            for (let i = this.select.length - 1; i >= 0; i--) {\n                const _select = this.select[i];\n                if (Utils.eqNC(_select.facet, indexOrFacet)) {\n                    this.select.splice(i, 1);\n                    if (this.select.length === 0) {\n                        delete this.select; // Clean the query if no more select\n                        return;\n                    }\n                    if (!all) {\n                        return;\n                    }\n                }\n            }\n        }\n        else {\n            if (indexOrFacet < 0 || indexOrFacet >= this.select.length) {\n                return;\n            }\n            this.select.splice(indexOrFacet, 1);\n            if (this.select.length === 0) {\n                delete this.select;\n            }\n        }\n    }\n\n    /**\n     * Replace a `Select` with another\n     *\n     * @param index The index in the `selects` array of the `Select to replace\n     * @param select The `Select` to use as a replacement\n     */\n    replaceSelect(index: number, select: Select) {\n        if (!this.select) {\n            return;\n        }\n        this.select.splice(index, 1, select);\n    }\n\n    /**\n     * Find the index of the nth `Select` object matching the passed facet name\n     *\n     * @param facet A facet name\n     * @param ordinal Specifies which `Select` object to retrieve among selects with the same facet name\n     */\n    findSelectIndex(facet: string, ordinal = 0): number {\n        if (!this.select) {\n            return -1;\n        }\n        let index = 0;\n        let facetOrdinal = 0;\n        let facetIndex = -1;\n        for (const select of this.select) {\n            if (Utils.eqNC(facet, select.facet)) {\n                facetIndex = index;\n                if (facetOrdinal === ordinal) {\n                    break;\n                }\n                facetOrdinal++;\n            }\n            index++;\n        }\n        return facetIndex;\n    }\n\n    /**\n     * Find the first `Select` matching the passed facet name\n     *\n     * @param facet A facet name\n     * @param fromEnd If `true` start searching backwards from the last `Select`\n     */\n    findSelect(facet: string, fromEnd = true): Select | undefined {\n        const facetSelectIndex = this.findSelectIndex(facet, fromEnd ? -1 : 0);\n        return facetSelectIndex >= 0 ? this.select && this.select[facetSelectIndex] : undefined;\n    }\n\n    /**\n     * Return the last `Select` object\n     */\n    lastSelect(): Select | undefined {\n        if (!this.select) {\n            return undefined;\n        }\n        return this.select[this.select.length - 1];\n    }\n\n    /**\n     * Return the number of `Select` objects\n     */\n    get selectLength(): number {\n        if (!this.select) {\n            return 0;\n        }\n        return this.select.length;\n    }\n\n    /**\n     * Add an `Open` filter to the query. This is typically used to load children of tree nodes\n     *\n     * @param expr The fielded search expression specifying the node to expand\n     * @param aggregation The associated aggregation\n     */\n    addOpen(expr: string, aggregation: string) {\n        if (!this.open || !Utils.isArray(this.open)) {\n            this.open = [];\n        }\n        return this.open.push({\n            expression: expr,\n            aggregation\n        });\n    }\n\n    /**\n     * Clear all fields in the query except the name\n     */\n    clear(): void {\n        const name = this.name;\n        Utils.clearObject(this);\n        this.name = name;\n    }\n\n    /**\n     * Remove advanced search select(s) from the query\n     */\n    toStandard(): Query {\n        const advancedSelect = this.select?.filter(\n          (select: Select) => select.facet && select.facet.startsWith(advancedFacetPrefix)\n        )\n        advancedSelect?.forEach(\n          (select) => this.removeSelect(select.facet, true)\n        )\n        return this;\n    }\n\n    /**\n     * Return a copy of this query\n     */\n    copy(): Query {\n        const query = new Query(this.name);\n        Utils.copy(this, query);\n        return query;\n    }\n\n    /**\n     * Return a copy of this query but without any advanced select\n     */\n    copyStandard(): Query {\n        const query = this.copy();\n        return query.toStandard();\n    }\n\n    /**\n     * Remove all properties from the query except advanced search select(s) and optionally `text`\n     *\n     * @param withText If `true` do not remove the `text` field\n     */\n    toAdvanced(withText: boolean = false): Query {\n        for (const property in this) {\n            if (this.hasOwnProperty(property) && !Utils.eqNC(property, \"select\") && (!withText || !Utils.eqNC(property, \"text\"))) {\n                delete this[property];\n            }\n        }\n        const notAdvancedSelect = this.select?.filter(\n          (select: Select) => select.facet && !select.facet.startsWith(advancedFacetPrefix)\n        )\n        notAdvancedSelect?.forEach(\n          (select) => this.removeSelect(select.facet)\n        )\n        return this;\n    }\n\n    /**\n     * Return a copy of this query including just the advanced fields and optionally `text`\n     *\n     * @param withText If `true` include the `text` field\n     */\n    copyAdvanced(withText: boolean = false): Query {\n        const query = this.copy();\n        return query.toAdvanced(withText);\n    }\n\n    /**\n     * Tests whether this query has advanced search selections\n     */\n    hasAdvanced(): boolean {\n        return !!this.select?.find(s => s.facet && s.facet.startsWith(advancedFacetPrefix));\n    }\n\n    /**\n     * Initialize this query from the passed JSON string\n     *\n     * @param jquery JSON in string form\n     */\n    fromJson(jquery: string): Query {\n        this.clear();\n        const query = Utils.fromJson(jquery);\n        // convert select and open\n        const select = query.select;\n        if (Utils.isArray(select)) {\n            query.select = select.map<Select>((value: Select | string[]) => {\n                if (Utils.isArray(value)) {\n                    return {\n                        expression: value[0],\n                        facet: value[1]\n                    };\n                }\n                else {\n                    return value;\n                }\n            });\n        }\n        const open = query.open;\n        if (Utils.isArray(open)) {\n            query.open = open.map<Open>((value: Open | string[]) => {\n                if (Utils.isArray(value)) {\n                    return {\n                        expression: value[0],\n                        aggregation: value[1]\n                    };\n                }\n                else {\n                    return value;\n                }\n            });\n        }\n        Utils.extend(this, query);\n        return this;\n    }\n\n    /**\n     * Returns a JSON representation of this query where `Select` and `Open` objects are expressed as tuple arrays for conciseness\n     */\n    toJsonForQueryString(): string {\n        const o: any = {};\n        Utils.merge(o, this);\n        if (this.select) {\n            o.select = this.select.map<string[]>((value) => {\n                const a = [value.expression];\n                if (value.facet) {\n                    a.push(value.facet);\n                }\n                return a;\n            });\n        }\n        if (this.open) {\n            o.open = this.open.map<string[]>((value) => [value.expression, value.aggregation]);\n        }\n        return Utils.toJson(o);\n    }\n\n    /**\n     * Return a hash value of this query that excludes any pagination parameters\n     */\n    hash(): string {\n        const obj: any = {};\n        Utils.mergeAndSort(obj, this);\n        // remove pagination\n        delete obj.page;\n        delete obj.pageSize;\n        const str = Utils.toJson(obj);\n        return Utils.sha512(str);\n    }\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'sq-alert-message',\n  templateUrl: './alert-message.component.html'\n})\nexport class BsAlertMessageComponent {\n  @Input() message: string;\n}\n","<div class=\"alert alert-danger ml-3 mr-3 p-3 text-center\" role=\"alert\">\n  {{ message }}\n</div>","import { Component, Input } from '@angular/core';\nimport { Results, ExportSourceType } from \"@sinequa/core/web-services\";\nimport { SavedQueriesService } from \"../../saved-queries.service\";\nimport { SelectionService } from \"@sinequa/components/selection\";\nimport { Action } from \"@sinequa/components/action\";\n\n\n\n/**\n * Toolbar component for Export query feature.\n *\n */\n@Component({\n    selector: 'sq-query-exporter',\n    templateUrl: './query-exporter.html'\n})\nexport class BsQueryExporter {\n\n    @Input() results: Results;\n    @Input() rightAligned: boolean;\n\n    public exportAction: Action;\n\n    constructor(\n        private selectionService: SelectionService,\n        private savedQueriesService: SavedQueriesService\n    ) {\n        this.exportAction = new Action({\n            icon: 'fas fa-download',\n            title: 'msg#exportQuery.btnTitle',\n            action: (item: Action, event: Event) => {\n                this.export();\n            }\n        });\n    }\n\n    /**\n     * Check if the client has selected some records.\n     *\n     * @returns true if the client has selected some records.\n     */\n    public hasSelectedRecords(): boolean {\n        return this.selectionService.haveSelectedRecords;\n    }\n\n    /**\n     * Generic export function.\n     * <p>\n     * Opens up a dialog to let user choose the export source, export format and other parameters.\n     *\n     * @memberof QueryExporter\n     */\n    public export(): void {\n\n        this.savedQueriesService.exportModal(\n            this.hasSelectedRecords() ? ExportSourceType.Selection : ExportSourceType.Result);\n\n    }\n\n}\n","<div [sq-action-buttons]=\"{\n        items: [exportAction],\n        autoAdjust: true,\n        rightAligned: rightAligned\n    }\">\n</div>","import {Component, OnInit, OnDestroy, ViewChild, ElementRef, DoCheck} from '@angular/core';\nimport {FormBuilder, FormGroup, FormControl} from \"@angular/forms\";\nimport {SearchService} from '@sinequa/components/search';\nimport {LoginService} from '@sinequa/core/login';\nimport {AppService} from '@sinequa/core/app-utils';\nimport {Subscription} from 'rxjs';\nimport {FEATURES} from '../../config';\nimport {ParseResult} from '@sinequa/components/autocomplete';\nimport {AutocompleteExtended} from './autocomplete-extended.directive';\nimport {UserPreferences} from '@sinequa/components/user-settings';\nimport {FirstPageService} from '@sinequa/components/search';\nimport {AdvancedService} from '@sinequa/components/advanced';\nimport {take} from 'rxjs/operators';\nimport {ActivatedRoute} from '@angular/router';\nimport {VoiceRecognitionService} from '@sinequa/components/utils';\n\n@Component({\n  selector: 'app-search-form',\n  templateUrl: './search-form.component.html',\n  styleUrls: ['./search-form.component.scss']\n})\nexport class SearchFormComponent implements OnInit, DoCheck, OnDestroy {\n  searchControl: FormControl;\n  form: FormGroup;\n  autofocus = 0;\n\n  /** Expression from the query selects, if any (\"simple\"/\"selects\" field search mode) */\n  fieldSearchExpression?: string;\n\n  /** Result of query parsing (\"advanced\" field search mode) */\n  parseResult?: ParseResult;\n\n  /** A reference to the AutocompleteExtended directive, needed to get the field search selections, if any */\n  @ViewChild(AutocompleteExtended) autocompleteDirective: AutocompleteExtended;\n\n  @ViewChild('searchInput') searchInput: ElementRef;\n\n  // Advanced search flags\n  showAdvancedSearch: boolean;\n  initAdvanced: boolean;\n  enableAdvancedForm = false; // Show the advanced form button or not\n\n  /** Define if a filter, NOT belonging to fielded & advanced search, is currently applied to the searchService.query */\n  isFiltering = false;\n\n  /** Specify if already applied filters should be kept or not while chaining searches */\n  keepFilters = false;\n  keepFiltersTitle = 'msg#searchForm.notKeepFilters';\n  enableKeepFilters = false; // Show the \"keep filters\" button or not\n\n  /** USED ALONG WITH keepFilters context, to optionally reset the advanced-search or not */\n  keepAdvancedSearchFilters = false;\n\n  /** Define if should stay on the same tab even after a new search */\n  keepTab = false;\n\n  /** Voice recognition */\n  voiceRecognitionState = false;\n  enableVoiceRecognition = false; // Show the voice recognition button or not\n\n  hasScroll = false;\n  @ViewChild('searchContainer') searchContainer: ElementRef;\n  private timeout: any;\n\n  private subscriptions: Subscription[] = [];\n\n  constructor(\n    public voiceService: VoiceRecognitionService,\n    public searchService: SearchService,\n    public loginService: LoginService,\n    private formBuilder: FormBuilder,\n    public appService: AppService,\n    public prefs: UserPreferences,\n    public firstPageService: FirstPageService,\n    public advancedService: AdvancedService,\n    public route: ActivatedRoute) {\n\n    this.voiceService.init();\n\n    this.subscriptions.push(...[\n        this.voiceService.started.subscribe(state => {\n        this.voiceRecognitionState = state;\n      }),\n        this.voiceService.text.subscribe(value => {\n        this.searchControl.setValue(value);\n      })\n    ]);\n\n  }\n\n  /**\n   * Initialization of the form\n   */\n  ngOnInit() {\n    this.searchControl = new FormControl('');\n    this.form = this.formBuilder.group({\n      search: this.searchControl\n    });\n\n    // Every time the query changes, we want to update the search form\n    this.subscriptions.push(this.searchService.queryStream.subscribe(query => {\n      // Update main search bar\n      this.searchControl.setValue(this.searchService.query?.text || '');\n      this.fieldSearchExpression = query?.findSelect(\"search-form\")?.expression;\n      this.autofocus++;\n\n      // Update advanced form\n      this.form.get('treepath')?.setValue(this.advancedService.getValue('treepath'));\n      this.form.get('authors')?.setValue(this.advancedService.getValue('authors'));\n      this.form.get('size')?.setValue(this.advancedService.getRangeValue('size'));\n      this.form.get('modified')?.setValue(this.advancedService.getRangeValue('modified'));\n      this.form.get('person')?.setValue(this.advancedService.getValue('person'));\n      this.form.get('docformat')?.setValue(this.advancedService.getValue('docformat'));\n\n      // Update the filtering status\n      this._updateFilteringStatus();\n\n      // Check user preferences regarding keeping filters\n      if(typeof this.prefs.get('keep-filters-state') !== 'undefined') {\n        this.keepFilters = this.prefs.get('keep-filters-state');\n        this.keepFiltersTitle = this.keepFilters ? 'msg#searchForm.keepFilters' : 'msg#searchForm.notKeepFilters';\n      }\n    }));\n\n    // Initialize the search form options (either now, or when login is complete)\n    if(this.appService.app) {\n      this.setOptions();\n    }\n    else {\n      this.subscriptions.push(this.loginService.events.subscribe(event => {\n        if(this.appService.app) {\n          this.setOptions();\n        }\n      }));\n    }\n  }\n\n  ngDoCheck() {\n    // Check if the input has a scrollbar\n    this.hasScroll = this.searchContainer?.nativeElement.scrollWidth > this.searchContainer?.nativeElement.clientWidth;\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.map(item => item.unsubscribe());\n  }\n\n  setOptions() {\n    const features = this.appService.app?.data?.features as string[] || FEATURES;\n    features.forEach(feature =>{\n      switch(feature){\n        case \"advanced-form\": this.enableAdvancedForm = true; break;\n        case \"keep-advanced-form-filters\": this.keepAdvancedSearchFilters = true; break;\n        case \"keep-tab\": this.keepTab = true; break;\n        case \"keep-filters\": {\n          // Initialize keep filter flag, if not already in preferences\n          if(typeof this.prefs.get('keep-filters-state') === 'undefined') {\n            this.keepFilters = true;\n          }\n          break;\n        }\n        case \"toggle-keep-filters\": this.enableKeepFilters = true; break;\n        case \"voice-recognition\": this.enableVoiceRecognition = true; break;\n      }\n    });\n  }\n\n  /**\n   * Trigger a search query via the search service\n   */\n  search() {\n    if(this.loginService.complete && this.form.valid) {\n\n      /** Hide autocomplete suggestions */\n      this.searchInput.nativeElement.blur();\n\n      /** Store relevant filters (tab ...)*/\n      const queryTab = this.searchService.query.tab;\n\n      /** If this.keepFilters = false, clear the query and reset all its filters. */\n      if (!this.keepFilters) {\n        this.searchService.clearQuery();\n\n        /** MUST explicitly reset the advanced form if this.keepAdvancedSearchFilters = false */\n        if (!this.keepAdvancedSearchFilters && !this.showAdvancedSearch) {\n          this.clearAdvancedForm();\n        }\n      }\n      \n      /** Close the advanced form */\n      this.showAdvancedSearch = false;\n\n      /** Update the new query with entered text */\n      this.searchService.query.text = this.searchControl?.value || \"\";\n\n      /** Update advanced search filters */\n      this.advancedService.setSelect('treepath', this.form.get('treepath')?.value);\n      this.advancedService.setSelect('authors', this.form.get('authors')?.value);\n      this.advancedService.setRangeSelect('size', this.form.get('size')?.value);\n      this.advancedService.setRangeSelect('modified', this.form.get('modified')?.value);\n      this.advancedService.setSelect('person', this.form.get('person')?.value);\n      this.advancedService.setSelect('docformat', this.form.get('docformat')?.value);\n\n      /** Add select from the fielded search (\"selects\", aka \"simple\" mode) */\n      if(this.getMode() === \"selects\") {\n        this.searchService.query.removeSelect(\"search-form\"); // Prevent having multiple instance if this.keepFilters = true\n        const expr = this.autocompleteDirective.getFieldSearchExpression();\n        if(expr) {\n          this.searchService.query.addSelect(expr, \"search-form\");\n        }\n      }\n\n      // if this.keepTab, stay on the same tab even after a new search\n      if (this.keepTab && !!queryTab) {\n        this.searchService.query.tab = queryTab;\n      }\n\n      /** Trigger the search with the new criteria */\n      this.searchService.searchText(\"search\");\n    }\n  }\n\n  /**\n   * Test if the search input is not empty\n   */\n  hasContent(): boolean {\n    return this.searchControl.value\n      || this.fieldSearchExpression;\n  }\n\n  /**\n   * Clears the search input and the fielded search\n   */\n  clearForm() {\n    this.searchControl.reset();\n    this.fieldSearchExpression = \"\";\n  }\n\n  /**\n   * Test if the advanced form has non-undefined values set\n   */\n  hasAdvancedContent(): boolean {\n    return this.form.get(\"treepath\")?.value\n      || this.form.get(\"authors\")?.value\n      || this.form.get(\"size\")?.value?.find(v => v)\n      || this.form.get(\"modified\")?.value?.find(v => v)\n      || this.form.get(\"person\")?.value\n      || this.form.get(\"docformat\")?.value;\n  }\n\n  /**\n   * Clears the advanced-search form\n   */\n  clearAdvancedSearch(): void {\n    this.advancedService.resetAdvancedValues();\n    /** Close the advanced form */\n    this.showAdvancedSearch = false;\n  }\n\n  /**\n   * Test if the query contains advanced-search related filters\n   */\n  isAdvancedSearchActive(): boolean {\n    return this.searchService.query.hasAdvanced();\n  }\n\n  /**\n   * Clear only the advanced form\n   */\n  clearAdvancedForm() {\n    if(this.initAdvanced) {\n      this.advancedService.resetControl(this.form.get(\"treepath\")!);\n      this.advancedService.resetControl(this.form.get(\"authors\")!);\n      this.advancedService.resetRangeControl(this.form.get(\"size\")!);\n      this.advancedService.resetRangeControl(this.form.get(\"modified\")!);\n      this.advancedService.resetControl(this.form.get(\"person\")!);\n      this.advancedService.resetControl(this.form.get(\"docformat\")!);\n    }\n  }\n\n  onParse(parseResult: ParseResult) {\n    this.parseResult = parseResult;\n    this.searchControl.setErrors(parseResult.error? {incorrect: true} : null);\n  }\n\n  /**\n   * Autocomplete icon per category\n   * @param category\n   */\n  autocompleteIcon(category): string {\n    switch(category){\n      case \"recent-document\": return \"far fa-file-alt fa-fw\";\n      case \"recent-query\": return \"fas fa-history fa-fw\";\n      case \"basket\": return \"fas fa-inbox fa-fw\";\n      case \"saved-query\": return \"far fa-save fa-fw\";\n    }\n    return \"far fa-lightbulb fa-fw\";\n  }\n\n  /**\n   * Retrieve autocomplete sources, which include the standard\n   */\n  get autocompleteSources(): string[] {\n    return this.appService.app?.data?.features as string[] || FEATURES;\n  }\n\n  /**\n   * Sets the field search mode\n   * event.preventDefault() to avoid the label stealing the focus\n   * and closing the autocomplete...\n   */\n  setMode(mode: \"off\" | \"selects\" | \"text\", event?: Event) {\n    event?.preventDefault();\n    this.prefs.set('field-search-mode', mode);\n  }\n\n  /**\n   * Returns the field search mode, stored in user\n   * preferences\n   */\n  getMode(): \"off\" | \"selects\" | \"text\" {\n    return this.prefs.get('field-search-mode') || \"selects\";\n  }\n\n  /**\n   * Toggle the keepFilters status\n   */\n  toggleKeepFilters(): void {\n    this.keepFilters = !this.keepFilters;\n    this.keepFiltersTitle = this.keepFilters ? 'msg#searchForm.keepFilters' : 'msg#searchForm.notKeepFilters';\n    /** Sets the state of keeping search's filters*/\n    this.prefs.set('keep-filters-state', this.keepFilters);\n  }\n\n  /**\n   * Programmatically handle opening/closing of the advanced-search form\n   */\n  toggleAdvancedSearch(): void {\n    this.showAdvancedSearch = !this.showAdvancedSearch;\n    this._instantiateAdvancedForm();\n  }\n\n  toggleVoice() {\n    this.voiceService.toggleRecognition();\n  }\n\n  scrollRight() {\n    this.timeout = setTimeout(() => {\n      this._scrollRight()\n    }, 100);\n  }\n\n  scrollLeft() {\n    this.timeout = setTimeout(() => {\n      this._scrollLeft();\n    }, 100);\n  }\n\n  endScroll() {\n    clearTimeout(this.timeout);\n  }\n\n  private _scrollRight() {\n    this.searchContainer!.nativeElement.scrollLeft += 20;\n    this.scrollRight();\n  }\n\n  private _scrollLeft() {\n    this.searchContainer!.nativeElement.scrollLeft -= 20;\n    this.scrollLeft();\n  }\n\n  /**\n   * Close the advanced-search form if the search input is focused\n   */\n  onMouseDown(): void {\n    this.showAdvancedSearch = false;\n  }\n\n  /**\n   * Instantiation of the advanced search form and its dependencies/configurations\n   */\n  private _instantiateAdvancedForm(): void {\n    if(!this.initAdvanced) {\n      this.firstPageService.getFirstPage().pipe(take(1)).subscribe(\n        () => {},\n        () => {},\n        () => {\n            this.form.addControl('treepath', this.advancedService.createSelectControl('treepath'));\n            this.form.addControl('authors', this.advancedService.createSelectControl('authors'));\n            this.form.addControl('size', this.advancedService.createRangeControl('size',\n              [ this.advancedService.validators.range('size') ]\n            ));\n            this.form.addControl('modified', this.advancedService.createRangeControl('modified',\n              [\n                this.advancedService.validators.range('modified'),\n                this.advancedService.validators.date('modified')\n              ]\n            ));\n            this.form.addControl('person', this.advancedService.createMultiInputControl('person'));\n            this.form.addControl('docformat', this.advancedService.createInputControl('docformat'));\n\n            this.initAdvanced = true;\n        }\n      )\n    }\n  }\n\n  /**\n   * Update the status of filters (other than advanced & fielded search filters) existence in this.searchService.query\n   */\n  private _updateFilteringStatus(): void {\n    const _query =  this.searchService.query.copy();\n    this.isFiltering = (_query.toStandard().select?.filter((select) => select.facet !== \"search-form\").length || 0) > 0;\n  }\n}\n","\n<!-- Wrapper div to ensure the autocomplete dropdown is aligned with the search input and button -->\n<div class=\"d-flex flex-column flex-grow-1 position-relative\">\n\n    <form novalidate [formGroup]=\"form\">\n\n        <div class=\"input-group\">\n            <!-- Input with autocomplete -->\n            <div\n                class=\"form-control d-flex pr-1\"\n                [title]=\"parseResult?.error || ''\"\n                [ngClass]=\"{'is-invalid': !!parseResult?.error}\">\n\n                <!-- scroll left -->\n                <button type=\"button\"\n                    class=\"btn btn-focus p-0\"\n                    *ngIf=\"hasScroll\"\n                    [sqTooltip]=\"'msg#searchForm.scrollLeft' | sqMessage\"\n                    [disabled]=\"!loginService.complete  ? '' : null\"\n                    (mouseup)=\"endScroll()\"\n                    (mousedown)=\"scrollLeft()\">\n                    <i class=\"fas fa-chevron-circle-left text-muted\"></i>\n                </button>\n\n                <div class=\"d-flex search-form-control scrollbar-hidden\" #searchContainer>\n\n                    <!-- Fielded search -->\n                    <sq-field-search-items #fieldSearchItemsContainer></sq-field-search-items>\n\n                    <!-- Search input -->\n                    <input type=\"text\"\n                        class=\"search-input flex-grow-1\"\n                        formControlName=\"search\"\n                        spellcheck=\"false\"\n                        autocomplete=\"off\"\n\n                        [placeholder]=\"'msg#searchForm.searchFor' | sqMessage\"\n                        [sqAutofocus]=\"autofocus\"\n                        [sqAutocompleteExtended]=\"autocompleteSources\"\n                        [dropdown]=\"dropdown\"\n                        [off]=\"!loginService.complete || !appService.suggestQueries\"\n                        [suggestQuery]=\"appService.suggestQueries? appService.suggestQueries[0] : ''\"\n\n                        [fieldSearchMode]=\"getMode()\"\n                        [fieldSearchExpression]=\"fieldSearchExpression\"\n                        [fieldSearchItemsContainer]=\"fieldSearchItemsContainer\"\n                        [excludedFields]=\"['concepts','textlexicon','recent-query','saved-query','basket','recent-document']\"\n\n                        (submit)=\"search()\"\n                        (parse)=\"onParse($event)\"\n                        (mousedown)=\"onMouseDown()\"\n                        #searchInput>\n                </div>\n\n                <!-- scroll right -->\n                <button type=\"button\"\n                    class=\"btn btn-focus p-0 mr-2\"\n                    *ngIf=\"hasScroll\"\n                    [sqTooltip]=\"'msg#searchForm.scrollRight' | sqMessage\"\n                    [disabled]=\"!loginService.complete  ? '' : null\"\n                    (mouseup)=\"endScroll()\"\n                    (mousedown)=\"scrollRight()\">\n                    <i class=\"fas fa-chevron-circle-right text-muted\"></i>\n                </button>\n\n                <!-- Clear Button -->\n                <button type=\"button\"\n                    *ngIf=\"hasContent()\"\n                    class=\"btn btn-focus p-0 mr-2\"\n                    [sqTooltip]=\"'msg#searchForm.clear' | sqMessage\"\n                    [disabled]=\"!loginService.complete ? '' : null\"\n                    (click)=\"clearForm()\">\n                    <i class=\"fas fa-times-circle text-muted\"></i>\n                </button>\n\n                <!-- Keep Filters Button -->\n                <button type=\"button\"\n                    *ngIf=\"isFiltering && enableKeepFilters\"\n                    class=\"btn btn-focus p-0 mr-2\"\n                    [sqTooltip]=\"keepFiltersTitle | sqMessage\"\n                    [disabled]=\"!loginService.complete ? '' : null\"\n                    (click)=\"toggleKeepFilters()\">\n                    <i class=\"fas fa-filter\" [ngClass]=\"keepFilters ? 'light-green' : 'text-muted'\"></i>\n                </button>\n\n                <!-- Toggle voice recognition -->\n                <button *ngIf=\"voiceService.available && enableVoiceRecognition\"\n                    type=\"button\"\n                    class=\"btn btn-focus p-0 mr-2\"\n                    [sqTooltip]=\"'msg#searchForm.voiceRecognition' | sqMessage\"\n                    (click)=\"toggleVoice()\">\n                    <i class=\"fas fa-microphone\"[ngClass]=\"voiceRecognitionState ? 'light-green' : 'text-muted'\"></i>\n                </button>\n\n                <!-- Toggle advanced search -->\n                <button type=\"button\"\n                    *ngIf=\"enableAdvancedForm\"\n                    class=\"btn p-0 pr-1\"\n                    [sqTooltip]=\"'msg#searchForm.advancedSearch' | sqMessage\"\n                    [disabled]=\"!loginService.complete ? '' : null\"\n                    (click)=\"toggleAdvancedSearch()\">\n                    <i class=\"fas fa-chevron-circle-{{showAdvancedSearch ? 'up' : 'down'}}\"\n                        [ngClass]=\"{'text-muted': !hasAdvancedContent() && !isAdvancedSearchActive(),\n                                    'light-green': isAdvancedSearchActive(),\n                                    'light-blue': hasAdvancedContent() && !isAdvancedSearchActive()}\">\n                    </i>\n                </button>\n            </div>\n\n            <!-- Search buttons -->\n            <div class=\"input-group-append\">\n                <button class=\"btn btn-primary\" type=\"button\" (click)=\"search()\"\n                    [sqTooltip]=\"'msg#searchForm.search' | sqMessage\"\n                    [disabled]=\"!loginService.complete || !form.valid ? '' : null\">\n                    <i class=\"fas fa-search\"></i>\n                </button>\n            </div>\n        </div>\n\n        <!-- Card displaying advanced-search -->\n        <div class=\"card advanced-search\" *ngIf=\"showAdvancedSearch\">\n            <div class=\"card-header pl-3 pr-2 py-1\">\n              <div class=\"d-flex justify-content-between\">\n                <span class=\" mb-0 py-1\">\n                    <i class=\"fab fa-searchengin mr-2\"></i>\n                    {{'msg#searchForm.advancedSearch' | sqMessage}}\n                </span>\n                <button\n                    type=\"button\" class=\"btn btn-light btn-sm\"\n                    *ngIf=\"isAdvancedSearchActive()\"\n                    [sqTooltip]=\"'msg#facet.clearSelects' | sqMessage\"\n                    (click)=\"clearAdvancedSearch()\">\n                    <i class=\"far fa-minus-square\"></i>\n                </button>\n              </div>\n            </div>\n            <div *ngIf=\"!firstPageService.firstPage\" class=\"d-flex flex-column align-items-stretch pl-3 pr-2 py-1\">\n                <span class=\"fas fa-sync fa-spin fa-fw\"></span>\n            </div>\n            <div *ngIf=\"firstPageService.firstPage\" class=\"d-flex flex-column align-items-stretch pl-3 pr-2 py-1\">\n                <sq-advanced-form-select [form]=\"form\" [field]=\"'treepath'\" [multiple]=\"true\"></sq-advanced-form-select>\n                <sq-advanced-form-select [form]=\"form\" [field]=\"'authors'\" [multiple]=\"true\"></sq-advanced-form-select>\n                <sq-advanced-form-range [form]=\"form\" [field]=\"'size'\"></sq-advanced-form-range>\n                <sq-advanced-form-range [form]=\"form\" [field]=\"'modified'\"></sq-advanced-form-range>\n                <sq-advanced-form-multi-input [form]=\"form\" [field]=\"'person'\" [suggestQuery]=\"appService.suggestQueries? appService.suggestQueries[0] : ''\"></sq-advanced-form-multi-input>\n                <sq-advanced-form-input [form]=\"form\" [field]=\"'docformat'\" [suggestQuery]=\"appService.suggestQueries? appService.suggestQueries[0] : ''\"></sq-advanced-form-input>\n            </div>\n        </div>\n    </form>\n\n    <!-- Autocomplete dropdown panel displaying suggestions -->\n    <sq-autocomplete-list #dropdown>\n        <ng-template #itemTpl let-item>\n            <div class=\"autocomplete-item p-2\">\n                <i class=\"{{autocompleteIcon(item.category)}}\"></i><!--\n                --><span class=\"mx-2\" [innerHTML]=\"item.displayHtml || item.display\"></span><!--\n                --><small *ngIf=\"item.category\" class=\"autocomplete-category ml-2\">{{(item.label || item.category) | sqMessage}}</small>\n            </div>\n        </ng-template>\n\n        <ng-template #footerTpl>\n            <div class=\"small d-flex align-items-center\">\n                {{ 'msg#searchForm.fieldedSearch' | sqMessage}}: &nbsp;\n                <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" type=\"radio\" id=\"off\" value=\"off\" (click)=\"setMode('off')\" [checked]=\"getMode() === 'off'\">\n                    <label class=\"form-check-label\" for=\"off\" (click)=\"setMode('off', $event)\">{{ 'msg#searchForm.off' | sqMessage}}</label>\n                </div>\n                <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" type=\"radio\" id=\"selects\" value=\"selects\" (click)=\"setMode('selects')\" [checked]=\"getMode() === 'selects'\">\n                    <label class=\"form-check-label\" for=\"selects\" (click)=\"setMode('selects', $event)\" [title]=\"'msg#searchForm.simpleTitle' | sqMessage\">{{ 'msg#searchForm.simple' | sqMessage}}</label>\n                </div>\n                <div class=\"form-check form-check-inline\">\n                    <input class=\"form-check-input\" type=\"radio\" id=\"text\" value=\"text\" (click)=\"setMode('text')\" [checked]=\"getMode() === 'text'\">\n                    <label class=\"form-check-label\" for=\"text\" (click)=\"setMode('text', $event)\" [title]=\"'msg#searchForm.advancedTitle' | sqMessage\">{{ 'msg#searchForm.advanced' | sqMessage}}</label>\n                </div>\n            </div>\n        </ng-template>\n    </sq-autocomplete-list>\n\n</div>\n\n","export * from \"./public-api\";","import {Injectable, InjectionToken, Inject, Type, Optional} from \"@angular/core\";\nimport {Router} from \"@angular/router\";\nimport {Observable, Subject} from \"rxjs\";\nimport {AppService, ExprBuilder, Query} from \"@sinequa/core/app-utils\";\nimport {AuthenticationService} from \"@sinequa/core/login\";\nimport {PreviewWebService, PreviewData, AuditEventType, Record, AuditEvent, Results} from \"@sinequa/core/web-services\";\nimport {JsonObject, Utils} from \"@sinequa/core/base\";\nimport {ModalService} from \"@sinequa/core/modal\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {RecentDocumentsService} from '@sinequa/components/saved-queries';\n\nexport const enum PreviewEventType {\n    Data = \"Preview_Data\",\n    Modal = \"Preview_Modal\",\n    Route = \"Preview_Route\",\n    Window = \"Preview_Window\"\n}\n\nexport interface PreviewEvent {\n    type: PreviewEventType;\n    record?: Record;\n    query: Query;\n}\n\nexport const PREVIEW_MODAL = new InjectionToken<Type<any>>(\"PREVIEW_MODAL\");\n\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class PreviewService {\n\n    private readonly _events = new Subject<PreviewEvent>();\n    private rank: number;\n\n    constructor(\n        @Optional() @Inject(PREVIEW_MODAL) public previewModal: Type<any>,\n        private router: Router,\n        private previewWebService: PreviewWebService,\n        private appService: AppService,\n        private authenticationService: AuthenticationService,\n        private searchService: SearchService,\n        private modalService: ModalService,\n        private recentDocumentsService: RecentDocumentsService,\n        public exprBuilder: ExprBuilder) {\n\n        // Subscribe to own events and add documents to the recent documents service\n        this.events.subscribe(event => {\n            if(event.record && (event.type === PreviewEventType.Modal || event.type === PreviewEventType.Route || event.type === PreviewEventType.Window)){\n                this.recentDocumentsService.addDocument(event.record, false);\n            }\n        });\n    }\n\n    /**\n     * Triggers any event among PreviewEvent\n     */\n    public get events() : Subject<PreviewEvent> {\n        return this._events;\n    }\n\n    private makeQuery(query: Query): Query {\n        query = Utils.copy(query);\n        delete query.sort;\n        delete query.scope;\n        delete query.tab;\n        delete query.basket;\n        delete query.page;\n        delete query.queryId;\n        if (query.select) {\n            query.select = query.select.filter(value => Utils.eqNC(value.facet, \"refine\"));\n            if (query.select.length === 0) {\n                delete query.select;\n            }\n        }\n        return query;\n    }\n\n    public getPreviewData(id: string, query: Query, audit = true): Observable<PreviewData> {\n        let auditEvent: AuditEvent | undefined;\n        const record = this.searchService.getRecordFromId(id);\n        const resultId = record ? this.searchService.results?.id : undefined;\n        if (audit) {\n            auditEvent = {\n                type: AuditEventType.Doc_Preview,\n                detail: this.getAuditPreviewDetail(id, query, record, resultId)\n            };\n        }\n        query = this.makeQuery(query);\n        const observable = this.previewWebService.get(id, query, auditEvent);\n        Utils.subscribe(observable,\n            (previewData) => {\n                previewData.resultId = resultId || \"\";\n                return previewData;\n            });\n        this._events.next({type: PreviewEventType.Data, record, query});\n\n        return observable;\n    }\n\n    public makeDownloadUrl(url: string): string | undefined {\n        return url ? this.appService.updateUrlForCors(url) : undefined;\n    }\n\n    openModal(record: Record, query: Query, model: any) {\n        model.record = record;\n        model.query = query;\n\n        this._events.next({type: PreviewEventType.Modal, record, query});\n\n        this.modalService.open(this.previewModal, { model });\n    }\n\n    private getQueryStr(query: Query): string {\n        query = this.makeQuery(query);\n        return query.toJsonForQueryString();\n    }\n\n    openNewWindow(record: Record, query: Query): Window | null {\n        const params = {\n            id: record.id,\n            query: this.getQueryStr(query),\n            app: this.appService.appName\n        };\n\n        if (this.authenticationService.userOverrideActive && this.authenticationService.userOverride) {\n            params[\"overrideUser\"] = this.authenticationService.userOverride.userName;\n            params[\"overrideDomain\"] = this.authenticationService.userOverride.domain;\n        }\n        const httpParams = Utils.makeHttpParams(params);\n        const url = \"#/preview?\" + httpParams.toString();\n\n        this._events.next({type: PreviewEventType.Window, record, query});\n\n        return window.open(url, \"_blank\");\n    }\n\n    openRoute(record: Record, query: Query, path = \"preview\"): Promise<Boolean> {\n\n        this._events.next({type:PreviewEventType.Route, record, query});\n        this.rank = record.rank;\n\n        return this.router.navigate([path], {\n            queryParams: {\n                id: record.id,\n                query: this.getQueryStr(query)\n            }\n        });\n    }\n\n    /**\n     * Get the page number of a splitted document's record or undefined if\n     * it is not in fact splitted. Stores the page number in the record itself ($page property)\n     * @param record \n     */\n    getPageNumber(record: Record): number | undefined {\n        const containerid: string | undefined = record.containerid;\n        if(containerid && record.id.startsWith(containerid)) {\n            const pageNumberStr = record.id.slice(containerid.length+1);\n            if(/#\\d+#/g.test(pageNumberStr)) {\n                const pageNumber = parseInt(pageNumberStr.slice(1, pageNumberStr.length-1), 10);\n                if(!isNaN(pageNumber)) {\n                    record.$page = pageNumber;\n                    return pageNumber;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns the pages of a given record id\n     * @param containerid\n     * @param query\n     */\n    fetchPages(containerid: string, query: Query): Observable<Results> {\n        query = this.makeQuery(query);\n        query.groupBy = \"\"; // If the query web service uses GROUP BY containerid\n        query.addSelect(this.exprBuilder.makeExpr(\"containerid\", containerid));\n        return this.searchService.getResults(query);\n    }\n\n    getAuditPreviewDetail(id: string, query: Query, record?: Record, resultId?: string): JsonObject {\n        const queryLanguage = this.searchService.results?.queryAnalysis?.queryLanguage\n            || this.searchService?.query?.questionLanguage\n            || this.appService?.ccquery?.questionLanguage;\n        const collectionColumn = record?.collection;\n        const collection = !!collectionColumn ? collectionColumn[0] : Utils.split(id, \"|\")[0];\n        const rank = !!record ? record.rank : this.rank || 0;\n        return {\n            \"doc-id\": id,\n            rank: rank,\n            collection: collection,\n            source: Utils.treeFirstNode(collection),\n            resultid: resultId,\n            querylang: queryLanguage,\n            text: query.text,\n            filename: record?.filename,\n            fileext: record?.fileext,\n        }\n    }\n    \n    /**\n     * returns document's preview HTML\n     * @param url \n     * @returns document's preview HTML\n     */\n    public getHtmlPreview(url:string) {\n        return this.previewWebService.getHtmlPreview(url);\n    }\n}","import {Utils} from \"./utils\";\n\n/**\n * Defines the different pattern types\n * `Empty`: no pattern\n * `RegExp`: a regular expression pattern\n * `Value`: a literal value\n */\nexport enum PatternType {\n    Empty = 0,\n    RegExp = 1,\n    // WildCard = 2,\n    Value = 3\n}\n\n/**\n * A class that represents a single pattern. The pattern type is deduced automatically from the input pattern text.\n *\n * `<empty string>` => `Empty`\n * `<pattern with wildcards ?*>` => `RegExp` (wildcards are converted to regular expressions)\n * `<pattern starting with ~>` => `RegExp` (the text following the ~ character is treated as a regular expression)\n * `<any other value>` => `Value` (a literal value that is matched as-is)\n */\nexport class Pattern {\n    private _type: PatternType;\n    public get type(): PatternType {\n        return this._type;\n    }\n    private reg?: RegExp;\n    private preparedPattern1?: string;\n    // private preparedPattern2: string;\n    private _text?: string;\n    public get text(): string | undefined {\n        return this._text;\n    }\n\n    public static getPatternType(pattern: string): PatternType {\n        if (!pattern) {\n            return PatternType.Empty;\n        }\n        if (pattern[0] === \"~\" || pattern.includes(\"*\") || pattern.includes(\"?\")) {\n            return PatternType.RegExp;\n        }\n        return PatternType.Value;\n    }\n\n    public static isPattern(pattern: string): boolean {\n        if (!pattern) {\n            return false;\n        }\n        if (pattern[0] === \"~\" || pattern.includes(\"*\") || pattern.includes(\"?\")) {\n            return true;\n        }\n        return false;\n    }\n\n    public static doMatch(pattern: string, text: string): boolean {\n        const _pattern = new Pattern();\n        _pattern.load(pattern);\n        return _pattern.isMatch(text);\n    }\n\n    public static wildcardToRegex(pattern: string): string {\n        if (!pattern) {\n            return pattern;\n        }\n        return \"^\" + Utils.regExEscape(pattern).replace(\"\\\\*\", \".*\").replace(\"\\\\?\", \".\") + \"$\";\n    }\n\n    public constructor(pattern?: string) {\n        if (!pattern) {\n            this.clear();\n        }\n        else {\n            this.load(pattern);\n        }\n    }\n\n    private static cleanPattern(s: string): string {\n        if (!s) {\n            return s;\n        }\n        const sb: string[] = [];\n        let lastIsStar = false;\n        for (const ch of s) {\n            if (ch === \"*\") {\n                if (!lastIsStar) {\n                    lastIsStar = true;\n                    sb.push(ch);\n                }\n            }\n            else {\n                lastIsStar = false;\n                sb.push(ch);\n            }\n        }\n        return sb.join(\"\");\n    }\n\n    public clear():void {\n        this.reg= undefined;\n        this._text = undefined;\n        this.preparedPattern1 = undefined;\n        // this.preparedPattern2 = undefined;\n        this._type = PatternType.Empty;\n    }\n\n    public isEmpty(): boolean {\n        return this._type === PatternType.Empty;\n    }\n\n    public load(pattern: string): boolean {\n        this.clear();\n        try {\n            let s = pattern;\n            this._text = pattern;\n            this._type = Pattern.getPatternType(s);\n            if (this._type === PatternType.Empty) {\n                return true;\n            }\n            if (this._type === PatternType.Value) {\n                this.preparedPattern1= s ;\n                return true;\n            }\n            if (this._type === PatternType.RegExp) {\n                if (s[0] === \"~\") {\n                    s = s.substring(1);\n                }\n                else {\n                    s = Pattern.wildcardToRegex(Pattern.cleanPattern(s));\n                }\n                this.preparedPattern1 = s;\n                this.reg = new RegExp(s, \"i\");\n                return true;\n            }\n            return false;\n        }\n        catch (e) {\n            console.log(`Pattern.Load '${pattern}' error:`, e);\n            this.clear();\n            return false;\n        }\n    }\n\n    public getTypeValueText(): string | undefined {\n        if (this.type === PatternType.Value) {\n            return this.preparedPattern1;\n        }\n        return undefined;\n    }\n\n    public getTypeRegexPattern(): string | undefined {\n        if (this.type === PatternType.RegExp) {\n            return this.preparedPattern1;\n        }\n        return undefined;\n    }\n\n    public isTypeValue(): boolean {\n        return this.type === PatternType.Value;\n    }\n\n    public isMatch(text: string): boolean {\n        text = text || \"\";\n        switch (this._type) {\n            default:\n            case PatternType.Empty:\n                return true;\n            case PatternType.Value:\n                return Utils.eqNC(text, this.preparedPattern1 || \"\");\n            case PatternType.RegExp:\n                return this.reg?.test(text) || false;\n        }\n    }\n}\n\nexport class Patterns {\n    private _text?: string;\n    private _preparedPatterns?: Pattern[];\n    private _values?: { [key: string]: true };\n    private _isEmpty: boolean;\n\n    constructor(text?: string) {\n        this.text = text;\n    }\n\n    public clear(): void {\n        this._preparedPatterns = undefined;\n        this._values = undefined;\n        this._isEmpty = true;\n    }\n\n    public get text(): string | undefined {\n        return this._text;\n    }\n\n    public set text(value: string | undefined) {\n        if (value === this._text) {\n            return;\n        }\n        this._text = value;\n        const l = Utils.split(this._text || \"\", \";\");\n        this.innerSetList(l);\n\n    }\n\n    public getTypeCount(type: PatternType): number {\n        if (!this._preparedPatterns) {\n            return 0;\n        }\n        if (type === PatternType.Value) {\n            return !!this._values ? Object.keys(this._values).length : 0;\n        }\n        let count = 0;\n        for (const pattern of this._preparedPatterns) {\n            if (pattern.type === type) {\n                count++;\n            }\n        }\n        return count;\n    }\n\n    private innerSetList(l: string[] | undefined): void {\n        this._preparedPatterns = undefined;\n        this._values = undefined;\n        this._isEmpty = true;\n\n        if (!!l) {\n            for (const s of l) {\n                if (!s) {\n                    continue;\n                }\n                const pattern = new Pattern();\n                if (pattern.load(s)) {\n                    if (!this._preparedPatterns) {\n                        this._preparedPatterns = [];\n                    }\n                    this._preparedPatterns.push(pattern);\n                }\n            }\n        }\n        if (this._preparedPatterns) {\n            const c = this._preparedPatterns.length;\n            if (c > 0) {\n                this._isEmpty = false;\n            }\n            for (let i = c - 1; i >= 0; i--) {\n                const pattern = this._preparedPatterns[i];\n                //do values\n                if (pattern.isTypeValue()) {\n                    if (!this._values) {\n                        this._values = {};\n                    }\n                    const val = pattern.getTypeValueText() || \"\";\n                    this._values[val] = true;\n                    this._preparedPatterns.splice(i, 1);\n                }\n            }\n        }\n    }\n\n    public get list(): string[] {\n        return Utils.split(this.text || \"\", \";\");\n    }\n\n    public set list(value: string[]) {\n        this.text = !!value ? value.join(\";\") : undefined;\n        this.innerSetList(value);\n    }\n\n    public setText(list: string[]): void {\n        this.list = list;\n    }\n\n    public isEmpty(): boolean {\n        return this._isEmpty;\n    }\n\n    public hasPatterns(): boolean {\n        return !this.isEmpty();\n    }\n\n    public isMatch(name: string, logdisplay?: string) {\n        if (this.isEmpty()) {\n            return true;\n        }\n\n        if (!!this._values) {\n            if (this._values[name]) {\n                if (!!logdisplay) {\n                    console.log(logdisplay, ` : the pattern '${name}' matches the value '${name}'`);\n                }\n                return true;\n            }\n        }\n\n        if (!!this._preparedPatterns) {\n            for (const pattern of this._preparedPatterns) {\n                if (!pattern) {\n                    continue;\n                }\n                if (pattern.isTypeValue()) {\n                    continue;\n                }\n                if (pattern.isMatch(name)) {\n                    if (!!logdisplay) {\n                        console.log(logdisplay, ` : the pattern '${pattern.text}' matches the value '${name}'`);\n                    }\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n}\n\n/**\n * This class is used to process \"included\" and \"excluded\" patterns typically specified in the Sinequa configuration.\n */\nexport class PatternMatcher {\n    public includedPattern: Patterns;\n    public excludedPattern: Patterns;\n\n    public get included(): string | undefined {\n        return this.includedPattern.text;\n    }\n\n    public set included(value: string | undefined) {\n        this.includedPattern.text = value;\n    }\n\n    public get excluded(): string | undefined {\n        return this.excludedPattern.text;\n    }\n\n    public set excluded(value: string | undefined) {\n        this.excludedPattern.text = value;\n    }\n\n    public set includedList(value: string[]) {\n        this.includedPattern.list = value;\n    }\n\n    public set excludedList(value: string[]) {\n        this.excludedPattern.list = value;\n    }\n\n    public includedLogDisplay?: string;\n    public excludedLogDisplay?: string;\n\n    constructor(includedLogDisplay?: string, excludedLogDisplay?: string) {\n        this.includedPattern = new Patterns();\n        this.excludedPattern = new Patterns();\n        this.includedLogDisplay = includedLogDisplay;\n        this.excludedLogDisplay = excludedLogDisplay;\n    }\n\n    public hasPatterns(): boolean {\n        return this.includedPattern.hasPatterns() || this.excludedPattern.hasPatterns();\n    }\n\n    public isExcluded(name: string): boolean {\n        return !this.isIncluded(name);\n    }\n\n    public isIncluded(name: string): boolean {\n        if (!name) {\n            return true;\n        }\n        if (this.includedPattern.hasPatterns()) {\n            if (this.excludedPattern.hasPatterns()) {\n                if (this.excludedPattern.isMatch(name, this.excludedLogDisplay)) {\n                    return false;\n                }\n            }\n            if (!this.includedPattern.isMatch(name, this.includedLogDisplay)) {\n                return false;\n            }\n            return true;\n        }\n        else if (this.excludedPattern.hasPatterns()) {\n            if (this.excludedPattern.isMatch(name, this.excludedLogDisplay)) {\n                return false;\n            }\n            return true;\n        }\n        return true;\n    }\n\n    public isExplicitlyIncluded(name: string): boolean {\n        return this.includedPattern.hasPatterns() && this.includedPattern.isMatch(name, this.includedLogDisplay);\n    }\n\n    public isExplicitlyExcluded(name: string): boolean {\n        return this.excludedPattern.hasPatterns() && this.excludedPattern.isMatch(name, this.excludedLogDisplay);\n    }\n}\n","import {Component, OnInit, Inject} from \"@angular/core\";\nimport {MODAL_MODEL, ModalRef, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Basket, BasketsService, SelectBasketModel} from \"../../baskets.service\";\n\n@Component({\n    selector: \"sq-select-basket\",\n    templateUrl: \"./select-basket.html\"\n})\nexport class BsSelectBasket implements OnInit {\n    baskets: Basket[];\n    buttons: ModalButton[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: SelectBasketModel,\n        private basketsService: BasketsService,\n        private modalRef: ModalRef) {\n        this.baskets = this.basketsService.baskets;\n\n        if (!this.baskets) {\n            this.baskets = [];\n        }\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    ngOnInit(): void {\n        if (!!this.model.basketFilter) {\n            this.baskets = this.baskets.filter(this.model.basketFilter);\n        }\n    }\n\n    activate(model) {\n        this.model = model;\n    }\n\n    select(basket: Basket) {\n        if (basket) {\n            this.model.basket = basket;\n            this.modalRef.close(ModalResult.OK);\n        }\n    }\n\n    newBasket(){\n        const model : Basket = {name : \"\"};\n        this.basketsService.createBasketModal(model)\n            .then((result) => {\n                if(result){ // The basket was created\n                    this.select(model);\n                }\n            });\n    }\n}\n","<form name=\"selectBasket\" novalidate>\n    <sq-modal [title]=\"'msg#selectBasket.title'\" [buttons]=\"buttons\">\n        <div class=\"form-group\">\n            <div class=\"list-group sq-list-group\">\n                <a *ngFor=\"let basket of baskets\" href=\"javascript:void(0)\" class=\"list-group-item list-group-item-action\" (click)=\"select(basket)\">\n                    <div>{{basket.name | sqMessage}}</div>\n                </a>\n                <a *ngIf=\"model.allowNew\" href=\"javascript:void(0)\" class=\"list-group-item list-group-item-action\" (click)=\"newBasket()\">\n                    <div><i>{{'msg#selectBasket.newBasket' | sqMessage}}</i></div>\n                </a>\n            </div>\n        </div>\n    </sq-modal>\n</form>","export * from \"./public-api\";","import {Component, OnInit, OnDestroy, Input, Output, EventEmitter, HostBinding, HostListener, ElementRef} from \"@angular/core\";\nimport {FormBuilder, FormGroup, FormControl} from \"@angular/forms\";\nimport {ValidatorFn} from \"@angular/forms\";\nimport {Subscription} from \"rxjs\";\nimport {Utils, Keys} from \"@sinequa/core/base\";\n\n@Component({\n    selector: \"sq-editable\",\n    templateUrl: \"./editable.html\",\n    styleUrls: [\"./editable.scss\"]\n})\nexport class BsEditable implements OnInit, OnDestroy {\n    @HostBinding(\"attr.tabindex\") tabindex = \"0\";\n    @Input() name: string;\n    @Input() value: string;\n    @Input() model: any;\n    @Output() valueChange: EventEmitter<string>;\n    @Input() validators: ValidatorFn[];\n    editableControl: FormControl;\n    modelControl: FormControl;\n    form: FormGroup;\n    formChanges: Subscription;\n    previousValue: string;\n    editing: boolean;\n    private focusAfterEdit: boolean;\n\n    constructor(\n        private formBuilder: FormBuilder,\n        private elementRef: ElementRef\n    ) {\n        this.valueChange = new EventEmitter<string>();\n    }\n\n    ngOnInit() {\n        this.editableControl = new FormControl(this.value, this.validators);\n        this.modelControl = new FormControl(this.model);\n        this.form = this.formBuilder.group({\n            editable: this.editableControl,\n            model: this.modelControl\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges,\n            (value) => {\n                this.value = this.editableControl.value;\n            }\n        );\n    }\n\n    ngOnDestroy() {\n        this.valueChange.unsubscribe();\n        this.formChanges.unsubscribe();\n    }\n\n    @HostListener(\"mousedown\")\n    @HostListener(\"touchstart\")\n    startEditing() {\n        if (!this.editing) {\n            this.previousValue = this.value;\n            this.editableControl[\"_touched\"] = false; //TODO - need markAsPristine?\n            this.editableControl[\"_pristine\"] = true; //\n            this.editing = true;\n        }\n    }\n\n    stopEditing(cancel = false) {\n        if (this.editing) {\n            this.editing = false;\n            if (this.focusAfterEdit && this.elementRef) {\n                this.elementRef.nativeElement.focus();\n            }\n            this.focusAfterEdit = false;\n            if (cancel) {\n                this.value = this.previousValue;\n            }\n            this.valueChange.emit(this.value);\n        }\n    }\n\n    inputKeydown(event: KeyboardEvent) {\n        switch (event.keyCode) {\n            case Keys.enter:\n                event.stopPropagation();\n                this.stopEditing();\n                return false;\n            case Keys.esc:\n                event.stopPropagation();\n                this.stopEditing(true);\n                return false;\n        }\n        return undefined;\n    }\n\n    @HostListener(\"keydown\", [\"$event\"])\n    hostKeydown(event: KeyboardEvent) {\n        if (event.keyCode === Keys.enter) {\n            this.focusAfterEdit = true;\n            this.startEditing();\n            return false;\n        }\n        return undefined;\n    }\n}\n","<div *ngIf=\"!editing\" class=\"editable-text\">{{value}}</div>\n<form *ngIf=\"editing\" class=\"form-inline\" role=\"form\" novalidate [formGroup]=\"form\">\n    <div class=\"form-group\">\n        <!--label [hidden]=\"form.valid\" for=\"editable\">{{name | sqMessage}}</label-->\n        <label for=\"editable\" class=\"sr-only\">{{name | sqMessage}}</label>\n        <input [sqValidation]=\"form\" type=\"text\" id=\"editable\" formControlName=\"editable\" spellcheck=\"false\" class=\"form-control\" (keydown)=\"inputKeydown($event)\" sqAutofocus (blur)=\"stopEditing()\">\n    </div>\n</form>\n","import {CCColumn, EngineType, EngineTypeModifier} from \"@sinequa/core/web-services\";\n\n/**\n * @ignore\n *\n * Used internally to avoid circular references between ExprParser, AppService and FormatService.\n * Do not export from the app-utils module.\n */\nexport class AppServiceHelpers {\n    static isString(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.string) {\n            return true;\n        }\n        if (column.eType === EngineType.csv && (column.eTypeModifier & EngineTypeModifier.x) === EngineTypeModifier.x) {\n            return true;\n        }\n        return false;\n    }\n\n    static isCsv(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.csv && (column.eTypeModifier & EngineTypeModifier.x) !== EngineTypeModifier.x) {\n            return true;\n        }\n        return false;\n    }\n\n    static isTree(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.csv && (column.eTypeModifier & EngineTypeModifier.t) === EngineTypeModifier.t) {\n            return true;\n        }\n        return false;\n    }\n\n    static isEntity(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.csv && (column.eTypeModifier & (EngineTypeModifier.e | EngineTypeModifier.l)) === (EngineTypeModifier.e | EngineTypeModifier.l)) {\n            return true;\n        }\n        return false;\n    }\n\n    static isBoolean(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.bool) {\n            return true;\n        }\n        return false;\n    }\n\n    static isDate(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.date || column.eType === EngineType.dateTime || column.eType === EngineType.time) {\n            return true;\n        }\n        return false;\n    }\n\n    static isDouble(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.double || column.eType === EngineType.float) {\n            return true;\n        }\n        return false;\n    }\n\n    static isInteger(column: CCColumn | undefined): boolean {\n        if (!column) {\n            return false;\n        }\n        if (column.eType === EngineType.integer || column.eType === EngineType.unsigned) {\n            return true;\n        }\n        return false;\n    }\n\n    static isNumber(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isInteger(column) || AppServiceHelpers.isDouble(column);\n    }\n\n    static isScalar(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isNumber(column) || AppServiceHelpers.isDate(column) || AppServiceHelpers.isBoolean(column);\n    }\n\n    static isSortable(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isString(column) || AppServiceHelpers.isScalar(column) ||\n            (AppServiceHelpers.isCsv(column) && !!column && ((column.eTypeModifier & EngineTypeModifier.l) === EngineTypeModifier.l));\n    }\n}\n","export * from \"./fullscreen-activator/fullscreen-activator\";\nexport * from \"./network-activity/network-activity\";\nexport * from \"./status-bar.module\";","import {Injectable, Optional, OnDestroy, Inject, InjectionToken} from \"@angular/core\";\nimport {Subject} from \"rxjs\";\nimport {UserSettingsWebService, AuditEvents} from \"@sinequa/core/web-services\";\nimport {Query} from \"@sinequa/core/app-utils\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {SearchService} from \"@sinequa/components/search\";\n\n\nexport interface RecentQuery {\n    query: Query;\n    date: Date;\n}\n\n\n// from core/models/audit\nexport const enum RecentQueryEventType {\n    Loaded = \"RecentQuery_Loaded\",\n    Patched = \"RecentQuery_Patched\",\n    Add = \"RecentQuery_Add\",\n    Update = \"RecentQuery_Update\",\n    Delete = \"RecentQuery_Delete\",\n    Search = \"Search_RecentQuery\"\n}\n\n// Types of events triggering a change event\nexport const RECENT_QUERIES_CHANGE_EVENTS = [\n    RecentQueryEventType.Add,\n    RecentQueryEventType.Update,\n    RecentQueryEventType.Delete,\n];\n\n\n// CRUD Events\nexport interface RecentQueryChangeEvent {\n    type: RecentQueryEventType;\n    recentquery?: RecentQuery;\n}\n\nexport const MAX_QUERIES = new InjectionToken(\"MAX_QUERIES\");\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class RecentQueriesService implements OnDestroy {\n\n    private readonly _events = new Subject<RecentQueryChangeEvent>();\n    private readonly _changes = new Subject<RecentQueryChangeEvent>();\n\n    constructor(\n        public userSettingsService: UserSettingsWebService,\n        public searchService: SearchService,\n        @Optional() @Inject(MAX_QUERIES) private maxQueries: number,\n    ){\n        if(!this.maxQueries){\n            this.maxQueries = 20;\n        }\n\n        // Listen to the user settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Revive dates\n            this.recentqueries.forEach(rq => {\n                if (Utils.isString(rq.date)) {\n                    const date = Utils.toDate(rq.date);\n                    if (date) {\n                        rq.date = date;\n                    }\n                }\n            });\n            // ==> Menus need to be rebuilt\n            this._events.next({type: RecentQueryEventType.Loaded});\n        });\n        // Listen to own events, to trigger change events\n        this._events.subscribe(event => {\n            if(RECENT_QUERIES_CHANGE_EVENTS.indexOf(event.type) !== -1){\n                this.changes.next(event);\n            }\n        });\n        // Listen to search service and store queries\n        this.searchService.queryStream.subscribe((query) => {\n                if (query) {\n                    this.addRecentQuery({query: query.copy(), date: new Date()});\n                }\n            });\n    }\n\n\n    // GETTERS\n\n    /**\n     * Returns the list of this user's recent queries.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of recent queries if it does not already exist.\n     */\n    public get recentqueries() : RecentQuery[]{\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"recentQueries\"])\n            this.userSettingsService.userSettings[\"recentQueries\"] = [];\n        return this.userSettingsService.userSettings[\"recentQueries\"];\n    }\n\n    /**\n     * Triggers any event among RecentQueryChangeEvent\n     * (use for fine-grained control of recent queries workflow)\n     */\n    public get events() : Subject<RecentQueryChangeEvent> {\n        return this._events;\n    }\n\n    /**\n     * Triggers when events affect the list of recent queries\n     * (use to refresh recent queries menus)\n     * Cf. CHANGE_EVENTS list\n     */\n    public get changes() : Subject<RecentQueryChangeEvent> {\n        return this._changes;\n    }\n\n    /**\n     * @returns true if there is at least one recent query\n     */\n    public get hasRecentQuery(): boolean {\n        return this.recentqueries.length > 0;\n    }\n\n    /**\n     * @returns a recent query with the given name or undefined if it does not exist\n     * @param name\n     */\n    public recentquery(text: string): RecentQuery | undefined {\n        const i = this.recentqueryIndex(text);\n        return i>= 0? this.recentqueries[i] : undefined;\n    }\n\n    private recentqueryIndex(text: string): number {\n        for (let i = 0, ic = this.recentqueries.length; i < ic; i++) {\n            const recentquery = this.recentqueries[i];\n            if (recentquery && recentquery.query.text && recentquery.query.text.toLowerCase() === text.toLowerCase()) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    private comparator(q1: RecentQuery, q2: RecentQuery){\n        return q2.date.getTime() - q1.date.getTime();\n    }\n\n\n    // CRUD\n\n    /**\n     * Creates a new recent query unless it already exists, in which case the existing query is updated.\n     * Emits an recentquery event.\n     * Update the data on the server.\n     * @param recentquery the recentquery to create\n     * @returns true if recentquery was created\n     */\n    public addRecentQuery(recentquery: RecentQuery) : boolean {\n\n        if(!recentquery.query || !recentquery.query.text || recentquery.query.text.trim() === ''){\n            return false;\n        }\n\n        const i = this.recentqueryIndex(recentquery.query.text); // If the query already exists\n        if(i >= 0){\n            // Ignore identical queries issued within a certain time window (1s)\n            // to avoid flooding the server. NB the request flooding mitigation in\n            // SqHttpClient will not work in this case as the request payload includes\n            // a timestamp\n            if (Math.abs(recentquery.date.getTime() - this.recentqueries[i].date.getTime()) < 1000) {\n                if (Utils.equals(this.recentqueries[i].query, recentquery.query)) {\n                    return false;\n                }\n            }\n            this.recentqueries[i].date = recentquery.date; // Update the date of the existing query\n            this.recentqueries[i].query = recentquery.query;\n            this._events.next({type : RecentQueryEventType.Update, recentquery: this.recentqueries[i]});\n        }\n        else {\n            this.recentqueries.push(recentquery);\n            this._events.next({type : RecentQueryEventType.Add, recentquery});\n        }\n\n        // Sort the list\n        this.recentqueries.sort(this.comparator);\n\n        // Truncate the list\n        if(this.maxQueries >=0 )\n            this.recentqueries.splice(this.maxQueries);\n\n        this.patchRecentQueries(); // No need to emit an \"Add\" audit event, since it is redundant with the main search API\n        return true;\n    }\n\n    /**\n     * Deletes the given RecentQuery (based on its name)\n     * Emits an RecentQuery event.\n     * Update the data on the server.\n     * @param recentquery\n     * @returns true if recent query was deleted\n     */\n    public deleteRecentQuery(recentquery: RecentQuery) : boolean {\n\n        const index = this.recentqueryIndex(recentquery.query.text || \"\");\n\n        if(index === -1)\n            return false; // Nothing to delete\n\n        this.recentqueries.splice(index, 1);\n        this._events.next({type : RecentQueryEventType.Delete, recentquery});\n        this.patchRecentQueries([\n            {\n                type: RecentQueryEventType.Delete,\n                detail: {\n                    recentquery: recentquery.query.text\n                }\n            }\n        ]);\n        return true;\n    }\n\n    /**\n     * Updates Recent Queries in User settings.\n     * @param auditEvents : Audit Events to be triggered\n     * @returns an Observable which can be used to trigger further events\n     */\n    private patchRecentQueries(auditEvents?: AuditEvents) {\n        return this.userSettingsService.patch({recentQueries: this.recentqueries}, auditEvents)\n            .subscribe(\n                next => {\n                    this._events.next({type: RecentQueryEventType.Patched});\n                },\n                error => {\n                    console.error(\"Could not patch Recent queries!\", error);\n                }\n            );\n    }\n\n\n    // EVENT HANDLERS (Menus)\n\n    /**\n     * Uses the SearchService to perform a search returning all\n     * the documents matching this recent query.\n     * @param recentquery\n     * @returns the search service promise\n     */\n    searchRecentQuery(recentquery: RecentQuery, path?: string): Promise<boolean> {\n        this.searchService.setQuery(Utils.extend(this.searchService.makeQuery(), Utils.copy(recentquery.query)));\n        this._events.next({type: RecentQueryEventType.Search, recentquery});\n        return this.searchService.search({ path: path }, {\n            type: RecentQueryEventType.Search,\n            detail: {\n                recentquery: recentquery.query.text\n            }\n        });\n    }\n\n    notifyOpenRecentQuery(recentquery: RecentQuery): void {\n        this._events.next({type: RecentQueryEventType.Search, recentquery});\n    }\n\n    ngOnDestroy() {\n        this.events.complete();\n        this.changes.complete();\n    }\n}\n","export * from \"./facet-bar/facet-bar\";\nexport * from \"./facet-card/facet-card\";\nexport * from \"./facet-filters/facet-filters\";\nexport * from \"./facet-list/facet-list\";\nexport * from \"./facet.module\";\nexport * from \"./facet-mysearch/facet-mysearch\";\nexport * from \"./facet-range/facet-range\";\nexport * from \"./facet-refine/facet-refine\";\nexport * from \"./facet-tree/facet-tree\";\nexport * from \"./facet-multi/facet-multi.component\";\nexport * from \"./facet-tag-cloud/facet-tag-cloud\";\n","import {Injectable, Inject} from \"@angular/core\";\nimport {HttpHeaders, HttpParams, HttpResponse, HttpErrorResponse} from \"@angular/common/http\";\nimport {Observable, timer, of, throwError} from \"rxjs\";\nimport {share, flatMap, map, catchError} from \"rxjs/operators\";\nimport {AuthService} from \"ng2-ui-auth\";\nimport {HttpService, START_CONFIG, StartConfig, AuditWebService} from \"@sinequa/core/web-services\";\nimport {Utils, IRef, MapOf} from \"@sinequa/core/base\";\nimport {SqHttpClient} from \"@sinequa/core/web-services\";\nimport {TokenService} from \"./token.service\";\nimport {JWTService} from \"./jwt.service\";\n\ninterface Authentication {\n    csrfToken: string;\n    headers?: MapOf<string>;    // set in http headers\n    params?: MapOf<string>;     // added to query string\n}\n\n/**\n * Describes the credentials that a user would enter manually to authenticate\n */\nexport interface Credentials {\n    userName?: string;\n    password?: string;\n}\n\nconst LEGACY_PROCESSED_CREDENTIALS_KIND = 0;\n\n/**\n * Describes the object created after successful authentication. The form of this object\n * is designed to maintain compatibility with previous SBA libraries\n */\nexport interface ProcessedCredentials {\n    /**\n     * An unused \"kind\" value - always set to 0\n     */\n    kind: number;\n    /**\n     * The user name of the authenticated user\n     */\n    userName?: string;\n    /**\n     * Additional data containing the associated CSRF token that is sent with\n     * authenticated web service requests and the provider for informational\n     * purposes only. The provider will be `Sinequa` for form-based authentication\n     * and the name of the auto-login provider in the Sinequa configuration for\n     * OAuth and SAML authentication\n     */\n    data: {\n        csrfToken: string, // the web token itself is stored in the sinequa-web-token cookie\n        provider: string\n    };\n}\n\n/**\n * Describes the object used by an administrator to authenticate as another user\n */\nexport interface UserOverride {\n    /**\n     * The user name of the user to authenticate as\n     */\n    userName: string;\n    /**\n     * The Sinequa domain name containing the user\n     */\n    domain: string;\n}\n\n/**\n * Describes a JWT object\n */\nexport interface JsonWebToken {\n    header: {\n        typ: string,\n        alg: string\n    };\n    payload: {\n        iss: string,\n        iat: string,\n        exp: string,\n        sub: string,\n        hash: string\n    };\n    signature: string;\n}\n\n/**\n * A service to authenticate a user with a Sinequa server. Authentication can be automatic (OAuth/SAML), if configured in the\n * Sinequa administration, or manual where the user name and password are entered in a modal dialog box and transmitted in\n * clear text. There is also support for the ng2-ui-auth library where the authentication process occurs in a browser popup window.\n * Successful authentication results in a JWT stored in cookie along with a CSRF token which is stored in storage so it can\n * be picked up in other browser tabs.\n *\n * The service also holds information on the status of the \"override user\" administrator function\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AuthenticationService extends HttpService {\n    private authentication: Authentication | undefined;\n    private storage: Storage;\n    /**\n     * A flag indicating whether an attempt to \"override user\" has failed. This is normally\n     * only set by the {@link HttpInterceptor} and tested and reset in {@link LoginService}\n     */\n    userOverrideFailed: boolean;\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient,\n        private tokenService: TokenService,\n        private auditService: AuditWebService,\n        private jWTService: JWTService,\n        private authService: AuthService) {\n        super(startConfig);\n        this.init();\n    }\n\n    private _userOverride: UserOverride | undefined;\n    /**\n     * Get the currrent user override, if any\n     */\n    get userOverride(): UserOverride | undefined {\n        return this._userOverride;\n    }\n\n    /**\n     * Set/unset the user override. The {@link #userOverrideActive} flag\n     * is set accordingly\n     */\n    set userOverride(value: UserOverride | undefined) {\n        this._userOverride = value;\n        if (this._userOverride) {\n            this._userOverrideActive = !!this._userOverride.userName && !!this._userOverride.domain;\n        }\n        else {\n            this._userOverrideActive = false;\n        }\n    }\n\n    private _userOverrideActive: boolean;\n\n    /**\n     * A flag indicating whether the current user override is active\n     */\n    get userOverrideActive(): boolean {\n        return this._userOverrideActive;\n    }\n\n    private _processedCredentials: ProcessedCredentials | undefined;\n    private _processedCredentialsStr: string | undefined;\n\n    /**\n     * Get the current processed credentials\n     */\n    get processedCredentials(): ProcessedCredentials | undefined {\n        return this._processedCredentials;\n    }\n\n    /**\n     * Set the current processed credentials. A stringified version\n     * is stored in either local or session storage\n     */\n    set processedCredentials(value: ProcessedCredentials | undefined) {\n        this._processedCredentials = value;\n        if (value) {\n            const newProcessedCredentialsStr = Utils.toJson(this._processedCredentials);\n            if (this._processedCredentialsStr !== newProcessedCredentialsStr) {\n                this._processedCredentialsStr = newProcessedCredentialsStr;\n                this.storage.setItem(\"sinequa-credentials\", this._processedCredentialsStr);\n            }\n        }\n        else {\n            if (this._processedCredentialsStr) {\n                this._processedCredentialsStr = undefined;\n                this.storage.removeItem(\"sinequa-credentials\");\n            }\n        }\n    }\n\n    /**\n     * Returns `true` if an OAuth or SAML auto provider is configured\n     */\n    get autoLoginActive(): boolean {\n        return !!this.startConfig.autoOAuthProvider || !!this.startConfig.autoSAMLProvider;\n    }\n\n    /**\n     * Deactivate the current user override\n     */\n    deactivateUserOverride() {\n        this._userOverrideActive = false;\n    }\n\n    private loadCredentials() {\n        const sinequaCredentials = this.storage.getItem(\"sinequa-credentials\");\n        this._processedCredentialsStr = sinequaCredentials ? sinequaCredentials : undefined;\n        this._processedCredentials = this._processedCredentialsStr ? Utils.fromJson(this._processedCredentialsStr) : null;\n    }\n\n    private saveCredentials(value: ProcessedCredentials) {\n        this.processedCredentials = value;\n    }\n\n    private init() {\n        if (this.startConfig.authenticationStorage === \"local\") {\n            this.storage = window.localStorage;\n        }\n        else {\n            this.storage = window.sessionStorage;\n        }\n        this.loadCredentials();\n        window.addEventListener('storage', (event: StorageEvent) => {\n            if (event.storageArea === this.storage) {\n                if (!event.key) { // clear\n                    this.processedCredentials = undefined;\n                }\n                else if (event.key === \"sinequa-credentials\") {\n                    if (event.newValue !== this._processedCredentialsStr) {\n                        this.loadCredentials();\n                    }\n                }\n            }\n        });\n    }\n\n    /**\n     * Return `true` if `processedCredentials` exists\n     */\n    get haveCredentials(): boolean {\n        return !!this.processedCredentials;\n    }\n\n    /**\n     * Add the current authentication information to the passed `HttpHeaders` and `HttpParams`.\n     * Currently, this adds the `sinequa-csrf-token` value to the HTTP headers. Called from\n     * {@link HttpInterceptor}\n     *\n     * @param config HttpHeaders and HttpParams to be updated\n     *\n     * @returns new configuration\n     */\n    addAuthentication(config: {headers: HttpHeaders, params: HttpParams}): {headers: HttpHeaders, params: HttpParams} {\n        this.doAuthentication();\n        if (this.authentication) {\n            if (this.authentication.headers) {\n                for (const header in this.authentication.headers) {\n                    if (this.authentication.headers.hasOwnProperty(header)) {\n                        config.headers = config.headers.set(header, this.authentication.headers[header]);\n                    }\n                }\n            }\n            if (this.authentication.params) {\n                for (const param in this.authentication.params) {\n                    if (this.authentication.params.hasOwnProperty(param)) {\n                        config.params = config.params.set(param, this.authentication.params[param]);\n                    }\n                }\n            }\n        }\n        return config;\n    }\n\n    /**\n     * Update the current authentication information with information in the passed `response`.\n     * This processes the `sinequa-jwt-refresh` header which will contain an updated CSRF token\n     * to correspond to the new JWT cookie. Called from {@link HttpInterceptor}\n     *\n     * @param response An `HttpResponse`\n     */\n    updateAuthentication(response: HttpResponse<any>) {\n        const csrfToken = response.headers.get(\"sinequa-jwt-refresh\");\n        if (csrfToken) {\n            if (this.processedCredentials) {\n                if (this.processedCredentials.data.csrfToken !== csrfToken) {\n                    this.processedCredentials.data.csrfToken = csrfToken;\n                    this.saveCredentials(this.processedCredentials);\n                }\n            }\n            else {\n                this.setCsrfToken(csrfToken);\n            }\n        }\n    }\n\n    private refreshAuthentication() {\n        if (this.processedCredentials) {\n            if (!this.authentication) {\n                this.authentication = {\n                    csrfToken: this.processedCredentials.data.csrfToken\n                };\n            }\n            else {\n                this.authentication.csrfToken = this.processedCredentials.data.csrfToken;\n            }\n        }\n        else {\n            this.authentication = undefined;\n        }\n    }\n\n    private doAuthentication() {\n        this.refreshAuthentication();\n        if (this.authentication && this.authentication.csrfToken) {\n            this.authentication.headers = {\n                \"sinequa-csrf-token\": this.authentication.csrfToken\n            };\n        }\n    }\n\n    private getAuthenticateHeader(regex: RegExp, authenticationHeaders: string[], header: IRef<string>): boolean {\n        if (authenticationHeaders) {\n            for (let i = 0, ic = authenticationHeaders.length; i < ic; i++) {\n                const authenticationHeader = authenticationHeaders[i];\n                const matches = regex.exec(authenticationHeader);\n                if (matches && matches.length > 0) {\n                    const prefix = matches[0];\n                    header.value = authenticationHeader.slice(prefix.length);\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Authenticate with the Sinequa server using the passed credentials. The credentials are sent\n     * in clear text. Prior to the authentication the passed `response` is checked for a\n     * `WWW-Authenticate: Bearer` header.\n     *\n     * @param credentials The credentials to authenticate with\n     * @param response The error response the reception of which initiated the call to this method\n     */\n    authenticate(\n        credentials: Credentials,\n        response: HttpErrorResponse): Promise<ProcessedCredentials | undefined> {\n        const wwwAuthenticate = response.headers.get(\"WWW-Authenticate\");\n        if (!wwwAuthenticate) {\n            console.error(\"Missing WWW-Authenticate header\");\n            return Promise.resolve(undefined);\n        }\n        const authenticateHeaders = wwwAuthenticate.split(\", \");\n        const header: IRef<string> = {value: \"\"};\n        if (!this.getAuthenticateHeader(/^Bearer ?/, authenticateHeaders, header)) {\n            console.error(\"Unexpected WWW-Authenticate header\");\n            return Promise.resolve(undefined);\n        }\n        return this.jWTService.getToken(credentials).toPromise()\n            .then((value) => {\n                return {\n                    kind: LEGACY_PROCESSED_CREDENTIALS_KIND,\n                    userName: credentials.userName,\n                    data: {\n                        csrfToken: value,\n                        provider: \"Sinequa\"\n                    }\n                };\n            });\n    }\n\n    /**\n     * Remove all current authentication data. The JWT cookie\n     * is removed\n     */\n    logout() {\n        this.auditService.notifyLogout().subscribe(\n            _ => {\n                this.tokenService.deleteWebTokenCookie().subscribe()\n                this.authentication = undefined;\n                this.processedCredentials = undefined;\n            }\n        );\n    }\n\n    /**\n     * Add the current user override information to the passed headers.\n     *\n     * @param config An object containing the `HttpHeaders` to update\n     */\n    addUserOverride(config: {headers: HttpHeaders}): HttpHeaders {\n        if (this.userOverride && this.userOverrideActive) {\n            config.headers = config.headers.set(\"sinequa-override-user\", this.userOverride.userName);\n            config.headers = config.headers.set(\"sinequa-override-domain\", this.userOverride.domain);\n        }\n\n        return config.headers;\n    }\n\n    /**\n     * Initiate authentication using the ng2-ui-auth library. The authentication process will be performed\n     * in a browser popup window\n     *\n     * @param provider The name of the provider to use. This is the name configured in the Sinequa administration\n     * console\n     */\n    authenticateWithProvider(provider: string): Observable<any> {\n        // AuthService.authenticate opens a popup. On some platforms (Firefox) this is asynchronous\n        // so we add a delay (timer(0)) so the caller can create a promise from the returned observable\n        // without yielding\n        const observable = timer(0).pipe(flatMap((value) => {\n            const observable1 = this.authService.authenticate(provider, true).pipe(share());\n            Utils.subscribe(observable1,\n                (response) => {\n                    // NB response should be the return value from JOAuth/JSaml json methods\n                    // It can be undefined eg if the popup fails to open\n                    if (response) {\n                        this.processedCredentials = {\n                            kind: LEGACY_PROCESSED_CREDENTIALS_KIND,\n                            data: {\n                                csrfToken: response.csrfToken,\n                                provider\n                            }\n                        };\n                    }\n                });\n            return observable1;\n        }));\n        return observable;\n    }\n\n    private setCsrfToken(csrfToken: string, provider = \"Sinequa\"): boolean {\n        if (!csrfToken) {\n            return false;\n        }\n        this.processedCredentials = {\n            kind: LEGACY_PROCESSED_CREDENTIALS_KIND,\n            data: {\n                csrfToken,\n                provider\n            }\n        };\n        return true;\n    }\n\n    private initiateAutoAuthentication(): boolean {\n        if (!this.startConfig.usePopupForLogin && this.autoLoginActive) {\n            let observable: Observable<{redirectUrl: string}>;\n            if (this.startConfig.autoOAuthProvider) {\n                observable = this.httpClient.post<{redirectUrl: string}>(this.makeUrl(\"security.oauth\"),\n                    {\n                        action: \"getcode\",\n                        provider: this.startConfig.autoOAuthProvider,\n                        tokenInCookie: true,\n                        originalUrl: window.location.href\n                    },\n                    {\n                        params: this.makeParams({\n                            noUserOverride: true,\n                            noAutoAuthentication: true\n                        })\n                    });\n            }\n            else {\n                observable = this.httpClient.post<{redirectUrl: string}>(this.makeUrl(\"security.saml\"),\n                    {\n                        action: \"getresponse\",\n                        provider: this.startConfig.autoSAMLProvider,\n                        tokenInCookie: true,\n                        originalUrl: window.location.href,\n                    },\n                    {\n                        params: this.makeParams({\n                            noUserOverride: true,\n                            noAutoAuthentication: true\n                        })\n                    });\n            }\n            observable.subscribe(\n                (response) => {\n                    window.location.replace(response.redirectUrl);\n                }\n            );\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n\n    /**\n     * Initiate the auto-authentication process if an automatic OAuth or SAML provider is configured.\n     * The {@LoginService} calls this method at startup. First, an attempt is made to retrieve a CSRF token.\n     * If that works, then the token is set and authentication is complete. Otherwise, the initial OAuth or SAML\n     * call is made to the Sinequa server. The `redirectUrl` in the response to this call is then used to redirect\n     * the browser to continue the normal OAuth/SAML autentication flow. A successful authentiction will culminate\n     * in the SBA being loaded a second time, this method being called again and the attempt to retrieve a CSRF\n     * token succeeding because a valid JWT cookie will now be present.\n     *\n     * A CSRF token is always requested to allow automatic login if a valid web token cookie has previously been\n     * written via, for example, a login to the admin console.\n     *\n     * @returns An Observable of a boolean value which if `true` indicates that auto-authentication has been initiated.\n     */\n    autoAuthenticate(): Observable<boolean> {\n        return this.tokenService.getCsrfToken().pipe(\n            map((csrfToken) => {\n                // Token can be empty as getCsrfToken suppresses application errors (no cookie or cookie invalid)\n                // (We do this to avoid having errors in the console for normal situations.)\n                if (csrfToken) {\n                    this.setCsrfToken(csrfToken);\n                    return false;\n                }\n                else {\n                    this.initiateAutoAuthentication();\n                    return true;\n                }\n            }),\n            catchError((error) => {\n                // We should rarely have an error now as getCsrfToken\n                // suppresses the application-level ones\n                if (this.initiateAutoAuthentication()) {\n                    return throwError(error);\n                }\n                // Swallow the error and continue with non-auto login process\n                return of(false);\n            }));\n    }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\n\nimport { IntlModule } from '@sinequa/core/intl';\nimport { BsActionModule } from \"@sinequa/components/action\";\nimport { BsFacetModule } from \"@sinequa/components/facet\";\nimport { BsSelectionModule } from '@sinequa/components/selection';\n\nimport { AgmCoreModule } from '@agm/core';\nimport { MapComponent } from './map.component';\n\n@NgModule({\n\n    imports: [\n        CommonModule,\n        IntlModule,\n        BsActionModule,\n        BsFacetModule,\n        BsSelectionModule,\n        \n        AgmCoreModule,\n    ],\n    declarations: [\n        MapComponent\n    ],\n    exports: [\n        MapComponent\n    ],\n})\nexport class GoogleMapsModule {}","import { Component, Input, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\nimport { AgmInfoWindow } from '@agm/core'\n;\nimport { AbstractFacet, FacetService } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\nimport { SearchService } from '@sinequa/components/search';\n\nimport { ExprBuilder } from '@sinequa/core/app-utils';\nimport { Results, Record } from '@sinequa/core/web-services';\n\nimport { darkStyle } from \"./dark-style\";\n\n@Component({\n    selector: \"sq-googlemaps\",\n    templateUrl: \"./map.component.html\"\n})\nexport class MapComponent extends AbstractFacet implements OnChanges {\n    /** Name of the map used as an identifier for the facet, to associate its selects */\n    @Input() name = \"map\";\n    /** Results list displayed on the map when possible */\n    @Input() results: Results;\n    /** Desired height of the map */\n    @Input() height = 300;\n    /** Name of the field storing the latitude as a decimal number */\n    @Input() latitudeField = \"latitude\";\n    /** Name of the field storing the longitude as a decimal number */\n    @Input() longitudeField = \"longitude\";\n    /** Map style (light or dark are supported) */\n    @Input() style = \"light\";\n    /** Event emitter that emits a Record object when the marker of that record is clicked by the user */\n    @Output() recordClicked = new EventEmitter<Record>();\n\n    /** Filtered list of records, keeping only the geolocated records */\n    geoRecords: Record[] = [];\n    /** Mode for fitting the map to its contained markers */\n    fitBounds: google.maps.LatLngBoundsLiteral | boolean;\n\n    // Actions for selecting an area on the map, and clearing that selection\n    filterArea: Action;\n    clearFilters: Action;\n\n    /** Bounds of the map updated on initialization and user interaction */\n    bounds: google.maps.LatLngBounds;\n    /** Currently opened info window, which can be closed when another window is closed */\n    openedWindow?: AgmInfoWindow;\n\n    /** Styles of the map if any */\n    mapStyles: any;\n\n    constructor(\n        public searchService: SearchService,\n        public facetService: FacetService,\n        public exprBuilder: ExprBuilder\n    ){\n        super();\n        \n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                this.searchService.query.removeSelect(this.name);\n                this.searchService.search();\n            }\n        });\n\n        // Filter the currently selected area\n        this.filterArea = new Action({\n            icon: \"fas fa-search\",\n            title: \"msg#googlemaps.filterArea\",\n            action: () => {\n                if(this.facetService.hasFiltered(this.name)) {\n                    this.searchService.query.removeSelect(this.name);\n                }\n                const minLat = this.bounds.getSouthWest().lat();\n                const maxLat = this.bounds.getNorthEast().lat();\n                const minLng = this.bounds.getSouthWest().lng();\n                const maxLng = this.bounds.getNorthEast().lng();\n                const expr = this.exprBuilder.concatAndExpr([\n                    this.exprBuilder.makeNumericalExpr(this.latitudeField, '>=', minLat),\n                    this.exprBuilder.makeNumericalExpr(this.latitudeField, '<=', maxLat),\n                    this.exprBuilder.makeNumericalExpr(this.longitudeField, '>=', minLng),\n                    this.exprBuilder.makeNumericalExpr(this.longitudeField, '<=', maxLng)\n                ]);\n                this.searchService.query.addSelect(expr, this.name);\n                this.searchService.search();\n            }\n        });\n    }\n\n    get actions(): Action[] {\n        const actions = [] as Action[];\n        if(this.facetService.hasFiltered(this.name)) {\n            actions.push(this.clearFilters);\n        }\n        if(this.bounds) {\n            actions.push(this.filterArea);\n        }\n        return actions;\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n\n        if(changes['results']) {\n            if(this.results) {\n                this.geoRecords = this.results.records.filter(r => !!r[this.latitudeField]);\n            }\n            this.closeWindow();\n        }\n\n        if(changes['style']) {\n            this.mapStyles = this.style === \"dark\"? darkStyle : undefined;\n        }\n\n        // If no document, the view shows a default latitude / longitude\n        if(this.geoRecords.length === 0) {\n            this.fitBounds = false;\n        }\n        // If multiple documents, the view is centered around them, at the right scale\n        else if(this.geoRecords.length > 1) {\n            this.fitBounds = true;\n        }\n        else {\n            // Custom bounds centered around the single geo record in the results\n            this.fitBounds = {\n                east: this.geoRecords[0][this.longitudeField] + 0.02,\n                north: this.geoRecords[0][this.latitudeField] + 0.02,\n                south: this.geoRecords[0][this.latitudeField] - 0.02,\n                west: this.geoRecords[0][this.longitudeField] - 0.02\n            };\n        }\n    }\n\n    closeWindow() {\n        if(this.openedWindow) {\n            this.openedWindow.close();\n            this.openedWindow = undefined;\n        }\n    }\n\n\n    // Manage map interactions (avoid multiple opened info windows)\n\n    onMapClick(event: Event) {\n        this.closeWindow();\n    }\n\n    onMarkerClick(event: Event, record: Record, infoWindow?: AgmInfoWindow) {\n        this.closeWindow();\n        this.openedWindow = infoWindow;\n        this.recordClicked.next(record);\n    }\n\n    onBoundsChange(bounds: google.maps.LatLngBounds) {\n        this.bounds = bounds;\n    }\n}","<agm-map\n    [latitude]=\"35\"\n    [longitude]=\"-30\"\n    [zoom]=\"2\"\n    [fitBounds]=\"fitBounds\" \n    [styles]=\"mapStyles\"\n    [ngStyle]=\"{'height.px': height}\"\n    (mapClick)=\"onMapClick($event)\"\n    (boundsChange)=\"onBoundsChange($event)\">\n\n    <agm-marker *ngFor=\"let record of geoRecords\"\n        [latitude]=\"record[latitudeField]\"\n        [longitude]=\"record[longitudeField]\"\n        [title]=\"record['title']\"\n        [agmFitBounds]=\"true\"\n        [opacity]=\"record.$selected? 0.7 : 1\"\n        (markerClick)=\"onMarkerClick($event, record, infoWindow)\">\n\n        <agm-info-window #infoWindow [disableAutoPan]=\"true\">\n            {{record['title']}}\n        </agm-info-window>\n\n    </agm-marker>\n\n</agm-map>","/* eslint-disable @angular-eslint/no-conflicting-lifecycle */\nimport {Component, Input, Output, EventEmitter, OnInit, OnDestroy, OnChanges, DoCheck, SimpleChanges, ViewChild, ElementRef, Type} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {BaseChartComponent, BarVerticalComponent, BarHorizontalComponent} from \"@swimlane/ngx-charts\";\nimport {UIService} from \"@sinequa/components/utils\";\n\n\nexport interface ChartOptions {\n    type: string;\n    colorScheme?: string;\n    getItemColor?: (value: string) => string;\n    tickFormatter?: (value: any) => string;\n}\n\nexport interface ChartDataPoint {\n    name: string;\n    value: number;\n}\n\n@Component({\n    selector: \"sq-ngx-chart\",\n    templateUrl: \"./chart.html\",\n    styleUrls: [\"./chart.scss\"]\n})\nexport class NgxChart implements OnInit, OnDestroy, OnChanges, DoCheck {\n    @Input() options: ChartOptions;\n    @Input() data: ChartDataPoint[];\n    @Output(\"item-click\") itemClickEvent: EventEmitter<ChartDataPoint>;\n    @ViewChild(\"wrapper\", {static: true}) wrapper: ElementRef;\n    @ViewChild(\"tooltipTemplate\", {static: false}) tooltipTemplate;\n    @ViewChild(\"chart\", {static: false}) chart: BaseChartComponent;\n    localeChange: Subscription;\n    attached: boolean;\n\n    constructor(\n        protected intlService: IntlService,\n        private uiService: UIService) {\n        this.itemClickEvent = new EventEmitter<ChartDataPoint>();\n    }\n\n    updateChart() {\n        if (!!this.chart) this.chart.update();\n    }\n\n    private onResize = () => this.updateChart();\n\n    ngOnInit() {\n        this.uiService.addElementResizeListener(this.wrapper.nativeElement, this.onResize);\n        this.localeChange = Utils.subscribe(this.intlService.events,\n            (value) => {\n                this.updateChart();\n            });\n    }\n\n    ngOnDestroy() {\n        this.uiService.removeElementResizeListener(this.wrapper.nativeElement, this.onResize);\n        this.localeChange.unsubscribe();\n    }\n\n    get chartType(): string {\n        return Utils.toLowerCase(this.options.type);\n    }\n\n    chartComponent(type:string) : Type<any> {\n        switch(type){\n            case \"horizontalbar\": return BarHorizontalComponent;\n            case \"verticaltalbar\": return BarVerticalComponent;\n            default: return BarVerticalComponent;\n        }\n    }\n\n    // so we don't end up with no color scheme if the color scheme is not set\n    get colorScheme(): string {\n        return this.options.colorScheme || \"cool\";\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n    }\n\n    // This is a clunky way of avoiding (briefly) seeing ngx-charts rendering with the default 600x400 dimensions\n    ngDoCheck() {\n        if (!this.attached && !!this.wrapper) {\n            if (document.body.contains(this.wrapper.nativeElement)) {\n                this.updateChart();\n                this.attached = true;\n            }\n        }\n    }\n\n    select = (dataPoint: ChartDataPoint): void => {\n        this.itemClickEvent.emit(dataPoint);\n    }\n}","<div class=\"sq-chart-wrapper\" [ngClass]=\"{'sq-attached' : attached}\" #wrapper>\n    <ng-container [ngSwitch]=\"chartType\">\n        <ngx-charts-bar-vertical *ngSwitchDefault #chart\n            (select)=\"select($event)\"\n            [results]=\"data\"\n            [xAxis]=\"true\"\n            [yAxis]=\"true\"\n            [customColors]=\"options.getItemColor\"\n            [xAxisTickFormatting]=\"options.tickFormatter\"\n            [yAxisTickFormatting]=\"options.tickFormatter\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-bar-vertical>\n        <ngx-charts-bar-horizontal *ngSwitchCase=\"'horizontalbar'\" #chart\n            (select)=\"select($event)\"\n            [results]=\"data\" \n            [xAxis]=\"true\"\n            [yAxis]=\"true\"\n            [customColors]=\"options.getItemColor\"\n            [xAxisTickFormatting]=\"options.tickFormatter\"\n            [yAxisTickFormatting]=\"options.tickFormatter\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-bar-horizontal>\n        <ngx-charts-pie-chart *ngSwitchCase=\"'pie'\" #chart\n            (select)=\"select($event)\"\n            [results]=\"data\"\n            [customColors]=\"options.getItemColor\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-pie-chart>\n        <ngx-charts-advanced-pie-chart *ngSwitchCase=\"'advancedpie'\" #chart\n            (select)=\"select($event)\"\n            [results]=\"data\"\n            [customColors]=\"options.getItemColor\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-advanced-pie-chart>\n        <ngx-charts-pie-grid *ngSwitchCase=\"'piegrid'\" #chart\n            (select)=\"select($event)\"\n            [results]=\"data\"\n            [customColors]=\"options.getItemColor\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-pie-grid>\n        <ngx-charts-tree-map *ngSwitchCase=\"'treemap'\" #chart\n            (select)=\"select($event)\"\n            [results]=\"data\"\n            [customColors]=\"options.getItemColor\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-tree-map>\n        <ngx-charts-number-card *ngSwitchCase=\"'numbercard'\" #chart\n            (select)=\"select($event)\"\n            [results]=\"data\"\n            [customColors]=\"options.getItemColor\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-number-card>\n        <ngx-charts-gauge *ngSwitchCase=\"'gauge'\" #chart\n            (select)=\"select($event)\"\n            [results]=\"data\"\n            [customColors]=\"options.getItemColor\"\n            [scheme]=\"colorScheme\"\n            [animations]=\"false\">\n            <ng-template #tooltipTemplate let-model=\"model\">\n                <ng-container [ngTemplateOutlet]=\"tooltipTemplate1\" [ngTemplateOutletContext]=\"{model: model}\"></ng-container>\n            </ng-template>\n        </ngx-charts-gauge>\n    </ng-container>\n    <ng-template #tooltipTemplate1 let-model=\"model\">\n        <span class=\"tooltip-label\">{{model.name}}</span>\n        <span class=\"tooltip-val\">{{model.value | sqValue}}</span>\n    </ng-template>\n</div>","import enNetwork from \"./en\";\nimport frNetwork from \"./fr\";\nimport deNetwork from \"./de\";\n\nexport { enNetwork, frNetwork, deNetwork };\n","export * from \"./public-api\";","export default {\n    collapseButton: {\n        collapse: \"Collapse\",\n        expand: \"Expand\"\n    }\n};\n","import {Injectable, Inject, Optional, InjectionToken} from \"@angular/core\";\nimport {UserSettingsWebService, UserSettings, Suggestion,\n    Results, Aggregation, AggregationItem, TreeAggregation, TreeAggregationNode,\n    AuditEvents, EngineType, Select, CCColumn\n} from \"@sinequa/core/web-services\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {Query, AppService, FormatService, ExprBuilder, Expr} from \"@sinequa/core/app-utils\";\nimport {FieldValue, Utils} from \"@sinequa/core/base\";\nimport {Subject, Observable} from \"rxjs\";\nimport {map} from \"rxjs/operators\";\nimport {SearchService, BreadcrumbsItem, Breadcrumbs} from \"@sinequa/components/search\";\nimport {SuggestService} from \"@sinequa/components/autocomplete\";\n\n// Facet interface (from models/UserSettings)\nexport interface FacetState {\n    name: string;\n    position: number; // eg 0 = left, 1 = right\n    expanded: boolean;\n    hidden: boolean;\n    view: string;\n}\n\n/**\n * Options for the [[FacetService.AddFilter]] and [[FacetService.AddFilterSearch]] methods\n *\n * and: If multiple items are filtered, determines whether they are filtered as AND or OR\n * not: Whether this is an exlusion of the filtered item\n * replaceCurrent: if true, the current filter is replaced\n */\nexport interface AddFilterOptions {\n    and?: boolean;\n    not?: boolean;\n    replaceCurrent?: boolean;\n}\n\n// Audit Events (from models/Audit)\nexport const enum FacetEventType {\n    Loaded = \"Facet_Loaded\",\n    Add = \"Facet_Added\",\n    AddAll = \"Facets_Added\",\n    Remove = \"Facet_Removed\",\n    RemoveAll = \"Facets_Removed\",\n\n    Patched = \"Facet_Patched\",\n    ClearFilters = \"Facet_ClearFilters\",\n    AddFilter = \"Facet_AddFilter\",\n    RemoveFilter = \"Facet_RemoveFilter\",\n    Open = \"Facet_TreeOpen\"\n}\n\n// Types of events triggering a change event\nexport const FACET_CHANGE_EVENTS = [\n    FacetEventType.Loaded,\n    FacetEventType.Add,\n    FacetEventType.Remove\n];\n\n\n// CRUD Events\nexport interface FacetChangeEvent {\n    type: FacetEventType;\n    facet?: FacetState;\n}\n\nexport const ALL_FACETS = new InjectionToken<any[]>('ALL_FACETS');\nexport const DEFAULT_FACETS = new InjectionToken<FacetState[]>('DEFAULT_FACETS');\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class FacetService {\n\n    protected readonly _events = new Subject<FacetChangeEvent>();\n    protected readonly _changes = new Subject<FacetChangeEvent>();\n\n    constructor(\n        protected userSettingsService: UserSettingsWebService,\n        protected searchService: SearchService,\n        protected suggestService: SuggestService,\n        protected appService: AppService,\n        protected intlService: IntlService,\n        protected formatService: FormatService,\n        protected exprBuilder: ExprBuilder,\n        @Optional() @Inject(ALL_FACETS) public allFacets: any[],\n        @Optional() @Inject(DEFAULT_FACETS) public defaultFacets: FacetState[]){\n\n        // Listen to the user settings\n        this.userSettingsService.events.subscribe(event => {\n            // E.g. new login occurs\n            // ==> Menus need to be rebuilt\n            this.events.next({type: FacetEventType.Loaded});\n        });\n        // Listen to own events, to trigger change events\n        this._events.subscribe(event => {\n            if(FACET_CHANGE_EVENTS.indexOf(event.type) !== -1){\n                this.changes.next(event);\n            }\n        });\n    }\n\n    // GETTERS\n\n    /**\n     * Returns the list of this user's facets.\n     * The list is stored in the user settings (this is a redirection).\n     * Using this service creates the list of facets if it does not already exist.\n     */\n    public get facets() : FacetState[] {\n        if(!this.userSettingsService.userSettings)\n            this.userSettingsService.userSettings = {};\n        if(!this.userSettingsService.userSettings[\"facets\"]) {\n            this.userSettingsService.userSettings[\"facets\"] = [];\n            if(!!this.defaultFacets){\n                this.userSettingsService.userSettings[\"facets\"].push(...this.defaultFacets);\n                this.patchFacets();\n            }\n        }\n        return this.userSettingsService.userSettings[\"facets\"];\n    }\n\n    /**\n     * @returns a facet with the given name or undefined if it does not exist\n     * @param name\n     */\n    public facet(name: string): FacetState | undefined {\n        const i = this.facetIndex(name);\n        return i>= 0? this.facets[i] : undefined;\n    }\n\n    /**\n     * Returns the list of facet config in the given container (position)\n     * @param position (default to 0 if there is a single container)\n     */\n    public getFacets(position: number = 0) : any[] {\n        if (!this.allFacets) {\n            return [];\n        }\n        return this.facets.filter(f => f.position === position)\n            .map(f => this.allFacets.find(_f => _f.name === f.name));\n    }\n\n    /**\n     * Returns true if this facet is opened (in any container)\n     * @param facetName\n     */\n    public isFacetOpened(facetName): boolean {\n        return !!this.facets.find(f => f.name === facetName);\n    }\n\n    protected facetIndex(name: string): number {\n        for (let i = 0, ic = this.facets.length; i < ic; i++) {\n            const facet = this.facets[i];\n            if (facet && facet.name === name) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    /**\n     * Triggers any events regarding the facets\n     */\n    public get events(): Subject<FacetChangeEvent> {\n        return this._events;\n    }\n\n    /**\n     * Triggers when events affect the list of facets\n     * Cf. CHANGE_EVENTS list\n     */\n    public get changes() : Subject<FacetChangeEvent> {\n        return this._changes;\n    }\n\n\n    public addFacet(facet: FacetState){\n        this.facets.push(facet);\n        this.events.next({type : FacetEventType.Add, facet: facet});\n        this.patchFacets([{\n            type: FacetEventType.Add,\n            detail: {\n                facet: facet.name\n            }\n        }]);\n    }\n\n    public removeFacet(facet: FacetState){\n        const i = this.facetIndex(facet.name);\n        if(i !== -1){\n            this.facets.splice(i,1);\n            this.events.next({type : FacetEventType.Remove, facet: facet});\n            this.patchFacets([{\n                type: FacetEventType.Remove,\n                detail: {\n                    facet: facet.name\n                }\n            }]);\n        }\n    }\n\n    public addAllFacet() {\n        this.facets.splice(0,this.facets.length);\n        if(!!this.defaultFacets) this.facets.push(...this.defaultFacets);\n        this.events.next({type : FacetEventType.AddAll});\n        this.patchFacets([{\n            type: FacetEventType.AddAll\n        }]);\n    }\n\n    public removeAllFacet() {\n        this.facets.splice(0,this.facets.length);\n        this.events.next({type : FacetEventType.RemoveAll});\n        this.patchFacets([{\n            type: FacetEventType.RemoveAll\n        }]);\n    }\n\n    /**\n     * Updates facets in User settings.\n     * @param auditEvents : Audit Events to be triggered\n     * @returns an Observable which can be used to trigger further events\n     */\n    protected patchFacets(auditEvents?: AuditEvents) {\n        return this.userSettingsService.patch({facets: this.facets} as UserSettings, auditEvents)\n            .subscribe(\n                next => {\n                    this.events.next({type: FacetEventType.Patched});\n                },\n                error => {\n                    console.error(\"Could not patch Facets!\", error);\n            });\n    }\n\n    /**\n     * Filter/Exclude an item in a facet and launch a search.\n     * Triggers an internal event and an Audit Event\n     * @param facetName\n     * @param aggregation\n     * @param items\n     * @param options\n     */\n    public addFilterSearch(\n        facetName: string,\n        aggregation: Aggregation,\n        items: AggregationItem | AggregationItem[],\n        options: AddFilterOptions = {}): Promise<boolean> {\n\n        const success = this.addFilter(facetName, aggregation, items, options);\n        if(success) {\n            this.events.next({ type: FacetEventType.AddFilter, facet: this.facet(facetName) });\n            return this.searchService.search(undefined, {\n                type: FacetEventType.AddFilter,\n                detail: {\n                    item: <any>this.searchService.query.lastSelect(),\n                    itembox: facetName,\n                    itemcolumn: aggregation.column,\n                    isitemexclude: options.not,\n                    \"from-result-id\": this.searchService.results?.id\n                }\n            });\n        }\n        return Promise.resolve(false);\n    }\n\n\n    /**\n     * Filter/Exclude one or more item(s) in a facet (without launching a search)\n     * @param facetName\n     * @param aggregation\n     * @param items\n     * @param options\n     * @param query the query on which to add the filter (defaults to search service query)\n     * @param breadcrumbs breadcrumbs in which to look for selected items (defaults  to search service breadcrumbs)\n     */\n    public addFilter(\n        facetName: string,\n        aggregation: Aggregation,\n        items: AggregationItem | AggregationItem[],\n        options: AddFilterOptions = {},\n        query = this.searchService.query,\n        breadcrumbs = this.searchService.breadcrumbs): boolean {\n\n        if (!items) {\n            return false;\n        }\n        if (options.replaceCurrent) {\n            query.removeSelect(facetName);\n        }\n\n        if (!aggregation.isTree && breadcrumbs?.activeSelects.length && !options.replaceCurrent) {\n            const expr = breadcrumbs.findSelect(facetName);\n            const index = breadcrumbs.activeSelects.findIndex(select => select.facet === facetName && (select.expr === expr || select.expr === expr?.parent));\n            const same = (!Array.isArray(items)) ? true : (options.and ? \"AND\" : \"OR\") === (expr?.and ? \"AND\" : \"OR\") && (options.not ? \"YES\" : \"NO\") === (expr?.not ? \"YES\" : \"NO\");\n\n            if (expr && same && index !== -1){\n                let _items: AggregationItem[];\n                if (expr?.operands) {\n                    _items = this.exprToAggregationItem(expr.operands, aggregation.valuesAreExpressions).concat(items);\n                } else {\n                    // previous selection is a single value\n                    _items = this.exprToAggregationItem(expr as Expr, aggregation.valuesAreExpressions).concat(items);\n                }\n                // MUST reset $excluded property otherwise expression is misunderstood\n                _items.forEach(item => item.$excluded = undefined);\n                // overrides options settings with expression if any\n                let _expr = this.exprBuilder.makeAggregationExpr(aggregation, _items, options.and || expr.and);\n                if (options.not || expr.not) {\n                    _expr = this.exprBuilder.makeNotExpr(_expr);\n                }\n                if (_expr) {\n                    query.replaceSelect(index, {expression: _expr, facet: facetName});\n                    return true;\n                }\n            }\n        }\n        let expr = this.exprBuilder.makeAggregationExpr(aggregation, items, options.and);\n        if (options.not) {\n            expr = this.exprBuilder.makeNotExpr(expr);\n        }\n        if (expr) {\n            query.addSelect(expr, facetName);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Clears the query from the current selection on the given facet\n     * @param facetName\n     * @param all\n     * @param query the query to clear from the facet selection (defaults to search service query)\n     */\n    public clearFilters(facetName: string, all?: boolean, query = this.searchService.query) {\n        query.removeSelect(facetName, all);\n    }\n\n    /**\n     * Clears the query from the current selection on the given facet and perform a search\n     * @param facetName\n     * @param all\n     */\n    public clearFiltersSearch(facetName: string | string[], all?: boolean): Promise<boolean> {\n        [].concat(facetName as []).forEach(name => {\n            this.clearFilters(name, all);\n            this._events.next({type: FacetEventType.ClearFilters, facet: this.facet(name)});\n        });\n\n        return this.searchService.search(undefined, {\n                type: FacetEventType.ClearFilters,\n                detail: {\n                    itembox: facetName,\n                    \"from-result-id\": this.searchService.results?.id\n                }\n            });\n    }\n\n    /**\n     * Remove a filter and update the appropriate Select if it was previously included in a selection\n     * @param facetName the facet that removes the filter\n     * @param aggregation the aggregation that contains the item to remove\n     * @param item the aggregation item to remove from the query\n     * @param query the query on which to remove the filter (defaults to search service query)\n     * @param breadcrumbs breadcrumbs in which to look for selected items (defaults  to search service breadcrumbs)\n     */\n    public removeFilter(\n        facetName: string,\n        aggregation: Aggregation,\n        item: AggregationItem,\n        query = this.searchService.query,\n        breadcrumbs = this.searchService.breadcrumbs): Select | undefined {\n\n        if (breadcrumbs) {\n            // if item is excluded, makeAggregation() should returns a NOT expression\n            const stringExpr = item.$excluded ? this.exprBuilder.makeNotExpr(this.exprBuilder.makeAggregationExpr(aggregation, item)) : this.exprBuilder.makeAggregationExpr(aggregation, item);\n            const filterExpr = this.findItemFilter(facetName, aggregation, item, breadcrumbs) || this.appService.parseExpr(stringExpr);\n            const expr = breadcrumbs.findSelect(facetName, filterExpr);\n            const i = breadcrumbs.activeSelects.findIndex(select => select.facet === facetName && (select.expr === expr || select.expr === expr?.parent));\n\n            // 'Select' can't be created when aggregation is a tree map, so, avoid aggregation tree\n            // and remove whole breadcrumbs\n            if (!aggregation.isTree && expr && expr.parent && expr.parent.operands.length > 1) {\n                // create a new Expr from parent and replaces Select by this new one\n                // so, breadcrumbs stay ordered\n                const filterByValuesAreExpression = (it: AggregationItem) => it.value.toString().replace(/ /g, \"\") !== item.value.toString().replace(/ /g, \"\");\n                const filterByValue = (it: AggregationItem) => it.value !== item.value\n                const filter = (aggregation.valuesAreExpressions) ? filterByValuesAreExpression : filterByValue;\n\n                const items: AggregationItem[] = this.exprToAggregationItem(expr.parent.operands, aggregation.valuesAreExpressions).filter(filter);\n                // MUST reset $excluded property otherwise expression is misunderstood (mainly NOT expressions)\n                items.forEach(item => item.$excluded = undefined);\n                const {not, and} = breadcrumbs.selects[i].expr || {};\n                let _expr = this.exprBuilder.makeAggregationExpr(aggregation, items, and);\n                if (not) {\n                    _expr = this.exprBuilder.makeNotExpr(_expr);\n                }\n                if (_expr) {\n                    query.replaceSelect(i, {expression: _expr, facet: facetName});\n                    return {expression: this.exprBuilder.makeAggregationExpr(aggregation, item), facet: facetName};\n                }\n            } else {\n                // filter is a single value... remove it\n                const select = query.select ? query.select[i] : undefined;\n                query.removeSelect(i);\n                return select;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Removes the aggregation from the search service query and refresh the search\n     * @param facetName\n     * @param aggregation\n     * @param item\n     */\n    public removeFilterSearch(facetName: string, aggregation: Aggregation, item: AggregationItem): Promise<boolean>{\n        const select = this.removeFilter(facetName, aggregation, item);\n        if(select) {\n            this._events.next({type: FacetEventType.RemoveFilter, facet: this.facet(facetName || \"\")});\n            delete this.searchService.query.queryId; // SBA-154\n            return this.searchService.search(undefined, {\n                type: FacetEventType.RemoveFilter,\n                detail: {\n                    item: {expression: select?.expression, facet: select?.facet},\n                    itembox: facetName,\n                    itemcolumn: aggregation.column,\n                    \"from-result-id\": !!this.searchService.results ? this.searchService.results.id : null\n                }\n            });\n        }\n        return Promise.resolve(false);\n    }\n\n    /**\n     * Queries the server for data for this aggregation\n     * @param aggregation\n     * @param skip\n     * @param count\n     * @param query the query to use to fetch the data (default to search service query)\n     */\n    public loadData(\n        aggregation: string,\n        skip: number = 0,\n        count: number = 10,\n        query = this.searchService.query,\n        searchInactive = true): Observable<Aggregation | undefined> {\n\n        query = Utils.copy(query);\n        query.action = \"aggregate\";\n        query.aggregations = {};\n        query.aggregations[aggregation] = {skip: skip, count: count};\n        return this.searchService.getResults(query, undefined, {searchInactive}).pipe(\n            map((results: Results) => {\n                const data = results.aggregations.find(a => Utils.eqNC(a.name, aggregation));\n                if (data) {\n                    this.setColumn(data);   // Useful for formatting and i18n\n                }\n                return data;\n            })\n        );\n    }\n\n    /**\n     * Get suggestions given a text and a field name, using the Suggest service\n     * @param text\n     * @param field\n     * @param suggestQuery\n     */\n    public suggest(text: string, field: string, suggestQuery = this.appService.suggestQueries[0]): Observable<Suggestion[]> {\n        return this.suggestService.get(suggestQuery, text, [field], this.searchService.query);\n    }\n\n    /**\n     * Format the given result item, using field formatter and/or i18n service\n     * @param item\n     */\n    formatValue(item: AggregationItem): string {\n        return this.intlService.formatMessage(\n            this.formatService.formatFieldValue(item, item.$column));\n    }\n\n    /**\n     * Returns true if this facet has at least one active selection\n     * filtering the search\n     * @param facetName\n     * @param breadcrumbs breadcrumbs in which to look for selected items (defaults to search service breadcrumbs)\n     */\n    public hasFiltered(facetName: string, breadcrumbs = this.searchService.breadcrumbs) : boolean {\n        return !!this.findFilter(facetName, breadcrumbs);\n    }\n\n    /**\n     * Returns an active selection of this facet filtering the search\n     * Returns it as an expression\n     * @param facetName\n     * @param breadcrumbs breadcrumbs in which to look for selected items (defaults to search service breadcrumbs)\n     */\n    public findFilter(facetName: string, breadcrumbs = this.searchService.breadcrumbs) : Expr | undefined {\n        return breadcrumbs?.findSelect(facetName);\n    }\n\n    /**\n     * Look for an aggregation with the given name in the search results and returns it.\n     * Takes care of initializing the aggregation items to insert their $column property.\n     * @param aggregationName\n     * @param results The search results can be provided explicitly or taken from the SearchService implicitly.\n     */\n    getAggregation(\n        aggregationName: string,\n        results = this.searchService.results,\n        treeAggregationOptions?: {\n            facetName: string,\n            levelCallback?: (nodes: TreeAggregationNode[], level: number, node: TreeAggregationNode) => void\n        }\n    ): Aggregation | TreeAggregation | undefined {\n\n        if (results?.aggregations) {\n            const aggregation = results.aggregations.find(agg => Utils.eqNC(agg.name, aggregationName))\n            if (aggregation) {\n                this.setColumn(aggregation);    // Useful for formatting and i18n\n                if (aggregation.isTree && treeAggregationOptions) {\n                    const expr = this.findFilter(treeAggregationOptions.facetName);\n                    const expandPaths = expr ? expr.getValues(aggregation.column) : [];\n                    this.initTreeNodes(treeAggregationOptions.facetName, aggregation, \"/\", aggregation.items as TreeAggregationNode[], expandPaths, treeAggregationOptions.levelCallback);\n\n                    return aggregation as TreeAggregation;\n                }\n                return aggregation;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Look for a Tree aggregation with the given name in the search results and returns it.\n     * Takes care of initializing the Node aggregation items to insert their properties ($column, $path, $opened, $level)\n     * @deprecated use getAggregation() instead\n     * @param facetName\n     * @param aggregationName\n     * @param results The search results can be provided explicitly or taken from the SearchService implicitly.\n     * @param levelCallback A callback method called at every level of the tree.\n     * Can be used to read or alter the properties of the nodes (opening, closing), or node list (sorting)\n     */\n    getTreeAggregation(\n        facetName: string,\n        aggregationName: string,\n        results = this.searchService.results,\n        levelCallback?: (nodes: TreeAggregationNode[], level: number, node: TreeAggregationNode) => void\n    ): TreeAggregation | undefined {\n\n        const agg = this.getAggregation(aggregationName, results);\n        if(agg?.isTree){\n            const expr = this.findFilter(facetName);\n            const expandPaths = expr ? expr.getValues(agg.column) : [];\n            this.initTreeNodes(facetName, agg, \"/\", agg.items as TreeAggregationNode[], expandPaths, levelCallback);\n\n            return agg as TreeAggregation;\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns the count parameter of the given aggregation (default is 10)\n     * @param aggregationName\n     */\n    getAggregationCount(aggregationName: string) : number {\n        return this.appService.getCCAggregation(aggregationName)?.count || 10;\n    }\n\n    /**\n     * Opens a Tree node of the given tree facet by querying data from the server\n     * Takes care of initializing the Node aggregation items to insert their properties ($column, $path, $opened, $level)\n     * @param facetName\n     * @param aggregation\n     * @param item\n     * @param levelCallback A callback method called at every level of the tree.\n     * Can be used to read or alter the properties of the nodes (opening, closing), or node list (sorting)\n     */\n    open(\n        facetName: string,\n        aggregation: TreeAggregation,\n        item: TreeAggregationNode,\n        levelCallback?: (nodes: TreeAggregationNode[], level: number, node: TreeAggregationNode) => void,\n        query = this.searchService.query,\n        searchInactive = true\n    ): Observable<Results> {\n\n        const value = item.$path + \"*\";\n        query = Query.copy(query);\n        query.action = \"open\";\n        const expr = this.exprBuilder.makeExpr(aggregation.column, value);\n        query.addOpen(expr, aggregation.name);\n\n        this.events.next({type: FacetEventType.Open, facet: this.facet(facetName)});\n        return this.searchService.getResults(query, undefined, {searchInactive}).pipe(\n            map((results: Results) => {\n                if (item.$path) {\n                    const source = FacetService.getAggregationNode(results.aggregations[0].items as TreeAggregationNode[], item.$path);\n                    const target = FacetService.getAggregationNode(aggregation.items as TreeAggregationNode[], item.$path);\n                    if (source && target) {\n                        target.items = source.items;    // Insert the new data (source) into the original (target)\n                    }\n                    if (target && target.items) {\n                        this.initTreeNodes(facetName, aggregation, item.$path, target.items, undefined, levelCallback);\n                    }\n                }\n                return results;\n            })\n        );\n    }\n\n    /**\n     * Returns true if a given aggregation item is currently actively filtering the search\n     * @param facetName\n     * @param aggregation\n     * @param item\n     * @param breadcrumbs breadcrumbs in which to look for selected items (default to search service breadcrumbs)\n     */\n    itemFiltered(facetName: string, aggregation: Aggregation, item: AggregationItem, breadcrumbs = this.searchService.breadcrumbs): boolean {\n        return !!this.findItemFilter(facetName, aggregation, item, breadcrumbs);\n    }\n\n    protected findItemFilter(facetName: string, aggregation: Aggregation, item: AggregationItem, breadcrumbs: Breadcrumbs | undefined) : Expr | undefined {\n        let expr: Expr | undefined;\n        let exprText: string;\n        if (!aggregation.valuesAreExpressions) {\n            let value: string;\n            if (aggregation.isTree) {\n                value = Utils.toSqlValue((<TreeAggregationNode>item).$path + \"*\");\n            }\n            else {\n                value = Utils.toSqlValue(item.value);\n            }\n            exprText = this.exprBuilder.makeExpr(aggregation.column, value);\n        }\n        else {\n            exprText = item.value as string;\n        }\n        const ret = this.appService.parseExpr(exprText);\n        if (ret instanceof Expr) {\n            expr = <Expr>ret;\n        }\n        if (expr) {\n            const expr2 = breadcrumbs?.findSelect(facetName, expr);\n            if(!!expr2 && (!expr2.parent || !expr2.parent.parent)){\n                return expr2;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Initializes the nodes of a tree (private, with a callback)\n     * @param facetName\n     * @param aggregation\n     * @param root\n     * @param children\n     * @param expandPaths\n     * @param levelCallback\n     */\n    protected initTreeNodes(\n        facetName: string,\n        aggregation: Aggregation,\n        root: string,\n        children: TreeAggregationNode[],\n        expandPaths?: string[],\n        levelCallback?: (nodes: TreeAggregationNode[], level: number, node: TreeAggregationNode) => void\n    ) {\n        if (!children) {\n            return;\n        }\n        let rootLevel: number;\n        if (root) {\n            rootLevel = Utils.count(root, \"/\", false) - 1;\n        }\n        else {\n            root = \"/\";\n            rootLevel = 0;\n        }\n        const column = this.appService.getColumn(aggregation.column);\n        Utils.traverse(children, (_nodes) => {\n            if (!_nodes) {\n                return false;\n            }\n            let path = root;\n            let level = rootLevel;\n            for (const _node of _nodes) {\n                path = path + _node.value + \"/\";\n                level++;\n            }\n            // console.log(path);\n            const _node = _nodes[_nodes.length - 1];\n            _node.$path = path;\n            _node.$column = column;\n            _node.$level = level;\n            _node.$opened = false;\n            _node.$filtered = this.itemFiltered(facetName, aggregation, _node)\n            expandPaths?.forEach(expandPath => {\n                if (expandPath.indexOf(path) === 0) {\n                    const count = !!_node.items ? _node.items.length : _node.hasChildren ? -1 : 0;\n                    if (count > 0) {\n                        _node.$opened = true;\n                    }\n                }\n            });\n            if (levelCallback) {\n                levelCallback(_nodes, level, _node);\n            }\n            return false; // don't stop\n        });\n    }\n\n    protected setColumn(aggregation: Aggregation){\n        if(!aggregation.isTree && aggregation.items){\n            const column = this.appService.getColumn(aggregation.column);\n            aggregation.items.forEach((value) => value.$column = column);\n        }\n    }\n\n\n\n    // static methods\n\n    protected static splitTreepath(path: string): string[] {\n        if (!path) return [];\n        path = path.trim();\n        if (path.length > 0 && path[0] === \"/\") {\n            path = path.substr(1);\n        }\n        if (path.length > 0 && path[path.length - 1] === \"/\") {\n            path = path.substr(0, path.length - 1);\n        }\n        if (path.length === 0) {\n            return [];\n        }\n        return path.split(\"/\");\n    }\n\n\n    public static treepathLast(path: string): string {\n        const parts = FacetService.splitTreepath(path);\n        if (!parts || parts.length === 0) {\n            return \"\";\n        }\n        return parts[parts.length - 1];\n    }\n\n    protected static getAggregationNode(nodes: TreeAggregationNode[], path: string): TreeAggregationNode | undefined {\n        if (!nodes || nodes.length === 0) {\n            return undefined;\n        }\n        const names = FacetService.splitTreepath(path);\n        let node: TreeAggregationNode | undefined;\n        for (let _i = 0, _a = names; _i < _a.length; _i++) {\n            if (!nodes || nodes.length === 0) {\n                return undefined;\n            }\n            const name = _a[_i].toLocaleLowerCase();\n            node = undefined;\n            for (let _j = 0, _b = nodes; _j < _b.length; _j++) {\n                const _node = _b[_j];\n                if ((<string>_node.value).toLocaleLowerCase() === name) {\n                    node = _node;\n                    break;\n                }\n            }\n            if (!node) {\n                return undefined;\n            }\n            nodes = node.items;\n        }\n        return node;\n    }\n\n\n    /**\n     * Convert an Expression object or an Expression Array to their AggregationItem equivalent\n     *\n     * @param expr Expression object or Expression Array\n     * @param valuesAreExpressions when true values should be converted to string otherwise no\n     *\n     * @returns AggregationItem array with converted expression or an empty array\n     */\n    exprToAggregationItem(expr: Expr[] | Expr, valuesAreExpressions: boolean = false): AggregationItem[] {\n        const fn = [\n            (item: Expr) => {\n                let value: FieldValue = item.value as string;\n                if (item.column?.eType === EngineType.bool) {\n                    value = Utils.isTrue(item.value);\n                }\n                return ({count: 0, value, display: item.display, $column: item.column, $excluded: (item?.not || item?.parent?.not)} as AggregationItem);\n            },\n            (item: Expr) => ({count: 0, value: item.toString((item.value) ? true : false), display: item.display, $column: item.column, $excluded: (item?.not || item?.parent?.not)} as AggregationItem)\n        ];\n\n        const callback = valuesAreExpressions ? fn[1] : fn[0];\n        return [].concat(expr as []).map(callback) as AggregationItem[];\n    }\n\n    /**\n     * Get all Breadcrumbs items from a specific facet\n     *\n     * @param facetName facet name where to extract all breadcrumbs\n     * @param breadcrumbs breadcrumbs in which to look for selected items\n     */\n    getBreadcrumbsItems(facetName: string, breadcrumbs: Breadcrumbs | undefined): BreadcrumbsItem[] {\n        return breadcrumbs?.items.filter(item => item.facet === facetName) || [];\n    }\n\n    /**\n     * Get all Aggregation items from a facet, currently filtered\n     *\n     * @param facetName facet name where to inspect\n     * @param valuesAreExpressions when true, some transformations should be done\n     * @param breadcrumbs breadcrumbs in which to look for selected items (default to search service breadcrumbs)\n     */\n    getAggregationItemsFiltered(facetName: string, valuesAreExpressions: boolean = false, breadcrumbs = this.searchService.breadcrumbs): AggregationItem[] {\n        const items = this.getBreadcrumbsItems(facetName, breadcrumbs);\n\n        // aggregation items are constructed from nested expressions\n        const expr = [] as Expr[][];\n        for (const item of items) {\n            const value = (item.expr?.display === undefined) ? item.expr?.operands as Expr[] || item.expr : item.expr;\n            if (value) {\n                expr.push(value as Expr[]);\n            }\n        }\n        // faltten results\n        const flattenExpr = [].concat.apply([], expr);\n\n        return this.exprToAggregationItem(flattenExpr, valuesAreExpressions);\n    }\n\n    /**\n     * Convert Suggestion to AggregationItem\n     * @param suggest a Suggestion object\n     *\n     * @returns AggregationItem object with is `$column` property defined.\n     * On boolean type, convert `value` property to boolean\n     */\n    suggestionToAggregationItem(suggest: Suggestion): AggregationItem {\n        const item: AggregationItem = {\n            value: suggest.normalized || suggest.display,\n            display: suggest.display,\n            count: +(suggest.frequency || 0),\n            $column: this.appService.getColumn(suggest.category)\n        };\n        if (item.$column?.eType === EngineType.bool) {\n            item.value = Utils.isTrue(item.value);\n        }\n        return item;\n    }\n\n    /**\n     * Converts a list of suggestions into a structure of TreeAggregationNodes\n     * @param suggests Suggestions to convert\n     * @param searchTerm The searched term in the suggestions\n     * @param aggregation The tree aggregations\n     */\n    suggestionsToTreeAggregationNodes(suggests: Suggestion[], searchTerm: string, aggregation: Aggregation | undefined): TreeAggregationNode[] {\n        const suggestions: TreeAggregationNode[] = [];\n        if(suggests.length > 0) {\n            const path2node = new Map<string,TreeAggregationNode>();\n            const searchPattern = new RegExp(`\\\\b${searchTerm}`, 'i');\n            const column = this.appService.getColumn(aggregation?.column);\n            suggests.forEach(suggest => {\n                if(suggest.display.length > 1) {\n                    const match = searchPattern.exec(suggest.display);\n                    this.addNode(suggestions, path2node, \"/\", suggest.display, +(suggest.frequency || 0), 1, (match?.index || 0)+searchTerm.length, column);\n                }\n            });\n        }\n        return suggestions;\n    }\n\n    /**\n     * Utility recursive function to generate a tree aggregation structure from\n     * a list of suggestions\n     */\n    protected addNode(items: TreeAggregationNode[],\n            path2node: Map<string,TreeAggregationNode>,\n            parentPath: string,\n            path: string,\n            count: number,\n            level: number,\n            matchend: number,\n            column: CCColumn | undefined) {\n\n        const nextChild = path.indexOf(\"/\", parentPath.length); // path = /Cities/Paris/17e/   parentPath = /Cities/\n        const currentPath = path.substring(0, nextChild+1); // => currentPath = /Cities/Paris/\n        let node = path2node.get(currentPath);\n\n        if(!node) {\n            const value = path.substring(parentPath.length, nextChild);\n            node = {\n                value,\n                count,\n                items: [],\n                hasChildren: false,\n                $column: column,\n                $level: level,\n                $opened: matchend >= currentPath.length,\n                $path: currentPath\n            };\n            path2node.set(currentPath, node);\n            items.push(node);\n        }\n\n        if(currentPath.length < path.length) {\n            node.hasChildren = true;\n            this.addNode(node.items, path2node, currentPath, path, count, level+1, matchend, column);\n        }\n    }\n\n\n    /**\n     * Check if a facet contains items\n     * @param aggregation aggregation name\n     * @param results search results\n     *\n     * @returns true if the facet contains a least one item otherwise false\n     */\n    hasData(aggregation: string, results: Results): boolean {\n        // Avoid calling getAggregation() which is costly\n        return !!results.aggregations.find(agg => Utils.eqNC(agg.name, aggregation))?.items?.length;\n    }\n\n    /**\n     * Returns the index of the first element in the supplied array\n     * corresponding to `item.value` or -1 when not found.\n     * A fallback to `item.display` is done before returning -1\n     * @param item item to find\n     */\n    filteredIndex(data: Aggregation | undefined, arr: Array<AggregationItem>, item: AggregationItem): number {\n        let indx = -1;\n        // specific to Values Are Expressions where expression are not well formatted by Expression Parser\n        // eg: when values is : \"> 0\", Expression Parser returns : \">0\" without space between operator and value\n        if (data?.valuesAreExpressions) {\n            const value = this.trimAllWhitespace(item.value);\n            const normalizedArr = arr.map(item => ({...item, value: this.trimAllWhitespace(item.value)})) || [];\n            indx = normalizedArr.findIndex(it => it.value === value);\n        } else {\n            indx = this.findAggregationItemIndex(arr, item);\n        }\n        return indx;\n    }\n\n    /**\n     * Utility function to returns aggregation item's index in supplied array with fallback to `display` comparison.\n     * Otherwise -1, indicating that no element passed the test.\n     * @param arr The array findIndex() was called upon\n     * @param value The value to be test\n     */\n    public findAggregationItemIndex = (arr: Array<AggregationItem>, item: AggregationItem) => {\n        let index = arr.findIndex(it => it.value === item.value);\n        if (index === -1 && item.display) {\n            // fallback to display comparison\n            index = arr.findIndex(it => it.display === item.display);\n        }\n        return index;\n    };\n\n    private trimAllWhitespace = (value: FieldValue | undefined): FieldValue | undefined => {\n        switch (typeof value) {\n            case \"string\":\n                return value.replace(/\\s/g, '');\n            default:\n                return value;\n        }\n    };\n}\n","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {DragDropModule} from \"@angular/cdk/drag-drop\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\n\nimport {ALERT_COMPONENTS, WINDOW} from \"../alerts.service\";\nimport {BsEditAlert} from \"./edit-alert/edit-alert\";\nimport {BsManageAlerts} from \"./manage-alerts/manage-alerts\";\nimport {BsAlertsMenuComponent} from \"./alerts-menu/alerts-menu.component\";\nimport {BsAlertMessageComponent} from \"./alert-message/alert-message.component\";\n\nfunction windowFactory() {\n    return window;\n}\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule,\n        DragDropModule,\n\n        BsModalModule,\n\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsActionModule\n    ],\n    declarations: [\n        BsEditAlert, BsManageAlerts, BsAlertsMenuComponent, BsAlertMessageComponent\n    ],\n    exports: [\n        BsEditAlert, BsManageAlerts, BsAlertsMenuComponent\n    ],\n    providers: [\n        {\n            provide: ALERT_COMPONENTS,\n            useValue: {\n                editAlertModal: BsEditAlert,\n                manageAlertsModal: BsManageAlerts\n            }\n        },\n        {\n            provide: WINDOW,\n            useFactory: windowFactory\n        }\n    ]\n})\nexport class BsAlertsModule {\n}\n","export * from \"./public-api\";","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\n\nimport { IntlModule } from \"@sinequa/core/intl\";\nimport { UtilsModule } from \"@sinequa/components/utils\";\nimport { CollapseModule } from \"@sinequa/components/collapse\";\nimport { BsActionModule } from \"@sinequa/components/action\";\nimport { BsFacetModule } from \"@sinequa/components/facet\";\n\nimport { VisModule } from 'ngx-vis';\nimport { NetworkComponent } from \"./network.component\";\nimport { BsNodeInfoCard } from \"./node-info-card.component\";\nimport { BsEdgeInfoCard } from \"./edge-info-card.component\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule, ReactiveFormsModule, \n\n        IntlModule,\n        UtilsModule,\n        CollapseModule,\n        BsActionModule,\n        BsFacetModule,\n        \n        VisModule\n    ],\n    declarations: [\n        NetworkComponent,\n        BsNodeInfoCard,\n        BsEdgeInfoCard\n    ],\n    exports: [\n        NetworkComponent,\n        BsNodeInfoCard,\n        BsEdgeInfoCard\n    ],\n})\nexport class NetworkModule {\n}","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\nimport {BsModalModule} from \"@sinequa/components/modal\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsAutocompleteModule} from \"@sinequa/components/autocomplete\";\nimport {LabelsModule} from \"../labels.module\";\n\nimport {BsRenameLabel} from \"./rename-label/rename-label\";\nimport {BsLabelsMenuComponent} from \"./labels-menu/labels-menu.component\";\n\nimport {LABELS_COMPONENTS, LabelsComponents} from \"../labels.service\";\nimport { BsDeleteLabel } from './delete-label/delete-label';\nimport { BsAddLabel } from './add-label/add-label';\nimport { BsLabelsAutocompleteComponent } from './labels-autocomplete/labels-autocomplete.component';\nimport { BsEditLabel } from './edit-label/edit-label';\n\nexport const defaultLabelComponents: LabelsComponents = {\n    labelsAutocompleteComponent: BsLabelsAutocompleteComponent,\n    renameModal: BsRenameLabel,\n    deleteModal: BsDeleteLabel,\n    addModal: BsAddLabel,\n    editModal: BsEditLabel\n};\n\n@NgModule({\n    imports: [\n        FormsModule, ReactiveFormsModule,\n        CommonModule,\n\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsSelectionModule,\n        BsModalModule,\n        BsAutocompleteModule,\n        BsActionModule,\n        LabelsModule\n    ],\n    declarations: [\n        BsLabelsAutocompleteComponent,\n        BsRenameLabel,\n        BsLabelsMenuComponent,\n        BsDeleteLabel,\n        BsAddLabel,\n        BsEditLabel\n    ],\n    exports: [\n        LabelsModule,\n        BsLabelsAutocompleteComponent,\n        BsRenameLabel,\n        BsLabelsMenuComponent,\n        BsDeleteLabel,\n        BsAddLabel,\n        BsEditLabel\n    ],\n    providers: [\n        {provide: LABELS_COMPONENTS, useValue: defaultLabelComponents},\n    ]\n})\nexport class BsLabelsModule {\n}\n","import {Component, Input, OnChanges, SimpleChanges, ChangeDetectorRef, NgZone, ViewChild, ElementRef} from \"@angular/core\";\nimport {DomSanitizer} from \"@angular/platform-browser\";\nimport {PreviewData} from \"@sinequa/core/web-services\";\nimport {PreviewDocument} from \"./preview-document\";\nimport {Action} from \"@sinequa/components/action\";\n\n@Component({\n    selector: \"sq-preview-tooltip\",\n    templateUrl: \"./preview-tooltip.component.html\"\n})\nexport class PreviewTooltip implements OnChanges {\n\n    @Input() previewDocument: PreviewDocument;\n    @Input() previewData: PreviewData;\n    @Input() entityActions: Action[] = [];\n    @Input() entityNavActions: boolean = true;\n    @Input() selectedTextActions: Action[] = [];\n    @Input() scalingFactor = 1.0;\n    @ViewChild('tooltip', {static: false}) tooltip : ElementRef;\n\n    // Selected text mode\n    selectedText: string = \"\";\n\n    // Entity hover mode\n    entityType: string = \"\";\n    entityValue: string;\n    entityDisplay: string;\n    entityLabel: string;\n    entityCount: number;\n    entityIdx: number;\n\n    // Tooltip fixed positioning\n    bottom: string = \"0px\";\n    left: string = \"0px\";\n    leftPin; // position of the tooltip pin relative to left\n    isBottom: boolean = false;\n\n    constructor(\n        private zone: NgZone,\n        private changeDetectorRef: ChangeDetectorRef,\n        private sanitizer: DomSanitizer){\n\n        }\n\n    /**\n     * Add mouse listeners to a new preview document in order to display the tooltip\n     * in response to specific hover of click events\n     * @param changes\n     */\n    ngOnChanges(changes: SimpleChanges){\n        if(changes[\"previewDocument\"] && !!this.previewDocument){\n\n            if (typeof this.previewDocument.document.addEventListener !== undefined) {\n                this.document.addEventListener(\"mouseup\", this.handleMouseUp, false);\n                this.document.addEventListener(\"mousedown\", this.handleMouseDown, false);\n                this.document.addEventListener(\"mousemove\", this.handleMouseMove, false);\n                this.window.addEventListener(\"scroll\", this.handleScroll, false);\n            }\n\n        }\n\n        if(changes[\"scalingFactor\"] && this.previewDocument) {\n            setTimeout(() => this.handleMouseUp());\n        }\n    }\n\n    /**\n     * Shortcut to the preview document\n     */\n    private get document(): Document{\n        return this.previewDocument.document;\n    }\n\n    /**\n     * Shortcut to the preview Window\n     */\n    private get window(): Window {\n        return this.previewDocument.getContentWindow();\n    }\n\n    /**\n     * Control the visibility of the tooltip\n     */\n    get visibility() : \"visible\" | \"hidden\" {\n        return (this.selectedText !== \"\" || this.entityType !== \"\")? \"visible\" : \"hidden\";\n    }\n\n    /**\n     * Position the tooltip above a bounding box\n     */\n    positionTooltipAbove(box: DOMRect | ClientRect){\n        this.zone.run(() => {   // Necessary to compute the right size of the tooltip when updating the text\n            const tooltipWidth = this.tooltip.nativeElement.getBoundingClientRect().width;\n            const tooltipHeight = this.tooltip.nativeElement.getBoundingClientRect().height;\n            let left = this.scalingFactor*(box.left + 0.5*box.width) - 0.5*tooltipWidth\n            left = Math.min(Math.max(left, 0), this.scalingFactor*this.document.body.clientWidth - tooltipWidth); // Avoid tooltip overflow\n            this.left = Math.round(left)+\"px\";\n\n            const leftPin = Math.round(100 * (this.scalingFactor*(box.left + 0.5*box.width) - left) / tooltipWidth);\n            this.leftPin = this.sanitizer.bypassSecurityTrustStyle(`${leftPin}%`);\n            //absolute top positioning\n            //this.bottom = Math.round(box.top-tooltipHeight-5+this.window.scrollY)+\"px\";\n            //absolute bottom positioning\n            //this.bottom = Math.round(this.document.documentElement.clientHeight - this.window.scrollY - box.top + 5)+\"px\";\n            //fixed bottom positioning\n            if (Math.round(box.top - 5 - tooltipHeight) > 0) {\n              this.isBottom = false;\n              this.bottom = Math.round(this.scalingFactor* (this.window.innerHeight - box.top) + 5)+\"px\";\n            } else {\n              this.isBottom = true;\n              this.bottom = Math.round(this.scalingFactor* (this.window.innerHeight - box.top - box.height) - tooltipHeight - 5)+\"px\";\n            }\n            this.changeDetectorRef.detectChanges();\n        });\n    }\n\n    /**\n     * Handle mouse button down: reinitilizes selection\n     */\n    handleMouseDown = (event: MouseEvent) => {\n        //if(event.target !== this.tooltip)\n        this.selectedText = \"\";\n        //this.changeDetectorRef.detectChanges();\n    }\n\n    /**\n     * Handle mouse button up: get the selected text and display a tooltip above it\n     */\n    handleMouseUp = () => {\n        const selection = this.document.getSelection();\n        this.selectedText = selection ? selection.toString().trim() : \"\";\n        if(selection && this.selectedText){\n            const range = selection.getRangeAt(0);\n            //console.log(\"Selected text: \", text);\n            //console.log(event);\n            //console.log(range.getBoundingClientRect());\n            this.changeDetectorRef.detectChanges(); // Refresh size of tooltip\n            this.positionTooltipAbove(range.getBoundingClientRect());\n        }\n        this.changeDetectorRef.detectChanges();\n    }\n\n    private _inTime: number = 0;\n    /**\n     * Handle mouse movements. If hovering an entity and no text is selected, will display a tooltip for this entity\n     */\n    handleMouseMove = (event: MouseEvent) => {\n        if(!this.selectedText && event[\"path\"]){\n            const path = <Element[]> event[\"path\"];\n            if(path.length>0){\n                const element = path[0];\n                if(element.nodeType === 1 && element.nodeName === \"SPAN\" && (element.attributes[\"data-entity-basic\"] || element.attributes[\"data-entity-display\"])){\n                    if(this.entityType !== element.className.split(\" \")[0] || this.entityDisplay !== element.textContent){  // Tooltip not already displayed\n                        this.entityType = element.className.split(\" \")[0];    // Update text (and visibility)\n                        this.entityDisplay = element.textContent || \"\";   // Tooltip content\n                        const value = element.attributes[\"data-entity-basic\"] || element.attributes[\"data-entity-display\"];\n                        this.entityValue = value.value;\n                        const highlights = this.previewData.highlightsPerCategory[this.entityType].values\n                            .find(v => v.value === value.value);\n                        this.entityCount = highlights ? highlights.locations.length : 0;\n                        this.entityLabel = this.previewData.highlightsPerCategory[this.entityType].categoryDisplayLabel;\n\n                        const idsplt = element.id.split(\"_\");\n                        const idx = parseInt(idsplt[idsplt.length-1], 10);\n                        const entity = this.findEntity(this.entityType, this.entityValue, (_, idIndex) => idIndex === idx);\n                        this.entityIdx = entity ? entity.valueIndex : 0;\n\n                        this.changeDetectorRef.detectChanges(); // Refresh size of tooltip\n                        this.positionTooltipAbove(element.getBoundingClientRect());\n                    }\n                    this._inTime = Date.now(); // Reset the timer over an entity\n                    return;\n                }\n            }\n        }\n        // We are not hovering an entity\n        if(this.entityType){    // If still displaying the tooltip...\n            const isOverTooltip = !!event[\"path\"].find(el => el.localName === \"sq-preview-tooltip\");\n            if(!isOverTooltip) {\n                if(Date.now() - this._inTime > 200){ // 200 ms tolerance before closing tooltip\n                    this.entityType = \"\";\n                    this.entityValue = \"\";\n                    this.entityDisplay = \"\";\n                    this.entityLabel = \"\";\n                    this.entityCount = 0;\n                    this.entityIdx = 0;\n                    this.changeDetectorRef.detectChanges(); // Turn off tooltip\n                }\n            }\n            else{\n                this._inTime = Date.now(); // Reset the timer over the tooltip\n            }\n        }\n    }\n\n    /**\n     * Handle scroll events\n     */\n    handleScroll = (event) => {\n        if(this.selectedText !== \"\"){\n            this.handleMouseUp(); // Reposition tooltip above selected text\n        }\n        else if(this.entityType !== \"\"){\n            this.entityType = \"\";\n            this.entityValue = \"\";\n            this.changeDetectorRef.detectChanges(); // Turn off tooltip\n        }\n    }\n\n    /**\n     * Move to the previous entity if possible\n     * @param event\n     */\n    previousEntity(event: Event){\n        event.stopPropagation(); // stop the propagation to avoid triggering the tooltip listeners\n        if(this.entityIdx > 1){\n            // Find the index of the previous entity\n            const entity = this.findEntity(this.entityType, this.entityValue, (valueIdx,_) => valueIdx === this.entityIdx-1);\n            if (entity) {\n                const idx = entity.idIndex;\n                this.previewDocument.selectHighlight(this.entityType, idx);\n            }\n        }\n    }\n\n    /**\n     * Move to the next entity if possible\n     * @param event\n     */\n    nextEntity(event: Event){\n        event.stopPropagation(); // stop the propagation to avoid triggering the tooltip listeners\n        if(this.entityIdx < this.entityCount){\n            // Find the index of the next entity\n            const entity = this.findEntity(this.entityType, this.entityValue, (valueIdx,_) => valueIdx === this.entityIdx+1);\n            if (entity) {\n                const idx = entity.idIndex;\n                this.previewDocument.selectHighlight(this.entityType, idx);\n            }\n        }\n    }\n\n    /**\n     * Executes a clicked action button in the context of a tooltip for hovered entities\n     * @param action\n     * @param event\n     */\n    entityAction(action: Action, event: Event){\n        event.stopPropagation(); // stop the propagation to avoid triggering the tooltip listeners\n        this.zone.run(() => {\n            if(action.action) {\n                action.action(action, <any> {type: this.entityType, idx: this.entityIdx, value: this.entityValue, display: this.entityDisplay});\n            }\n        });\n    }\n\n    /**\n     * Executes a clicked action button in the context of a tooltip for text selection\n     * @param action the action to execute\n     * @param event\n     */\n    selectedTextAction(action: Action, event: Event){\n        event.stopPropagation(); // stop the propagation to avoid triggering the tooltip listeners\n        this.zone.run(() => {\n            if(action.action) {\n                action.action(action, <any> {text: this.selectedText});\n            }\n        });\n    }\n\n    /**\n     * Helper function to find the indexes of a specific entity *occurrence*. Returns both the index within all\n     * of its own occurrences: valueIndex (eg. BILL GATES 3/14) AND the index corresponding to the\n     * entity id inside the document: idIndex (eg. id=\"person_32\").\n     * @param category eg. person\n     * @param value eg. BILL GATES\n     * @param predicate function testing whether it is the entity occurrence of interest\n     * @returns an object with both indexes\n     */\n    private findEntity(entityType: string, entityValue: string, predicate: (index: number, idIndex: number) => boolean)\n            : {valueIndex: number, idIndex: number} | undefined {\n        let currentIdx = 0;\n        // For each highlight in the doc\n        for(let i=0; i<this.previewData.highlightsPerLocation['length']; i++) {\n            const highlight = this.previewData.highlightsPerLocation[i];\n            const categories = Object.keys(highlight.positionInCategories);\n            // For each value of the highlight\n            for(let j=0; j<categories.length; j++){\n                // If this is the right entity type and value\n                if(categories[j] === entityType && highlight.values[j] === entityValue) {\n                    // Increase the counter\n                    currentIdx++;\n                    // If this is the idx we are looking for, return\n                    if(predicate(currentIdx, highlight.positionInCategories[entityType])){\n                        return {valueIndex: currentIdx, idIndex: highlight.positionInCategories[entityType]};\n                    }\n                }\n            }\n        }\n        return undefined;\n    }\n\n}\n","<div #tooltip\n    class=\"sq-selection-tooltip\" [ngClass]=\"isBottom ? 'sq-bottom-tooltip' : 'sq-top-tooltip'\"\n    [style.--left]=\"leftPin\" [ngStyle]=\"{'visibility' : visibility, 'bottom' : bottom, 'left' : left}\"\n    [style.--factor]=\"1.0/scalingFactor\">\n\n    <ng-container *ngIf=\"entityType && !selectedText\">\n        <span class=\"display\">{{ entityDisplay }} </span> <span class=\"label\">({{ entityLabel | sqMessage }}) </span>\n        <span class=\"index\">{{ entityIdx }} </span>/<span class=\"count\"> {{ entityCount }} </span>\n        <ng-container *ngIf=\"entityNavActions\">\n            <span class=\"nav-btn previous\" (click)=\"previousEntity($event)\" [ngClass]=\"{disabled: entityIdx <= 1}\" title=\"{{ 'msg#preview.previousHighlightButtonAltText' | sqMessage }}\">❬</span>\n            <span class=\"nav-btn next\" (click)=\"nextEntity($event)\" [ngClass]=\"{disabled: entityIdx >= entityCount}\" title=\"{{ 'msg#preview.nextHighlightButtonAltText' | sqMessage }}\">❭</span>\n        </ng-container>\n        <div class=\"btn-list\">\n            <button *ngFor=\"let action of entityActions\" (click)=\"entityAction(action, $event)\" [disabled]=\"action.disabled\" [hidden]=\"action.hidden\" title=\"{{ (action.title || '') | sqMessage:{values: {type: entityType, value: entityValue, display: entityDisplay} } }}\">\n                <span *ngIf=\"action.icon\" class=\"{{action.icon}}\"></span>\n                <span *ngIf=\"action.text\">{{ action.text | sqMessage:{values: {type: entityType, value: entityValue, display: entityDisplay} } }}</span>\n                <span *ngIf=\"action.iconAfter\" class=\"{{action.iconAfter}}\"></span>\n            </button>\n        </div>\n    </ng-container>\n\n\n    <ng-container *ngIf=\"selectedText\">\n        <ng-container *ngFor=\"let action of selectedTextActions\">\n            <button (click)=\"selectedTextAction(action, $event)\" [disabled]=\"action.disabled\" [hidden]=\"action.hidden\" title=\"{{ (action.title || '') | sqMessage:{values: {text: selectedText.slice(0,50)} } }}\">\n                <span *ngIf=\"action.icon\" class=\"{{action.icon}}\"></span> <span *ngIf=\"action.text\">{{ action.text | sqMessage:{values: {text: selectedText.slice(0,50)} } }}</span> <span *ngIf=\"action.iconAfter\" class=\"{{action.iconAfter}}\"></span>\n            </button>\n        </ng-container>\n    </ng-container>\n</div>\n","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Utils } from '@sinequa/core/base';\nimport { UIService } from '../ui.service';\n\n@Component({\n    selector: '[sqSticky]',\n    template: `\n<div [ngStyle]=\"{'margin-top.px': marginTop}\"></div>\n<div #container class=\"sticky-container\" [ngStyle]=\"{'top.px': top, 'bottom.px': bottom}\">\n    <ng-content></ng-content>\n</div>\n`,\n    styles: [`\n.sticky-container {\n    position: sticky;\n    position: -webkit-sticky;\n}\n    `],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StickyComponent implements OnInit, AfterViewInit, OnDestroy{\n    @Input(\"sqSticky\") offsets?: {top: number, bottom: number};\n    @ViewChild(\"container\") container: ElementRef;\n\n    top?: number;\n    bottom?: number;\n    scrollY: number;\n    marginTop = 0;\n    \n    private listener;\n    \n    constructor(\n        protected ui: UIService,\n        protected cdRef: ChangeDetectorRef){\n    }\n\n    onScroll(forceScrollDown = false) {\n        const scrollDelta = window.pageYOffset - this.scrollY;\n        this.scrollY = window.pageYOffset;\n\n        const offsets = this.offsets || {top: 0, bottom: 0};\n        const componentHeight = this.container.nativeElement.getBoundingClientRect().height;\n        // Scrolling down (OR top of page OR forced after a scroll up OR component height small than screen height)\n        if(scrollDelta >= 0 || this.scrollY === 0 || forceScrollDown || componentHeight + offsets.top + offsets.bottom < window.innerHeight) {\n            this.marginTop = Math.min(this.scrollY, this.marginTop);\n            this.bottom = undefined;\n            this.top = Math.min(window.innerHeight - componentHeight - offsets.bottom, offsets.top);\n        }\n        // Scrolling up\n        else {\n            this.marginTop = Math.max(this.scrollY + window.innerHeight - componentHeight -offsets.bottom - offsets.top, this.marginTop);\n            this.bottom = window.innerHeight - offsets.top - componentHeight;\n            this.top = undefined;\n            if(this.scrollY <= this.marginTop) {\n                this.postScrollUp();\n            }\n        }\n        this.cdRef.markForCheck();\n    }\n\n    postScrollUp = Utils.debounce(() => {\n        this.onScroll(true);\n    }, 250);\n\n    ngOnInit() {\n        if(CSS.supports(\"position\", \"sticky\") || CSS.supports(\"position\", \"-webkit-sticky\")) {            \n            this.scrollY = window.pageYOffset;\n            this.top = (this.offsets?.top || 0);\n        }\n    }\n\n    ngAfterViewInit() {\n        // position: sticky is not supported in Internet Explorer. A workaround could be to rely on position: relative and position: fixed, with additional logic.\n        if(CSS.supports(\"position\", \"sticky\") || CSS.supports(\"position\", \"-webkit-sticky\")) {\n            this.listener = () => this.onScroll();\n            window.addEventListener('scroll', this.listener);\n            window.addEventListener('resize', this.listener);\n            this.ui.addElementResizeListener(this.container.nativeElement, this.listener);\n        }\n    }\n\n    ngOnDestroy() {\n        if(this.listener) {\n            window.removeEventListener('scroll', this.listener);\n            window.removeEventListener('resize', this.listener);\n            this.ui.removeElementResizeListener(this.container.nativeElement, this.listener);\n        }\n    }\n\n}\n","export default {\n    \"validation\": {\n        \"min\": \"The value must be at least {min}\",\n        \"max\": \"The value can be no more than {max}\",\n        \"required\": \"This field is required\",\n        \"requiredTrue\": \"This field must be set\",\n        \"email\": \"A valid email address is required\",\n        \"minLength\": \"The value must have at least {requiredLength, plural, one {# character} other {# characters}}\",\n        \"maxLength\": \"The value can have no more than {requiredLength, plural, one {# character} other {# characters}}\",\n        \"pattern\": \"The value is invalid\",\n        \"unique\": \"This field must be unique\",\n        \"integer\": \"The value must be an integer\",\n        \"number\": \"The value must be a number\",\n        \"date\": \"\",\n        \"range\": \"The first value must be less than or equal to the second\"\n    }\n};\n","const LOGIN_MODULE_PROVIDERS = [];\n\nexport {LOGIN_MODULE_PROVIDERS};\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport _enLabels from \"./en\";\nimport _frLabels from \"./fr\";\nimport _deLabels from \"./de\";\n\nconst enLabels = Utils.merge({}, _enLabels, enSearch, enModal);\nconst frLabels = Utils.merge({}, _frLabels, frSearch, frModal);\nconst deLabels = Utils.merge({}, _deLabels, deSearch, deModal);\n\nexport { enLabels, frLabels, deLabels };\n","export * from \"./public-api\";","export default {\n    \"modal\": {\n        \"buttons\": {\n            \"ok\": \"OK\",\n            \"cancel\": \"Cancel\",\n            \"yes\": \"Yes\",\n            \"no\": \"No\",\n            \"abort\": \"Abort\",\n            \"retry\": \"Retry\",\n            \"ignore\": \"Ignore\"\n        },\n\n        \"confirm\": {\n            \"title\": \"Confirm\"\n        },\n\n        \"prompt\": {\n            \"title\": \"Enter a value\"\n        }\n    }\n};\n","export default {\n    network: {\n        settings: {\n            physics: \"Physics\",\n            springLength: \"Spring Length\",\n            springConstant: \"Spring Constant\",\n            damping: \"Damping\",\n            repulsion: \"Repulsion\",\n            gravity: \"Gravity\",\n            defaults: \"Defaults\"\n        },\n        actions: {\n            refresh: \"Refresh network\",\n            providers: \"Data sources\",\n            fetchMoreAll: \"Fetch more data for all aggregations\",\n            fetchMoreAllText: \"Fetch more data\",\n            fetchMoreAgg: \"Fetch more data for aggregation {agg}\",\n            expandNode: \"Expand node {label}\",\n            expandNodeWith: \"Expand node with {agg}\",\n            toggle: \"Toggle this provider on/off\",\n            active: \"Active\",\n            inactive: \"Deactivated\",\n            reset: \"Reset\",\n            resetTitle: \"Clear the data of this provider and start again\",\n            filterSearch: \"Filter search with {label}\",\n            filterSearch2: \"Filter search with {label1} and {label2}\",\n            enrichNode: \"Enrich node {label}\",\n            expandMeta: \"Expand metadata\",\n            collapseMeta: \"Collapse metadata\",\n        },\n        infocards: {\n            count: \"Count\",\n            aggregation: \"Aggregation\",\n            record: \"Record\",\n            expand: \"Expand\",\n            collapse: \"Collapse\",\n            close: \"Close\",\n            focus: \"Focus node\"\n        }\n    }\n};\n","import {NgModule, ModuleWithProviders} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {LoadComponentModule} from \"@sinequa/core/load-component\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\n\nimport {UtilsModule} from \"@sinequa/components/utils\";\nimport {BsActionModule} from \"@sinequa/components/action\";\nimport {BsSelectionModule} from \"@sinequa/components/selection\";\n\nimport {RESULTS_VIEWS, DEFAULT_VIEW, ResultsView} from \"../results-view.service\";\n\nimport {BsResultsViewSelector} from \"./results-view-selector/results-view-selector\";\nimport {BsResultsGridView} from \"./results-grid-view/results-grid-view\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n\n        LoadComponentModule,\n        IntlModule,\n        ValidationModule,\n\n        UtilsModule,\n        BsActionModule,\n        BsSelectionModule\n    ],\n    declarations: [\n        BsResultsViewSelector,\n        BsResultsGridView,\n    ],\n    exports: [\n        BsResultsViewSelector,\n        BsResultsGridView,\n    ],\n})\nexport class BsResultsViewModule {\n    public static forRoot(resultsViews: ResultsView[], defaultView: ResultsView): ModuleWithProviders<BsResultsViewModule> {\n        return {\n            ngModule: BsResultsViewModule,\n            providers: [\n                {\n                    provide: RESULTS_VIEWS,\n                    useValue: resultsViews\n                },\n                {\n                    provide: DEFAULT_VIEW,\n                    useValue: defaultView\n                }\n            ]\n        };\n    }\n}\n","import {Directive, Input, TemplateRef, ViewContainerRef, OnDestroy, ChangeDetectorRef} from '@angular/core';\nimport {ɵMatchMedia, BreakPointRegistry} from '@angular/flex-layout';\nimport {Subject, throwError} from \"rxjs\";\nimport {startWith, switchMap, map} from \"rxjs/operators\";\n\n// Adapted from https://github.com/angular/flex-layout/issues/142#issuecomment-379465022\n// Change ɵMatchMedia => MatchMedia when we move to angular 8\n@Directive({\n    selector: \"[sqMediaIf]\",\n})\nexport class MediaIf implements OnDestroy {\n    private hasView = false;\n    private matcher = new Subject<string>();\n    private subscription = this.matcher\n        .pipe(\n            map(alias => {\n                const breakpoint = this.breakpoints.findByAlias(alias);\n                if (!breakpoint) {\n                    throwError(`breakpoint not found for ${alias}`);\n                    return \"\";\n                }\n                else {\n                    return breakpoint.mediaQuery;\n                }\n            }),\n            switchMap(mq => {\n                //console.log(\"MediaIf:\", mq);\n                return this.matchMedia.observe([mq], true)\n                    .pipe(\n                        map(result => {\n                            //console.log(\"MediaChange:\", result);\n                            return result.matches;\n                        }),\n                        startWith(this.matchMedia.isActive(mq)));\n            }))\n        .subscribe(matches => matches ? this.createView() : this.destroyView());\n\n    @Input()\n    set sqMediaIf(value: string) {\n        this.matcher.next(value);\n    }\n\n    constructor(\n        private template: TemplateRef<any>,\n        private viewContainer: ViewContainerRef,\n        private breakpoints: BreakPointRegistry,\n        private matchMedia: ɵMatchMedia,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n\n    private createView() {\n        if (!this.hasView) {\n            this.viewContainer.createEmbeddedView(this.template);\n            this.changeDetectorRef.markForCheck();\n            this.hasView = true;\n        }\n    }\n\n    private destroyView() {\n        if (this.hasView) {\n            this.viewContainer.clear();\n            this.hasView = false;\n        }\n    }\n}","import {Component, Inject, HostBinding} from \"@angular/core\";\nimport {MODAL_MODEL, ModalRef, ConfirmOptions, ConfirmType} from \"@sinequa/core/modal\";\n\n@Component({\n    selector: \"sq-confirm\",\n    templateUrl: \"./confirm.component.html\"\n})\nexport class BsConfirm {\n    @HostBinding(\"class.sq-confirm\") true;\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: ConfirmOptions,\n        protected modalRef: ModalRef) {\n    }\n\n    get title(): string {\n        return this.model.title ? this.model.title : \"msg#modal.confirm.title\";\n    }\n\n    public getMessageClass(confirmType): string {\n        switch (confirmType) {\n            case ConfirmType.Info:\n                return \"alert-info\";\n            case ConfirmType.Success:\n                return \"alert-sucess\";\n            case ConfirmType.Warning:\n                return \"alert-warning\";\n            case ConfirmType.Error:\n                return \"alert-danger\";\n            default:\n                return \"\";\n        }\n    }\n}","<sq-modal\n    [title]=\"title\"\n    [buttons]=\"model.buttons\">\n    <div class=\"alert {{getMessageClass(model.confirmType)}}\">{{model.message | sqMessage:model.messageParams}}</div>\n</sq-modal>\n","import {\n    Component,\n    ElementRef,\n    EventEmitter,\n    Output,\n    Input,\n    OnChanges,\n    SimpleChanges,\n} from \"@angular/core\";\nimport { Keys } from \"@sinequa/core/base\";\nimport { AutocompleteItem } from \"@sinequa/components/autocomplete\";\n\n/**\n * Component containing a form and autocomplete to search\n * through the list labels according to a specific type (public/private) and select one(s) of them\n *\n * The component can be used as custom component in the Action\n * menu's modals.\n */\n\n@Component({\n    selector: \"sq-labels-autocomplete\",\n    templateUrl: \"./labels-autocomplete.component.html\",\n    styles: [\n        `\n            .sq-dropdown-form {\n                min-width: 13rem;\n                display: inline;\n            }\n            .disabled {\n                cursor: not-allowed;\n            }\n            :host ::ng-deep .sq-autocomplete-list {\n                width: 50% !important;\n            }\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n            .label-public {\n                background-color: #4fc3f7;\n                margin: 2px;\n            }\n            .label-private {\n                background-color: #7283a7;\n                margin: 2px;\n            }\n\n            :host div {\n                width: 100%;\n                display: flex;\n                flex-wrap: wrap;\n                align-items: center;\n                height: unset !important;\n            }\n            :host input {\n                border: none;\n                flex-grow: 1;\n                flex-basis: 100px;\n                min-width: 100px;\n            }\n            :host input:focus {\n                outline: none;\n            }\n        `,\n    ],\n})\nexport class BsLabelsAutocompleteComponent implements OnChanges {\n    /** Event synchronizing the list of selected labels and label's type in the parent component */\n    @Output() labelsUpdate = new EventEmitter<string[]>();\n\n    @Input() public: boolean; /** Whether labels are public/private */\n    @Input() disableAutocomplete: boolean = false /** Whether the autocomplete input is disabled or not */;\n    @Input() allowNewLabels: boolean; /** Whether enable adding new labels or not */\n    @Input() allowManagePublicLabels: boolean; /** Define the right of adding new labels */\n    @Input() initLabels: string[] = []; /** Initial labels to be displayed in the labelsAutocomplete input*/\n\n    labelsItems: AutocompleteItem[] = []; /** List of assigned labels to selected record(s) */\n\n    constructor(private elementRef: ElementRef) {}\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.public) {\n            this.labelsItems = [];\n        }\n        if (changes.initLabels) {\n            this.labelsItems = this.initLabels.map((label) => {\n                return {\n                    display: label,\n                    category: \"\",\n                };\n            });\n        }\n    }\n\n    removeItem(item: AutocompleteItem) {\n        this.labelsItems.splice(this.labelsItems.indexOf(item), 1);\n        this.labelsItems = [\n            ...this.labelsItems,\n        ]; /** Need to programmatically update this.labelsItems object in order to fire ngOnChanges hook in sqAutocompleteLabels */\n        this.labelsUpdate.next(this.labelsItems.map((item) => item.display));\n    }\n\n    onLabelsItemsChanged(labelsItems: AutocompleteItem[]) {\n        this.labelsItems = labelsItems; /** Need to Programmatically update this.labelsItems to catch updates happening in the sqAutocompleteLabels  */\n        this.labelsUpdate.next(labelsItems.map((item) => item.display));\n    }\n\n    private getDropdownItem(): HTMLElement | null {\n        if (this.elementRef) {\n            let current: HTMLElement | null = this.elementRef\n                .nativeElement as HTMLElement;\n            while (current && !current.classList.contains(\"dropdown-item\")) {\n                current = current.parentElement;\n            }\n            return current;\n        }\n        return null;\n    }\n\n    keydown(event: KeyboardEvent) {\n        // Intercept tab and set focus to surrounding dropdown-item\n        if (event.keyCode === Keys.tab) {\n            const dropdownItem = this.getDropdownItem();\n            if (dropdownItem) {\n                dropdownItem.focus();\n                event.preventDefault();\n                return false;\n            }\n        }\n        return undefined;\n    }\n\n    keypress(event: KeyboardEvent) {\n        if (event.keyCode === Keys.enter) {\n            // Stop click event firing on surrounding anchor (Firefox)\n            event.preventDefault();\n            return false;\n        }\n        return undefined;\n    }\n}\n","<form name=\"labelsForm\" class=\"d-inline\">\n    <section class=\"sq-dropdown-form\">\n        <div class=\"form-control\">\n            <span\n                *ngFor=\"let item of labelsItems\"\n                class=\"badge badge-pill badge-info align-self-center\"\n                [ngClass]=\"{'label-public': public, 'label-private': !public}\">\n                {{ item.display }}\n                <span class=\"fas fa-times-circle clickable\" (click)=\"removeItem(item)\"></span>\n            </span>\n            <input type=\"text\"\n                class=\"input-autocomplete flex-grow-1\"\n                name=\"labelName\"\n                spellcheck=\"false\"\n                autocomplete=\"off\"\n                sqAutocompleteLabels\n                [public]=\"public\"\n                [placeholder]=\"'msg#labels.selectLabel' | sqMessage\"\n                [dropdown]=\"dropdown\"\n                [allowNewLabels]=\"allowNewLabels\"\n                [allowManagePublicLabels]=\"allowManagePublicLabels\"\n                (keydown)=\"keydown($event)\"\n                (keypress)=\"keypress($event)\"\n                (itemsUpdate)=\"onLabelsItemsChanged($event)\"\n                [disabled]=\"disableAutocomplete\"\n                [off]=\"disableAutocomplete\"\n                [class.disabled]=\"disableAutocomplete\"\n                [labelsItems]=\"labelsItems\">\n        </div>\n        <sq-autocomplete-list #dropdown>\n            <ng-template #itemTpl let-item>\n                <div class=\"autocomplete-item p-2\">{{item.display}}\n                </div>\n            </ng-template>\n        </sq-autocomplete-list>\n    </section>\n</form>\n\n\n","import {Component, Input, HostBinding, ViewEncapsulation} from \"@angular/core\";\nimport {ModalButton} from \"@sinequa/core/modal\";\n\n@Component({\n    selector: \"sq-modal\",\n    templateUrl: \"./modal.component.html\",\n    styleUrls: [\"./modal.component.scss\"],\n    encapsulation: ViewEncapsulation.None\n})\nexport class BsModal {\n    @Input() title: string;\n    @Input() buttons: ModalButton[];\n    @Input() showHeader = true;\n    @Input() showFooter = true;\n    @Input() isProcessingState = false;\n    @HostBinding(\"class.sq-modal\") true;\n}\n","<div class=\"modal-dialog\" cdkTrapFocus [cdkTrapFocusAutoCapture]=\"true\">\n    <div class=\"modal-content\">\n        <sq-modal-header *ngIf=\"showHeader\" [title]=\"title\">\n            <ng-content select=\"[header]\"></ng-content>\n        </sq-modal-header>\n        <div class=\"modal-body\">\n            <ng-content></ng-content>\n        </div>\n        <sq-modal-footer *ngIf=\"showFooter\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessingState\">\n            <ng-content select=\"[footer]\"></ng-content>\n        </sq-modal-footer>\n    </div>\n</div>\n","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AppService, FormatService} from \"@sinequa/core/app-utils\";\nimport {CCColumn, Results} from \"@sinequa/core/web-services\";\nimport {SelectionService} from \"@sinequa/components/selection\";\nimport {SearchService} from \"@sinequa/components/search\";\nimport {ResultsView} from \"../../results-view.service\";\n\nexport interface GridView extends ResultsView {\n    columns: Column[];\n}\n\nexport interface Column {\n    active: boolean;\n    title: string;\n    field: string;\n    sortable: boolean;\n    renderAsHtml: boolean;\n}\n\nexport interface ColumnData {\n    config: Column;\n    column: CCColumn | undefined;\n    // Sorting data\n    sortIndex?: number;\n    ascending?: boolean;\n    sortIcon?: string;\n    sortIndicator?: string;\n}\n\n@Component({\n    selector: \"sq-results-grid-view\",\n    templateUrl: \"./results-grid-view.html\"\n})\nexport class BsResultsGridView implements OnChanges {\n    @Input() results: Results;\n    @Input() view: GridView;\n    private orderBy: string | undefined;\n    columnsData: ColumnData[] | undefined;\n\n    constructor(\n        public appService: AppService,\n        public searchService: SearchService,\n        public formatService: FormatService,\n        private selectionService: SelectionService) {\n    }\n\n    observeQueryFields() {\n        this.initSorts();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.columnsData) {\n            if (!!this.view.columns) {\n                this.columnsData = this.view.columns.filter(config => config.active).map(config => ({\n                    config: config,\n                    column: this.appService.getColumn(config.field)\n                }));\n                this.clearSorts();\n            }\n            else {\n                this.columnsData = [];\n            }\n        }\n        if (!!changes[\"query\"]) {\n            this.observeQueryFields();\n        }\n    }\n\n\n    toggleSelectedRecords() {\n        this.selectionService.toggleSelectedRecords();\n    }\n\n    get haveSelectedRecords(){\n        return this.selectionService.haveSelectedRecords;\n    }\n\n    getSortIndicator(columnData: ColumnData): string | undefined {\n        if (columnData.sortIndex === -1) {\n            return undefined;\n        }\n        if (this.maxSortIndex === 0) {\n            return undefined;\n        }\n        switch (columnData.sortIndex || -1 + 1) {\n            case 1: return \"\\u00B9\";\n            case 2: return \"\\u00B2\";\n            case 3: return \"\\u00B3\";\n            case 4: return \"\\u2074\";\n            case 5: return \"\\u2075\";\n            case 6: return \"\\u2076\";\n            case 7: return \"\\u2077\";\n            case 8: return \"\\u2078\";\n            case 9: return \"\\u2079\";\n            default: return \"\\u207A\";\n        }\n    }\n\n    ascendingFirst(column: Column): boolean {\n        //return this.appService.isNumber(column.field);\n        return false;\n    }\n\n    get maxSortIndex(): number {\n        let sortIndex = -1;\n        if (this.columnsData) {\n            for (const columnData of this.columnsData) {\n                if (columnData.sortIndex !== undefined && columnData.sortIndex > sortIndex) {\n                    sortIndex = columnData.sortIndex;\n                }\n            }\n        }\n        return sortIndex;\n    }\n\n    _setSort(columnData: ColumnData, ascending: boolean) {\n        const previousSortIndex = columnData.sortIndex;\n        if (previousSortIndex === -1) {\n            columnData.sortIndex = this.maxSortIndex + 1;\n        }\n        columnData.ascending = ascending;\n        columnData.sortIcon = columnData.ascending ? \"fas fa-caret-up\" : \"fas fa-caret-down\";\n        columnData.sortIndicator = this.getSortIndicator(columnData);\n        if (previousSortIndex === -1) {\n            if (this.columnsData) {\n                for (const columnData1 of this.columnsData) {\n                    columnData1.sortIndicator = this.getSortIndicator(columnData1);\n                }\n            }\n        }\n    }\n\n    _clearSort(columnData: ColumnData) {\n        const previousSortIndex = columnData.sortIndex || -1;\n        columnData.sortIndex = -1;\n        columnData.ascending = false;\n        columnData.sortIcon = \"fas fa-sort\";\n        columnData.sortIndicator = undefined;\n        if (previousSortIndex !== -1) {\n            if (this.columnsData) {\n                for (const columnData1 of this.columnsData) {\n                    if (columnData1.sortIndex !== undefined && columnData1.sortIndex > previousSortIndex) {\n                        columnData1.sortIndex--;\n                    }\n                    columnData1.sortIndicator = this.getSortIndicator(columnData1);\n                }\n            }\n        }\n    }\n\n    clearSorts() {\n        if (this.columnsData) {\n            for (const columnData of this.columnsData) {\n                this._clearSort(columnData);\n            }\n        }\n    }\n\n    isSortable(columnData: ColumnData): boolean {\n        return !!columnData && columnData.config.sortable && this.appService.isSortable(columnData.config.field);\n    }\n\n    initSorts() {\n        if (this.searchService.query.orderBy === this.orderBy) {\n            return;\n        }\n        this.orderBy = this.searchService.query.orderBy;\n        this.clearSorts();\n        if (!!this.orderBy) {\n            const parts = Utils.split(this.orderBy, \",\");\n            for (const part of parts) {\n                const tokens = Utils.split(part, \" \");\n                if (tokens.length > 0) {\n                    const field = tokens[0];\n                    if (this.columnsData) {\n                        const columnData = this.columnsData.find(value => Utils.eqNC(field, value.config.field));\n                        if (columnData && this.isSortable(columnData)) {\n                            this._setSort(columnData, tokens.length > 1 ? Utils.eqNC(tokens[1], \"asc\") : true);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    setSort(columnData: ColumnData) {\n        if (this.isSortable(columnData)) {\n            if (columnData.sortIndex !== -1) {\n                if (this.ascendingFirst(columnData.config)) {\n                    if (columnData.ascending) {\n                        this._setSort(columnData, false);\n                    }\n                    else {\n                        this._clearSort(columnData);\n                    }\n                }\n                else {\n                    if (columnData.ascending) {\n                        this._clearSort(columnData);\n                    }\n                    else {\n                        this._setSort(columnData, true);\n                    }\n                }\n            }\n            else {\n                this._setSort(columnData, this.ascendingFirst(columnData.config));\n            }\n            const orderBy: string[] = [];\n            if (this.columnsData) {\n                for (let sortIndex = 0; ; sortIndex++) {\n                    const columnData = this.columnsData.find(columnData => columnData.sortIndex === sortIndex);\n                    if (!columnData) {\n                        break;\n                    }\n                    if (orderBy.length !== 0) {\n                        orderBy.push(\",\");\n                    }\n                    orderBy.push(columnData.config.field);\n                    if (!columnData.ascending) {\n                        orderBy.push(\" desc\");\n                    }\n                }\n            }\n            if (orderBy.length === 0) {\n                this.searchService.query.orderBy = this.orderBy = undefined;\n            }\n            else {\n                this.searchService.query.orderBy = this.orderBy = orderBy.join(\"\");\n            }\n            this.searchService.search();\n        }\n    }\n\n}","<table class=\"sq-results-grid-view\">\n    <thead>\n        <tr>\n            <th class=\"sq-grid-view-checkbox\">\n                <label class=\"custom-control custom-checkbox\" title=\"{{(haveSelectedRecords ? 'msg#results.resultsGridView.unselectDocuments' : 'msg#results.resultsGridView.selectDocuments') | sqMessage}}\">\n                    <input class=\"custom-control-input\" type=\"checkbox\" [checked]=\"haveSelectedRecords\" (change)=\"toggleSelectedRecords()\">\n                    <span class=\"custom-control-label\">&#8203;</span>\n                </label>            \n            </th>\n            <th *ngFor=\"let columnData of columnsData\" scope=\"col\" [ngClass]=\"{'sq-clickable': isSortable(columnData)}\" (click)=\"setSort(columnData)\">{{columnData.config.title | sqMessage}}{{columnData.sortIndicator}}<span *ngIf=\"isSortable(columnData)\" class=\"{{columnData.sortIcon}}\"></span></th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let record of results.records\">\n            <td class=\"sq-grid-view-checkbox\">\n                <sq-result-selector [record]=\"record\"></sq-result-selector>\n            </td>\n            <ng-container *ngFor=\"let columnData of columnsData; let $index = index\">\n                <td *ngIf=\"columnData.config.renderAsHtml\" [attr.scope]=\"$index === 0 ? 'row' : null\" [innerHTML]=\"record[columnData.config.field] | sqValue:columnData.column\"></td>\n                <td *ngIf=\"!columnData.config.renderAsHtml\" [attr.scope]=\"$index === 0 ? 'row' : null\">{{record[columnData.config.field] | sqValue:columnData.column}}</td>\n            </ng-container>\n        </tr>\n    </tbody>\n</table>","export * from \"./chart/chart\";\nexport * from \"./facet-chart/facet-chart\";\nexport * from \"./ngx-charts.module\";","import {Component, Input, Output, EventEmitter} from \"@angular/core\";\nimport {trigger, state, animate, transition, style, AnimationTriggerMetadata} from '@angular/animations';\n\nexport function collapseButtonAnimations(timings: number | string): AnimationTriggerMetadata[] {\n    return [\n        trigger('toggleCollapsed', [\n            state('0', style({transform: 'rotate(0deg)'})),\n            state('1', style({transform: 'rotate(-180deg)'})),\n            transition('0 <=> 1', [\n                animate(timings)\n            ])\n        ]),\n    ];\n}\n\n@Component({\n    selector: \"sq-collapse-button\",\n    templateUrl: \"./collapse-button.component.html\",\n    animations: collapseButtonAnimations(\".15s ease-in-out\")\n})\nexport class CollapseButton {\n    @Input() collapsed: boolean;\n    @Input() icon: string;\n    @Input() text: string;\n    @Output() state: EventEmitter<boolean>;\n\n    constructor() {\n        this.state = new EventEmitter<boolean>();\n        this.collapsed = true;\n    }\n\n    toggleCollapsed() {\n        this.collapsed = !this.collapsed;\n        this.state.emit(this.collapsed);\n    }\n}","<ng-container *ngIf=\"!!icon\"><span class=\"{{icon}}\"></span><ng-container *ngIf=\"!!text\"> </ng-container></ng-container><!--\n--><span *ngIf=\"!!text\" (click)=\"toggleCollapsed()\">{{text | sqMessage}}</span><!--\n--><span class=\"fas fa-chevron-up fa-fw\" role=\"button\" (click)=\"toggleCollapsed()\" [@toggleCollapsed]=\"collapsed\" title=\"{{(collapsed ? 'msg#collapseButton.expand' : 'msg#collapseButton.collapse') | sqMessage}}\"></span>","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {BaseModule} from \"@sinequa/core/base\";\n\nimport {LoadComponentDirective} from \"./load-component.directive\";\nimport {LOAD_COMPONENT_MODULE_PROVIDERS} from \"./module.providers\";\n\n/**\n * This module provides functionality for the dynamic loading of components based on the\n * techniques described in the [angular documentation]{@link https://angular.io/guide/dynamic-component-loader}\n */\n// @dynamic\n@NgModule({\n    imports: [\n        CommonModule,\n        BaseModule\n    ],\n    declarations: [\n        LoadComponentDirective\n    ],\n    exports: [\n        LoadComponentDirective\n    ],\n    providers: [\n        ...LOAD_COMPONENT_MODULE_PROVIDERS\n    ]\n})\nexport class LoadComponentModule {\n}\n","export * from \"./public-api\";","export default {\n    \"baskets\": {\n        \"baskets\": \"Ablagekörbe\",\n        \"addToBasket\": \"Zum Ablagekorb hinzufügen\",\n        \"removeFromBasket\": \"Aus dem Ablagekorb entfernen\",\n        \"removeFromAllBaskets\": \"Von allen Ablagekörben entfernen\",\n        \"removeFromAllBasketsConfirmation\": \"Möchten Sie dieses Eregbnis wirklich von diesen Ablagekörben entfernen: {baskets}?\",\n        \"basketAlreadyExists\": \"Es existiert bereits ein Ablagekorb mit diesem Namen. Möchten Sie ihn ersetzen?\",\n        \"noBasket\": \"Sie haben noch kein Dokument zu einem Ablagekorb hinzugefügt...\",\n        \"createBasket\": \"Ablagekorb erstellen\",\n        \"manageBaskets\": \"Ablagekörbe verwalten\",\n        \"delete\": \"Diesen Ablagekorb löschen\"\n    },\n\n    \"editBasket\": {\n        \"title\": \"Ablagekorb\",\n        \"name\": \"Name\"\n    },\n\n    \"manageBaskets\": {\n        \"title\": \"Ablagekörbe verwalten\",\n        \"edit\": \"Bearbeiten\",\n        \"reorder\": \"Neu sortieren\",\n        \"remove\": \"Entfernen\",\n        \"removeAll\": \"Alle entfernen\",\n        \"name\": \"Name\"\n    },\n\n    \"selectBasket\": {\n        \"title\": \"Ablagekorb auswählen\",\n        \"newBasket\": \"Neuer Ablagekorb...\"\n    },\n\n};\n","export * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export default {\n    \"facet\": {\n        \"showFacetTextView\": \"Afficher le texte\",\n        \"showFacetChartView\": \"Afficher le graphique\",\n        \"itemExclude\": \"Exclure\",\n        \"applyFilters\": \"{selections, plural, one {Appliquer le filtre} other {Appliquer les filtres}}\",\n        \"clearFilters\": \"{selected, plural, one {Effacer le filtre} other {Effacer les filtres}}\",\n        \"loadMore\": \"Charger plus\",\n        \"showMore\": \"Afficher plus\",\n        \"showLess\": \"Afficher moins\",\n        \"displayed\": \"Affiché\",\n        \"removeAll\": \"Supprimer tout\",\n        \"searchPlaceholder\": \"Rechercher...\",\n        \"itemSelect\": \"Sélectionner cette valeur\",\n        \"itemUnselect\": \"Désélectionner cette valeur\",\n        \"filterItem\": \"Garder les documents qui contiennent {terme}\",\n        \"filterItems\" : \"Garder les documents qui contiennent n'importe lequel de ces termes\",\n        \"filterItemsAnd\": \"Garder les documents qui contiennent tous ces termes\",\n        \"excludeItems\" : \"Exclure les documents contenant un de ces termes\",\n        \"clearSelects\" : \"Enlever les filtres\",\n        \"searchItems\" : \"Rechercher une valeur dans cette liste\",\n        \"searchNoResult\": \"Pas de résultat\",\n        \"openItem\": \"Ouvrir\",\n        \"closeItem\": \"Refermer\",\n        \"authors\": {\n            \"title\": \"Auteurs\"\n        },\n        \"concepts\": {\n            \"title\": \"Concepts\"\n        },\n        \"company\": {\n            \"title\": \"Sociétés\"\n        },\n        \"docformat\": {\n            \"title\": \"Formats\"\n        },\n        \"doctype\": {\n            \"title\": \"Types de document\"\n        },\n        \"documentlanguages\": {\n            \"title\": \"Langues\"\n        },\n        \"fileext\": {\n            \"title\": \"Extensions de fichiers\"\n        },\n        \"filename\": {\n            \"title\": \"Noms de fichiers\"\n        },\n        \"geo\": {\n            \"title\": \"Lieux\"\n        },\n        \"matchingpartnames\": {\n            \"title\": \"Partnames\"\n        },\n        \"modified\": {\n            \"title\": \"Dates\"\n        },\n        \"person\": {\n            \"title\": \"Personnes\"\n        },\n        \"refine\": {\n            \"title\": \"Affiner la recherche\",\n            \"input\": {\n                \"label\": \"Affiner\",\n                \"buttonTitle\": \"Affiner\",\n                \"placeholder\": \"Affiner par ...\"\n            }\n        },\n        \"size\": {\n            \"title\": \"Tailles\"\n        },\n        \"tagcloud\": {\n            \"title\": \"Nuage de mots\"\n        },\n        \"title\": {\n            \"title\": \"Titres\"\n        },\n        \"treepath\": {\n            \"title\": \"Sources\"\n        },\n        \"recentQueries\": {\n            \"title\": \"Requêtes récentes\"\n        },\n        \"recentQueriesPublic\": {\n            \"title\": \"Requêtes publiques récentes\"\n        },\n        \"mySearch\": {\n            \"title\": \"Ma recherche\",\n            \"itemRemove\": \"Supprimer\"\n        },\n        \"search\": {\n            \"label\": \"Rechercher\",\n            \"buttonTitle\": \"Rechercher\",\n            \"placeholder\": \"Rechercher ...\",\n            \"showSearchForm\": \"Afficher le formulaire de recherche\",\n            \"hideSearchForm\": \"Masquer le formulaire de recherche\"\n        },\n        \"range\": {\n            \"year\": \"{date, date, sqYear}\",\n            \"monthYear\": \"{date, date, sqMonthYear}\",\n            \"weekYear\": \"s{week, number, sqWeek} {weekYear, number, sqYear}\",\n            \"apply\": \"Appliquer\",\n            \"clear\": \"Effacer\",\n            \"unavailable\": \"Aucune plage disponible\"\n        },\n\n        \"filters\":{\n            \"add\":\"Ajouter la facette\",\n            \"addAll\": \"Ajouter toutes les facettes\",\n            \"remove\":\"Retirer la facette\",\n            \"removeAll\": \"Retirer toutes les facettes\",\n            \"clear\":\"Réinitialiser\",\n            \"moreFilters\":\"\",\n            \"showFilters\":\"Montrer les filtres\",\n            \"hideFilters\":\"Cacher les filtres\",\n\n            \"back\": \"Retour aux filtres\",\n            \"selectedFilters\": \"Ce filtre est utilisé dans la recherche actuelle\",\n\n            \"customizeFacets\": \"Sélectionnez les facettes à montrer ou cacher\"\n        },\n\n        \"selectedValue\": \"Cette valeur est sélectionnée dans la recherche actuelle\",\n        \"previous\": \"Précédent\",\n        \"next\": \"Suivant\",\n        \"filterItemCountTooltip\": \"{count} valeurs possibles pour ce filtre\",\n    },\n\n    \"facetCard\": {\n        \"expand\": \"Déplier\",\n        \"collapse\": \"Replier\",\n        \"enlarge\": \"Agrandir\",\n        \"reduce\": \"Réduire\",\n        \"openSettings\": \"Ouvrir les paramètres\",\n        \"saveSettings\": \"Enregistrer les paramètres\"\n    }\n};\n","export * from \"./action\";\nexport * from \"./bootstrap/index\";\n","import {Component, Input, OnInit, OnDestroy} from \"@angular/core\";\nimport {FormGroup} from \"@angular/forms\";\nimport {AppService, ValueItem} from \"@sinequa/core/app-utils\";\nimport {CCColumn, Aggregation, AggregationItem} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Subscription} from \"rxjs\";\nimport {FirstPageService} from \"@sinequa/components/search\";\n\n@Component({\n    selector: \"sq-advanced-form-select\",\n    templateUrl: \"./advanced-form-select.html\",\n})\nexport class BsAdvancedFormSelect implements OnInit, OnDestroy {\n    @Input() form: FormGroup;\n    @Input() field: string;\n    /** Optional label: the component looks for the label in the Query web service configuration for the given field */\n    @Input() label: string;\n    /** Whether the component supports multiple selection */\n    @Input() multiple: boolean;\n    /** Optional input. The component automatically looks for an aggregation with the name equal to the field */\n    @Input() aggregation: string;\n\n    column: CCColumn | undefined;\n    items: ValueItem[];\n\n    private _valueChangesSubscription: Subscription;\n\n    constructor(\n        private appService: AppService,\n        private firstPageService: FirstPageService) {\n    }\n\n    ngOnInit() {\n        const control = this.form.get(this.field);\n        if(!control) {\n            throw new Error(\"No control in search-form named \"+this.field);\n        }\n        this.column = this.appService.getColumn(this.field);\n        this.items = this.getItems();\n        if(this.label === undefined) {\n            if(this.multiple) {\n                this.label = this.appService.getPluralLabel(this.field);\n            }\n            else {\n                this.label = this.appService.getLabel(this.field);\n            }\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._valueChangesSubscription) {\n            this._valueChangesSubscription.unsubscribe();\n        }\n    }\n\n    private getItems(): ValueItem[] {\n        const firstPage = this.firstPageService.firstPage;\n        if (firstPage) {\n            // Find aggregation for field\n            const condition = (this.aggregation) ?\n                (aggr: Aggregation) => Utils.eqNC(aggr.name, this.aggregation) :\n                (aggr: Aggregation) => this.column && Utils.eqNC(aggr.column, this.column.name);\n            const aggregation = firstPage.aggregations.find(condition);\n\n            if (aggregation && aggregation.items) {\n                return aggregation.items\n                .filter(\n                    (item) => !Utils.isArray(item.value) && !!item.value\n                )\n                .map(\n                    (item: AggregationItem) => (\n                        {\n                            value: item.value,\n                            display: item.display ? item.display : item.value.toString()\n                        }\n                    )\n                );\n            }\n        }\n        return [];\n    }\n}\n","<div class=\"form-group\" [formGroup]=\"form\">\n    <label for=\"{{field}}\">{{label | sqMessage}}</label>\n    <sq-select\n        [items]=\"items\"\n        [multiple]=\"multiple\"\n        [formControlName]=\"field\"\n        [id]=\"field\"\n        sqAdvancedFormValidation\n        [field]=\"field\"\n        [validationForm]=\"form\">\n    </sq-select>\n</div>\n","export default {\n    \"notification\": {\n        \"title\": \"Notifications\",\n        \"showNotifications\": \"Show notifications\",\n        \"hideNotifications\": \"Hide notifications\",\n        \"clearNotifications\": \"Clear notifications\",\n    }\n};\n","import { Component, Input, Output, OnChanges, SimpleChanges, EventEmitter, ViewChildren, ElementRef, QueryList } from \"@angular/core\";\nimport { PreviewDocument } from \"../../preview-document\";\nimport { PreviewService } from \"../../preview.service\";\nimport { PreviewData, Results, Record } from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: 'sq-preview-pages-panel',\n    templateUrl: './preview-pages-panel.component.html'\n})\nexport class BsPreviewPagesPanelComponent implements OnChanges {\n    @Input() pages: Results;\n    @Input() previewData: PreviewData;\n    @Input() previewDocument: PreviewDocument;\n    @Input() style: \"light\"|\"dark\" = \"light\";\n    @Output() gotopage = new EventEmitter<number>();\n\n    @ViewChildren('currentPageEl', {read: ElementRef}) currentPageEl: QueryList<ElementRef>;\n\n    sortedPages: Record[];\n\n    containerid: string;\n    currentPage: number;\n\n    hasFirst: boolean;\n    hasPrevious: boolean;\n    hasNext: boolean;\n\n    _pendingPreviewDocument: boolean = true;\n    _pendingPages: boolean = true;\n    _pendingPage?: number;\n\n    constructor(public previewService: PreviewService) {\n\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n\n        // PreviewData should change first, which triggers the new previewDocument and pages\n        if(changes[\"previewData\"]) {\n            this._pendingPreviewDocument = true;\n            this._pendingPages = true;\n        }\n\n        if(changes[\"previewDocument\"]) {\n            this._pendingPreviewDocument = false;\n        }\n\n        if(changes[\"pages\"]) {\n            this._pendingPages = false;\n        }\n\n        // ngOnChanges is called multiple times due to async updates of the Inputs()\n        // The _pending variables let us wait for all these inputs to come in before apply the changes\n        if(!this._pendingPreviewDocument && !this._pendingPages) {\n            this._pendingPage = undefined;\n\n            if(this.previewData) {\n                this.currentPage = this.previewData.record.$page!;\n                this.containerid = this.previewData.record.containerid!;\n            }\n    \n            if(this.pages && this.currentPage && this.containerid) {\n\n                this.sortedPages = this.pages.records;\n    \n                // Parse the page number from each record id\n                this.sortedPages.forEach(record => {\n                    this.previewService.getPageNumber(record);\n                    if(!record.$page) {\n                        throw new Error(\"Record is not page... \"+ record.id);\n                    }\n                });\n    \n                // Insert current page if missing (possible when navigating to previous/next page)\n                if(!this.sortedPages.find(page => page.$page === this.currentPage)) {\n                    this.sortedPages.push(this.previewData.record);\n                }\n    \n                // Sort the pages\n                this.sortedPages.sort((a,b) => a.$page! - b.$page!);\n    \n                // Update current page neighbours\n                this.hasFirst = !!this.sortedPages.find(page => page.$page! === 1 || this.currentPage === 2 ); // include 2nd page, because is covered by the previous page below\n                this.hasPrevious = this.currentPage === 1 || !!this.sortedPages.find(page => page.$page === this.currentPage - 1);\n                this.hasNext = !!this.sortedPages.find(page => page.$page === this.currentPage + 1);\n            }\n\n            // SetTimeout is needed to scroll only after the DOM changes\n            setTimeout(() => {\n                this.currentPageEl?.first?.nativeElement.scrollIntoView({behaviour: \"smooth\", block: \"start\"});\n            });\n        }\n\n    }\n\n    selectPage(page: number) {\n        this.gotopage.next(page);\n        this._pendingPage = page;\n        return false;\n    }\n\n    selectPrevious() {\n        return this.selectPage(this.currentPage-1);\n    }\n\n    selectNext() {\n        return this.selectPage(this.currentPage+1);\n    }\n}","<div class=\"list-group\" *ngIf=\"sortedPages\">\n\n    <!-- First page link if needed-->\n    <a href=\"#\" class=\"card my-1 list-group-item-action\"\n        (click)=\"selectPage(1)\"\n        *ngIf=\"!hasFirst\">\n        <div class=\"card-body\">\n            <span class=\"small text-muted\">{{ 'msg#preview.page' | sqMessage:{values:{page: 1} } }}</span>\n            <div class=\"text-center my-3\" *ngIf=\"_pendingPage === 1\">\n                <div class=\"spinner-grow\" role=\"status\"></div>\n            </div>\n        </div>\n    </a>\n\n    <!-- For each page in the document -->\n    <ng-container *ngFor=\"let page of sortedPages\">\n\n        <!-- Link to page other than current -->\n        <a href=\"#\" class=\"card my-1 list-group-item-action\"\n            (click)=\"selectPage(page.$page)\"\n            *ngIf=\"currentPage !== page.$page\">\n            <div class=\"card-body\" >\n                <span class=\"small text-muted\">{{ 'msg#preview.page' | sqMessage:{values:{page: page.$page} } }}</span>\n                <p [innerHTML]=\"page.relevantExtracts\" *ngIf=\"_pendingPage !== page.$page\"></p>\n                <div class=\"text-center my-3\" *ngIf=\"_pendingPage === page.$page\">\n                    <div class=\"spinner-grow\" role=\"status\"></div>\n                </div>\n            </div>\n        </a>\n\n        <!-- For current page we display extracts -->\n        <ng-container *ngIf=\"currentPage === page.$page\">\n            <a href=\"#\" class=\"card my-1 list-group-item-action\"\n                *ngIf=\"!hasPrevious\"\n                (click)=\"selectPrevious()\">\n                <div class=\"card-body\">\n                    <span class=\"small text-muted\">{{ 'msg#preview.page' | sqMessage:{values:{page: currentPage - 1} } }} ({{ 'msg#preview.previousDocument' | sqMessage }})</span>\n                    <div class=\"text-center my-3\" *ngIf=\"_pendingPage === currentPage - 1\">\n                        <div class=\"spinner-grow\" role=\"status\"></div>\n                    </div>\n                </div>\n            </a>\n            <div class=\"card my-1\" #currentPageEl>\n                <div class=\"card-body m-0\">\n                    <span class=\"small font-weight-bold mb-1\">{{ 'msg#preview.page' | sqMessage:{values:{page: currentPage} } }} ({{ 'msg#preview.current' | sqMessage }})</span>\n                    <sq-preview-extracts-panel \n                        *ngIf=\"!_pendingPreviewDocument\" \n                        class=\"d-flex flex-column\"\n                        style=\"height: 300px;\"\n                        [previewData]=\"previewData\"\n                        [previewDocument]=\"previewDocument\"\n                        [style]=\"style\">\n                    </sq-preview-extracts-panel>\n                </div>\n            </div>\n            <a href=\"#\" class=\"card my-1 list-group-item-action\"\n                *ngIf=\"!hasNext\"\n                (click)=\"selectNext()\">\n                <div class=\"card-body\">\n                    <span class=\"small text-muted\">{{ 'msg#preview.page' | sqMessage:{values:{page: currentPage + 1} } }} ({{ 'msg#preview.nextDocument' | sqMessage }})</span>\n                    <div class=\"text-center my-3\" *ngIf=\"_pendingPage === currentPage + 1\">\n                        <div class=\"spinner-grow\" role=\"status\"></div>\n                    </div>\n                </div>\n            </a>\n        </ng-container>\n\n    </ng-container>\n</div>","import {Injectable, Inject, InjectionToken, Optional} from \"@angular/core\";\nimport {\n    HttpInterceptor, HttpRequest, HttpHandler,\n    HttpEvent, HttpErrorResponse, HttpParams, HttpResponse\n} from \"@angular/common/http\";\nimport {from, Observable, throwError} from \"rxjs\";\nimport {catchError, map, switchMap} from \"rxjs/operators\";\nimport {Utils, SqError, SqErrorCode} from \"@sinequa/core/base\";\nimport {START_CONFIG, StartConfig} from \"@sinequa/core/web-services\";\nimport {NotificationsService} from \"@sinequa/core/notification\";\nimport {LoginService} from \"./login.service\";\nimport {AuthenticationService} from \"./authentication.service\";\n\nexport type HttpRequestInitializer = (request: HttpRequest<any>) => boolean;\nexport const HTTP_REQUEST_INITIALIZERS = new InjectionToken<HttpRequestInitializer[]>(\"HTTP_REQUEST_INITIALIZERS\");\n\ntype Options = {noAutoAuthentication: boolean, noUserOverride: boolean, hadCredentials: boolean, userOverrideActive: boolean};\n\n/**\n * An `HttpInterceptor` to handle `HTTP 401 unauthorized` error responses by calling\n * [LoginService.getCredentials]{@link LoginService#getCredentials}. It also handles\n * the `sinequa-jwt-refresh` header set when auto refreshing of JWT is configured in\n * the Sinequa administration console.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class LoginInterceptor implements HttpInterceptor {\n\n    constructor(\n        @Inject(START_CONFIG) private startConfig: StartConfig,\n        @Optional() @Inject(HTTP_REQUEST_INITIALIZERS) private requestInitializers: HttpRequestInitializer[],\n        private notificationsService: NotificationsService,\n        private loginService: LoginService,\n        private authService: AuthenticationService) {}\n\n    private processRequestInitializers(request: HttpRequest<any>) {\n        if (this.requestInitializers) {\n            for (const requestInitializer of this.requestInitializers) {\n                if (!requestInitializer(request)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    private isJsonable(obj): boolean {\n        return (Utils.isObject(obj) || Utils.isArray(obj)) && !Utils.isArrayBuffer(obj) && !Utils.isBlob(obj) &&\n            !Utils.isString(obj) && !(obj instanceof HttpParams);\n    }\n\n    private shouldIntercept(url: string): boolean {\n        return Utils.startsWith(url, this.startConfig.apiPath!);\n    }\n\n    private notifyError(error: any) {\n        let message;\n        const title = \"msg#error.serverError\";\n        if (error instanceof HttpErrorResponse) {\n            const response = error;\n            try {\n                let data = response.error;\n                if (Utils.isString(data)) {\n                    try {\n                        data = JSON.parse(data);\n                    }\n                    catch (exception) {\n                    }\n                }\n                if (data && data.errorMessage) {\n                    message = data.errorMessage;\n                    if (data.errorCodeText) {\n                        message = `${message} (${data.errorCodeText})`;\n                    }\n                    else if (data.errorCode) {\n                        message = `${message} (${data.errorCode})`;\n                    }\n                }\n            }\n            catch (exception) {\n            }\n            if (!message) {\n                if (response.status === 200) {\n                    message = \"msg#error.responseLoadFailure\";\n                }\n                else if (response.statusText) {\n                    message = `${response.statusText} (${response.status})`;\n                }\n                else {\n                    message = `HTTP error: ${response.status}`;\n                }\n            }\n        }\n        else if (SqError.is(error)) {\n            message = error.message;\n        }\n        else {\n            message = (error + \"\") || \"msg#error.unknownError\";\n        }\n        this.notificationsService.error(message, undefined, title);\n    }\n\n    private getCredentials(response: HttpErrorResponse, acceptCurrent: boolean): Promise<void> {\n        return this.loginService.getCredentials(response, acceptCurrent)\n            .catch((error) => {\n                if (SqError.is(error, SqErrorCode.processedCredentialsError)) {\n                    return this.getCredentials(response, acceptCurrent);\n                }\n                throw error;\n            });\n    }\n\n    /**\n     * Handles `HTTP 401 unauthorized errors responses by calling\n     * [LoginService.getCredentials]{@link LoginService#getCredentials}. It also handles auto\n     * refreshing of JWT by processing the `sinequa-jwt-refresh` header. The JWT cookie itself\n     * is updated by a `Set-Cookie` header in the response. There are a number of flags that\n     * can be set in the request parameters which will be removed before the request is actually\n     * sent:\n     * * `noAutoAuthentication` - set to bypass the `HTTP 401` handling\n     * * `noUserOverride` - set to not add the current user override to the request\n     * * `noNotify` - set to not notify errors using the {@link NotificationService}\n     *\n     * @param request The intercepted request\n     * @param next The next interceptor in the chain\n     */\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        if (!this.shouldIntercept(request.url) || request.params.has(\"noIntercept\")) {\n            return next.handle(request);\n        }\n\n        let config = {headers: request.headers, params: request.params};\n\n        const options: Options = {\n            noAutoAuthentication: Utils.isTrue(config.params.get(\"noAutoAuthentication\")) || false,\n            noUserOverride: Utils.isTrue(config.params.get(\"noUserOverride\")) || false,\n            hadCredentials: this.authService.haveCredentials,\n            userOverrideActive: false\n        }\n\n        const noNotify = Utils.isTrue(config.params.get(\"noNotify\")) || false;\n\n        config.params = config.params.delete(\"noAutoAuthentication\");\n        config.params = config.params.delete(\"noUserOverride\");\n        config.params = config.params.delete(\"noNotify\");\n\n        config = this.authService.addAuthentication(config);\n\n        if (this.authService.userOverrideActive && !options.noUserOverride) {\n            options.userOverrideActive = true;\n            config.headers = this.authService.addUserOverride(config);\n        }\n\n        config.headers = config.headers.set(\"sinequa-force-camel-case\", \"true\");\n\n        if (this.isJsonable(request.body)) {\n            this.processRequestInitializers(request);\n        }\n\n        this.notificationsService.enter(\"network\");\n        \n        const _request = request.clone({\n            headers: config.headers,\n            params: config.params,\n            body: request.body,\n            withCredentials: true\n        });\n\n        return next.handle(_request).pipe(\n            catchError((error, caught) => {\n                this.notificationsService.leave(\"network\");\n                if (error instanceof HttpErrorResponse) {\n                    switch (error.status) {\n                        case 401: {\n                            return this.handle401Error(error, _request, next, options, caught);\n                        }\n                    }\n                }\n                if (!noNotify) {\n                    this.notifyError(error);\n                }\n                return throwError(error);\n            }),\n            map((event) => {\n                if (event instanceof HttpResponse) {\n                    this.notificationsService.leave(\"network\");\n                    this.authService.updateAuthentication(event);\n                }\n                return event;\n            })\n        );\n    }\n\n    private handle401Error(err: HttpErrorResponse, req: HttpRequest<any>, next: HttpHandler, options: Options, caught: Observable<HttpEvent<any>>): Observable<HttpEvent<any>> {\n        if (!options.noAutoAuthentication) {\n            if (options.userOverrideActive) {\n                if (this.authService.userOverrideActive) {\n                    this.authService.deactivateUserOverride();\n                    this.authService.userOverrideFailed = true;\n                    this.notificationsService.error(\"msg#error.userOverrideFailure\");\n                }\n                return throwError(err);\n            }\n\n            return from(this.getCredentials(err, !options.hadCredentials))\n                .pipe(\n                    switchMap(value => {\n                        const {headers} = this.authService.addAuthentication(req);\n                        return next.handle(req.clone({headers}));\n                    }),\n                    catchError(err => \n                        // in case of an Http error, 'caught' must be returned to be catched by the interceptor\n                        err instanceof HttpErrorResponse ? caught : throwError(err)\n                    ));\n        }\n\n        return throwError(err);\n    }\n}\n","const APP_UTILS_MODULE_PROVIDERS = [];\n\nexport {APP_UTILS_MODULE_PROVIDERS};\n","export default {\n    \"search\": {\n        \"emptySearchNotification\": \"Bitte geben Sie einige Suchbegriffe ein, um eine Suche durchzuführen\",\n        \"alreadyFiltered\": \"bereits ausgewählt\"\n    },\n\n    \"breadcrumbs\": {\n        \"emptySearch\": \"<Suche ohne Suchbegriff>\",\n        \"itemRemove\": \"Entfernen\"\n    },\n\n    \"didYouMean\": {\n        \"dymonlyBeforeCorrected\": \"Meinten Sie: \",\n        \"dymonlyAfterCorrected\": \"?\",\n        \"correctBeforeCorrected\": \"Zeige Ergebnisse für [\",\n        \"correctBeforeOriginal\": \"]. Zeige stattdessen Ergebnisse für [\",\n        \"correctAfterOriginal\": \"]\",\n        \"smartBeforeOriginal\": \"Zeige Ergebnisse für [\",\n        \"smartBeforeCorrected\": \"] und [\",\n        \"smartAfterCorrected\": \"]\"\n    },\n\n    \"pageSizeSelector\": {\n        \"pageSizeChoice\": \"{size, number} pro Seite\",\n        \"defaultPageSize\": \"Standard ({size, number})\",\n        \"defaultPageSizeChoice\": \"{size, number} pro Seite (standard)\"\n    },\n\n    \"pager\": {\n        \"pageNumberTitle\": \"Seite {page, number}\",\n        \"firstPage\": \"Erste Seite\",\n        \"nextPage\": \"Nächste Seite\",\n        \"previousPage\": \"Vorherige Seite\",\n        \"lastPage\": \"Letzte Seite\"\n    },\n\n    \"sortSelector\": {\n        \"sortByTitle\": \"Sortieren nach: {text}\",\n        \"sortOther\": \"<Andere>\"\n    },\n\n    \"sort\": {\n        \"relevance\": \"Relevanz\",\n        \"date\": \"Datum\",\n        \"filename\": \"Dateiname\",\n        \"title\": \"Titel\"\n    },\n\n    \"queryIntent\": {\n        \"externalServiceTimeoutError\": \"Diese Ergebnisseite ist aufgrund eines internen Zeitlimits unvollständig. Bitte versuchen Sie es später noch einmal.\"\n    }\n};\n","import {\n    Component,\n    OnInit,\n    OnDestroy,\n    Inject,\n    ChangeDetectorRef,\n} from \"@angular/core\";\nimport {\n    FormBuilder,\n    FormGroup,\n    FormControl,\n    Validators,\n} from \"@angular/forms\";\nimport { Subscription } from \"rxjs\";\nimport {\n    ModalButton,\n    ModalResult,\n    MODAL_MODEL,\n    ModalRef,\n} from \"@sinequa/core/modal\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { ModalProperties, LabelsService } from \"../../labels.service\";\n\n@Component({\n    selector: \"sq-rename-label\",\n    templateUrl: \"./rename-label.html\",\n    styles: [\n        `\n            .clickable {\n                cursor: pointer;\n            }\n            .clickable:hover {\n                opacity: 85%;\n            }\n        `,\n    ],\n})\nexport class BsRenameLabel implements OnInit, OnDestroy {\n    public labelControl: FormControl;\n    public form: FormGroup;\n    public formChanges: Subscription;\n    public buttons: ModalButton[];\n    public isProcessing: boolean = false;\n\n    constructor(\n        @Inject(MODAL_MODEL)\n        public model: {\n            oldValues: string[],\n            newValue: string,\n            properties: ModalProperties\n        },\n        private formBuilder: FormBuilder,\n        private labelsService: LabelsService,\n        private changeDetectorRef: ChangeDetectorRef,\n        private modalRef: ModalRef\n    ) {}\n\n    ngOnInit() {\n        this.labelControl = new FormControl(\n            this.model.newValue,\n            Validators.required\n        );\n        this.form = this.formBuilder.group({\n            label: this.labelControl,\n        });\n        this.formChanges = Utils.subscribe(this.form.valueChanges, () => {\n            this.model.newValue = this.labelControl.value;\n        });\n\n        this.buttons = [\n            new ModalButton({\n                text: \"msg#renameLabel.btnRename\",\n                primary: true,\n                validation: this.form,\n                result: ModalResult.Custom,\n                anchor: true,\n                action: () => {\n                    const observable = this.labelsService.renameLabels(\n                        this.model.oldValues,\n                        this.model.newValue,\n                        this.model.properties.public\n                    );\n                    if (observable) {\n                        this.isProcessing = true;\n                        this.changeDetectorRef.markForCheck();\n                        Utils.subscribe(\n                            observable,\n                            () => {},\n                            (error) => {\n                                this.modalRef.close(error);\n                            },\n                            () => {\n                                this.isProcessing = false;\n                                this.modalRef.close(ModalResult.OK);\n                            }\n                        );\n                    }\n                },\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n            }),\n        ];\n    }\n\n    ngOnDestroy() {\n        this.formChanges.unsubscribe();\n    }\n\n    updateLabelsNature(nature: boolean) {\n        this.model.properties.public = nature;\n    }\n\n    onLabelsChanged(values: string[]) {\n        this.model.oldValues = values;\n    }\n}\n","<form name=\"renameLabel\" novalidate [formGroup]=\"form\">\n    <sq-modal [title]=\"'msg#renameLabel.title'\" [buttons]=\"buttons\" [isProcessingState]=\"isProcessing\">\n        <div class=\"form-group sq-form-group\">\n            <div class=\"alert alert-danger\" role=\"alert\">\n                {{'msg#renameLabel.alertText' | sqMessage}}\n            </div>\n            <section>\n                <div *ngFor=\"let item of model.properties.radioButtons\" class=\"custom-control custom-radio custom-control-inline\">\n                    <input type=\"radio\" class=\"custom-control-input\" id=\"{{item.id}}\" name=\"nature\" value=\"{{item.value}}\"\n                        [checked]=\"item.checked\" [disabled]=\"item.disabled\" (click)=\"updateLabelsNature(item.value)\" [ngClass]=\"{'disabled': item.disabled, 'clickable': !item.disabled}\">\n                    <label class=\"custom-control-label\" for=\"{{item.id}}\">{{ item.name | sqMessage }}</label>\n                </div>\n            </section>\n            <b><label for=\"label\">{{'msg#renameLabel.oldLabels' | sqMessage}}</label></b>\n            <sq-labels-autocomplete\n                (labelsUpdate)=\"onLabelsChanged($event)\"\n                [public]=\"model.properties.public\"\n                [disableAutocomplete]=\"model.properties.disableAutocomplete\"\n                [allowNewLabels]=\"model.properties.allowNewLabels\"\n                [allowManagePublicLabels]=\"model.properties.allowManagePublicLabels\">\n            </sq-labels-autocomplete>\n            <b><label for=\"label\">{{'msg#renameLabel.newLabel' | sqMessage}}</label></b>\n            <input\n                [sqValidation]=\"form\"\n                type=\"text\"\n                class=\"form-control\"\n                id=\"label\"\n                formControlName=\"label\"\n                autocomplete=\"off\"\n                spellcheck=\"off\"\n                placeholder=\"{{'msg#renameLabel.newLabel' | sqMessage}}\">\n        </div>\n    </sq-modal>\n</form>\n","export default {\n    \"validation\": {\n        \"min\": \"La valeur doit être supérieure ou égale à {min}\",\n        \"max\": \"La valeur ne peut pas être supérieure à {max}\",\n        \"required\": \"Ce champ est obligatoire\",\n        \"requiredTrue\": \"Ce champ doit être positionné\",\n        \"email\": \"Une adresse e-mail valide est exigée\",\n        \"minLength\": \"La valeur doit comporter au moins {requiredLength, plural, one {# caractère} autre que {# caractère}}\",\n        \"maxLength\": \"La valeur ne peut comporter plus de {requiredLength, plural, one {# caractère} autre que {# caractères}}\",\n        \"pattern\": \"La valeur est invalide\",\n        \"unique\": \"Ce champ doit être unique\",\n        \"integer\": \"La valeur doit être un entier\",\n        \"number\": \"La valeur doit être un nombre\",\n        \"date\": \"\",\n        \"range\": \"La première valeur doit être inférieure ou égale à la seconde\"\n    }\n};\n","import {LocaleData} from \"@sinequa/core/intl\";\nimport d3Format from \"d3-format/locale/en-US.json\";\nimport d3Time from \"d3-time-format/locale/en-US.json\";\nimport {enCore} from \"@sinequa/core\";\nimport appMessages from \"./messages/en.json\";\nimport \"intl/locale-data/jsonp/en-US\"; // Safari\nimport {Utils} from \"@sinequa/core/base\";\nimport {enUtils} from \"@sinequa/components/utils\";\nimport {enAdvanced} from \"@sinequa/components/advanced\";\nimport {enAlerts} from \"@sinequa/components/alerts\";\nimport {enBaskets} from \"@sinequa/components/baskets\";\nimport {enFacet} from \"@sinequa/components/facet\";\nimport {enFeedback} from \"@sinequa/components/feedback\";\nimport {enHeatmap} from \"@sinequa/analytics/heatmap\";\nimport {enLabels} from \"@sinequa/components/labels\";\nimport {enMetadata} from \"@sinequa/components/metadata\";\nimport {enNotification} from \"@sinequa/components/notification\";\nimport {enPreview} from \"@sinequa/components/preview\";\nimport {enResult} from \"@sinequa/components/result\";\nimport {enResultsView} from \"@sinequa/components/results-view\";\nimport {enSavedQueries} from \"@sinequa/components/saved-queries\";\nimport {enSelection} from \"@sinequa/components/selection\";\nimport {enSearch} from \"@sinequa/components/search\";\nimport {enStatusBar} from \"@sinequa/components/status-bar\";\nimport {enUserSettings} from \"@sinequa/components/user-settings\";\nimport {enNetwork} from \"@sinequa/analytics/network\";\nimport {enGooglemaps} from \"@sinequa/analytics/googlemaps\";\nimport {enTheme} from \"@sinequa/components/theme-toggle\";\nimport {enFinance} from \"@sinequa/analytics/finance\";\n\nconst messages = Utils.merge({}, enCore, enUtils, enAdvanced, enAlerts, enBaskets, enFacet, enFeedback, enHeatmap, enLabels, enMetadata,\n    enNotification, enPreview, enResult, enResultsView, enSavedQueries, enSelection, enSearch, enStatusBar, enUserSettings, enNetwork, enGooglemaps, enFinance, appMessages,\n    enTheme);\n\nexport default <LocaleData>{\n    intl: {\n        locale: \"en-US\"\n    },\n    d3: {\n        locale: \"en-US\",\n        format: d3Format,\n        time: d3Time\n    },\n    messages: messages\n};","import { Component, Input, OnChanges, ChangeDetectorRef } from \"@angular/core\";\nimport { Record, SimilarDocumentsWebService } from \"@sinequa/core/web-services\";\nimport { Query } from \"@sinequa/core/app-utils\";\nimport { PreviewService } from \"../../preview.service\";\n\n@Component({\n    selector: \"sq-similar-documents\",\n    templateUrl: \"./similar-documents.html\"\n})\nexport class BsSimilarDocuments implements OnChanges {\n    @Input() private sourceDocumentId: string;\n    @Input() private query: Query;\n    private documentList: Record[];\n\n    public get documents(): Record[] {\n        return this.documentList;\n    }\n\n    public constructor(\n        private similarDocumentsService: SimilarDocumentsWebService,\n        private previewService: PreviewService,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    public ngOnChanges(): void {\n        if (this.sourceDocumentId == null) {\n            this.documentList = [];\n            return;\n        }\n        this.similarDocumentsService.get(this.sourceDocumentId, this.query.name).subscribe(\n            (results) => {\n                this.documentList = results;\n                this.changeDetectorRef.markForCheck();\n            }\n        );\n    }\n\n    public documentIconClass(document: Record): string {\n        const documentFormat = document.fileext;\n        if (!documentFormat) {\n            return \"far fa-file\";\n        }\n        return \"far fa-file sq-icon-file-\" + document.fileext;\n    }\n\n    public onLinkClick(document: Record): void {\n        this.previewService.openNewWindow(document, this.query);\n    }\n}\n","<sq-facet-card *ngIf=\"documents != null && documents.length > 0\" [title]=\"'msg#preview.similarDocumentsTitle'\">\n    <div class=\"card-body collapse show\" id=\"similarDocumentsBody\">\n        <ng-container *ngFor=\"let document of documents\">\n            <ng-container *ngIf=\"document\">\n                <div class=\"similarDocument\" (click)=\"onLinkClick(document)\" >\n                    <div class=\"similarDocumentIcon {{documentIconClass(document)}}\"></div>\n                    <a class=\"similarDocumentTitle\" href=\"javascript:void(0)\" >{{ document.title }}</a>\n                </div>\n            </ng-container>\n        </ng-container>\n    </div>\n</sq-facet-card>","import {Injectable, Inject, OnDestroy} from \"@angular/core\";\nimport {Observable, Subject} from \"rxjs\";\nimport {map} from \"rxjs/operators\";\nimport {Utils, MapOf, PatternMatcher} from \"@sinequa/core/base\";\nimport {IntlService} from \"@sinequa/core/intl\";\nimport {FormatService} from \"./format.service\";\nimport {AppWebService, AuditEvents, START_CONFIG, StartConfig,\n    CCApp, CCQuery, CCLabels, CCAutocomplete, CCColumn, CCIndex, CCWebService, CCConfig, CCList, CCAggregation,\n    EngineType, EngineTypeModifier, MINIMUM_COMPATIBLE_SERVER_API_VERSION} from \"@sinequa/core/web-services\";\nimport {ExprParser, ExprParserOptions, Expr} from \"./query/expr-parser\";\nimport {AppServiceHelpers} from \"./app-service-helpers\";\n\n/**\n * A base event from which all events that can be issued by the {@link AppService} are derived\n */\nexport interface AppEvent {\n    type: \"query-changed\";\n}\n\n/**\n * This event is fired each time the [ccquery]{@link AppService#ccquery} member is modified.\n */\nexport interface QueryChangedEvent extends AppEvent {\n    type: \"query-changed\";\n    current?: CCQuery;\n    previous?: CCQuery;\n}\n\n/**\n * A union of the different events that the {@link AppService} can generate\n */\nexport type AppEvents = QueryChangedEvent;\n\n/**\n * A service to manage the Sinequa SBA configuration\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AppService implements OnDestroy {\n    // Should match AdditionalQueryableColumns in Engine.cs\n    private static extraColumns: MapOf<CCColumn> = {\n        id: AppService.makeColumn(\"id\", \"string\"),\n        text: AppService.makeColumn(\"text\", \"varchar\"),\n        documentlanguages: AppService.makeColumn(\"documentlanguages\", \"csv\", \"ci\"),\n        databasealias: AppService.makeColumn(\"databasealias\", \"varchar\"),\n        globalrelevance: AppService.makeColumn(\"globalrelevance\", \"double\"),\n        matchingpartnames: AppService.makeColumn(\"matchingpartnames\", \"csv\"),\n        matchlocations: AppService.makeColumn(\"matchlocations\", \"csv\"),\n        matchlocationsperpartname: AppService.makeColumn(\"matchlocationsperpartname\", \"varchar\"), // json\n        extracts: AppService.makeColumn(\"extracts\", \"csv\"),\n        extractsperpartname: AppService.makeColumn(\"extractsperpartname\", \"varchar\"), // json\n        extractslocations: AppService.makeColumn(\"extractslocations\", \"csv\"),\n        documentweight: AppService.makeColumn(\"documentweight\", \"varchar\"),\n        groupcount: AppService.makeColumn(\"groupcount\", \"integer\"),\n        accesslists: AppService.makeColumn(\"accesslists\", \"varchar\", undefined, [\"accessLists\"]) // json\n    };\n\n    /**\n     * The app configuration\n     */\n    app?: CCApp;\n    /**\n     * The labels configuration\n     */\n    cclabels?: CCLabels;\n    /**\n     * The autocomplete configuration\n     */\n    ccautocomplete?: CCAutocomplete;\n    /**\n     * The suggest queries configured on the application\n     */\n    suggestQueries: string[];\n    private columnsByQuery: MapOf<MapOf<CCColumn>>;\n    private columnsByIndex: MapOf<MapOf<CCColumn>>;\n    private fieldsByQuery: MapOf<string[]>;\n    private _defaultCCQuery?: CCQuery;\n    private _ccquery?: CCQuery;\n\n    protected _events = new Subject<AppEvents>();\n\n    private static toEngineType(type: string): EngineType {\n        if (!type) {\n            return EngineType.none;\n        }\n        switch (Utils.toLowerCase(type)) {\n            case \"bool\"     :\n            case \"boolean\"  : return EngineType.bool;\n            case \"date\"     : return EngineType.date;\n            case \"datetime\" : return EngineType.dateTime;\n            case \"time\"     : return EngineType.time;\n            case \"unsigned\" : return EngineType.unsigned;\n            case \"integer\"  : return EngineType.integer;\n            case \"float\"    : return EngineType.float;\n            case \"double\"   : return EngineType.double;\n            case \"dates\"    : return EngineType.dates;\n            case \"datetimes\": return EngineType.dateTimes;\n            case \"times\"    : return EngineType.times;\n            case \"varchar\"  : return EngineType.varchar;\n            case \"binary\"   : return EngineType.binary;\n            case \"string\"   : return EngineType.string;\n            case \"csv\"      : return EngineType.csv;\n            default         : return EngineType.none;\n        }\n    }\n\n    private static toEngineTypeModifierSimple(c: string): EngineTypeModifier {\n        switch (c) {\n            case 'a': return EngineTypeModifier.a;\n            case 'c': return EngineTypeModifier.c;\n            case 'd': return EngineTypeModifier.d;\n            case 'e': return EngineTypeModifier.e;\n            case 'i': return EngineTypeModifier.i;\n            case 'l': return EngineTypeModifier.l;\n            case 'n': return EngineTypeModifier.n;\n            case 't': return EngineTypeModifier.t;\n            case 'x': return EngineTypeModifier.x;\n            case 'z': return EngineTypeModifier.z;\n            default : return EngineTypeModifier.none;\n        }\n    }\n\n    private static toEngineTypeModifier(eType: EngineType, typeModifier: string): EngineTypeModifier {\n        let etm = EngineTypeModifier.none;\n        if (typeModifier) {\n            for (const c of typeModifier) {\n                etm |= AppService.toEngineTypeModifierSimple(c);\n            }\n        }\n        return etm;\n    }\n\n    private static makeColumn(name: string, type: string, typeModifier?: string, aliases?: string[]) {\n        const eType = AppService.toEngineType(type);\n        const eTypeModifier = AppService.toEngineTypeModifier(eType, typeModifier || \"\");\n        return {\n            name,\n            type,\n            typeModifier,\n            eType,\n            eTypeModifier,\n            aliases\n        };\n    }\n\n    /**\n     * Return `true` if a `column` is a string\n     */\n    static isString(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isString(column);\n    }\n\n    /**\n     * Return `true` if a `column` is a csv\n     */\n    static isCsv(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isCsv(column);\n    }\n\n    /**\n     * Return `true` if a `column` is a tree\n     */\n    static isTree(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isTree(column);\n    }\n\n    /**\n     * Return `true` if a `column` is an entity\n     */\n    static isEntity(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isEntity(column);\n    }\n\n    /**\n     * Return `true` if a `column` is a boolean\n     */\n    static isBoolean(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isBoolean(column);\n    }\n\n    /**\n     * Return `true` if a `column` is a date\n     */\n    static isDate(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isDate(column);\n    }\n\n    /**\n     * Return `true` if a `column` is a double\n     */\n    static isDouble(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isDouble(column);\n    }\n\n    /**\n     * Return `true` if a `column` is an integer\n     */\n    static isInteger(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isInteger(column);\n    }\n\n    /**\n     * Return `true` if a `column` is a number (integer or double)\n     */\n    static isNumber(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isNumber(column);\n    }\n\n    /**\n     * Return `true` if a `column` is a scalar\n     */\n    static isScalar(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isScalar(column);\n    }\n\n    /**\n     * Return `true` if a `column` is sortable\n     */\n    static isSortable(column: CCColumn | undefined): boolean {\n        return AppServiceHelpers.isSortable(column);\n    }\n\n    constructor(\n        @Inject(START_CONFIG) public startConfig: StartConfig,\n        public appWebService: AppWebService,\n        public intlService: IntlService,\n        public formatService: FormatService) {\n\n        if (!this.appName) {\n            console.error(\"Missing app name!\");\n        }\n    }\n\n    ngOnDestroy() {\n        this._events.complete();\n    }\n\n    /**\n     * Return an `Observable` stream of the events that the `AppService` can generate\n     */\n    get events(): Observable<AppEvents> {\n        return this._events;\n    }\n\n    /**\n     * Return the name of the SBA\n     */\n    get appName(): string {\n        return this.startConfig.app!;\n    }\n\n    /**\n     * Return the origin of the Sinequa server\n     */\n    get origin(): string {\n        return this.startConfig.origin!;\n    }\n\n    private initDefaultQuery() {\n        if (!this.app) {\n            console.warn(\"No app configured\");\n            return;\n        }\n        // If not set explicitly, the default query is the first in the list\n        const defaultQueryName = this.app.defaultQueryName || Utils.split(this.app.queryNames, \",\")[0];\n        this._defaultCCQuery = Utils.getField<CCQuery>(this.app.queries, defaultQueryName);\n        if (!this._defaultCCQuery) {\n            console.warn(`Query not configured for app: ${this.appName}`);\n        }\n        this.ccquery = this._defaultCCQuery;\n    }\n\n    private setApp(app: CCApp) {\n        this.app = app;\n        this.verifyServerApiVersionCompatibility(app);\n        this.cclabels = this.getWebService<CCLabels>(this.app.labels);\n        this.ccautocomplete = this.getWebService<CCAutocomplete>(this.app.autocomplete);\n        this.initDefaultQuery();\n        this.makeMaps();\n        this.suggestQueries = Utils.split(this.ccautocomplete ? this.ccautocomplete.suggestQueries : \"\", \",\");\n    }\n\n    private verifyServerApiVersionCompatibility(app: CCApp): void {\n        if (!app) {\n            console.warn('Unexpected empty app configuration.');\n            return;\n        }\n        if (!app.apiVersion) {\n            console.error(`The App config '${app.name}' is not of 'Angular Workspace application' type.`);\n        } else if (app.apiVersion !== MINIMUM_COMPATIBLE_SERVER_API_VERSION) {\n            console.warn(`This SBA is not compatible with the REST API of Sinequa Server.\\n` +\n                `The SBA expects the server API version to be at least '${MINIMUM_COMPATIBLE_SERVER_API_VERSION}',` +\n                ` whereas the server API version is '${app.apiVersion}'.`);\n        }\n    }\n\n    /**\n     * Initialize this service by retrieving the current application\n     * configuration from the Sinequa server and using it to set up the data structures\n     * on which the service relies\n     */\n    init(): Observable<CCApp> {\n        return this.appWebService.get().pipe(\n            map(app => {\n                this.setApp(app);\n                return app;\n            }\n        ));\n    }\n\n    /**\n     * Initialize this service from an application configuration object. This is typically\n     * used for supporting mutiple concurrent queries within the same application by providing\n     * component level instances of this service.\n     */\n    initFromApp(app: CCApp) {\n        if (app) {\n            this.setApp(app);\n        }\n    }\n\n    /**\n     * Refresh the application configuration, reinitializing the service if it has changed\n     *\n     * @param auditEvents Any associated audit events that should be stored\n     */\n    refresh(auditEvents?: AuditEvents): Observable<CCApp | undefined> {\n        const observable = this.appWebService.refresh(this.app ? this.app.versionId : \"\", auditEvents);\n        observable.subscribe(\n            response => {\n                if (!response.upToDate && response.app) {\n                    this.setApp(response.app);\n                }\n                return response;\n            }\n        );\n        return observable.pipe(map((value) => {\n            return this.app;\n        }));\n    }\n\n    /**\n     * Clear the data associated with the service. Typically used when processing a user logout\n     */\n    clear() {\n        this.app = undefined;\n        this.cclabels = undefined;\n        this._defaultCCQuery = undefined;\n        this.ccquery = undefined;\n        this.clearMaps();\n    }\n\n    private indexIsNormal(ccindex: CCIndex): boolean {\n        return !!ccindex && (!ccindex.indexType || Utils.startsWith(ccindex.indexType, \"normal\"));\n    }\n\n    private getIndexForQuery(ccquery: CCQuery): CCIndex | undefined {\n        if (!ccquery) {\n            return undefined;\n        }\n        const indexes = Utils.split(ccquery.searchIndexes, [\",\"]);\n        if (indexes.length === 0) {\n            return this.app ? this.app.indexes._ : undefined;\n        }\n        else {\n            const ccindex = this.getIndex(indexes[0]);\n            if (ccindex && this.indexIsNormal(ccindex)) {\n                return this.app ? this.app.indexes._ : undefined;\n            }\n            return ccindex;\n        }\n    }\n\n    private _makeColumnMapForIndex(columnMap: MapOf<CCColumn>, ccindex: CCIndex) {\n        if (!ccindex || !ccindex.columns) {\n            return;\n        }\n        for (const columnName of Object.keys(ccindex.columns)) {\n            const column = ccindex.columns[columnName];\n            columnMap[Utils.toLowerCase(column.name)] = column;\n            if (column.aliases) {\n                for (const alias of column.aliases) {\n                    columnMap[Utils.toLowerCase(alias)] = column;\n                }\n            }\n        }\n    }\n\n    private _makeColumnMapForQuery(columnMap: MapOf<CCColumn>, ccquery: CCQuery) {\n        if (!ccquery || !ccquery.columnsInfo || !ccquery.columnsInfo.columns) {\n            return;\n        }\n        const ccindex = this.getIndexForQuery(ccquery);\n        if (!ccindex || !ccindex.columns) {\n            return;\n        }\n        for (const columnInfo of ccquery.columnsInfo.columns) {\n            if (columnInfo.name) {\n                const columnName = Utils.toLowerCase(columnInfo.name);\n                let column = ccindex.columns[columnName];\n                if (!column) {\n                    column = AppService.extraColumns[columnName];\n                }\n                if (column) {\n                    // Copy column so we can add the query specific aliases and labels\n                    column = Utils.copy(column);\n                    columnMap[columnName] = column;\n                    if (columnInfo.aliases) {\n                        column.aliases = Utils.split(columnInfo.aliases, [\",\", \";\"]);\n                        for (const alias of column.aliases) {\n                            columnMap[Utils.toLowerCase(alias)] = column;\n                        }\n                    }\n                    // Overwrite labels if defined on the query\n                    if (columnInfo.label) {\n                        column.label = columnInfo.label;\n                    }\n                    if (columnInfo.labelPlural) {\n                        column.labelPlural = columnInfo.labelPlural;\n                    }\n                    if (columnInfo.formatter) {\n                        column.formatter = columnInfo.formatter;\n                    }\n                    if (columnInfo.transforms) {\n                        column.transforms = columnInfo.transforms;\n                    }\n                    if (columnInfo.parser) {\n                        column.parser = columnInfo.parser;\n                    }\n                    if (columnInfo.description) {\n                        column.description = columnInfo.description;\n                    }\n                }\n            }\n        }\n    }\n\n    protected makeMaps() {\n        this.columnsByQuery = {};\n        this.columnsByIndex = {};\n        this.fieldsByQuery = {};\n        if (!this.app) {\n            return;\n        }\n        let columnMap: MapOf<CCColumn>;\n\n        // Queries\n        if (this.app.queries) {\n            for (const queryName of Object.keys(this.app.queries)) {\n                const ccquery = this.app.queries[queryName];\n                if (ccquery) {\n                    ccquery.$columnFieldsPattern = new PatternMatcher(\"included column fields\", \"excluded column fields\");\n                    ccquery.$columnFieldsPattern.includedPattern.setText(ccquery.columnFieldsIncluded);\n                    ccquery.$columnFieldsPattern.excludedPattern.setText(ccquery.columnFieldsExcluded);\n                    ccquery.$partnameFieldsPattern = new PatternMatcher(\"included part name fields\", \"excluded part name fields\");\n                    ccquery.$partnameFieldsPattern.includedPattern.setText(ccquery.partnameFieldsIncluded);\n                    ccquery.$partnameFieldsPattern.excludedPattern.setText(ccquery.partnameFieldsExcluded);\n                    if (ccquery.columnsInfo) {\n                        columnMap = {};\n                        this.columnsByQuery[Utils.toLowerCase(ccquery.name)] = columnMap;\n                        this._makeColumnMapForQuery(columnMap, ccquery);\n                    }\n                }\n            }\n        }\n\n        // Indexes\n        if (this.app.indexes) {\n            // Special normal index\n            const ccindex = this.app.indexes._;\n            if (ccindex) {\n                columnMap = {};\n                this.columnsByIndex._ = columnMap;\n                this._makeColumnMapForIndex(columnMap, ccindex);\n\n            }\n            for (const indexName of Object.keys(this.app.indexes)) {\n                const ccindex1 = this.app.indexes[Utils.toLowerCase(indexName)];\n                if (ccindex1) {\n                    if (this.indexIsNormal(ccindex1)) {\n                        if (ccindex1.name !== \"_\") {\n                            this.columnsByIndex[Utils.toLowerCase(ccindex1.name)] = this.columnsByIndex._;\n                        }\n                    }\n                    else {\n                        columnMap = {};\n                        this.columnsByIndex[Utils.toLowerCase(ccindex1.name)] = columnMap;\n                        this._makeColumnMapForIndex(columnMap, ccindex1);\n                    }\n                }\n            }\n        }\n\n        // Fields per query (contains aliases for default query and globally defined aliases)\n        const globalFields = new Map<string, string>();\n        const columns = this.columnsByIndex._;\n        if (columns) {\n            for (const key of Object.keys(columns)) {\n                const column = columns[key];\n                if (column.aliases && column.aliases.length > 0) {\n                    const alias = column.aliases[0];\n                    if (alias) {\n                        globalFields.set(alias, alias);\n                    }\n                }\n            }\n        }\n        for (const queryName of Object.keys(this.columnsByQuery)) {\n            const queryFields = new Map<string, string>(globalFields);\n            const columns1 = this.columnsByQuery[Utils.toLowerCase(this.defaultCCQuery ? this.defaultCCQuery.name : \"\")];\n            if (columns1) {\n                for (const key of Object.keys(columns1)) {\n                    const column = columns1[key];\n                    if (column.aliases && column.aliases.length > 0) {\n                        const alias = column.aliases[0];\n                        if (alias) {\n                            queryFields.set(alias, alias);\n                        }\n                    }\n                }\n                this.fieldsByQuery[queryName] = Array.from(queryFields.keys());\n            }\n        }\n    }\n\n    protected clearMaps() {\n        this.columnsByQuery = {};\n        this.columnsByIndex = {};\n        this.fieldsByQuery = {};\n    }\n\n    /**\n     * Get the configuration of the web service with the passed name\n     */\n    getWebService<T extends CCWebService>(name: string): T | undefined {\n        if (!this.app) {\n            return undefined;\n        }\n        return Utils.getField<CCConfig>(this.app.webServices, name) as T;\n    }\n\n    /**\n     * Get the list configuration with the passed name\n     */\n    getList(name: string): CCList | undefined {\n        if (!this.app) {\n            return undefined;\n        }\n        return this.app.lists[name];\n    }\n\n    /**\n     * Return the default {@link CCQuery}\n     */\n    get defaultCCQuery(): CCQuery | undefined {\n        return this._defaultCCQuery;\n    }\n\n    /**\n     * Return the current {@link CCQuery}\n     */\n    get ccquery(): CCQuery | undefined {\n        if (!!this._ccquery) {\n            return this._ccquery;\n        }\n        return this._defaultCCQuery;\n    }\n\n    /**\n     * Set the current {@link CCQuery}\n     */\n    set ccquery(value: CCQuery | undefined) {\n        if (value !== this._ccquery) {\n            const previous = this._ccquery;\n            this._ccquery = value;\n            this._events.next({type: \"query-changed\", current: this._ccquery, previous: previous});\n        }\n    }\n\n    /**\n     * Get the {@link CCQuery} with the passed name\n     */\n    getCCQuery(name: string): CCQuery | undefined {\n        return this.app ? this.app.queries[Utils.toLowerCase(name)] : undefined;\n    }\n\n    /**\n     * Set the current {@link CCQuery} to that with the passed name\n     */\n    setCCQuery(name?: string): boolean {\n        const ccquery = !name ? this.defaultCCQuery : this.getCCQuery(name);\n        if (ccquery) {\n            this.ccquery = ccquery;\n            return true;\n        }\n        else {\n            console.warn(`AppService.setCCQuery - query '${name}' does not exist`);\n            return false;\n        }\n    }\n\n    /**\n     * Return the fields defined on the current {@link CCQuery}\n     */\n    get fields(): string[] {\n        if (!this.ccquery) {\n            return [];\n        }\n        return this.fieldsByQuery[Utils.toLowerCase(this.ccquery.name)] || [];\n    }\n\n    /**\n     * Get the {@link CCAggregation} with the passed name\n     */\n    getCCAggregation(name: string): CCAggregation | undefined {\n        if (!this.ccquery || !this.ccquery.aggregations) {\n            return undefined;\n        }\n        return this.ccquery.aggregations.find((value) => Utils.eqNC(name, value.name));\n    }\n\n    /**\n     * Get the {@link CCIndex} with the passed name\n     */\n    getIndex(name: string): CCIndex | undefined {\n        if (!this.app) {\n            return undefined;\n        }\n        return Utils.getField<CCIndex>(this.app.indexes, name);\n    }\n\n    /**\n     * Get the {@link CCColumn} with the passed name. Aliases are resolved\n     */\n    getColumn(name: string | null | undefined): CCColumn | undefined {\n        if (!name) {\n            return undefined;\n        }\n        if (!this.ccquery) {\n            return undefined;\n        }\n        // First, CCQuery specific aliases\n        let column: CCColumn;\n        let columnAliases = this.columnsByQuery[Utils.toLowerCase(this.ccquery.name)];\n        if (columnAliases) {\n            column = columnAliases[Utils.toLowerCase(name)];\n            if (column) {\n                return column;\n            }\n        }\n        // Second, aliases by index\n        const indexes = Utils.split(this.ccquery.searchIndexes, [\",\"]);\n        const firstIndex = indexes.length === 0 ? undefined : this.getIndex(indexes[0]);\n        if (indexes.length === 0 || (!!firstIndex && this.indexIsNormal(firstIndex))) {\n            columnAliases = this.columnsByIndex._;\n            if (columnAliases) {\n                column = columnAliases[Utils.toLowerCase(name)];\n                if (column) {\n                    return column;\n                }\n            }\n        }\n        else {\n            for (const index of indexes) {\n                columnAliases = this.columnsByIndex[Utils.toLowerCase(index)];\n                if (columnAliases) {\n                    column = columnAliases[Utils.toLowerCase(name)];\n                    if (column) {\n                        return column;\n                    }\n                }\n            }\n        }\n        // Third, extra columns\n        column = AppService.extraColumns[Utils.toLowerCase(name)];\n        if (column) {\n            return column;\n        }\n        return undefined;\n    }\n\n    /**\n     * Get the default alias a column\n     *\n     * @param column The column\n     * @return The default alias or `null` if no alias is defined\n     */\n    getColumnDefaultAlias(column?: CCColumn): string {\n        if (column) {\n            if (column.aliases && column.aliases.length > 0) {\n                return column.aliases[0];\n            }\n        }\n        return \"\";\n    }\n\n    /**\n     * Get the name of a column\n     *\n     * @param column The column\n     * @param _default A default name to return if `column` is empty\n     */\n    private getColumnName(column?: CCColumn, _default = \"\"): string {\n        if (column) {\n            return column.name;\n        }\n        return _default;\n    }\n\n    /**\n     * Get the default alias for a column\n     *\n     * @param column The column\n     * @param _default A default alias name to return if the `column` is empty or no alias is defined\n     */\n    getColumnAlias(column?: CCColumn, _default = \"\"): string {\n        if (column) {\n            const alias = this.getColumnDefaultAlias(column);\n            if (alias) {\n                return alias;\n            }\n        }\n        return _default;\n    }\n\n    /**\n     * Return a column name from a name which can be an alias\n     */\n    resolveColumnName(name: string | null | undefined): string {\n        const column = this.getColumn(name);\n        return this.getColumnName(column, name || \"\");\n    }\n\n    /**\n     * Return a column alias from a name which can be an alias\n     */\n    resolveColumnAlias(name: string | null | undefined): string {\n        const column = this.getColumn(name);\n        return this.getColumnAlias(column, name || \"\");\n    }\n\n    /**\n     * Parse a fielded search expression\n     *\n     * @param text The expression\n     * @param options Options for the parsing\n     * @return The parsed {@link Expr} or an error message\n     */\n    parseExpr(text: string, options?: ExprParserOptions): Expr | string {\n        return ExprParser.parse(text, {appService: this, formatService: this.formatService, intlService: this.intlService}, options);\n    }\n\n    /**\n     * Escape a value for fielded search if necessary. `Date` objects are converted to\n     * Sinequa system date strings and non-scalars fields are escaped\n     * @param field The value's field\n     * @param value The value\n     */\n    escapeFieldValue(field: string, value: string | number | Date | boolean | undefined): string {\n        if (Utils.isDate(value)) {\n            return Utils.toSysDateStr(value);\n        }\n        value = value + \"\";\n        const column = this.getColumn(field);\n        if (column && !AppService.isScalar(column)) {\n            // escaoe columns that might contain search operators in them (treating negative numbers as an ignorable edge case)\n            return ExprParser.escape(value);\n        }\n        return value;\n    }\n\n    /**\n     * Get the label of a column. The plural label is returned for csv-type columns.\n     *\n     * @param name The name of the column which can be an alias\n     * @param _default The default label to return if no label is defined\n     */\n    getLabel(name: string, _default?: string): string {\n        const column = this.getColumn(name);\n        if (column) {\n            const label = AppService.isCsv(column) ? column.labelPlural : column.label;\n            if (label) {\n                return label;\n            }\n        }\n        if (!Utils.isUndefined(_default)) {\n            return _default;\n        }\n        return name;\n    }\n\n    /**\n     * Get the singular label of a column\n     *\n     * @param name The name of the column which can be an alias\n     * @param _default The default label to return if no label is defined\n     */\n    getSingularLabel(name: string, _default?: string): string {\n        const column = this.getColumn(name);\n        if (column && column.label) {\n            return column.label;\n        }\n        if (!Utils.isUndefined(_default)) {\n            return _default;\n        }\n        return name;\n    }\n\n    /**\n     * Get the plural label of a column\n     *\n     * @param name The name of the column which can be an alias\n     * @param _default The default label to return if no label is defined\n     */\n    getPluralLabel(name: string, _default?: string): string {\n        const column = this.getColumn(name);\n        if (column && column.labelPlural) {\n            return column.labelPlural;\n        }\n        if (!Utils.isUndefined(_default)) {\n            return _default;\n        }\n        return name;\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a string\n     */\n    isString(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isString(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a csv\n     */\n    isCsv(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isCsv(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a tree\n     */\n    isTree(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isTree(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is an entity\n     */\n    isEntity(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isEntity(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a boolean\n     */\n    isBoolean(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isBoolean(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a date\n     */\n    isDate(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isDate(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a double\n     */\n    isDouble(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isDouble(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is an integer\n     */\n    isInteger(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isInteger(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a number (integer or double)\n     */\n    isNumber(name: string): boolean {\n        return this.isInteger(name) || this.isDouble(name);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is a scalar\n     */\n    isScalar(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isScalar(column);\n    }\n\n    /**\n     * Return `true` if a column with the passed name or alias is sortable\n     */\n    isSortable(name: string): boolean {\n        const column = this.getColumn(name);\n        return !!column && AppService.isSortable(column);\n    }\n\n    /**\n     * If the passed url is relative and CORS is active then\n     * prepend it with the Sinequa server origin\n     */\n    updateUrlForCors(url: string): string {\n        if (this.startConfig.corsActive && !!url && !Utils.isUrlAbsolute(url)) {\n            url = Utils.addUrl(this.origin, url);\n        }\n        return url;\n    }\n\n    /**\n     * Return the url to the Sinequa administration console\n     */\n    get adminUrl(): string {\n        return this.updateUrlForCors(Utils.addUrl(this.startConfig.applicationPath!, \"admin\"));\n    }\n}","import {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {LoadComponentModule} from \"@sinequa/core/load-component\";\nimport {UtilsModule} from \"@sinequa/components/utils\";\n\nimport {BsActionButtons} from \"./action-buttons/action-buttons\";\nimport {BsActionItemContent} from \"./action-item-content/action-item-content\";\nimport {BsActionItem} from \"./action-item/action-item\";\nimport {BsActionMenu} from \"./action-menu/action-menu\";\nimport {BsDropdownMenu} from \"./dropdown-menu/dropdown-menu\";\nimport {BsDropdownDirective} from \"./dropdown.directive\";\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IntlModule,\n        LoadComponentModule,\n        UtilsModule\n    ],\n    declarations: [\n        BsActionButtons,\n        BsActionItemContent,\n        BsActionItem,\n        BsActionMenu,\n        BsDropdownMenu,\n        BsDropdownDirective\n    ],\n    exports: [\n        BsActionButtons,\n        BsActionMenu,\n        BsActionItem,\n        BsDropdownDirective\n    ]\n})\nexport class BsActionModule {\n}","import {Component, OnInit, Input, ChangeDetectorRef} from \"@angular/core\";\nimport {Record, CCRating, UserRatingsWebService, UserRatingResponse} from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-user-rating\",\n    templateUrl: \"./user-rating.html\",\n    styleUrls: [\"./user-rating.css\"]\n})\nexport class UserRating implements OnInit {\n    @Input() record: Record;\n    @Input() ratingsColumn: string;\n    @Input() averageColumn: string;\n    @Input() updateDocWeight: boolean;\n    @Input() count: number;\n    @Input() values: string;\n    @Input() titles: string;\n    @Input() caption: string;\n    @Input() showAverage: boolean;\n    userRatingIndex: number;\n    averageRatingIndex: number;\n    ratingValues: string[];\n\n    constructor(\n        private userRatingService: UserRatingsWebService,\n        private changeDetector: ChangeDetectorRef) {\n    }\n\n    ngOnInit() {\n        this.ensureRatingValues();\n        this.handleResponse(this.userRatingService.getRecordRating(this.record, this.getCCRating()));\n    }\n\n    getCCRating(): CCRating {\n        return {\n            ratingsColumn: this.ratingsColumn,\n            averageColumn: this.averageColumn,\n            updateDocWeight: this.updateDocWeight,\n            ratingsDistribution: this.ratingValues\n        };\n    }\n\n    get messageParams() {\n        return {\n            values: {\n                average: this.getAverageRating()\n            }\n        };\n    }\n\n    getTitle(ratingIndex: number): string {\n        if (this.titles) {\n            return this.titles.split(\";\")[ratingIndex] || \"\";\n        }\n        else {\n            return \"\";\n        }\n    }\n\n    getRating(ratingIndex: number): string {\n        return this.ratingValues[ratingIndex];\n    }\n\n    getAverageRating(): string {\n        if (this.averageRatingIndex < 0) {\n            return \"\";\n        }\n        else {\n            return this.ratingValues[this.averageRatingIndex];\n        }\n    }\n\n    select(selectedRatingIndex: number) {\n        //If selected rating was already selected, remove the rating\n        if (this.userRatingIndex === selectedRatingIndex) {\n            this.userRatingService.deleteRating(this.record, this.getCCRating()).subscribe(this.handleResponse);\n        }\n        else {\n            this.userRatingService.setRating(this.record, selectedRatingIndex, this.getCCRating()).subscribe(this.handleResponse);\n        }\n    }\n\n    private ensureRatingValues() {\n        if (!this.ratingValues) {\n            const count = this.count || 0;\n\n            //Work out rating value range\n            if (this.values) {\n                //Use predefined values\n                this.ratingValues = this.values.split(\";\");\n\n                //Initialize missing values - so that ratingValues.length matches config.count\n                for (let i = this.ratingValues.length; i < count; i++) {\n                    this.ratingValues.push((i + 1).toString());\n                }\n            }\n            else {\n                //Generates [1, ... config.count]\n                this.ratingValues = Array(count).fill(0).map((_, i) => (i + 1).toString());\n            }\n        }\n    }\n\n    private handleResponse = (response: UserRatingResponse) => {\n        this.userRatingIndex    = response.rating;\n        this.averageRatingIndex = response.averagerating;\n\n        this.changeDetector.markForCheck();\n    }\n}\n","<ul class=\"sq-user-rating-stars\">\n    <!-- caption -->\n    <li *ngIf=\"caption\" class=\"sq-user-rating-caption\">\n        <span>{{caption|sqMessage}}</span>\n    </li>\n    <!-- rating stars -->\n    <li *ngFor=\"let r of ratingValues; let i = index\" class=\"sq-user-rating-item\">\n        <a class=\"sq-user-rating-star\" title=\"{{getTitle(i)}}\" href=\"javascript:void(0)\" (click)=\"select(i)\">\n            <span class=\"{{(i <= userRatingIndex) ? 'fas fa-star' : 'far fa-star'}}\"></span>\n        </a>\n    </li>\n    <!-- average rating -->\n    <li *ngIf=\"showAverage && getAverageRating() !== undefined && getAverageRating() !== ''\" class=\"sq-user-rating-average\">\n        <span>{{'msg#userRatings.average'|sqMessage:messageParams}}</span>\n    </li>\n</ul>\n","export * from './money-timeline/money-timeline.component';\nexport * from './money-cloud/money-cloud.component';\nexport * from './finance.module';\nexport * from './messages';","import { Component, Input, SimpleChanges, OnChanges } from \"@angular/core\";\nimport { AbstractFacet } from \"../../abstract-facet\";\nimport {\n    Results,\n    AggregationItem,\n    Aggregation,\n} from \"@sinequa/core/web-services\";\nimport { Action } from \"@sinequa/components/action\";\nimport { FacetService } from \"../../facet.service\";\nimport { Utils } from \"@sinequa/core/base\";\n\nexport interface TagCloudItem {\n    aggregation: Aggregation;\n    item: AggregationItem;\n    weight: number;\n}\n\n@Component({\n    selector: \"sq-facet-tag-cloud\",\n    templateUrl: \"./facet-tag-cloud.html\",\n    styleUrls: [\"./facet-tag-cloud.scss\"],\n})\nexport class BsFacetTagCloud extends AbstractFacet implements OnChanges {\n    /** search results */\n    @Input() results: Results;\n    /** list of aggregations to be considered in collecting tag-cloud data */\n    @Input() aggregations: string | string[];\n    /** maximum number of data to be displayed in tag-cloud */\n    @Input() limit = 50;\n    /** the way data are collected from given aggregations: equal repartition between them or most relevant among all of them */\n    @Input() uniformRepartition = false;\n    /** show/hide number of occurrences of each item*/\n    @Input() showCount = false;\n    /** define the size of each displayed item: common size for all or proportional size based on their count */\n    @Input() proportionalWeight = true;\n    /** lowest count under which items will not be taken into account in tag-cloud data */\n    @Input() countThreshold = 0;\n    /** wether data are rendered following their count sorting or randomly */\n    @Input() shuffleData = false;\n    /** Isolate filtering results from other facets available in the app */\n    @Input() isolateFacetFilters = false;\n\n    aggregationsData: Aggregation[] = [];\n    tagCloudData: TagCloudItem[] = [];\n    private filtered: AggregationItem[] = [];\n\n    // Actions enabled within the facet\n    private readonly clearFilters: Action;\n    // Default weight to be applied if proportionalWeight = false\n    private readonly defaultWeight = 2;\n    // Prefix for tag-cloud facet name to be used if isolateFacetFilters = true\n    private readonly tagCloudFacetPrefix = \"tag-cloud_\";\n\n    constructor(private facetService: FacetService) {\n        super();\n\n        // Clear the current filters\n        this.clearFilters = new Action({\n            icon: \"far fa-minus-square\",\n            title: \"msg#facet.clearSelects\",\n            action: () => {\n                if (Utils.isArray(this.aggregations)) {\n                    for (const aggregation of this.aggregations) this.facetService.clearFiltersSearch(this.getName(aggregation), true);\n                } else { \n                    this.facetService.clearFiltersSearch(this.getName(this.aggregations), true);\n                }\n            },\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!!changes[\"results\"]) {\n            /* reset filtered items */\n            this.filtered = [];\n\n            /* update tag-cloud data */\n            this.tagCloudData = this.getTagCloudData();\n        }\n    }\n\n    /**\n     * Defines the tag-cloud data according to given inputs\n     */\n    getTagCloudData(): TagCloudItem[] {\n        const aggregationsData = this.getAggregationsData();\n\n        if (aggregationsData.length === 0) {\n            return [];\n        } else {\n            let tmp: TagCloudItem[] = [];\n\n            if (this.uniformRepartition) {\n                aggregationsData.forEach((data: Aggregation) => {\n                    const end = Math.floor(this.limit / aggregationsData.length);\n                    // Firstly, take filtered items\n                    tmp.push(\n                        ...data\n                            .items!.filter((item) => item.$filtered)\n                            .sort((a, b) => b.count - a.count)\n                            .slice(0, end)\n                            .map(\n                                (item: AggregationItem) =>\n                                    ({\n                                        aggregation: data,\n                                        item: item,\n                                        weight: this.proportionalWeight\n                                            ? item.count\n                                            : this.defaultWeight,\n                                    } as TagCloudItem)\n                            )\n                    );\n                    // add most relevant items if threshold not attenuated\n                    if (tmp.length < end) {\n                        tmp.push(\n                            ...data\n                                .items!.filter(\n                                    (item) => item.count > this.countThreshold && !item.$filtered\n                                )\n                                .sort((a, b) => b.count - a.count)\n                                .slice(0, end - tmp.length)\n                                .map(\n                                    (item: AggregationItem) =>\n                                        ({\n                                            aggregation: data,\n                                            item: item,\n                                            weight: this.proportionalWeight\n                                                ? item.count\n                                                : this.defaultWeight,\n                                        } as TagCloudItem)\n                                )\n                        );\n                    }\n                });\n                tmp = tmp.sort((a, b) => b.item.count - a.item.count);\n            } else {\n                aggregationsData.forEach((data: Aggregation) => {\n                    tmp.push(\n                        ...data\n                            .items!.filter(\n                                (item) =>\n                                    item.count > this.countThreshold || item.$filtered\n                            )\n                            .map(\n                                (item: AggregationItem) =>\n                                    ({\n                                        aggregation: data,\n                                        item: item,\n                                        weight: this.proportionalWeight\n                                            ? item.count\n                                            : this.defaultWeight,\n                                    } as TagCloudItem)\n                            )\n                    );\n                });\n                const filtered = tmp.filter((elem) => elem.item.$filtered);\n                if (filtered.length < this.limit) {\n                    const notFiltered = tmp\n                        .filter((elem) => !elem.item.$filtered)\n                        .sort((a, b) => b.item.count - a.item.count);\n                    tmp = [...filtered];\n                    tmp.push(\n                        ...notFiltered.slice(0, this.limit - filtered.length)\n                    );\n                } else {\n                    tmp = filtered.slice(0, this.limit);\n                }\n            }\n\n            // By default, sort the whole array with respect to its counts and update its elements weight value\n            tmp = tmp\n                .sort((a, b) => b.item.count - a.item.count)\n                .map(\n                    (elem: TagCloudItem) =>\n                        ({\n                            ...elem,\n                            weight: this.proportionalWeight\n                                ? this.scaleItemWeight(tmp, elem.item.count)\n                                : this.defaultWeight,\n                        } as TagCloudItem)\n                );\n\n            // Shuffle the array\n            if (this.shuffleData) {\n                tmp = this.shuffle(tmp);\n            }\n\n            return tmp;\n        }\n    }\n\n    /**\n     * Invoked on click on an item in order to update the query\n     * @param tagCloudItem\n     * @param event\n     */\n    filterItem(tagCloudItem: TagCloudItem, event) {\n        const name = this.getName(tagCloudItem.aggregation.name);\n        const aggregation = tagCloudItem.aggregation;\n        const item = tagCloudItem.item;\n        if (!this.isFiltered(aggregation, item)) {\n            this.facetService.addFilterSearch(name, aggregation, item);\n        } else {\n            this.facetService.removeFilterSearch(name, aggregation, item);\n        }\n        event.preventDefault();\n    }\n\n    /**\n     * Define the possible actions according to the actual context\n     */\n    get actions(): Action[] {\n        const actions: Action[] = [];\n        if(this.isFiltering()) {\n            actions.push(this.clearFilters);\n        }\n        return actions;\n    }\n\n    /**\n     * Map the initial aggregations names to a list of Aggregation\n     */\n    protected getAggregationsData(): Aggregation[] {\n        return []\n            .concat(this.aggregations as [])\n            .filter((agg: string) =>\n                this.facetService.hasData(agg, this.results)\n            )\n            .map(\n                (agg: string) =>\n                    this.facetService.getAggregation(\n                        agg,\n                        this.results\n                    ) as Aggregation\n            )\n            .map((data: Aggregation) => this.refreshFiltered(data));\n    }\n\n    /**\n     * Update aggregation's data with respect to active filters in the query & breadcrumbs\n     * @param data\n     */\n    protected refreshFiltered(data: Aggregation): Aggregation {\n        const facetName = this.getName(data.name);\n        if (this.facetService.hasFiltered(facetName)) {\n            // refresh filters from breadcrumbs\n            const items = this.facetService.getAggregationItemsFiltered(facetName, data.valuesAreExpressions);\n            items.forEach((item) => {\n                if (!this.isFiltered(data, item)) {\n                    item.$filtered = true;\n                    this.filtered.push(item);\n                }\n            });\n\n            // double check filters from query and breadcrumb\n            data.items!.forEach((item) => {\n                const indx = this.facetService.filteredIndex(data, this.filtered, item);\n                if (this.facetService.itemFiltered(facetName, data, item)) {\n                    item.$filtered = true;\n                    if (!this.isFiltered(data, item)) {\n                        this.filtered.push(item);\n                    }\n                } else if (indx !== -1) {\n                    // sometime facetService.itemFiltered() could returns false but item is present in breadcrumbs\n                    item.$filtered = true;\n                }\n            });\n        }\n        return data;\n    }\n\n    /**\n     * Returns facets names to be used according to @input() isolateFacetFilters\n     * @param aggregationName\n     */\n    private getName(aggregationName: string): string {\n        if (!this.isolateFacetFilters) {\n            return aggregationName;\n        }\n        return this.tagCloudFacetPrefix + aggregationName;\n    }\n\n    /**\n     * Linearly map the original weight to a discrete scale from 1 to 10\n     * @param weight original weight\n     */\n    private scaleItemWeight(tagCloudData: TagCloudItem[], weight: number): number {\n        return (\n            Math.round(\n                ((weight - tagCloudData[tagCloudData.length - 1].weight) /\n                    (tagCloudData[0].weight -\n                        tagCloudData[tagCloudData.length - 1].weight)) *\n                    9.0\n            ) + 1\n        );\n    }\n\n    /**\n     * Returns true if the supplied item within the given aggregation is filtering the query\n     * @param data\n     * @param item\n     */\n    private isFiltered(data: Aggregation, item: AggregationItem): boolean {\n        return this.facetService.filteredIndex(data, this.filtered, item) !== -1;\n    }\n\n    /**\n     * Shuffle items of the supplied array\n     * @param arr\n     */\n    private shuffle(arr: TagCloudItem[]): TagCloudItem[] {\n        for (let i = arr.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * i);\n            const aux = arr[i];\n            arr[i] = arr[j];\n            arr[j] = aux;\n        }\n        return arr;\n    }\n\n    /**\n     * Returns true if there is at least one active filter in the tag-cloud facet\n     */\n    private isFiltering(): boolean {\n        return []\n                .concat(this.aggregations as [])\n                .some((aggregationName: string) =>\n                    this.facetService.hasFiltered(this.getName(aggregationName))\n                );\n    }\n}\n","<ul class=\"cloud\" [attr.data-show-count]=\"showCount ? '' : null\">\n    <li *ngFor=\"let data of tagCloudData\">\n        <a\n            href=\"#\"\n            [attr.data-count]=\"data.item.count\"\n            [attr.data-weight]=\"proportionalWeight ? data.weight : null\"\n            class=\"sq-metadata-color-{{data.aggregation.column}}\"\n            (click)=\"filterItem(data, $event)\">\n            <i class=\"far fa-check-circle filtered\" *ngIf=\"data.item.$filtered\"></i>\n            {{data.item | sqValue:data.item.$column}}\n        </a>\n    </li>\n</ul>\n","import {Component, Input, AfterViewInit, ContentChild, TemplateRef} from \"@angular/core\";\nimport {trigger, state, animate, transition, style, AnimationTriggerMetadata} from '@angular/animations';\n\nexport function collapseAnimations(timings: number | string): AnimationTriggerMetadata[] {\n    return [\n        trigger('show', [\n            state('void', style({height: 0})),\n            transition('void <=> 1', [\n                animate(timings)\n            ])\n        ])\n    ];\n}\n\n@Component({\n    selector: \"sq-collapse\",\n    template: `\n        <div *ngIf=\"!collapsed\" class=\"sq-collapse\" [@show]=\"!collapsed && afterViewInit\">\n            <ng-container [ngTemplateOutlet]=\"template\"></ng-container>\n        </div>\n    `,\n    styles: [\".sq-collapse.ng-animating { overflow: hidden; }\"],\n    animations: collapseAnimations(\".15s ease-in-out\")\n})\nexport class Collapse implements AfterViewInit {\n    @Input() collapsed: boolean;\n    afterViewInit: boolean; // This allows to only trigger the animation after the view initialization\n    @ContentChild(TemplateRef, {static: false}) template: TemplateRef<any>;\n\n    constructor() {\n        this.collapsed = true;\n    }\n\n    ngAfterViewInit() {\n        setTimeout(() => this.afterViewInit = true, 0); // Value can switch synchronously => this can cause \"Expression has changed\" error\n    }\n}","import { Component, EventEmitter, Output, ChangeDetectorRef } from '@angular/core';\nimport { AutocompleteItem } from '../autocomplete.directive';\nimport { FieldSearchItemsContainer } from '../autocomplete-field-search.directive';\n\n@Component({\n    selector: \"sq-field-search-items\",\n    template: `\n<span *ngFor=\"let item of items\" class=\"badge badge-pill badge-info align-self-center mr-1\" [ngClass]=\"item.category\">\n    {{item.display}} <span class=\"fas fa-times-circle clickable\" (click)=\"removeItem(item)\"></span>\n</span>\n`,\n    styles: [`\n:host {\n    display: flex;\n}\n.clickable {\n    cursor: pointer;\n}\n.clickable:hover {\n    opacity: 85%;\n}\n`]\n})\nexport class BsFieldSearchItemsComponent implements FieldSearchItemsContainer {\n    @Output() itemRemoved = new EventEmitter<AutocompleteItem>();\n\n    items: AutocompleteItem[] = [];\n\n    constructor(protected changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    update(items: AutocompleteItem[]): void {\n        this.items = items;\n        this.changeDetectorRef.markForCheck();\n    }\n\n    removeItem(item: AutocompleteItem) {\n        this.itemRemoved.next(item);\n        this.changeDetectorRef.markForCheck();\n    }\n\n}\n","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enCollapse, frCollapse, deCollapse} from \"@sinequa/components/collapse\";\nimport {enMetadata, frMetadata, deMetadata} from \"@sinequa/components/metadata\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\nimport {enFacet, frFacet, deFacet} from \"@sinequa/components/facet\";\nimport {enResult, frResult, deResult} from \"@sinequa/components/result\";\n\nimport _enPreview from \"./en\";\nimport _frPreview from \"./fr\";\nimport _dePreview from \"./de\";\n\nconst enPreview = Utils.merge({}, _enPreview, enSearch, enCollapse, enMetadata, enModal, enFacet, enResult);\nconst frPreview = Utils.merge({}, _frPreview, frSearch, frCollapse, frMetadata, frModal, frFacet, frResult);\nconst dePreview = Utils.merge({}, _dePreview, deSearch, deCollapse, deMetadata, deModal, deFacet, deResult);\n\nexport { enPreview, frPreview, dePreview };\n","export * from \"./facet.service\";\nexport * from \"./abstract-facet\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export default {\n    \"help\": {\n        \"title\": \"Online-Hilfe\"\n    },\n\n    \"overrideUser\": {\n        \"title\": \"Benutzer wechseln\",\n        \"userName\": \"Benutzername\",\n        \"domain\": \"Domäne\"\n    },\n\n    \"btnClose\": {\n        \"text\": \"Schließen\"\n    }\n};\n","import { Component, Inject } from '@angular/core';\nimport { ModalButton, ModalResult } from '@sinequa/core/modal';\nimport { Action } from '@sinequa/components/action';\nimport { MODAL_MODEL } from '@sinequa/core/modal';\nimport { FormGroup } from '@angular/forms';\nimport { DashboardItemOption } from './dashboard.service';\n\nexport interface DashboardAddItemModel {\n    options: DashboardItemOption[]; // Input of the modal\n    selectedOption?: DashboardItemOption; // Output of the modal\n    width?: number;\n    height?: number;\n}\n\n@Component({\n    selector: 'sq-dashboard-add-item',\n    templateUrl: './dashboard-add-item.component.html',\n    styleUrls: ['./dashboard-add-item.component.scss']\n})\nexport class DashboardAddItemComponent {\n\n    actions: Action[];\n    buttons: ModalButton[];\n    validation = {valid: false};\n    theme: string;\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: DashboardAddItemModel\n    ) {\n\n        this.theme = document.body.classList.contains(\"dark\")? \"dark\" : \"light\";\n\n        this.actions = model.options.map(option => new Action({\n            icon: option.icon,\n            text: option.text,\n            title: 'msg#dashboard.addWidgetItemTitle',\n            messageParams: {values: {item: option.text}},\n            action: (action: Action) => {\n                this.actions.forEach(a => a.selected = false); // Unselect other actions\n                action.selected = true; // Select this one\n                model.selectedOption = option;\n                this.validation.valid = true;\n            }\n        }));\n\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true,\n                validation: this.validation as FormGroup\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    updateWidth(event: Event) {\n        this.model.width = +event.target!['value'];\n    }\n    \n    updateHeight(event: Event) {\n        this.model.height = +event.target!['value'];\n    }\n}","<sq-modal [title]=\"'msg#dashboard.addWidgetModalTitle'\" [buttons]=\"buttons\">\n    <div class=\"d-flex justify-content-center\" [sq-action-buttons]=\"{items: actions, style: theme}\"></div>\n    <div class=\"form-inline m-2\">\n        {{ 'msg#dashboard.addWidgetModalTitle' | sqMessage }}:\n        <select value=\"2\" class=\"form-control form-control-sm mr-1 ml-2\" title=\"{{ 'msg#dashboard.addWidgetWidth' | sqMessage }}\" (change)=\"updateWidth($event)\">\n            <option>1</option>\n            <option selected>2</option>\n            <option>3</option>\n            <option>4</option>\n        </select>\n        x\n        <select value=\"2\" class=\"form-control form-control-sm ml-1\" title=\"{{ 'msg#dashboard.addWidgetHeight' | sqMessage }}\" (change)=\"updateHeight($event)\">\n            <option>1</option>\n            <option selected>2</option>\n            <option>3</option>\n            <option>4</option>\n        </select>\n    </div>\n</sq-modal>","import { Component, Input, Output, ViewChild, ElementRef, EventEmitter, ContentChild, OnChanges, SimpleChanges, AfterViewInit, ChangeDetectorRef, OnInit, OnDestroy, ChangeDetectionStrategy } from \"@angular/core\";\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { Utils } from \"@sinequa/core/base\";\nimport { PreviewDocument } from \"./preview-document\";\n\n\n/**\n * This component manages the iframe containing the document's preview.\n * The main input is the URL of the document's preview.\n * The main output is an event emitter providing an instance of PreviewDocument.\n *\n * PreviewDocument is a wrapper around the HTML Document, allowing to interact with\n * the HTML of the preview (for example to highlight some entities)\n *\n * It is possible to insert a tooltip in the preview via transclusion.\n * Example:\n    <sq-preview-document-iframe\n        [downloadUrl]=\"downloadUrl\"\n        (onPreviewReady)=\"onPreviewReady($event)\">\n        <sq-preview-tooltip #tooltip\n            [previewDocument]=\"previewDocument\"\n            [previewData]=\"previewDocument\">\n        </sq-preview-tooltip>\n    </sq-preview-document-iframe>\n */\n@Component({\n    selector: \"sq-preview-document-iframe\",\n    template: `\n                <iframe #documentFrame\n                    [attr.sandbox]=\"_sandbox\"\n                    [src]=\"sanitizedUrlSrc\"\n                    [style.--factor]=\"scalingFactor\"\n                    [ngStyle]=\"{'-ms-zoom': scalingFactor, '-moz-transform': 'scale(var(--factor))', '-o-transform': 'scale(var(--factor))', '-webkit-transform': 'scale(var(--factor))'}\">\n                </iframe>`,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    styles: [`\n:host{\n    flex: 1;\n}\n\n\niframe {\n    background-color: white;\n    flex: 1;\n    position: relative;\n    display: block;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    height: calc(100% / var(--factor));\n    width: calc(100% / var(--factor));\n    border: 0;\n\n    -moz-transform-origin: 0 0;\n    -o-transform-origin: 0 0;\n    -webkit-transform-origin: 0 0;\n}\n\n.spinner-grow {\n    width: 3rem;\n    height: 3rem\n}\n    `]\n})\nexport class PreviewDocumentIframe implements OnChanges, OnInit, OnDestroy, AfterViewInit {\n    defaultSandbox: string = \"allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts\";\n    @Input() sandbox: string | null | undefined;\n    @Input() downloadUrl: string;\n    @Input() scalingFactor: number = 1.0;\n    @Output() onPreviewReady = new EventEmitter<PreviewDocument>();\n    \n    // page could change when location.href change or when user click on a tab (sheet case)\n    // when URL a string is sent otherwise a PreviewDocument\n    @Output() pageChange = new EventEmitter<string | PreviewDocument>();\n    @ViewChild('documentFrame', {static: true}) documentFrame: ElementRef;  // Reference to the preview HTML in the iframe\n    @ContentChild('tooltip', {read: ElementRef, static: false}) tooltip: ElementRef; // see https://stackoverflow.com/questions/45343810/how-to-access-the-nativeelement-of-a-component-in-angular4\n\n    public sanitizedUrlSrc: SafeResourceUrl;\n    // Must be undefined by default, because if a default value is set, \n    // if we set it to undefined in the future, this new (undefined) value \n    // is not used by the iFrame as if it used the previous value\n    public _sandbox: string | null | undefined;\n    \n    private previewDocument: PreviewDocument;\n    readonly previewDocLoadHandler;\n\n    constructor(\n        private cdr: ChangeDetectorRef,\n        private sanitizer: DomSanitizer) {\n            this.previewDocLoadHandler = this.onPreviewDocLoad.bind(this);\n    }\n\n    public onPreviewDocLoad() {\n        \n        if(this.downloadUrl === undefined) return;\n        // previewDocument must be created here when document is fully loaded\n        // because in case of sheet, PreviewDocument constructor change.\n        this.previewDocument = new PreviewDocument(this.documentFrame);\n        \n        // SVG highlight:\n        //   background rectangle (highlight) were added to the SVG by the HTML generator (C#), but html generation is\n        //   not able to know the geometry of the text. It is up to the browser to compute the position and size of the\n        //   background. That needs to be done now that the iFrame is loaded.\n        try {\n            this.previewDocument.setSvgBackgroundPositionAndSize();\n        } catch (error) {\n            console.error(error);\n        }\n\n        /* To catch tab's sheet changes\n         * Sheet structure:\n         * <iframe #preview>\n         *      #document\n         *          ...\n         *          <frameset>\n         *              <iframe name=\"frSheet\"> // current sheet displayed\n         *              <iframe name=\"frTabs\">  // contains all sheet's tabs\n         *          </frameset>\n         *          ...\n         * </iframe>\n         */ \n        const sheetFrame = this.documentFrame.nativeElement.contentDocument.getElementsByName(\"frSheet\");\n        if(sheetFrame.length > 0) {\n            sheetFrame[0].removeEventListener(\"load\", () => {});\n            sheetFrame[0].addEventListener(\"load\", () => {\n                this.previewDocument = new PreviewDocument(this.documentFrame);\n                this.pageChange.next(this.previewDocument);\n                this.cdr.markForCheck();\n            }, true);\n        }\n\n        if (this.tooltip)\n            this.addTooltip(this.previewDocument);\n\n        // Let upstream component know document is now ready\n        this.onPreviewReady.next(this.previewDocument);\n        this.cdr.markForCheck();\n    }\n\n    addTooltip(previewDocument: PreviewDocument) {\n        previewDocument.insertComponent(this.tooltip.nativeElement);\n    }\n\n    ngOnInit() {\n        this.documentFrame.nativeElement.addEventListener(\"load\", this.previewDocLoadHandler, true);\n    }\n\n    ngOnDestroy() {\n        this.documentFrame.nativeElement.removeEventListener(\"load\", this.previewDocLoadHandler);\n    }\n\n    ngOnChanges(simpleChanges: SimpleChanges) {\n        if (simpleChanges.scalingFactor && !simpleChanges.scalingFactor.firstChange) {\n            return;\n        }\n\n        this.resetContent();\n        if (simpleChanges.downloadUrl && simpleChanges.downloadUrl.currentValue !== undefined) {\n            // set sandbox attribute only when downloadUrl is defined, so iframe is created without sandbox attribute\n            // if sandbox is null, keep sandbox attribute to undefined\n            // otherwise put sanbox value in the sanbox attribute or default sandbox value\n            this._sandbox = (this.sandbox === null) ? undefined : Utils.isString(this.sandbox) ? this.sandbox : this.defaultSandbox;\n            this.sanitizedUrlSrc = this.sanitizer.bypassSecurityTrustResourceUrl(this.downloadUrl);\n        }\n    }\n\n    ngAfterViewInit() {\n        this.resetContent();\n        this.iframeURLChange(this.documentFrame.nativeElement, (newURL: string) => {\n            this.previewDocument = new PreviewDocument(this.documentFrame);\n            this.pageChange.next(newURL);\n        });\n    }\n\n    iframeURLChange(iframe, callback) {\n        let lastDispatched = null;\n\n        const dispatchChange = function () {\n            if (iframe.contentWindow) {\n                const newHref = iframe.contentWindow.location.href;\n                if (newHref === \"about:blank\") return;\n                if (newHref !== lastDispatched) {\n                    callback(newHref);\n                    lastDispatched = newHref;\n                }\n            }\n        };\n\n        const unloadHandler = function (e: Event) {\n            setTimeout(dispatchChange, 0);\n        };\n\n        function attachUnload() {\n            // Remove the unloadHandler in case it was already attached.\n            // Otherwise, there will be two handlers, which is unnecessary.\n            if (iframe.contentWindow) {\n                iframe.contentWindow.removeEventListener(\"unload\", unloadHandler);\n                iframe.contentWindow.addEventListener(\"unload\", unloadHandler);\n            }\n        }\n\n        iframe.addEventListener(\"load\", function () {\n\n            attachUnload();\n\n            // Just in case the change wasn't dispatched during the unload event...\n            dispatchChange();\n        });\n\n        attachUnload();\n    }\n\n    resetContent() {\n        this.sanitizedUrlSrc = this.sanitizer.bypassSecurityTrustResourceUrl('about:blank');\n    }\n}\n","import {Injectable, Inject, Type, Injector, InjectionToken} from \"@angular/core\";\nimport {FormGroup, ValidatorFn} from \"@angular/forms\";\nimport {Overlay, OverlayConfig, OverlayRef} from '@angular/cdk/overlay';\nimport {ComponentPortal} from '@angular/cdk/portal';\nimport {Utils, Keys} from \"@sinequa/core/base\";\nimport {MessageParams} from \"@sinequa/core/intl\"; // Dependency to INTL !\nimport {ModalRef, IModalRef} from \"./modal-ref\";\n\n/** Describes the configuration object that can be passed when opening\n * a modal with the {@link ModalService}.\n */\nexport interface ModalConfig {\n    /**\n     * Classes that should be added to the `Overlay` pane.\n     */\n    panelClass?: string | string[];\n    /**\n     * Indicates whether a backdrop should be added when opening the modal.\n     */\n    hasBackdrop?: boolean;\n    /**\n     * Classes that should be added to the backdrop.\n     */\n    backdropClass?: string | string[];\n    /**\n     * The data model that the modal will operate on.\n     */\n    model?: any;\n    /**\n     * The CSS width of the modal.\n     */\n    width?: string;\n    /**\n     * The CSS height of the modal.\n     */\n    height?: string;\n    /**\n     * Indicates whether the modal should occupy the screen width and height. In this case\n     * `width` and `height` are set to `100%` and the `sq-modal-fullscreen` class is added\n     * to `panelClass`\n     */\n    fullscreen?: boolean;\n    /**\n     * Indicates whether a click on the backdrop should close the modal. The default value\n     * is `true`.\n     */\n    closeOnBackdropClick?: boolean;\n}\n\nconst DEFAULT_CONFIG: ModalConfig = {\n    hasBackdrop: true,\n    backdropClass: [\"cdk-overlay-dark-backdrop\", \"sq-modal-backdrop\"],\n    panelClass: \"sq-modal-pane\",\n    model: null,\n    closeOnBackdropClick: true\n};\n\n/**\n * The `MODAL_MODEL` injection token can be used to access the modal's model in\n * the the modal component. The value is `provided` from the value set in the\n * {@link ModalConfig} options when the modal is opened.\n */\nexport const MODAL_MODEL = new InjectionToken<any>('MODAL_MODEL');\n\n/**\n * The possible result values that can be set when a modal is closed. Buttons in a modal\n * have an associated `ModalResult` value. All buttons except those with a `Custom` result\n * value will close the modal when they are clicked.\n */\nexport const enum ModalResult {\n    OK = -1,\n    Cancel = -2,\n    Yes = -3,\n    No = -4,\n    Abort = -5,\n    Retry = -6,\n    Ignore = -7,\n    Custom = 0\n}\n\n/**\n * An enumeration of the types of confirm modals. The type of the confirm modal\n * can be reflected in the icon and/or colors used.\n */\nexport const enum ConfirmType {\n    Success,\n    Info,\n    Warning,\n    Error\n}\n\n/**\n * Describes the options that can be passed to the [ModalService.confirm]{@link ModalService#confirm}\n * method.\n */\nexport interface ConfirmOptions {\n    /**\n     * The title of the confirm modal.\n     */\n    title?: string;\n    /**\n     * The message dispayed in the confirm modal.\n     */\n    message: string;\n    /**\n     * Any parameters for the `message`.\n     */\n    messageParams?: MessageParams;\n    /**\n     * The type of the confirm modal.\n     */\n    confirmType?: ConfirmType;\n    /**\n     * The buttons to display in the confirm modal.\n     */\n    buttons: ModalButton[];\n}\n\n/**\n * Describes the options that can be passed to the [ModalService.prompt]{@link ModalService#prompt}\n * method.\n */\nexport interface PromptOptions extends ConfirmOptions {\n    /**\n     * text written by the user in the prompt input\n     */\n    output: string;\n    /**\n     * List of validators for the input form control\n     */\n    validators?: ValidatorFn[];\n    /**\n     * If omitted, a single-line input is displayed. If specified, a textarea with the\n     * given number of rows is displayed\n     */    \n    rowCount?: number;\n}\n\n/**\n * Describes the options that can be used when creating an instance of a {@link ModalButton}.\n */\nexport interface IModalButton {\n    /**\n     * The result associated with the button.\n     */\n    result: ModalResult;\n    /**\n     * Indicates whether this button is the primary button amongst a set of buttons.\n     */\n    primary?: boolean;\n    /**\n     * The button text.\n     */\n    text?: string;\n    /**\n     * Indicates whether the button is currently visible.\n     */\n    visible?: boolean;\n    /**\n     * The validation `FormGroup` that should be tested when the button is clicked.\n     * The button will only perform its `action` when the validation is `valid`.\n     */\n    validation?: FormGroup;\n    /**\n     * Indicats whether the button should be rendered with an `<a>` tag rather than\n     * a `<button>` tag.\n     */\n    anchor?: boolean;\n\n    /**\n     * The action to perform when the button is clicked. Buttons with `result` values other\n     * than `Custom` also close the modal.\n     */\n    action?: (button: ModalButton) => void;\n}\n\n/**\n * A class representing a button displayed in a modal.\n */\nexport class ModalButton implements IModalButton {\n    /**\n     * The result associated with the button.\n     */\n    result: ModalResult;\n    /**\n     * Indicates whether this button is the primary button amongst a set of buttons.\n     */\n    primary: boolean;\n    /**\n     * The button text.\n     */\n    text: string;\n    /**\n     * Indicates whether the button is currently visible.\n     */\n    visible: boolean;\n    /**\n     * The validation `FormGroup` that should be tested when the button is clicked.\n     * The button will only perform its `action` when the validation is `valid`.\n     */\n    validation: FormGroup;\n    /**\n     * Indicats whether the button should be rendered with an `<a>` tag rather than\n     * a `<button>` tag.\n     */\n    anchor: boolean;\n\n    /**\n     * The action to perform when the button is clicked. Buttons with `result` values other\n     * than `Custom` also close the modal.\n     */\n    action: (button: ModalButton) => void;\n\n    constructor(options: IModalButton) {\n        Utils.extend(this, {visible: true, anchor: false}, options);\n    }\n\n    /**\n     * Get the button text. Buttons with non-custom result types\n     * have default text depending on their result type -\n     * `msg#modal.buttons.ok`, `msg#modal.buttons.cancel` etc\n     */\n    getText() {\n        if (this.text) {\n            return this.text;\n        }\n        switch (this.result) {\n            case ModalResult.OK:\n                return \"msg#modal.buttons.ok\";\n            case ModalResult.Cancel:\n                return \"msg#modal.buttons.cancel\";\n            case ModalResult.Yes:\n                return \"msg#modal.buttons.yes\";\n            case ModalResult.No:\n                return \"msg#modal.buttons.no\";\n            case ModalResult.Abort:\n                return \"msg#modal.buttons.abort\";\n            case ModalResult.Retry:\n                return \"msg#modal.buttons.retry\";\n            case ModalResult.Ignore:\n                return \"msg#modal.buttons.ignore\";\n            default:\n                return \"\";\n        }\n    }\n\n    /**\n     * Perform a click on a button. The button's explicit action is performed if set and\n     * the modal closed with the button's modal result if the `result` type is non-`Custom`.\n     * If the validation status not `valid` this method returns without performing any action.\n     *\n     * @param closer An object with a `close` method. If the result type is non-custom then\n     * the `close` method of this object is called.\n     */\n    click(closer: {close(result: any): void}) {\n        if (this.validation && !this.validation.valid) {\n            return;\n        }\n        if (this.action) {\n            this.action(this);\n        }\n        if (this.result !== ModalResult.Custom) {\n            closer.close(this.result);\n        }\n    }\n}\n\n/**\n * An injection token to set the component to use for the `confirm` modal displayed\n * by the [ModalService.confirm]{@link ModalService#confirm} method.\n */\nexport const MODAL_CONFIRM = new InjectionToken<Type<any>>('MODAL_CONFIRM');\n\n/**\n * An injection token to set the component to use for the `prompt` modal displayed\n * by the [ModalService.prompt]{@link ModalService#confirm} method.\n */\nexport const MODAL_PROMPT = new InjectionToken<Type<any>>('MODAL_PROMPT');\n\n/**\n * A service to open modal dialogs.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class ModalService {\n    constructor(\n        protected injector: Injector,\n        protected overlay: Overlay,\n        @Inject(MODAL_CONFIRM) protected confirmModal: Type<any>,\n        @Inject(MODAL_PROMPT) protected promptModal: Type<any>\n    ) {\n    }\n\n    /**\n     * Open a modal dialog using the passed configuration options.\n     *\n     * @param component The type of the component to use for the modal.\n     * @param config Configuration options for the modal.\n     * @retuns An `IModalRef` object that can be used to close the modal.\n     */\n    openRef(component: Type<any>, config: ModalConfig = {}): IModalRef {\n        // Override default configuration\n        const modalConfig = { ...DEFAULT_CONFIG, ...config };\n        if (modalConfig.fullscreen) {\n            modalConfig.width = \"100%\";\n            modalConfig.height = \"100%\";\n            if (Utils.isString(modalConfig.panelClass)) {\n                modalConfig.panelClass = [modalConfig.panelClass, \"sq-modal-fullscreen\"];\n            }\n            else if (modalConfig.panelClass) {\n                modalConfig.panelClass.push(\"sq-modal-fullscreen\");\n            }\n            else {\n                modalConfig.panelClass = \"sq-modal-fullscreen\";\n            }\n        }\n        // Returns an OverlayRef which is a PortalHost\n        const overlayRef = this.createOverlay(modalConfig);\n        // Instantiate remote control\n        const modalRef = new ModalRef(overlayRef);\n        const overlayComponent = this.attachDialogContainer(component, overlayRef, modalConfig, modalRef);\n        modalRef.componentInstance = overlayComponent;\n        overlayRef.hostElement.classList.add(\"sq-modal-host\");\n        if (modalConfig.closeOnBackdropClick) {\n            // NB backdropClick will not fire if pointer-events are enabled on modal-host\n            overlayRef.backdropClick().subscribe(() => modalRef.close());\n            // Provide support for a scrollable sq-modal-host (overlay wrapper)\n            // The standard cdk styling disables pointer-events at this level which means that scrolling\n            // won't work. We can enable pointer-events in css but then the backdrop will not receive the\n            // click event. So, we handle the click event directly on sq-modal-host also and if the\n            // click target === sq-modal-host then we initiate modal closing here\n            overlayRef.hostElement.addEventListener(\"click\", (event) => {\n                if (event.target === overlayRef.hostElement) {\n                    modalRef.close();\n                }\n            });\n        }\n        overlayRef.keydownEvents().subscribe((event) => {\n            if (event.keyCode === Keys.esc) {\n                modalRef.close();\n            }\n        });\n        modalRef.disableSubmit();\n        return modalRef;\n    }\n\n    /**\n     * A wrapper around the {@link #openRef} method which returns a `Promise` that resolves\n     * with the `ModalResult` when the modal is closed.\n     *\n     * @param component The type of the component to use for the modal.\n     * @param config Configuration options for the modal.\n     * @retuns The `ModalResult` when the modal is closed.\n     */\n    open(component: Type<any>, config: ModalConfig = {}): Promise<ModalResult> {\n        const modalRef = this.openRef(component, config);\n        return modalRef.afterClosed().toPromise();\n    }\n\n    private createOverlay(config: ModalConfig): OverlayRef {\n        const overlayConfig = this.getOverlayConfig(config);\n        return this.overlay.create(overlayConfig);\n    }\n\n    private attachDialogContainer(component: Type<any>, overlayRef: OverlayRef, config: ModalConfig, modalRef: ModalRef) {\n        // PortalInjector() is deprecated\n        const injector = Injector.create({\n            providers:[\n                {provide: ModalRef, useValue: modalRef},\n                {provide: MODAL_MODEL, useValue: config.model}\n            ], \n            parent:this.injector\n        });\n        const containerPortal = new ComponentPortal(component, null, injector);\n        const containerRef = overlayRef.attach<Type<any>>(containerPortal);\n\n        return containerRef.instance;\n    }\n\n    private getOverlayConfig(config: ModalConfig): OverlayConfig {\n        const positionStrategy = this.overlay.position()\n            .global()\n            .centerHorizontally()\n            .centerVertically();\n\n        const overlayConfig = new OverlayConfig({\n            hasBackdrop: config.hasBackdrop,\n            backdropClass: config.backdropClass,\n            panelClass: config.panelClass,\n            scrollStrategy: this.overlay.scrollStrategies.block(),\n            positionStrategy\n        });\n\n        return overlayConfig;\n    }\n\n    /**\n     * Open a confirmation modal dialog displaying a message and a set buttons. This is similar to the Javacsript\n     * `Window.alert` method but renders a modal.\n     *\n     * @param options The options used to open the confirm modal. These are set as the `MODAL_MODEL`  of the modal.\n     */\n    confirm(options: ConfirmOptions): Promise<ModalResult> {\n        return this.open(this.confirmModal, {model: options});\n    }\n\n    /**\n     * Open a prompt modal dialog displaying a message, an input and OK/Cancel buttons.\n     *\n     * @param options The options used to open the prompt modal. These are set as the `MODAL_MODEL`  of the modal.\n     */\n    prompt(options: PromptOptions): Promise<ModalResult> {\n        return this.open(this.promptModal, {model: options});\n    }\n\n    /**\n     * Open a confirm modal that has an `OK` button.\n     *\n     * @param message The message to display in the modal.\n     * @param messageParams The parameters for the message.\n     * @param title The confirm modal's title.\n     * @param confirmType The type of the confirm modal.\n     */\n    oK(\n        message: string,\n        messageParams?: MessageParams,\n        title?: string,\n        confirmType = ConfirmType.Success): Promise<ModalResult> {\n        return this.confirm({\n            title,\n            message,\n            messageParams,\n            confirmType,\n            buttons: [\n                new ModalButton({ visible: true, result: ModalResult.OK, primary: true })\n            ]\n        });\n    }\n\n    /**\n     * Open a confirm modal that has `OK` and `Cancel` buttons.\n     *\n     * @param message The message to display in the modal.\n     * @param messageParams The parameters for the message.\n     * @param title The confirm modal's title.\n     * @param confirmType The type of the confirm modal.\n     * @param primaryButton The result type of the button which should be primary.\n     */\n    oKCancel(\n        message: string,\n        messageParams?: MessageParams,\n        title?: string,\n        confirmType = ConfirmType.Info,\n        primaryButton = ModalResult.OK): Promise<ModalResult> {\n        return this.confirm({\n            title,\n            message,\n            messageParams,\n            confirmType,\n            buttons: [\n                new ModalButton({ visible: true, result: ModalResult.OK, primary: primaryButton === ModalResult.OK }),\n                new ModalButton({ visible: true, result: ModalResult.Cancel, primary: primaryButton === ModalResult.Cancel })\n            ]\n        });\n    }\n\n    /**\n     * Open a confirm modal that has `Yes` and `No` buttons.\n     *\n     * @param message The message to display in the modal.\n     * @param messageParams The parameters for the message.\n     * @param title The confirm modal's title.\n     * @param confirmType The type of the confirm modal.\n     * @param primaryButton The result type of the button which should be primary.\n     */\n    yesNo(\n        message: string,\n        messageParams?: MessageParams,\n        title?: string,\n        confirmType = ConfirmType.Info,\n        primaryButton = ModalResult.Yes): Promise<ModalResult> {\n        return this.confirm({\n            title,\n            message,\n            messageParams,\n            confirmType,\n            buttons: [\n                new ModalButton({ visible: true, result: ModalResult.Yes, primary: primaryButton === ModalResult.Yes }),\n                new ModalButton({ visible: true, result: ModalResult.No, primary: primaryButton === ModalResult.No })\n            ]\n        });\n    }\n}\n","const INTL_MODULE_PROVIDERS = [];\n\nexport {INTL_MODULE_PROVIDERS};\n","import enSearch from \"./en\";\nimport frSearch from \"./fr\";\nimport deSearch from \"./de\";\n\nexport { enSearch, frSearch, deSearch };\n","import { Component, Input, OnChanges, SimpleChanges, ChangeDetectorRef } from \"@angular/core\";\nimport { SafeResourceUrl } from '@angular/platform-browser';\nimport { PreviewData } from \"@sinequa/core/web-services\";\nimport { Query } from \"@sinequa/core/app-utils\";\nimport { PreviewService } from \"../../preview.service\";\nimport { PreviewDocument } from \"../../preview-document\";\n\n\n@Component({\n    selector: \"sq-preview-panel\",\n    templateUrl: \"./preview-panel.html\",\n    styleUrls: [\"./preview-panel.scss\"]\n})\nexport class BsPreviewPanel implements OnChanges {\n    @Input() query: Query;\n    @Input() previewData: PreviewData;\n    @Input() sandbox: string;\n    @Input() displaySimilarDocuments: boolean;\n    @Input() metadata: string[];\n    @Input() leftPaneAdditionalClasses: string;\n\n    downloadUrl?: SafeResourceUrl;\n    previewDocument: PreviewDocument;\n\n    constructor(\n        private previewService: PreviewService,\n        private changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes[\"previewData\"]) {\n            this.downloadUrl = this.previewData ? this.previewService.makeDownloadUrl(this.previewData.documentCachedContentUrl) : undefined;\n        }\n    }\n\n    onPreviewReady(previewDocument: PreviewDocument){\n        this.previewDocument = previewDocument;\n        this.changeDetectorRef.markForCheck();\n    }\n}","<div *ngIf=\"!!previewData\" class=\"container-fluid sq-preview\">\n    <div class=\"row sq-row\">\n        <div class=\"col-lg-3 sq-col {{leftPaneAdditionalClasses}}\">\n            <div class=\"sq-preview-bar\">\n                <sq-preview-links class=\"d-block mb-3\"\n                    [record]=\"previewData.record\" \n                    [resultId]=\"previewData.resultId\">\n                </sq-preview-links>\n                <sq-preview-highlights class=\"d-block mb-3\"\n                    [previewDocument]=\"previewDocument\"\n                    [previewData]=\"previewData\">\n                </sq-preview-highlights>\n                <sq-facet-card [title]=\"'msg#preview.documentPropertiesTitle'\" class=\"d-block mb-3\">\n                    <div class=\"card-body collapse show\" id=\"documentPropertiesBody\">\n                        <sq-metadata *ngIf=\"previewData.record\" [record]=\"previewData.record\" [items]=\"metadata\" [showTitles]=\"false\" [showIcons]=\"true\" [clickable]=\"false\">\n                        </sq-metadata>\n                    </div>\n                </sq-facet-card>\n                <sq-similar-documents *ngIf=\"displaySimilarDocuments\" class=\"d-block mb-3\"\n                    [sourceDocumentId]=\"previewData.record.id\" [query]=\"query\">\n                </sq-similar-documents>\n            </div>\n        </div>\n        <div class=\"col-lg-9 sq-col d-flex flex-column\">\n            <sq-preview-document-iframe \n                [sandbox] = \"sandbox\" \n                [downloadUrl]=\"downloadUrl\" \n                (onPreviewReady)=\"onPreviewReady($event)\">\n                <sq-preview-tooltip #tooltip\n                    [previewDocument]=\"previewDocument\"\n                    [previewData]=\"previewDocument\">\n                </sq-preview-tooltip>\n            </sq-preview-document-iframe>\n        </div>\n    </div>\n</div>","import {Utils} from \"@sinequa/core/base\";\nimport {enSearch, frSearch, deSearch} from \"@sinequa/components/search\";\nimport {enSelection, frSelection, deSelection} from \"@sinequa/components/selection\";\nimport {enModal, frModal, deModal} from \"@sinequa/components/modal\";\n\nimport _enSavedQueries from \"./en\";\nimport _frSavedQueries from \"./fr\";\nimport _deSavedQueries from \"./de\";\n\nconst enSavedQueries = Utils.merge({}, _enSavedQueries, enSearch, enSelection, enModal);\nconst frSavedQueries = Utils.merge({}, _frSavedQueries, frSearch, frSelection, frModal);\nconst deSavedQueries = Utils.merge({}, _deSavedQueries, deSearch, deSelection, deModal);\n\nexport { enSavedQueries, frSavedQueries, deSavedQueries };\n","import {HttpParams, HttpParameterCodec} from \"@angular/common/http\";\nimport {Observable, Subscription} from \"rxjs\";\nimport moment from \"moment\";\nimport {remove as removeDiacritics} from \"diacritics\";\nimport jsSHA from \"jssha\";\nimport {MapOf} from \"./map-of\";\nimport {FieldValue} from \"./field-value\";\nimport kebabCase from \"lodash/kebabCase\";\nimport snakeCase from \"lodash/snakeCase\";\nimport camelCase from \"lodash/camelCase\";\nimport escape from \"lodash/escape\";\nimport unescape from \"lodash/unescape\";\nimport isEqual from \"lodash/isEqual\";\n\n// Because of: https://github.com/angular/angular/issues/18261\nclass SqHttpParameterCodec implements HttpParameterCodec {\n    encodeKey(key: string): string {\n        return encodeURIComponent(key);\n    }\n\n    encodeValue(value: string): string {\n        return encodeURIComponent(value);\n    }\n\n    decodeKey(key: string): string {\n        return decodeURIComponent(key);\n    }\n\n    decodeValue(value: string): string {\n        return decodeURIComponent(value);\n    }\n}\n\n/**\n * Describes options for the [Utils.toJson]{@link Utils#toJson} method\n */\nexport interface ToJsonOptions {\n    /**\n     * If `true` then spacing is added to the output string\n     */\n    pretty?: boolean;\n}\n\n/**\n * Describes options for the [Utils.fromJson]{@link Utils#fromJson} method\n */\nexport interface FromJsonOptions {\n    /**\n     * If `true` then strings containing either ISO8601 or Sinequa \"system\" dates (`yyyy-mm-dd [hh:mm:ss]`) are\n     * converted to Javascript `Date` objects\n     */\n    reviveDates?: boolean;\n}\n\n/**\n * Describes options for the [Utils.throttle]{@link Utils#throttle} method\n */\nexport interface ThrottleSettings {\n    /**\n     * Set to `false` to disable the initial call to the callback function\n     */\n    leading?: boolean;\n    /**\n     * Set to `false` to disable the final call to the callback function\n     */\n    trailing?: boolean;\n}\n\nclass FrameTask {\n    constructor(\n        public callback: (...params) => any,\n        public params: any[]) {\n    }\n\n    call(): any {\n        return this.callback(...this.params);\n    }\n}\n\n/**\n * A utility class to log execution durations\n */\nexport class Timer {\n    /**\n     * Contains the timestamp of when the `Timer` object was instantiated\n     */\n    readonly start = performance.now();\n    /**\n     * Contains the current durartion in milliseconds of the `Timer` object\n     */\n    duration = 0;\n\n    constructor(private readonly name: string) {\n    }\n\n    /**\n     * Updates the `duration` of the `Timer` object\n     */\n    stop() {\n        this.duration = performance.now() - this.start;\n        console.log(`Timer: ${this.name} finished in ${Math.round(this.duration)} ms`);\n    }\n}\n\n/**\n * A generic interface for tree nodes\n */\nexport interface TreeNode {\n    /**\n     * Children elements of this tree node\n     */\n    items?: TreeNode[];\n}\n\n/**\n * A utility class containing a variety of static methods and properties\n */\n// @dynamic\nexport class Utils {\n    /**\n     * The number of milliseconds in one day\n     */\n    static readonly oneDay = 86400000;\n    /**\n     * The number of milliseconds in one hour\n     */\n    static readonly oneHour = 3600000;\n    /**\n     * The number of milliseconds in one minute\n     */\n    static readonly oneMinute = 60000;\n    /**\n     * The number of milliseconds in one second\n     */\n    static readonly oneSecond = 1000;\n\n    private static baseExtend(dst, objs, deep?: boolean, sort?: boolean | ((a: string, b: string) => number)) {\n        for (let i = 0, ii = objs.length; i < ii; ++i) {\n            const obj = objs[i];\n            if (!Utils.isObject(obj) && !Utils.isFunction(obj)) {\n                continue;\n            }\n            let keys = Object.keys(obj);\n            if (sort) {\n                if (Utils.isFunction(sort)) {\n                    keys = keys.sort(sort);\n                }\n                else {\n                    keys = keys.sort();\n                }\n            }\n            for (let j = 0, jj = keys.length; j < jj; j++) {\n                const key = keys[j];\n                const src = obj[key];\n                if (deep && Utils.isObject(src)) {\n                    if (Utils.isDate(src)) {\n                        dst[key] = new Date(src.valueOf());\n                    }\n                    else if (Utils.isRegExp(src)) {\n                        dst[key] = new RegExp(src);\n                    }\n                    else if (src.nodeName) {\n                        dst[key] = src.cloneNode(true);\n                    }\n                    else {\n                        if (!Utils.isObject(dst[key])) {\n                            dst[key] = Utils.isArray(src) ? [] : {};\n                        }\n                        Utils.baseExtend(dst[key], [src], true);\n                    }\n                }\n                else {\n                    dst[key] = src;\n                }\n            }\n        }\n        return dst;\n    }\n\n    /**\n     * Shallowly copy the properties in the source objects to the destination object.\n     * Any nested objects or arrays will be copied by reference, not duplicated.\n     * The source objects are treated in order so properties in later\n     * objects will override properties in earlier ones.\n     *\n     * @param destination The object to which properties are copied\n     * @param sources Objects from which properties are copied\n     * @return the destination object\n     */\n    static extend(destination: any, ...sources: any[]): any {\n        return Utils.baseExtend(destination, sources, false);\n    }\n\n    /**\n     * Deeply copy the properties in the source objects to the destination object.\n     * Any nested objects or arrays will be duplicated.\n     * The source objects are treated in order so properties in later\n     * objects will override properties in earlier ones.\n     *\n     * @param destination The object to which properties are copied\n     * @param sources Objects from which properties are copied\n     * @return the destination object\n     */\n    static merge(destination: any, ...sources: any[]): any {\n        return Utils.baseExtend(destination, sources, true);\n    }\n\n    /**\n     * Deeply copy the properties in the source objects to the destination object.\n     * Any nested objects or arrays will be duplicated.\n     * The source objects are treated in order so properties in later\n     * objects will override properties in earlier ones.\n     * The properties of the source objects are sorted in ascending, ASCII character order\n     * before they are copied to ensure a consistent insertion order in the destination\n     * object.\n     *\n     * @param destination The object to which properties are copied\n     * @param sources Objects from which properties are copied\n     * @return the destination object\n     */\n    static mergeAndSort(destination: any, ...sources: any[]): any {\n        return Utils.baseExtend(destination, sources, true, true);\n    }\n\n    private static forEach(obj, iterator, context?) {\n        let key, length;\n        if (obj) {\n            if (Utils.isFunction(obj)) {\n                for (key in obj) {\n                    // Need to check if hasOwnProperty exists,\n                    // as on IE8 the result of querySelectorAll is an object without a hasOwnProperty function\n                    if (key !== 'prototype' && key !== 'length' && key !== 'name' && (!obj.hasOwnProperty || obj.hasOwnProperty(key))) {\n                    iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            } else if (Utils.isArray(obj) || Utils.isArrayLike(obj)) {\n                const isPrimitive = typeof obj !== 'object';\n                for (key = 0, length = obj.length; key < length; key++) {\n                    if (isPrimitive || key in obj) {\n                        iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            } else if (obj.forEach && obj.forEach !== Utils.forEach) {\n                obj.forEach(iterator, context, obj);\n            } else if (Utils.isBlankObject(obj)) {\n                // createMap() fast path --- Safe to avoid hasOwnProperty check because prototype chain is empty\n                for (key in obj) {\n                    iterator.call(context, obj[key], key, obj);\n                }\n            } else if (typeof obj.hasOwnProperty === 'function') {\n                // Slow path for objects inheriting Object.prototype, hasOwnProperty check needed\n                for (key in obj) {\n                    if (obj.hasOwnProperty(key)) {\n                    iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            } else {\n            // Slow path for objects which do not have a method `hasOwnProperty`\n            for (key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    iterator.call(context, obj[key], key, obj);\n                }\n            }\n            }\n        }\n        return obj;\n    }\n\n    /**\n     * Makes a deep copy of the passed object or array and returns it.\n     * Copies of source objects of the following types: `TypedArray`, `Date`, `RegExp` `Node` are\n     * made using the appropriate constructor. Arrays are created using `[]`. Other objects are created\n     * using `Object.create` passing the source object's protptype, if any.\n     *\n     * @param source The source item to copy (`Object`, `Array`, `TypedArray`, `Date`, `RegExp`, `Node`)\n     * @param destination An optional item to use as the destination. If passed, the item is cleared\n     * before the source is copied to it. The destination cannot be a `TypedArray` and cannot be the same\n     * as the source\n     * @return The copied item\n     */\n    static copy<T extends object>(source: T, destination?: T): T {\n        const stackSource: object[] = [];\n        const stackDest: object[] = [];\n\n        if (destination) {\n            if (Utils.isTypedArray(destination)) {\n                throw new Error(\"Can't copy! TypedArray destination cannot be mutated.\");\n            }\n            if (source === destination) {\n                throw new Error(\"Can't copy! Source and destination are identical.\");\n            }\n\n            // Empty the destination object\n            if (Utils.isArray(destination)) {\n                (destination as Array<any>).length = 0;\n            }\n            else {\n                Utils.forEach(destination, (value, key) => {\n                    if (!source.hasOwnProperty(key)) {\n                        delete destination[key];\n                    }\n                });\n            }\n\n            stackSource.push(source);\n            stackDest.push(destination);\n            return copyRecurse(source, destination);\n        }\n\n        return copyElement(source);\n\n        function copyRecurse(source, destination) {\n            let key;\n            if (Utils.isArray(source)) {\n                for (let i = 0, ii = source.length; i < ii; i++) {\n                    destination.push(copyElement(source[i]));\n                }\n            } else if (Utils.isBlankObject(source)) {\n                // createMap() fast path --- Safe to avoid hasOwnProperty check because prototype chain is empty\n                for (key in source) {\n                    destination[key] = copyElement(source[key]);\n                }\n            } else if (source && typeof source.hasOwnProperty === 'function') {\n                // Slow path, which must rely on hasOwnProperty\n                for (key in source) {\n                    if (source.hasOwnProperty(key)) {\n                        destination[key] = copyElement(source[key]);\n                    }\n                }\n            } else {\n                // Slowest path --- hasOwnProperty can't be called as a method\n                for (key in source) {\n                    if (Object.prototype.hasOwnProperty.call(source, key)) {\n                        destination[key] = copyElement(source[key]);\n                    }\n                }\n            }\n            return destination;\n        }\n\n        function copyElement(source) {\n            // Simple values\n            if (!Utils.isObject(source)) {\n                return source;\n            }\n\n            // Already copied values\n            const index = stackSource.indexOf(source);\n            if (index !== -1) {\n                return stackDest[index];\n            }\n\n            if (Utils.isWindow(source)) {\n                throw new Error(\"Can't copy! Making copies of Window instances is not supported.\");\n            }\n\n            let needsRecurse = false;\n            let destination;\n\n            if (Utils.isArray(source)) {\n                destination = [];\n                needsRecurse = true;\n            } else if (Utils.isTypedArray(source)) {\n                destination = new source.constructor(source);\n            } else if (Utils.isDate(source)) {\n                destination = new Date(source.getTime());\n            } else if (Utils.isRegExp(source)) {\n                const matches = source.toString().match(/[^\\/]*$/);\n                destination = new RegExp(source.source, matches ? matches[0] : \"\");\n                destination.lastIndex = source.lastIndex;\n            } else if (Utils.isFunction(source.cloneNode)) {\n                destination = source.cloneNode(true);\n            } else {\n                destination = Object.create(Object.getPrototypeOf(source));\n                needsRecurse = true;\n            }\n\n            stackSource.push(source);\n            stackDest.push(destination);\n\n            return needsRecurse ? copyRecurse(source, destination) : destination;\n        }\n    }\n\n    // Not currently used\n    private static copyWithoutNullOrEmpty(dst: MapOf<any>, src: MapOf<any>): MapOf<any> {\n        const keys = Object.keys(src);\n        for (let j = 0, jj = keys.length; j < jj; j++) {\n            const key = keys[j];\n            const value = src[key];\n            if (value === null || Utils.isEmpty(null)) {\n                continue;\n            }\n            else if (Utils.isObject(value)) {\n                if (Utils.isDate(value)) {\n                    dst[key] = new Date(value.valueOf());\n                }\n                else if (Utils.isRegExp(value)) {\n                    dst[key] = new RegExp(value);\n                }\n                else {\n                    if (!Utils.isObject(dst[key])) {\n                        dst[key] = Utils.isArray(value) ? [] : {};\n                    }\n                    dst[key] = Utils.copyWithoutNullOrEmpty(dst[key], value);\n                }\n            }\n            else {\n                dst[key] = value;\n            }\n        }\n        return dst;\n    }\n\n    /**\n     * Makes a shallow copy of the passed object. Empty string values are removed from the copied object.\n     * A string value containing `\"\"` is copied as an empty string.\n     *\n     * @param defaults The object to copy\n     * @return The copied object\n     */\n    static copyDefaults(defaults: {}): {} {\n        const _defaults = Utils.copy(defaults);\n        if (_defaults) {\n            Object.keys(_defaults).forEach(key => {\n                // Unset parameters will come through as empty strings (regardless of type)\n                // Filter these out (to not hide defaults on the server) and accept \"\" as a way of explicitly\n                // setting a parameter to be an empty string\n                const value = _defaults[key];\n                if (value === \"\") {\n                    delete _defaults[key];\n                }\n                if (value === \"\\\"\\\"\") {\n                    _defaults[key] = \"\";\n                }\n            });\n        }\n        return _defaults;\n    }\n\n    /**\n     * Performs an optimized deep comparison between two objects to determine if they should be considered equal\n     * @param o1 The first object to be compared\n     * @param o2 The second object to be compared\n     */\n    static equals(o1: any, o2:any): boolean {\n        return isEqual(o1, o2);\n    }\n\n    /**\n     * Converts a string to an integer value using `parseInt` with radix = 10.\n     * If the string cannot be converted or contains additional characters then the\n     * passed default value is returned\n     * @param str The string to convert\n     * @param _default The default value to use if the string cannot be converted\n     */\n    static toInt(str: string, _default: number = 0): number {\n        let value = parseInt(str, 10);\n        if (isNaN(value) || (value + \"\" !== str)) {\n            value = _default;\n        }\n        return value;\n    }\n\n    /**\n     * Converts a string to a floating point value using `parseFloat`.\n     * If the string cannot be converted then the passed default value is returned\n     * @param str The string to convert\n     * @param _default The default value to use if the string cannot be converted\n     */\n    static toNumber(str: string, _default: number = 0): number {\n        let value = parseFloat(str);\n        if (isNaN(value)) {\n            value = _default;\n        }\n        return value;\n    }\n\n    /**\n     * Converts a string to a `Date` using `Date.parse`.\n     * The date is returned in UTC. If the string cannot be converted then `undefined` is returned\n     * @param str The string to convert\n     * @return The converted `Date` in UTC or `undefined`\n     */\n    static toDate(str: string): Date | undefined {\n        const ms = Date.parse(str);\n        if (!ms && ms !== 0) {\n            return undefined;\n        }\n        return new Date(ms + new Date(ms).getTimezoneOffset() * 60000); // get date in UTC\n    }\n\n    /**\n     * Get the time component of a `Date` in milliseconds\n     *\n     * @param date The date\n     * @return The time in milliseconds\n     */\n    static getTime(date: Date): number {\n        if (!date) {\n            return 0;\n        }\n        return (date.getHours() * 60 * 60 + date.getMinutes() * 60 + date.getSeconds()) * 1000 + date.getMilliseconds();\n    }\n\n    /**\n     * Return the current date and time\n     */\n    static get now(): Date {\n        return new Date();\n    }\n\n    /**\n     * Converts a `Date` to a Sinequa system date string (`dd-mm-yyyy[ hh:mm:ss]`)\n     * If the time component of the date is 0 then only the date portion of the string is included\n     *\n     * @param date The `Date` to convert\n     */\n    static toSysDateStr(date: Date): string {\n        if (!date)  {\n            return \"\";\n        }\n        const m = moment(date);\n        if (Utils.getTime(date) === 0) {\n            return m.format(\"YYYY-MM-DD\");\n        }\n        else {\n            return m.format(\"YYYY-MM-DD HH:mm:ss\");\n        }\n    }\n\n    /**\n     * Converts a Sinequa system date string (`dd-mm-yyyy[ hh:mm:ss]`) to a `Date`\n     * If the string cannot be converted then `undefined` is returned\n     *\n     * @param date The Sinequa system date string to convert\n     */\n    static fromSysDateStr(value: string): Date | undefined {\n        const m = moment(value, \"YYYY-MM-DD HH:mm:ss\");\n        if (m.isValid()) {\n            return m.toDate();\n        }\n        return undefined;\n    }\n\n    private static rxSysDateTime = /^\\d{4}-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])(?: (?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d)?$/;\n    // private static rxISO8601 = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n    // ISO8601 combined date and time\n    private static rxISO8601DateTime = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*))(?:Z|(\\+|-)([\\d|:]*))?$/;\n\n    private static isSysDateTime(str: string): boolean {\n        return Utils.rxSysDateTime.test(str);\n    }\n\n    private static isISO8601DateTime(str: string): boolean {\n        return Utils.rxISO8601DateTime.test(str);\n    }\n\n    /**\n     * Converts a Javascript value to a JSON string using `JSON.stringify`.\n     * Date objects are converted to Sinequa system strings\n     *\n     * @param value The value to convert\n     * @param options Options for the conversion. The default is `{pretty: false}`\n     */\n    static toJson(value: any, options: ToJsonOptions = {pretty: false}): string {\n        return JSON.stringify(value,\n            function(key: string, value: any): any  {\n                if (key && Utils.isDate(this[key])) {\n                    const str = Utils.toSysDateStr(this[key]);\n                    return str;\n                }\n                return value;\n            }, options.pretty ? 2 : 0);\n    }\n\n    /**\n     * Converts a string to an object using `JSON.parse`.\n     * Strings that are either in Sinequa system date or ISO8601 format are converted to\n     * `Date` objects if the `reviveDates` option is specified.\n     *\n     * @param str The string to convert\n     * @param options Options for the conversion. The default is `{reviveDates: false}`\n     */\n    static fromJson(str: string, options: FromJsonOptions = {reviveDates: false}): any {\n        if (!str || typeof str !== \"string\") {\n            return {};\n        }\n        try {\n            return JSON.parse(str, options.reviveDates ?\n                (key, value) => {\n                    if (options.reviveDates && typeof value === \"string\") {\n                        if (Utils.isSysDateTime(value)) {\n                            const m = moment(value, \"YYYY-MM-DD HH:mm:ss\");\n                            if (m.isValid()) {\n                                return m.toDate();\n                            }\n                        }\n                        else if (Utils.isISO8601DateTime(value)) {\n                            const m = moment(value, moment.ISO_8601);\n                            if (m.isValid()) {\n                                return m.toDate();\n                            }\n                        }\n                    }\n                    return value;\n                } : undefined);\n        }\n        catch (exception) {\n            console.log(\"Utils.fromJson exception:\", exception);\n            return null;\n        }\n    }\n\n    /**\n     * Converts a `FieldValue` value to a string compatible with Sinequa's SQL syntax.\n     * String and `Date` values are enclosed in single quotes if the quote parameter is `true`\n     *\n     * @param value The value to convert\n     * @param quote If set, the returned string will be enclosed in single quotes for string and `Date` values\n     */\n    static toSqlValue(value: FieldValue, quote?: boolean): string {\n        if (Utils.isNumber(value)) {\n            return value + \"\";\n        }\n        if (Utils.isDate(value)) {\n            if (quote) {\n                return \"'\" + Utils.toSysDateStr(value) + \"'\";\n            }\n            else {\n                return Utils.toSysDateStr(value);\n            }\n        }\n        if (Utils.isBoolean(value)) {\n            return value ? \"true\" : \"false\";\n        }\n        if (Utils.isArray(value)) {\n            const ret: string[] = [];\n            value.forEach(v => {\n                if (ret.length > 0) {\n                    ret.push(\",\");\n                }\n                if (!v) {\n                    ret.push(\"null\");\n                }\n                else if (Utils.isString(v)) {\n                    ret.push(v);\n                }\n                else {\n                    ret.push(v.display || v.value || \"\");\n                }\n            });\n            ret.splice(0, 0, \"[\");\n            ret.push(\"]\");\n            return ret.join(\"\");\n        }\n        if (quote) {\n            return \"'\" + value + \"'\";\n        }\n        else {\n            return value;\n        }\n    }\n\n    /**\n     * Clean a string so it is compatible with values stored in a Sinequa tree type-column.\n     * The following operations are performed:\n     * * ensure that the string starts and ends with forward slashes\n     * * replace tab characters with spaces\n     * * replace semi-colons with commas\n     * * replace back slashes with forward slashes\n     *\n     * @param s The string to clean\n     */\n    static treeClean(s: string): string {\n        if (Utils.isEmpty(s)) {\n            return s;\n        }\n        return Utils.addUrl(\"/\", Utils.replace(Utils.replace(Utils.replace(s, \"\\t\", \" \"), \";\", \",\"), \"\\\\\", \"/\"), \"/\");\n    }\n\n    /**\n     * Return the first node of a Sinequa tree value enclosed in forward slashes\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeFirst(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts.length === 0 ? \"\" : `/${parts[0]}/`;\n    }\n\n    /**\n     * Return the first node of a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeFirstNode(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts[0];\n    }\n\n    /**\n     * Return the last node of a Sinequa tree value enclosed in forward slashes\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeLast(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts.length === 0 ? \"\" : `/${parts[parts.length - 1]}/`;\n    }\n\n    /**\n     * Return the last node of a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeLastNode(s: string): string {\n        const parts = Utils.split(s, \"/\");\n        return parts[parts.length - 1];\n    }\n\n    /**\n     * Return the nodes making up a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeNodes(s: string): string[] {\n        return Utils.split(s, \"/\");\n    }\n\n    /**\n     * Return a Sinequa tree value, removing enclosing forward slash characters\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeDisplay(s: string): string {\n        if (!!s) {\n            if (s[0] === \"/\") {\n                s = s.substr(1);\n            }\n            if (s[s.length - 1] === \"/\") {\n                s = s.substr(0, s.length - 1);\n            }\n        }\n        return s;\n    }\n\n    /**\n     * Return the node count of a Sinequa tree value\n     *\n     * @param s A Sinequa tree value\n     */\n    static treeCount(s: string): number {\n        const count = Utils.count(s, \"/\");\n        return count > 0 ? count - 1 : 0;\n    }\n\n    /**\n     * Traverses a tree structure, executing a callback function at every node\n     * @param nodes the nodes to traverse\n     * @param callback the callback function\n     */\n    public static traverse<T extends TreeNode>(nodes: T[], callback: (lineage: T[] | undefined) => boolean): boolean {\n        if (!nodes || nodes.length === 0) {\n            return false;\n        }\n        if (!callback) {\n            return false;\n        }\n        const lineage: T[] = [];\n        const stack: (T | undefined)[] = [];\n        let _i = nodes.length;\n        while (_i--) {\n            stack.push(nodes[_i]);\n        }\n        while (stack.length) {\n            const node = stack.pop();\n            if (!node) {\n                lineage.pop();\n                callback(undefined);\n            }\n            else {\n                lineage.push(node);\n                if (callback(lineage)) {\n                    return true;\n                }\n                stack.push(undefined);\n                if (node.items && node.items.length > 0) {\n                    _i = node.items.length;\n                    while (_i--) {\n                        stack.push(node.items[_i] as T);\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Return a pseudo-GUID value using `Math.random`\n     *\n     * @param withHyphens If set, the returned GUID includes hyphen separators\n     */\n    static guid(withHyphens = true): string {\n        let d = Date.now();\n        const guid = (withHyphens ?\n            'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx' : 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx').replace(/[xy]/g, (c) => {\n                const r = (d + Math.random() * 16) % 16 | 0;\n                d = Math.floor(d / 16);\n                return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n            });\n        return guid;\n    }\n\n    /**\n     * Return `true` if the passed value is `undefined`\n     */\n    static isUndefined(value): value is undefined {\n        return typeof value === 'undefined';\n    }\n\n    /**\n     * Return `true` if the passed value is an `object`\n     */\n    static isObject(value): value is any {\n        return value !== null && typeof value === 'object';\n    }\n\n    /**\n     * Return `true` if the passed value is a `string`\n     */\n    static isString(value): value is string {\n        return typeof value === 'string';\n    }\n\n    /**\n     * Return `true` if the passed value is a `number`\n     */\n    static isNumber(value): value is number {\n        return typeof value === 'number';\n    }\n\n    /**\n     * Return `true` if the passed value is a `boolean`\n     */\n    static isBoolean(value): value is boolean {\n        return typeof value === 'boolean';\n    }\n\n    /**\n     * Return `true` if the passed value is a `Date`\n     */\n    static isDate(value): value is Date {\n        return Object.prototype.toString.call(value) === '[object Date]';\n    }\n\n    /**\n     * Return `true` if the passed value is a scalar (`number`, `boolean` or `Date`)\n     */\n    static isScalar(value): value is number | boolean | Date {\n        return Utils.isNumber(value) || Utils.isBoolean(value) || Utils.isDate(value);\n    }\n\n    /**\n     * Return `true` if the passed value is an `Array`\n     */\n    static isArray(value): value is Array<any> {\n        return Array.isArray(value);\n    }\n\n    /**\n     * Return `true` if the passed value is iterable\n     */\n    static isIterable(value): value is Array<any> {\n        if (value === null || value === undefined) {\n            return false;\n        }\n        return typeof value[Symbol.iterator] === \"function\";\n    }\n\n    /**\n     * Return `true` if the passed value is a `Map`\n     */\n    static isMap(value): value is Map<any, any> {\n        return Object.prototype.toString.call(value) === '[object Map]';\n    }\n\n    /**\n     * Return `true` if the passed value is a `Function`\n     */\n    static isFunction(value): value is Function {\n        return typeof value === 'function';\n    }\n\n    /**\n     * Return `true` if the passed value is a `RegExp`\n     */\n    static isRegExp(value): value is RegExp {\n        return Object.prototype.toString.call(value) === '[object RegExp]';\n    }\n\n    /**\n     * Return `true` if the passed value is a `Window`\n     */\n    static isWindow(value): value is Window {\n        return value && value.window === value;\n    }\n\n    /**\n     * Return `true` if the passed value is a `File`\n     */\n    static isFile(value: any): value is File {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object File]\";\n    }\n\n    /**\n     * Return `true` if the passed value is a `FormData`\n     */\n    static isFormData(value: any): value is FormData {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object FormData]\";\n    }\n\n    /**\n     * Return `true` if the passed value is a `Blob`\n     */\n    static isBlob(value: any): value is Blob {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object Blob]\";\n    }\n\n    /**\n     * Return `true` if the passed value is an `ArrayBuffer`\n     */\n    static isArrayBuffer(value: any): value is ArrayBuffer {\n        return Utils.isObject(value) && Object.prototype.toString.call(value) === \"[object ArrayBuffer]\";\n    }\n\n    private static isArrayLike(obj): boolean {\n        // `null`, `undefined` and `window` are not array-like\n        if (obj == null || Utils.isWindow(obj)) return false;\n\n        // arrays, strings and jQuery/jqLite objects are array like\n        // * jqLite is either the jQuery or jqLite constructor function\n        // * we have to check the existance of jqLite first as this method is called\n        //   via the forEach method when constructing the jqLite object in the first place\n        if (Utils.isArray(obj) || Utils.isString(obj) /*|| (jqLite && obj instanceof jqLite)*/) return true;\n\n        // Support: iOS 8.2 (not reproducible in simulator)\n        // \"length\" in obj used to prevent JIT error (gh-11508)\n        const length = \"length\" in Object(obj) && obj.length;\n\n        // NodeList objects (with `item` method) and\n        // other objects with suitable length characteristics are array-like\n        return Utils.isNumber(length) &&\n            (length >= 0 && (length - 1) in obj || typeof obj.item === 'function');\n    }\n\n    /**\n     * Return `true` if the passed value is an `object` without a prototype\n     */\n    static isBlankObject(value): value is object {\n        return value !== null && typeof value === 'object' && !Object.getPrototypeOf(value);\n    }\n\n    private static TYPED_ARRAY_REGEXP = /^\\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\\]$/;\n    /**\n     * Return true if the passed value is a `TypedArray`\n     */\n    static isTypedArray(value) {\n        return value && Utils.isNumber(value.length) && Utils.TYPED_ARRAY_REGEXP.test(Object.prototype.toString.call(value));\n    }\n\n    /**\n     * Return a promise that is a resolved after a specified amount of time\n     *\n     * @param ms The time to delay in milliseconds\n     */\n    static delay(ms: number = 0): Promise<void> {\n        return new Promise<void>((resolve, reject) => {\n            window.setTimeout(() => {\n                resolve();\n            }, ms);\n        });\n    }\n\n    /**\n     *\n     * @param value\n     * @param _default\n     */\n    static isTrue(\n        value,\n        _default?: boolean): boolean {\n        if (typeof (value) === 'string') {\n            value = value.toLowerCase();\n        }\n        switch (value) {\n            case true:\n            case \"true\":\n            case 1:\n            case \"1\":\n            case \"on\":\n            case \"yes\":\n                return true;\n            case \"\":\n            case undefined:\n                return !!_default;\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * Compares two strings using the current locale. The return value is negative\n     * if `a` comes before `b` and positive if `a` comes after `b`. If the values\n     * are equal then `0` is returned\n     *\n     * @param a The first string\n     * @param b The second string\n     * @param ignoreCase If set, do a case-insensitive comparison\n     */\n    static compare(a: string, b: string, ignoreCase: boolean = true): number {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.localeCompare(b);\n    }\n\n    /**\n     * Return `true` if two strings are equal, respecting case\n     *\n     * @param a The first string\n     * @param b The second string\n     */\n    static eq(a: string, b: string): boolean {\n        return Utils.compare(a, b, false) === 0;\n    }\n\n    /**\n     * Return `true` if two strings are equal, ignoring case\n     *\n     * @param a The first string\n     * @param b The second string\n     */\n    static eqNC(a: string, b: string): boolean {\n        return Utils.compare(a, b, true) === 0;\n    }\n\n    /**\n     * Return `true` if a number of strings are equal, ignoring case\n     *\n     * @param a The first string\n     * @param b Remaining strings\n     */\n    static eqNCN(a: string, ...b: string[]) {\n        if (!b) {\n            return false;\n        }\n        for (const s of b) {\n            if (Utils.eqNC(a, s)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Return the length of a string. If the string is empty (`null` or `undefined`)\n     * @param s A string\n     */\n    static len(s: string) {\n        return (s || '').length;\n    }\n\n    /**\n     * Return `true` if a string starts with another\n     *\n     * @param a The string to test\n     * @param b The prefix\n     * @param ignoreCase If `true` then ignore case\n     */\n    static startsWith(a: string, b: string, ignoreCase: boolean = true): boolean {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.startsWith(b);\n    }\n\n    /**\n     * Return `true` if a string ends with another\n     *\n     * @param a The string to test\n     * @param b The postfix\n     * @param ignoreCase If `true` then ignore case\n     */\n    static endsWith(a: string, b: string, ignoreCase: boolean = true): boolean {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.endsWith(b);\n    }\n\n    /**\n     * Return `true` if a string is a substring of another\n     * @param a The string to test\n     * @param b The substring\n     * @param ignoreCase If `true` then ignore case\n     */\n    static includes(a: string, b: string, ignoreCase: boolean = true): boolean {\n        a = a || '';\n        b = b || '';\n        if (ignoreCase) {\n            a = a.toLocaleUpperCase();\n            b = b.toLocaleUpperCase();\n        }\n        return a.includes(b);\n    }\n\n    /**\n     * Return the upper case value of a string using the current locale\n     */\n    static toUpperCase(s: string): string {\n        if (s) {\n            return s.toLocaleUpperCase();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string with the first character converted to upper case using the current locale\n     */\n    static toUpperFirst(s: string): string {\n        if (s) {\n            return s[0].toLocaleUpperCase() + s.substr(1);\n        }\n        return \"\";\n    }\n\n    /**\n     * Return the lower case value of a string using the current locale\n     */\n    static toLowerCase(s: string): string {\n        if (s) {\n            return s.toLocaleLowerCase();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string with the first character converted to lower case using the current locale\n     */\n    static toLowerFirst(s: string): string {\n        if (s) {\n            return s[0].toLocaleLowerCase() + s.substr(1);\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where the first character of each space separated word is converted to upper case.\n     * However, if a word contains a full stop character the first character is left unchanged\n     */\n    static toStartCase(text: string): string {\n        if (text) {\n            const words = text.split(/[\\s]+/);\n            return words.map(value => !value.includes(\".\") ? Utils.toUpperFirst(value) : value).join(\" \");\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where any leading and trailing whitespace characters are removed\n     */\n    static trim(s: string): string {\n        if (s) {\n            return s.trim();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where any leading whitespace characters are removed\n     */\n    static trimStart(s: string): string {\n        if (s) {\n            return s.trimStart();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string where any trailing whitespace characters are removed\n     */\n    static trimEnd(s: string): string {\n        if (s) {\n            return s.trimEnd();\n        }\n        return \"\";\n    }\n\n    /**\n     * Return a string truncated to a maximum length. If the length of the string is greater than `maxLength`\n     * then it is truncated to `maxLength and a `suffix` appended. Otherwise the string is returned unchanged\n     *\n     * @param s The string to truncate\n     * @param maxLength The maximum length\n     * @param suffix The value to append if the string is truncated. The default is `...`\n     */\n    static truncate(s: string, maxLength: number, suffix?: string): string {\n        if (!s) {\n            return \"\";\n        }\n        suffix = suffix || \"...\";\n        if (s.length <= maxLength) {\n            return s;\n        }\n        return s.substring(0, maxLength - suffix.length) + suffix;\n    }\n\n    private static regExEscapeRegEx = /[-\\/\\\\^$*+?.()|[\\]{}]/g;\n\n    /**\n     * Return a string where any regular expresion operators are escaped\n     */\n    static regExEscape(s: string): string {\n        if (!s) {\n            return \"\";\n        }\n        return s.replace(Utils.regExEscapeRegEx, \"\\\\$&\");\n    }\n\n    /**\n     * Replaces patterns in a string with a replacement string. The pattern can either a string\n     * or a `RegExp`.\n     *\n     * @param s The string in which to search for a pattern\n     * @param pattern The pattern\n     * @param replacement The replacement string to replace any occurrences of the pattern in the string\n     */\n    static replace(s: string, pattern: string | RegExp, replacement: string): string {\n        if (!s || !pattern) {\n            return \"\";\n        }\n        if (Utils.isRegExp(pattern)) {\n            return s.replace(pattern, replacement);\n        }\n        else {\n            return s.replace(new RegExp(Utils.regExEscape(pattern), \"g\"), replacement);\n        }\n    }\n\n    /**\n     * Split a string into an array of substrings using the passed separators\n     *\n     * @param s The string to split\n     * @param separators One or more separators\n     * @param trim If `true` trim any leading and trailing spaces from the substrings\n     * @param removeEmpty If `true` exclude any empty strings from the array of substrings\n     */\n    static split(s: string, separators: string | string[], trim = true, removeEmpty = true): string[] {\n        if (!s) {\n            return [];\n        }\n        if (!separators) {\n            return [s];\n        }\n        let split: string[];\n        if (typeof separators === \"string\") {\n            split = s.split(separators);\n            if (trim) {\n                split = split.map(value => value.trim());\n            }\n        }\n        else {\n            let rxs = separators.map((value) => Utils.regExEscape(value)).join(\"|\");\n            if (trim) {\n                rxs = \"(?:^\\\\s*)|(?:\\\\s*(?:\" + rxs + \")\\\\s*)|(?:\\\\s*$)\";\n            }\n            split = s.split(new RegExp(rxs));\n        }\n        if (removeEmpty) {\n            split = split.filter((value) => {\n                return !Utils.isEmpty(value);\n            });\n        }\n        return split;\n    }\n\n    /**\n     * Return a string in kebab case (`CatDog => cat-dog`)\n     */\n    static toKebabCase(text: string): string {\n        return kebabCase(text);\n    }\n\n    /**\n     * Return a string in snake case (`CatDog => cat_dog`)\n     */\n    static toSnakeCase(text: string): string {\n        return snakeCase(text);\n    }\n\n    /**\n     * Return a string in camel case (`CatDog => catDog`)\n     */\n    static toCamelCase(text: string): string {\n        return camelCase(text);\n    }\n\n    /**\n     * Return a string with any diacritics removed\n     */\n    static removeAccents(text: string): string {\n        if (!text) {\n            return \"\";\n        }\n        return removeDiacritics(text);\n    }\n\n    /**\n     * Return a string in normalized form which can be used to match entity values. A normalized value\n     * has any diacritics removed and is converted to upper case\n     */\n    static normalize(text: string | null | undefined): string {\n        if (!text) {\n            return \"\";\n        }\n        return Utils.removeAccents(text).toUpperCase();\n    }\n\n    /**\n     * Return `true` if a string is valid as a simple value for the Sinequa admininistration\n     */\n    static isValidSimpleName(name: string): boolean {\n        return /^[a-zA-Z_][a-zA-Z0-9_]*$/.test(name);\n    }\n\n    /**\n     * Return `true` if a string is valid as a scoped (`.` separated) simple value for the Sinequa admininistration\n     */\n    static isValidScopedSimpleName(name: string): boolean {\n        return /^[a-zA-Z_]([\\.]?[a-zA-Z0-9_]+)*$/.test(name);\n    }\n\n    /**\n     * Return `true` if a value is `null`, `undefined` or `\"\"`\n     */\n    static isEmpty(value: any): boolean {\n        if (value === \"\") {\n            return true;\n        }\n        if (value === null) {\n            return true;\n        }\n        if (Utils.isUndefined(value)) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Return the number of occurrences of a substring in a string\n     *\n     * @param text The text to test\n     * @param sub The substring\n     * @param ignoreCase If `true` don't respect case when matching the substring\n     */\n    static count(text: string, sub: string, ignoreCase = true): number {\n        if (!text || !sub) {\n            return 0;\n        }\n        if (ignoreCase) {\n            text = text.toLocaleUpperCase();\n            sub = sub.toLocaleUpperCase();\n        }\n        let pos = -1;\n        let count = 0;\n        while (true) {\n            pos = text.indexOf(sub, pos + 1);\n            if (pos === -1) {\n                break;\n            }\n            count++;\n        }\n        return count;\n    }\n\n    /**\n     * Return a string converted to base64\n     */\n    static toBase64(value: string): string {\n        return btoa(encodeURIComponent(value).replace(/%([0-9A-F]{2})/g, (match, hex) => String.fromCharCode(parseInt(hex, 16))));\n    }\n\n    /**\n     * Return a string converted from base64\n     */\n    static fromBase64(value: string): string {\n        return decodeURIComponent(atob(value).split('').map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));\n    }\n\n    /**\n     * Return the SHA256 hash value of string\n     */\n    static sha256(value: string): string {\n        const sha = new jsSHA(\"SHA-256\", \"TEXT\");\n        sha.update(value);\n        return sha.getHash(\"B64\");\n    }\n\n    /**\n     * Return the SHA512 hash value of string\n     */\n    static sha512(value: string): string {\n        const sha = new jsSHA(\"SHA-512\", \"TEXT\");\n        sha.update(value);\n        return sha.getHash(\"B64\");\n    }\n\n    /**\n     * Return a string where any HTML special characters are percent encoded\n     */\n    static encodeHTML(value: string): string {\n        return escape(value);\n    }\n\n    /**\n     * Return a string where any percent encoded characters are replaced by their corresponding unencoded characters\n     */\n    static decodeHTML(value: string): string {\n        return unescape(value);\n    }\n\n    /**\n     * Get a field with passed name from an object. The field name is matched insensitive of case\n     */\n    static getField<T>(obj: MapOf<T>, name: string): T | undefined {\n        if (!Utils.isObject(obj) || Utils.isEmpty(name)) {\n            return undefined;\n        }\n        const keys = Object.keys(obj).filter(key => Utils.eqNC(key, name));\n        if (keys.length === 0) {\n            return undefined;\n        }\n        return obj[keys[0]];\n    }\n\n    /**\n     * Clear fields from an object. If the `_delete` parameter is `false` then\n     * array or map fields are emptied and other fields are set to `undefined`.\n     * If the `_delete` parameter is `true` then fields are deleted\n     */\n    static clearObject(obj: {}, _delete: boolean = false): {} {\n        for (const prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (_delete) {\n                    delete obj[prop];\n                }\n                else {\n                    if (Utils.isArray(obj[prop])) {\n                        obj[prop].length = 0;\n                    }\n                    else if (Utils.isMap(obj[prop])) {\n                        obj[prop].clear();\n                    }\n                    else {\n                        obj[prop] = undefined;\n                    }\n                }\n            }\n        }\n        return obj;\n    }\n\n    /**\n     * Return the non-empty fields in the `override` object that that are different to fields of the same name\n     * in the `template` object\n     * @param template The object to compare against\n     * @param override The object defining the fields and values to be compared\n     * @param ret An optional return object. If not set a new object is created\n     */\n    static deltas(template: {}, override: {}, ret?: {}): {} {\n        if (!ret) {\n            ret = {};\n        }\n        for (const name of Object.keys(override)) {\n            if (name in template) {\n                if (Utils.isObject(override[name]) && !Utils.isArray(override[name])) {\n                    const diff = Utils.deltas(template[name], override[name]);\n                    if (!Utils.equals(diff, {})) {\n                        ret[name] = diff;\n                    }\n                }\n                else if (!Utils.equals(template[name], override[name])) {\n                    if (!Utils.isEmpty(override[name])) {\n                        ret[name] = override[name];\n                    }\n                }\n            }\n            else {\n                if (!Utils.isEmpty(override[name])) {\n                    ret[name] = override[name];\n                }\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * Returns an object containing the fields in a source object whose names match one of the passed keys. The keys can either be\n     * an array of strings or a callback function that is called for each field in the source object and returns `true` if a field\n     * should be \"picked\".\n     *\n     * @param obj The source object\n     * @param keys An array of keys or a callback function\n     */\n    static pick(obj: {}, keys: string[] | ((value: any, key: string, obj: object) => boolean)): {} {\n        const ret = {};\n        if (!!obj) {\n            if (Utils.isFunction(keys)) {\n                Object.keys(obj).forEach(key => {\n                    if (keys(obj[key], key, obj)) {\n                        ret[key] = obj[key];\n                    }\n                });\n            }\n            else {\n                for (const key of keys) {\n                    if (obj.hasOwnProperty(key)) {\n                        ret[key] = obj[key];\n                    }\n                }\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * Create a debounce function that delays invoking `func` until after `wait` millseconds have elapsed since the previous invocation.\n     *\n     * @param func The function to debounce\n     * @param wait The delay in milliseconds to wait before calling `func`\n     * @param immediate If `true` then make an initial call to `func`\n     * @param every An optional callback to call without debouncing\n     */\n    static debounce(func: (...params) => any, wait = 0, immediate = false, every?: (...params) => any): (...params) => any {\n        let timeout, args, context, timestamp, result;\n\n        const later = function() {\n            const last = Date.now() - timestamp;\n\n            if (last < wait && last >= 0) {\n                timeout = setTimeout(later, wait - last);\n            }\n            else {\n                timeout = null;\n                if (!immediate) {\n                    result = func.apply(context, args);\n                    if (!timeout) {\n                        context = args = null;\n                    }\n                }\n            }\n        };\n\n        return function(this: any) {\n            context = this;\n            args = arguments;\n            if (every) {\n                every.apply(context, args);\n            }\n            timestamp = Date.now();\n            const callNow = immediate && !timeout;\n            if (!timeout) {\n                timeout = setTimeout(later, wait);\n            }\n            if (callNow) {\n                result = func.apply(context, args);\n                context = args = null;\n            }\n\n            return result;\n        };\n    }\n\n    /**\n     * Create a throttled function that only invokes func at most once per every `wait` milliseconds.\n     *\n     * @param func The function to throttle\n     * @param wait The number of milliseconds to throttle invocations to\n     * @param options Options to control the throttling behaviour\n     */\n    static throttle(func: (...params) => any, wait: number, options: ThrottleSettings = {}): (...pararms) => any {\n        let timeout, context, args, result;\n        let previous = 0;\n\n        const later = function() {\n            previous = options.leading === false ? 0 : Date.now();\n            timeout = null;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        };\n\n        const throttled = function(this: any) {\n            const now = Date.now();\n            if (!previous && options.leading === false) previous = now;\n            const remaining = wait - (now - previous);\n            context = this;\n            args = arguments;\n            if (remaining <= 0 || remaining > wait) {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                }\n                previous = now;\n                result = func.apply(context, args);\n                if (!timeout) context = args = null;\n            }\n            else if (!timeout && options.trailing !== false) {\n                timeout = setTimeout(later, remaining);\n            }\n            return result;\n        };\n\n        throttled[\"cancel\"] = function() {\n            clearTimeout(timeout);\n            previous = 0;\n            timeout = context = args = null;\n        };\n\n        return throttled;\n    }\n\n    private static frameTasks: Map<(...params) => any, FrameTask> = new Map<(...params) => any, FrameTask>();\n\n    /**\n     * Create a function that calls `callback` the next time the browser next repaints\n     */\n    static frame(callback: (...params) => any): (...params) => any {\n        return (...params) => {\n            if (Utils.frameTasks.size === 0) {\n                requestAnimationFrame((timestamp) => {\n                    Utils.frameTasks.forEach((task, key, map) => {\n                        task.call();\n                    });\n                    Utils.frameTasks.clear();\n                });\n            }\n            const task = Utils.frameTasks.get(callback);\n            if (task) {\n                // Update params\n                task.params = params;\n            }\n            else {\n                // Add new task\n                Utils.frameTasks.set(callback, new FrameTask(callback, params));\n            }\n        };\n    }\n\n    /**\n     * Create a URL object from a `url` string. If the string is a relative url then\n     * `base` specifies the base to use\n     */\n    static makeURL(url: string, base?: string): URL {\n        if (!base) {\n            base = \"http://x.y.z\"; // Firefox and IOS need this\n        }\n        return new URL(url, base);\n    }\n\n    /**\n     * Add query string parameters to a url\n     *\n     * @param url The url to which to add the parameters\n     * @param params An object whose fields should be added as parameters\n     */\n    static addSearchParams(url: string, params: MapOf<any>): string {\n        if (!url || !params) {\n            return url;\n        }\n        const urlObj = Utils.makeURL(url);\n        for (const param in params) {\n            if (params.hasOwnProperty(param)) {\n                urlObj.searchParams.set(param, params[param]);\n            }\n        }\n        const index = url.indexOf(\"?\");\n        if (index !== -1) {\n            url = url.substr(0, index);\n        }\n        url += \"?\" + urlObj.searchParams.toString();\n        return url;\n    }\n\n    private static _addUrl(url: string, path: string): string {\n        if (!path) {\n            return url;\n        }\n        if (!url) {\n            return path;\n        }\n        if (url[url.length - 1] === \"/\") {\n            if (path[0] === \"/\") {\n                return url + path.substr(1);\n            }\n            else {\n                return url + path;\n            }\n        }\n        else {\n            if (path[0] === \"/\") {\n                return url + path;\n            }\n            else {\n                return url + \"/\" + path;\n            }\n        }\n    }\n\n    /**\n     * Add paths to a url adding path separators as necessary\n     *\n     * @param url The url\n     * @param paths One or more paths to add to the url\n     */\n    static addUrl(url: string, ...paths: string[]): string {\n        let _url = url;\n        for (const path of paths) {\n            _url = Utils._addUrl(_url, path);\n        }\n        return _url;\n    }\n\n    /**\n     * Return `true` if a url is absolute\n     */\n    static isUrlAbsolute(url: string): boolean {\n        return /^(?:[a-zA-Z][a-zA-Z\\d+.-]*:|\\/\\/)/.test(url);\n    }\n\n    /**\n     * Return an `HttpParams` object containing the fields in the passed object\n     */\n    static makeHttpParams(params: MapOf<string | boolean | number | Date | object | undefined>): HttpParams {\n        let httpParams = new HttpParams({encoder: new SqHttpParameterCodec()});\n        if (params) {\n            for (const param in params) {\n                if (params.hasOwnProperty(param)) {\n                    const _value = params[param];\n                    let value = \"\";\n                    if (Utils.isString(_value)) {\n                        value = _value;\n                    }\n                    else if (Utils.isBoolean(_value) || Utils.isNumber(_value)) {\n                        value = _value.toString();\n                    }\n                    else if (Utils.isDate(_value)) {\n                        value = Utils.toSysDateStr(_value);\n                    }\n                    else {\n                        value = Utils.toJson(_value);\n                    }\n                    httpParams = httpParams.set(param, value);\n                }\n            }\n        }\n        return httpParams;\n    }\n\n    private static escapeDiv: HTMLElement;\n\n    /**\n     * Return a string with HTML special characters escaped\n     *\n     * @param html The string to escape\n     */\n    static escapeHtml(html: string): string {\n        if (!html) {\n            return html;\n        }\n        if (!Utils.escapeDiv) {\n            Utils.escapeDiv = document.createElement(\"div\");\n        }\n        const textNode = Utils.escapeDiv.appendChild(document.createTextNode(html));\n        const escapedHtml = Utils.escapeDiv.innerHTML;\n        Utils.escapeDiv.removeChild(textNode);\n        return escapedHtml;\n    }\n\n    /**\n     * Move an element in an array\n     *\n     * @param array The array containing the element to move\n     * @param from The index of the element to move\n     * @param to The index that the element should be moved to\n     */\n    static arrayMove(array: any[], from: number, to: number): void {\n        if (to === from ) {\n            return;\n        }\n        array.splice(to, 0, array.splice(from, 1)[0]);\n    }\n\n    /**\n     * Set the contents of a target array to the contents of a source array\n     *\n     * @param target The target array\n     * @param source The source array\n     */\n    static arraySet(target: any[], source: any[]): any[] {\n        return target.splice.apply(target, [0, target.length].concat(source));\n    }\n\n    private static genericNext(value) {\n    }\n\n    private static genericError(error: any) {\n    }\n\n    private static genericComplete() {\n    }\n\n    /**\n     * A simple wrapped around `Observable.subscribe`\n     */\n    static subscribe<T>(\n        observable: Observable<T>,\n        next: (value: T) => void, error?: (err: any) => void, complete?: () => void): Subscription {\n        if (!next) {\n            next = Utils.genericNext;\n        }\n        if (!error) {\n            error = Utils.genericError;\n        }\n        if (!complete) {\n            complete = Utils.genericComplete;\n        }\n        return observable.subscribe(next, error, complete);\n    }\n\n    /**\n     * Return a value as a `Date` converting as necessary. If the value\n     * cannot be converted then `undefined` is returned\n     */\n    static asDate(value: any): Date | undefined {\n        if (!value) {\n            return undefined;\n        }\n\n        if (Utils.isDate(value)) {\n            return value as Date;\n        }\n\n        if (Utils.isString(value)) {\n            return Utils.toDate(value as string);\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Return a value as a `number` converting as necessary. If the value\n     * cannot be converted then `undefined` is returned.\n     */\n    static asNumber(value: any): number | undefined {\n        if (!value && value !== 0) {\n            return undefined;\n        }\n        if (Utils.isNumber(value)) {\n            return value;\n        }\n        if (Utils.isString(value)) {\n            if (Utils.testInteger(value)) {\n                return Utils.toInt(value);\n            }\n            if (Utils.testFloat(value)) {\n                return Utils.toNumber(value);\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Return a value as a `string` converting as necessary\n     */\n    static asString(value: any): string | undefined {\n        if (!value && value !== \"\") {\n            return undefined;\n        }\n\n        if (Utils.isString(value)) {\n            return value as string;\n        }\n\n        return value.toString();\n    }\n\n    /**\n     * Return `true` if a string represents an integer\n     */\n    static testInteger(str: string): boolean {\n        return /^(\\-|\\+)?([0-9]+)$/.test(str);\n    }\n\n    /**\n     * Return `true` if a string represents a floating point number\n     */\n    static testFloat(str: string): boolean {\n        return /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$/.test(str);\n    }\n\n    /**\n     * Round the passed number away from zero: 4.5 => 5, -4.5 => -5\n     */\n    static roundAway(num: number): number {\n        return num >= 0 ? Math.round(num) : Math.sign(num) * Math.round(Math.abs(num));\n    }\n\n    private static matchSuffix(str: string, factor: number, ...suffixes: string[]): {str: string, factor: number} | undefined {\n        for (const suffix of suffixes) {\n            if (Utils.endsWith(str, suffix)) {\n                return {\n                    str: Utils.trimEnd(str.substr(0, str.length - suffix.length)),\n                    factor\n                };\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Convert a size in string form to a number in bytes.\n     *\n     * The following units are supported: `b`, `kb`, `mb`, `gb`, `tb`, `pb`\n     *\n     * For example `2.5 gb` will return `2621440`.\n     */\n    static toSize(str: string, _default = 0): number {\n        str = Utils.trim(str);\n        if (!str) {\n            return _default;\n        }\n        let factor = 1;\n        let ret = Utils.matchSuffix(str, 1024 * 1024 * 1024 * 1024 * 1024, \"PB\", \"PO\");\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024 * 1024 * 1024 * 1024, \"TB\", \"TO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024 * 1024 * 1024, \"GB\", \"GO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024 * 1024, \"MB\", \"MO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1024, \"KB\", \"KO\");\n        }\n        if (ret === undefined) {\n            ret = Utils.matchSuffix(str, 1, \"B\", \"O\");\n        }\n        if (ret !== undefined) {\n            str = ret.str;\n            factor = ret.factor;\n        }\n        if (!Utils.testFloat(str)) {\n            return _default;\n        }\n        const value = Utils.toNumber(str, _default) * factor;\n        return Math.round(value);\n    }\n\n    private static calculateDuration(current: number, unit: string): number {\n        switch (Utils.toLowerCase(unit)) {\n            case \"d\":    case \"j\":\n            case \"days\": case \"jours\":\n            case \"day\":  case \"jour\":\n                return current * Utils.oneDay;\n            case \"h\":\n            case \"hours\": case \"heures\":\n            case \"hour\":  case \"heure\":\n                return current * Utils.oneHour;\n            case \"m\":\n            case \"minutes\": case \"minute\":\n            case \"mins\":    case \"min\":\n                return current * Utils.oneMinute;\n            case \"s\":\n            case \"seconds\":  case \"secondes\":\n            case \"second\":   case \"seconde\":\n            case \"secs\": case \"sec\":\n                return current * Utils.oneSecond;\n                break;\n            case \"ms\":\n            case \"milliseconds\": case \"miliseconds\":  case \"millisecondes\": case \"milisecondes\":\n            case \"millisecond\":  case \"milliseconde\": case \"milisecond\":    case \"miliseconde\":\n                return current;\n            default:\n                return 0;\n        }\n    }\n\n    /**\n     * Convert a duration in string form to a number in milliseconds.\n     *\n     * These units are supported: `days`, `hours`, `minutes`, `seconds`, `milliseconds` (abbreviations are also supported)\n     *\n     * For example `3 h 2mins 4s => 10924000`\n     *\n     * @param defaultUnit The unit to use if no units are in the string. The default value is `ms`\n     */\n    static toDuration(str: string, defaultUnit = \"ms\"): number {\n        let total = 0;\n        if (str) {\n            let current = 0;\n            const tokens = str.match(/[0-9\\.,]+|[a-zA-Z]+/g) || [];\n            for (const token of tokens) {\n                if (/[a-zA-Z]/.test(token)) {\n                    total += Utils.calculateDuration(current, token);\n                    current = 0;\n                }\n                else {\n                    if (current) {\n                        total += Utils.calculateDuration(current, defaultUnit);\n                    }\n                    current = Utils.toNumber(token);\n                }\n            }\n            if (current) {\n                total += Utils.calculateDuration(current, defaultUnit);\n            }\n        }\n        return total;\n    }\n}\n","import {Component, Input, OnChanges} from \"@angular/core\";\nimport {Record} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"@sinequa/components/search\";\n\n@Component({\n    selector: \"sq-preview-links\",\n    // For highlight buttons...\n    // http://stackoverflow.com/questions/21245541/min-and-max-width-mess-up-text-align-center\n    templateUrl: \"./preview-links.html\",\n    styleUrls: [\"./preview-links.css\"]\n})\nexport class BsPreviewLinks implements OnChanges {\n    @Input() record: Record;\n    @Input() resultId: string;\n    originalDocumentUrl: string;\n\n    constructor(\n        private searchService: SearchService) {\n    }\n\n    public ngOnChanges() {\n        this.originalDocumentUrl = this.record.url1;\n    }\n\n    click() {\n        this.searchService.notifyOpenOriginalDocument(this.record, this.resultId);\n    }\n}","<div *ngIf=\"!!originalDocumentUrl\" class=\"card sq-facet\">\n    <div class=\"card-body\">\n        <nav>\n            <ul class=\"nav nav-pills nav-stacked\">\n                <li class=\"nav-item\">\n                    <a href=\"{{originalDocumentUrl}}\" (click)=\"click()\" class=\"nav-link originalDocumentLink\" target=\"_blank\">\n                        <span class=\"far fa-file sq-icon-file-{{record.fileext}}\"></span> {{'msg#preview.originalDocument' | sqMessage}}\n                    </a>\n                </li>\n            </ul>\n        </nav>\n    </div>\n</div>","export default {\n    \"heatmap\": {\n        \"name\": \"Carte de chaleur\",\n        \"nodata\": \"Pas de données à afficher\",\n        \"maxX\": \"Nombre maximum d'éléments sur l'axe X\",\n        \"maxY\": \"Nombre maximum d'éléments sur l'axe Y\",\n        \"rescale\": \"Redimensionner les axes\",\n        \"colors\": \"Jeu de couleurs\",\n        \"blue\": \"Bleu\",\n        \"red\": \"Rouge\",\n        \"green\": \"Vert\",\n        \"diverging\": \"Divergent\",\n        \"spectral\": \"Spectre\",\n        \"cool\": \"Froid\",\n        \"defaults\": \"Valeurs par défaut\",\n        \"showing\": \"{shown, number} sur {total, number} éléments affichés\",\n        \"tooltip\": \"{count, plural, one {# élément} other {# éléments}}\"\n    }\n};\n","export * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export * from \"./chart/chart\";\nexport * from \"./fusioncharts.module\";","import {Component, Inject, OnInit} from \"@angular/core\";\nimport {ValidatorFn} from \"@angular/forms\";\nimport {CdkDragDrop} from \"@angular/cdk/drag-drop\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AuditEvent, AuditEventType} from \"@sinequa/core/web-services\";\nimport {AlertsService, Alert, AlertEventType, ManageAlertsModel} from \"../../alerts.service\";\n\n@Component({\n    selector: \"sq-manage-alerts\",\n    templateUrl: \"./manage-alerts.html\",\n    styleUrls: [\"./manage-alerts.scss\"]\n})\nexport class BsManageAlerts implements OnInit {\n    reordering: boolean;\n    buttons: ModalButton[];\n    removeAllButton: ModalButton;\n    nameValidators: ValidatorFn[];\n    showDirtyMessage = false;\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: ManageAlertsModel,\n        public alertsService: AlertsService) {\n        this.reordering = false;\n    }\n\n    ngOnInit() {\n        this.createButtons();\n    }\n\n    addAuditEvent(auditEvent: AuditEvent) {\n        if (!this.model.auditEvents) {\n            this.model.auditEvents = [];\n        }\n        this.model.auditEvents.push(auditEvent);\n    }\n\n    reorder() {\n        this.reordering = !this.reordering;\n    }\n\n    remove(alert: Alert, index: number) {\n        this.model.alerts.splice(index, 1);\n        this.removeAllButton.visible = this.model.alerts.length > 0;\n        this.addAuditEvent({\n            type: AuditEventType.Alert_Delete,\n            detail: {\n                alert: alert.name\n            }\n        });\n        return false;\n    }\n\n    editAlert(alert: Alert) {\n        if (!this.reordering) {\n            const alert1 = Utils.copy(alert);\n            this.alertsService.editAlertModal(alert1, true, this.model.searchRoute)\n                .then(result => {\n                    if (result) {\n                        Utils.copy(alert1, alert);\n                        this.addAuditEvent({\n                            type: AuditEventType.Alert_Edit,\n                            detail: {\n                                alert: alert.name\n                            }\n                        });\n                    }\n                });\n        }\n        return false;\n    }\n\n    dropped(drop: CdkDragDrop<Alert[]>) {\n        Utils.arrayMove(this.model.alerts, drop.previousIndex, drop.currentIndex);\n    }\n    \n    private createButtons() {\n        this.buttons = [\n            this.removeAllButton = new ModalButton({\n                text: \"msg#manageAlerts.removeAll\",\n                result: ModalResult.Custom,\n                action: (button) => {\n                    this.model.alerts.splice(0);\n                    button.visible = false;\n                    this.addAuditEvent({\n                        type: AlertEventType.DeleteAll\n                    });\n                },\n                visible: this.model.alerts.length > 0\n            }),\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel,\n                action: (button) => {\n                    if (this.model.auditEvents && this.model.auditEvents?.length > 0) {\n                        button.result = ModalResult.Custom;\n                        this.showDirtyMessage = true;\n                        this.createYesNoButtons();\n                    }\n                }\n            })\n        ];\n    }\n    \n    private createYesNoButtons() {\n        this.buttons = [\n            new ModalButton({\n                result: ModalResult.Yes,\n                primary: true,\n            }),\n            new ModalButton({\n                result: ModalResult.No,\n                action: (button) => {\n                    button.result = ModalResult.Custom;\n                    this.showDirtyMessage = false;\n                    this.createButtons();\n                }\n            })\n        ];\n    }\n}\n","<form name=\"manageAlerts\" novalidate>\n    <sq-modal [title]=\"'msg#manageAlerts.title'\" [buttons]=\"buttons\">\n        <div *ngIf=\"model.alerts.length\" class=\"form-group clearfix\">\n            <button type=\"button\" class=\"btn btn-secondary float-right\" (click)=\"reorder()\">{{(reordering ? \"msg#manageAlerts.edit\" : \"msg#manageAlerts.reorder\") | sqMessage}}</button>\n        </div>\n        <div class=\"form-group\">\n            <div class=\"list-group\" cdkDropList [cdkDropListData]=\"model.alerts\" [cdkDropListDisabled]=\"!reordering\" (cdkDropListDropped)=\"dropped($event)\">\n                <a *ngFor=\"let alert of model.alerts; let $index = index\" href=\"#\" (click)=\"editAlert(alert)\" cdkDrag \n                    [ngClass]=\"['list-group-item list-group-item-action d-flex w-auto-unimportant', reordering ? 'cursor-move': '']\">\n                    <div [ngClass]=\"{'sq-active': !reordering, 'sq-alert-text': true}\">{{alert.name}}</div>\n                    <div class=\"ml-auto\">\n                        <a *ngIf=\"!reordering\" class=\"ml-2\" href=\"#\" (click)=\"remove(alert, $index)\" title=\"{{'msg#manageAlerts.remove' | sqMessage}}\">\n                            <span class=\"fas fa-times sq-remove\"></span>\n                        </a>\n                        <span *ngIf=\"reordering\" class=\"ml-2 fas fa-bars sq-move\"></span>\n                    </div>\n                </a>\n            </div>\n        </div>\n        <sq-alert-message footer [message]=\"'msg#editAlert.lossDataMessage' | sqMessage\" *ngIf=\"showDirtyMessage\"></sq-alert-message>\n    </sq-modal>\n</form>\n","import { Component, OnInit, Input, OnDestroy } from '@angular/core';\nimport { Action } from '@sinequa/components/action';\nimport { LoginService } from '@sinequa/core/login';\nimport { SearchService } from '@sinequa/components/search';\nimport { SavedQueriesService } from '../../saved-queries.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'sq-saved-queries-menu',\n  templateUrl: './saved-queries-menu.component.html'\n})\nexport class BsSavedQueriesMenuComponent implements OnInit, OnDestroy {\n  @Input() searchRoute: string = \"/search\";\n  @Input() icon: string = \"far fa-save\";\n  @Input() autoAdjust: boolean = true;\n  @Input() autoAdjustBreakpoint: string = 'xl';\n  @Input() collapseBreakpoint: string = 'sm';\n  @Input() size: string;\n\n  menu: Action | undefined;\n\n  // Saved queries actions\n  manageAction: Action;\n  saveAction: Action;\n\n  constructor(\n    public loginService: LoginService,\n    public savedQueriesService: SavedQueriesService,\n    public searchService: SearchService) {\n\n    this.saveAction = new Action({\n      text: \"msg#savedQueries.saveCurrentQuery\",\n      title: \"msg#savedQueries.saveCurrentQuery\",\n      action: () => { this.savedQueriesService.createSavedQueryModal(); }\n    });\n\n    this.manageAction = new Action({\n      text: \"msg#savedQueries.manageSavedQueries\",\n      title: \"msg#savedQueries.manageSavedQueries\",\n      action: () => { this.savedQueriesService.manageSavedQueriesModal(); }\n    });\n\n  }\n\n  ngOnInit() {\n    this.updateMenu();\n    this._savedQueriesSubscription = this.savedQueriesService.changes.subscribe({\n      next: () => { this.updateMenu(); }\n    });\n    this._loginSubscription = this.loginService.events.subscribe(event => {\n      if(event.type === \"session-changed\"){\n        this.updateMenu();\n      }\n    });\n    this._searchSubscription = this.searchService.resultsStream.subscribe(results => {\n      this.updateMenu();\n    });\n  }\n\n  private _savedQueriesSubscription: Subscription;\n  private _loginSubscription: Subscription;\n  private _searchSubscription: Subscription;\n  ngOnDestroy(){\n    if(this._savedQueriesSubscription){\n      this._savedQueriesSubscription.unsubscribe();\n    }\n    if(this._loginSubscription){\n      this._loginSubscription.unsubscribe();\n    }\n    if(this._searchSubscription){\n      this._searchSubscription.unsubscribe();\n    }\n  }\n\n  updateMenu() {\n\n    if (!this.loginService.complete) {\n      this.menu = undefined;\n      return;\n    }\n\n    const savedQueriesActions: Action[] = [];\n\n    if (this.savedQueriesService.hasSavedQuery) {\n        const scrollGroup = new Action({\n            scrollGroup: true,\n            children: this.savedQueriesService.savedqueries.map(savedQuery => new Action({\n              text: savedQuery.name,\n              title: savedQuery.name,\n              data: savedQuery,\n              action: item => this.savedQueriesService.searchSavedQuery(item.data, this.searchRoute)\n          }))\n        });\n        savedQueriesActions.push(scrollGroup);\n    }\n\n    if (!!this.searchService.results) {\n      savedQueriesActions.push(this.saveAction);\n    }\n\n    if (this.savedQueriesService.hasSavedQuery) {\n      savedQueriesActions.push(this.manageAction);\n    }\n\n    this.menu = new Action({\n        icon: this.icon,\n        text: \"msg#savedQueries.savedQueries\",\n        children: savedQueriesActions\n    });\n  }\n}\n","<li *ngIf=\"!!menu && !menu.hidden\" class=\"nav-item dropdown\" \n    [sq-action-item]=\"{item: menu, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n    [collapseBreakpoint]=\"collapseBreakpoint\"\n></li>","export * from \"./public-api\";","import {MapOf, JsonObject, PatternMatcher} from \"@sinequa/core/base\";\n\n/**\n * Describes the fields available in all configuration objects. By convention, configuration object\n * interfaces are prefixed by `CC`.\n */\nexport interface CCConfig {\n    /**\n     * The name of the configuration object\n     */\n    name: string;\n    /**\n     * An optional description of the configuration object\n     */\n    description?: string;\n}\n\n/**\n * Describes the fields available in all web service configuration objects\n */\nexport interface CCWebService extends CCConfig {\n    webServiceType: \"Query\" | \"sponsoredlinks\" | \"queryexport\" | \"Preview\" | \"Labels\" | \"Autocomplete\" | \"DataSet\";\n}\n\n/**\n * Describes the fields available in the index configuration object\n */\nexport interface CCIndex extends CCConfig {\n    /**\n     * The type of the index\n     */\n    indexType: string;\n    /**\n     * The columns in the index\n     */\n    columns?: MapOf<CCColumn>;\n}\n\n/**\n * Describes the fields available in a list item configuration object\n */\nexport interface CCListItem {\n    /**\n     * The name is used to display an item\n     */\n    name: string;\n    /**\n     * The value holds the underlying value of the item\n     */\n    value: string;\n}\n\n/**\n * Describes a list configuration object. Lists can be created in `App Dependencies/Lists` in the admin interface.\n */\nexport interface CCList extends CCConfig {\n    /**\n     * The name of the list\n     */\n    name: string;\n    /**\n     * The items in the list\n     */\n    items: CCListItem[];\n}\n\n/**\n * Describes an RFM action configuration object\n */\nexport interface CCRFMAction {\n    name: string;\n    enabled: boolean;\n    actionEnabled: boolean;\n    noMenu: boolean;\n    displayUnrated: boolean;\n    negAvailable: boolean;\n}\n\n/**\n * Describes an RFM configuration object\n */\nexport interface CCRFM {\n    name: string;\n    click: CCRFMAction;\n    like: CCRFMAction;\n    important: CCRFMAction;\n}\n\n/**\n * Describes an aggregation configuration object\n */\nexport interface CCAggregation {\n    /**\n     * The name of the aggregation\n     */\n    name: string;\n    /**\n     * The underlying column in the aggregation\n     */\n    column: string;\n    /**\n     * Determines whether this aggregation should be included in a regular search\n     */\n    includeInStandardSearch: boolean;\n    /**\n     * The maximum number of values to retrieve\n     */\n    count: number;\n    /**\n     * The value of the `order` clause\n     */\n    order: string;\n    /**\n     * The value of the `mask` clause\n     */\n    mask: string;\n    /**\n     * The name of an associated distribution configuration object\n     */\n    distribution: string;\n    /**\n     * Determines whether the aggregation is requested in the context of the currently selected tab or globally.\n     * The default is to respect the [CCTabSearch.loadAggregationsForSelectedTab]{@link CCTabSearch#loadAggregationsForSelectedTab} setting\n     */\n    tabBehavior: \"\" | \"Default\" | \"LoadForSelectedTab\" | \"LoadForAllTabs\";\n    /**\n     * The separator used for crossed aggregations\n     */\n    keySeparator: string;\n    /**\n     * The display separator used for crossed aggregations\n     */\n    displayKeySeparator: string;\n}\n\n/**\n * Describes the fields for a tab configuration object\n */\nexport interface CCTab {\n    /**\n     * The name of the tab\n     */\n    name: string;\n    /**\n     * The display value of the tab\n     */\n    display: string;\n    /**\n     * The values in the tab distribution that contribute to this tab\n     */\n    value: string;\n    /**\n     * Set if this tab is the default to be used when no tab is specified in a query\n     */\n    isDefault: boolean;\n    /**\n     * Indexes to exclude when executing a query with this tab selected\n     */\n    excludedIndices: string;\n    /**\n     * Aggregations to exclude when executing a query with this tab selected\n     */\n    excludedAggregations: string;\n    /**\n     * Results sorting options that should be available when executing a query with this tab selected\n     */\n    sortingChoices: CCSortingChoice[];\n}\n\n/**\n * Describes the fields for the tab search configuration in a query. A tab search defines a special distribution which is evaluated\n * as a part of query to group the results by a set of tab items. The distribution gives the count of documents\n * associated with each tab item. The values associated with a tab item are used to filter a query when a tab item is selected.\n */\nexport interface CCTabSearch {\n    /**\n     * Determines whether this tab search is used in a query\n     */\n    isActive: boolean;\n    /**\n     * Defines the column to be used in the tab distribution and for filtering results by a selected tab item\n     */\n    column: string;\n    /**\n     * `true` if the associated column is a tree\n     */\n    columnIsTree: boolean;\n    /**\n     * Determines whether the overall document total should be calculated from the per-tab item documents totals\n     */\n    totalIsSumOfTabTotals: boolean;\n    /**\n     * Determines whether configured aggregations should be evaluated in the context of the selected tab or not.\n     * This setting can be overridden at the tab item level using [CCTab.excludedAggregations]{@link CCTab#excludedAggregations}\n     */\n    loadAggregationsForSelectedTab: boolean;\n    /**\n     * Determines the `minlevel` value to use when evaluating the tab distribution for a tree column\n     */\n    valueLevels: number;\n    /**\n     * Determines whether `post-group-by=true` should be used in the tab distribution\n     */\n    postGroupBy: boolean;\n    /**\n     * Determines whether 'merge-groups=true` should be used in the tab distribution. This is only used if `postGroupBy` is set to `true`\n     */\n    mergeGroups: boolean;\n    /**\n     * The set of configured tab items\n     */\n    tabs: CCTab[];\n}\n\n/**\n * Describes a sorting choice which can be selected for a query\n */\nexport interface CCSortingChoice {\n    /**\n     * The name of this sorting choice\n     */\n    name: string;\n    /**\n     * The description of this sorting choice\n     */\n    description: string;\n    /**\n     * The display value to use when rendering this sorting choice\n     */\n    display: string;\n    /**\n     * The `ORDER BY` clause to use when this sorting choice is selected\n     */\n    orderByClause: string;\n    /**\n     * Determines whether this sorting choice should be used as the default when\n     * the query has no `text contains` clause\n     */\n    isDefaultNoRelevance: boolean;\n    /**\n     * Determines whether this sorting choice should be used as the default when\n     * the query has a `text contains` clause\n     */\n    isDefaultWithRelevance: boolean;\n}\n\n/**\n * Describes a scope configuration object. A scope defines a set of conditions which\n * will be added to the query `where clause` when the scope is selected\n */\nexport interface CCScope {\n    /**\n     * The name of the scope\n     */\n    name: string;\n    /**\n     * The description of the scope\n     */\n    description: string;\n    /**\n     * The display value to be used when rendering the scope\n     */\n    display: string;\n    /**\n     * Determines whether the scope is active or not\n     */\n    isActive: boolean;\n    /**\n     * Determines whether the scope should be considered the default scope\n     * when a scope is not specified in a query\n     */\n    isDefault: boolean;\n}\n\n/**\n * Defines different precision operators that can be automatically added to a `text contains` clause\n * when no precision operators are present.\n *\n * `Default` - no operators are added\n *\n * `ExactExpression` - text surrounded by `\"...\"`\n *\n * `InTheSamePhrase` - text surrounded by `[...]`\n *\n * `EveryWord` - text surrounded by `+(...)`\n */\nexport type QueryPrecision  = \"Default\" | \"ExactExpression\" | \"InTheSamePhrase\" | \"EveryWord\";\n\n/**\n * Defines strategies that can used in the query search parameters. Each strategy defines a pair of word weight (`ww`) and meaning\n * weight (`mw`) values to be used.\n *\n * `Default` - no `ww` and `mw` parameters used\n *\n * `WordsOnly` - `ww=1;mw=0`\n *\n * `WordsFirst` - `ww=0.8;mw=0.2`\n *\n * `WordsAndMeaning` - `ww=0.6;mw=0.4`\n *\n * `MeaningFirst` - `ww=0.3;mw=0.7`\n *\n * `MeaningOnly` - `ww=0;mw=1`\n */\nexport type QueryStrategy = \"Default\" | \"WordsOnly\" | \"WordsFirst\" | \"WordsAndMeaning\" | \"MeaningFirst\" | \"MeaningOnly\";\n\n/**\n * Defines modes for the spelling correction of search terms and did-you-mean functionality. Corrections\n * are based on edit and phonetic distance and exist among the searched documents\n *\n * `default | classic` - corrections are sought for terms that are not present in any documents. The original terms\n * and corrections are included in the query\n *\n * `smart` - corrections are sought for terms that are present in less than 10 documents and where the correction\n * is 20 times more frequent than the original term. Only the best corrections are kept. The original terms and corrections\n * are included in the query. The [Results.didYouMean]{@link Results#didYouMean] member is populated allowing for a \"We included\n * results for these terms...\" feedback to be displayed\n *\n * `correct` - corrections are sought for terms that are present in less than 10 documents and where the correction is\n * 20 times more frequent than the original term. Only the best corrections are kept. The original terms that have corrections\n * are not included in the query. The [Results.didYouMean]{@link Results#didYouMean] member is populated allowing for a \"Your query\n * has been corrected to...\" feedback to be displayed\n *\n * `dymonly` - corrections are sought for terms that are present in less than 10 documents and where the correction is\n * 20 times more frequent than the original term. The actual query is unaffected but the\n * [Results.didYouMean]{@link Results#didYouMean] member will be populated allowing for a \"Did you mean...\" feedback to be\n * displayed\n *\n * `force` - corrections are sought for all terms. All terms and corrections are included in the query\n *\n * `false` - no spelling correction processing occurs\n */\nexport type SpellingCorrectionMode = \"default\" | \"classic\" | \"smart\" | \"correct\" | \"dymonly\" | \"force\" | \"false\";\n\n/**\n * Describes the query web service configuration object\n */\nexport interface CCQuery extends CCWebService {\n    /**\n     * Defines the number of records or documents to request when executing the query\n     */\n    pageSize: number;\n    /**\n     * Defines the aggregations that should be included in the query\n     */\n    aggregations: CCAggregation[];\n    /**\n     * Defines configuration information for the columns in the indexes\n     */\n    columnsInfo: CCColumnsInfo;\n    /**\n     * Defines the sorting choices that can be used\n     */\n    sortingChoices: CCSortingChoice[];\n    /**\n     * Defines the scopes that can be used\n     */\n    scopes: CCScope[];\n    /**\n     * Defines whether scopes processing is activated for this query\n     */\n    scopesActive: boolean;\n    /**\n     * Defines the spelling correction mode for this query\n     */\n    sCMode: SpellingCorrectionMode;\n    /**\n     * Defines the distance to use for the `NEAR` operator when no value is specified\n     */\n    defaultNearValue: number;\n    /**\n     * Defines the tab search configuration for this query\n     */\n    tabSearch: CCTabSearch;\n    /**\n     * Defines the name of the [CCRFM]{@link CCRFM} configuration for this query\n     */\n    rFM: string;\n    /**\n     * Defines the default language to use when parsing the query text\n     */\n    questionLanguage: string;\n    /**\n     * Defines the default precision to use for this query\n     */\n    questionPrecision: QueryPrecision;\n    /**\n     * Defines the default strategy to use for this query\n     */\n    questionStrategy: QueryStrategy;\n    /**\n     * Defines the indexes that the query selects from\n     */\n    searchIndexes: string;\n    /**\n     * Determines whether filter-less queries are permitted\n     */\n    allowEmptySearch: boolean;\n    /**\n     * Defines the patterns to control which column fields are allowed\n     * in fielded search expressions.\n     */\n    columnFieldsIncluded: string[];\n    /**\n     * Defines the patterns to control which column fields are disallowed\n     * in fielded search expressions.\n     */\n    columnFieldsExcluded: string[];\n    /**\n     * The `PatternMatcher` instance created on the client using the `columnFieldsIncluded` and `columnFieldsExcluded` values.\n     */\n    $columnFieldsPattern: PatternMatcher;\n    /**\n     * Defines the patterns to control which part name fields are allowed\n     * in fielded search expressions.\n     */\n    partnameFieldsIncluded: string[];\n    /**\n     * Defines the patterns to control which part name fields are disallowed\n     * in fielded search expressions.\n     */\n    partnameFieldsExcluded: string[];\n    /**\n     * The `PatternMatcher` instance created on the client using the `partnameFieldsIncluded` and `partnameFieldsExcluded` values.\n     */\n    $partnameFieldsPattern: PatternMatcher;\n}\n\n/**\n * Defines configuration parameters for a column\n */\nexport interface CCColumnInfo {\n    /**\n     * The column name\n     */\n    name: string;\n    /**\n     * A description of the column\n     */\n    description: string;\n    /**\n     * A comma-separated list of aliases for the column\n     */\n    aliases: string;\n    /**\n     * A display label for the column\n     */\n    label: string;\n    /**\n     * A plural form display label for the column\n     */\n    labelPlural: string;\n    /**\n     * The name of a formatter function that produces a formatted string value from the column value. See {@link FormatService}\n     */\n    formatter: string;\n    /**\n     * A set of transform functions that are applied to the a formatted string value. See {@link FormatService}\n     */\n    transforms: string;\n    /**\n     * The name of a parser function that produces a column value from a formatted string value. See {@link FormatService}\n     */\n    parser: string;\n}\n\n/**\n * Describes a set of `CCColumnInfo` objects\n */\nexport interface CCColumnsInfo {\n    columns: CCColumnInfo[];\n}\n\n/**\n * Defines the range of column types for a column\n */\nexport const enum EngineType {\n    none = 0,\n    bool = 1,\n    date = 2,\n    dateTime = 3,\n    time = 4,\n    unsigned = 5,\n    integer = 6,\n    float = 7,\n    double = 8,\n    dates = 9,\n    dateTimes = 10,\n    times = 11,\n    varchar = 12,\n    binary = 13,\n    string = 14,\n    csv = 15\n}\n\n/**\n * Defines the type modifiers that can be used for a column\n */\nexport const enum EngineTypeModifier {\n    none  = 0x0000000,\n    a     = 0x0000805, // a -> lc\n    // b  = 0x0000002,\n    c     = 0x0000004,\n    d     = 0x0000008,\n    e     = 0x0000814, // e -> lc\n    // f  = 0x0000020,\n    // g  = 0x0000040,\n    // h  = 0x0000080,\n    i     = 0x0000100,\n    // j  = 0x0000200,\n    // k  = 0x0000400,\n    l     = 0x0000804, // l -> c\n    // m  = 0x0001000,\n    n     = 0x0002000,\n    // o  = 0x0004000,\n    // p  = 0x0008000,\n    // q  = 0x0010000,\n    // r  = 0x0020000,\n    // s  = 0x0040000,\n    t     = 0x0080004, // t -> c\n    // u  = 0x0100000,\n    // v  = 0x0200000,\n    // w  = 0x0400000,\n    x     = 0x0800000,\n    // y  = 0x1000000,\n    z     = 0x2000000,\n\n    f_ordinal    = 0x0002000, //             n\n    f_multidates = 0x0002000, //             n\n    f_varchar    = 0x2000000, //                   z\n    f_binary     = 0x2002000, //             n     z\n    f_string     = 0x2002108, //     d   i   n     z\n    f_csv        = 0x288291d, // a c d e i l n t x z\n\n    f_overridable= 0x2000108  //     d   i         z\n}\n\n/**\n * Defines the fields for a column configuration object defined in an index. See {@link CCIndex}\n */\nexport interface CCColumn {\n    name: string;\n    description?: string;\n    type: string;\n    typeModifier?: string;\n    eType: EngineType;\n    eTypeModifier: EngineTypeModifier;\n    aliases?: string[];\n    label?: string;\n    labelPlural?: string;\n    formatter?: string;\n    transforms?: string;\n    parser?: string;\n}\n\n/**\n * Enum representing supported export source.\n */\nexport enum ExportSourceType {\n    None = 0,\n    Result = 1,\n    Selection = 2,\n    SavedQuery = 4\n}\n\n/**\n * Enum representing supported export format.\n */\nexport enum ExportOutputFormat {\n    None = 0,\n    Csv = 1,\n    Xlsx = 2,\n    Json = 4\n}\n\n/**\n * Data model of the Export dialog.\n */\nexport interface ExportDialogModel {\n    format: ExportOutputFormat;\n    export: ExportSourceType;\n    webService: string;\n    maxCount?: number;\n    queryName?: string;\n}\n\n/**\n * Describes the fields in the labels web service configuration object\n */\nexport interface CCLabels extends CCWebService {\n    /**\n     * The the index column to use for public labels\n     */\n    publicLabelsField: string;\n    /**\n     * A semi-colon separated list of predefined public labels\n     */\n    defaultPublicLabels: string;\n    /**\n     * Determines whether new public labels can be created by users\n     */\n    allowPublicLabelsCreation: boolean;\n    /**\n     * A list of principal ids identifying users and groups that can create public labels\n     */\n    publicLabelsCreationPrincipalIds: string;\n    /**\n     * Determines whether existing public labels can be modified by users\n     */\n    allowPublicLabelsModification: boolean;\n    /**\n     * A list of principal ids identifying users and groups that can modify existing public labels\n     */\n    publicLabelsModificationPrincipalIds: string;\n\n    /**\n     * The the index column to use for private labels\n     */\n    privateLabelsField: string;\n\n    /**\n     * The maximum number of labels to return when listing labels using the [LabelsWebService.list]{@link LabelsWebService#list} api\n     */\n    labelsAutoSuggestMaxCount: number;\n\n    /**\n     * The wildcard character to recognise when listing labels using the [LabelsWebService.list]{@link LabelsWebService#list} api\n     */\n    labelsAutoSuggestWildcard: string;\n}\n\n/**\n * Describes the fields in the autocomplete web service configuration object\n */\nexport interface CCAutocomplete extends CCWebService {\n    /**\n     * Defines whether this autocomplete service is enabled\n     */\n    enabled: boolean;\n    /**\n     * Contains a comma-separated list of suggest queries for this service\n     */\n    suggestQueries: string;\n    /**\n     * Defines the minimum number of characters that must be entered before presenting\n     * suggestions\n     */\n    inputLengthTrigger: number;\n    /**\n     * Defines whether suggestions should be grouped into categories when they are displayed\n     */\n    groupSuggestionsByCategory: boolean;\n    /**\n     * Defines whether fielded search should be used when processing suggestions\n     */\n    useFieldedSearch: boolean;\n    /**\n     * Defines the number of items per category to display when a category is not collapsed\n     */\n    uncollapsedItemsPerCategory: number;\n}\n\n/**\n * Describes the fields in the application configuration object\n */\nexport interface CCApp extends CCConfig {\n    /**\n     * Identifies the version of the application configuration. This field can be passed\n     * to the [AppWebService.refresh]{@link AppWebService#refresh} api to update the application\n     * configuration if the version now available on the server is different.\n     */\n    versionId: string;\n    /**\n     * Defines the queries configured on the application\n     */\n    queries: MapOf<CCQuery>;\n    /**\n     * Defines the RFM objects configured on the application\n     */\n    rfms: MapOf<CCRFM>;\n    /**\n     * Defines the indexes configured on the application\n     */\n    indexes: MapOf<CCIndex>;\n    /**\n     * Defines the lists configured on the application\n     */\n    lists: MapOf<CCList>;\n    /**\n     * Defines the web services configured on the application\n     */\n    webServices: MapOf<CCWebService>;\n    /**\n     * A comma-separated list of the names of the queries configured on the application\n     */\n    queryNames: string;\n    /**\n     * The name of the labels web service configured on the application\n     */\n    labels: string;\n    /**\n     * The name of the preview web service configured on the application\n     */\n    preview: string;\n    /**\n     * The name of the autocomplete web service configured on the application\n     */\n    autocomplete: string;\n    /**\n     * The name of the sponsored links web service configured on the application\n     */\n    sponsoredLinks: string;\n    /**\n     * The name of the query export web service configured on the application\n     */\n    queryExport: string;\n    /**\n     * Determines whether RSS feeds are available on saved queries\n     */\n    queryRssEnabled: boolean;\n    /**\n     * Custom JSON configuration (see App Customization tab in Sinequa admin)\n     */\n    data: JsonObject;\n    /**\n     * The version of the server API.\n     * This field is used to compare with [MINIMUM_COMPATIBLE_SERVER_API_VERSION]{@link MINIMUM_COMPATIBLE_SERVER_API_VERSION}\n     */\n    apiVersion: string;\n    /**\n     * The workspace associated with this app\n     */\n    workspaceApp: string;\n    /**\n     * The name of the default query\n     */\n    defaultQueryName: string;\n}\n\n/**\n * The minimum server api version that compatible with this version of SBA.\n */\nexport const MINIMUM_COMPATIBLE_SERVER_API_VERSION = '1.0';\n","import { Component, OnDestroy, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Title } from '@angular/platform-browser';\nimport { AppService } from '@sinequa/core/app-utils';\nimport { IntlService } from '@sinequa/core/intl';\nimport { LoginService } from '@sinequa/core/login';\nimport { Record } from '@sinequa/core/web-services';\nimport { SelectionService } from '@sinequa/components/selection';\nimport { SearchService } from '@sinequa/components/search';\nimport { FacetConfig, FacetService } from '@sinequa/components/facet';\nimport { UIService } from '@sinequa/components/utils';\nimport { PreviewService } from '@sinequa/components/preview';\nimport { Action } from '@sinequa/components/action';\nimport { FACETS, METADATA, FEATURES } from '../../config';\nimport { DashboardService, MAP_WIDGET, TIMELINE_WIDGET, NETWORK_WIDGET, CHART_WIDGET, PREVIEW_WIDGET, HEATMAP_WIDGET, TAGCLOUD_WIDGET, MONEYTIMELINE_WIDGET, MONEYCLOUD_WIDGET } from '../dashboard/dashboard.service';\nimport { GridsterComponent } from 'angular-gridster2';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class SearchComponent implements OnInit, OnDestroy {\n\n  // Dynamic display of facets titles/icons in the multi-facet component\n  public multiFacetIcon? = \"fas fa-filter fa-fw\";\n  public multiFacetTitle = \"msg#facet.filters.title\";\n\n  private _searchServiceSubscription: Subscription;\n  private _loginSubscription: Subscription;\n\n  focusElementIndex:number;\n\n  darkAction: Action;\n  dashboardActions: Action[] = [];\n\n  // Used to scroll (on the results list side) to the latest document selected in a widget\n  lastSelectedId?: string;\n  // Used to scroll (on the dashboard side) to this document when clicked on in the results list\n  lastClickedId?: string;\n\n  showResults = true;\n  toggleResultsTitle = \"msg#search.hideResults\";\n  @ViewChild('gridster') gridster!: GridsterComponent;\n\n  constructor(\n    public searchService: SearchService,\n    public facetService: FacetService,\n    public selectionService: SelectionService,\n    private previewService: PreviewService,\n    private titleService: Title,\n    private intlService: IntlService,\n    private appService: AppService,\n    public loginService: LoginService,\n    public dashboardService: DashboardService,\n    public ui: UIService,\n    public cdRef: ChangeDetectorRef\n  ) {\n\n    // Subscribe to the search service to update the page title based on the searched text\n    this._searchServiceSubscription = this.searchService.resultsStream.subscribe(results => {\n      this.titleService.setTitle(this.intlService.formatMessage(\"msg#search.pageTitle\", {search: this.searchService.query.text || \"\"}));\n\n      // Hack to fix an issue with change detection...\n      setTimeout(() => {\n        this.cdRef.detectChanges();\n      }, 0);\n    });\n\n    // Upon login (ie access to user settings) initialize the dashboard widgets and actions\n    this._loginSubscription = this.loginService.events.subscribe(event => {\n      if (event.type === \"session-start\") {\n\n        // Create the dashboard displayed \"by default\", prior to any user interaction\n        // Note: the default dashboard must be set post-login so that it can be overriden by a default dashboard set by the user\n        this.dashboardService.setDefaultDashboard([\n          MAP_WIDGET,\n          TIMELINE_WIDGET,\n          NETWORK_WIDGET,\n          CHART_WIDGET\n        ]);\n\n        // Create the ashboard settings menu (the list of widgets below are the ones that can be added via the \"Add Widget\" modal)\n        this.dashboardActions = this.dashboardService.createDashboardActions([\n          MAP_WIDGET,\n          TIMELINE_WIDGET,\n          NETWORK_WIDGET,\n          CHART_WIDGET,\n          HEATMAP_WIDGET,\n          TAGCLOUD_WIDGET,\n          MONEYTIMELINE_WIDGET,\n          MONEYCLOUD_WIDGET\n        ]);\n      }\n    });\n\n    // When the screen is resized, we resize the dashboard row height, so that items keep fitting the screen height\n    this.ui.addResizeListener(event => {\n      this.dashboardService.options.fixedRowHeight = (window.innerHeight - 150) / 4;\n      this.dashboardService.updateOptions(this.dashboardService.options);\n    });\n\n  }\n\n\n  /**\n   * Initialize the page title\n   */\n  ngOnInit() {\n    this.titleService.setTitle(this.intlService.formatMessage(\"msg#search.pageTitle\", {search: \"\"}));\n  }\n\n  /**\n   * Unsubscribe from the search service\n   */\n  ngOnDestroy(){\n    this._searchServiceSubscription.unsubscribe();\n    this._loginSubscription.unsubscribe();\n  }\n\n  /**\n   * Returns the configuration of the facets displayed in the facet-multi component.\n   * The configuration from the config.ts file can be overriden by configuration from\n   * the app configuration on the server\n   */\n   public get facets(): FacetConfig[] {\n    return this.appService.app?.data?.facets as any as FacetConfig[] || FACETS;\n  }\n\n  /**\n   * Returns the list of features activated in the top right menus.\n   * The configuration from the config.ts file can be overriden by configuration from\n   * the app configuration on the server\n   */\n  public get features(): string[] {\n    return this.appService.app?.data?.features as string[] || FEATURES;\n  }\n\n  /**\n   * Returns the configuration of the metadata displayed in the facet-preview component.\n   * The configuration from the config.ts file can be overriden by configuration from\n   * the app configuration on the server\n   */\n  public get metadata(): string[] {\n    return this.appService.app?.data?.metadata as string[] || METADATA;\n  }\n\n  /**\n   * Responds to a change of facet in the multi facet\n   * @param facet\n   */\n  facetChanged(facet: FacetConfig){\n    if(!facet) {\n      this.multiFacetIcon = \"fas fa-filter fa-fw\";\n      this.multiFacetTitle = \"msg#facet.filters.title\";\n    }\n    else {\n      this.multiFacetIcon = facet.icon;\n      this.multiFacetTitle = facet.title;\n    }\n  }\n\n  /**\n   * Responds to a click on a document\n   * @param record\n   * @param event\n   */\n  onDocumentClicked(record: Record, event: Event) {\n    if(!this.isClickAction(event)){\n      if(!this.isOpened(record)) {\n        const item = this.dashboardService.addWidget(PREVIEW_WIDGET);\n        item.closable = false; // closable = false, as the underlying component already exposes a \"close\" action\n        item.rows = 3; // Increase default height from 2 rows to 3\n        item.recordId = record.id;\n        item.queryStr = this.searchService.query.toJsonForQueryString();\n      }\n      else {\n        this.lastClickedId = record.id;\n      }\n    }\n  }\n\n  /**\n   * Responds to a click on a document represented within a view (eg. on a map)\n   * @param record\n   */\n  onDocumentClickedFromView(record: Record) {\n    this.selectionService.toggleSelectedRecords(record);\n    if(record.$selected) {\n      this.lastSelectedId = record.id;\n    }\n  }\n\n  /**\n   * Open the preview when this record has no url1\n   * @param record\n   * @param isLink\n   */\n  openPreviewIfNoUrl(record: Record, isLink: boolean) {\n    if(!isLink){\n      this.previewService.openRoute(record, this.searchService.query);\n    }\n  }\n\n  // VERY SPECIFIC TO THIS APP:\n  // Make sure the click is not meant to trigger an action (from sq-result-source or sq-result-title)\n  private isClickAction(event: Event): boolean {\n    if (event.type !== 'click') {\n      return true;\n    }\n    const target = event.target as HTMLElement;\n    if (!target) {\n      return false;\n    }\n    return event.type !== 'click' ||\n        target.tagName === \"A\" ||\n        target.tagName === \"INPUT\" ||\n        target.matches(\"sq-result-selector *, .sq-result-title, sq-result-source *, sq-labels *\");\n  }\n\n  /**\n   * Whether the UI is in dark or light mode\n   */\n  isDark(): boolean {\n    return document.body.classList.contains(\"dark\");\n  }\n\n\n  /**\n   * Whether the record is opened or not in the dashboard\n   * @param record\n   */\n  isOpened(record: Record): boolean {\n    return !!this.dashboardService.dashboard.items.find(item => item.recordId === record.id);\n  }\n\n  /**\n   * Hide/show the result's sidebar\n   */\n  toggleResults(): void {\n    this.showResults = !this.showResults;\n    this.toggleResultsTitle = this.showResults ? \"msg#search.hideResults\" : \"msg#search.showResults\";\n    // wait for the transition to be finished before updating the gridster dimensions\n    setTimeout(() => {\n        this.gridster.resize();\n    }, 500);\n  }\n\n  setFocus(index: number, event: MouseEvent) {\n    this.focusElementIndex = index;\n  }\n\n}\n","<!-- Navbar with app icon, search form, and menus -->\n<nav class=\"navbar navbar-expand flex-column pb-0\" [ngClass]=\"{'navbar-light bg-light': !isDark(), 'navbar-dark bg-dark': isDark()}\">\n    <div class=\"container-fluid pb-2 px-0\">\n\n        <!-- Application logo -->\n        <a [routerLink]=\"['/search']\" title=\"Home\">\n            <img id=\"logo\" src=\"assets/sinequa-logo-light-lg.png\" alt=\"sinequa logo\" width=\"180px\" *ngIf=\"!isDark() && ui.screenSizeIsGreater('md')\">\n            <img id=\"logo\" src=\"assets/sinequa-logo-light-sm.png\" alt=\"sinequa logo\" width=\"30px\" *ngIf=\"!isDark() && ui.screenSizeIsLessOrEqual('md')\">\n            <img id=\"logo\" src=\"assets/sinequa-logo-dark-lg.png\" alt=\"sinequa logo\" width=\"150px\" *ngIf=\"isDark() && ui.screenSizeIsGreater('md')\">\n            <img id=\"logo\" src=\"assets/sinequa-logo-dark-sm.png\" alt=\"sinequa logo\" width=\"30px\" *ngIf=\"isDark() && ui.screenSizeIsLessOrEqual('md')\">\n        </a>\n\n        <!-- Search form -->\n        <app-search-form class=\"flex-grow-1 flex-basis-0 mx-3\"></app-search-form>\n\n        <!-- User menu which visibility can be toggled with a button on small screens -->\n        <ul class=\"navbar-nav navbar-right\" [ngClass]=\"{'full-width': ui.screenSizeIsLess('sm')}\">\n            <ng-container *ngFor=\"let feature of features\" [ngSwitch]=\"feature\">\n                <sq-baskets-menu *ngSwitchCase=\"'baskets'\" [icon]=\"'fas fa-inbox'\"></sq-baskets-menu>\n                <sq-saved-queries-menu *ngSwitchCase=\"'saved-queries'\"></sq-saved-queries-menu>\n                <sq-alerts-menu *ngSwitchCase=\"'alerts'\"></sq-alerts-menu>\n                <sq-labels-menu *ngSwitchCase=\"'labels'\" [results]=\"searchService.resultsStream | async\"></sq-labels-menu>\n            </ng-container>\n            <sq-user-menu></sq-user-menu>\n        </ul>\n\n        <sq-feedback-menu [style]=\"'primary'\" [rightAligned]=\"true\" class=\"ml-1\" *ngIf=\"loginService.complete\">\n        </sq-feedback-menu>\n\n    </div>\n\n    <ng-container *ngIf=\"loginService.complete\">\n        <div class=\"container-fluid justify-content-start px-0\" *ngIf=\"searchService.resultsStream | async as results\">\n            <span class=\"text-muted mr-2\"><i class=\"fas fa-filter\"></i> {{ 'msg#search.filters' | sqMessage }}: </span>\n            <sq-facet-filters [results]=\"results\" [facets]=\"facets\" class=\"mr-auto\"></sq-facet-filters>\n\n            <sq-theme-toggle></sq-theme-toggle>\n            <div class=\"btn-group dashboard-actions\" [sq-action-buttons]=\"{items: dashboardActions, style: 'primary', rightAligned: true}\"></div>\n        </div>\n    </ng-container>\n</nav>\n\n<!-- Loading bar (Manages its own state and visibility via the search service) -->\n<sq-loading-bar></sq-loading-bar>\n\n<!-- Main interface -->\n<ng-container *ngIf=\"loginService.complete\">\n    <div class=\"flex-grow-1 container-fluid position-relative main-content\" *ngIf=\"searchService.resultsStream | async as results\">\n\n        <!-- Result sidebar toggle -->\n        <span class=\"toggle-results btn-link\"\n            [ngClass]=\"{collapsed: !showResults}\"\n            [sqTooltip]=\"toggleResultsTitle | sqMessage\"\n            (click)=\"toggleResults()\">\n            <i [ngClass]=\"showResults ? 'fas fa-chevron-circle-left' : 'fas fa-chevron-circle-right'\"></i>\n        </span>\n\n        <div class=\"row flex-nowrap h-100\">\n\n            <!-- Results -->\n            <div class=\"results-list py-2 px-3\"\n                [ngClass]=\"{'results-list--hidden': !showResults}\">\n\n                <!-- Result selection toolbar -->\n                <div *ngIf=\"showResults\" class=\"card text-white bg-primary position-fixed action-bar\">\n                    <div class=\"card-header\">\n                        <sq-results-selector [style]=\"isDark()? 'dark' : 'primary'\"></sq-results-selector>\n                    </div>\n                </div>\n\n                <!-- Tabs -->\n                <sq-tabs [results]=\"results\"></sq-tabs>\n\n                <!-- Toolbar -->\n                <div class=\"d-flex flex-row\" [ngClass]=\"{'mr-2': !results.tabs}\"> <!-- margin right when no tab, due to results toggle button -->\n                    <sq-facet-mysearch [results]=\"results\" [allowDeletion]=\"true\" class=\"flex-grow-1 flex-basis-0\"></sq-facet-mysearch>\n                    <sq-results-counter [rowCount]=\"searchService.rowCount\" class=\"mx-2\"></sq-results-counter>\n                    <sq-sort-selector [results]=\"results\" [rightAligned]=\"true\" [style]=\"isDark()? 'dark' : 'light'\"></sq-sort-selector>\n                </div>\n\n                <!-- Did you mean -->\n                <sq-did-you-mean [results]=\"results\"></sq-did-you-mean>\n\n                <!-- Sponsored links -->\n                <sq-sponsored-results [query]=\"searchService.query\"></sq-sponsored-results>\n\n                <!-- List of documents (for loop) -->\n                <div *ngFor=\"let record of results.records; index as i\" class=\"record d-flex\"\n                    (click)=\"onDocumentClicked(record, $event)\"\n                    [ngClass]=\"{'selected': record.$selected || isOpened(record)}\"\n                    [sqScrollIntoView]=\"{active: record.id === lastSelectedId, first: i === 0}\">\n                    <div class=\"flex-grow-1 overflow-hidden\">\n                        <div class=\"d-flex align-items-center\">\n                            <sq-result-selector *ngIf=\"ui.screenSizeIsGreaterOrEqual('md')\" [record]=\"record\" class=\"ml-1\"></sq-result-selector>\n                            <sq-result-title [record]=\"record\" (titleClicked)=\"openPreviewIfNoUrl(record, $event)\"></sq-result-title>\n                        </div>\n                        <sq-result-source [record]=\"record\" [displayTreepath]=\"true\"></sq-result-source>\n                        <sq-result-extracts [record]=\"record\"></sq-result-extracts>\n                        <sq-result-missing-terms [record]=\"record\"></sq-result-missing-terms>\n                        <div class=\"d-inline\">\n                          <sq-labels [record]=\"record\" [public]=\"true\" class=\"d-inline\"></sq-labels>\n                          <sq-labels [record]=\"record\" [public]=\"false\" class=\"d-inline\"></sq-labels>\n                        </div>\n                    </div>\n                    <sq-result-thumbnail [record]=\"record\" [thumbnailColumn]=\"'sourcevarchar4'\" [linkBehavior]=\"'action'\"\n                        *ngIf=\"ui.screenSizeIsGreater('xs')\" class=\"align-self-center\">\n                    </sq-result-thumbnail>\n                </div>\n\n                <!-- Pager -->\n                <sq-pager [results]=\"results\" class=\"d-flex flex-column align-items-center mt-3\"></sq-pager>\n            </div>\n\n            <!-- Dashboard -->\n            <div class=\"h-100 px-0 dashboard-container\" [ngClass]=\"{'dashboard-container--expanded': !showResults}\">\n\n                <!-- Gridster dashboard component -->\n                <gridster #gridster [options]=\"dashboardService.options\">\n                    <!-- Gridster item component (one for each widget): Manages drag & drop, resize, etc. -->\n                    <gridster-item [item]=\"item\" *ngFor=\"let item of dashboardService.dashboard.items; index as i\" [attr.focus]=\"i === focusElementIndex\">\n                        <!-- Sinequa dashboard item component which wraps each widget type-->\n                        <sq-dashboard-item\n                            [config]=\"item\"\n                            [results]=\"results\"\n                            [width]=\"item.width\"\n                            [height]=\"item.height\"\n                            [buttonsStyle]=\"isDark()? 'dark' : 'light'\"\n                            (recordClicked)=\"onDocumentClickedFromView($event)\"\n                            (click)=\"setFocus(i, $event)\"\n                            [sqScrollIntoView]=\"{active: item.recordId && item.recordId === lastClickedId, first: i === 0}\">\n                        </sq-dashboard-item>\n                    </gridster-item>\n                </gridster>\n\n            </div>\n\n        </div>\n\n    </div>\n</ng-container>\n\n<div class=\"align-self-center my-auto text-center\"\n    *ngIf=\"!(searchService.resultsStream | async)\">\n    <img src=\"assets/pepper-lg.png\" height=\"350px\">\n</div>\n","export * from \"./notifications.service\";\nexport * from \"./notifications.interceptor\";\nexport * from \"./notification.module\";\n","export * from \"./public-api\";","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, OnChanges, Output, SimpleChanges, ViewChild } from \"@angular/core\";\r\nimport { Action } from \"@sinequa/components/action\";\r\nimport { AbstractFacet } from \"@sinequa/components/facet\";\r\nimport { SearchService } from \"@sinequa/components/search\";\r\nimport { ExprBuilder } from \"@sinequa/core/app-utils\";\r\nimport { Utils } from \"@sinequa/core/base\";\r\nimport { Results, Record } from \"@sinequa/core/web-services\";\r\nimport { FormatService } from \"@sinequa/core/app-utils\";\r\n\r\nimport * as d3 from 'd3';\r\n\r\nexport interface MoneyDatum {\r\n    value: number;\r\n    currency: string;\r\n    count: number;\r\n    date: Date;\r\n    rawvalue: string;\r\n    record: Record;\r\n}\r\n\r\n@Component({\r\n    selector: 'sq-money-timeline',\r\n    templateUrl: './money-timeline.component.html',\r\n    styleUrls: ['./money-timeline.component.scss']\r\n})\r\nexport class MoneyTimelineComponent extends AbstractFacet implements OnChanges,AfterViewInit {\r\n    @Input() name = \"money-timeline\"\r\n\r\n    @Input() results: Results;\r\n    /** The \"money\" column stores an entity in the form \"<CURRENCY> <NUMERAL>\", for example \"USD 69420\" */\r\n    @Input() moneyColumn = \"money\";\r\n    /** The \"Money\" aggregation must be computed over the money column */\r\n    @Input() moneyAggregation = \"Money\";\r\n\r\n    @Input() width = 600;\r\n    @Input() height = 200;\r\n    @Input() margin = {top: 15, bottom: 30, left: 40, right: 15};\r\n\r\n    /** Displays a tooltip showing the current date */\r\n    @Input() showTooltip = true;\r\n    @Input() theme: \"light\" | \"dark\" = \"light\";\r\n\r\n    @Output() recordClicked = new EventEmitter<Record>();\r\n\r\n    data: MoneyDatum[];\r\n\r\n    // Scales\r\n    x: d3.ScaleTime<number, number>; // Read/Write\r\n    y: d3.ScaleLogarithmic<number, number>; // Read-only / domain updated\r\n    r: d3.ScaleLogarithmic<number,number>;\r\n    c: d3.ScaleOrdinal<string, string>;\r\n\r\n    // Elements\r\n    @ViewChild(\"overlay\") overlay: ElementRef;\r\n    @ViewChild(\"xAxis\") gx: ElementRef;\r\n    @ViewChild(\"yAxis\") gy: ElementRef;\r\n\r\n    // Selections\r\n    xAxis$: d3.Selection<SVGGElement, Date, null, undefined>;\r\n    yAxis$: d3.Selection<SVGGElement, number, null, undefined>;\r\n    \r\n    // Tooltips\r\n    tooltipX: number | undefined;\r\n    tooltipItem: MoneyDatum | undefined;\r\n    tooltipOrientation: \"left\" | \"right\";\r\n    tooltipTop: number;\r\n    tooltipRight: number;\r\n    tooltipLeft: number;\r\n\r\n    viewInit: boolean;\r\n    \r\n    clearFilters: Action;\r\n\r\n    constructor(\r\n        private el: ElementRef,\r\n        protected cdRef: ChangeDetectorRef,\r\n        public searchService: SearchService,\r\n        public exprBuilder: ExprBuilder,\r\n        public formatService: FormatService\r\n    ){\r\n        super();\r\n\r\n        // Clear the current filters\r\n        this.clearFilters = new Action({\r\n            icon: \"far fa-minus-square\",\r\n            title: \"msg#facet.clearSelects\",\r\n            action: () => {\r\n                this.searchService.query.removeSelect(this.name, true);\r\n                this.searchService.search();\r\n            }\r\n        });\r\n    }\r\n\r\n    get actions(): Action[] {\r\n        const actions: Action[] = [];\r\n        if(this.searchService.query.findSelect(this.name)){\r\n            actions.push(this.clearFilters);\r\n        }\r\n        return actions;\r\n    }\r\n\r\n    get innerWidth(): number {\r\n        return this.width - this.margin.left - this.margin.right;\r\n    }\r\n\r\n    get innerHeight(): number {\r\n        return this.height - this.margin.top - this.margin.bottom;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n\r\n        if(!this.x) {\r\n            \r\n            // Scales\r\n            this.x = d3.scaleUtc()\r\n                .range([0, this.innerWidth]);\r\n\r\n            this.y = d3.scaleLog()\r\n                .range([this.innerHeight, 0]);\r\n\r\n            this.r = d3.scaleLog()\r\n                .range([4, 10]);\r\n\r\n            this.c = d3.scaleOrdinal<string>()\r\n                .range(d3.schemeCategory10);\r\n                \r\n        }\r\n        \r\n        // Resize handling\r\n\r\n        if(changes[\"height\"]) {\r\n            this.y.range([this.innerHeight, 0]);\r\n            if(this.viewInit) {\r\n                this.drawYAxis();\r\n            }\r\n        }\r\n\r\n        if(changes[\"width\"]) {\r\n            this.x.range([0, this.innerWidth]);\r\n            if(this.viewInit) {\r\n                this.drawXAxis();\r\n            }\r\n        }\r\n\r\n        if(this.viewInit && changes[\"results\"] && this.results){\r\n            this.updateChart();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        \r\n        // Get native elements\r\n        this.xAxis$ = d3.select(this.gx.nativeElement);\r\n        this.yAxis$ = d3.select(this.gy.nativeElement);\r\n\r\n        d3.select(this.overlay.nativeElement)        \r\n            .on(\"mousemove\", () => this.onMousemove())\r\n            .on(\"mouseout\", () => this.onMouseout());\r\n        \r\n        this.viewInit = true;\r\n\r\n        this.updateChart();\r\n        \r\n        // This is necessary to prevent \"Expression has changed after check\" errors\r\n        // caused by calling updateChart inside ngAfterViewInit().\r\n        // Unfortunately this is necessary because we need the DOM to be rendered in order fill the DOM\r\n        // (for example gAxis needs to exist so we can draw the axis)\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Recomputes the data to display and update the chart's primitives\r\n     */\r\n    updateChart() {\r\n\r\n        this.turnoffTooltip();\r\n\r\n        if(this.results) {\r\n            \r\n            this.updateData();\r\n\r\n            // Update scales\r\n            this.updateScales();\r\n\r\n            // Update Axes\r\n            this.updateAxes();\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Computes the data displayed in the chart in function of the raw data provided as input\r\n     */\r\n    updateData() {\r\n        \r\n        // Extract number of occurrences from the aggregation\r\n        const counts = new Map<string,number>();\r\n        this.results.aggregations\r\n            ?.find(a => Utils.eqNC(a.name, this.moneyAggregation))\r\n            ?.items\r\n            ?.forEach(item => counts.set(item.value.toString(), item.count));\r\n\r\n        this.data = [];\r\n        this.results.records?.forEach(record =>\r\n            record?.[this.moneyColumn]?.forEach(money => {\r\n                const datum = this.parseEntity(money.value, record, counts.get(money.value) || 1);\r\n                if(datum) {\r\n                    this.data.push(datum);\r\n                }\r\n            })\r\n        );\r\n\r\n    }\r\n\r\n    /**\r\n     * Parse the entity stored in the \"money\" column and returns a datum (incl. numerical value and currency)\r\n     */\r\n    @Input()\r\n    parseEntity = (rawvalue: string, record: Record, count): MoneyDatum | undefined => {\r\n        const val = rawvalue.split(\" \"); // Split \"USD 1000\"\r\n        // Check the data is valid\r\n        if(!record.modified || isNaN(val[1] as any) || parseFloat(val[1]) <= 0) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            value: parseFloat(val[1]),\r\n            currency: val[0],\r\n            date: new Date(record.modified),\r\n            count,\r\n            rawvalue,\r\n            record\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Update the axis domains in function of the data\r\n     */\r\n    updateScales() {\r\n\r\n        if(this.data.length) {\r\n            const xExtent = d3.extent<MoneyDatum, Date>(this.data, d => d.date);\r\n            const yExtent = d3.extent<MoneyDatum, number>(this.data, d => d.value);\r\n            const rExtent = d3.extent<MoneyDatum, number>(this.data, d => d.count);\r\n\r\n            if(!xExtent[0] || !xExtent[1] || !yExtent[0] || !yExtent[1] || !rExtent[0] || !rExtent[1]) {\r\n                return;\r\n            }\r\n\r\n            this.x.domain(xExtent);\r\n            this.y.domain(yExtent);\r\n            this.r.domain(rExtent);\r\n            this.c.domain(this.data.map(d => d.record.id));\r\n        }\r\n\r\n    }\r\n    \r\n    /**\r\n     * Update the x and y axes\r\n     */\r\n    protected updateAxes(){\r\n        this.drawXAxis();\r\n        this.drawYAxis();\r\n    }\r\n\r\n    /**\r\n     * Draws the X axis\r\n     */\r\n     protected drawXAxis() {\r\n        const xAxis = d3.axisBottom(this.x)\r\n            .ticks(5);\r\n        this.xAxis$.call(xAxis);\r\n        //this.xAxis$.selectAll(\".domain\").remove(); // Remove the axis line\r\n    }\r\n\r\n    /**\r\n     * Draws the Y axis\r\n     */\r\n    protected drawYAxis() {\r\n        const yAxisTicks = this.y.ticks(5)\r\n            .filter(tick => Number.isInteger(tick)); // Keep only integer ticks https://stackoverflow.com/questions/13576906/d3-tick-marks-on-integers-only/56821215\r\n\r\n        const yAxis = d3.axisLeft<number>(this.y)\r\n            .tickValues(yAxisTicks)\r\n            .tickFormat(this.formatService.moneyFormatter); //https://github.com/d3/d3-format\r\n        this.yAxis$.call(yAxis);\r\n        //this.yAxis$.selectAll(\".domain\").remove(); // Remove the axis line\r\n    }\r\n\r\n    \r\n    /**\r\n     * Redraw the simple tooltip (vertical line)\r\n     */\r\n    onMousemove() {\r\n        if(!this.tooltipItem && this.showTooltip) {\r\n            this.tooltipX = d3.mouse(this.overlay.nativeElement)[0];\r\n        }\r\n        this.tooltipItem = undefined;\r\n    }\r\n\r\n    /**\r\n     * Notify parent component that a record was clicked\r\n     * @param datum\r\n     */\r\n    onRecordClicked(datum: MoneyDatum) {\r\n        this.recordClicked.next(datum.record);\r\n    }\r\n\r\n    /**\r\n     * Filter the search results with the clicked amount of money\r\n     * @param datum \r\n     */\r\n    filterDatum(datum: MoneyDatum) {\r\n        const expr = this.exprBuilder.makeExpr(this.moneyColumn, datum.rawvalue, `${datum.currency} ${this.formatService.moneyFormatter(datum.value)}`)\r\n        this.searchService.query.addSelect(expr, this.name);\r\n        this.searchService.search();\r\n    }\r\n\r\n    /**\r\n     * Remove the simple tooltip (vertical line)\r\n     */\r\n    onMouseout() {\r\n        if(!this.tooltipItem) {\r\n            this.tooltipX = undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Compute the tooltip position when an amount of money is hovered\r\n     * @param datum \r\n     */\r\n    onMouseEnterDatum(datum: MoneyDatum) {\r\n\r\n        if(!this.showTooltip) {\r\n            return;\r\n        }\r\n\r\n        this.tooltipItem = datum;\r\n\r\n        const x = this.x(datum.date);\r\n        const y = this.y(datum.value);\r\n        const r = this.r(datum.count);\r\n\r\n        // Since we use viewBox to auto-adjust the SVG to the container size, we have to\r\n        // convert from the SVG coordinate system to the HTML coordinate system\r\n        const actualWidth = (this.el.nativeElement as HTMLElement).offsetWidth;\r\n        const scale = actualWidth / this.width;\r\n        const relativeX = x / this.width;\r\n\r\n        // Tooltip to the right\r\n        if(relativeX < 0.5) {\r\n            this.tooltipOrientation = \"right\";\r\n            this.tooltipLeft = scale * (this.margin.left + x + r);\r\n        }\r\n        // Tooltip to the left\r\n        else {\r\n            this.tooltipOrientation = \"left\";\r\n            this.tooltipRight = actualWidth - scale * (this.margin.left + x - r);\r\n        }\r\n        this.tooltipTop = scale * (this.margin.top + y); // Align tooltip arrow\r\n    }\r\n    \r\n    /**\r\n     * Turns off the tooltip\r\n     */\r\n    turnoffTooltip = () => {\r\n        if(this.tooltipItem) {\r\n            this.tooltipItem = undefined;\r\n            this.tooltipX = undefined;\r\n        }\r\n    }\r\n}","<svg [attr.viewBox]=\"'0 0 '+width+' '+height\">\r\n\r\n    <g [attr.transform]=\"'translate('+margin.left+','+ margin.top +')'\">\r\n\r\n        <!-- dummy rectangle to capture mouse events -->\r\n        <rect #overlay [attr.width]=\"innerWidth\" [attr.height]=\"innerHeight\" fill=\"none\" pointer-events=\"all\"></rect>\r\n\r\n        <!-- Tooltip line -->\r\n        <g *ngIf=\"showTooltip && tooltipX\" pointer-events=\"none\">\r\n            <line [attr.x1]=\"tooltipX\" [attr.x2]=\"tooltipX\" y1=\"0\" [attr.y2]=\"innerHeight\" class=\"tooltip-line\"></line>\r\n            <text [attr.x]=\"tooltipX < innerWidth*0.55 ? tooltipX + 5 : tooltipX - 5\" y=\"10\"\r\n                [attr.text-anchor]=\"tooltipX < innerWidth*0.55 ? 'start' : 'end'\" class=\"tooltip-text\">\r\n                {{ x.invert(tooltipX) | sqDate }}\r\n            </text>\r\n        </g>\r\n\r\n        <!-- X Axis (built in the controler) -->\r\n        <g #xAxis class=\"x axis\" [attr.transform]=\"'translate(0,'+ innerHeight +')'\"></g>\r\n\r\n        <!-- Y Axis (built in the controler) -->\r\n        <g #yAxis class=\"y axis\"></g>\r\n\r\n        <circle *ngFor=\"let datum of data\"\r\n            class=\"datum\"\r\n            [attr.cx]=\"x(datum.date)\"\r\n            [attr.cy]=\"y(datum.value)\"\r\n            [attr.r]=\"r(datum.count)\"\r\n            [attr.fill]=\"c(datum.record.id)\"\r\n            (mouseenter)=\"onMouseEnterDatum(datum)\">\r\n        </circle>\r\n\r\n    </g>\r\n\r\n</svg>\r\n\r\n<!-- Tooltip -->\r\n<sq-tooltip *ngIf=\"tooltipItem\" class=\"text-center\"\r\n    [orientation]=\"tooltipOrientation\" [left]=\"tooltipLeft\" [right]=\"tooltipRight\" [top]=\"tooltipTop\" [theme]=\"theme\">\r\n    <strong>{{tooltipItem.record.title}}</strong>\r\n    <button (click)=\"onRecordClicked(tooltipItem)\" class=\"btn btn-sm btn-link\" [sqTooltip]=\"'msg#money.inspect' | sqMessage\">\r\n        <i class=\"fas fa-search\"></i>\r\n    </button>\r\n    <div>\r\n        \"{{tooltipItem.currency}} {{formatService.moneyFormatter(tooltipItem.value)}}\"\r\n        <small>({{tooltipItem.count}} mentions)</small>\r\n        <button (click)=\"filterDatum(tooltipItem)\" class=\"btn btn-sm btn-link\" [sqTooltip]=\"'msg#money.filter' | sqMessage\">\r\n            <i class=\"fas fa-filter\"></i>\r\n        </button>\r\n    </div>\r\n    <small>{{tooltipItem.date | sqDate}}</small>\r\n</sq-tooltip>","export default {\n    \"savedQueries\": {\n        \"savedQueries\": \"Saved Queries\",\n        \"saveCurrentQuery\": \"Save Current Query\",\n        \"manageSavedQueries\": \"Manage Saved Queries\",\n        \"savedQueryAlreadyExists\": \"A saved query with that name already exists. Would you like to replace it?\",\n        \"noSavedQuery\": \"You have not yet saved a search query...\",\n        \"delete\": \"Delete this saved query\"\n    },\n\n    \"recentQueries\": {\n        \"noRecentQuery\": \"You have not yet searched for something...\",\n        \"delete\": \"Delete this recent query\",\n        \"save\": \"Save this query\"\n    },\n\n    \"recentDocuments\": {\n        \"recentDocuments\": \"Recent documents\",\n        \"noRecentDocument\": \"You have not yet opened a document...\",\n        \"delete\": \"Delete this recent document\"\n    },\n\n    \"editSavedQuery\": {\n        \"title\": \"Saved Query\",\n        \"name\": \"Name\"\n    },\n\n    \"exportQuery\": {\n        \"dialogTitle\": \"Export\",\n        \"dialogOutputFormat\": \"Output format\",\n        \"dialogMaxCount\": \"Max rows\",\n        \"dialogSourceType\": \"Export from\",\n        \"dialogResult\": \"Current result\",\n        \"dialogSelection\": \"Current selection\",\n        \"btnTitle\": \"Export results\",\n        \"exportResult\": \"Export result as {type}\",\n        \"exportSelection\": \"Export selection as {type}\",\n        \"btnDownload\": \"Download\",\n        \"btnClose\": \"Close\",\n        \"successNotification\": \"Download complete\",\n        \"exportedColumns\": \"Columns to export\",\n        \"exportedColumnsLabelTooltip\": \"Select the columns that you want to export, an empty selection means exporting all columns\",\n        \"dialogMaxCountTooltip\": \"By default, the number of results is limited to {count}\"\n    },\n\n    \"manageSavedQueries\": {\n        \"title\": \"Manage Saved Queries\",\n        \"edit\": \"Edit\",\n        \"reorder\": \"Reorder\",\n        \"remove\": \"Remove\",\n        \"removeAll\": \"Remove all\",\n        \"export\": \"Export\",\n        \"name\": \"Name\",\n        \"rss\": \"RSS Feed\"\n    },\n\n};\n","import { Component, Input, OnChanges } from \"@angular/core\";\nimport { Node, Edge } from './network-models';\n\n\n@Component({\n    selector: \"sq-edge-info-card\",\n    templateUrl: \"edge-info-card.component.html\",\n    styles: [`\n.card {\n    top: 5px;\n    left: 0;\n    right: 0;\n    width: 80%;\n}\n.circular-image {\n    width: 1.5em;\n    height: 1.5em;\n    border-radius: 50%;\n    object-fit: cover;\n}\n    `]\n})\nexport class BsEdgeInfoCard implements OnChanges {\n    @Input() edge: Edge;\n\n    closed: boolean;\n    expanded: boolean;\n\n    fromNode: Node;\n    toNode: Node;\n\n    ngOnChanges() {\n        this.closed = false;\n        this.expanded = false;\n\n        this.fromNode = this.edge.context.nodes.get(this.edge.from) as Node;\n        this.toNode = this.edge.context.nodes.get(this.edge.to) as Node;\n    }\n\n    focusNode(node: Node) {\n        // Hack to gain access to the network instance (networkService does not have the focus() method)\n        const networkInstance = node.context.networkService['networks'][node.context.name];\n        networkInstance.focus(node.id, {animation: true}); // Move the view to this node with animation\n        networkInstance.selectNodes([node.id], true); // Warning: does not trigger events...\n        node.context.select(node, undefined); // Select the node to update info cards, actions\n        return false;\n    }\n}","<div class=\"card position-absolute mx-auto\" *ngIf=\"!closed\">\n    <div class=\"card-body\">\n        <div class=\"d-flex align-items-center mb-1\">\n            <ng-container *ngTemplateOutlet=\"nodeTpl; context:{$implicit: fromNode}\"></ng-container>\n            <span class=\"mr-2\">-</span>\n            <ng-container *ngTemplateOutlet=\"nodeTpl; context:{$implicit: toNode}\"></ng-container>\n\n            <button class=\"btn btn-sm ml-auto\" title=\"{{ (expanded? 'msg#network.infocards.collapse' : 'msg#network.infocards.expand') | sqMessage }}\" (click)=\"expanded = !expanded\">\n                <i class=\"fas fa-chevron-{{ expanded? 'up' : 'down' }}\"></i>\n            </button>\n            <button class=\"btn btn-sm\" title=\"{{ 'msg#network.infocards.close' | sqMessage }}\" (click)=\"closed = true\">\n                <i class=\"fas fa-times\"></i>\n            </button>\n        </div>\n        <sq-collapse [collapsed]=\"!expanded\">\n            <ng-template>\n                <div><strong>{{ 'msg#network.infocards.count' | sqMessage }}: </strong> {{edge.count}}</div>\n                <div *ngIf=\"edge['aggregation']\"><strong>{{ 'msg#network.infocards.aggregation' | sqMessage }}: </strong> {{edge['aggregation'].name}}</div>\n                <div *ngIf=\"edge['record']\"><strong>{{ 'msg#network.infocards.record' | sqMessage }}: </strong> {{edge['record']['title']}}</div>\n            </ng-template>\n        </sq-collapse>\n    </div>\n</div>\n\n<ng-template #nodeTpl let-node>\n    <span *ngIf=\"node['image']\"><img src=\"{{node['image']}}\" class=\"circular-image mr-2\"></span>\n    <span *ngIf=\"!node['image'] && node['icon']\" [ngStyle]=\"{color: node['icon']['color']}\" class=\"fa mr-2\">{{node['icon']['code']}}</span>\n    <span class=\"mr-2\">{{node.label}}</span>\n    <span *ngIf=\"node.count > 0\" class=\"mr-2 text-muted\" title=\"{{ 'msg#network.infocards.count' | sqMessage }}\">({{node.count}})</span>\n</ng-template>","import {\r\n  ComponentRef,\r\n  Directive,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  OnDestroy\r\n} from \"@angular/core\";\r\nimport {\r\n  ConnectedPosition,\r\n  Overlay,\r\n  OverlayPositionBuilder,\r\n  OverlayRef\r\n} from \"@angular/cdk/overlay\";\r\nimport {ComponentPortal} from \"@angular/cdk/portal\";\r\n\r\nimport {TooltipComponent} from \"./tooltip.component\";\r\n\r\n@Directive({selector: \"[sqTooltip]\"})\r\nexport class TooltipDirective implements OnDestroy {\r\n  @Input(\"sqTooltip\") text = \"\";\r\n  @Input() placement: \"top\" | \"bottom\" | \"right\" | \"left\" = \"bottom\";\r\n  @Input() delay = 300;\r\n\r\n  private overlayRef: OverlayRef;\r\n  private timeoutId;\r\n\r\n  constructor(\r\n    private overlay: Overlay,\r\n    private overlayPositionBuilder: OverlayPositionBuilder,\r\n    private elementRef: ElementRef\r\n  ) {}\r\n\r\n  ngOnDestroy() {\r\n    if(this.overlayRef){\r\n      this.overlayRef.detach();\r\n    }\r\n  }\r\n\r\n  @HostListener(\"mouseenter\", ['$event'])\r\n  show(event: MouseEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    this.clearTimer();\r\n\r\n    this.timeoutId = setTimeout(() => {          \r\n      if(this.overlayRef) {\r\n          this.overlayRef.detach();\r\n      }\r\n\r\n      if (this.text.trim().length === 0) {\r\n        return;\r\n      }\r\n\r\n      const positionStrategy = this.overlayPositionBuilder\r\n      .flexibleConnectedTo(this.elementRef)\r\n      .withPositions([this.position()]);\r\n      \r\n      const scrollStrategy = this.overlay.scrollStrategies.close();\r\n      this.overlayRef = this.overlay.create({positionStrategy, scrollStrategy});\r\n      \r\n      const tooltipRef: ComponentRef<TooltipComponent> = this.overlayRef.attach(new ComponentPortal(TooltipComponent));\r\n      tooltipRef.instance.text = this.text;\r\n    }, this.delay);\r\n  }\r\n\r\n  @HostListener(\"mousedown\", ['$event'])\r\n  mouseClick(event: MouseEvent) {\r\n    event.preventDefault()\r\n    event.stopPropagation();\r\n    this.clearTimer();\r\n  }\r\n\r\n  @HostListener(\"mouseleave\")\r\n  hide() {\r\n    this.clearTimer();\r\n  }\r\n\r\n  position(): ConnectedPosition {\r\n    switch (this.placement) {\r\n      case \"bottom\":\r\n        return {\r\n          originX: \"center\",\r\n          originY: \"bottom\",\r\n          overlayX: \"center\",\r\n          overlayY: \"top\",\r\n          offsetY: 8\r\n        };\r\n      case \"right\":\r\n        return {\r\n          originX: \"end\",\r\n          originY: \"center\",\r\n          overlayX: \"start\",\r\n          overlayY: \"center\",\r\n          offsetX: 8\r\n        };\r\n      case \"left\":\r\n        return {\r\n          originX: \"start\",\r\n          originY: \"center\",\r\n          overlayX: \"end\",\r\n          overlayY: \"center\",\r\n          offsetX: -8\r\n        };\r\n      default:\r\n        return {\r\n          originX: \"center\",\r\n          originY: \"top\",\r\n          overlayX: \"center\",\r\n          overlayY: \"bottom\",\r\n          offsetY: -8\r\n        };\r\n    }\r\n  }\r\n\r\n  private clearTimer() {\r\n    if(this.timeoutId) {\r\n      clearTimeout(this.timeoutId);\r\n    }\r\n\r\n    if (this.overlayRef) {\r\n      this.overlayRef.detach();\r\n    }\r\n  }\r\n}","export * from \"./public-api\";","import {Component, OnInit, Inject} from \"@angular/core\";\nimport {Validators, AbstractControl} from \"@angular/forms\";\nimport {ValidatorFn} from \"@angular/forms\";\nimport {CdkDragDrop} from \"@angular/cdk/drag-drop\";\nimport {MODAL_MODEL, ModalButton, ModalResult} from \"@sinequa/core/modal\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {AuditEvent} from \"@sinequa/core/web-services\";\nimport {Basket, BasketEventType, ManageBasketsModel} from \"../../baskets.service\";\n\n@Component({\n    selector: \"sq-manage-baskets\",\n    templateUrl: \"./manage-baskets.html\",\n    styleUrls: [\"./manage-baskets.scss\"]\n})\nexport class BsManageBaskets implements OnInit {\n    reordering: boolean;\n    buttons: ModalButton[];\n    removeAllButton: ModalButton;\n    nameValidators: ValidatorFn[];\n\n    constructor(\n        @Inject(MODAL_MODEL) public model: ManageBasketsModel) {\n        this.reordering = false;\n\n        this.nameValidators = [\n            Validators.required,\n            (control: AbstractControl) => {\n                const modelControl = control.root.get(\"model\");\n                if (modelControl) {\n                    for (const item of this.model.baskets) {\n                        if (modelControl.value === item) {\n                            continue;\n                        }\n                        if (control.value === item.name) {\n                            return {\n                                unique: true\n                            };\n                        }\n                    }\n                }\n                return null;\n            }\n        ];\n    }\n\n    ngOnInit() {\n        this.buttons = [\n            this.removeAllButton = new ModalButton({\n                text: \"msg#manageBaskets.removeAll\",\n                result: ModalResult.Custom,\n                action: (button) => {\n                    this.model.baskets.splice(0);\n                    button.visible = false;\n                    this.addAuditEvent({\n                        type: BasketEventType.DeleteAll\n                    });\n                },\n                visible: this.model.baskets.length > 0\n            }),\n            new ModalButton({\n                result: ModalResult.OK,\n                primary: true\n            }),\n            new ModalButton({\n                result: ModalResult.Cancel\n            })\n        ];\n    }\n\n    addAuditEvent(auditEvent: AuditEvent) {\n        if (!this.model.auditEvents) {\n            this.model.auditEvents = [];\n        }\n        this.model.auditEvents.push(auditEvent);\n    }\n\n    reorder() {\n        this.reordering = !this.reordering;\n    }\n\n    setName(basket: Basket, name: string) {\n        if (!Utils.eqNC(basket.name, name)) {\n            this.addAuditEvent({\n                type: BasketEventType.Rename,\n                detail: {\n                    basket: name,\n                    \"old-name\": basket.name\n                }\n            });\n            basket.name = name;\n        }\n    }\n\n    remove(basket: Basket, index: number) {\n        this.model.baskets.splice(index, 1);\n        this.removeAllButton.visible = this.model.baskets.length > 0;\n        this.addAuditEvent({\n            type: BasketEventType.Delete,\n            detail: {\n                basket: basket.name\n            }\n        });\n        return false;\n    }\n\n    dropped(drop: CdkDragDrop<Basket[]>) {\n        Utils.arrayMove(this.model.baskets, drop.previousIndex, drop.currentIndex);\n    }\n}\n","<form name=\"manageBaskets\" novalidate>\n    <sq-modal [title]=\"'msg#manageBaskets.title'\" [buttons]=\"buttons\">\n        <div *ngIf=\"model.baskets.length\" class=\"form-group clearfix\">\n            <button type=\"button\" class=\"btn btn-secondary float-right\" (click)=\"reorder()\">{{(reordering ? \"msg#manageBaskets.edit\" : \"msg#manageBaskets.reorder\") | sqMessage}}</button>\n        </div>\n        <div class=\"form-group\">\n            <div class=\"list-group\" cdkDropList [cdkDropListData]=\"model.baskets\" [cdkDropListDisabled]=\"!reordering\" (cdkDropListDropped)=\"dropped($event)\">\n                <div *ngFor=\"let basket of model.baskets; let $index = index\" cdkDrag \n                    [ngClass]=\"['list-group-item list-group-item-action d-flex w-auto-unimportant', reordering ? 'cursor-move': '']\">\n                    <div *ngIf=\"reordering\" class=\"sq-basket-text\">{{basket.name}}</div>\n                    <sq-editable *ngIf=\"!reordering\" [value]=\"basket.name\" (valueChange)=\"setName(basket, $event)\" name=\"msg#manageBaskets.name\"\n                        [model]=\"basket\" [validators]=\"nameValidators\"></sq-editable>\n                    <div class=\"ml-auto\">\n                        <a *ngIf=\"!reordering\" class=\"ml-2\" href=\"#\" (click)=\"remove(basket, $index)\" title=\"{{'msg#manageBaskets.remove' | sqMessage}}\">\n                            <span class=\"fas fa-times sq-remove\"></span>\n                        </a>\n                        <span *ngIf=\"reordering\" class=\"ml-2 fas fa-bars sq-move\"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </sq-modal>\n</form>\n","import { Component, Input, Output, EventEmitter, OnChanges, SimpleChanges, HostBinding, AfterViewChecked } from \"@angular/core\";\nimport { SafeResourceUrl } from \"@angular/platform-browser\";\nimport { Query } from '@sinequa/core/app-utils';\nimport { Record, PreviewData } from \"@sinequa/core/web-services\";\nimport { PreviewService } from \"../../preview.service\";\nimport { PreviewDocument, HighlightFilters } from \"../../preview-document\";\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\n\n@Component({\n  selector: 'sq-facet-preview-2',\n  templateUrl: './facet-preview.component.html',\n  styleUrls: ['./facet-preview.component.scss']\n})\nexport class BsFacetPreviewComponent2 extends AbstractFacet implements OnChanges, AfterViewChecked {\n\n  @Input() record: Record;\n  @Input() query: Query;\n  @Input() iframeClass: string;\n  @Input() sandbox : string | null;\n  @Input() height = 500;\n  @Input() scalingFactor = 0.6;\n  @Input() metadata: string[] = [];\n  @Input() expandModal = true;\n  @Input() closable = true;\n  @Input() highlightActions = true;\n  @Input() customActions: Action[];\n  @Input() filters: HighlightFilters;\n  @Input() originalDocTarget: string | undefined;\n  @Output() recordClosed = new EventEmitter<void>();\n  @Output() previewLoaded = new EventEmitter<PreviewDocument>();\n  @HostBinding('style.height.px') _height: number = this.height;\n\n  private closeAction: Action;\n  private expandModalAction: Action;\n  private toggleEntitiesAction: Action;\n  private toggleExtractsAction: Action;\n  private minimizeAction: Action;\n  private maximizeAction: Action;\n\n  data?: PreviewData;\n  document?: PreviewDocument;\n  downloadUrl?: SafeResourceUrl;\n\n  private readonly scaleFactorThreshold = 0.1;\n  private loaded = false;\n\n  constructor(\n      private previewService: PreviewService) {\n\n    super();\n\n    this.closeAction = new Action({\n      icon: \"fas fa-times\",\n      title: \"msg#facet.preview.closeTitle\",\n      action: () => {\n        this.recordClosed.next();\n      }\n    });\n\n    this.expandModalAction = new Action({\n      icon: \"far fa-window-maximize\",\n      title: \"msg#facet.preview.expandTitle\",\n      action: () => {\n        this.previewService.openModal(this.record, this.query, {\n          displaySimilarDocuments: false,\n          metadata: this.metadata\n        });\n      }\n    });\n\n    this.toggleEntitiesAction = new Action({\n      icon: \"fas fa-lightbulb\",\n      title: \"msg#facet.preview.toggleEntities\",\n      selected: true,\n      action: (action) => {\n        action.selected = !action.selected;\n        if(this.data?.highlightsPerCategory) {\n          Object.keys(this.data.highlightsPerCategory)\n            .filter(value => value !== \"extractslocations\" && value !== \"matchlocations\")\n            .forEach(cat =>\n              this.document?.toggleHighlight(cat, action.selected!)\n            );\n        }\n      }\n    });\n\n    this.toggleExtractsAction = new Action({\n        icon: \"fas fa-highlighter\",\n        title: \"msg#facet.preview.toggleExtracts\",\n        selected: true,\n        action: (action) => {\n            action.selected = !action.selected;\n            this.document?.toggleHighlight(\"matchlocations\", action.selected);\n            this.document?.toggleHighlight(\"extractslocations\", action.selected);\n        }\n    });\n\n    this.maximizeAction = new Action({\n      icon: \"fas fa-search-plus\",\n      title: \"msg#facet.preview.maximize\",\n      action: () => {\n        this.scalingFactor = this.scalingFactor + this.scaleFactorThreshold;\n      }\n    });\n\n    this.minimizeAction = new Action({\n      icon: \"fas fa-search-minus\",\n      title: \"msg#facet.preview.minimize\",\n      disabled: this.scalingFactor === 0.1,\n      action: () => {\n        this.scalingFactor = Math.round(Math.max(0.1, this.scalingFactor - this.scaleFactorThreshold) * 100) / 100;\n      },\n      updater: (action) => {\n        action.disabled = this.scalingFactor === 0.1;\n      }\n    });\n\n  }\n\n  get actions(): Action[] {\n    const actions: Action[] = [];\n    if(this.customActions){\n      actions.push(...this.customActions);\n    }\n    if(this.highlightActions) {\n      actions.push(this.toggleExtractsAction, this.toggleEntitiesAction);\n    }\n    this.minimizeAction.update();\n    actions.push(this.minimizeAction, this.maximizeAction);\n    if(this.expandModal){\n      actions.push(this.expandModalAction);\n    }\n    if(this.closable){\n      actions.push(this.closeAction);\n    }\n    return actions;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes[\"record\"]) {\n      this.previewService.getPreviewData(this.record.id, this.query).subscribe(\n        previewData => {\n          this.data = previewData;\n          this.downloadUrl = this.data ? this.previewService.makeDownloadUrl(this.data.documentCachedContentUrl) : undefined;\n        });\n      this.downloadUrl = undefined;\n      this.data = undefined;\n      this.document = undefined;\n    }\n    if(changes[\"height\"] || changes[\"scalingFactor\"]) {\n      this._height = this.height;\n    }\n  }\n\n  ngAfterViewChecked() {\n    if (this.document && this.loaded) {\n      this.loaded = false;\n      // as now view is checked, emit event\n      this.previewLoaded.emit(this.document);\n    }\n  }\n\n  onPreviewReady(document: PreviewDocument) {\n    this.document = document;\n    if (this.document && this.filters) {\n      this.document.filterHighlights(this.filters);\n    }\n\n    this.loaded = true;\n  }\n}\n","<div class=\"d-flex flex-column {{iframeClass}}\" [ngStyle]=\"{'height.%': 100}\">\n    <sq-preview-document-iframe\n                                [sandbox]=\"sandbox\"\n                                [downloadUrl]=\"downloadUrl\"\n                                [scalingFactor]=\"scalingFactor\"\n                                (onPreviewReady)=\"onPreviewReady($event)\">\n    </sq-preview-document-iframe>\n</div>\n\n<ng-template #headerTpl>\n    <sq-result-title class=\"flex-grow-1 flex-basis-0\" [record]=\"record\" [originalDocTarget]=\"originalDocTarget\" titleLinkBehavior=\"open-if-url\"></sq-result-title>\n</ng-template>\n\n<ng-template #subHeaderTpl>\n    <sq-metadata *ngIf=\"metadata && metadata.length > 0\"\n        [record]=\"record\"\n        [items]=\"metadata\"\n        [showTitles]=\"true\"\n        [showIcons]=\"true\"\n        [clickable]=\"false\">\n    </sq-metadata>\n</ng-template>\n","export * from \"./public-api\";","export * from \"./public-api\";","export * from \"./public-api\";","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {Action, IAction} from '@sinequa/components/action';\r\nimport {Subscription} from 'rxjs';\r\n\r\nimport {SearchService} from '../../search.service';\r\n\r\n@Component({\r\n  selector: \"sq-load-more\",\r\n  templateUrl: \"./load-more.html\"\r\n})\r\nexport class BsLoadMore implements OnInit, OnDestroy {\r\n  @Input() buttonsStyle = \"outline-primary\";\r\n  @Input() actionsSize = \"sm\"\r\n\r\n  private subscription: Subscription = new Subscription();\r\n  loadMoreAction: IAction;\r\n  hasMore = false;\r\n\r\n  constructor(private searchService: SearchService) {\r\n    this.loadMoreAction = new Action({\r\n      text: \"msg#facet.loadMore\",\r\n      title: \"msg#facet.loadMore\",\r\n      action: (action) => {\r\n        this.searchService.loadMore();\r\n        action.update();\r\n      },\r\n      updater:() => {\r\n        // hide button while fetching new data\r\n        this.hasMore = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subscription = this.searchService.resultsStream\r\n      .subscribe(results => {\r\n        this.hasMore = this.searchService.hasMore();\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n}","<div *ngIf=\"hasMore\" class=\"btn-group\" [sq-action-buttons]=\"{items: [loadMoreAction], style: buttonsStyle, size: actionsSize, rightAligned: false}\"></div>\r\n","import { Component, OnInit, Input, OnDestroy } from '@angular/core';\nimport { Action } from '@sinequa/components/action';\nimport { LoginService } from '@sinequa/core/login';\nimport { AlertsService, Alert } from '../../alerts.service';\nimport { SearchService } from '@sinequa/components/search';\nimport { Utils } from '@sinequa/core/base';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'sq-alerts-menu',\n  templateUrl: './alerts-menu.component.html'\n})\nexport class BsAlertsMenuComponent implements OnInit, OnDestroy {\n  \n  @Input() searchRoute: string = \"/search\";\n  @Input() icon: string = \"fas fa-bell\";\n  @Input() autoAdjust: boolean = true;\n  @Input() autoAdjustBreakpoint: string = 'xl';\n  @Input() collapseBreakpoint: string = 'sm';\n  @Input() size: string;\n\n  menu: Action | undefined;\n\n  // Alerts actions\n  createAction: Action;\n  manageAction: Action;\n\n  constructor(\n    public loginService: LoginService,\n    public alertsService: AlertsService,\n    public searchService: SearchService\n  ) {\n\n    this.createAction = new Action({\n      text: \"msg#alerts.createAlert\",\n      title: \"msg#alerts.createAlert\",\n      action: () => { this.alertsService.createAlertModal(); }\n    });\n\n    this.manageAction = new Action({\n      text: \"msg#alerts.manageAlerts\",\n      title: \"msg#alerts.manageAlerts\",\n      action: () => { this.alertsService.manageAlertsModal(this.searchRoute); }\n    });\n\n  }\n\n  ngOnInit() {\n    this.updateMenu();\n    this._alertsServiceSubscription = this.alertsService.changes.subscribe({\n      next: () => { this.updateMenu(); }\n    });\n    this._loginServiceSubscription = this.loginService.events.subscribe(event => {\n      if(event.type === \"session-changed\"){\n        this.updateMenu();\n      }\n    });\n    this._searchServiceSubscription = this.searchService.resultsStream.subscribe(results => {\n      this.updateMenu();\n    });\n  }\n\n  private _alertsServiceSubscription: Subscription;\n  private _loginServiceSubscription: Subscription;\n  private _searchServiceSubscription: Subscription;\n  ngOnDestroy(){\n    if(this._alertsServiceSubscription){\n      this._alertsServiceSubscription.unsubscribe();\n    }\n    if(this._loginServiceSubscription){\n      this._loginServiceSubscription.unsubscribe();\n    }\n    if(this._searchServiceSubscription){\n      this._searchServiceSubscription.unsubscribe();\n    }\n  }\n\n  updateMenu() {\n\n    if (!this.loginService.complete) {\n      this.menu = undefined;\n      return;\n    }\n\n    const alertsActions: Action[] = [];\n\n    if (this.alertsService.hasAlert) {\n        const scrollGroup = new Action({\n            scrollGroup: true,\n            children: this.alertsService.alerts.map(alert => new Action({\n              text: alert.name,\n              data: alert,\n              action: (item: Action) => {\n                const alert: Alert = Utils.copy(item.data);\n                this.alertsService.editAlertModal(alert, undefined, this.searchRoute);\n              }\n          }))\n        });\n        alertsActions.push(scrollGroup);\n    }\n\n    if (!!this.searchService.results) {\n        alertsActions.push(this.createAction);\n    }\n\n    if (this.alertsService.hasAlert) {\n        alertsActions.push(this.manageAction);\n    }\n\n    this.menu = new Action({\n      icon: this.icon,\n      text: \"msg#alerts.alerts\",\n      children: alertsActions\n    });\n  }\n\n}\n","<li *ngIf=\"!!menu && !menu.hidden\" class=\"nav-item dropdown\" \n    [sq-action-item]=\"{item: menu, size: size, autoAdjust: autoAdjust, autoAdjustBreakpoint: autoAdjustBreakpoint, inMenu: true}\"\n    [collapseBreakpoint]=\"collapseBreakpoint\"\n></li>","export * from \"./breadcrumbs\";\nexport * from \"./search.service\";\nexport * from \"./first-page.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";","export * from \"./public-api\";","export * from \"./public-api\";","export * from \"./public-api\";","import {Component, Input, Output, OnInit, OnDestroy, EventEmitter, ContentChild, HostBinding, AfterContentInit, ChangeDetectorRef} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {Action} from \"@sinequa/components/action\";\nimport {AbstractFacet} from \"../../abstract-facet\";\n\n@Component({\n    selector: \"sq-facet-card\",\n    templateUrl: \"./facet-card.html\",\n    styles: [`\n        .cursor-default {cursor: default;}\n    `]\n})\nexport class BsFacetCard implements OnInit, OnDestroy, AfterContentInit {\n\n    /**\n     * Title of this facet (optional)\n     */\n    @Input() title: string;\n\n    /**\n     * Tooltip of this facet (defaults to title)\n     */\n    @Input() tooltip: string;\n\n    /**\n     * Icon of this facet, in a form of a span class name (optional)\n     */\n    @Input() icon: string;\n\n    /**\n     * Bootstrap theme name (light, dark...)\n     */\n    @Input() buttonsStyle: string;\n\n    /**\n     * List of custom actions for this facet (optional)\n     */\n    @Input() actions: Action[] = [];\n\n    /**\n     * Whether the [actions]=\"...\" passed by binding should be displayed before or after\n     * the actions from the inner facet component\n     */\n    @Input() actionsFirst = true;\n\n    /**\n     * Size of the custom actions\n     */\n    @Input() actionsSize = \"sm\";\n\n    /**\n     * Whether the facet can be collapsed (default: true)\n     */\n    @Input() collapsible: boolean = true;\n\n    /**\n     * Whether the facet starts collapsed (if collapsible / default: false)\n     */\n    @Input() startCollapsed: boolean = false;\n\n    /**\n     * Whether other actions should be hidden when the facet is collapsed (default: true)\n     */\n    @Input() hideActionsCollapsed: boolean = true;\n\n    /**\n     * Whether the facet can be expanded (default: false)\n     */\n    @Input() expandable: boolean = false;\n\n    /**\n     * Whether the facet starts expanded (if expandable / default: false)\n     */\n    @Input() startExpanded: boolean = false;\n\n    /**\n     * Whether the facet starts with opened settings (default: false)\n     */\n    @Input() startSettingsOpened: boolean = false;\n\n    /**\n     * Event triggered when the facet gets expanded or reduced\n     */\n    @Output() facetExpanded = new EventEmitter<\"expanded\"|\"reduced\">();\n\n    /**\n     * Event triggered when the facet gets expanded or reduced\n     */\n    @Output() facetCollapsed = new EventEmitter<\"collapsed\"|\"expanded\">();\n\n    /**\n     * Event triggered when the facet gets expanded or reduced\n     */\n    @Output() settingsOpened = new EventEmitter<\"opened\"|\"saved\"|\"canceled\">();\n\n    /**\n     * Reference to the child facet inserted by transclusion (ng-content)\n     */\n    @ContentChild(\"facet\", {static: false}) public facetComponent: AbstractFacet;\n\n    @HostBinding('class.collapsed') _collapsed: boolean;\n    @HostBinding('class.expanded') _expanded: boolean;\n    @HostBinding('class.settings-opened') _settingsOpened: boolean;\n\n    @HostBinding('hidden') get hidden(): boolean {\n        return !!this.facetComponent && !!this.facetComponent.isHidden && this.facetComponent.isHidden();\n    }\n\n    private readonly collapseAction;\n    private readonly expandAction;\n    private readonly settingsAction;\n\n    private actionChangedSubscription: Subscription;\n\n    constructor(\n        private changeDetectorRef: ChangeDetectorRef\n    ){\n\n        this.collapseAction = new Action({\n            action: (action) => {\n                this._collapsed = !this._collapsed;\n                this.facetCollapsed.next(this._collapsed ? \"collapsed\" : \"expanded\");\n                if(!!this.facetComponent){\n                    this.facetComponent.onCollapse(this._collapsed);\n                }\n                action.update();\n            },\n            updater: (action) => {\n                action.icon = this._collapsed ? \"fas fa-chevron-down\" : \"fas fa-chevron-up\";\n                action.title = this._collapsed ? 'msg#facetCard.expand' : 'msg#facetCard.collapse';\n            }\n        });\n\n        this.expandAction = new Action({\n            action: (action) => {\n                this._expanded = !this._expanded;\n                this.facetExpanded.next(this._expanded ? \"expanded\" : \"reduced\");\n                if(!!this.facetComponent){\n                    this.facetComponent.onExpand(this._expanded);\n                }\n                action.update();\n            },\n            updater: (action) => {\n                action.icon = this._expanded ? \"fas fa-compress\" : \"fas fa-expand\";\n                action.title = this._expanded ? \"msg#facetCard.reduce\" : \"msg#facetCard.enlarge\";\n            }\n        });\n\n        this.settingsAction = new Action({\n            action: (action) => {\n                this._settingsOpened = !this._settingsOpened;\n                this.settingsOpened.next(this._settingsOpened? \"opened\" : \"saved\");\n                if(!!this.facetComponent){\n                    this.facetComponent.onOpenSettings(this._settingsOpened);\n                }\n                action.update();\n            },\n            updater: (action) => {\n                action.icon = this._settingsOpened ? \"far fa-save\" : \"fas fa-cog\";\n                action.title = this._settingsOpened ? \"msg#facetCard.saveSettings\" : \"msg#facetCard.openSettings\";\n            }\n        });\n\n    }\n\n    ngOnInit(){\n        // Initialize actions\n        this._collapsed = this.startCollapsed;\n        this._expanded = this.startExpanded;\n        this._settingsOpened = this.startSettingsOpened;\n\n        this.collapseAction.update();\n        this.expandAction.update();\n        this.settingsAction.update();\n    }\n\n    ngAfterContentInit(){\n        if(this.facetComponent) {\n            this.actionChangedSubscription = this.facetComponent.actionsChanged.subscribe((actions) => {\n                this.allActions.forEach(action => action.update());\n                this.changeDetectorRef.markForCheck();\n            });\n        }\n        else {\n            console.warn(\"No #facet component is defined in this facet card: \", this.title);\n        }\n    }\n\n    ngOnDestroy(){\n        if(this.actionChangedSubscription){\n            this.actionChangedSubscription.unsubscribe();\n        }\n    }\n\n    public get allActions() : Action[] {\n        if(this.hideActionsCollapsed && this._collapsed) return [this.collapseAction]; // Hide other actions if collapsed\n        let actions = [] as Action[];\n        if(this.actionsFirst) {\n            actions.push(...this.actions);\n        }\n        if(this.facetComponent) actions = actions.concat(this.facetComponent.actions);\n        if(this.hasSettings) actions.push(this.settingsAction);\n        if(this.expandable) actions.push(this.expandAction);\n        if(this.collapsible) actions.push(this.collapseAction);\n        if(!this.actionsFirst) {\n            actions.push(...this.actions);\n        }\n        return actions;\n    }\n\n    public get hasSettings(){\n        return !!this.facetComponent && !!this.facetComponent.settingsTpl;\n    }\n}\n","<div class=\"card\">    \n    <div class=\"card-header cursor-default pl-3 pr-2 py-1\">\n        <div class=\"d-flex\">\n            <div class=\"d-flex align-items-center text-truncate mr-auto\" [title]=\"(tooltip || title) | sqMessage\">\n                <div *ngIf=\"!!icon\" class=\"card-icon {{icon}} mr-2\" aria-hidden=\"true\"></div>\n                <div *ngIf=\"title\" class=\"card-title text-truncate mb-0 py-1 mr-auto\">{{title | sqMessage }}</div>\n            </div>\n            <ng-container *ngIf=\"facetComponent && facetComponent.headerTpl\" [ngTemplateOutlet]=\"facetComponent.headerTpl\">\n            </ng-container>\n            <div class=\"btn-group\" [sq-action-buttons]=\"{items: allActions, style: buttonsStyle, size: actionsSize, rightAligned: true}\"></div>\n        </div>\n        <ng-container *ngIf=\"facetComponent && facetComponent.subHeaderTpl\" [ngTemplateOutlet]=\"facetComponent.subHeaderTpl\"></ng-container>\n    </div>\n    <sq-collapse [collapsed]=\"_collapsed\" *ngIf=\"!_settingsOpened\">\n        <ng-template>\n            <ng-content>\n            </ng-content>\n        </ng-template>\n    </sq-collapse>\n    <ng-container *ngIf=\"hasSettings && _settingsOpened\" [ngTemplateOutlet]=\"facetComponent.settingsTpl\"></ng-container>\n    <ng-container class=\"card-footer\" *ngIf=\"facetComponent && facetComponent.footerTpl\" [ngTemplateOutlet]=\"facetComponent.footerTpl\"></ng-container>\n</div>","export default {\n    \"baskets\": {\n        \"baskets\": \"Baskets\",\n        \"addToBasket\": \"Add to basket\",\n        \"removeFromBasket\": \"Remove from basket\",\n        \"removeFromAllBaskets\": \"Remove from all baskets\",\n        \"removeFromAllBasketsConfirmation\": \"Are you sure you want to remove this result from these baskets: {baskets}?\",\n        \"basketAlreadyExists\": \"A basket with that name already exists. Would you like to replace it?\",\n        \"noBasket\": \"You have not yet added a document to a basket...\",\n        \"createBasket\": \"Create Basket\",\n        \"manageBaskets\": \"Manage Baskets\",\n        \"delete\": \"Delete this basket\"\n    },\n\n    \"editBasket\": {\n        \"title\": \"Basket\",\n        \"name\": \"Name\"\n    },\n\n    \"manageBaskets\": {\n        \"title\": \"Manage Baskets\",\n        \"edit\": \"Edit\",\n        \"reorder\": \"Reorder\",\n        \"remove\": \"Remove\",\n        \"removeAll\": \"Remove all\",\n        \"name\": \"Name\"\n    },\n\n    \"selectBasket\": {\n        \"title\": \"Select Basket\",\n        \"newBasket\": \"New basket...\"\n    }\n};\n","export * from \"./public-api\";","import { Component, Input } from '@angular/core';\nimport { SearchService } from '@sinequa/components/search';\nimport { RecentQueriesService, RecentQuery, RecentQueryEventType } from '../../recent-queries.service';\nimport { AbstractFacet } from '@sinequa/components/facet';\nimport { Action } from '@sinequa/components/action';\nimport { SavedQueriesService } from '../../saved-queries.service';\nimport { Utils } from '@sinequa/core/base';\nimport { Query } from '@sinequa/core/app-utils';\n\n@Component({\n  selector: 'sq-facet-recent-queries',\n  templateUrl: './facet-recent-queries.html',\n  styles: [`\n.recent-query-item .query-delete, .recent-query-item .query-save{\n    opacity: 0;\n}\n\n.recent-query-item:hover .query-delete, .recent-query-item:hover .query-save{\n    opacity: 1;\n    transition: opacity 0.2s ease-in-out;\n}\n  `]\n})\nexport class BsFacetRecentQueries extends AbstractFacet  {\n    @Input() searchRoute: string = \"/search\";\n    @Input() maxQueries: number = 5;\n    @Input() enableDelete: boolean = true;\n    @Input() enableSave: boolean = true;\n\n    page: number = 0;\n\n    previousPage: Action;\n    nextPage: Action;\n\n    constructor(\n        public searchService: SearchService,\n        public recentQueriesService: RecentQueriesService,\n        public savedQueriesService: SavedQueriesService) {\n        super();\n\n        this.previousPage = new Action({\n            icon: \"fas fa-chevron-left\",\n            title: \"msg#facet.previous\",\n            action: () => {\n                this.page--;\n            },\n            updater: (action: Action) => {\n                action.disabled = this.page <= 0;\n                action.hidden = this.maxPage === 0;\n            }\n        });\n        this.nextPage = new Action({\n            icon: \"fas fa-chevron-right\",\n            title: \"msg#facet.next\",\n            action: () => {\n                this.page++;\n            },\n            updater: (action: Action) => {\n                action.disabled = this.page >= this.maxPage;\n                action.hidden = this.maxPage === 0;\n            }\n        });\n    }\n\n    get maxPage(): number {\n        return Math.max(0, Math.ceil(this.recentQueriesService.recentqueries.length / this.maxQueries) - 1);\n    }\n\n    get startIndex(): number {\n        return this.page * this.maxQueries;\n    }\n\n    get endIndex(): number {\n        return (this.page+1) * this.maxQueries;\n    }\n\n    get actions(): Action[] {\n        this.previousPage.update();\n        this.nextPage.update();\n        return [this.previousPage, this.nextPage];\n    }\n\n    openRecentQuery(query: RecentQuery){\n        this.recentQueriesService.notifyOpenRecentQuery(query);\n        return true;\n    }\n\n    deleteQuery(query: RecentQuery, event: Event){\n        event.stopPropagation();\n        this.recentQueriesService.deleteRecentQuery(query);\n        this.page = Math.min(this.page, this.maxPage);\n        return false;\n    }\n\n    saveQuery(query: RecentQuery, event: Event){\n        event.stopPropagation();\n        const q = Utils.extend(this.searchService.makeQuery(), Utils.copy(query.query));\n        this.savedQueriesService.createSavedQueryModal(q);\n        return false;\n    }\n\n    getQueryParams(recentQuery: Query) {\n        const query = this.searchService.makeQuery(recentQuery);\n        const queryParams = query.toJsonForQueryString();\n        return {query: queryParams};\n    }\n\n    getRouterState(recentQuery: Query) {\n        return {\n            audit: {\n                type: RecentQueryEventType.Search,\n                detail: {\n                    recentquery: recentQuery.text\n                }\n            }\n        }\n    }\n}\n","<div class=\"list-group list-group-flush\">\n    <a *ngFor=\"let query of recentQueriesService.recentqueries | slice:startIndex:endIndex\" \n        class=\"recent-query-item list-group-item list-group-item-action d-flex align-items-center\"\n        [routerLink]=\"[searchRoute]\" [queryParams]=\"getQueryParams(query.query)\" [state]=\"getRouterState(query.query)\"\n        (click)=\"openRecentQuery(query)\">\n        <span class=\"query-text mr-auto text-truncate\" title=\"{{ query.query.text }}\">{{ query.query.text }}</span>\n        <span *ngIf=\"query.date\" class=\"query-date ml-2 text-muted small text-right\">{{ query.date | sqDate }}</span>\n        <i *ngIf=\"enableSave\" class=\"query-save ml-2 far fa-save\" [title]=\"'msg#recentQueries.save' | sqMessage\" (click)=\"saveQuery(query, $event)\"></i>\n        <i *ngIf=\"enableDelete\"class=\"query-delete ml-2 fas fa-times\" [title]=\"'msg#recentQueries.delete' | sqMessage\" (click)=\"deleteQuery(query, $event)\"></i>\n    </a>\n    <div *ngIf=\"recentQueriesService.recentqueries.length == 0\" class=\"list-group-item text-center text-muted font-italic small py-5\">\n        {{ 'msg#recentQueries.noRecentQuery' | sqMessage }}\n    </div>\n</div>","import { Component, Input } from \"@angular/core\";\r\nimport { TimelineSeries } from \"./timeline.component\";\r\n\r\nexport interface TimelineEventType {\r\n    name: string;\r\n    styles?: {[key:string]: any};\r\n}\r\n\r\n@Component({\r\n    selector: 'sq-timeline-legend',\r\n    template: `\r\n<div class=\"legend d-flex flex-{{orientation}}\" [ngStyle]=\"legendStyles\">\r\n\r\n    <div *ngFor=\"let timeline of data\" class=\"series mr-2\">\r\n        <svg width=\"20\" height=\"15\">\r\n            <rect class=\"area\" x=\"0\" [attr.y]=\"yOffset\" width=\"20\" [attr.height]=\"13-yOffset\" [ngStyle]=\"timeline.areaStyles\"></rect>\r\n            <line class=\"line\" x1=\"0\" [attr.y1]=\"yOffset\" x2=\"20\" [attr.y2]=\"yOffset\" [ngStyle]=\"timeline.lineStyles\"></line>\r\n        </svg>\r\n        <span class=\"name ml-1\">{{ timeline.name }}</span>\r\n    </div>\r\n\r\n    <div *ngFor=\"let event of events\" class=\"event mr-2\">\r\n        <svg width=\"20\" height=\"15\">\r\n            <path class=\"event\" [attr.d]=\"'M 10 1 l -7 11 l 14 0 z'\" [ngStyle]=\"event.styles\"></path>\r\n        </svg>\r\n        <span class=\"name ml-1\">{{ event.name }}</span>\r\n    </div>\r\n\r\n</div>\r\n    `,\r\n    styles: [`\r\n.series .area {\r\n    fill: lightblue;\r\n    opacity: 0.5;\r\n}\r\n\r\n.series .line {\r\n    stroke: rgb(132, 187, 206);\r\n    stroke-width: 2;\r\n    fill: none;\r\n}\r\n\r\n.event {\r\n    fill: #7c7c7c;\r\n}\r\n\r\n.name {\r\n    font-size: 12px;\r\n    color: darkgrey;\r\n}\r\n    `]\r\n})\r\nexport class TimelineLegendComponent {\r\n    @Input() data?: TimelineSeries[];\r\n    @Input() events?: TimelineEventType[];\r\n    @Input() orientation: \"row\"|\"column\" = \"row\";\r\n    @Input() yOffset: number = 3;\r\n    @Input() legendStyles?: {[key:string]: any};\r\n\r\n}","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable, of} from \"rxjs\";\nimport {map} from \"rxjs/operators\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Suggestion} from \"./suggest/suggestion\";\n\n/**\n * A service for calling the suggestquery web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class SuggestQueryWebService extends HttpService {\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    /**\n     * Gets suggestions for the passed text for a set of fields using the passed suggestquery web service\n     *\n     * @param suggestQuery The name of the suggestquery web service to use\n     * @param text The text to match\n     * @param query The name of the current query\n     * @param fields The fields for which to return suggestions\n     */\n    get(suggestQuery: string, text: string, query: string, fields?: string | string[]): Observable<Suggestion[]> {\n        if (!suggestQuery) {\n            return of([]);\n        }\n        else {\n            const observable = this.httpClient.post<{suggests: Suggestion[]}>(this.makeUrl(\"suggestquery\"), {\n                app: this.appName,\n                suggestQuery: suggestQuery,\n                text: text,\n                query: query,\n                kinds: fields\n            });\n            return observable.pipe(map(value => value.suggests));\n        }\n    }\n}","import {\n    Component,\n    Input,\n    OnInit,\n    OnDestroy,\n} from \"@angular/core\";\nimport { FormGroup, AbstractControl } from \"@angular/forms\";\nimport { Subscription } from \"rxjs\";\nimport { Utils } from \"@sinequa/core/base\";\nimport { CCColumn } from \"@sinequa/core/web-services\";\nimport { AppService } from \"@sinequa/core/app-utils\";\n\n@Component({\n    selector: \"sq-advanced-form-range\",\n    templateUrl: \"./advanced-form-range.html\"\n})\nexport class BsAdvancedFormRange implements OnInit, OnDestroy {\n    @Input() form: FormGroup;\n    @Input() field: string;\n    @Input() min: Date | number | string;\n    @Input() max: Date | number | string;\n    @Input() label: string;\n\n    fromName: string;\n    toName: string;\n    forName: string;\n    column: CCColumn | undefined;\n    minDate: Date | undefined;\n    maxDate: Date | undefined;\n    control: AbstractControl | null;\n    value: (string | number | Date)[];\n    isDate: boolean;\n    private _valueChangesSubscription: Subscription;\n\n    constructor(private appService: AppService) {}\n\n    ngOnInit() {\n        this.fromName = \"from_\" + this.field;\n        this.toName = \"to_\" + this.field;\n        this.forName = this.fromName;\n        this.column = this.appService.getColumn(this.field);\n        if(this.label === undefined) {\n            this.label = this.appService.getPluralLabel(this.field);\n        }\n        this.isDate = !!this.column && AppService.isDate(this.column);\n        if (this.isDate) {\n            this.minDate = Utils.isDate(this.min)\n                ? this.min\n                : undefined;\n            this.maxDate = Utils.isDate(this.max)\n                ? this.max\n                : undefined;\n        }\n        this.control = this.form.get(this.field);\n        if (this.control) {\n            this.value = this.control.value;\n            this._valueChangesSubscription = Utils.subscribe(\n                this.control.valueChanges,\n                (value) => {\n                    this.value = value;\n                }\n            );\n        }\n        else {\n            throw new Error(\"No form control named \"+this.field);\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._valueChangesSubscription) {\n            this._valueChangesSubscription.unsubscribe();\n        }\n    }\n\n    ensureValue(value: string): string | number | Date {\n        if (this.isDate) {\n            const value1 = Utils.toDate(value);\n            if (value1 !== undefined) {\n                return value1;\n            }\n        } else if (this.column && AppService.isNumber(this.column)) {\n            if (Utils.testFloat(value)) {\n                return Utils.toNumber(value);\n            }\n        }\n        return value;\n    }\n\n    updateFrom(from: string) {\n        this.value[0] = this.ensureValue(from);\n        if (this.control) {\n            this.control.markAsDirty();\n            this.control.setValue(this.value);\n        }\n    }\n\n    updateTo(to: string) {\n        this.value[1] = this.ensureValue(to);\n        if (this.control) {\n            this.control.markAsDirty();\n            this.control.setValue(this.value);\n        }\n    }\n}\n","<div class=\"form-group\" [formGroup]=\"form\">\n    <label for=\"{{forName}}\">{{label | sqMessage}}</label>\n    <div *ngIf=\"!isDate\"\n        class=\"sq-advanced-form-range form-row\"\n        sqAdvancedFormValidation\n        [field]=\"field\"\n        [validationForm]=\"form\"\n        [id]=\"field\">\n        <div class=\"col-auto d-flex flex-column\">\n            <input\n                type=\"text\"\n                autocomplete=\"off\"\n                spellcheck=\"off\"\n                class=\"form-control sq-range-from\"\n                [id]=\"fromName\"\n                [ngModel]=\"value[0]\"\n                (ngModelChange)=\"updateFrom($event)\"\n                [ngModelOptions]=\"{standalone: true}\"/>\n        </div>\n        <div class=\"col-auto sq-separator\">{{'msg#advanced.rangeSeparator' | sqMessage}}</div>\n        <div class=\"col-auto d-flex flex-column\">\n            <input\n                type=\"text\"\n                autocomplete=\"off\"\n                spellcheck=\"off\"\n                class=\"form-control sq-range-to\"\n                [id]=\"toName\"\n                [ngModel]=\"value[1]\"\n                (ngModelChange)=\"updateTo($event)\"\n                [ngModelOptions]=\"{standalone: true}\"/>\n        </div>\n    </div>\n    <sq-date-range-picker *ngIf=\"isDate\"\n        [options]=\"{name: field, system: false, closedRange: false, minDate: minDate, maxDate: maxDate}\"\n        [formControlName]=\"field\"\n        [id]=\"field\"\n        sqAdvancedFormValidation\n        [field]=\"field\"\n        [validationForm]=\"form\">\n    </sq-date-range-picker>\n</div>\n","import {Injectable, Inject} from \"@angular/core\";\nimport {HttpInterceptor, HttpRequest, HttpResponse, HttpHandler, HttpEvent} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {tap} from \"rxjs/operators\";\nimport {START_CONFIG, StartConfig} from \"@sinequa/core/web-services\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {NotificationsService, Notification, NotificationType} from \"./notifications.service\";\n\n/**\n * An `HttpInterceptor` to process notifications attached to the response body\n * in the `$notifications` member.\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class NotificationsInterceptor implements HttpInterceptor {\n    constructor(\n        @Inject(START_CONFIG) private startConfig: StartConfig,\n        private notificationsService: NotificationsService) {\n    }\n\n    protected shouldIntercept(url: string): boolean {\n        return Utils.startsWith(url, this.startConfig.apiPath!);\n    }\n\n    protected processNotifications(notifications: Notification[] | undefined) {\n        if (Utils.isArray(notifications)) {\n            for (const notification of notifications) {\n                let  type = notification.type;\n                if (Utils.isUndefined(type)) {\n                    type = NotificationType.Info;\n                }\n                const text = notification.text;\n                if (text) {\n                    const params = notification.params;\n                    const title = notification.title;\n                    let autoClose = notification.autoClose;\n                    if (Utils.isUndefined(autoClose)) {\n                        autoClose = (type === NotificationType.Success) || (type === NotificationType.Info);\n                    }\n                    this.notificationsService.notify(type, text, params, title, autoClose);\n                }\n            }\n        }\n    }\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        if (!this.shouldIntercept(request.url)) {\n            return next.handle(request);\n        }\n        return next.handle(request).pipe(\n            tap(event => {\n                if (event instanceof HttpResponse) {\n                    if (request.responseType === \"json\" && Utils.isObject(event.body)) {\n                        this.processNotifications(event.body.$notifications);\n                    }\n                }\n            }));\n   }\n}\n","import { Component, EventEmitter, Input, OnChanges, Output } from \"@angular/core\";\nimport { FormBuilder, FormControl, FormGroup } from \"@angular/forms\";\nimport { ValidationService } from \"@sinequa/core/validation\";\n\n@Component({\n    selector: 'sq-preview-page-form',\n    templateUrl: './preview-page-form.component.html'\n})\nexport class BsPreviewPageFormComponent implements OnChanges{\n    @Input() pageNumber?: number;\n    @Output() gotopage = new EventEmitter<number>();\n\n    form: FormGroup;\n    pageControl: FormControl;\n\n    constructor(\n        formBuilder: FormBuilder,\n        validationService: ValidationService\n    ) {\n        this.pageControl = new FormControl('', [validationService.integerValidator(), validationService.minValidator(1)]);\n        this.form = formBuilder.group({\n          page: this.pageControl\n        });\n    }\n\n    ngOnChanges() {\n        this.pageControl.setValue(this.pageNumber);\n    }\n\n    submit() {\n        const page = parseInt(this.pageControl.value, 10);\n        if(!isNaN(page) && page !== this.pageNumber) {\n            // remember the page number submitted\n            // this allow us to submit again the previous page \n            // when page not exists and/or an error is triggered\n            this.pageNumber = page;\n            this.gotopage.next(page);\n        }\n    }\n\n}","<form novalidate [formGroup]=\"form\" *ngIf=\"pageNumber\" class=\"mb-2\">\n    <div [sqValidation]=\"{form: form, controlName: 'page'}\" class=\"input-group mb-1\">\n        <div class=\"input-group-prepend\">\n            <label for=\"page-input\" class=\"input-group-text\">{{ 'msg#preview.gotopage' | sqMessage}}</label>\n        </div>\n        <input id=\"page-input\" type=\"text\" class=\"form-control\" placeholder=\"page\" formControlName=\"page\" autocomplete=\"off\" spellcheck=\"off\">\n        <div class=\"input-group-append\">\n            <button class=\"btn btn-primary\" type=\"submit\" (click)=\"submit()\" >\n                <i class=\"fas fa-fw fa-arrow-right\"></i>\n            </button>\n        </div>\n    </div>\n</form>","import {Directive, Input, Output, ElementRef, HostListener, OnInit, EventEmitter, OnDestroy, OnChanges, SimpleChanges, HostBinding} from \"@angular/core\";\nimport {Observable, Subscription} from \"rxjs\";\nimport {Utils, Keys} from \"@sinequa/core/base\";\nimport {AppService} from \"@sinequa/core/app-utils\";\nimport {SuggestService} from \"./suggest.service\";\nimport {UIService} from \"@sinequa/components/utils\";\n\n/**\n * Minimal interface for autocomplete items (note that the Suggestion\n * objects returned by the Suggestion service implement naturally this\n * interface)\n */\nexport interface AutocompleteItem {\n    display: string;\n    normalized?: string;\n    category: string;\n    label?: string;\n}\n\n/**\n * Interface required to be implemented by the dropdown components\n * binded to this autocomplete directive.\n * The component is responsible for displaying a list of items\n * and signaling back if a component was clicked. The component must\n * also manage navigation through the list (next/previous and selectedValue).\n */\nexport interface AutocompleteComponent {\n\n    /**\n     * Whether there are any item to display\n     */\n    hasItems: boolean;\n\n    /**\n     * Event emitter for clicks on an autocomplete item\n     */\n    clicked: EventEmitter<AutocompleteItem>;\n\n    /**\n     * Returns the currently selected item, if any\n     */\n    selectedValue: AutocompleteItem | undefined;\n\n    /**\n     * Update the data and state of this component\n     * @param active whether the component should be displayed\n     * @param items The list of items to display\n     */\n    update(active: boolean, items?: AutocompleteItem[]): void;\n\n    /**\n     * Select the next item in the list and returns it\n     */\n    selectNext(): AutocompleteItem | undefined;\n\n    /**\n     * Select the previous item in the list and returns it\n     */\n    selectPrevious(): AutocompleteItem | undefined;\n}\n\n/**\n * States in which the autocomplete component can be\n */\nexport enum AutocompleteState {\n    OFF = \"OFF\", // Autocomplete is turned off (via @Input())\n    INIT = \"INIT\", // Input is not focused, dropdown is closed\n    START = \"START\", // Input is focused, no text typed in, dropdown is closed\n    ACTIVE = \"ACTIVE\", // Input is focused, text is typed, suggests are being queried, dropdown is closed\n    OPENED = \"OPENED\", // Input is focused, text is typed, suggests are available, dropdown/autocomplete component is displayed\n    SELECTED = \"SELECTED\" // Input is focused, an input from the dropdown was selected\n}\n\n@Directive({\n    selector: \"[sqAutocomplete]\"\n})\nexport class Autocomplete implements OnInit, OnChanges, OnDestroy {\n\n    /** Reference to the AutocompleteComponent that displays the autocomplete items */\n    @Input() dropdown: AutocompleteComponent;\n\n    /** Whether the autocomplete should be active or not */\n    @Input() off: boolean;\n\n    /** Debounce delay between autocomplete queries */\n    @Input() suggestDelay: number = 200;\n\n    /** Name of the Suggest Query to be used */\n    @Input() suggestQuery: string;\n\n    /** Custom placeholder */\n    @Input() placeholder: string = '';\n\n    @HostBinding('attr.placeholder') _placeholder;\n\n    // Event emitters\n\n    @Output() stateChange = new EventEmitter<AutocompleteState>();\n    @Output() submit = new EventEmitter<void>();\n\n    private _state: AutocompleteState = AutocompleteState.INIT;\n\n    // The input HTML element to which this directive is attached\n    protected readonly inputElement: HTMLInputElement;\n\n\n    // Initialization\n\n    constructor(\n        elementRef: ElementRef,\n        protected suggestService: SuggestService,\n        protected appService: AppService,\n        protected uiService: UIService){\n\n        this.inputElement = elementRef.nativeElement;\n    }\n\n\n    /**\n     * On initialization, we listen to the autocomplete component for\n     * selection events\n     */\n    ngOnInit(){\n        this._dropdownSubscription = this.dropdown.clicked.subscribe(item => {\n            this.select(item, true);  // An item was selected from the autocomplete => take the value\n        });\n\n        this._placeholder = this.placeholder;\n        this.inputElement.focus();\n        this.start();\n    }\n\n    /**\n     * If the off input changes state, react accordingly\n     * @param changes\n     */\n    ngOnChanges(changes: SimpleChanges){\n        // Turn on the autocomplete\n        if(changes[\"off\"] && !this.off){\n            this.start();\n        }\n    }\n\n\n    protected _dropdownSubscription: Subscription;\n    /**\n     * Unsubscribe when destroying the component\n     */\n    ngOnDestroy(){\n        if(this._dropdownSubscription){\n            this._dropdownSubscription.unsubscribe();\n        }\n    }\n\n\n    // Getters and Setters\n\n    /**\n     * Return the current state of the autocomplete\n     */\n    public getState(): AutocompleteState {\n        return this._state;\n    }\n\n    /**\n     * Set the current state of the autocomplete\n     */\n    protected setState(state: AutocompleteState) {\n        if(this.off){\n            if(this._state !== AutocompleteState.OFF){\n                this._state = AutocompleteState.OFF;\n                this.stateChange.next(this.getState());\n            }\n            // ignore state change if Autocomplete is off\n        }\n        else if(!!state && this._state !== state) {\n            this._state = state;\n            //console.log(\"STATE: \", this._state);\n            this.stateChange.next(this.getState());\n        }\n    }\n\n    /**\n     * Get the current text value of the HTML <input>\n     * to which this directive is attached\n     */\n    protected getInputValue() : string {\n        return this.inputElement.value;\n    }\n\n    /**\n     * Set the current text value of the HTML <input>\n     * to which this directive is attached\n     */\n    protected setInputValue(value: string) {\n        // Using setCaret() allows to properly update the underlying form\n        this.uiService.setCaret(this.inputElement, 0, -1, value); // 0, -1 erases the current value and writes the new one\n    }\n\n    /**\n     * Sets the content of the <input> based on the given\n     * Autocomplete Item (various implementations are possible,\n     * depending on the item content and nature).\n     * This would be the right method to override to implement\n     * fielded search autocomplete.\n     * @returns true if this autocomplete item should be searched\n     */\n    protected setAutocompleteItem(item: AutocompleteItem): boolean {\n        if(item) {\n            this.setInputValue(item.display);\n            return true;\n        }\n        return false;\n    }\n\n\n    // Methods triggering state changes\n\n    /**\n     * INIT state (Input is not focused, dropdown is closed)\n     */\n    protected init(): void {\n        this.setState(AutocompleteState.INIT);\n        this.dropdown.update(false);    // If the dropdown was active\n    }\n\n    /**\n     * START state (Input is focused, no text typed in, dropdown is closed)\n     */\n    protected start(): void {\n        this.setState(AutocompleteState.START);\n        this.dropdown.update(false);    // If the dropdown was active\n    }\n\n    /**\n     * START state and if the <input> has content, immediately switch to ACTIVE\n     */\n    protected startOrActive(): void {\n        if(this.getState()!== AutocompleteState.ACTIVE && this.getState()!== AutocompleteState.OPENED){ // Avoid flickering\n            this.start();\n            if(!!this.getInputValue()){\n                this.active();\n            }\n        }\n    }\n\n    /**\n     * ACTIVE state (Input is focused, text is typed, suggests are being queried, dropdown is closed)\n     */\n    protected active(): void {\n        if(this.getState() === AutocompleteState.START || this.getState() === AutocompleteState.ACTIVE || this.getState() === AutocompleteState.OPENED){\n            this.setState(AutocompleteState.ACTIVE);\n            this.dropdown.update(false);    // If the dropdown was active\n            this.suggest();\n        }\n    }\n\n    /**\n     * Select the given autocomplete suggestion for search\n     * @param submit if, true also trigger a submit\n     * @param item a specific item to submit\n     */\n    protected select(item: AutocompleteItem, submit?: boolean): void {\n        this.setState(AutocompleteState.SELECTED); // Change state BEFORE setting input value, so the event is correctly processed\n        const searchable = this.setAutocompleteItem(item);\n        this.dropdown.update(false);    // Close dropdown\n\n        if(submit && searchable) this.submit.next();\n    }\n\n    /**\n     * Switch to OPENED state (from ACTIVE only)\n     */\n    protected open(): void {\n        if(this.getState() === AutocompleteState.ACTIVE){\n            this.setState(AutocompleteState.OPENED);\n        }\n    }\n\n    /**\n     * Request suggestions from the server, and update the dropdown contents\n     * and autocomplete state asynchronously.\n     * Override this method for a synchronous implementation.\n     */\n    protected suggest() {\n        this.debounceSuggest();\n    }\n\n    /**\n     * Actually makes the API call to the suggestService to retrieve suggestions\n     * and process them.\n     */\n    protected getSuggests() {\n        const value = this.getInputValue();\n        if(value) { // If there is text, make a call to the suggest API\n            this.processSuggests(\n                this.getSuggestsObs(value)\n            );\n        }\n        else {  // If empty input, restart autocomplete\n            this.start();\n        }\n    }\n\n    /**\n     * Returns an observable of Suggestions, given some input text\n     * @param value input text for which to return suggestions\n     */\n    protected getSuggestsObs(value: string, fields?: string[]): Observable<AutocompleteItem[]> {\n        return this.suggestService.get(this.suggestQuery, value, fields);\n    }\n\n    /**\n     * Process suggestions obtained (from whatever mean):\n     * - If data available, filter out fields\n     * - update the dropdown content\n     * - Switch between OPEN and ACTIVE states\n     * - Use changeDetectorRef to update display\n     * @param obs an observable of AutocompleteItem suggestions\n     */\n    protected processSuggests(obs: Observable<AutocompleteItem[]>){\n        obs.subscribe(\n            suggests => {\n                if(this.getState() === AutocompleteState.ACTIVE || this.getState() === AutocompleteState.OPENED){\n                    this.dropdown.update(true, suggests\n                        .filter(item => item.category !== \"$field$\")  // Filter out fields\n                        .map(item => {\n                            if(!item.label){\n                                item.label = this.appService.getLabel(item.category);\n                            }\n                            return item;\n                        }));\n                }\n            },\n            err => {\n                this.dropdown.update(false);\n            },\n            () => {\n                if(this.dropdown.hasItems && this.getState() === AutocompleteState.ACTIVE){\n                    this.open();    // Switch from ACTIVE to OPENED (if not already)\n                }\n                else if(!this.dropdown.hasItems && this.getState() === AutocompleteState.OPENED){   // No data\n                    this.active();  // Switch from OPENED to ACTIVE (if not already)\n                }\n            });\n    }\n\n    /**\n     * Use the suggest service to retrieve suggestions given the input text.\n     * The suggest (autocomplete) query is debounded to avoid flooding the server.\n     */\n    private readonly debounceSuggest: () => void = Utils.debounce(() => {\n        this.getSuggests();\n    }, this.suggestDelay);\n\n\n    /**\n     * Returns the caret position within the input\n     */\n    protected getInputPosition(): number {\n        // Come back before trailing spaces so the preceding value is still seen as the input value\n        // (needed for ExprParser to stop autocomplete being cancelled on entering trailing spaces)\n        const position = this.uiService.getCaret(this.inputElement).start;\n        const length = Utils.len(Utils.trimEnd(this.getInputValue()));\n        return Math.min(position, length);\n    }\n\n    /**\n     * The following are event listeners applied to the <input> host component\n     * onto which this directive is applied.\n     * The events affect the state of the autocomplete, which triggers\n     * various actions (call to suggest API, etc.).\n     */\n\n    /**\n     * Listens to click events on the <input> host\n     */\n    @HostListener(\"click\") click() {\n        //console.log(\"input clicked\");\n        this.startOrActive();\n    }\n\n    /**\n     * Listens to touchstart events (mobile clicks) on the <input> host\n     */\n    @HostListener(\"touchstart\") touchstart() {\n        //console.log(\"input touchstart\");\n        this.startOrActive();\n    }\n\n    /**\n     * Listens to focus events on the <input> host\n     */\n    @HostListener(\"focus\") focus() {\n        //console.log(\"input focus gained\");\n        this.start();\n    }\n\n    /**\n     * Listens to blur events (out of focus) on the <input> host\n     */\n    @HostListener(\"blur\", [\"$event\"]) blur(event: FocusEvent) {\n        //console.log(\"input focus lost\");\n        this.init();\n    }\n\n    /**\n     * Listen to any change in the <input> content and react\n     * according to the current state of the autocomplete\n     * @param event\n     */\n    @HostListener(\"input\", [\"$event\"]) inputChanged(event: Event) {\n        //console.log(\"input value changed\");\n        switch(this.getState()){\n            case AutocompleteState.OPENED:\n                this.suggest(); // Just request more data, but no state change\n                break;\n            case AutocompleteState.START:\n            case AutocompleteState.ACTIVE:\n                this.active(); // get more data, and change state if not already ACTIVE\n                break;\n            case AutocompleteState.SELECTED:\n                this.start(); // The model changed because we selected a value ==> we restart in case the user keeps typing\n                break;\n            case AutocompleteState.INIT:\n                console.error(\"Should not be in INIT state if the form changes\");\n                break;\n        }\n    }\n\n    /**\n     * Listen to user's keyboard actions in the <input>, in order to navigate\n     * and select the autocomplete suggestions.\n     * @param event the keyboard\n     */\n    @HostListener(\"keydown\", [\"$event\"]) keydown(event: KeyboardEvent) {\n        // Navigation in the opened dropdown\n        if (this.getState() === AutocompleteState.OPENED) {\n            switch (event.keyCode) {\n                case Keys.up:\n                    this.dropdown.selectPrevious();\n                    return false; // prevent default\n                case Keys.down:\n                    this.dropdown.selectNext();\n                    return false; // prevent default\n                case Keys.tab:\n                    if(!!this.dropdown.selectedValue){\n                        this.select(this.dropdown.selectedValue);\n                    } else {\n                        this.dropdown.selectNext();\n                    }\n                    return false; // prevent default (change focus)\n                case Keys.esc:\n                    this.start(); // Just restart the autocomplete\n                    //event.stopPropagation(); // needed?\n                    return false; // prevent default\n                case Keys.enter:\n                    if(!!this.dropdown.selectedValue){\n                        this.select(this.dropdown.selectedValue, true);\n                        //event.stopPropagation(); // needed?\n                        return false; // prevent default action (auto submit)\n                    }\n            }\n        }\n\n        // If a search was triggered, restart the autocomplete\n        if(event.keyCode === Keys.enter) {\n            this.submit.next();\n            this.start();\n        }\n        return undefined;\n    }\n}\n","import {\n    Directive,\n    Input,\n    Output,\n    EventEmitter,\n    HostListener,\n} from \"@angular/core\";\nimport { AutocompleteItem } from \"@sinequa/components/autocomplete\";\nimport { BsAdvancedFormAutocomplete } from \"../advanced-form-autocomplete.directive\";\nimport { Keys } from \"@sinequa/core/base\";\n\n@Directive({\n    selector: \"[sqAdvancedFormAutocompleteMultiInput]\",\n})\nexport class BsAdvancedFormAutocompleteMultiInput extends BsAdvancedFormAutocomplete {\n    /** Event synchronizing the list of search terms in the parent component */\n    @Output() itemsUpdate = new EventEmitter<AutocompleteItem[]>();\n\n    /** Stores the selected search terms selected via Tab */\n    @Input() items: AutocompleteItem[] = [];\n\n    /**\n     * The setAutocompleteItem() method from the original directive is overriden to\n     * Sets the content of the <input> based on the given\n     * Autocomplete Item.\n     * @returns false since we don't need trigger search at this point of time\n     */\n    protected setAutocompleteItem(item: AutocompleteItem): boolean {\n        if (item) {\n            // Store the autocomplete items that will be used to create a selection\n            this.items.push(item);\n            this.itemsUpdate.next(this.items);\n            this.setInputValue(\"\");\n        }\n        return false;\n    }\n\n    /**\n     * Listen to user's keyboard actions in the <input>, in order to navigate\n     * and select the autocomplete suggestions.\n     * Overrides the parent keydown method, adds the management of the backspace key\n     * to remove items, enhance the enter key to support adding new items.\n     * @param event the keyboard\n     */\n    keydown(event: KeyboardEvent) {\n        const keydown = super.keydown(event);\n\n        if (keydown === undefined) {\n            /** We can remove selections by typing <backspace> when the input is empty */\n            if (event.keyCode === Keys.backspace) {\n                if (this.getInputValue() === \"\") {\n                    this.items.pop();\n                    this.itemsUpdate.next(this.items);\n                }\n            }\n            /** Allow the selection one of new item */\n            if (event.keyCode === Keys.enter) {\n                this._manageSetAutocompleteItem();\n            }\n        }\n        return keydown;\n    }\n\n    /**\n     * Listens to blur events (out of focus) on the <input> host and overrides the parent blur events\n     */\n    @HostListener(\"blur\", [\"$event\"]) blur(event: FocusEvent) {\n        this._manageSetAutocompleteItem();\n        this.init();\n    }\n\n    private _manageSetAutocompleteItem(): void {\n        /** Always consider if there is text in the <input> and that it is not yet added in items  */\n        if (!!this.getInputValue() && this.getInputValue() !== \"\") {\n            this.setAutocompleteItem({\n                display: this.getInputValue(),\n                normalized: this.getInputValue(),\n                category: \"\",\n            });\n        }\n    }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { AppService } from \"@sinequa/core/app-utils\";\nimport { Locale, IntlService } from \"@sinequa/core/intl\";\nimport { MapOf } from \"@sinequa/core/base\";\n\nimport { JsonInfo } from \"../edit-user-settings/edit-user-settings\";\n\n\n/**\n * Editor for User settings.\n * <p>\n * This component can add form control for modifiable settings which are not shown by JsonEditor component.\n *\n */\n@Component({\n    selector: 'sq-user-settings-editor',\n    templateUrl: './user-settings-editor.html'\n})\nexport class BsUserSettingsEditor implements OnInit {\n\n    @Input() public form: FormGroup;\n    @Input() public model: MapOf<any>;\n    @Input() public layout: MapOf<JsonInfo.Entry>;\n    @Input() showUILanguageSelector: boolean;\n    public locales: Locale[];\n\n    constructor(\n        private appService: AppService,\n        private intlService: IntlService,\n        private formBuilder: FormBuilder\n    ) {\n    }\n\n    ngOnInit(): void {\n        if (!this.appService.app) {\n            return; // logout\n        }\n\n        // Locale is treated separately because it is not really stored in the user settings.\n        this.locales = [];\n        if (this.intlService.locales.length > 0) {\n            for (const locale of this.intlService.locales) {\n                this.locales.push(locale);\n            }\n        }\n\n        this.model['language'] = this.intlService.currentLocale.name;\n        this.form.addControl('selectedLocale', this.formBuilder.control(this.intlService.currentLocale.name));\n/*\n        if (this.config && this.config.items) {\n            this.config.items.forEach(item => {\n                if (item.active && JsonEditor.isInputComponent(item)) {\n                    const entry = <JsonInfo.Entry>item;\n                    const paths = Utils.split(entry.path, '.');\n                    const pathLength = paths.length;\n                    const currentValue = this.userSettingsService.readUserSetting(paths)\n                    const entryKey = paths[pathLength - 1];\n\n                    // Add model value\n                    this.setModelValue(paths, currentValue);\n\n                    // Add layout\n                    this.layout[entryKey] = entry;\n\n                    // Add form control\n                    this.form.addControl(\n                        entryKey,\n                        this.formBuilder.control(currentValue, Validators.compose(JsonEditor.makeValidatorFunctions(entry, this.validationService))));\n                }\n            });\n        }\n        */\n    }\n\n    /**\n     * Sets the current value of an entry to our JSON model.\n     *\n     * @param paths The paths to the entry in the JSON model.\n     * @param value The value to set.\n     */\n    /*private setModelValue(paths: string[], value: any): void {\n        const nbPaths = paths.length;\n        let json = this.model;\n        if (nbPaths > 1) {\n            for (let i = 0; i < nbPaths - 1; ++i) {\n                const path = paths[i];\n                if (!json[path]) {\n                    json[path] = {};\n                }\n                json = json[path];\n            }\n        }\n\n        const key = paths[nbPaths - 1];\n        json[key] = value;\n    }*/\n\n    /**\n     * Indicates if the UI language selector is shown in the User settings editor dialog.\n     * By default, returns true.\n     *\n     * @returns true if the UI language selector is shown in the User settings editor dialog.\n     */\n    public showLanguageSelector(): boolean {\n        return this.showUILanguageSelector;\n    }\n}\n","<div [formGroup]=\"form\">\n    <div class=\"form-group\" style=\"margin-bottom: 0\" [hidden]=\"!showLanguageSelector()\">\n        <label for=\"locales\">{{'msg#editUserSettings.language' | sqMessage}}</label>\n        <select [sqValidation]=\"form\" class=\"form-control custom-select\" formControlName=\"selectedLocale\" id=\"selectedLocale\" sqAutofocus>\n            <option [value]=\"locale.name\" *ngFor=\"let locale of locales\">{{locale.display | sqMessage}}</option>\n        </select>\n    </div>\n    <!--sq-json-editor [form]=\"form\" [model]=\"model\" [layout]=\"layout\" [config]=\"config\"></sq-json-editor-->\n</div>\n","export * from \"./confirm.component\";\nexport * from \"./prompt.component\";\nexport * from \"./modal.module\";\nexport * from \"./modal.service\";\nexport * from \"./modal-ref\";\nexport * from \"./messages/index\";","import { Utils } from '@sinequa/core/base';\nimport { Record } from '@sinequa/core/web-services';\nimport { Action } from '@sinequa/components/action';\nimport { Node, NetworkDataset, NodeType, EdgeType, NetworkContext } from '../network-models';\nimport { BaseProvider } from './base-provider';\n\n/**\n * Extension of the Node interface, to include the Record object\n * from which the node is generated\n */\nexport interface RecordNode extends Node {\n    record: Record;\n}\n\n\n/**\n * An extension of the EdgeType interface to include properties specific to\n * structural edges (edge between a record and its metadata).\n * \n * About trigger/display: At the moment, the Record provider always adds ALL nodes and edges\n * to the dataset, but potentially with a visibility set to false. Some of the settings are\n * not compatible with each other, and some take precedence over the others:\n * - display=existingnodes takes precedence over other settings, as it is implemented as\n * a post-processing of the dataset (in onDatasetsMerged)\n * - trigger=onclick or manual take precedence over the other settings, as they set the\n * visibility to false by false, until the user performs an action\n * - trigger=oninsert is compatible with the other display settings\n */\nexport interface StructuralEdgeType extends EdgeType {\n    /** Name of the field in the record */\n    field: string;\n    /** count limits the number of values displayed and allows for pagination. Use 0 for unlimited values */\n    count?: number;\n    /** Defines when the edge should be displayed */\n    trigger: StructuralTriggerType;\n    /** showall: display all values from the field / paginate: display all value with pagination / existingnodes: only link to existing nodes / manual: only show if manual action (activated programmatically) */\n    display: StructuralDisplayType;\n    /** A function to parse metadata from a record node in a custom way */\n    parse?: (value: any, record: Record, type: StructuralEdgeType) => CustomData;\n}\n\nexport type StructuralTriggerType = \"oninsert\" | \"onclick\" | \"manual\";\nexport type StructuralDisplayType = \"all\" | \"paginate\" | \"existingnodes\" | ((node: Node, recordNode: RecordNode, index: number) => boolean);\n\n/**\n * Data structure returned by the optional parse() function of a structural edge\n * type. Contains the parsed values of a property that can be turned into one or\n * multiple nodes and edges.\n */\nexport interface CustomData {\n    values: string[]; // eg. LARRY PAGE, GOOGLE\n    displays: string[]; // eg. Larry Page, Google\n    relations?: string[]; // eg. Works At\n    directed?: boolean[]; // eg. true\n    fieldValue?: string; // A value on which to filter the data\n}\n\n/**\n * Tests whether the given edge type is a structural edge type\n * @param et an edge type\n */\nexport function isStructuralEdgeType(et: EdgeType): et is StructuralEdgeType {\n    return !!(et as StructuralEdgeType).field;\n}\n\n\n/**\n * A network provider generating nodes from records.\n * Additionally, the provider can generate the \"structural edges\" of that\n * node. Structural edges are edges between a record and the fields of\n * that record (eg. the wikipedia page of Microsoft is a record that probably\n * contains the fields \"Microsoft\" and \"Bill Gates\").\n */\nexport class RecordsProvider extends BaseProvider {\n\n    constructor(\n        public name = \"Documents\",\n        protected nodeType: NodeType,\n        protected edgeTypes: StructuralEdgeType[],\n        protected records: Record[],\n        protected hideRecordNode = false\n    ){\n        super(name);\n    }\n\n    /**\n     * Clears the dataset and generates new record nodes\n     * @param records the list of records of this provider\n     */\n    protected updateDataset(records?: Record[]) {\n        this.dataset.clear();\n        if(!this.active || !records || records.length === 0) {\n            return; \n        }\n        this.addRecordNodes(records);\n    }\n    \n    // Record nodes\n\n    /**\n     * Generates the nodes for a list of records, including their structural\n     * edges, and adds them to the dataset.\n     * Returns the list of record nodes.\n     * @param records \n     */\n    protected addRecordNodes(records: Record[]): RecordNode[] {\n        return records.map(record => {\n            let node = this.dataset.getNode(this.getNodeId(this.nodeType, record.id));\n            if(!node) {\n                node = this.createNode(this.nodeType, record.id, record.title, !this.hideRecordNode, {record});\n                this.dataset.addNodes(node);\n                this.edgeTypes.forEach(type => {\n                    this.addStructuralEdges(node as RecordNode, type);\n                });\n            }\n            return node as RecordNode;\n        });\n    }\n\n    \n    // Structural edges\n\n    /**\n     * Generates the metadata nodes and structural edges from the given node,\n     * and merge them into the dataset.\n     * This function will automatically parse the metadata contained in the record,\n     * but it is possible to manage custom types of metadata by providing a\n     * custom parse() function via the structural edge type.\n     * @param node The record node\n     * @param type The edge type for which we want to create edges\n     */\n    protected addStructuralEdges(node: RecordNode, type: StructuralEdgeType) {\n\n        if(type.nodeTypes[0] !== this.nodeType){\n            throw new Error(`Inconsistent node type: '${type.nodeTypes[0].name}' instead of '${this.nodeType.name}'`);\n        }\n        \n        const recorddata = node.record[type.field];\n\n        if(recorddata === undefined){\n            return;\n        }\n\n        // Custom parse for mono or multi valued data\n        if(type.parse) {\n            if(Utils.isArray(recorddata)) {\n                recorddata.forEach((value,i) => { \n                    this.addCustomEdge(node, type, type.parse!(value, node.record, type));\n                });\n            }\n            else {\n                this.addCustomEdge(node, type, type.parse!(recorddata, node.record, type));\n            }\n        }\n        // Default handling for standard Sinequa Metadata\n        else {\n            const data = new NetworkDataset();\n            data.addNodes(node);\n    \n            // sourcestr\n            if(Utils.isString(recorddata)) {\n                this.addStructuralEdge(data, node, type, recorddata, recorddata, 0);\n            }\n            else if(Utils.isArray(recorddata)) {\n                recorddata.forEach((value,i) => {\n                    // sourcecsv\n                    if(Utils.isString(value)) {\n                        this.addStructuralEdge(data, node, type, value, value, i);\n                    }\n                    // entity\n                    else if(value[\"value\"]) {\n                        this.addStructuralEdge(data, node, type, value[\"value\"], value[\"display\"] || value[\"value\"], i);\n                    }\n                });\n            }\n    \n            this.dataset.merge(data);\n        }\n    }\n\n    /**\n     * Add a structural edge to a record node and adds that edge\n     * (and corresponding metadata node) to the given dataset.\n     * @param dataset The target dataset\n     * @param recordNode The record node\n     * @param type The edge type of the structural edge\n     * @param value The \"value\" property of the metadata node\n     * @param display The \"display\" property of the metadata node\n     * @param index The index of the metadata within the record, which may influence its visibility when using display=paginate\n     */\n    protected addStructuralEdge(dataset: NetworkDataset, recordNode: RecordNode, type: StructuralEdgeType, value: string, display: string, index: number) {\n        // Create the metadata node\n        const node = this.createNode(type.nodeTypes[1], value, display, true);\n        // Sets its visibility\n        node.visible = type.trigger === \"oninsert\" && this.isEdgeVisible(type, node, recordNode, index);\n        if(recordNode.id !== node.id){ // Special case of hybrid nodes, where the recordNode might contain itself...!\n            if(!dataset.hasNode(node.id)) { // Duplicate nodes/edges are possible when the same node type is present in multiple fields of a record (eg. \"email\" in msgfrom and msgto)\n                dataset.addNodes(node);\n            }\n            const edge = this.createEdge(type, recordNode, node, value, node.visible, {record: recordNode.record});\n            if(!dataset.hasEdge(edge.id)) {\n                dataset.addEdges(edge);\n            }\n        }\n    }\n\n    /**\n     * Add a custom structural edge to a record node and merges that edge\n     * (and corresponding metadata node) into the global dataset.\n     * @param recordNode The record node\n     * @param type The edge type of the structural edge\n     * @param data A CustomData object containing the properties of the metadata nodes we want to created\n     */\n    protected addCustomEdge(recordNode: RecordNode, type: StructuralEdgeType, data: CustomData) {\n        if(type.nodeTypes.length !== data.values.length + 1) {\n            throw new Error(`Wrong number of values for this custom edge ${type.nodeTypes.length}, ${data.values.length}`);\n        }\n        // Create a dataset only for this data, to avoid duplicate conflicts\n        const dataset = new NetworkDataset();\n        dataset.addNodes(recordNode);\n        // For each value contained in \"data\", create a node, and edges in between them (in addition to the edges between the record and each metadata node)\n        let lastNode: Node;\n        for(let i=0; i<data.values.length; i++){\n            const node = this.createNode(type.nodeTypes[i+1], data.values[i], data.displays[i], true);\n            dataset.addNodes(node);\n            // Add a structural edge from the record node to the new node\n            dataset.addEdges(this.createEdge(type, recordNode, node, data.fieldValue, node.visible, {record: recordNode.record}));\n            // If there is more than one node in the custom data, potentially add relations between them (note that the relation edge share the same type as the structural edge)\n            if(i > 0){\n                const relation = data.relations? data.relations[i-1] : undefined;\n                const directed = data.directed? data.directed[i-1] : false;\n                dataset.addEdges(this.createEdge(type, lastNode!, node, data.fieldValue, true, {}, 1, directed, relation));\n            }\n            lastNode = node;\n        }\n        this.dataset.merge(dataset);\n    }\n\n    /**\n     * Returns the visibility of a structural edge, depending on the type.display property\n     * @param type The structural edge type\n     * @param node The metadata node of this edge\n     * @param recordNode The record node of this edge\n     * @param index The index of the metadata in the list of metadata of the record\n     */\n    protected isEdgeVisible(type: StructuralEdgeType, node: Node, recordNode: RecordNode, index: number): boolean {\n        if(type.display === \"all\") {\n            return true;\n        }\n        else if(type.display === \"existingnodes\") {\n            return false;\n        }\n        else if(type.display === \"paginate\") {\n            return index < (type.count || 10);\n        }\n        else {\n            return type.display(node, recordNode, index);\n        }\n    }\n    \n\n\n    // NetworkProvider interface\n\n    getData(context: NetworkContext) {\n        this.context = context;\n        // Plain records mode (may be none)\n        this.updateDataset(this.records);\n        this.provider.next(this.dataset);\n    }\n\n    /**\n     * This function adjusts the visibility of nodes for the visibility\n     * type \"existingnode\", so that nodes with only one neighbor (post-merge)\n     * are collapsed.\n     * @param dataset The dataset resulting of the merge of all the datasets\n     */\n    onDatasetsMerged(dataset: NetworkDataset) {\n        // Once the datasets are merged, we can update the visibility of nodes that should be shown only if they have more than one neighbor\n        dataset.getNodes()\n            .filter(node => node.type === this.nodeType)\n            .forEach(node => {\n                dataset.getAdjacentEdges(node.id)\n                    .filter(edge => (edge.type as StructuralEdgeType).display === 'existingnodes')\n                    .forEach(edge => {\n                        const neighbor = dataset.getNode(node.id === edge.to ? edge.from : edge.to);\n                        if(!neighbor) {\n                            throw new Error(`Missing node from edge ${edge.id}`);\n                        }\n                        const neighborsneighbors = dataset.getAdjacentEdges(neighbor.id);\n                        if(neighborsneighbors.length > 1) {\n                            neighbor.visible = true;\n                            edge.visible = true;\n                        }\n                    });\n            });\n    }\n\n    /**\n     * Adjust visibility of nodes and edges, for structural edges with\n     * type.trigger = onclick. These nodes will only be shown once their\n     * record node is clicked on.\n     * @param node A node that was clicked\n     */\n    onNodeClicked(node?: Node) {\n        if(this.active && node && node.type === this.nodeType) { // Note: we cannot test the provider property, since this node might have been merged with one from a different provider. However the node type should be a unique instance\n            let update = false;\n            this.dataset.getAdjacentEdges(node.id)\n                .filter(edge => edge.type['trigger'] === 'onclick')\n                .forEach(edge => {\n                    const neighbor = this.dataset.getNode(node.id === edge.to ? edge.from : edge.to);\n                    if(!neighbor) {\n                        throw new Error(`Missing node from edge ${edge.id}`);\n                    }\n                    if(!neighbor.visible || !edge.visible) {\n                        edge.visible = true;\n                        neighbor.visible = true;\n                        update = true;\n                    }\n                    // TODO \"propagate\" visibility (ie. if 2 nodes are visible but an edge in between is invisible, make it visible)\n                });\n            if(update) {\n                this.provider.next(this.dataset);\n            }\n        }\n    }\n\n    getProviderActions(): Action[] {\n        return super.getProviderActions();\n    }\n\n    /**\n     * Creates actions for expanding and/or collapsing a record node that was clicked.\n     * expanding and collapsing will act on the visibility of the structural edges\n     * attached to this node.\n     * Both actions might be displayed at the same time, if the node is in an intermediate\n     * state.\n     * @param node \n     */\n    getNodeActions(node: Node): Action[] {\n        const actions = super.getNodeActions(node);\n        \n        // Actions for exanding / collapsing a record node\n        if(this.active && node.type === this.nodeType && this.edgeTypes.length > 0) {\n            let hasExpandedEdge = false;\n            let hasCollapsedEdge = false;\n            this.dataset.getAdjacentEdges(node.id).forEach(e => {\n                hasCollapsedEdge = hasCollapsedEdge || !e.visible;\n                hasExpandedEdge = hasExpandedEdge || e.visible;\n            });\n\n            if(hasCollapsedEdge) {\n                actions.push(new Action({\n                    icon: \"fas fa-expand-arrows-alt\",\n                    title: \"msg#network.actions.expandMeta\",\n                    action: () => {\n                        let update = false;\n                        this.dataset.getAdjacentEdges(node.id)\n                            .forEach(edge => {\n                                const neighbor = this.dataset.getNode(node.id === edge.to ? edge.from : edge.to);\n                                if(!neighbor) {\n                                    throw new Error(`Missing node from edge ${edge.id}`);\n                                }\n                                if(!neighbor.visible || !edge.visible) {\n                                    edge.visible = true;\n                                    neighbor.visible = true;\n                                    update = true;\n                                }\n                                // TODO \"propagate\" visibility (ie. if 2 nodes are visible but an edge in between is invisible, make it visible)\n                            });\n                        if(update) {\n                            this.provider.next(this.dataset);\n                        }\n                    }\n                }));\n            }\n            \n            if(hasExpandedEdge) {\n                actions.push(new Action({\n                    icon: \"fas fa-compress-arrows-alt\",\n                    title: \"msg#network.actions.collapseMeta\",\n                    action: () => {\n                        let update = false;\n                        this.dataset.getAdjacentEdges(node.id)\n                            .forEach(edge => {\n                                const neighbor = this.dataset.getNode(node.id === edge.to ? edge.from : edge.to);\n                                if(!neighbor) {\n                                    throw new Error(`Missing node from edge ${edge.id}`);\n                                }\n                                if((neighbor.visible || edge.visible) && !(neighbor as RecordNode).record) { // Prevent collapsing links between 2 record nodes (alternatively, we could count the number of neighbors of the neighbors, and close only the isoltated ones)\n                                    edge.visible = false;\n                                    neighbor.visible = false;\n                                    update = true;\n                                }\n                            });\n                        if(update) {\n                            this.provider.next(this.dataset);\n                        }\n                    }\n                }));\n            }\n        }\n        return actions;\n    }\n\n}\n    ","export default {\n    \"googlemaps\": {\n        \"filterArea\": \"Suchen Sie in diesem Bereich nach Dokumenten\"\n    },\n};\n","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable, throwError} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils, FieldValue} from \"@sinequa/core/base\";\nimport {IQuery} from \"./query/query\";\nimport {AuditEvents} from \"./audit.web.service\";\nimport {CCColumn, SpellingCorrectionMode} from \"./config/ccapp\";\n\n/**\n * Describes the results of a call to the query web service\n */\nexport interface Results {\n    /**\n     * A unique identifier for this set of results - typically used for auditing\n     */\n    id: string;\n    /**\n     * The sql queries that were executed on the server to produce these results\n     */\n    sql: string[];\n    /**\n     * The page number of these results\n     */\n    page: number;\n    /**\n     * The page size or number of document per page\n     */\n    pageSize: number;\n    /**\n     * The number of document results for the query.\n     */\n    rowCount: number;\n    /**\n     * The number of document results for the query. If tab search is active and the `CCTabSearch.totalIsSumOfTabTotals` option is set then\n     * the total of counts of all the tabs will be returned. Otherwise this returns the same value as `rowCount`.\n     */\n    totalRowCount: number;\n    /**\n     * Returns the number of documents included in these results, as reported by the engine. It will have the same value as `records.length`.\n     */\n    cursorRowCount: number;\n    /**\n     * The number of attributes in these results\n     */\n    attributeCount: number;\n    /**\n     * The number of columns in these results\n     */\n    columnCount: number;\n    /**\n     * The name of currently selected tab. See {@link CCTab}\n     */\n    tab: string;\n    /**\n     * Information on the tabs for these results. See {@link CCTabSearch}\n     */\n    tabs: Tab[];\n    /**\n     * The name of the currently selected scope. See {@link CCScope}\n     */\n    scope: string;\n    /**\n     * The name of the currently selected sorting choice. See {@link CCSortingChoice}\n     */\n    sort: string;\n    /**\n     * Details of the \"did you mean\" state for these results\n     */\n    didYouMean: DidYouMean;\n    /**\n     * The aggregation results\n     */\n    aggregations: Aggregation[];\n    /**\n     * The attributes for these results\n     */\n    attributes: Attributes;\n    /**\n     * Any query intents associated with these results\n     */\n    queryIntents: QueryIntent[];\n    /**\n     * An analysis of the query associated with these resullts\n     */\n    queryAnalysis: QueryAnalysis;\n    /**\n     * The document records\n     */\n    records: Record[];\n    /**\n     * A hash of the associated results for use with RFM (relevance feedback model) functionality\n     */\n    rfmQueryHash: string;\n    /**\n     * The name of the {@link IQuery} that produced these results\n     */\n    queryName: string;\n    /**\n     * SQL statements executed by the query web service\n     */\n    statements: string[];\n}\n\n/**\n * Describes the results for a particular tab\n */\nexport interface Tab {\n    /**\n     * The name of the tab\n     */\n    name: string;\n    /**\n     * The display value of the tab\n     */\n    display: string;\n    /**\n     * The tab value\n     */\n    value: string;\n    /**\n     * The number of document records that would be returned if this tab is selected\n     */\n    count: number;\n}\n\n/**\n * Describes a single \"did you mean\" item\n */\nexport interface DidYouMeanItem {\n    /**\n     * The original search term\n     */\n    original: string;\n    /**\n     * The corrected search term\n     */\n    corrected: string;\n}\n\n/**\n * Describes the \"did you mean\" results\n */\nexport interface DidYouMean {\n    /**\n     * The spelling correction mode used for these results\n     */\n    spellingCorrectionMode: SpellingCorrectionMode;\n    /**\n     * The `DidYouMeanItem` corresponding to the main fulltext terms\n     */\n    text: DidYouMeanItem;\n    /**\n     * The `DidYouMeanItem`s corresponding to any refine fulltext term selections\n     */\n    refine: DidYouMeanItem[];\n}\n\n/**\n * Used to inform whether a query is being executed using original or corrected search terms\n */\nexport enum DidYouMeanKind {\n    Original,\n    Corrected\n}\n\n/**\n * Various attributes that are returned with a set of search results\n */\nexport interface  Attributes {\n    queryid: string;\n    searchid: string;\n    processingtime: string;\n    rowfetchtime: string;\n    cachehit: string;\n    matchingrowcount: string;\n    internalqueryanalysis: string;\n    internalquerylog: string;\n}\n\n/**\n * Describes a single query intent item\n */\nexport interface QueryIntent {\n    name: string;\n    component: string;\n    entities: QueryIntentEntity[];\n    words: QueryIntentWord[];\n    actions: QueryIntentAction[];\n    datasets: QueryIntentDatasets;\n}\n\n/**\n * Describes a query intent entity\n */\nexport interface QueryIntentEntity {\n    name: string;\n    value: string;\n    matched: boolean;\n}\n\n/**\n * Describes a query intent word\n */\nexport interface QueryIntentWord {\n    word: string;\n    value: string;\n    matched: boolean;\n}\n\n/**\n * Describes a query intent action\n */\nexport interface QueryIntentAction {\n    type: string;\n    data: string;\n}\n\n/**\n * Describes a set of query intent datasets\n */\nexport interface QueryIntentDatasets {\n    [name: string] : {\n        attributes : [any],\n        rows : [any]\n    };\n}\n\n/**\n * Describes an analysis of a query\n */\nexport interface QueryAnalysis {\n    text: string;\n    initial: boolean;\n    queryLanguage: string | undefined;\n    elements: QueryAnalysisElement[];\n}\n\n/**\n * Describes an element of query analysis\n */\nexport interface QueryAnalysisElement {\n    text: string;\n    entity: string;\n    weight: number;\n    length: number;\n    offset: number;\n    stopword: boolean;\n    root: string;\n    normalization: string;\n    lemmas: {text: string}[];\n    entities: QueryAnalysisElement[];\n    synonyms: QueryAnalysisElement[];\n    reformulations: QueryAnalysisElement[];\n    typos: QueryAnalysisElement[];\n    expression: QueryAnalysisElement[];\n    adjacency: QueryAnalysisElement[];\n    exact: QueryAnalysisElement[];\n}\n\n/**\n * Describes the match location information for a particular partname\n */\nexport interface PartnameMatchLocations {\n    partname: string;\n    data: string;\n}\n\n/**\n * Describes a set of partname match locations\n */\nexport interface MatchLocationsPerPartname {\n    matchlocations: PartnameMatchLocations[];\n}\n\n/**\n * Describes the locations of relevant extracts for a partname\n */\nexport interface PartnameExtracts {\n    partname: string;\n    data: string;\n}\n\n/**\n * Describes a set of partname relevant extracts locations\n */\nexport interface ExtractsPerPartname {\n    highlight: PartnameExtracts[];\n}\n\n/**\n * Describes the term presence for a particular search term\n */\nexport interface TermPresence {\n    term: string;\n    presence: \"found\" | \"missing\";\n}\n\n/**\n * Describes an aggregation item. This serves as a base interface for list aggregation items and tree aggregation nodes\n */\nexport interface AggregationItem {\n    /**\n     * The value of the item\n     */\n    value: FieldValue;\n    /**\n     * The display value of the item, if any\n     */\n    display?: string;\n    /**\n     * The number of documents that contain this item in the current results\n     */\n    count: number;\n    /**\n     * Identifies any operator with their associated results\n     */\n    operatorResults?: {\n        [key in \"min\" | \"max\" | \"sum\" | \"avg\" | \"stddev\" | \"variance\"]: number | Date\n    };\n\n    /**\n     * A client-side field that indicates whether this item is currrently selected\n     */\n    $selected?: boolean;\n    /**\n     * A client-side field that indicates whether this item is currently excluded\n     */\n    $excluded?: boolean;\n    /**\n     * A client-side field that indicates whether this item is currently filtered\n     */\n    $filtered?: boolean;\n    /**\n     * A client-side field that indicates the column that provided the value for this item.\n     * This can be useful when mixing items from different aggregations.\n     */\n    $column?: CCColumn;\n}\n\n/**\n * Describes any fields particular to a list aggregation item\n */\nexport type ListAggregationItem = AggregationItem;\n\n/**\n * Describes any fields particular to a tree aggregation node\n */\nexport interface TreeAggregationNode extends AggregationItem {\n    /**\n     * Determines whether this node has any children even if the `items` field is not currently populated\n     */\n    hasChildren: boolean;\n    /**\n     * Contains the child nodes of this node\n     */\n    items: TreeAggregationNode[];\n\n    /**\n     * A client-side field that contains the full path of the node\n     */\n    $path?: string;\n    /**\n     * A client-side field that indicates whether a parent node is currently open\n     */\n    $opened?: boolean;\n    /**\n     * The level at which this node is in the Tree aggregation\n     */\n    $level: number;\n}\n\n/**\n * Describes the results of an aggregation. This serves as a base interface for list and tree aggregations\n */\nexport interface Aggregation {\n    /**\n     * The name of the aggregation\n     */\n    name: string;\n    /**\n     * The name of the index column used to provide aggregation items\n     */\n    column: string;\n    /**\n     * Indicates whether the aggregation items are calculated using a distrbution (see App Dependencies in the Sinequa admin interface)\n     */\n    isDistribution?: boolean;\n    /**\n     * Indicates whether the aggregation items should be handled as tree nodes. This can be set to false for a tree aggregation\n     * if the \"Load tree as csv\" option is checked in the Sinequa configuration\n     */\n    isTree?: boolean;\n    /**\n     * Indicates whether the values for the items are fielded search expressions. This is the case for aggregations using a\n     * distribution (see `isDistribution`) and crossed distributions\n     */\n    valuesAreExpressions?: boolean;\n    /**\n     * The aggregation items for this aggregation\n     */\n    items?: AggregationItem[];\n}\n\n/**\n * Describes the fields specific to a list aggregation\n */\nexport type ListAggregation = Aggregation;\n\n/**\n * Describes the fields specific to a tree aggregation\n */\nexport type TreeAggregation = Aggregation;\n\n/**\n * Describes the fields making up an entity in the context of a particular document\n */\nexport interface EntityItem {\n    /**\n     * The value\n     */\n    value: string;\n    /**\n     * The display\n     */\n    display: string;\n    /**\n     * The locations of this item in the document text in the form `row1,col1;row2,col2;...`\n     */\n    locations?: string;\n    /**\n     * The remapped locations of this item in the original document in the form `row1,col1;row2,col2;...`\n     */\n    originalLocations?: string;\n    /**\n     * Following ES-11166, the number of occurrence of this entity in the document can be included\n     */\n    count?: number;\n}\n\n/**\n * Display kinds for RFM\n */\nexport enum RFMDisplay {\n    // Must be in par with C# RFMDisplay enum (RFM.cs)\n    none          = 0,\n\n    positiveRate  = 1,\n    mainlyPosRate = 2,\n    unrate        = 4,\n    mainlyNegRate = 8,\n    negativeRate  = 16,\n\n    all          = 31,\n    positiveOnly = 7,\n    negativeOnly = 28,\n\n    personalAll = 21,\n    personalPosOnly = 5,\n    personalNegOnly = 20,\n}\n\n/**\n * Describes the fields of an RFM action\n */\nexport interface RFMActionDisplay {\n    eventCount: number;\n    average: number;\n    status: RFMDisplay;\n    image: RFMDisplay;\n    imageAction: RFMDisplay;\n    availableActions: RFMDisplay;\n}\n\n/**\n * Describes the RFM data returned with a set of results\n */\nexport interface RFMData {\n    click?: RFMActionDisplay;\n    like?: RFMActionDisplay;\n    important?: RFMActionDisplay;\n}\n\n/**\n * Describes the standard fields in a document result record\n */\nexport interface Record {\n    /**\n     * The zero-based position of this document in the results\n     */\n    rank: number;\n    /**\n     * The unique identifier of this document\n     */\n    id: string;\n    /**\n     * The name of the index that contains this document\n     */\n    databasealias: string;\n    /**\n     * The global relevance of this document in the context of the query\n     */\n    globalrelevance: number;\n    /**\n     * Partnames that contain one or more of the search terms\n     */\n    matchingpartnames: string[];\n    /**\n     * The locations of the search terms in the document\n     */\n    matchlocations: string[];\n    /**\n     * The locations of the search terms in the document grouped by partname\n     */\n    matchlocationsperpartname: MatchLocationsPerPartname;\n    /**\n     * The relevant extracts in the document grouped by partname\n     */\n    extractsperpartname: ExtractsPerPartname;\n    /**\n     * The languages in the document\n     */\n    documentlanguages: string[];\n    /**\n     * The documentweight value of the document\n     */\n    documentweight: string;\n    /**\n     * The modified date and time of the document\n     */\n    modified: string;\n    /**\n     * The time and date when the document was indexed\n     */\n    indexationtime: string;\n    /**\n     * The version of the document\n     */\n    version: string;\n    /**\n     * The title of the document\n     */\n    title: string;\n    /**\n     * The display title of the document. This can contain HTML highlighting of the search terms\n     */\n    displayTitle: string;\n    /**\n     * The size in bytes of the document\n     */\n    size: number;\n    /**\n     * The value of the treepath of the document\n     */\n    treepath: string[];\n    /**\n     * The filename of the document\n     */\n    filename: string;\n    /**\n     * The file extension of the document\n     */\n    fileext: string;\n    /**\n     * The document flags\n     */\n    flags: string[];\n    /**\n     * The collection that produced the document (only one element will exist)\n     */\n    collection: string[];\n    /**\n     * The value of the docformat column\n     */\n    docformat: string;\n    /**\n     * The value of the doctype column\n     */\n    doctype: string;\n    /**\n     * The value of the url1 column\n     */\n    url1: string;\n    /**\n     * The value of the url2 column\n     */\n    url2: string;\n    /**\n     * The relevant extracts from the document. This can contain HTML highlighting of the search terms\n     */\n    relevantExtracts: string;\n    /**\n     * The text of the document\n     */\n    text: string;\n    /**\n     * The document authors\n     */\n    authors: string[];\n    /**\n     * The document access lists\n     */\n    accesslists: DocumentAccessLists;\n    /**\n     * The URL of the document's thumbnail\n     */\n    thumbnailUrl: string;\n    /**\n     * Indicates whether RFM has been enabled for this document\n     */\n    rfmEnabled: boolean;\n    /**\n     * Any RFM data for this document\n     */\n    rfm: RFMData;\n    /**\n     * Information about the search terms and whether they exist in the document or not\n     */\n    termspresence: TermPresence[];\n    /**\n     * A client-side field that indicates whether this document is currrently selected\n     */\n    $selected: boolean;\n    /**\n     * id of the container of this document (for splitted documents, attachments, etc.)\n     */\n    containerid?: string;\n    /**\n     * Page number of this document (for splitted documents). Added by the front-end\n     */\n    $page?: number;\n}\n\n/**\n * Describes the authorized and denied access lists for a document\n */\nexport interface DocumentAccessLists {\n    accessListIndices: number[];\n    authorizedLists: AccessLists;\n    deniedLists: AccessLists;\n}\n\n/**\n * Describes the access lists\n */\nexport interface AccessLists {\n    /**\n     * An array of `AccessListPrincipal` arrays. Each item in the outer array corresponds to column value of the document\n     */\n    [index: number]: AccessListPrincipal[];\n}\n\n/**\n * Describes the fields of a principal item in an access list\n */\nexport interface AccessListPrincipal {\n    /**\n     * The Sinequa domain to which the principal belongs\n     */\n    domain: string;\n    /**\n     * The identifier of the principal\n     */\n    id: string;\n}\n\nexport interface IMulti<T> {\n    results: T[];\n}\n\n/**\n * Describes information to be sent to the server when executing a query for server-side query intent processing\n */\nexport interface QueryIntentData {\n    /**\n     * The current results view\n     */\n    resultsView?: string;\n    /**\n     * The current tab\n     */\n    tab?: string;\n    /**\n     * Query intents\n     */\n    queryIntents?: QueryIntent[];\n    /**\n     * Analysis of the current query\n     */\n    queryAnalysis?: QueryAnalysis;\n}\n\n/**\n * A service to call the query web service\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class QueryWebService extends HttpService {\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        public httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    protected endPoint = \"query\";\n\n    /**\n     * Get the results for the passed query\n     *\n     * @param query The query to execute\n     * @param auditEvents Any audit events to store on the server\n     * @param queryIntentData Any accompanying query intent data\n     */\n    public getResults(query: IQuery, auditEvents?: AuditEvents, queryIntentData?: QueryIntentData): Observable<Results> {\n        if (!query) {\n            return throwError({ error: \"no query\" });\n        }\n        const observable = this.httpClient.post<Results>(this.makeUrl(this.endPoint), {\n            app: this.appName,\n            query,\n            $auditRecord: auditEvents,\n            queryIntentData\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                console.log(\"queryService.getResults success - data: \", response);\n                return response;\n            },\n            (error) => {\n                console.log(\"queryService.getResults failure - error: \", error);\n            });\n        return observable;\n    }\n\n    /**\n     * Get the results for a set of queries\n     *\n     * @param queries The queries to execute\n     * @param auditEvents Any audit events to store on the server\n     */\n    public getMultipleResults(queries: IQuery[], auditEvents?: AuditEvents): Observable<IMulti<Results>> {\n        if (!queries || queries.length === 0) {\n            return throwError({ error: \"no queries\" });\n        }\n        const data: {\n            methods: {\n                method: string,\n                app: string,\n                query: IQuery\n            }[],\n            propagateErrors: true,\n            $auditRecord?: AuditEvents\n        } = {\n            methods: [],\n            propagateErrors: true,\n            $auditRecord: auditEvents\n        };\n        for (const query of queries) {\n            data.methods.push({\n                method: this.endPoint,\n                app: this.appName,\n                query\n            });\n        }\n        return this.httpClient.post<IMulti<Results>>(this.makeUrl(\"multi\"), data);\n    }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\n\nimport { FusionChartsModule as FCModule } from \"angular-fusioncharts\";\n\n// Import FusionCharts library and chart modules\nimport * as FusionCharts from \"fusioncharts\";\nimport * as charts from \"fusioncharts/fusioncharts.charts\";\nimport * as FusionTheme from \"fusioncharts/themes/fusioncharts.theme.fusion\";\nimport * as CandyTheme from \"fusioncharts/themes/fusioncharts.theme.candy\";\n\nimport { IntlModule } from '@sinequa/core/intl';\nimport { BsSelectionModule } from '@sinequa/components/selection';\nimport { UtilsModule } from \"@sinequa/components/utils\";\n\nimport { FusionChart } from \"./chart/chart\";\n\nFusionCharts.options.creditLabel = false;\n// Fusion is a light theme, Candy is a dark theme\nFCModule.fcRoot(FusionCharts, charts, FusionTheme, CandyTheme);\n\n@NgModule({\n\n    imports: [\n        CommonModule,\n        IntlModule,\n        UtilsModule,\n        BsSelectionModule,\n        FCModule\n    ],\n    declarations: [\n        FusionChart\n    ],\n    exports: [\n        FusionChart\n    ],\n})\nexport class FusionChartsModule {}","export default {\n    \"statusBar\": {\n        \"fullscreenTitleEnter\": \"Fullscreen\",\n        \"fullscreenTitleExit\": \"Exit fullscreen\",\n        \"networkActivity\": \"Network activity\"\n    }\n};\n","import {Directive, OnInit, OnDestroy, AfterViewInit, ElementRef, HostListener} from \"@angular/core\";\nimport {Subscription} from 'rxjs';\nimport Popper from 'popper.js';\nimport {Keys} from \"@sinequa/core/base\";\nimport {BsDropdownService, gClassName, gSelector, gAttachmentMap} from './dropdown.service';\n\n// Based on  Bootstrap (v4.4.1): dropdown.js\n\nfunction noop() {}\n\nconst gConfig = {\n    offset       : 0,\n    flip         : true,\n    boundary     : 'scrollParent',\n    reference    : 'toggle',\n    display      : 'dynamic',\n    popperConfig : null\n};\n\n@Directive({\n    selector: gSelector.DATA_TOGGLE\n})\nexport class BsDropdownDirective implements OnInit, OnDestroy, AfterViewInit {\n    private subscription: Subscription;\n    private inNavbar: boolean;\n    private dropdown: HTMLElement;\n    private dropdownToggle: HTMLElement;\n    private _dropdownMenu: HTMLElement | null;\n    private popper;\n\n    constructor(\n        private elementRef: ElementRef,\n        private dropdownService: BsDropdownService\n    ) {\n    }\n\n    get dropdownMenu(): HTMLElement | null {\n        if (!this._dropdownMenu && this.dropdown) {\n            this._dropdownMenu = this.dropdown.querySelector(gSelector.MENU);\n        }\n        return this._dropdownMenu;\n    }\n\n    ngOnInit() {\n        this.subscription = this.dropdownService.events.subscribe((event) => {\n            if (event.type === \"clear\") {\n                this.clear(event.sourceEvent);\n            }\n            else if (event.type === \"toggle\") {\n                this.toggle(event.element);\n            }\n        });\n    }\n\n    ngAfterViewInit() {\n        this.dropdownToggle = this.elementRef.nativeElement;\n        this.dropdown = this.dropdownService.getParentFromElement(this.dropdownToggle) as HTMLElement;\n        this.inNavbar = !!this.dropdownToggle.closest('.navbar');\n    }\n\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n\n    @HostListener(\"click\", [\"$event\"])\n    clickHandler(event: Event) {\n        // before event.stopPropagation() \n        // needed to avoid dropdown menu list to stay opened,\n        // bubble event to his root parent first and once\n        const isActive = this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.SHOW);\n        if (!isActive) this.dropdown.dispatchEvent(new Event('click', {bubbles: true, cancelable: false}));\n        \n        event.preventDefault();\n        event.stopPropagation();\n        this.toggle(this.dropdownToggle);\n    }\n\n    private toggle(element: Element) {\n        if (!element || this.dropdownToggle !== element || !this.dropdownMenu || !this.dropdown) {\n            return;\n        }\n\n        if (/*TODO element.disabled || */element.classList.contains(gClassName.DISABLED)) {\n            return;\n        }\n\n        const isActive = this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.SHOW);\n\n        this.dropdownService.raiseClear();\n\n        if (isActive) {\n            return;\n        }\n\n        this.show(true);\n    }\n\n    private getPlacement(): string {\n        let placement = gAttachmentMap.BOTTOM;\n\n        // Handle dropup\n        if (this.dropdown.classList.contains(gClassName.DROPUP)) {\n            placement = gAttachmentMap.TOP;\n            if (this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.MENURIGHT)) {\n                placement = gAttachmentMap.TOPEND;\n            }\n        }\n        else if (this.dropdown.classList.contains(gClassName.DROPRIGHT)) {\n            placement = gAttachmentMap.RIGHT;\n        }\n        else if (this.dropdown.classList.contains(gClassName.DROPLEFT)) {\n            placement = gAttachmentMap.LEFT;\n        }\n        else if (this.dropdownMenu && this.dropdownMenu.classList.contains(gClassName.MENURIGHT)) {\n            placement = gAttachmentMap.BOTTOMEND;\n        }\n        return placement;\n    }\n\n    private getOffset() {\n        return {\n            offset: gConfig.offset\n        };\n    }\n\n    private getPopperConfig() {\n        const popperConfig: any = {\n            placement: this.getPlacement(),\n            modifiers: {\n                offset: this.getOffset(),\n                flip: {\n                    enabled: gConfig.flip\n                },\n                preventOverflow: {\n                    boundariesElement: gConfig.boundary\n                }\n            }\n        };\n\n        // Disable Popper.js if we have a static display\n        if (gConfig.display === 'static') {\n            popperConfig.modifiers.applyStyle = {\n                enabled: false\n            };\n        }\n\n        return popperConfig;\n    }\n\n    show(usePopper = false) {\n        if (!this.dropdownToggle || !this.dropdownMenu || !this.dropdown) {\n            return;\n        }\n        if (/*TODO element.disabled || */\n            this.dropdownToggle.classList.contains(gClassName.DISABLED) ||\n            this.dropdownMenu.classList.contains(gClassName.SHOW)) {\n          return;\n        }\n\n        const parent = this.dropdown;\n\n        // Disable totally Popper.js for Dropdown in Navbar\n        if (!this.inNavbar && usePopper) {\n            /**\n             * Check for Popper dependency\n             * Popper - https://popper.js.org\n             */\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('Bootstrap\\'s dropdowns require Popper.js (https://popper.js.org/)');\n            }\n\n            let referenceElement = this.dropdownToggle;\n\n            if (gConfig.reference === 'parent') {\n                referenceElement = parent;\n            }\n\n            // If boundary is not `scrollParent`, then set position to `static`\n            // to allow the menu to \"escape\" the scroll parent's boundaries\n            // https://github.com/twbs/bootstrap/issues/24251\n            if (gConfig.boundary !== 'scrollParent') {\n                parent.classList.add(gClassName.POSITION_STATIC);\n            }\n            this.popper = new Popper(referenceElement, this.dropdownMenu, this.getPopperConfig());\n        }\n\n        // If this is a touch-enabled device we add extra\n        // empty mouseover listeners to the body's immediate children;\n        // only needed because of broken event delegation on iOS\n        // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n        if ('ontouchstart' in document.documentElement &&\n            !parent.closest(gSelector.NAVBAR_NAV)) {\n            Array.from(document.body.children).forEach((element) => element.addEventListener('mouseover', noop));\n        }\n\n        this.dropdownToggle.focus();\n        this.dropdownToggle.setAttribute('aria-expanded', \"true\");\n\n        this.dropdownMenu.classList.toggle(gClassName.SHOW);\n        parent.classList.toggle(gClassName.SHOW);\n    }\n\n    private clear(event: KeyboardEvent | MouseEvent | undefined) {\n        if (!this.dropdownToggle || !this.dropdownMenu || !this.dropdown) {\n            return;\n        }\n        const parent = this.dropdown;\n\n        if (!parent.classList.contains(gClassName.SHOW)) {\n            return;\n        }\n\n        if (event && (event.type === 'click' &&\n            /input|textarea/i.test((event.target as Element).tagName) || event.type === 'keyup' && event.which === Keys.tab) &&\n            parent.contains(event.target as Node)) {\n            return;\n        }\n\n        // If this is a touch-enabled device we remove the extra\n        // empty mouseover listeners we added for iOS support\n        if ('ontouchstart' in document.documentElement) {\n            Array.from(document.body.children).forEach((element) => element.removeEventListener('mouseover', noop));\n        }\n\n        this.dropdownToggle.setAttribute('aria-expanded', 'false');\n\n        if (this.popper) {\n            this.popper.destroy();\n        }\n\n        this.dropdownMenu.classList.remove(gClassName.SHOW);\n        parent.classList.remove(gClassName.SHOW);\n    }\n}\n","import {Injectable, Inject} from \"@angular/core\";\nimport {Observable} from \"rxjs\";\nimport {SqHttpClient} from \"./http-client\";\nimport {HttpService} from \"./http.service\";\nimport {START_CONFIG, StartConfig} from \"./start-config.web.service\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {IQuery} from \"./query/query\";\n\nexport class RecentQueriesList {\n    constructor(name: string) {\n        this.name = name;\n        this.queries = [];\t// Make sure to have at least a valid \"queries\" member, to simplify tests in GUI code.\n    }\n    name: string;\t\t// App name or user name the queries are related to.\n    queries: IQuery[];\n}\n\nexport class RecentQueries {\n    app?: RecentQueriesList;\n    user?: RecentQueriesList;\n}\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class RecentQueriesWebService extends HttpService {\n    recentQueries: RecentQueries;\n\n    constructor(\n        @Inject(START_CONFIG) startConfig: StartConfig,\n        private httpClient: SqHttpClient) {\n        super(startConfig);\n    }\n\n    load(): Observable<RecentQueries> {\n        const observable = this.httpClient.get<RecentQueries>(this.makeUrl(\"recentqueries\"), {\n            params: this.makeParams({\n                app: this.appName,\n                action: \"load\"\n            })\n        });\n        Utils.subscribe(observable,\n            (response) => {\n                this.recentQueries = response;\n                if (!this.recentQueries)\n                    this.recentQueries = new RecentQueries();\n                if (this.recentQueries) {\n                    if (!this.recentQueries.app)\n                        this.recentQueries.app = new RecentQueriesList(this.appName);\n                    if (!this.recentQueries.user)\n                        this.recentQueries.user = new RecentQueriesList(\"currentuser\");\n                }\n                console.log(\"recentQueriesService.load success - data: \", response);\n                return response;\n            },\n            (error) => {\n                console.log(\"recentQueriesService.load failure - error: \", error);\n            });\n        return observable;\n    }\n    // No save/patch action for the recent queries: MRU lists are generated server side when the query is executed.\n\n    appRecentQueries(): IQuery[]{\n        if (this.recentQueries && this.recentQueries.app && this.recentQueries.app.queries)\n            return this.recentQueries.app.queries;\n        else {\n            return [];\n        }\n    }\n\n    appRecentQueriesLength(): number{\n        if (this.recentQueries && this.recentQueries.app && this.recentQueries.app.queries)\n            return this.recentQueries.app.queries.length;\n        else\n            return 0;\n    }\n\n    userRecentQueries(): IQuery[]{\n        if (this.recentQueries && this.recentQueries.user && this.recentQueries.user.queries)\n            return this.recentQueries.user.queries;\n        else {\n            return [];\n        }\n    }\n\n    userRecentQueriesLength(): number{\n        if (this.recentQueries && this.recentQueries.user && this.recentQueries.user.queries)\n            return this.recentQueries.user.queries.length;\n        else\n            return 0;\n    }\n}","export * from \"./advanced.service\";\nexport * from \"./bootstrap/index\";\nexport * from \"./messages/index\";\n","export * from \"./directives/autofocus\";\nexport * from \"./directives/click-outside\";\nexport * from \"./directives/media-if\";\nexport * from \"./directives/scroll-into-view\";\nexport * from \"./directives/focus-key-list.directive\";\nexport * from \"./directives/focus-key-list-item.directive\";\nexport * from \"./directives/resize-event.directive\";\nexport * from \"./directives/sticky\";\nexport * from \"./directives/tooltip/tooltip.directive\";\nexport * from \"./directives/tooltip/tooltip.component\";\nexport * from \"./pipes/date-pipe\";\nexport * from \"./pipes/expr-pipe\";\nexport * from \"./pipes/memory-size-pipe\";\nexport * from \"./pipes/moment-pipe\";\nexport * from \"./pipes/number-pipe\";\nexport * from \"./pipes/relative-time-pipe\";\nexport * from \"./pipes/time-pipe\";\nexport * from \"./pipes/value-pipe\";\nexport * from \"./utils.module\";\nexport * from \"./ui.service\";\nexport * from \"./voice-recognition/voice-recongnition.service\";\nexport * from \"./messages\";\n","export * from \"./network.component\";\nexport * from \"./node-info-card.component\";\nexport * from \"./edge-info-card.component\";\nexport * from \"./network-sample-configs\";\nexport * from \"./network-models\";\nexport * from \"./network.module\";\nexport * from \"./providers/index\";\nexport * from \"./messages/index\";","import { ProviderFactory } from './providers/provider-factory';\nimport { NetworkProvider } from './network-models';\nimport { Record } from '@sinequa/core/web-services';\nimport { SearchService } from '@sinequa/components/search';\nimport { RecordNode } from './providers/records-provider';\nimport { Node } from './network-models';\nimport { DynamicEdgeType } from './providers/dynamic-edge-provider';\n\n/**\n * Creates a network from a list of records, with record and person nodes.\n * The person nodes are attached to a record if that record contains them.\n * @param providerFactory The provider factory\n * @param records A given list of records\n */\nexport function recordsProviderDemo(providerFactory: ProviderFactory, records: Record[]): NetworkProvider[] {\n  \n  const doc = providerFactory.createRecordNodeType();\n  const person = providerFactory.createPersonNodeType();\n\n  const struct = providerFactory.createStructuralEdgeTypes(doc, [person], \"oninsert\", \"all\");\n\n  const provider = providerFactory.createRecordsProvider(doc, struct, records);\n  return [provider];\n}\n\n/**\n * Creates a network from the selected records, with record and person nodes.\n * The person nodes are attached to a record if that record contains them.\n * The network is refreshed every time documents are selected or unselected.\n * @param providerFactory The provider factory\n */\nexport function selectedRecordsProviderDemo(providerFactory: ProviderFactory): NetworkProvider[] {\n  \n  const doc = providerFactory.createRecordNodeType();\n  const person = providerFactory.createPersonNodeType();\n\n  const struct = providerFactory.createStructuralEdgeTypes(doc, [person], \"oninsert\", \"all\");\n\n  const provider = providerFactory.createSelectedRecordsProvider(doc, struct);\n  return [provider];\n}\n\n/**\n * Creates a network for a list of records fetched with a query. The query\n * specifically returns 5 wikipedia documents about \"human\" and containing the text \"google\".\n * The record nodes are rendered with the wikipedia thumbnail rather than a generic icon.\n * @param providerFactory The provider factory\n * @param searchService The search service\n */\nexport function asyncRecordsProviderDemo(providerFactory: ProviderFactory, searchService: SearchService): NetworkProvider[] {\n  \n  const doc = providerFactory.createNodeType(\"doc\", \n    providerFactory.createDynamicImageNodeOptions(\n      (node: Node) => (node as RecordNode).record['sourcevarchar4'] || \"\"\n    )\n  );\n\n  const query = searchService.makeQuery();\n  query.text = \"google\";\n  query.addSelect(\"treepath:=/Web/Wiki/\");\n  query.addSelect(\"category:=human\");\n  query.pageSize = 5;\n\n  const provider = providerFactory.createAsyncRecordsProvider(doc, [], query);\n  return [provider];\n}\n\n/**\n * Creates a network from a cross-aggregation between person and company entities.\n * @param providerFactory The provider factory\n */\nexport function crossAggregationDemo(providerFactory: ProviderFactory): NetworkProvider[] {\n\n  const person = providerFactory.createPersonNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  const edge = providerFactory.createAggregationEdgeType([company, person], \"Company_Person\")\n\n  const provider = providerFactory.createAggregationProvider([edge]);\n\n  return [provider];\n}\n\n/**\n * Creates a network from a cross-aggregation between person and company entities.\n * Additionally, the company and person nodes can be expanded to other company, person\n * and geo entities.\n * @param providerFactory The provider factory\n */\nexport function crossAggregationExpandDemo(providerFactory: ProviderFactory): NetworkProvider[] {\n\n  const person = providerFactory.createPersonNodeType();\n  const company = providerFactory.createCompanyNodeType();\n  const geo = providerFactory.createGeoNodeType();\n\n  const edge = providerFactory.createAggregationEdgeType([company, person], \"Company_Person\");\n  const expandCompany = providerFactory.createAggregationEdgeType([company, person], \"person\", undefined, \"onclick\");\n  const expandPersonCompany = providerFactory.createAggregationEdgeType([person, company], \"company\", undefined, \"manual\");\n  const expandPersonGeo = providerFactory.createAggregationEdgeType([person, geo], \"geo\", undefined, \"manual\");\n\n  const provider = providerFactory.createAggregationProvider([edge, expandCompany, expandPersonCompany, expandPersonGeo]);\n\n  return [provider];\n}\n\n/**\n * Creates a network from a cooccurrence distribution between person and company\n * entities.\n * @param providerFactory The provider factory\n */\nexport function coocAggregationDemo(providerFactory: ProviderFactory): NetworkProvider[] {\n\n  const person = providerFactory.createPersonNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  const edge = providerFactory.createCoocAggregationEdgeType([company, person], \"Company_Person_Cooc\")\n\n  const provider = providerFactory.createAggregationProvider([edge]);\n\n  return [provider];\n}\n\n/**\n * Creates a network from a triple-cooccurrence between person, companies and in-between\n * a \"job\" entity ('(BILL GATES)#(CEO)#(MICROSOFT)').\n * @param providerFactory The provider factory\n */\nexport function typedCoocAggregationDemo(providerFactory: ProviderFactory): NetworkProvider[] {\n\n  const person = providerFactory.createPersonNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  const edge = providerFactory.createTypedCoocAggregationEdgeType([person, company], \"Person_Job_Company_Cooc\")\n\n  const provider = providerFactory.createAggregationProvider([edge]);\n\n  return [provider];\n}\n\n/**\n * Creates a network from the list of selected records and displays the cooccurrence entities\n * contained in these records. The record nodes themselves are actually hidden (hideRecordNode=true).\n * The cooccurrence entities are each displayed as two nodes linked by an edge.\n * @param providerFactory The provider factory\n */\nexport function coocRecordDemo(providerFactory: ProviderFactory): NetworkProvider[] {\n\n  const doc = providerFactory.createRecordNodeType();\n  const job = providerFactory.createCompanyNodeType();\n  const person = providerFactory.createPersonNodeType();\n\n  const struct = providerFactory.createCoocStructuralEdgeTypes(doc, [job, person], \"person_cooc\", \"oninsert\", \"all\");\n\n  const provider = providerFactory.createSelectedRecordsProvider(doc, [struct], true);\n  \n  return [provider];\n}\n\n/**\n * Creates a network from the list of selected records and displays the triple-cooccurrence entities\n * between person, companies and in-between a \"job\" entity ('(BILL GATES)#(CEO)#(MICROSOFT)') contained\n * in these records.\n * The cooccurrence entities are each displayed as two nodes linked by a typed edge (with a label showing the \"job\").\n * @param providerFactory The provider factory\n */\nexport function typedCoocRecordDemo(providerFactory: ProviderFactory): NetworkProvider[] {\n\n  const doc = providerFactory.createRecordNodeType();\n  const person = providerFactory.createPersonNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  const struct = providerFactory.createTypedCoocStructuralEdgeTypes(doc, [person, company], \"person_job_company\", \"oninsert\", \"all\");\n\n  const provider = providerFactory.createSelectedRecordsProvider(doc, [struct]);\n  \n  return [provider];\n}\n\n/**\n * Creates a network from the list of selected record and three cross-distributions between geo, \n * person and company entities.\n * Additionally, the metadata nodes are expandable to other metadata nodes, via cross-distributions.\n * @param providerFactory The provider factory\n */\nexport function oOTBConfig(providerFactory: ProviderFactory): NetworkProvider[] {\n\n  // Create the node types for standard entities\n  const geo = providerFactory.createGeoNodeType();\n  const person = providerFactory.createPersonNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  // Create the node type for generic documents\n  const docNode = providerFactory.createRecordNodeType();\n\n  // Create structural edges from the document nodes to the standard entities\n  const structEdges = providerFactory.createStructuralEdgeTypes(docNode, [geo, person, company]);\n  \n  // Create aggregation edges to link standard entities together (The 3 aggregations are not standard and must be configured on the server)\n  const geo_person = providerFactory.createAggregationEdgeType([geo, person], \"Geo_Person\");\n  const company_person = providerFactory.createAggregationEdgeType([company, person], \"Company_Person\");\n  const geo_company = providerFactory.createAggregationEdgeType([geo, company], \"Geo_Company\");\n  \n  const expandEdges = providerFactory.createAllExpansionEdgeTypes([geo, person, company], [\"Geo\", \"Person\", \"Company\"], true);\n\n  // Return list of providers\n  return [\n    providerFactory.createSelectedRecordsProvider(docNode, structEdges),\n    providerFactory.createAggregationProvider([geo_person, company_person, geo_company, ...expandEdges])\n  ];\n\n}\n\n/**\n * Creates a network from a list of records fetched via a query asynchronously, and cross-distributions\n * between the geo, company and person nodes.\n * The query specifically asks for 3 wikipedia documents about \"Barack Obama\".\n * The network will contain relations between the records and the metadata displayed among the aggregation\n * edges.\n * @param providerFactory The provider factory\n * @param searchService The search service\n */\nexport function wikiAsyncConfig(providerFactory: ProviderFactory, searchService: SearchService): NetworkProvider[] {\n  \n  // Create the node types for standard entities\n  const geo = providerFactory.createGeoNodeType();\n  const person = providerFactory.createPersonNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  // Create the node type for generic documents\n  const docNode = providerFactory.createRecordNodeType();\n\n  // Create structural edges from the document nodes to the standard entities\n  const structEdges = providerFactory.createStructuralEdgeTypes(docNode, [geo, person, company], \"oninsert\", \"existingnodes\");\n  \n  // Create aggregation edges to link standard entities together (The 3 aggregations are not standard and must be configured on the server)\n  const geo_person = providerFactory.createAggregationEdgeType([geo, person], \"Geo_Person\");\n  const company_person = providerFactory.createAggregationEdgeType([company, person], \"Company_Person\");\n  const geo_company = providerFactory.createAggregationEdgeType([geo, company], \"Geo_Company\");\n \n  // Create a query to retrieve the list of records\n  const query = searchService.makeQuery();\n  query.text = \"Barack Obama\";\n  query.addSelect(\"treepath:=/Web/Wiki/\");\n  query.pageSize = 3;\n\n  // Return list of providers\n  return [\n    providerFactory.createAsyncRecordsProvider(docNode, structEdges, query),\n    providerFactory.createAggregationProvider([geo_person, company_person, geo_company])\n  ];\n\n}\n\n\n/**\n * Creates a network from the list of selected records. Additionally, when these records\n * are inserted, fetches additional records from the server, which gets attached to the record\n * nodes (\"dynamic edges\"). Specifically these new records are 5 wikipedia articles about humans\n * and talking about whatever the original node's label is. (if the original node is \"Microsoft\",\n * the dynamic edges will likely include Bill Gates, Steve Ballmer, Paul Allen, etc.)\n * The nodes of these new records (with the \"people\" type) are displayed with the wikipedia thumbnail.\n * Additionally we display the company entities contained in these people nodes (structural edges).\n * @param providerFactory The provider factory\n * @param searchService The search service\n */\nexport function wikiDynEdgeConfig(providerFactory: ProviderFactory, searchService: SearchService): NetworkProvider[] {\n  // Create a standard document node type\n  const doc = providerFactory.createRecordNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  // Create a node type of people, displaying the image of that person instead of a generic icon\n  const people = providerFactory.createNodeType(\"person\",\n    providerFactory.createDynamicImageNodeOptions(\n      (node: Node) => (node as RecordNode).record['sourcevarchar4'] || \"\"\n    )\n  );\n\n  // Create a standard provider for records\n  const recordProvider = providerFactory.createSelectedRecordsProvider(doc, []);\n\n  // Create a dynamic edge type, that creates a query to fetch people related to that document\n  const dynamicEdgeType = providerFactory.createDynamicEdgeType([doc, people], \"oninsert\",\n    (node: Node, type: DynamicEdgeType) => {\n      const query = searchService.makeQuery();\n      query.text = node.label;\n      query.addSelect(\"treepath:=/Web/Wiki/\");\n      query.addSelect(\"category:=human\");\n      query.pageSize = 5;\n      return query;\n    });\n\n  // Create a structural edge type for link companies to people\n  const struct = providerFactory.createStructuralEdgeTypes(people, [company]);\n\n  // Create a dynamic edge provider to create the dynamic edges whose type we just defined\n  const peopleProvider = providerFactory.createDynamicEdgeProvider(dynamicEdgeType, struct, true, \"People\", [recordProvider]);\n\n  // Return the two providers\n  return [recordProvider, peopleProvider];\n}\n\n/**\n * Creates a network from cross distribution between Company and Person entities.\n * Additionally, the person nodes are \"dynamic nodes\", meaning they become enriched (when clicked on,\n * by default) with a record fetched from the server. When this happens, the display of the node\n * changes (in this case we display the wikipedia thumbnail of that person, instead of a generic icon),\n * and \"structural edges\" are added to the nodes (in this case we display the \"company\" entities\n * contained in the wikipedia pages of the person).\n * @param providerFactory The provider factory\n * @param searchService The search service\n */\nexport function wikiDynConfig(providerFactory: ProviderFactory, searchService: SearchService): NetworkProvider[] {\n  \n  // Create the node types for the company and person entities\n  const company = providerFactory.createCompanyNodeType();\n  const person = providerFactory.makeNodeTypeDynamic(\n    // By default, the node is a standard person node\n    providerFactory.createPersonNodeType(),\n    // This function returns the query necessary to transform the node\n    (node: Node) => {\n      const query = searchService.makeQuery();\n      query.text = node.label;\n      query.addSelect(\"treepath:=/Web/Wiki/\");\n      query.addSelect(\"category:=human\");\n      query.pageSize = 1;\n      return query\n    },\n    // The node options to use after the node has been transformed (displaying an image instead of an icon)\n    providerFactory.createDynamicImageNodeOptions(\n      (node: Node) => (node as RecordNode).record['sourcevarchar4'] || \"\"\n    )\n  );\n\n  // Create aggregation edges to link companies and people\n  const company_person = providerFactory.createAggregationEdgeType([company, person], \"Company_Person\");\n\n  // Create the aggregation provider\n  const aggProvider = providerFactory.createAggregationProvider([company_person]);\n\n  // Create structural edges from the document nodes to the person and company entities\n  const structEdges = providerFactory.createStructuralEdgeTypes(person, [company, person], \"oninsert\", \"paginate\");\n\n  // Create the dynamic node provider\n  const personProvider = providerFactory.createDynamicNodeProvider(person, structEdges, true, \"People\", [aggProvider]);\n\n  return [aggProvider, personProvider];\n}\n\n/**\n * Creates a network from 3 cross distribution between Company, Geo and Person entities.\n * Additionally, the person nodes are \"dynamic nodes\", meaning they become enriched (when inserted) \n * with a record fetched from the server. When this happens, the display of the node\n * changes (in this case we display the wikipedia thumbnail of that person, instead of a generic icon).\n * Additionally, the company nodes are manually expandable to display relations with other people nodes.\n * @param providerFactory The provider factory\n * @param searchService The search service\n */\nexport function wikiMultiDynConfig(providerFactory: ProviderFactory, searchService: SearchService): NetworkProvider[] {\n  \n  // Create the node types for standard entities\n  \n  // geo and company are a normal node types\n  const geo = providerFactory.createGeoNodeType();\n  const company = providerFactory.createCompanyNodeType();\n\n  // person is dynamic node type\n  const person = providerFactory.makeNodeTypeDynamic(\n    // it is initialized from a standard person node type\n    providerFactory.createPersonNodeType(),\n    // a function that returns a query to retrieve the wikipedia page of this person\n    (node: Node) => {\n      const query = searchService.makeQuery();\n      query.text = node.label;\n      query.addSelect(\"treepath:=/Web/Wiki/\");\n      query.addSelect(\"category:=human\");\n      query.pageSize = 1;\n      return query\n    },\n    // the node options used when the node has been mutated (sourcevarchar4 contains the wikipedia image URL)\n    providerFactory.createDynamicImageNodeOptions(\n      (node: Node) => (node as RecordNode).record['sourcevarchar4'] || \"\"\n    ),\n    // the node is mutated dynamically immediately after the metadata node is inserted\n    \"oninsert\");\n  \n  \n  // Create aggregation edges to link standard entities together (The 3 aggregations are not standard and must be configured on the server)\n  const geo_person = providerFactory.createAggregationEdgeType([geo, person], \"Geo_Person\");\n  const company_person = providerFactory.createAggregationEdgeType([company, person], \"Company_Person\");\n  const geo_company = providerFactory.createAggregationEdgeType([geo, company], \"Geo_Company\");\n  \n  const expandCompany = providerFactory.createAggregationEdgeType([company, person], \"person\", undefined, \"manual\");\n\n  // Return list of providers\n  const aggProvider = providerFactory.createAggregationProvider([geo_person, company_person, geo_company, expandCompany]);\n  return [\n    // Aggregation provider\n    aggProvider,\n    // Dynamic node provider that transform people nodes (in particular it changes their appearance)\n    providerFactory.createDynamicNodeProvider(person, [], true, \"People\", [aggProvider]) // The dynamic nodes are mutate \"on insert\", meaning we fire multiple search queries to retrieve when new nodes from geo_person and/or cpy_person are created\n  ];\n\n}\n\n","export * from \"./vis-timeline-module\";\nexport * from \"./result-timeline/result-timeline\";\n","import \"hammerjs\";\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n    enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule, {preserveWhitespaces: true})\n    .catch(err => console.error(err));\n","import { Component, Input } from \"@angular/core\";\nimport { DocumentAccessLists } from \"@sinequa/core/web-services\";\n\n@Component({\n    selector: \"sq-metadata-access-lists-item\",\n    templateUrl: \"./metadata-access-lists-item.html\",\n    styleUrls: [\"./metadata-access-lists-item.css\"]\n})\nexport class MetadataAccessListsItem {\n    @Input() public accessLists: DocumentAccessLists;\n}","<ng-container *ngFor=\"let i of accessLists.accessListIndices\" >\n    <div class=\"accessList\" *ngIf=\"accessLists.authorizedLists[i]\">\n        <div class=\"accessListIcon authorizedListIcon far fa-check-circle\" title=\"{{ 'msg#metadata.accessLists.authorizedListTitleText' | sqMessage }}\"></div>\n        <div class=\"accessListValue\">\n            <sq-metadata-access-lists-item-single-access-list [authorized]=\"true\" [index]=\"i\" [accessList]=\"accessLists.authorizedLists[i]\">\n            </sq-metadata-access-lists-item-single-access-list>\n        </div>\n    </div>\n    <div class=\"accessList\" *ngIf=\"accessLists.deniedLists[i]\">\n        <div class=\"accessListIcon deniedListIcon fas fa-minus-circle\" title=\"{{ 'msg#metadata.accessLists.deniedListTitleText' | sqMessage }}\"></div>\n        <div class=\"accessListValue\">\n            <sq-metadata-access-lists-item-single-access-list [authorized]=\"false\" [index]=\"i\" [accessList]=\"accessLists.deniedLists[i]\">\n            </sq-metadata-access-lists-item-single-access-list>\n        </div>\n    </div>\n</ng-container>","import {Component, Input, OnChanges, SimpleChanges} from \"@angular/core\";\nimport {Utils} from \"@sinequa/core/base\";\nimport {Results, DidYouMeanItem, DidYouMeanKind} from \"@sinequa/core/web-services\";\nimport {SearchService} from \"../../search.service\";\n\n@Component({\n    selector: \"sq-did-you-mean\",\n    templateUrl: \"./did-you-mean.html\",\n    styleUrls: [\"./did-you-mean.css\"]\n})\nexport class BsDidYouMean implements OnChanges {\n    @Input() results: Results;\n    @Input() context: \"search\" | \"refine\" = \"search\";\n    item: DidYouMeanItem | undefined;\n\n    constructor(\n        public searchService: SearchService) {\n    }\n\n    private handleResults() {\n        this.item = undefined;\n        if (this.results && this.results.didYouMean) {\n            if (this.context === \"search\") {\n                const item = this.results.didYouMean.text;\n                if (item && item.corrected) {\n                    this.item = item;\n                }\n            }\n            else {\n                const refineSelect = this.searchService.query.findSelect(\"refine\");\n                if (refineSelect && Utils.startsWith(refineSelect.expression, \"refine:\") && !!this.results.didYouMean.refine) {\n                    const dymItem = this.results.didYouMean.refine[this.results.didYouMean.refine.length - 1];\n                    if (dymItem.corrected) {\n                        this.item = dymItem;\n                    }\n                }\n            }\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (!!changes[\"results\"]) {\n            this.handleResults();\n        }\n    }\n\n    selectOriginal() {\n        if (this.item) {\n            this.searchService.didYouMean(this.item.original, this.context, DidYouMeanKind.Original);\n        }\n        return false;\n    }\n\n    selectCorrected() {\n        if (this.item) {\n            this.searchService.didYouMean(this.item.corrected, this.context, DidYouMeanKind.Corrected);\n        }\n        return false;\n    }\n}","<div *ngIf=\"!!item\" class=\"sq-did-you-mean sq-text {{'sq-' + context}}\" [ngSwitch]=\"results.didYouMean.spellingCorrectionMode\">\n    <ng-container *ngSwitchCase=\"'DYMOnly'\">\n        {{'msg#didYouMean.dymonlyBeforeCorrected' | sqMessage}}<a class=\"sq-did-you-mean-corrected\" href=\"#\" (click)=\"selectCorrected()\">{{item.corrected}}</a>{{'msg#didYouMean.dymonlyAfterCorrected' | sqMessage}}\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'Correct'\">\n        {{'msg#didYouMean.correctBeforeCorrected' | sqMessage}}<a class=\"sq-did-you-mean-corrected\" href=\"#\" (click)=\"selectCorrected()\">{{item.corrected}}</a>{{'msg#didYouMean.correctBeforeOriginal' | sqMessage}}<a class=\"sq-did-you-mean-original\" href=\"#\" (click)=\"selectOriginal()\">{{item.original}}</a>{{'msg#didYouMean.correctAfterOriginal' | sqMessage}}\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'Smart'\">\n        {{'msg#didYouMean.smartBeforeOriginal' | sqMessage}}<a class=\"sq-did-you-mean-original\" href=\"#\" (click)=\"selectOriginal()\">{{item.original}}</a>{{'msg#didYouMean.smartBeforeCorrected' | sqMessage}}<a class=\"sq-did-you-mean-original\" href=\"#\" (click)=\"selectCorrected()\">{{item.corrected}}</a>{{'msg#didYouMean.smartAfterCorrected' | sqMessage}}\n    </ng-container>\n</div>","import {NgModule, Injectable, Inject, ModuleWithProviders, Type} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\nimport {Ng2UiAuthModule, /*IPartialConfigOptions,*/ CONFIG_OPTIONS, IProviders, StorageType, OauthService, PopupService} from \"ng2-ui-auth\";\nimport {A11yModule} from \"@angular/cdk/a11y\";\nimport {OverlayModule} from \"@angular/cdk/overlay\";\nimport {AuthenticationOauthService} from \"./authentication-oauth.service\";\nimport {AuthenticationPopupService} from \"./authentication-popup.service\";\n\n// Sinequa modules\nimport {BaseModule} from \"@sinequa/core/base\";\nimport {WebServicesModule, START_CONFIG, StartConfig} from \"@sinequa/core/web-services\";\nimport {ValidationModule} from \"@sinequa/core/validation\";\nimport {IntlModule} from \"@sinequa/core/intl\";\nimport {ModalModule} from \"@sinequa/core/modal\";\nimport {NotificationModule} from \"@sinequa/core/notification\";\nimport {AppUtilsModule} from \"@sinequa/core/app-utils\";\n\n// Login\nimport {MODAL_LOGIN} from \"./login.service\";\nimport {Login} from \"./login.component\";\n\nimport {LOGIN_MODULE_PROVIDERS} from \"./module.providers\";\n\nexport interface IPartialConfigOptions {} // until export restored to ng2-ui-auth@9\n\n/**\n * Configuration for the ng2-ui-auth library\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class AuthConfig implements IPartialConfigOptions {\n    storageType: StorageType;\n    providers: IProviders;\n    constructor(@Inject(START_CONFIG) startConfig: StartConfig) {\n        this.storageType = \"memory\" as StorageType;\n        this.providers = startConfig.providers || {};\n    }\n}\n\n/**\n * This module provides support for user authentication in the {@link AuthenticationService}. This authentication can be\n * automatic (OAuth/SAML), if configured in the Sinequa administration, or manual where the user name and password are\n * entered in a modal dialog box and transmitted in clear text. There is also support for the ng2-ui-auth library where the\n * authentication process occurs in a browser popup window. Authentication is instigated by the handling of HTTP 401 errors\n * in an `HttpInterceptor` so all web service calls requiring authentication are automatically protected. This module will\n * not be used for authentication when the web server is configured for Windows authentication.\n *\n * A higher level {@link LoginService} groups the successful retrieval of the current `application configuration` ({@link AppService}),\n * `principal` ({@link PrincipalWebService}), and `user settings` ({@link UserSettingsWebService}) all of which require the user\n * to be authenticated. This can be used as a \"gatekeeper\" to protect access to the main, often routed, component(s).\n *\n * The {@link LoginInterceptor} in this module must be registered using `HTTP_INTERCEPTORS` in your app module.\n */\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n\n        Ng2UiAuthModule.forRoot(undefined, false),\n        ModalModule.forRoot(),\n\n        // CDK\n        OverlayModule, // Needed for the modal service\n        A11yModule,\n\n        // Sinequa modules\n        BaseModule,\n        AppUtilsModule,\n        WebServicesModule,  // Required for start-up config (START_CONFIG token)\n        IntlModule,\n        ValidationModule,\n        NotificationModule\n    ],\n    declarations: [\n        Login, // Default Login components\n    ],\n    exports: [\n    ],\n    providers: [\n        // Auth module dependencies\n        {provide: CONFIG_OPTIONS, useClass: AuthConfig},\n        {provide: OauthService, useExisting: AuthenticationOauthService},\n        {provide: PopupService, useExisting: AuthenticationPopupService},\n\n        ...LOGIN_MODULE_PROVIDERS\n    ]\n})\nexport class LoginModule {\n    static forRoot(loginModal: Type<any> = Login): ModuleWithProviders<LoginModule> {\n        return {\n            ngModule: LoginModule,\n            providers: [\n                // Login\n                {provide: MODAL_LOGIN, useValue: loginModal},\n            ]\n        };\n    }\n}\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";","export * from \"./query/expr-parser\";\nexport * from \"./query/expr-builder\";\nexport * from \"./query/query\";\n\nexport * from \"./app.service\";\nexport * from \"./format.service\";\nexport * from \"./audit.interceptor\";\nexport * from \"./app-utils.module\";","export * from \"./public-api\";"]}