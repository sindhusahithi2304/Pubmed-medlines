import * as tslib_1 from "tslib";
import { Directive, ElementRef, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChange } from '@angular/core';
import { VisNetworkService } from './vis-network.service';
/**
 * Use this directive with a div container to show network data.
 *
 * @export
 * @class VisNetworkDirective
 * @implements {OnInit}
 * @implements {OnDestroy}
 * @implements {OnChanges}
 */
var VisNetworkDirective = /** @class */ (function () {
    /**
     * Creates an instance of VisNetworkDirective.
     *
     * @param {ElementRef} elementRef The HTML element reference.
     * @param {VisNetworkService} visNetworkService The VisNetworkService.
     *
     * @memberOf VisNetworkDirective
     */
    function VisNetworkDirective(elementRef, visNetworkService) {
        this.elementRef = elementRef;
        this.visNetworkService = visNetworkService;
        /**
         * This event will be raised when the network is initialized.
         * At this point of time the network is successfully registered
         * with the VisNetworkService and you can register to events.
         * The event data is the name of the network as a string.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisNetworkDirective
         */
        this.initialized = new EventEmitter();
        this.isInitialized = false;
        this.visNetworkContainer = elementRef.nativeElement;
    }
    /**
     * Create the network when at least visNetwork and visData
     * are defined.
     *
     * @memberOf VisNetworkDirective
     */
    VisNetworkDirective.prototype.ngOnInit = function () {
        if (!this.isInitialized && this.visNetwork && this.visNetworkData) {
            this.createNetwork();
        }
    };
    /**
     * Update the network data or options on reference changes to
     * the visData or visOptions properties.
     *
     * @param {{[propName: string]: SimpleChange}} changes
     *
     * @memberOf VisNetworkDirective
     */
    VisNetworkDirective.prototype.ngOnChanges = function (changes) {
        if (!this.isInitialized && this.visNetwork && this.visNetworkData) {
            this.createNetwork();
        }
        for (var propertyName in changes) {
            if (changes.hasOwnProperty(propertyName)) {
                var change = changes[propertyName];
                if (!change.isFirstChange()) {
                    if (propertyName === 'visData') {
                        this.visNetworkService.setData(this.visNetwork, changes[propertyName].currentValue);
                    }
                    if (propertyName === 'visOptions') {
                        this.visNetworkService.setOptions(this.visNetwork, changes[propertyName].currentValue);
                    }
                }
            }
        }
    };
    /**
     * Calls the destroy function for this network instance.
     *
     * @memberOf VisNetworkDirective
     */
    VisNetworkDirective.prototype.ngOnDestroy = function () {
        this.isInitialized = false;
        this.visNetworkService.destroy(this.visNetwork);
    };
    VisNetworkDirective.prototype.createNetwork = function () {
        this.visNetworkService.create(this.visNetwork, this.visNetworkContainer, this.visNetworkData, this.visNetworkOptions);
        this.isInitialized = true;
        this.initialized.emit(this.visNetwork);
    };
    VisNetworkDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: VisNetworkService }
    ]; };
    tslib_1.__decorate([
        Input('visNetwork')
    ], VisNetworkDirective.prototype, "visNetwork", void 0);
    tslib_1.__decorate([
        Input()
    ], VisNetworkDirective.prototype, "visNetworkData", void 0);
    tslib_1.__decorate([
        Input()
    ], VisNetworkDirective.prototype, "visNetworkOptions", void 0);
    tslib_1.__decorate([
        Output()
    ], VisNetworkDirective.prototype, "initialized", void 0);
    VisNetworkDirective = tslib_1.__decorate([
        Directive({
            selector: '[visNetwork]'
        })
    ], VisNetworkDirective);
    return VisNetworkDirective;
}());
export { VisNetworkDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzLW5ldHdvcmsuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXZpcy8iLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbmV0d29yay92aXMtbmV0d29yay5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvSCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRDs7Ozs7Ozs7R0FRRztBQUlIO0lBa0RFOzs7Ozs7O09BT0c7SUFDSCw2QkFBMkIsVUFBc0IsRUFBVSxpQkFBb0M7UUFBcEUsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUFVLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUF2Qi9GOzs7Ozs7OztXQVFHO1FBRUksZ0JBQVcsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUd4RCxrQkFBYSxHQUFZLEtBQUssQ0FBQztRQVdyQyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsVUFBVSxDQUFDLGFBQWEsQ0FBQztJQUN0RCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxzQ0FBUSxHQUFmO1FBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ2pFLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0kseUNBQVcsR0FBbEIsVUFBbUIsT0FBNkM7UUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ2pFLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtRQUVELEtBQUssSUFBTSxZQUFZLElBQUksT0FBTyxFQUFFO1lBQ2xDLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsRUFBRTtnQkFDeEMsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUNyQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxFQUFFO29CQUMzQixJQUFJLFlBQVksS0FBSyxTQUFTLEVBQUU7d0JBQzlCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUM7cUJBQ3JGO29CQUNELElBQUksWUFBWSxLQUFLLFlBQVksRUFBRTt3QkFDakMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQztxQkFDeEY7aUJBQ0Y7YUFDRjtTQUNGO0lBQ0gsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSx5Q0FBVyxHQUFsQjtRQUNFLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBQzNCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFTywyQ0FBYSxHQUFyQjtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN0SCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDekMsQ0FBQzs7Z0JBMURzQyxVQUFVO2dCQUE2QixpQkFBaUI7O0lBakQvRjtRQURDLEtBQUssQ0FBQyxZQUFZLENBQUM7MkRBQ007SUFZMUI7UUFEQyxLQUFLLEVBQUU7K0RBQ29CO0lBWTVCO1FBREMsS0FBSyxFQUFFO2tFQUMwQjtJQVlsQztRQURDLE1BQU0sRUFBRTs0REFDdUQ7SUE3Q3JELG1CQUFtQjtRQUgvQixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsY0FBYztTQUN6QixDQUFDO09BQ1csbUJBQW1CLENBcUgvQjtJQUFELDBCQUFDO0NBQUEsQUFySEQsSUFxSEM7U0FySFksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT25Jbml0LCBPdXRwdXQsIFNpbXBsZUNoYW5nZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRGF0YSwgT3B0aW9ucyB9IGZyb20gJ3Zpcy1uZXR3b3JrJztcblxuaW1wb3J0IHsgVmlzTmV0d29ya1NlcnZpY2UgfSBmcm9tICcuL3Zpcy1uZXR3b3JrLnNlcnZpY2UnO1xuXG4vKipcbiAqIFVzZSB0aGlzIGRpcmVjdGl2ZSB3aXRoIGEgZGl2IGNvbnRhaW5lciB0byBzaG93IG5ldHdvcmsgZGF0YS5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgVmlzTmV0d29ya0RpcmVjdGl2ZVxuICogQGltcGxlbWVudHMge09uSW5pdH1cbiAqIEBpbXBsZW1lbnRzIHtPbkRlc3Ryb3l9XG4gKiBAaW1wbGVtZW50cyB7T25DaGFuZ2VzfVxuICovXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbdmlzTmV0d29ya10nXG59KVxuZXhwb3J0IGNsYXNzIFZpc05ldHdvcmtEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgT25DaGFuZ2VzIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9yIGlkZW50aWZpZXIgb2YgdGhlIG5ldHdvcmsgKG11c3QgYmUgdW5pcXVlIGluIHlvdXIgYXBwbGljYXRpb24pLlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgb25jZSBvbiBpbml0IGFuZCBtdXN0IG5vdCBiZSBjaGFuZ2VkLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyT2YgVmlzTmV0d29ya0RpcmVjdGl2ZVxuICAgKi9cbiAgQElucHV0KCd2aXNOZXR3b3JrJylcbiAgcHVibGljIHZpc05ldHdvcms6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGRhdGEgdGhhdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSBuZXR3b3JrLlxuICAgKiBDaGFuZ2VzIHRvIHRoZSBub2RlcyBvciBlZGdlcyBwcm9wZXJ0eSB3b24ndCBiZSBkZXRlY3RlZCBidXRcbiAgICogY2hhbmdlcyB0byB0aGUgcmVmZXJlbmNlIG9mIHRoaXMgb2JqZWN0LlxuICAgKiBDaGFuZ2VzIGxlYWQgdG8gYSBjYWxsIHRvIHNldERhdGEgb2YgdGhpcyBuZXR3b3JrIGluc3RhbmNlLlxuICAgKlxuICAgKiBAdHlwZSB7RGF0YX1cbiAgICogQG1lbWJlck9mIFZpc05ldHdvcmtEaXJlY3RpdmVcbiAgICovXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyB2aXNOZXR3b3JrRGF0YTogRGF0YTtcblxuICAvKipcbiAgICogVGhlIG9wdGlvbnMgdGhhdCB3aWxsIGJlIHVzZWQgd2l0aCB0aGlzIG5ldHdvcmsgaW5zdGFuY2UuXG4gICAqIE9ubHkgcmVmZXJlbmNlIGNoYW5nZXMgdG8gdGhlIHdob2xlIG9wdGlvbnMgb2JqZWN0IHdpbGwgYmUgZGV0ZWN0ZWRcbiAgICogYnV0IG5vdCBjaGFuZ2VzIHRvIHByb3BlcnRpZXMuXG4gICAqIENoYW5nZXMgbGVhZCB0byBhIGNhbGwgdG8gc2V0T3B0aW9ucyBvZiB0aGUgbmV0d29yayBpbnN0YW5jZS5cbiAgICpcbiAgICogQHR5cGUge1Zpc09wdGlvbnN9XG4gICAqIEBtZW1iZXJPZiBWaXNOZXR3b3JrRGlyZWN0aXZlXG4gICAqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgdmlzTmV0d29ya09wdGlvbnM6IE9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIFRoaXMgZXZlbnQgd2lsbCBiZSByYWlzZWQgd2hlbiB0aGUgbmV0d29yayBpcyBpbml0aWFsaXplZC5cbiAgICogQXQgdGhpcyBwb2ludCBvZiB0aW1lIHRoZSBuZXR3b3JrIGlzIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkXG4gICAqIHdpdGggdGhlIFZpc05ldHdvcmtTZXJ2aWNlIGFuZCB5b3UgY2FuIHJlZ2lzdGVyIHRvIGV2ZW50cy5cbiAgICogVGhlIGV2ZW50IGRhdGEgaXMgdGhlIG5hbWUgb2YgdGhlIG5ldHdvcmsgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICogQG1lbWJlck9mIFZpc05ldHdvcmtEaXJlY3RpdmVcbiAgICovXG4gIEBPdXRwdXQoKVxuICBwdWJsaWMgaW5pdGlhbGl6ZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgcHJpdmF0ZSB2aXNOZXR3b3JrQ29udGFpbmVyOiBhbnk7XG4gIHByaXZhdGUgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFZpc05ldHdvcmtEaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudFJlZn0gZWxlbWVudFJlZiBUaGUgSFRNTCBlbGVtZW50IHJlZmVyZW5jZS5cbiAgICogQHBhcmFtIHtWaXNOZXR3b3JrU2VydmljZX0gdmlzTmV0d29ya1NlcnZpY2UgVGhlIFZpc05ldHdvcmtTZXJ2aWNlLlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzTmV0d29ya0RpcmVjdGl2ZVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSB2aXNOZXR3b3JrU2VydmljZTogVmlzTmV0d29ya1NlcnZpY2UpIHtcbiAgICB0aGlzLnZpc05ldHdvcmtDb250YWluZXIgPSBlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBuZXR3b3JrIHdoZW4gYXQgbGVhc3QgdmlzTmV0d29yayBhbmQgdmlzRGF0YVxuICAgKiBhcmUgZGVmaW5lZC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc05ldHdvcmtEaXJlY3RpdmVcbiAgICovXG4gIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCAmJiB0aGlzLnZpc05ldHdvcmsgJiYgdGhpcy52aXNOZXR3b3JrRGF0YSkge1xuICAgICAgdGhpcy5jcmVhdGVOZXR3b3JrKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgbmV0d29yayBkYXRhIG9yIG9wdGlvbnMgb24gcmVmZXJlbmNlIGNoYW5nZXMgdG9cbiAgICogdGhlIHZpc0RhdGEgb3IgdmlzT3B0aW9ucyBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3tbcHJvcE5hbWU6IHN0cmluZ106IFNpbXBsZUNoYW5nZX19IGNoYW5nZXNcbiAgICpcbiAgICogQG1lbWJlck9mIFZpc05ldHdvcmtEaXJlY3RpdmVcbiAgICovXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiB7IFtwcm9wTmFtZTogc3RyaW5nXTogU2ltcGxlQ2hhbmdlIH0pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCAmJiB0aGlzLnZpc05ldHdvcmsgJiYgdGhpcy52aXNOZXR3b3JrRGF0YSkge1xuICAgICAgdGhpcy5jcmVhdGVOZXR3b3JrKCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWUgaW4gY2hhbmdlcykge1xuICAgICAgaWYgKGNoYW5nZXMuaGFzT3duUHJvcGVydHkocHJvcGVydHlOYW1lKSkge1xuICAgICAgICBjb25zdCBjaGFuZ2UgPSBjaGFuZ2VzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgIGlmICghY2hhbmdlLmlzRmlyc3RDaGFuZ2UoKSkge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICd2aXNEYXRhJykge1xuICAgICAgICAgICAgdGhpcy52aXNOZXR3b3JrU2VydmljZS5zZXREYXRhKHRoaXMudmlzTmV0d29yaywgY2hhbmdlc1twcm9wZXJ0eU5hbWVdLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICd2aXNPcHRpb25zJykge1xuICAgICAgICAgICAgdGhpcy52aXNOZXR3b3JrU2VydmljZS5zZXRPcHRpb25zKHRoaXMudmlzTmV0d29yaywgY2hhbmdlc1twcm9wZXJ0eU5hbWVdLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxzIHRoZSBkZXN0cm95IGZ1bmN0aW9uIGZvciB0aGlzIG5ldHdvcmsgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNOZXR3b3JrRGlyZWN0aXZlXG4gICAqL1xuICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhpcy52aXNOZXR3b3JrU2VydmljZS5kZXN0cm95KHRoaXMudmlzTmV0d29yayk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU5ldHdvcmsoKTogdm9pZCB7XG4gICAgdGhpcy52aXNOZXR3b3JrU2VydmljZS5jcmVhdGUodGhpcy52aXNOZXR3b3JrLCB0aGlzLnZpc05ldHdvcmtDb250YWluZXIsIHRoaXMudmlzTmV0d29ya0RhdGEsIHRoaXMudmlzTmV0d29ya09wdGlvbnMpO1xuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgdGhpcy5pbml0aWFsaXplZC5lbWl0KHRoaXMudmlzTmV0d29yayk7XG4gIH1cbn1cbiJdfQ==