import * as tslib_1 from "tslib";
import { Directive, ElementRef, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChange } from '@angular/core';
import { VisTimelineService } from './vis-timeline.service';
/**
 * Use this directive with a div container to show timeline data.
 *
 * @export
 * @class VisTimelineDirective
 * @implements {OnInit}
 * @implements {OnDestroy}
 * @implements {OnChanges}
 */
let VisTimelineDirective = class VisTimelineDirective {
    /**
     * Creates an instance of VisTimelineDirective.
     *
     * @param {ElementRef} elementRef The HTML element reference.
     * @param {VisTimelineService} visTimelineService The VisTimelineService.
     *
     * @memberOf VisTimelineDirective
     */
    constructor(elementRef, visTimelineService) {
        this.elementRef = elementRef;
        this.visTimelineService = visTimelineService;
        /**
         * This event will be raised when the timline is initialized.
         * At this point of time the timeline is successfully registered
         * with the VisNetworkService and you can register to events.
         * The event data is the name of the timeline as a string.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineDirective
         */
        this.initialized = new EventEmitter();
        this.isInitialized = false;
        this.visTimelineContainer = elementRef.nativeElement;
    }
    /**
     * Create the timeline when at least visNetwork and visNetworkData
     * are defined.
     *
     * @memberOf VisTimelineDirective
     */
    ngOnInit() {
        if (!this.isInitialized && this.visTimeline && this.visTimelineItems) {
            this.createTimeline();
        }
    }
    /**
     * Update the timeline data, groups or options on reference changes to
     * the visTimelineItems, visTimelineGroups or visTimelineOptions properties.
     *
     * @param {{[propName: string]: SimpleChange}} changes
     *
     * @memberOf VisTimelineDirective
     */
    ngOnChanges(changes) {
        if (!this.isInitialized && this.visTimeline && this.visTimelineItems) {
            this.createTimeline();
        }
        for (const propertyName in changes) {
            if (changes.hasOwnProperty(propertyName)) {
                const change = changes[propertyName];
                if (!change.isFirstChange()) {
                    if (propertyName === 'visTimelineItems') {
                        this.visTimelineService.setItems(this.visTimeline, changes[propertyName].currentValue);
                    }
                    if (propertyName === 'visTimelineOptions') {
                        this.visTimelineService.setOptions(this.visTimeline, changes[propertyName].currentValue);
                    }
                    if (propertyName === 'visTimelineGroups') {
                        this.visTimelineService.setGroups(this.visTimeline, changes[propertyName].currentValue);
                    }
                }
            }
        }
    }
    /**
     * Calls the destroy function for this timeline instance.
     *
     *
     * @memberOf VisTimelineDirective
     */
    ngOnDestroy() {
        this.isInitialized = false;
        this.visTimelineService.destroy(this.visTimeline);
    }
    createTimeline() {
        if (this.visTimelineGroups) {
            this.visTimelineService.createWithItemsAndGroups(this.visTimeline, this.visTimelineContainer, this.visTimelineItems, this.visTimelineGroups, this.visTimelineOptions);
        }
        else {
            this.visTimelineService.createWithItems(this.visTimeline, this.visTimelineContainer, this.visTimelineItems, this.visTimelineOptions);
        }
        this.isInitialized = true;
        this.initialized.emit(this.visTimeline);
    }
};
VisTimelineDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: VisTimelineService }
];
tslib_1.__decorate([
    Input('visTimeline')
], VisTimelineDirective.prototype, "visTimeline", void 0);
tslib_1.__decorate([
    Input()
], VisTimelineDirective.prototype, "visTimelineItems", void 0);
tslib_1.__decorate([
    Input()
], VisTimelineDirective.prototype, "visTimelineGroups", void 0);
tslib_1.__decorate([
    Input()
], VisTimelineDirective.prototype, "visTimelineOptions", void 0);
tslib_1.__decorate([
    Output()
], VisTimelineDirective.prototype, "initialized", void 0);
VisTimelineDirective = tslib_1.__decorate([
    Directive({
        selector: '[visTimeline]'
    })
], VisTimelineDirective);
export { VisTimelineDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzLXRpbWVsaW5lLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC12aXMvIiwic291cmNlcyI6WyJjb21wb25lbnRzL3RpbWVsaW5lL3Zpcy10aW1lbGluZS5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvSCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUU1RDs7Ozs7Ozs7R0FRRztBQUlILElBQWEsb0JBQW9CLEdBQWpDLE1BQWEsb0JBQW9CO0lBMkQvQjs7Ozs7OztPQU9HO0lBQ0gsWUFBMkIsVUFBc0IsRUFBVSxrQkFBc0M7UUFBdEUsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUFVLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7UUF2QmpHOzs7Ozs7OztXQVFHO1FBRUksZ0JBQVcsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUd4RCxrQkFBYSxHQUFZLEtBQUssQ0FBQztRQVdyQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsVUFBVSxDQUFDLGFBQWEsQ0FBQztJQUN2RCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxRQUFRO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7WUFDcEUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3ZCO0lBQ0gsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSSxXQUFXLENBQUMsT0FBNkM7UUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7WUFDcEUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3ZCO1FBRUQsS0FBSyxNQUFNLFlBQVksSUFBSSxPQUFPLEVBQUU7WUFDbEMsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxFQUFFO2dCQUN4QyxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ3JDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLEVBQUU7b0JBQzNCLElBQUksWUFBWSxLQUFLLGtCQUFrQixFQUFFO3dCQUN2QyxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDO3FCQUN4RjtvQkFDRCxJQUFJLFlBQVksS0FBSyxvQkFBb0IsRUFBRTt3QkFDekMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQztxQkFDMUY7b0JBQ0QsSUFBSSxZQUFZLEtBQUssbUJBQW1CLEVBQUU7d0JBQ3hDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUM7cUJBQ3pGO2lCQUNGO2FBQ0Y7U0FDRjtJQUNILENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLFdBQVc7UUFDaEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDM0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVPLGNBQWM7UUFDcEIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLHdCQUF3QixDQUM5QyxJQUFJLENBQUMsV0FBVyxFQUNoQixJQUFJLENBQUMsb0JBQW9CLEVBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsRUFDckIsSUFBSSxDQUFDLGlCQUFpQixFQUN0QixJQUFJLENBQUMsa0JBQWtCLENBQ3hCLENBQUM7U0FDSDthQUFNO1lBQ0wsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7U0FDdEk7UUFDRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDMUMsQ0FBQztDQUNGLENBQUE7O1lBekV3QyxVQUFVO1lBQThCLGtCQUFrQjs7QUExRGpHO0lBREMsS0FBSyxDQUFDLGFBQWEsQ0FBQzt5REFDTTtBQVczQjtJQURDLEtBQUssRUFBRTs4REFDd0M7QUFXaEQ7SUFEQyxLQUFLLEVBQUU7K0RBQzBDO0FBV2xEO0lBREMsS0FBSyxFQUFFO2dFQUNtQztBQVkzQztJQURDLE1BQU0sRUFBRTt5REFDdUQ7QUF0RHJELG9CQUFvQjtJQUhoQyxTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsZUFBZTtLQUMxQixDQUFDO0dBQ1csb0JBQW9CLENBNEloQztTQTVJWSxvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgU2ltcGxlQ2hhbmdlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEYXRhR3JvdXBDb2xsZWN0aW9uVHlwZSwgRGF0YUl0ZW1Db2xsZWN0aW9uVHlwZSwgVGltZWxpbmVPcHRpb25zIH0gZnJvbSAndmlzLXRpbWVsaW5lJztcblxuaW1wb3J0IHsgVmlzVGltZWxpbmVTZXJ2aWNlIH0gZnJvbSAnLi92aXMtdGltZWxpbmUuc2VydmljZSc7XG5cbi8qKlxuICogVXNlIHRoaXMgZGlyZWN0aXZlIHdpdGggYSBkaXYgY29udGFpbmVyIHRvIHNob3cgdGltZWxpbmUgZGF0YS5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgVmlzVGltZWxpbmVEaXJlY3RpdmVcbiAqIEBpbXBsZW1lbnRzIHtPbkluaXR9XG4gKiBAaW1wbGVtZW50cyB7T25EZXN0cm95fVxuICogQGltcGxlbWVudHMge09uQ2hhbmdlc31cbiAqL1xuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3Zpc1RpbWVsaW5lXSdcbn0pXG5leHBvcnQgY2xhc3MgVmlzVGltZWxpbmVEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgT25DaGFuZ2VzIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9yIGlkZW50aWZpZXIgb2YgdGhlIHRpbWVsaW5lIChtdXN0IGJlIHVuaXF1ZSBpbiB5b3VyIGFwcGxpY2F0aW9uKS5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyB1c2VkIG9uY2Ugb24gaW5pdCBhbmQgbXVzdCBub3QgYmUgY2hhbmdlZC5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lRGlyZWN0aXZlXG4gICAqL1xuICBASW5wdXQoJ3Zpc1RpbWVsaW5lJylcbiAgcHVibGljIHZpc1RpbWVsaW5lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXRhIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSB0aGUgdGltZWxpbmUuXG4gICAqIENoYW5nZXMgd2lsbCBiZSBkZXRlY3RlZC4gSWYgdGhlIHJlZmVyZW5jZSBjaGFuZ2VzIHRoZW5cbiAgICogc2V0RGF0YSB3aWxsIGJlIGNhbGxlZCBvbiB0aGlzIHRpbWVsaW5lIGluc3RhbmNlLlxuICAgKlxuICAgKiBAdHlwZSB7VmlzVGltZWxpbmVJdGVtc31cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lRGlyZWN0aXZlXG4gICAqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgdmlzVGltZWxpbmVJdGVtczogRGF0YUl0ZW1Db2xsZWN0aW9uVHlwZTtcblxuICAvKipcbiAgICogVGhlIGdyb3VwcyB0aGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdGhlIHRpbWVsaW5lLlxuICAgKiBDaGFuZ2VzIHdpbGwgYmUgZGV0ZWN0ZWQuIElmIHRoZSByZWZlcmVuY2UgY2hhbmdlcyB0aGVuXG4gICAqIHNldEdyb3VwcyB3aWxsIGJlIGNhbGxlZCBvbiB0aGlzIHRpbWVsaW5lIGluc3RhbmNlLlxuICAgKlxuICAgKiBAdHlwZSB7VmlzVGltZWxpbmVHcm91cHN9XG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZURpcmVjdGl2ZVxuICAgKi9cbiAgQElucHV0KClcbiAgcHVibGljIHZpc1RpbWVsaW5lR3JvdXBzOiBEYXRhR3JvdXBDb2xsZWN0aW9uVHlwZTtcblxuICAvKipcbiAgICogVGhlIG9wdGlvbnMgdGhhdCB3aWxsIGJlIHVzZWQgd2l0aCB0aGlzIHRpbWVsaW5lLlxuICAgKiBDaGFuZ2VzIHdpbGwgYmUgZGV0ZWN0ZWQuIElmIHRoZSByZWZlcmVuY2UgY2hhbmdlcyB0aGVuXG4gICAqIHNldE9wdGlvbnMgd2lsbCBiZSBjYWxsZWQgb24gdGhpcyB0aW1lbGluZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHR5cGUge1Zpc1RpbWVsaW5lT3B0aW9uc31cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lRGlyZWN0aXZlXG4gICAqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgdmlzVGltZWxpbmVPcHRpb25zOiBUaW1lbGluZU9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIFRoaXMgZXZlbnQgd2lsbCBiZSByYWlzZWQgd2hlbiB0aGUgdGltbGluZSBpcyBpbml0aWFsaXplZC5cbiAgICogQXQgdGhpcyBwb2ludCBvZiB0aW1lIHRoZSB0aW1lbGluZSBpcyBzdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZFxuICAgKiB3aXRoIHRoZSBWaXNOZXR3b3JrU2VydmljZSBhbmQgeW91IGNhbiByZWdpc3RlciB0byBldmVudHMuXG4gICAqIFRoZSBldmVudCBkYXRhIGlzIHRoZSBuYW1lIG9mIHRoZSB0aW1lbGluZSBhcyBhIHN0cmluZy5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50RW1pdHRlcjxhbnk+fVxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVEaXJlY3RpdmVcbiAgICovXG4gIEBPdXRwdXQoKVxuICBwdWJsaWMgaW5pdGlhbGl6ZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgcHJpdmF0ZSB2aXNUaW1lbGluZUNvbnRhaW5lcjogYW55O1xuICBwcml2YXRlIGlzSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBWaXNUaW1lbGluZURpcmVjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50UmVmfSBlbGVtZW50UmVmIFRoZSBIVE1MIGVsZW1lbnQgcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge1Zpc1RpbWVsaW5lU2VydmljZX0gdmlzVGltZWxpbmVTZXJ2aWNlIFRoZSBWaXNUaW1lbGluZVNlcnZpY2UuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZURpcmVjdGl2ZVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSB2aXNUaW1lbGluZVNlcnZpY2U6IFZpc1RpbWVsaW5lU2VydmljZSkge1xuICAgIHRoaXMudmlzVGltZWxpbmVDb250YWluZXIgPSBlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSB0aW1lbGluZSB3aGVuIGF0IGxlYXN0IHZpc05ldHdvcmsgYW5kIHZpc05ldHdvcmtEYXRhXG4gICAqIGFyZSBkZWZpbmVkLlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVEaXJlY3RpdmVcbiAgICovXG4gIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCAmJiB0aGlzLnZpc1RpbWVsaW5lICYmIHRoaXMudmlzVGltZWxpbmVJdGVtcykge1xuICAgICAgdGhpcy5jcmVhdGVUaW1lbGluZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHRpbWVsaW5lIGRhdGEsIGdyb3VwcyBvciBvcHRpb25zIG9uIHJlZmVyZW5jZSBjaGFuZ2VzIHRvXG4gICAqIHRoZSB2aXNUaW1lbGluZUl0ZW1zLCB2aXNUaW1lbGluZUdyb3VwcyBvciB2aXNUaW1lbGluZU9wdGlvbnMgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIHt7W3Byb3BOYW1lOiBzdHJpbmddOiBTaW1wbGVDaGFuZ2V9fSBjaGFuZ2VzXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZURpcmVjdGl2ZVxuICAgKi9cbiAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IHsgW3Byb3BOYW1lOiBzdHJpbmddOiBTaW1wbGVDaGFuZ2UgfSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkICYmIHRoaXMudmlzVGltZWxpbmUgJiYgdGhpcy52aXNUaW1lbGluZUl0ZW1zKSB7XG4gICAgICB0aGlzLmNyZWF0ZVRpbWVsaW5lKCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWUgaW4gY2hhbmdlcykge1xuICAgICAgaWYgKGNoYW5nZXMuaGFzT3duUHJvcGVydHkocHJvcGVydHlOYW1lKSkge1xuICAgICAgICBjb25zdCBjaGFuZ2UgPSBjaGFuZ2VzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgIGlmICghY2hhbmdlLmlzRmlyc3RDaGFuZ2UoKSkge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICd2aXNUaW1lbGluZUl0ZW1zJykge1xuICAgICAgICAgICAgdGhpcy52aXNUaW1lbGluZVNlcnZpY2Uuc2V0SXRlbXModGhpcy52aXNUaW1lbGluZSwgY2hhbmdlc1twcm9wZXJ0eU5hbWVdLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICd2aXNUaW1lbGluZU9wdGlvbnMnKSB7XG4gICAgICAgICAgICB0aGlzLnZpc1RpbWVsaW5lU2VydmljZS5zZXRPcHRpb25zKHRoaXMudmlzVGltZWxpbmUsIGNoYW5nZXNbcHJvcGVydHlOYW1lXS5jdXJyZW50VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSAndmlzVGltZWxpbmVHcm91cHMnKSB7XG4gICAgICAgICAgICB0aGlzLnZpc1RpbWVsaW5lU2VydmljZS5zZXRHcm91cHModGhpcy52aXNUaW1lbGluZSwgY2hhbmdlc1twcm9wZXJ0eU5hbWVdLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxzIHRoZSBkZXN0cm95IGZ1bmN0aW9uIGZvciB0aGlzIHRpbWVsaW5lIGluc3RhbmNlLlxuICAgKlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVEaXJlY3RpdmVcbiAgICovXG4gIHB1YmxpYyBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnZpc1RpbWVsaW5lU2VydmljZS5kZXN0cm95KHRoaXMudmlzVGltZWxpbmUpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUaW1lbGluZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy52aXNUaW1lbGluZUdyb3Vwcykge1xuICAgICAgdGhpcy52aXNUaW1lbGluZVNlcnZpY2UuY3JlYXRlV2l0aEl0ZW1zQW5kR3JvdXBzKFxuICAgICAgICB0aGlzLnZpc1RpbWVsaW5lLFxuICAgICAgICB0aGlzLnZpc1RpbWVsaW5lQ29udGFpbmVyLFxuICAgICAgICB0aGlzLnZpc1RpbWVsaW5lSXRlbXMsXG4gICAgICAgIHRoaXMudmlzVGltZWxpbmVHcm91cHMsXG4gICAgICAgIHRoaXMudmlzVGltZWxpbmVPcHRpb25zXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZpc1RpbWVsaW5lU2VydmljZS5jcmVhdGVXaXRoSXRlbXModGhpcy52aXNUaW1lbGluZSwgdGhpcy52aXNUaW1lbGluZUNvbnRhaW5lciwgdGhpcy52aXNUaW1lbGluZUl0ZW1zLCB0aGlzLnZpc1RpbWVsaW5lT3B0aW9ucyk7XG4gICAgfVxuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgdGhpcy5pbml0aWFsaXplZC5lbWl0KHRoaXMudmlzVGltZWxpbmUpO1xuICB9XG59XG4iXX0=