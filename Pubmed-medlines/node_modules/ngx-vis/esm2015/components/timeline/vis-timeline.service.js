import * as tslib_1 from "tslib";
import { EventEmitter, Injectable, NgZone } from '@angular/core';
import { Timeline } from 'vis-timeline';
/**
 * A service to create, manage and control VisTimeline instances.
 *
 * @export
 * @class VisTimelineService
 */
let VisTimelineService = class VisTimelineService {
    constructor(ngZone) {
        this.ngZone = ngZone;
        /**
         * Fired when the current time bar redraws.
         * The rate depends on the zoom level.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.currentTimeTick = new EventEmitter();
        /**
         * Fired when clicked inside the Timeline.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.click = new EventEmitter();
        /**
         * Fired when right-clicked inside the Timeline.
         * Note that in order to prevent the context menu from showing up,
         * default behavior of the event must be stopped.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.contextmenu = new EventEmitter();
        /**
         * Fired when double clicked inside the Timeline.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.doubleClick = new EventEmitter();
        /**
         * 	Fired after the dragging of a group is finished.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.groupDragged = new EventEmitter();
        /**
         * Fired once after each graph redraw.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.changed = new EventEmitter();
        /**
         * Fired repeatedly when the timeline window is being changed.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.rangechange = new EventEmitter();
        /**
         * Fired once after the timeline window has been changed.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.rangechanged = new EventEmitter();
        /**
         * Fired after the user selects or deselects items by tapping or holding them.
         * When a use taps an already selected item, the select event is fired again.
         * Not fired when the method setSelectionis executed.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.select = new EventEmitter();
        /**
         * Fired when the user moves the mouse over an item.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.itemover = new EventEmitter();
        /**
         * Fired when the user moves the mouse out of an item.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.itemout = new EventEmitter();
        /**
         * Fired repeatedly when the user is dragging the custom time bar.
         * Only available when the custom time bar is enabled.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.timechange = new EventEmitter();
        /**
         * Fired once after the user has dragged the custom time bar.
         * Only available when the custom time bar is enabled.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisTimelineService
         */
        this.timechanged = new EventEmitter();
        this.events = new Map();
        this.timelines = {};
    }
    /**
     * Creates a new timeline instance.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {HTMLElement} container The HTML element that contains the timeline view.
     * @param {VisTimelineItems} items The initial timeline items.
     * @param {VisTimelineOptions} [options] The timeline options.
     *
     * @throws {Error} Thrown when timeline already exists.
     *
     * @memberOf VisTimelineService
     */
    createWithItems(visTimeline, container, items, options) {
        if (this.timelines[visTimeline]) {
            throw new Error(this.alreadyExistsError(visTimeline));
        }
        this.timelines[visTimeline] = this.ngZone.runOutsideAngular(() => new Timeline(container, items, options));
    }
    /**
     * Creates a new timeline instance.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {HTMLElement} container The HTML element that contains the timeline view.
     * @param {VisTimelineItems} items The initial timeline items.
     * @param {VisTimelineGroups} groups The initial timeline groups.
     * @param {VisTimelineOptions} [options] The timeline options.
     *
     * @throws {Error} Thrown when timeline already exists.
     *
     * @memberOf VisTimelineService
     */
    createWithItemsAndGroups(visTimeline, container, items, groups, options) {
        if (this.timelines[visTimeline]) {
            throw new Error(this.alreadyExistsError(visTimeline));
        }
        this.timelines[visTimeline] = this.ngZone.runOutsideAngular(() => new Timeline(container, items, groups, options));
    }
    /**
     * Add new vertical bar representing a custom time that can be dragged by the user.
     * The id is added as CSS class name of the custom time bar,
     * allowing to style multiple time bars differently.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {DateType} time Parameter time can be a Date, Number, or String, and is new Date() by default.
     * @param {IdType} [id] Parameter id can be Number or String and is undefined by default.
     * @returns {IdType} The method returns id of the created bar.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    addCustomTime(visTimeline, time, id) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].addCustomTime(time, id);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Adjust the visible window such that it fits all items.
     * See also function focus(id).
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {TimelineAnimationOptions} [options] Optional options.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    fit(visTimeline, options) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].fit(options);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Adjust the visible window such that the selected item is centered on screen.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {IdType} id The id of the item.
     * @param {TimelineAnimationOptions} [options] Options options.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    focusOnId(visTimeline, id, options) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].focus(id, options);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Adjust the visible window such that the selected items are centered on screen.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {IdType[]} ids The item ids.
     * @param {TimelineAnimationOptions} [options] Optional options.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    focusOnIds(visTimeline, ids, options) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].focus(ids, options);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Get the current time.
     * Only applicable when option showCurrentTime is true.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @returns {Date} The current time.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    getCurrentTime(visTimeline) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].getCurrentTime();
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Retrieve the custom time from the custom time bar with given id.
     * Id is undefined by default.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {IdType} [id] The time bar id.
     * @returns {Date} The custom time.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    getCustomTime(visTimeline, id) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].getCustomTime(id);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Returns an Object with relevant properties from an event.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {Event} event The event.
     * @returns {VisTimelineEventPropertiesResult} Properties of an event
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    getEventProperties(visTimeline, event) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].getEventProperties(event);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Get the range of all the items as an object containing min: Date and max: Date.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @returns {{ min: Date, max: Date }} The min and max dates.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    getItemRange(visTimeline) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].getItemRange();
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Get an array with the ids of the currently selected items.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @returns {IdType[]} The currently selected items.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    getSelection(visTimeline) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].getSelection();
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Get an array with the ids of the currently visible items.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @returns {IdType[]} The currently visible items.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    getVisibleItems(visTimeline) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].getVisibleItems();
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Get the current visible window.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @returns {{ start: Date, end: Date }} Returns an object with properties start: Date and end: Date.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    getWindow(visTimeline) {
        if (this.timelines[visTimeline]) {
            return this.timelines[visTimeline].getWindow();
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * 	Move the window such that given time is centered on screen.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {DateType} time Parameter time can be a Date, Number, or String.
     * @param {TimelineAnimationOptions} [options] Optional options.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    moveTo(visTimeline, time, options) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].moveTo(time, options);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Force a redraw of the Timeline.
     * The size of all items will be recalculated.
     * Can be useful to manually redraw when option autoResize=false and the window has been resized,
     * or when the items CSS has been changed.
     *
     * @param {string} visTimeline The timeline name/identifier.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    redraw(visTimeline) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].redraw();
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Remove vertical bars previously added to the timeline via addCustomTime method.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {IdType} id Parameter id is the ID of the custom vertical bar returned by addCustomTime method.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    removeCustomTime(visTimeline, id) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].removeCustomTime(id);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Set a current time.
     * This can be used for example to ensure that a client's time is synchronized
     * with a shared server time.
     * Only applicable when option showCurrentTime is true.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {DateType} time time can be a Date object, numeric timestamp, or ISO date string.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setCurrentTime(visTimeline, time) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setCurrentTime(time);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * 	Adjust the time of a custom time bar.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {DateType} time Parameter time can be a Date object, numeric timestamp, or ISO date string.
     * @param {IdType} [id] Parameter id is the id of the custom time bar, and is undefined by default.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setCustomTime(visTimeline, time, id) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setCustomTime(time, id);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Adjust the title attribute of a custom time bar.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {string} title Parameter title is the string to be set as title.
     *                       Use empty string to hide the title completely.
     * @param {IdType} [id] Parameter id is the id of the custom time bar, and is undefined by default.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setCustomTimeTitle(visTimeline, title, id) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setCustomTimeTitle(title, id);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Set both groups and items at once.
     * Both properties are optional.
     * This is a convenience method for individually calling both setItems(items) and setGroups(groups).
     * Both items and groups can be an Array with Objects, a DataSet (offering 2 way data binding),
     * or a DataView (offering 1 way data binding).
     * For each of the groups, the items of the timeline are filtered on the property group,
     * which must correspond with the id of the group.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {{ groups?: VisTimelineGroups; items?: VisTimelineItems }} data The new timline data.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setData(visTimeline, data) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setData(data);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Set a data set with groups for the Timeline.
     * For each of the groups, the items of the timeline are filtered on the property group,
     * which must correspond with the id of the group.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {VisTimelineGroups} groups a DataSet (offering 2 way data binding)
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setGroups(visTimeline, groups) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setGroups(groups);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Set a data set with items for the Timeline.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {VisTimelineItems} items can be an Array with Objects, a DataSet (offering 2 way data binding)
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setItems(visTimeline, items) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setItems(items);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Set or update options.
     * It is possible to change any option of the timeline at any time.
     * You can for example switch orientation on the fly.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {VisTimelineOptions} options The new options of the timeline.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setOptions(visTimeline, options) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setOptions(options);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Select one item by its id.#
     * The currently selected items will be unselected.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {IdType} id The id of the item that should be selected.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setSelectionToId(visTimeline, id) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setSelection(id);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Select multiple items by their id.
     * The currently selected items will be unselected.
     * To unselect all selected items, call `setSelection([])`.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {IdType[]} ids The ids of the irems that should be selected.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setSelectionToIds(visTimeline, ids) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setSelection(ids);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Set the current visible window.
     *
     * If the parameter value of start or end is null, the parameter will be left unchanged.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {DateType} start The parameters start can be a Date, Number, or String.
     * @param {DateType} end The parameters end can be a Date, Number, or String.
     * @param {TimelineAnimationOptions} [options] Optional options.
     *
     * @throws {Error} Thrown when timeline does not exist.
     *
     * @memberOf VisTimelineService
     */
    setWindow(visTimeline, start, end, options) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].setWindow(start, end, options);
        }
        else {
            throw new Error(this.doesNotExistError(visTimeline));
        }
    }
    /**
     * Destroy the Timeline.
     * The timeline is removed from memory.
     * All DOM elements and event listeners are cleaned up.
     *
     * @param {string} visTimeline The timeline name/identifier.
     *
     * @memberOf VisTimelineService
     */
    destroy(visTimeline) {
        if (this.timelines[visTimeline]) {
            this.timelines[visTimeline].destroy();
            delete this.timelines[visTimeline];
        }
    }
    /**
     * Activates an event.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {string} eventName The event name.
     * @param {boolean} preventDefault Stops the default behavior of the event.
     * @returns {boolean} Returns true when the event was activated.
     *
     * @memberOf VisTimelineService
     */
    on(visTimeline, eventName, preventDefault) {
        if (this.timelines[visTimeline]) {
            this.events.set(eventName, new EventEmitter());
            // tslint:disable-next-line
            const that = this;
            this.timelines[visTimeline].on(eventName, (params) => {
                const emitter = (that[eventName] || that.events.get(eventName));
                if (emitter) {
                    emitter.emit(params ? [visTimeline].concat(params) : visTimeline);
                }
                if (preventDefault && params.event) {
                    params.event.preventDefault();
                }
            });
            return true;
        }
        return false;
    }
    /**
     * Deactivates an event.
     *
     * @param {string} visTimeline The timeline name/identifier.
     * @param {string} eventName The event name.
     *
     * @memberOf VisTimelineService
     */
    off(visTimeline, eventName) {
        if (this.timelines[visTimeline]) {
            this.events.delete(eventName);
            this.timelines[visTimeline].off(eventName, undefined);
        }
    }
    /**
     * Get the event emitter associated with the specified event name.
     * @param {string} eventName The event name.
     * @returns {EventEmitter<any>} The event emitter of the specified event name.
     */
    getEmitter(eventName) {
        return this.events.get(eventName);
    }
    doesNotExistError(visTimeline) {
        return `Timeline with id ${visTimeline} does not exist.`;
    }
    alreadyExistsError(visTimeline) {
        return `Timeline with id ${visTimeline} already exists.`;
    }
};
VisTimelineService.ctorParameters = () => [
    { type: NgZone }
];
VisTimelineService = tslib_1.__decorate([
    Injectable()
], VisTimelineService);
export { VisTimelineService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzLXRpbWVsaW5lLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtdmlzLyIsInNvdXJjZXMiOlsiY29tcG9uZW50cy90aW1lbGluZS92aXMtdGltZWxpbmUuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pFLE9BQU8sRUFLTCxRQUFRLEVBSVQsTUFBTSxjQUFjLENBQUM7QUFFdEI7Ozs7O0dBS0c7QUFFSCxJQUFhLGtCQUFrQixHQUEvQixNQUFhLGtCQUFrQjtJQW9IN0IsWUFDVSxNQUFjO1FBQWQsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQXBIeEI7Ozs7OztXQU1HO1FBQ0ksb0JBQWUsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUVwRTs7Ozs7V0FLRztRQUNJLFVBQUssR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUUxRDs7Ozs7OztXQU9HO1FBQ0ksZ0JBQVcsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUVoRTs7Ozs7V0FLRztRQUNJLGdCQUFXLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFFaEU7Ozs7O1dBS0c7UUFDSSxpQkFBWSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBRWpFOzs7OztXQUtHO1FBQ0ksWUFBTyxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBRTVEOzs7OztXQUtHO1FBQ0ksZ0JBQVcsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUVoRTs7Ozs7V0FLRztRQUNJLGlCQUFZLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFFakU7Ozs7Ozs7V0FPRztRQUNJLFdBQU0sR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUUzRDs7Ozs7V0FLRztRQUNJLGFBQVEsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUU3RDs7Ozs7V0FLRztRQUNJLFlBQU8sR0FB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ZixDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNJLEdBQUcsQ0FBQyxXQUFtQixFQUFFLFNBQWlCO1FBQy9DLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUMvQixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7U0FDdkQ7SUFDSCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLFVBQVUsQ0FBQyxTQUFpQjtRQUNqQyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFTyxpQkFBaUIsQ0FBQyxXQUFtQjtRQUMzQyxPQUFPLG9CQUFvQixXQUFXLGtCQUFrQixDQUFDO0lBQzNELENBQUM7SUFFTyxrQkFBa0IsQ0FBQyxXQUFtQjtRQUM1QyxPQUFPLG9CQUFvQixXQUFXLGtCQUFrQixDQUFDO0lBQzNELENBQUM7Q0FDRixDQUFBOztZQXJsQm1CLE1BQU07O0FBckhiLGtCQUFrQjtJQUQ5QixVQUFVLEVBQUU7R0FDQSxrQkFBa0IsQ0Ewc0I5QjtTQTFzQlksa0JBQWtCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJbmplY3RhYmxlLCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIERhdGFHcm91cENvbGxlY3Rpb25UeXBlLFxuICBEYXRhSXRlbUNvbGxlY3Rpb25UeXBlLFxuICBEYXRlVHlwZSxcbiAgSWRUeXBlLFxuICBUaW1lbGluZSxcbiAgVGltZWxpbmVBbmltYXRpb25PcHRpb25zLFxuICBUaW1lbGluZUV2ZW50UHJvcGVydGllc1Jlc3VsdCxcbiAgVGltZWxpbmVPcHRpb25zXG59IGZyb20gJ3Zpcy10aW1lbGluZSc7XG5cbi8qKlxuICogQSBzZXJ2aWNlIHRvIGNyZWF0ZSwgbWFuYWdlIGFuZCBjb250cm9sIFZpc1RpbWVsaW5lIGluc3RhbmNlcy5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgVmlzVGltZWxpbmVTZXJ2aWNlXG4gKi9cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBWaXNUaW1lbGluZVNlcnZpY2Uge1xuICAvKipcbiAgICogRmlyZWQgd2hlbiB0aGUgY3VycmVudCB0aW1lIGJhciByZWRyYXdzLlxuICAgKiBUaGUgcmF0ZSBkZXBlbmRzIG9uIHRoZSB6b29tIGxldmVsLlxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPGFueT59XG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBjdXJyZW50VGltZVRpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gY2xpY2tlZCBpbnNpZGUgdGhlIFRpbWVsaW5lLlxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPGFueT59XG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBjbGljazogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiByaWdodC1jbGlja2VkIGluc2lkZSB0aGUgVGltZWxpbmUuXG4gICAqIE5vdGUgdGhhdCBpbiBvcmRlciB0byBwcmV2ZW50IHRoZSBjb250ZXh0IG1lbnUgZnJvbSBzaG93aW5nIHVwLFxuICAgKiBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBldmVudCBtdXN0IGJlIHN0b3BwZWQuXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGNvbnRleHRtZW51OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIGRvdWJsZSBjbGlja2VkIGluc2lkZSB0aGUgVGltZWxpbmUuXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGRvdWJsZUNsaWNrOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBcdEZpcmVkIGFmdGVyIHRoZSBkcmFnZ2luZyBvZiBhIGdyb3VwIGlzIGZpbmlzaGVkLlxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPGFueT59XG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBncm91cERyYWdnZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEZpcmVkIG9uY2UgYWZ0ZXIgZWFjaCBncmFwaCByZWRyYXcuXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGNoYW5nZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEZpcmVkIHJlcGVhdGVkbHkgd2hlbiB0aGUgdGltZWxpbmUgd2luZG93IGlzIGJlaW5nIGNoYW5nZWQuXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIHJhbmdlY2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCBvbmNlIGFmdGVyIHRoZSB0aW1lbGluZSB3aW5kb3cgaGFzIGJlZW4gY2hhbmdlZC5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50RW1pdHRlcjxhbnk+fVxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVTZXJ2aWNlXG4gICAqL1xuICBwdWJsaWMgcmFuZ2VjaGFuZ2VkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCBhZnRlciB0aGUgdXNlciBzZWxlY3RzIG9yIGRlc2VsZWN0cyBpdGVtcyBieSB0YXBwaW5nIG9yIGhvbGRpbmcgdGhlbS5cbiAgICogV2hlbiBhIHVzZSB0YXBzIGFuIGFscmVhZHkgc2VsZWN0ZWQgaXRlbSwgdGhlIHNlbGVjdCBldmVudCBpcyBmaXJlZCBhZ2Fpbi5cbiAgICogTm90IGZpcmVkIHdoZW4gdGhlIG1ldGhvZCBzZXRTZWxlY3Rpb25pcyBleGVjdXRlZC5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50RW1pdHRlcjxhbnk+fVxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVTZXJ2aWNlXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB1c2VyIG1vdmVzIHRoZSBtb3VzZSBvdmVyIGFuIGl0ZW0uXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGl0ZW1vdmVyOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB1c2VyIG1vdmVzIHRoZSBtb3VzZSBvdXQgb2YgYW4gaXRlbS5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50RW1pdHRlcjxhbnk+fVxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVTZXJ2aWNlXG4gICAqL1xuICBwdWJsaWMgaXRlbW91dDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogRmlyZWQgcmVwZWF0ZWRseSB3aGVuIHRoZSB1c2VyIGlzIGRyYWdnaW5nIHRoZSBjdXN0b20gdGltZSBiYXIuXG4gICAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gdGhlIGN1c3RvbSB0aW1lIGJhciBpcyBlbmFibGVkLlxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPGFueT59XG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyB0aW1lY2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBGaXJlZCBvbmNlIGFmdGVyIHRoZSB1c2VyIGhhcyBkcmFnZ2VkIHRoZSBjdXN0b20gdGltZSBiYXIuXG4gICAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gdGhlIGN1c3RvbSB0aW1lIGJhciBpcyBlbmFibGVkLlxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPGFueT59XG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyB0aW1lY2hhbmdlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBwcml2YXRlIGV2ZW50czogTWFwPHN0cmluZywgRXZlbnRFbWl0dGVyPGFueT4+ID0gbmV3IE1hcCgpO1xuXG4gIHByaXZhdGUgdGltZWxpbmVzOiB7IFtpZDogc3RyaW5nXTogVGltZWxpbmUgfSA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmVcbiAgKSB7IH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyB0aW1lbGluZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgSFRNTCBlbGVtZW50IHRoYXQgY29udGFpbnMgdGhlIHRpbWVsaW5lIHZpZXcuXG4gICAqIEBwYXJhbSB7VmlzVGltZWxpbmVJdGVtc30gaXRlbXMgVGhlIGluaXRpYWwgdGltZWxpbmUgaXRlbXMuXG4gICAqIEBwYXJhbSB7VmlzVGltZWxpbmVPcHRpb25zfSBbb3B0aW9uc10gVGhlIHRpbWVsaW5lIG9wdGlvbnMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBhbHJlYWR5IGV4aXN0cy5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGNyZWF0ZVdpdGhJdGVtcyh2aXNUaW1lbGluZTogc3RyaW5nLCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtczogRGF0YUl0ZW1Db2xsZWN0aW9uVHlwZSwgb3B0aW9ucz86IFRpbWVsaW5lT3B0aW9ucyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmFscmVhZHlFeGlzdHNFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cblxuICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSA9IHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IG5ldyBUaW1lbGluZShjb250YWluZXIsIGl0ZW1zLCBvcHRpb25zKSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyB0aW1lbGluZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgSFRNTCBlbGVtZW50IHRoYXQgY29udGFpbnMgdGhlIHRpbWVsaW5lIHZpZXcuXG4gICAqIEBwYXJhbSB7VmlzVGltZWxpbmVJdGVtc30gaXRlbXMgVGhlIGluaXRpYWwgdGltZWxpbmUgaXRlbXMuXG4gICAqIEBwYXJhbSB7VmlzVGltZWxpbmVHcm91cHN9IGdyb3VwcyBUaGUgaW5pdGlhbCB0aW1lbGluZSBncm91cHMuXG4gICAqIEBwYXJhbSB7VmlzVGltZWxpbmVPcHRpb25zfSBbb3B0aW9uc10gVGhlIHRpbWVsaW5lIG9wdGlvbnMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBhbHJlYWR5IGV4aXN0cy5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGNyZWF0ZVdpdGhJdGVtc0FuZEdyb3VwcyhcbiAgICB2aXNUaW1lbGluZTogc3RyaW5nLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgaXRlbXM6IERhdGFJdGVtQ29sbGVjdGlvblR5cGUsXG4gICAgZ3JvdXBzOiBEYXRhR3JvdXBDb2xsZWN0aW9uVHlwZSxcbiAgICBvcHRpb25zPzogVGltZWxpbmVPcHRpb25zXG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmFscmVhZHlFeGlzdHNFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cblxuICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSA9IHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IG5ldyBUaW1lbGluZShjb250YWluZXIsIGl0ZW1zLCBncm91cHMsIG9wdGlvbnMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHZlcnRpY2FsIGJhciByZXByZXNlbnRpbmcgYSBjdXN0b20gdGltZSB0aGF0IGNhbiBiZSBkcmFnZ2VkIGJ5IHRoZSB1c2VyLlxuICAgKiBUaGUgaWQgaXMgYWRkZWQgYXMgQ1NTIGNsYXNzIG5hbWUgb2YgdGhlIGN1c3RvbSB0aW1lIGJhcixcbiAgICogYWxsb3dpbmcgdG8gc3R5bGUgbXVsdGlwbGUgdGltZSBiYXJzIGRpZmZlcmVudGx5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtEYXRlVHlwZX0gdGltZSBQYXJhbWV0ZXIgdGltZSBjYW4gYmUgYSBEYXRlLCBOdW1iZXIsIG9yIFN0cmluZywgYW5kIGlzIG5ldyBEYXRlKCkgYnkgZGVmYXVsdC5cbiAgICogQHBhcmFtIHtJZFR5cGV9IFtpZF0gUGFyYW1ldGVyIGlkIGNhbiBiZSBOdW1iZXIgb3IgU3RyaW5nIGFuZCBpcyB1bmRlZmluZWQgYnkgZGVmYXVsdC5cbiAgICogQHJldHVybnMge0lkVHlwZX0gVGhlIG1ldGhvZCByZXR1cm5zIGlkIG9mIHRoZSBjcmVhdGVkIGJhci5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9IFRocm93biB3aGVuIHRpbWVsaW5lIGRvZXMgbm90IGV4aXN0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVTZXJ2aWNlXG4gICAqL1xuICBwdWJsaWMgYWRkQ3VzdG9tVGltZSh2aXNUaW1lbGluZTogc3RyaW5nLCB0aW1lOiBEYXRlVHlwZSwgaWQ/OiBJZFR5cGUpOiBJZFR5cGUge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uYWRkQ3VzdG9tVGltZSh0aW1lLCBpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkanVzdCB0aGUgdmlzaWJsZSB3aW5kb3cgc3VjaCB0aGF0IGl0IGZpdHMgYWxsIGl0ZW1zLlxuICAgKiBTZWUgYWxzbyBmdW5jdGlvbiBmb2N1cyhpZCkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2aXNUaW1lbGluZSBUaGUgdGltZWxpbmUgbmFtZS9pZGVudGlmaWVyLlxuICAgKiBAcGFyYW0ge1RpbWVsaW5lQW5pbWF0aW9uT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGZpdCh2aXNUaW1lbGluZTogc3RyaW5nLCBvcHRpb25zPzogVGltZWxpbmVBbmltYXRpb25PcHRpb25zKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSkge1xuICAgICAgdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLmZpdChvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRqdXN0IHRoZSB2aXNpYmxlIHdpbmRvdyBzdWNoIHRoYXQgdGhlIHNlbGVjdGVkIGl0ZW0gaXMgY2VudGVyZWQgb24gc2NyZWVuLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtJZFR5cGV9IGlkIFRoZSBpZCBvZiB0aGUgaXRlbS5cbiAgICogQHBhcmFtIHtUaW1lbGluZUFuaW1hdGlvbk9wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zIG9wdGlvbnMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGZvY3VzT25JZCh2aXNUaW1lbGluZTogc3RyaW5nLCBpZDogSWRUeXBlLCBvcHRpb25zPzogVGltZWxpbmVBbmltYXRpb25PcHRpb25zKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSkge1xuICAgICAgdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLmZvY3VzKGlkLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRqdXN0IHRoZSB2aXNpYmxlIHdpbmRvdyBzdWNoIHRoYXQgdGhlIHNlbGVjdGVkIGl0ZW1zIGFyZSBjZW50ZXJlZCBvbiBzY3JlZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2aXNUaW1lbGluZSBUaGUgdGltZWxpbmUgbmFtZS9pZGVudGlmaWVyLlxuICAgKiBAcGFyYW0ge0lkVHlwZVtdfSBpZHMgVGhlIGl0ZW0gaWRzLlxuICAgKiBAcGFyYW0ge1RpbWVsaW5lQW5pbWF0aW9uT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGZvY3VzT25JZHModmlzVGltZWxpbmU6IHN0cmluZywgaWRzOiBJZFR5cGVbXSwgb3B0aW9ucz86IFRpbWVsaW5lQW5pbWF0aW9uT3B0aW9ucyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5mb2N1cyhpZHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgdGltZS5cbiAgICogT25seSBhcHBsaWNhYmxlIHdoZW4gb3B0aW9uIHNob3dDdXJyZW50VGltZSBpcyB0cnVlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHJldHVybnMge0RhdGV9IFRoZSBjdXJyZW50IHRpbWUuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGdldEN1cnJlbnRUaW1lKHZpc1RpbWVsaW5lOiBzdHJpbmcpOiBEYXRlIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICByZXR1cm4gdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLmdldEN1cnJlbnRUaW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBjdXN0b20gdGltZSBmcm9tIHRoZSBjdXN0b20gdGltZSBiYXIgd2l0aCBnaXZlbiBpZC5cbiAgICogSWQgaXMgdW5kZWZpbmVkIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2aXNUaW1lbGluZSBUaGUgdGltZWxpbmUgbmFtZS9pZGVudGlmaWVyLlxuICAgKiBAcGFyYW0ge0lkVHlwZX0gW2lkXSBUaGUgdGltZSBiYXIgaWQuXG4gICAqIEByZXR1cm5zIHtEYXRlfSBUaGUgY3VzdG9tIHRpbWUuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGdldEN1c3RvbVRpbWUodmlzVGltZWxpbmU6IHN0cmluZywgaWQ/OiBJZFR5cGUpOiBEYXRlIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICByZXR1cm4gdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLmdldEN1c3RvbVRpbWUoaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIE9iamVjdCB3aXRoIHJlbGV2YW50IHByb3BlcnRpZXMgZnJvbSBhbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICogQHJldHVybnMge1Zpc1RpbWVsaW5lRXZlbnRQcm9wZXJ0aWVzUmVzdWx0fSBQcm9wZXJ0aWVzIG9mIGFuIGV2ZW50XG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGdldEV2ZW50UHJvcGVydGllcyh2aXNUaW1lbGluZTogc3RyaW5nLCBldmVudDogRXZlbnQpOiBUaW1lbGluZUV2ZW50UHJvcGVydGllc1Jlc3VsdCB7XG4gICAgaWYgKHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSkge1xuICAgICAgcmV0dXJuIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5nZXRFdmVudFByb3BlcnRpZXMoZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJhbmdlIG9mIGFsbCB0aGUgaXRlbXMgYXMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgbWluOiBEYXRlIGFuZCBtYXg6IERhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2aXNUaW1lbGluZSBUaGUgdGltZWxpbmUgbmFtZS9pZGVudGlmaWVyLlxuICAgKiBAcmV0dXJucyB7eyBtaW46IERhdGUsIG1heDogRGF0ZSB9fSBUaGUgbWluIGFuZCBtYXggZGF0ZXMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGdldEl0ZW1SYW5nZSh2aXNUaW1lbGluZTogc3RyaW5nKTogeyBtaW46IERhdGU7IG1heDogRGF0ZSB9IHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICByZXR1cm4gdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLmdldEl0ZW1SYW5nZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gYXJyYXkgd2l0aCB0aGUgaWRzIG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2aXNUaW1lbGluZSBUaGUgdGltZWxpbmUgbmFtZS9pZGVudGlmaWVyLlxuICAgKiBAcmV0dXJucyB7SWRUeXBlW119IFRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbXMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGdldFNlbGVjdGlvbih2aXNUaW1lbGluZTogc3RyaW5nKTogSWRUeXBlW10ge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uZ2V0U2VsZWN0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBhcnJheSB3aXRoIHRoZSBpZHMgb2YgdGhlIGN1cnJlbnRseSB2aXNpYmxlIGl0ZW1zLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHJldHVybnMge0lkVHlwZVtdfSBUaGUgY3VycmVudGx5IHZpc2libGUgaXRlbXMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGdldFZpc2libGVJdGVtcyh2aXNUaW1lbGluZTogc3RyaW5nKTogSWRUeXBlW10ge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uZ2V0VmlzaWJsZUl0ZW1zKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCB2aXNpYmxlIHdpbmRvdy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEByZXR1cm5zIHt7IHN0YXJ0OiBEYXRlLCBlbmQ6IERhdGUgfX0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHN0YXJ0OiBEYXRlIGFuZCBlbmQ6IERhdGUuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIGdldFdpbmRvdyh2aXNUaW1lbGluZTogc3RyaW5nKTogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0ge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uZ2V0V2luZG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx0TW92ZSB0aGUgd2luZG93IHN1Y2ggdGhhdCBnaXZlbiB0aW1lIGlzIGNlbnRlcmVkIG9uIHNjcmVlbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7RGF0ZVR5cGV9IHRpbWUgUGFyYW1ldGVyIHRpbWUgY2FuIGJlIGEgRGF0ZSwgTnVtYmVyLCBvciBTdHJpbmcuXG4gICAqIEBwYXJhbSB7VGltZWxpbmVBbmltYXRpb25PcHRpb25zfSBbb3B0aW9uc10gT3B0aW9uYWwgb3B0aW9ucy5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9IFRocm93biB3aGVuIHRpbWVsaW5lIGRvZXMgbm90IGV4aXN0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVTZXJ2aWNlXG4gICAqL1xuICBwdWJsaWMgbW92ZVRvKHZpc1RpbWVsaW5lOiBzdHJpbmcsIHRpbWU6IERhdGVUeXBlLCBvcHRpb25zPzogVGltZWxpbmVBbmltYXRpb25PcHRpb25zKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSkge1xuICAgICAgdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLm1vdmVUbyh0aW1lLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yY2UgYSByZWRyYXcgb2YgdGhlIFRpbWVsaW5lLlxuICAgKiBUaGUgc2l6ZSBvZiBhbGwgaXRlbXMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXG4gICAqIENhbiBiZSB1c2VmdWwgdG8gbWFudWFsbHkgcmVkcmF3IHdoZW4gb3B0aW9uIGF1dG9SZXNpemU9ZmFsc2UgYW5kIHRoZSB3aW5kb3cgaGFzIGJlZW4gcmVzaXplZCxcbiAgICogb3Igd2hlbiB0aGUgaXRlbXMgQ1NTIGhhcyBiZWVuIGNoYW5nZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2aXNUaW1lbGluZSBUaGUgdGltZWxpbmUgbmFtZS9pZGVudGlmaWVyLlxuICAgKlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3duIHdoZW4gdGltZWxpbmUgZG9lcyBub3QgZXhpc3QuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyByZWRyYXcodmlzVGltZWxpbmU6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5yZWRyYXcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHZlcnRpY2FsIGJhcnMgcHJldmlvdXNseSBhZGRlZCB0byB0aGUgdGltZWxpbmUgdmlhIGFkZEN1c3RvbVRpbWUgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtJZFR5cGV9IGlkIFBhcmFtZXRlciBpZCBpcyB0aGUgSUQgb2YgdGhlIGN1c3RvbSB2ZXJ0aWNhbCBiYXIgcmV0dXJuZWQgYnkgYWRkQ3VzdG9tVGltZSBtZXRob2QuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIHJlbW92ZUN1c3RvbVRpbWUodmlzVGltZWxpbmU6IHN0cmluZywgaWQ6IElkVHlwZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5yZW1vdmVDdXN0b21UaW1lKGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgY3VycmVudCB0aW1lLlxuICAgKiBUaGlzIGNhbiBiZSB1c2VkIGZvciBleGFtcGxlIHRvIGVuc3VyZSB0aGF0IGEgY2xpZW50J3MgdGltZSBpcyBzeW5jaHJvbml6ZWRcbiAgICogd2l0aCBhIHNoYXJlZCBzZXJ2ZXIgdGltZS5cbiAgICogT25seSBhcHBsaWNhYmxlIHdoZW4gb3B0aW9uIHNob3dDdXJyZW50VGltZSBpcyB0cnVlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtEYXRlVHlwZX0gdGltZSB0aW1lIGNhbiBiZSBhIERhdGUgb2JqZWN0LCBudW1lcmljIHRpbWVzdGFtcCwgb3IgSVNPIGRhdGUgc3RyaW5nLlxuICAgKlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3duIHdoZW4gdGltZWxpbmUgZG9lcyBub3QgZXhpc3QuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBzZXRDdXJyZW50VGltZSh2aXNUaW1lbGluZTogc3RyaW5nLCB0aW1lOiBEYXRlVHlwZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5zZXRDdXJyZW50VGltZSh0aW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHRBZGp1c3QgdGhlIHRpbWUgb2YgYSBjdXN0b20gdGltZSBiYXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2aXNUaW1lbGluZSBUaGUgdGltZWxpbmUgbmFtZS9pZGVudGlmaWVyLlxuICAgKiBAcGFyYW0ge0RhdGVUeXBlfSB0aW1lIFBhcmFtZXRlciB0aW1lIGNhbiBiZSBhIERhdGUgb2JqZWN0LCBudW1lcmljIHRpbWVzdGFtcCwgb3IgSVNPIGRhdGUgc3RyaW5nLlxuICAgKiBAcGFyYW0ge0lkVHlwZX0gW2lkXSBQYXJhbWV0ZXIgaWQgaXMgdGhlIGlkIG9mIHRoZSBjdXN0b20gdGltZSBiYXIsIGFuZCBpcyB1bmRlZmluZWQgYnkgZGVmYXVsdC5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9IFRocm93biB3aGVuIHRpbWVsaW5lIGRvZXMgbm90IGV4aXN0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVTZXJ2aWNlXG4gICAqL1xuICBwdWJsaWMgc2V0Q3VzdG9tVGltZSh2aXNUaW1lbGluZTogc3RyaW5nLCB0aW1lOiBEYXRlVHlwZSwgaWQ/OiBJZFR5cGUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uc2V0Q3VzdG9tVGltZSh0aW1lLCBpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkanVzdCB0aGUgdGl0bGUgYXR0cmlidXRlIG9mIGEgY3VzdG9tIHRpbWUgYmFyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlIFBhcmFtZXRlciB0aXRsZSBpcyB0aGUgc3RyaW5nIHRvIGJlIHNldCBhcyB0aXRsZS5cbiAgICogICAgICAgICAgICAgICAgICAgICAgIFVzZSBlbXB0eSBzdHJpbmcgdG8gaGlkZSB0aGUgdGl0bGUgY29tcGxldGVseS5cbiAgICogQHBhcmFtIHtJZFR5cGV9IFtpZF0gUGFyYW1ldGVyIGlkIGlzIHRoZSBpZCBvZiB0aGUgY3VzdG9tIHRpbWUgYmFyLCBhbmQgaXMgdW5kZWZpbmVkIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIHNldEN1c3RvbVRpbWVUaXRsZSh2aXNUaW1lbGluZTogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBpZD86IElkVHlwZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5zZXRDdXN0b21UaW1lVGl0bGUodGl0bGUsIGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGJvdGggZ3JvdXBzIGFuZCBpdGVtcyBhdCBvbmNlLlxuICAgKiBCb3RoIHByb3BlcnRpZXMgYXJlIG9wdGlvbmFsLlxuICAgKiBUaGlzIGlzIGEgY29udmVuaWVuY2UgbWV0aG9kIGZvciBpbmRpdmlkdWFsbHkgY2FsbGluZyBib3RoIHNldEl0ZW1zKGl0ZW1zKSBhbmQgc2V0R3JvdXBzKGdyb3VwcykuXG4gICAqIEJvdGggaXRlbXMgYW5kIGdyb3VwcyBjYW4gYmUgYW4gQXJyYXkgd2l0aCBPYmplY3RzLCBhIERhdGFTZXQgKG9mZmVyaW5nIDIgd2F5IGRhdGEgYmluZGluZyksXG4gICAqIG9yIGEgRGF0YVZpZXcgKG9mZmVyaW5nIDEgd2F5IGRhdGEgYmluZGluZykuXG4gICAqIEZvciBlYWNoIG9mIHRoZSBncm91cHMsIHRoZSBpdGVtcyBvZiB0aGUgdGltZWxpbmUgYXJlIGZpbHRlcmVkIG9uIHRoZSBwcm9wZXJ0eSBncm91cCxcbiAgICogd2hpY2ggbXVzdCBjb3JyZXNwb25kIHdpdGggdGhlIGlkIG9mIHRoZSBncm91cC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7eyBncm91cHM/OiBWaXNUaW1lbGluZUdyb3VwczsgaXRlbXM/OiBWaXNUaW1lbGluZUl0ZW1zIH19IGRhdGEgVGhlIG5ldyB0aW1saW5lIGRhdGEuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIHNldERhdGEodmlzVGltZWxpbmU6IHN0cmluZywgZGF0YTogeyBncm91cHM/OiBEYXRhR3JvdXBDb2xsZWN0aW9uVHlwZTsgaXRlbXM/OiBEYXRhSXRlbUNvbGxlY3Rpb25UeXBlIH0pOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uc2V0RGF0YShkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgZGF0YSBzZXQgd2l0aCBncm91cHMgZm9yIHRoZSBUaW1lbGluZS5cbiAgICogRm9yIGVhY2ggb2YgdGhlIGdyb3VwcywgdGhlIGl0ZW1zIG9mIHRoZSB0aW1lbGluZSBhcmUgZmlsdGVyZWQgb24gdGhlIHByb3BlcnR5IGdyb3VwLFxuICAgKiB3aGljaCBtdXN0IGNvcnJlc3BvbmQgd2l0aCB0aGUgaWQgb2YgdGhlIGdyb3VwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtWaXNUaW1lbGluZUdyb3Vwc30gZ3JvdXBzIGEgRGF0YVNldCAob2ZmZXJpbmcgMiB3YXkgZGF0YSBiaW5kaW5nKVxuICAgKlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3duIHdoZW4gdGltZWxpbmUgZG9lcyBub3QgZXhpc3QuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBzZXRHcm91cHModmlzVGltZWxpbmU6IHN0cmluZywgZ3JvdXBzOiBEYXRhR3JvdXBDb2xsZWN0aW9uVHlwZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5zZXRHcm91cHMoZ3JvdXBzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuZG9lc05vdEV4aXN0RXJyb3IodmlzVGltZWxpbmUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgZGF0YSBzZXQgd2l0aCBpdGVtcyBmb3IgdGhlIFRpbWVsaW5lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtWaXNUaW1lbGluZUl0ZW1zfSBpdGVtcyBjYW4gYmUgYW4gQXJyYXkgd2l0aCBPYmplY3RzLCBhIERhdGFTZXQgKG9mZmVyaW5nIDIgd2F5IGRhdGEgYmluZGluZylcbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9IFRocm93biB3aGVuIHRpbWVsaW5lIGRvZXMgbm90IGV4aXN0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzVGltZWxpbmVTZXJ2aWNlXG4gICAqL1xuICBwdWJsaWMgc2V0SXRlbXModmlzVGltZWxpbmU6IHN0cmluZywgaXRlbXM6IERhdGFJdGVtQ29sbGVjdGlvblR5cGUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uc2V0SXRlbXMoaXRlbXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgb3IgdXBkYXRlIG9wdGlvbnMuXG4gICAqIEl0IGlzIHBvc3NpYmxlIHRvIGNoYW5nZSBhbnkgb3B0aW9uIG9mIHRoZSB0aW1lbGluZSBhdCBhbnkgdGltZS5cbiAgICogWW91IGNhbiBmb3IgZXhhbXBsZSBzd2l0Y2ggb3JpZW50YXRpb24gb24gdGhlIGZseS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7VmlzVGltZWxpbmVPcHRpb25zfSBvcHRpb25zIFRoZSBuZXcgb3B0aW9ucyBvZiB0aGUgdGltZWxpbmUuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIHNldE9wdGlvbnModmlzVGltZWxpbmU6IHN0cmluZywgb3B0aW9uczogVGltZWxpbmVPcHRpb25zKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSkge1xuICAgICAgdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdCBvbmUgaXRlbSBieSBpdHMgaWQuI1xuICAgKiBUaGUgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW1zIHdpbGwgYmUgdW5zZWxlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7SWRUeXBlfSBpZCBUaGUgaWQgb2YgdGhlIGl0ZW0gdGhhdCBzaG91bGQgYmUgc2VsZWN0ZWQuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIHNldFNlbGVjdGlvblRvSWQodmlzVGltZWxpbmU6IHN0cmluZywgaWQ6IElkVHlwZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0pIHtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5zZXRTZWxlY3Rpb24oaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgbXVsdGlwbGUgaXRlbXMgYnkgdGhlaXIgaWQuXG4gICAqIFRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbXMgd2lsbCBiZSB1bnNlbGVjdGVkLlxuICAgKiBUbyB1bnNlbGVjdCBhbGwgc2VsZWN0ZWQgaXRlbXMsIGNhbGwgYHNldFNlbGVjdGlvbihbXSlgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtJZFR5cGVbXX0gaWRzIFRoZSBpZHMgb2YgdGhlIGlyZW1zIHRoYXQgc2hvdWxkIGJlIHNlbGVjdGVkLlxuICAgKlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3duIHdoZW4gdGltZWxpbmUgZG9lcyBub3QgZXhpc3QuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBzZXRTZWxlY3Rpb25Ub0lkcyh2aXNUaW1lbGluZTogc3RyaW5nLCBpZHM6IElkVHlwZVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXSkge1xuICAgICAgdGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdLnNldFNlbGVjdGlvbihpZHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1cnJlbnQgdmlzaWJsZSB3aW5kb3cuXG4gICAqXG4gICAqIElmIHRoZSBwYXJhbWV0ZXIgdmFsdWUgb2Ygc3RhcnQgb3IgZW5kIGlzIG51bGwsIHRoZSBwYXJhbWV0ZXIgd2lsbCBiZSBsZWZ0IHVuY2hhbmdlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7RGF0ZVR5cGV9IHN0YXJ0IFRoZSBwYXJhbWV0ZXJzIHN0YXJ0IGNhbiBiZSBhIERhdGUsIE51bWJlciwgb3IgU3RyaW5nLlxuICAgKiBAcGFyYW0ge0RhdGVUeXBlfSBlbmQgVGhlIHBhcmFtZXRlcnMgZW5kIGNhbiBiZSBhIERhdGUsIE51bWJlciwgb3IgU3RyaW5nLlxuICAgKiBAcGFyYW0ge1RpbWVsaW5lQW5pbWF0aW9uT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd24gd2hlbiB0aW1lbGluZSBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIHNldFdpbmRvdyh2aXNUaW1lbGluZTogc3RyaW5nLCBzdGFydDogRGF0ZVR5cGUsIGVuZDogRGF0ZVR5cGUsIG9wdGlvbnM/OiBUaW1lbGluZUFuaW1hdGlvbk9wdGlvbnMpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uc2V0V2luZG93KHN0YXJ0LCBlbmQsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5kb2VzTm90RXhpc3RFcnJvcih2aXNUaW1lbGluZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBUaW1lbGluZS5cbiAgICogVGhlIHRpbWVsaW5lIGlzIHJlbW92ZWQgZnJvbSBtZW1vcnkuXG4gICAqIEFsbCBET00gZWxlbWVudHMgYW5kIGV2ZW50IGxpc3RlbmVycyBhcmUgY2xlYW5lZCB1cC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBkZXN0cm95KHZpc1RpbWVsaW5lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0uZGVzdHJveSgpO1xuICAgICAgZGVsZXRlIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGVzIGFuIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzVGltZWxpbmUgVGhlIHRpbWVsaW5lIG5hbWUvaWRlbnRpZmllci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBwcmV2ZW50RGVmYXVsdCBTdG9wcyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUgZXZlbnQuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgd2hlbiB0aGUgZXZlbnQgd2FzIGFjdGl2YXRlZC5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc1RpbWVsaW5lU2VydmljZVxuICAgKi9cbiAgcHVibGljIG9uKHZpc1RpbWVsaW5lOiBzdHJpbmcsIGV2ZW50TmFtZTogc3RyaW5nLCBwcmV2ZW50RGVmYXVsdD86IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICB0aGlzLmV2ZW50cy5zZXQoZXZlbnROYW1lLCBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKSk7XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIGNvbnN0IHRoYXQ6IHsgW2luZGV4OiBzdHJpbmddOiBhbnkgfSA9IHRoaXM7XG4gICAgICB0aGlzLnRpbWVsaW5lc1t2aXNUaW1lbGluZV0ub24oZXZlbnROYW1lLCAocGFyYW1zOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgZW1pdHRlciA9ICh0aGF0W2V2ZW50TmFtZV0gfHwgdGhhdC5ldmVudHMuZ2V0KGV2ZW50TmFtZSkpIGFzIEV2ZW50RW1pdHRlcjxhbnk+O1xuICAgICAgICBpZiAoZW1pdHRlcikge1xuICAgICAgICAgIGVtaXR0ZXIuZW1pdChwYXJhbXMgPyBbdmlzVGltZWxpbmVdLmNvbmNhdChwYXJhbXMpIDogdmlzVGltZWxpbmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2ZW50RGVmYXVsdCAmJiBwYXJhbXMuZXZlbnQpIHtcbiAgICAgICAgICBwYXJhbXMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWFjdGl2YXRlcyBhbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpc1RpbWVsaW5lIFRoZSB0aW1lbGluZSBuYW1lL2lkZW50aWZpZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNUaW1lbGluZVNlcnZpY2VcbiAgICovXG4gIHB1YmxpYyBvZmYodmlzVGltZWxpbmU6IHN0cmluZywgZXZlbnROYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lbGluZXNbdmlzVGltZWxpbmVdKSB7XG4gICAgICB0aGlzLmV2ZW50cy5kZWxldGUoZXZlbnROYW1lKTtcbiAgICAgIHRoaXMudGltZWxpbmVzW3Zpc1RpbWVsaW5lXS5vZmYoZXZlbnROYW1lLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGV2ZW50IGVtaXR0ZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgZXZlbnQgbmFtZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZS5cbiAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcjxhbnk+fSBUaGUgZXZlbnQgZW1pdHRlciBvZiB0aGUgc3BlY2lmaWVkIGV2ZW50IG5hbWUuXG4gICAqL1xuICBwdWJsaWMgZ2V0RW1pdHRlcihldmVudE5hbWU6IHN0cmluZyk6IEV2ZW50RW1pdHRlcjxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMuZ2V0KGV2ZW50TmFtZSk7XG4gIH1cblxuICBwcml2YXRlIGRvZXNOb3RFeGlzdEVycm9yKHZpc1RpbWVsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBgVGltZWxpbmUgd2l0aCBpZCAke3Zpc1RpbWVsaW5lfSBkb2VzIG5vdCBleGlzdC5gO1xuICB9XG5cbiAgcHJpdmF0ZSBhbHJlYWR5RXhpc3RzRXJyb3IodmlzVGltZWxpbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBUaW1lbGluZSB3aXRoIGlkICR7dmlzVGltZWxpbmV9IGFscmVhZHkgZXhpc3RzLmA7XG4gIH1cbn1cbiJdfQ==