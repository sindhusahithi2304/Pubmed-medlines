import * as tslib_1 from "tslib";
import { Directive, ElementRef, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChange } from '@angular/core';
import { VisNetworkService } from './vis-network.service';
/**
 * Use this directive with a div container to show network data.
 *
 * @export
 * @class VisNetworkDirective
 * @implements {OnInit}
 * @implements {OnDestroy}
 * @implements {OnChanges}
 */
let VisNetworkDirective = class VisNetworkDirective {
    /**
     * Creates an instance of VisNetworkDirective.
     *
     * @param {ElementRef} elementRef The HTML element reference.
     * @param {VisNetworkService} visNetworkService The VisNetworkService.
     *
     * @memberOf VisNetworkDirective
     */
    constructor(elementRef, visNetworkService) {
        this.elementRef = elementRef;
        this.visNetworkService = visNetworkService;
        /**
         * This event will be raised when the network is initialized.
         * At this point of time the network is successfully registered
         * with the VisNetworkService and you can register to events.
         * The event data is the name of the network as a string.
         *
         * @type {EventEmitter<any>}
         * @memberOf VisNetworkDirective
         */
        this.initialized = new EventEmitter();
        this.isInitialized = false;
        this.visNetworkContainer = elementRef.nativeElement;
    }
    /**
     * Create the network when at least visNetwork and visData
     * are defined.
     *
     * @memberOf VisNetworkDirective
     */
    ngOnInit() {
        if (!this.isInitialized && this.visNetwork && this.visNetworkData) {
            this.createNetwork();
        }
    }
    /**
     * Update the network data or options on reference changes to
     * the visData or visOptions properties.
     *
     * @param {{[propName: string]: SimpleChange}} changes
     *
     * @memberOf VisNetworkDirective
     */
    ngOnChanges(changes) {
        if (!this.isInitialized && this.visNetwork && this.visNetworkData) {
            this.createNetwork();
        }
        for (const propertyName in changes) {
            if (changes.hasOwnProperty(propertyName)) {
                const change = changes[propertyName];
                if (!change.isFirstChange()) {
                    if (propertyName === 'visData') {
                        this.visNetworkService.setData(this.visNetwork, changes[propertyName].currentValue);
                    }
                    if (propertyName === 'visOptions') {
                        this.visNetworkService.setOptions(this.visNetwork, changes[propertyName].currentValue);
                    }
                }
            }
        }
    }
    /**
     * Calls the destroy function for this network instance.
     *
     * @memberOf VisNetworkDirective
     */
    ngOnDestroy() {
        this.isInitialized = false;
        this.visNetworkService.destroy(this.visNetwork);
    }
    createNetwork() {
        this.visNetworkService.create(this.visNetwork, this.visNetworkContainer, this.visNetworkData, this.visNetworkOptions);
        this.isInitialized = true;
        this.initialized.emit(this.visNetwork);
    }
};
VisNetworkDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: VisNetworkService }
];
tslib_1.__decorate([
    Input('visNetwork')
], VisNetworkDirective.prototype, "visNetwork", void 0);
tslib_1.__decorate([
    Input()
], VisNetworkDirective.prototype, "visNetworkData", void 0);
tslib_1.__decorate([
    Input()
], VisNetworkDirective.prototype, "visNetworkOptions", void 0);
tslib_1.__decorate([
    Output()
], VisNetworkDirective.prototype, "initialized", void 0);
VisNetworkDirective = tslib_1.__decorate([
    Directive({
        selector: '[visNetwork]'
    })
], VisNetworkDirective);
export { VisNetworkDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzLW5ldHdvcmsuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXZpcy8iLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbmV0d29yay92aXMtbmV0d29yay5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvSCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRDs7Ozs7Ozs7R0FRRztBQUlILElBQWEsbUJBQW1CLEdBQWhDLE1BQWEsbUJBQW1CO0lBa0Q5Qjs7Ozs7OztPQU9HO0lBQ0gsWUFBMkIsVUFBc0IsRUFBVSxpQkFBb0M7UUFBcEUsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUFVLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUF2Qi9GOzs7Ozs7OztXQVFHO1FBRUksZ0JBQVcsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUd4RCxrQkFBYSxHQUFZLEtBQUssQ0FBQztRQVdyQyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsVUFBVSxDQUFDLGFBQWEsQ0FBQztJQUN0RCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxRQUFRO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ2pFLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0ksV0FBVyxDQUFDLE9BQTZDO1FBQzlELElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNqRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDdEI7UUFFRCxLQUFLLE1BQU0sWUFBWSxJQUFJLE9BQU8sRUFBRTtZQUNsQyxJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLEVBQUU7Z0JBQ3hDLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsRUFBRTtvQkFDM0IsSUFBSSxZQUFZLEtBQUssU0FBUyxFQUFFO3dCQUM5QixJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDO3FCQUNyRjtvQkFDRCxJQUFJLFlBQVksS0FBSyxZQUFZLEVBQUU7d0JBQ2pDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUM7cUJBQ3hGO2lCQUNGO2FBQ0Y7U0FDRjtJQUNILENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksV0FBVztRQUNoQixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztRQUMzQixJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRU8sYUFBYTtRQUNuQixJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDdEgsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7UUFDMUIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7Q0FDRixDQUFBOztZQTNEd0MsVUFBVTtZQUE2QixpQkFBaUI7O0FBakQvRjtJQURDLEtBQUssQ0FBQyxZQUFZLENBQUM7dURBQ007QUFZMUI7SUFEQyxLQUFLLEVBQUU7MkRBQ29CO0FBWTVCO0lBREMsS0FBSyxFQUFFOzhEQUMwQjtBQVlsQztJQURDLE1BQU0sRUFBRTt3REFDdUQ7QUE3Q3JELG1CQUFtQjtJQUgvQixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsY0FBYztLQUN6QixDQUFDO0dBQ1csbUJBQW1CLENBcUgvQjtTQXJIWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgU2ltcGxlQ2hhbmdlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEYXRhLCBPcHRpb25zIH0gZnJvbSAndmlzLW5ldHdvcmsnO1xuXG5pbXBvcnQgeyBWaXNOZXR3b3JrU2VydmljZSB9IGZyb20gJy4vdmlzLW5ldHdvcmsuc2VydmljZSc7XG5cbi8qKlxuICogVXNlIHRoaXMgZGlyZWN0aXZlIHdpdGggYSBkaXYgY29udGFpbmVyIHRvIHNob3cgbmV0d29yayBkYXRhLlxuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBWaXNOZXR3b3JrRGlyZWN0aXZlXG4gKiBAaW1wbGVtZW50cyB7T25Jbml0fVxuICogQGltcGxlbWVudHMge09uRGVzdHJveX1cbiAqIEBpbXBsZW1lbnRzIHtPbkNoYW5nZXN9XG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1t2aXNOZXR3b3JrXSdcbn0pXG5leHBvcnQgY2xhc3MgVmlzTmV0d29ya0RpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBPbkNoYW5nZXMge1xuICAvKipcbiAgICogVGhlIG5hbWUgb3IgaWRlbnRpZmllciBvZiB0aGUgbmV0d29yayAobXVzdCBiZSB1bmlxdWUgaW4geW91ciBhcHBsaWNhdGlvbikuXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBvbmNlIG9uIGluaXQgYW5kIG11c3Qgbm90IGJlIGNoYW5nZWQuXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJPZiBWaXNOZXR3b3JrRGlyZWN0aXZlXG4gICAqL1xuICBASW5wdXQoJ3Zpc05ldHdvcmsnKVxuICBwdWJsaWMgdmlzTmV0d29yazogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZGF0YSB0aGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdGhlIG5ldHdvcmsuXG4gICAqIENoYW5nZXMgdG8gdGhlIG5vZGVzIG9yIGVkZ2VzIHByb3BlcnR5IHdvbid0IGJlIGRldGVjdGVkIGJ1dFxuICAgKiBjaGFuZ2VzIHRvIHRoZSByZWZlcmVuY2Ugb2YgdGhpcyBvYmplY3QuXG4gICAqIENoYW5nZXMgbGVhZCB0byBhIGNhbGwgdG8gc2V0RGF0YSBvZiB0aGlzIG5ldHdvcmsgaW5zdGFuY2UuXG4gICAqXG4gICAqIEB0eXBlIHtEYXRhfVxuICAgKiBAbWVtYmVyT2YgVmlzTmV0d29ya0RpcmVjdGl2ZVxuICAgKi9cbiAgQElucHV0KClcbiAgcHVibGljIHZpc05ldHdvcmtEYXRhOiBEYXRhO1xuXG4gIC8qKlxuICAgKiBUaGUgb3B0aW9ucyB0aGF0IHdpbGwgYmUgdXNlZCB3aXRoIHRoaXMgbmV0d29yayBpbnN0YW5jZS5cbiAgICogT25seSByZWZlcmVuY2UgY2hhbmdlcyB0byB0aGUgd2hvbGUgb3B0aW9ucyBvYmplY3Qgd2lsbCBiZSBkZXRlY3RlZFxuICAgKiBidXQgbm90IGNoYW5nZXMgdG8gcHJvcGVydGllcy5cbiAgICogQ2hhbmdlcyBsZWFkIHRvIGEgY2FsbCB0byBzZXRPcHRpb25zIG9mIHRoZSBuZXR3b3JrIGluc3RhbmNlLlxuICAgKlxuICAgKiBAdHlwZSB7VmlzT3B0aW9uc31cbiAgICogQG1lbWJlck9mIFZpc05ldHdvcmtEaXJlY3RpdmVcbiAgICovXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyB2aXNOZXR3b3JrT3B0aW9uczogT3B0aW9ucztcblxuICAvKipcbiAgICogVGhpcyBldmVudCB3aWxsIGJlIHJhaXNlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGluaXRpYWxpemVkLlxuICAgKiBBdCB0aGlzIHBvaW50IG9mIHRpbWUgdGhlIG5ldHdvcmsgaXMgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWRcbiAgICogd2l0aCB0aGUgVmlzTmV0d29ya1NlcnZpY2UgYW5kIHlvdSBjYW4gcmVnaXN0ZXIgdG8gZXZlbnRzLlxuICAgKiBUaGUgZXZlbnQgZGF0YSBpcyB0aGUgbmFtZSBvZiB0aGUgbmV0d29yayBhcyBhIHN0cmluZy5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50RW1pdHRlcjxhbnk+fVxuICAgKiBAbWVtYmVyT2YgVmlzTmV0d29ya0RpcmVjdGl2ZVxuICAgKi9cbiAgQE91dHB1dCgpXG4gIHB1YmxpYyBpbml0aWFsaXplZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBwcml2YXRlIHZpc05ldHdvcmtDb250YWluZXI6IGFueTtcbiAgcHJpdmF0ZSBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVmlzTmV0d29ya0RpcmVjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50UmVmfSBlbGVtZW50UmVmIFRoZSBIVE1MIGVsZW1lbnQgcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge1Zpc05ldHdvcmtTZXJ2aWNlfSB2aXNOZXR3b3JrU2VydmljZSBUaGUgVmlzTmV0d29ya1NlcnZpY2UuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBWaXNOZXR3b3JrRGlyZWN0aXZlXG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIHZpc05ldHdvcmtTZXJ2aWNlOiBWaXNOZXR3b3JrU2VydmljZSkge1xuICAgIHRoaXMudmlzTmV0d29ya0NvbnRhaW5lciA9IGVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIG5ldHdvcmsgd2hlbiBhdCBsZWFzdCB2aXNOZXR3b3JrIGFuZCB2aXNEYXRhXG4gICAqIGFyZSBkZWZpbmVkLlxuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzTmV0d29ya0RpcmVjdGl2ZVxuICAgKi9cbiAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkICYmIHRoaXMudmlzTmV0d29yayAmJiB0aGlzLnZpc05ldHdvcmtEYXRhKSB7XG4gICAgICB0aGlzLmNyZWF0ZU5ldHdvcmsoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBuZXR3b3JrIGRhdGEgb3Igb3B0aW9ucyBvbiByZWZlcmVuY2UgY2hhbmdlcyB0b1xuICAgKiB0aGUgdmlzRGF0YSBvciB2aXNPcHRpb25zIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7e1twcm9wTmFtZTogc3RyaW5nXTogU2ltcGxlQ2hhbmdlfX0gY2hhbmdlc1xuICAgKlxuICAgKiBAbWVtYmVyT2YgVmlzTmV0d29ya0RpcmVjdGl2ZVxuICAgKi9cbiAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IHsgW3Byb3BOYW1lOiBzdHJpbmddOiBTaW1wbGVDaGFuZ2UgfSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkICYmIHRoaXMudmlzTmV0d29yayAmJiB0aGlzLnZpc05ldHdvcmtEYXRhKSB7XG4gICAgICB0aGlzLmNyZWF0ZU5ldHdvcmsoKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHByb3BlcnR5TmFtZSBpbiBjaGFuZ2VzKSB7XG4gICAgICBpZiAoY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgIGNvbnN0IGNoYW5nZSA9IGNoYW5nZXNbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgaWYgKCFjaGFuZ2UuaXNGaXJzdENoYW5nZSgpKSB7XG4gICAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ3Zpc0RhdGEnKSB7XG4gICAgICAgICAgICB0aGlzLnZpc05ldHdvcmtTZXJ2aWNlLnNldERhdGEodGhpcy52aXNOZXR3b3JrLCBjaGFuZ2VzW3Byb3BlcnR5TmFtZV0uY3VycmVudFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ3Zpc09wdGlvbnMnKSB7XG4gICAgICAgICAgICB0aGlzLnZpc05ldHdvcmtTZXJ2aWNlLnNldE9wdGlvbnModGhpcy52aXNOZXR3b3JrLCBjaGFuZ2VzW3Byb3BlcnR5TmFtZV0uY3VycmVudFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgdGhlIGRlc3Ryb3kgZnVuY3Rpb24gZm9yIHRoaXMgbmV0d29yayBpbnN0YW5jZS5cbiAgICpcbiAgICogQG1lbWJlck9mIFZpc05ldHdvcmtEaXJlY3RpdmVcbiAgICovXG4gIHB1YmxpYyBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnZpc05ldHdvcmtTZXJ2aWNlLmRlc3Ryb3kodGhpcy52aXNOZXR3b3JrKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTmV0d29yaygpOiB2b2lkIHtcbiAgICB0aGlzLnZpc05ldHdvcmtTZXJ2aWNlLmNyZWF0ZSh0aGlzLnZpc05ldHdvcmssIHRoaXMudmlzTmV0d29ya0NvbnRhaW5lciwgdGhpcy52aXNOZXR3b3JrRGF0YSwgdGhpcy52aXNOZXR3b3JrT3B0aW9ucyk7XG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLmluaXRpYWxpemVkLmVtaXQodGhpcy52aXNOZXR3b3JrKTtcbiAgfVxufVxuIl19